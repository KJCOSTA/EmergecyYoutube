# Repository Snapshot
Generated on Mon Jan 26 09:03:18 PM UTC 2026

====================================================================
## Branch: main
====================================================================

### File Structure
```
.env.example
app/actions/github.ts
app/actions/settings.ts
app/actions/vercel.ts
app/api/ai/generate/route.ts
app/api/ai/stream/route.ts
app/api/approve/route.ts
app/api/config/keys/route.ts
app/api/config/test-key/route.ts
app/api/files/download/route.ts
app/api/files/list/route.ts
app/api/health/route.ts
app/api/images/generate/route.ts
app/api/inngest/route.ts
app/api/media/search/route.ts
app/api/models/route.ts
app/api/proposal/description/route.ts
app/api/proposal/rationale/route.ts
app/api/proposal/script/route.ts
app/api/proposal/soundtrack/route.ts
app/api/proposal/tags/route.ts
app/api/proposal/titles/route.ts
app/api/render/route.ts
app/api/research/route.ts
app/api/status/route.ts
app/api/storyboard/route.ts
app/api/system/health/route.ts
app/api/test-connection/route.ts
app/api/tts/route.ts
app/api/upload/route.ts
app/api/youtube/channel/route.ts
app/api/youtube/upload/route.ts
app/approve/[token]/page.tsx
app/approve/feedback-sent/page.tsx
app/approve/success/page.tsx
app/documentation/design-system/page.tsx
app/documentation/page.tsx
app/globals.css
app/layout.tsx
app/page.tsx
app/settings/page.tsx
app/step/1-input/page.tsx
app/step/2-research/page.tsx
app/step/4-proposal/page.tsx
app/step/5-studio/page.tsx
app/step/6-upload/page.tsx
app/workflow/page.tsx
components/AIModelSelector.tsx
components/ApiKeysModal.tsx
components/AssetCard.tsx
components/ConnectApisModal.tsx
components/FileDropzone.tsx
components/GuidelinesModal.tsx
components/Layout.tsx
components/ModelsExplorer.tsx
components/VercelToolbar.tsx
components/design-system/ColorSwatch.tsx
components/design-system/ComponentPreview.tsx
components/design-system/GradientCard.tsx
components/design-system/TypographySample.tsx
components/design-system/index.ts
components/documentation/AnimatedSection.tsx
components/documentation/CopyButton.tsx
components/documentation/CurrentStateTab.tsx
components/documentation/DecisionsTab.tsx
components/documentation/GenesisTab.tsx
components/documentation/IntegrationsTab.tsx
components/documentation/ShareButtons.tsx
components/documentation/SystemVisionTab.tsx
components/documentation/TechStackTab.tsx
components/documentation/content.ts
components/documentation/index.ts
components/proposal/ThumbnailEditor.tsx
components/settings/AppearanceTab.tsx
components/settings/DocsManagerTab.tsx
components/settings/FilesTab.tsx
components/settings/IntegrationsTab.tsx
components/settings/LogsTab.tsx
components/settings/ProfileTab.tsx
components/settings/SystemMonitorTab.tsx
components/studio/AIMediaGenerator.tsx
components/studio/MediaSearchModal.tsx
components/studio/MediaUploader.tsx
components/system/SystemStatus.tsx
components/ui/ActivityLog.tsx
components/ui/Badge.tsx
components/ui/Button.tsx
components/ui/Card.tsx
components/ui/Input.tsx
components/ui/Modal.tsx
components/ui/ProgressBar.tsx
components/ui/Select.tsx
components/ui/StepIndicator.tsx
components/ui/StreamingText.tsx
components/ui/Textarea.tsx
components/ui/Toggle.tsx
components/workflow/ModeSelector.tsx
lib/agents/adaptive-analysis-agent.ts
lib/agents/index.ts
lib/agents/research-agent.ts
lib/agents/script-agent.ts
lib/ai.ts
lib/api-keys-store.ts
lib/api-keys.ts
lib/branding.ts
lib/db/index.ts
lib/db/prisma.ts
lib/design-tokens.ts
lib/docs-manager.ts
lib/documentation-export.ts
lib/get-api-key.ts
lib/inngest/client.ts
lib/inngest/functions/video-pipeline.ts
lib/integration-tokens.ts
lib/logger.ts
lib/services/notification.service.ts
lib/services/render.service.ts
lib/services/research.service.ts
lib/services/script.service.ts
lib/services/spreadsheet.service.ts
lib/services/storyboard.service.ts
lib/services/upload.service.ts
lib/share-context.tsx
lib/store.ts
lib/system/api-registry.ts
lib/system/boot.ts
lib/user-profile.ts
lib/utils.ts
lib/workflow-logger.ts
lib/workflow-modes.ts
next.config.js
next.config.ts
package.json
prisma/schema.prisma
tailwind.config.ts
tsconfig.json
```

### File Content
---
#### `.env.example`

```
# YouTube API
YOUTUBE_API_KEY=
YOUTUBE_CHANNEL_ID=
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=

# AI Providers
OPENAI_API_KEY=
GOOGLE_GENERATIVE_AI_API_KEY=
ANTHROPIC_API_KEY=

# Media APIs
PEXELS_API_KEY=
PIXABAY_API_KEY=
UNSPLASH_ACCESS_KEY=

# Video Rendering
JSON2VIDEO_API_KEY=

# Optional: Text-to-Speech
ELEVENLABS_API_KEY=

# Optional: Research
TAVILY_API_KEY=

# Optional: Image Generation
REPLICATE_API_TOKEN=
STABILITY_API_KEY=

# GitHub Integration
GITHUB_TOKEN=

# Vercel Integration (for comments and deployments)
VERCEL_TOKEN=
VERCEL_PROJECT_ID=
VERCEL_TEAM_ID=

# Vercel Blob Storage (upload de arquivos - avatares, thumbnails, etc)
BLOB_READ_WRITE_TOKEN=

# Email Notifications (Resend - sistema de aprovação)
RESEND_API_KEY=
NOTIFICATION_EMAIL=

# Application URL (para links em emails e notificações)
NEXT_PUBLIC_URL=

# Vercel Toolbar - Habilita menções @Claude em produção
# Para funcionar em produção, configure também as variáveis acima
NEXT_PUBLIC_VERCEL_ENV=production

```

---
#### `app/actions/github.ts`

```
'use server';

import { getIntegrationTokens } from '@/lib/integration-tokens';
import type { GitHubCommit, GitHubCommitsResponse } from '@/types';

/**
 * Fetch recent commits from GitHub
 */
export async function fetchGitHubCommits(limit: number = 20): Promise<GitHubCommitsResponse> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.github) {
      return {
        commits: [],
        error: 'GitHub integration not configured',
      };
    }

    const { token, owner, repo } = tokens.github;

    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}/commits?per_page=${limit}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          Accept: 'application/vnd.github.v3+json',
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        commits: [],
        error: `GitHub API error: ${response.status} - ${errorText}`,
      };
    }

    const data = await response.json();

    interface GitHubAPICommit {
      sha: string;
      html_url: string;
      commit: {
        message: string;
        author: {
          name: string;
          date: string;
        };
      };
    }

    const commits: GitHubCommit[] = (data as GitHubAPICommit[]).map((commit) => ({
      sha: commit.sha.substring(0, 7),
      message: commit.commit.message,
      author: commit.commit.author.name,
      date: commit.commit.author.date,
      url: commit.html_url,
    }));

    return { commits };
  } catch (error) {
    console.error('Failed to fetch GitHub commits:', error);
    return {
      commits: [],
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Test GitHub connection
 */
export async function testGitHubConnection(): Promise<{ success: boolean; error?: string }> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.github) {
      return {
        success: false,
        error: 'GitHub integration not configured',
      };
    }

    const { token, owner, repo } = tokens.github;

    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          Accept: 'application/vnd.github.v3+json',
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        success: false,
        error: `GitHub API error: ${response.status} - ${errorText}`,
      };
    }

    return { success: true };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Generate auto-update changelog from recent commits
 */
export async function generateChangelogFromCommits(): Promise<string> {
  try {
    const { commits, error } = await fetchGitHubCommits(10);

    if (error || commits.length === 0) {
      return '# Changelog\n\nNenhum commit encontrado ou erro ao buscar dados.';
    }

    let changelog = '# Changelog Automático\n\n';
    changelog += `*Última atualização: ${new Date().toLocaleString('pt-BR')}*\n\n`;
    changelog += '## Commits Recentes\n\n';

    commits.forEach((commit) => {
      const date = new Date(commit.date).toLocaleDateString('pt-BR');
      changelog += `- **${date}** - ${commit.message} (${commit.author})\n`;
    });

    return changelog;
  } catch (error) {
    console.error('Failed to generate changelog:', error);
    return '# Changelog\n\nErro ao gerar changelog.';
  }
}

```

---
#### `app/actions/settings.ts`

```
'use server';

import {
  getUserProfile,
  updateUserProfile as updateProfileLib,
} from '@/lib/user-profile';
import {
  getAllDocs,
  getDocById,
  getDocsByCategory,
  getVisibleDocs,
  createDoc as createDocLib,
  updateDoc as updateDocLib,
  deleteDoc as deleteDocLib,
  reorderDocs as reorderDocsLib,
} from '@/lib/docs-manager';
import {
  getIntegrationTokens,
  updateGitHubTokens as updateGitHubLib,
  updateVercelTokens as updateVercelLib,
  removeGitHubTokens as removeGitHubLib,
  removeVercelTokens as removeVercelLib,
} from '@/lib/integration-tokens';
import {
  logSystemEvent,
  getSystemLogs,
  clearSystemLogs as clearLogsLib,
  searchLogs as searchLogsLib,
  getLogsByLevel,
  getLogsBySource,
} from '@/lib/logger';
import {
  getBrandingConfig as getBrandingLib,
  updateBrandingConfig as updateBrandingLib,
  resetBrandingConfig as resetBrandingLib,
} from '@/lib/branding';
import type { UserProfile, DocPage, DocCategory, IntegrationTokens, SystemLog, LogLevel, LogSource, BrandingConfig } from '@/types';

// ============================================
// User Profile Actions
// ============================================

export async function getProfile(): Promise<UserProfile> {
  return getUserProfile();
}

export async function updateProfile(
  updates: Partial<Omit<UserProfile, 'id' | 'createdAt'>>
): Promise<UserProfile> {
  const profile = await updateProfileLib(updates);
  await logSystemEvent('info', 'user', 'Perfil atualizado');
  return profile;
}

// ============================================
// Documentation Actions
// ============================================

export async function getDocs() {
  return getAllDocs();
}

export async function getDoc(id: string) {
  return getDocById(id);
}

export async function getDocsByCateg(category: DocCategory) {
  return getDocsByCategory(category);
}

export async function getVisibleDocsAction() {
  return getVisibleDocs();
}

export async function createDocPage(
  doc: Omit<DocPage, 'id' | 'createdAt' | 'updatedAt'>
): Promise<DocPage> {
  const newDoc = await createDocLib(doc);
  await logSystemEvent('success', 'system', `Nova página de documentação criada: ${newDoc.title}`);
  return newDoc;
}

export async function updateDocPage(
  id: string,
  updates: Partial<Omit<DocPage, 'id' | 'createdAt'>>
): Promise<DocPage | null> {
  const updatedDoc = await updateDocLib(id, updates);
  if (updatedDoc) {
    await logSystemEvent('info', 'system', `Página de documentação atualizada: ${updatedDoc.title}`);
  }
  return updatedDoc;
}

export async function deleteDocPage(id: string): Promise<boolean> {
  const success = await deleteDocLib(id);
  if (success) {
    await logSystemEvent('warning', 'system', `Página de documentação removida: ID ${id}`);
  }
  return success;
}

export async function reorderDocPages(docIds: string[]): Promise<void> {
  await reorderDocsLib(docIds);
  await logSystemEvent('info', 'system', 'Ordem das páginas de documentação atualizada');
}

// ============================================
// Integration Tokens Actions
// ============================================

export async function getTokens(): Promise<IntegrationTokens> {
  return getIntegrationTokens();
}

export async function saveGitHubTokens(
  token: string,
  owner: string,
  repo: string
): Promise<IntegrationTokens> {
  const tokens = await updateGitHubLib(token, owner, repo);
  await logSystemEvent('success', 'system', `Integração GitHub configurada: ${owner}/${repo}`);
  return tokens;
}

export async function saveVercelTokens(
  token: string,
  projectId: string
): Promise<IntegrationTokens> {
  const tokens = await updateVercelLib(token, projectId);
  await logSystemEvent('success', 'system', `Integração Vercel configurada: ${projectId}`);
  return tokens;
}

export async function removeGitHubTokensAction(): Promise<IntegrationTokens> {
  const tokens = await removeGitHubLib();
  await logSystemEvent('warning', 'system', 'Integração GitHub removida');
  return tokens;
}

export async function removeVercelTokensAction(): Promise<IntegrationTokens> {
  const tokens = await removeVercelLib();
  await logSystemEvent('warning', 'system', 'Integração Vercel removida');
  return tokens;
}

// ============================================
// Logs Actions
// ============================================

export async function getLogs(limit?: number): Promise<SystemLog[]> {
  return getSystemLogs(limit);
}

export async function clearLogs(): Promise<void> {
  await clearLogsLib();
  await logSystemEvent('warning', 'system', 'Logs do sistema limpos');
}

export async function searchSystemLogs(query: string): Promise<SystemLog[]> {
  return searchLogsLib(query);
}

export async function getLogsByLevelAction(level: LogLevel): Promise<SystemLog[]> {
  return getLogsByLevel(level);
}

export async function getLogsBySourceAction(source: LogSource): Promise<SystemLog[]> {
  return getLogsBySource(source);
}

export async function addLog(
  level: LogLevel,
  source: LogSource,
  message: string,
  details?: Record<string, unknown>
): Promise<void> {
  await logSystemEvent(level, source, message, details);
}

// ============================================
// Branding Actions (White Label)
// ============================================

export async function getBranding(): Promise<BrandingConfig> {
  return getBrandingLib();
}

export async function updateBranding(
  updates: Partial<Omit<BrandingConfig, 'updatedAt'>>
): Promise<BrandingConfig> {
  const config = await updateBrandingLib(updates);
  await logSystemEvent('success', 'system', `Configuração de branding atualizada: ${config.systemName}`);
  return config;
}

export async function resetBranding(): Promise<BrandingConfig> {
  const config = await resetBrandingLib();
  await logSystemEvent('info', 'system', 'Branding resetado para padrão ORION');
  return config;
}

```

---
#### `app/actions/vercel.ts`

```
'use server';

import { getIntegrationTokens } from '@/lib/integration-tokens';
import type { VercelDeployment, VercelDeploymentsResponse, VercelDeploymentState } from '@/types';

/**
 * Fetch recent deployments from Vercel
 */
export async function fetchVercelDeployments(limit: number = 20): Promise<VercelDeploymentsResponse> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.vercel) {
      return {
        deployments: [],
        error: 'Vercel integration not configured',
      };
    }

    const { token, projectId } = tokens.vercel;

    const response = await fetch(
      `https://api.vercel.com/v6/deployments?projectId=${projectId}&limit=${limit}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        deployments: [],
        error: `Vercel API error: ${response.status} - ${errorText}`,
      };
    }

    const data = await response.json();

    interface VercelAPIDeployment {
      uid: string;
      name: string;
      url: string;
      state: string;
      createdAt: number;
      readyState: string;
    }

    interface VercelAPIResponse {
      deployments: VercelAPIDeployment[];
    }

    const deployments: VercelDeployment[] = (data as VercelAPIResponse).deployments.map((deployment) => ({
      uid: deployment.uid,
      name: deployment.name,
      url: deployment.url,
      state: deployment.state as VercelDeploymentState,
      createdAt: deployment.createdAt,
      readyState: deployment.readyState,
    }));

    return { deployments };
  } catch (error) {
    console.error('Failed to fetch Vercel deployments:', error);
    return {
      deployments: [],
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Test Vercel connection
 */
export async function testVercelConnection(): Promise<{ success: boolean; error?: string }> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.vercel) {
      return {
        success: false,
        error: 'Vercel integration not configured',
      };
    }

    const { token } = tokens.vercel;

    const response = await fetch(
      'https://api.vercel.com/v2/user',
      {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        success: false,
        error: `Vercel API error: ${response.status} - ${errorText}`,
      };
    }

    return { success: true };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Get deployment status summary
 */
export async function getDeploymentSummary(): Promise<{
  total: number;
  ready: number;
  error: number;
  building: number;
}> {
  try {
    const { deployments } = await fetchVercelDeployments(50);

    const summary = {
      total: deployments.length,
      ready: deployments.filter(d => d.state === 'READY').length,
      error: deployments.filter(d => d.state === 'ERROR').length,
      building: deployments.filter(d => d.state === 'BUILDING').length,
    };

    return summary;
  } catch (error) {
    console.error('Failed to get deployment summary:', error);
    return {
      total: 0,
      ready: 0,
      error: 0,
      building: 0,
    };
  }
}

```

---
#### `app/api/ai/generate/route.ts`

```
import { createGoogleGenerativeAI } from '@ai-sdk/google';
import { createAnthropic } from '@ai-sdk/anthropic';
import { createOpenAI } from '@ai-sdk/openai';
import { streamObject } from 'ai';
import { z } from 'zod';

// Configuração segura dos provedores
const google = createGoogleGenerativeAI({ apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY });
const anthropic = createAnthropic({ apiKey: process.env.ANTHROPIC_API_KEY });
const openai = createOpenAI({ apiKey: process.env.OPENAI_API_KEY });

export const maxDuration = 60; // Permite gerações longas (Deep Research)

export async function POST(req: Request) {
  try {
    const { model, inputData, stepsData } = await req.json();

    // 1. Validação de Chaves (Para você ver o erro real se houver)
    if (model.includes('claude') && !process.env.ANTHROPIC_API_KEY) {
      throw new Error('ERRO CRÍTICO: Chave da Anthropic (ANTHROPIC_API_KEY) não encontrada no servidor.');
    }

    // 2. Seleção do Modelo Inteligente
    let selectedModel;
    if (model === 'gemini-2.0-flash') selectedModel = google('models/gemini-2.0-flash-exp');
    else if (model === 'gpt-4o') selectedModel = openai('gpt-4o');
    else if (model === 'claude-3-5-sonnet') selectedModel = anthropic('claude-3-5-sonnet-20240620');
    else selectedModel = google('models/gemini-1.5-flash'); // Fallback

    // 3. Montagem do Contexto "Deep Research" (Cruza Dados)
    const contextPrompt = `
      VOCÊ É UM ESTRATEGISTA DE YOUTUBE SÊNIOR E ESPECIALISTA EM DADOS.
      
      *** REGRA SUPREMA: A RESPOSTA DEVE SER 100% EM PORTUGUÊS DO BRASIL (PT-BR) ***
      
      SEU OBJETIVO:
      Realizar uma análise profunda, baseada em evidências, cruzando os dados internos do canal com tendências de mercado.
      
      DADOS DE ENTRADA (Analise tudo):
      - Métricas do Canal (CSV/JSON): ${JSON.stringify(inputData)}
      - Histórico/Steps Anteriores: ${JSON.stringify(stepsData)}
      
      DIRETRIZES DE ANÁLISE (Deep Research):
      1. NÃO seja genérico. Use números exatos dos dados fornecidos.
      2. Cruze a taxa de clique (CTR) com os títulos atuais e sugira melhorias específicas.
      3. Identifique padrões de retenção se houver dados de watchtime.
      4. Compare o desempenho do tema atual com a média do canal.
      
      ESTRUTURA DA RESPOSTA (JSON):
      Retorne um objeto JSON estrito com:
      - analise_interna: { pontos_fortes, pontos_fracos, padroes_ocultos }
      - analise_externa: { oportunidades_mercado, concorrencia, trends_atuais }
      - estrategia_sugerida: { titulo_matador, ideia_thumbnail, gancho_roteiro }
      - justificativa_baseada_em_dados: "Por que escolhi isso?"
    `;

    // 4. Geração com Estrutura Garantida (Zod)
    const result = await streamObject({
      model: selectedModel,
      system: "Você é um consultor expert de YouTube. Fale Português.",
      prompt: contextPrompt,
      schema: z.object({
        analise_interna: z.object({
          pontos_fortes: z.array(z.string()),
          pontos_fracos: z.array(z.string()),
          padroes_ocultos: z.string(),
        }),
        analise_externa: z.object({
          oportunidades_mercado: z.array(z.string()),
          trends_atuais: z.array(z.string()),
        }),
        estrategia: z.object({
          titulo_sugerido: z.string(),
          ideia_thumbnail: z.string(),
          explicacao_tecnica: z.string(),
        }),
      }),
    });

    return result.toTextStreamResponse();

  } catch (error) {
    console.error("ERRO NA GERAÇÃO:", error);
    const message = error instanceof Error ? error.message : 'Unknown error';
    return new Response(JSON.stringify({ error: message }), { status: 500 });
  }
}
```

---
#### `app/api/ai/stream/route.ts`

```
import { NextRequest } from "next/server";
import { streamText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      provider,
      model,
      systemPrompt,
      userPrompt,
      temperature = 0.7,
    } = body as {
      provider: AIProvider;
      model: string;
      systemPrompt: string;
      userPrompt: string;
      temperature?: number;
    };

    if (!provider || !model || !userPrompt) {
      return new Response(
        JSON.stringify({ error: "Missing required fields" }),
        { status: 400, headers: { "Content-Type": "application/json" } }
      );
    }

    // Get the appropriate model based on provider
    let aiModel;
    switch (provider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "OpenAI API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Google API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Anthropic API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = anthropic(model);
        break;
      default:
        return new Response(
          JSON.stringify({ error: `Unknown provider: ${provider}` }),
          { status: 400, headers: { "Content-Type": "application/json" } }
        );
    }

    const result = streamText({
      model: aiModel,
      system: systemPrompt,
      prompt: userPrompt,
      temperature,
    });

    return result.toTextStreamResponse();
  } catch (error) {
    console.error("AI Streaming error:", error);
    return new Response(
      JSON.stringify({ error: error instanceof Error ? error.message : "AI streaming failed" }),
      { status: 500, headers: { "Content-Type": "application/json" } }
    );
  }
}

```

---
#### `app/api/approve/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@/lib/db';
import { inngest } from '@/lib/inngest/client';

/**
 * POST /api/approve
 * Approve a pending script via token
 */
export async function POST(request: NextRequest) {
  try {
    const { token, action, feedback } = await request.json();

    if (!token) {
      return NextResponse.json(
        { error: 'Token is required' },
        { status: 400 }
      );
    }

    // Find workflow state by token
    const workflowState = await prisma.workflowState.findUnique({
      where: { approvalToken: token },
      include: {
        project: {
          include: { script: true },
        },
      },
    });

    if (!workflowState) {
      return NextResponse.json(
        { error: 'Invalid or expired token' },
        { status: 404 }
      );
    }

    if (workflowState.project.status !== 'AWAITING_APPROVAL') {
      return NextResponse.json(
        { error: 'Project is not awaiting approval' },
        { status: 400 }
      );
    }

    if (action === 'approve') {
      // Update project status
      await prisma.project.update({
        where: { id: workflowState.projectId },
        data: { status: 'APPROVED' },
      });

      // Update script as approved
      await prisma.script.update({
        where: { projectId: workflowState.projectId },
        data: {
          approved: true,
          approvedAt: new Date(),
        },
      });

      // Send approval event to Inngest to continue workflow
      await inngest.send({
        name: 'project/approved',
        data: {
          projectId: workflowState.projectId,
          feedback: feedback || undefined,
        },
      });

      return NextResponse.json({
        success: true,
        message: 'Script approved successfully',
        projectId: workflowState.projectId,
      });
    } else if (action === 'request_changes') {
      // Update script with feedback
      await prisma.script.update({
        where: { projectId: workflowState.projectId },
        data: {
          feedback: feedback || 'Changes requested',
        },
      });

      // Update workflow state
      await prisma.workflowState.update({
        where: { projectId: workflowState.projectId },
        data: {
          currentStep: 'script_revision',
        },
      });

      return NextResponse.json({
        success: true,
        message: 'Feedback submitted for revision',
        projectId: workflowState.projectId,
      });
    }

    return NextResponse.json(
      { error: 'Invalid action' },
      { status: 400 }
    );
  } catch (error) {
    console.error('[Approve API] Error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

/**
 * GET /api/approve?token=xxx
 * Get project details for approval page
 */
export async function GET(request: NextRequest) {
  try {
    const token = request.nextUrl.searchParams.get('token');

    if (!token) {
      return NextResponse.json(
        { error: 'Token is required' },
        { status: 400 }
      );
    }

    const workflowState = await prisma.workflowState.findUnique({
      where: { approvalToken: token },
      include: {
        project: {
          include: {
            script: true,
            research: true,
          },
        },
      },
    });

    if (!workflowState) {
      return NextResponse.json(
        { error: 'Invalid or expired token' },
        { status: 404 }
      );
    }

    return NextResponse.json({
      project: {
        id: workflowState.project.id,
        name: workflowState.project.name,
        topic: workflowState.project.topic,
        status: workflowState.project.status,
      },
      script: workflowState.project.script
        ? {
            title: workflowState.project.script.title,
            content: workflowState.project.script.content,
            sections: workflowState.project.script.sections,
          }
        : null,
      research: workflowState.project.research
        ? {
            summary: workflowState.project.research.summary,
          }
        : null,
      workflow: {
        currentStep: workflowState.currentStep,
        approvalSentAt: workflowState.approvalSentAt,
      },
    });
  } catch (error) {
    console.error('[Approve API] Error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/config/keys/route.ts`

```
import { NextResponse } from "next/server";
import { APIKeyStatus } from "@/types";

export async function GET() {
  const status: APIKeyStatus = {
    youtube: !!(process.env.YOUTUBE_API_KEY && process.env.YOUTUBE_CHANNEL_ID),
    openai: !!process.env.OPENAI_API_KEY,
    google: !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    unsplash: !!process.env.UNSPLASH_ACCESS_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    replicate: !!process.env.REPLICATE_API_TOKEN,
    stability: !!process.env.STABILITY_API_KEY,
  };

  return NextResponse.json(status);
}

```

---
#### `app/api/config/test-key/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic'; // Força o Next.js a não cachear esse teste

export async function POST(req: Request) {
  try {
    // 1. Recebe os dados de forma segura
    const body = await req.json();
    
    // Normaliza os nomes dos campos (aceita tanto o formato novo quanto o antigo)
    const provider = body.provider || body.service || body.id; 
    let key = body.key || body.keyValue || body.apiKey;

    // Se a chave não veio no corpo, tenta pegar das variáveis de ambiente (Servidor)
    if (!key && provider) {
       const envKeyName = provider.toUpperCase().includes('KEY') 
         ? provider.toUpperCase() 
         : `${provider.toUpperCase()}_API_KEY`;
       key = process.env[envKeyName];
    }

    // Se ainda não tem chave, erro.
    if (!key) {
      return NextResponse.json(
        { error: 'Nenhuma chave fornecida e nenhuma encontrada no servidor.' },
        { status: 400 }
      );
    }

    console.log(`[Test-Key] Testando conexão para: ${provider}...`);
    let isValid = false;
    let details = "";

    // 2. Lógica de Teste Simplificada (Usa FETCH nativo para não depender de libs)
    switch (provider) {
      case 'openai':
        // Teste leve na API da OpenAI
        const openaiRes = await fetch('https://api.openai.com/v1/models?limit=1', {
          headers: { 'Authorization': `Bearer ${key}` }
        });
        isValid = openaiRes.ok;
        if (!isValid) details = "API recusou a chave (401/403)";
        break;
      
      case 'google':
        // Teste para Google Gemini (Generative Language API)
        // Usa pageSize=1 para ser leve
        const geminiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}&pageSize=1`);
        isValid = geminiRes.ok;
        if (!isValid) {
             const err = await geminiRes.json();
             details = err.error?.message || "Erro na API do Google Gemini";
        }
        break;

      case 'youtube':
        // Teste na API do YouTube otimizado para economizar cota (1 unidade vs 100 unidades do search)
        // chart=mostPopular não requer autenticação de usuário, apenas a chave de API
        const ytRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${key}`);
        isValid = ytRes.ok;
        if (!isValid) {
            const err = await ytRes.json();
            details = err.error?.message || "Erro na API do YouTube";
        }
        break;
      
      case 'anthropic':
        // Teste na API da Anthropic
        const anthropicRes = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
                'x-api-key': key,
                'anthropic-version': '2023-06-01',
                'content-type': 'application/json'
            },
            body: JSON.stringify({
                model: "claude-3-haiku-20240307",
                max_tokens: 1,
                messages: [{ role: "user", content: "Hi" }]
            })
        });
        // Anthropic pode retornar 400 se o corpo for ruim, mas 401 se a chave for ruim.
        // Se passar do 401, a chave existe.
        isValid = anthropicRes.status !== 401 && anthropicRes.status !== 403;
        break;

      case 'pexels':
        const pexelsRes = await fetch('https://api.pexels.com/v1/curated?per_page=1', {
            headers: { 'Authorization': key }
        });
        isValid = pexelsRes.ok;
        break;

      case 'pixabay':
        const pixabayRes = await fetch(`https://pixabay.com/api/?key=${key}&q=test`);
        isValid = pixabayRes.ok;
        break;

      case 'json2video':
        const j2vRes = await fetch('https://api.json2video.com/v2/movie', {
            headers: { 'x-api-key': key }
        });
        // JSON2Video: 401 = Chave inválida. 
        // 405 (Method Not Allowed) ou 200 = Chave válida (passou da autenticação).
        isValid = j2vRes.status !== 401 && j2vRes.status !== 403;
        break;

      case 'elevenlabs':
        const elevenRes = await fetch('https://api.elevenlabs.io/v1/user', {
            headers: { 'xi-api-key': key }
        });
        isValid = elevenRes.ok;
        break;

      case 'tavily':
         // Teste real na API do Tavily (custará 1 crédito, mas garante a conexão)
         const tavilyRes = await fetch('https://api.tavily.com/search', {
             method: 'POST',
             headers: { 'Content-Type': 'application/json' },
             body: JSON.stringify({ api_key: key, query: "test", max_results: 1 })
         });
         isValid = tavilyRes.ok;
         if (!isValid) details = "Erro na API do Tavily (Chave inválida ou sem créditos)";
         break;

      default:
        // Fallback para serviços desconhecidos
        console.warn(`[Test-Key] Serviço desconhecido ${provider}, assumindo válido.`);
        isValid = true;
        details = "Serviço não verificado, formato aceito.";
    }

    // 3. Retorno
    if (isValid) {
      return NextResponse.json({ success: true, message: "Conexão estabelecida com sucesso!", details });
    } else {
      console.error(`[Test-Key] Falha para ${provider}: ${details}`);
      return NextResponse.json({ error: "A chave informada é inválida ou expirou.", details }, { status: 401 });
    }

  } catch (error) {
    console.error("Erro interno no teste de API:", error);
    const message = error instanceof Error ? error.message : "Erro interno no servidor";
    return NextResponse.json({ error: message }, { status: 500 });
  }
}
```

---
#### `app/api/files/download/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import fs from 'fs/promises';
import path from 'path';

export const dynamic = 'force-dynamic';

/**
 * GET /api/files/download?path=relative/path/to/file.json
 * Downloads a file from the data directory
 */
export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams;
    const relativePath = searchParams.get('path');

    if (!relativePath) {
      return NextResponse.json(
        { error: 'Missing path parameter' },
        { status: 400 }
      );
    }

    // Base directory - data folder
    const baseDir = path.join(process.cwd(), 'data');
    const filePath = path.join(baseDir, relativePath);

    // Security: prevent path traversal attacks
    if (!filePath.startsWith(baseDir)) {
      return NextResponse.json(
        { error: 'Invalid path' },
        { status: 403 }
      );
    }

    // Check if file exists
    try {
      const stats = await fs.stat(filePath);
      if (!stats.isFile()) {
        return NextResponse.json(
          { error: 'Path is not a file' },
          { status: 400 }
        );
      }
    } catch {
      return NextResponse.json(
        { error: 'File not found' },
        { status: 404 }
      );
    }

    // Read file
    const fileBuffer = await fs.readFile(filePath);
    const fileName = path.basename(filePath);

    // Determine content type
    const ext = path.extname(filePath).toLowerCase();
    let contentType = 'application/octet-stream';

    const contentTypes: Record<string, string> = {
      '.json': 'application/json',
      '.txt': 'text/plain',
      '.csv': 'text/csv',
      '.xml': 'application/xml',
      '.pdf': 'application/pdf',
      '.png': 'image/png',
      '.jpg': 'image/jpeg',
      '.jpeg': 'image/jpeg',
      '.gif': 'image/gif',
      '.svg': 'image/svg+xml',
      '.mp4': 'video/mp4',
      '.webm': 'video/webm',
      '.mp3': 'audio/mpeg',
      '.wav': 'audio/wav',
      '.zip': 'application/zip',
    };

    if (ext in contentTypes) {
      contentType = contentTypes[ext];
    }

    // Return file with appropriate headers
    return new NextResponse(fileBuffer, {
      headers: {
        'Content-Type': contentType,
        'Content-Disposition': `attachment; filename="${fileName}"`,
        'Content-Length': fileBuffer.length.toString(),
      },
    });
  } catch (error) {
    console.error('Failed to download file:', error);
    return NextResponse.json(
      { error: 'Failed to download file' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/files/list/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { list } from '@vercel/blob';
import type { DirectoryListing, FileEntry } from '@/types';

export const dynamic = 'force-dynamic';

/**
 * GET /api/files/list
 * Lists files from Vercel Blob storage
 */
export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams;
    const prefix = searchParams.get('path') || '';

    // List blobs with optional prefix (folder simulation)
    const { blobs } = await list({
      prefix: prefix ? `${prefix}/` : undefined,
      limit: 1000,
    });

    // Transform blobs into file entries
    const fileEntries: FileEntry[] = blobs.map((blob) => {
      // Extract filename from pathname
      const pathParts = blob.pathname.split('/');
      const name = pathParts[pathParts.length - 1];

      return {
        name,
        path: blob.pathname,
        type: 'file' as const,
        size: blob.size,
        modifiedAt: blob.uploadedAt.toISOString(),
        url: blob.url,
      };
    });

    // Group by folders to simulate directory structure
    const folders = new Set<string>();
    fileEntries.forEach((entry) => {
      const parts = entry.path.split('/');
      if (parts.length > 1) {
        // Add parent folders
        for (let i = 1; i < parts.length; i++) {
          const folderPath = parts.slice(0, i).join('/');
          if (folderPath && !prefix.startsWith(folderPath)) {
            folders.add(folderPath);
          }
        }
      }
    });

    // Filter entries based on current path
    let filteredEntries = fileEntries;
    if (prefix) {
      // Only show files directly in this "folder"
      filteredEntries = fileEntries.filter((entry) => {
        const relativePath = entry.path.replace(`${prefix}/`, '');
        return entry.path.startsWith(`${prefix}/`) && !relativePath.includes('/');
      });
    } else {
      // At root, show only top-level files and folders
      const topLevelFolders = new Set<string>();
      fileEntries.forEach((entry) => {
        const parts = entry.path.split('/');
        if (parts.length > 1) {
          topLevelFolders.add(parts[0]);
        }
      });

      // Add folder entries
      const folderEntries: FileEntry[] = Array.from(topLevelFolders).map((folder) => ({
        name: folder,
        path: folder,
        type: 'directory' as const,
        modifiedAt: new Date().toISOString(),
      }));

      // Keep only top-level files
      filteredEntries = fileEntries.filter((entry) => !entry.path.includes('/'));
      filteredEntries = [...folderEntries, ...filteredEntries];
    }

    // Sort: directories first, then alphabetically
    filteredEntries.sort((a, b) => {
      if (a.type !== b.type) {
        return a.type === 'directory' ? -1 : 1;
      }
      return a.name.localeCompare(b.name);
    });

    const response: DirectoryListing = {
      path: prefix,
      entries: filteredEntries,
      totalSize: blobs.reduce((acc, blob) => acc + blob.size, 0),
      totalFiles: blobs.length,
    };

    return NextResponse.json(response);
  } catch (error) {
    console.error('Failed to list files:', error);

    // If Vercel Blob is not configured, return empty list with message
    if (error instanceof Error && error.message.includes('BLOB_READ_WRITE_TOKEN')) {
      return NextResponse.json({
        path: '',
        entries: [],
        totalSize: 0,
        totalFiles: 0,
        message: 'Vercel Blob not configured. Add BLOB_READ_WRITE_TOKEN to environment variables.',
      });
    }

    return NextResponse.json(
      { error: 'Failed to list files' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/health/route.ts`

```
import { NextResponse } from "next/server";
import { systemBoot } from "@/lib/system/boot";

export async function GET() {
  const report = await systemBoot();
  return NextResponse.json(report);
}

```

---
#### `app/api/images/generate/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ImageProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { prompt, provider } = body as { prompt: string; provider: ImageProvider };

    if (!prompt || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: prompt, provider" },
        { status: 400 }
      );
    }

    let imageUrl: string;

    switch (provider) {
      case "dalle": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/images/generations", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "dall-e-3",
            prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look, 16:9 aspect ratio.`,
            n: 1,
            size: "1792x1024",
            quality: "standard",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "DALL-E generation failed");
        }

        const data = await response.json();
        imageUrl = data.data[0].url;
        break;
      }

      case "stability": {
        const apiKey = process.env.STABILITY_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Stability API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch(
          "https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/text-to-image",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify({
              text_prompts: [
                {
                  text: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
                  weight: 1,
                },
              ],
              cfg_scale: 7,
              width: 1344,
              height: 768,
              samples: 1,
              steps: 30,
            }),
          }
        );

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.message || "Stability generation failed");
        }

        const data = await response.json();
        const base64Image = data.artifacts[0].base64;
        imageUrl = `data:image/png;base64,${base64Image}`;
        break;
      }

      case "replicate": {
        const apiToken = process.env.REPLICATE_API_TOKEN;
        if (!apiToken) {
          return NextResponse.json(
            { error: "Replicate API token not configured" },
            { status: 400 }
          );
        }

        // Create prediction
        const createResponse = await fetch("https://api.replicate.com/v1/predictions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Token ${apiToken}`,
          },
          body: JSON.stringify({
            version: "39ed52f2a78e934b3ba6e2a89f5b1c712de7dfea535525255b1aa35c5565e08b",
            input: {
              prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
              width: 1344,
              height: 768,
              num_outputs: 1,
            },
          }),
        });

        if (!createResponse.ok) {
          throw new Error("Replicate prediction creation failed");
        }

        const prediction = await createResponse.json();
        let result = prediction;

        // Poll for completion
        while (result.status !== "succeeded" && result.status !== "failed") {
          await new Promise((resolve) => setTimeout(resolve, 1000));
          const statusResponse = await fetch(
            `https://api.replicate.com/v1/predictions/${result.id}`,
            {
              headers: {
                Authorization: `Token ${apiToken}`,
              },
            }
          );
          result = await statusResponse.json();
        }

        if (result.status === "failed") {
          throw new Error("Replicate generation failed");
        }

        imageUrl = result.output[0];
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown provider: ${provider}` },
          { status: 400 }
        );
    }

    return NextResponse.json({ imageUrl, provider });
  } catch (error) {
    console.error("Image generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Image generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/inngest/route.ts`

```
import { serve } from 'inngest/next';
import { inngest } from '@/lib/inngest/client';
import { functions } from '@/lib/inngest/functions/video-pipeline';

// Create and export the Inngest handler
export const { GET, POST, PUT } = serve({
  client: inngest,
  functions,
});

```

---
#### `app/api/media/search/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { MediaSource, MediaItem } from "@/types";
import { v4 as uuidv4 } from "uuid";

interface PexelsVideo {
  id: number;
  url: string;
  image: string;
  duration: number;
  video_files: Array<{
    id: number;
    quality: string;
    file_type: string;
    width: number;
    height: number;
    link: string;
  }>;
  user: { name: string };
}

interface PexelsPhoto {
  id: number;
  url: string;
  src: { original: string; medium: string };
  photographer: string;
}

interface PixabayHit {
  id: number;
  pageURL: string;
  webformatURL: string;
  largeImageURL: string;
  duration?: number;
  videos?: {
    medium: { url: string };
  };
  user: string;
}

interface UnsplashResult {
  id: string;
  urls: { regular: string; full: string };
  user: { name: string };
  links: { html: string };
}

async function searchPexelsVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/videos/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.videos?.map((video: PexelsVideo) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: video.id.toString(),
      url: video.video_files.find((f) => f.quality === "hd")?.link || video.video_files[0]?.link || "",
      previewUrl: video.image,
      type: "video" as const,
      duration: video.duration,
      attribution: `Pexels - ${video.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Pexels search error:", error);
    return [];
  }
}

async function searchPexelsPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.photos?.map((photo: PexelsPhoto) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: photo.id.toString(),
      url: photo.src.original,
      previewUrl: photo.src.medium,
      type: "image" as const,
      duration: null,
      attribution: `Pexels - ${photo.photographer}`,
    })) || [];
  } catch (error) {
    console.error("Pexels photos search error:", error);
    return [];
  }
}

async function searchPixabayVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/videos/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.videos?.medium?.url || "",
      previewUrl: hit.webformatURL || `https://i.vimeocdn.com/video/${hit.id}_640x360.jpg`,
      type: "video" as const,
      duration: hit.duration || null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay search error:", error);
    return [];
  }
}

async function searchPixabayPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12&image_type=photo`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.largeImageURL,
      previewUrl: hit.webformatURL,
      type: "image" as const,
      duration: null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay photos search error:", error);
    return [];
  }
}

async function searchUnsplash(query: string): Promise<MediaItem[]> {
  const accessKey = process.env.UNSPLASH_ACCESS_KEY;
  if (!accessKey) return [];

  try {
    const response = await fetch(
      `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: `Client-ID ${accessKey}` },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.results?.map((result: UnsplashResult) => ({
      id: uuidv4(),
      source: "unsplash" as MediaSource,
      sourceId: result.id,
      url: result.urls.full,
      previewUrl: result.urls.regular,
      type: "image" as const,
      duration: null,
      attribution: `Unsplash - ${result.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Unsplash search error:", error);
    return [];
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { query, sources, mediaType } = body as {
      query: string;
      sources?: MediaSource[];
      mediaType?: "video" | "image" | "all";
    };

    if (!query) {
      return NextResponse.json(
        { error: "Missing required field: query" },
        { status: 400 }
      );
    }

    const requestedSources = sources || ["pexels", "pixabay", "unsplash"];
    const type = mediaType || "all";
    const results: MediaItem[] = [];

    // Run searches in parallel
    const searchPromises: Promise<MediaItem[]>[] = [];

    if (requestedSources.includes("pexels")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPexelsVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPexelsPhotos(query));
      }
    }

    if (requestedSources.includes("pixabay")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPixabayVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPixabayPhotos(query));
      }
    }

    if (requestedSources.includes("unsplash")) {
      if (type === "all" || type === "image") {
        searchPromises.push(searchUnsplash(query));
      }
    }

    const searchResults = await Promise.all(searchPromises);
    searchResults.forEach((items) => results.push(...items));

    return NextResponse.json({ results });
  } catch (error) {
    console.error("Media search error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Media search failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/models/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

// Definição dos modelos por provedor
const MODELS_DATABASE = {
  openai: {
    name: 'OpenAI',
    icon: '🤖',
    categories: [
      {
        name: 'Modelos de Vanguarda',
        description: 'Os modelos mais avançados da OpenAI',
        models: [
          { id: 'gpt-4o', name: 'GPT-4o', description: 'Modelo multimodal rápido e inteligente', isNew: false },
          { id: 'gpt-4o-mini', name: 'GPT-4o Mini', description: 'Versão econômica do GPT-4o', isNew: false },
          { id: 'gpt-4-turbo', name: 'GPT-4 Turbo', description: 'Modelo de alta inteligência com contexto de 128k', isNew: false },
          { id: 'gpt-4', name: 'GPT-4', description: 'Modelo GPT de alta inteligência', isNew: false },
          { id: 'gpt-3.5-turbo', name: 'GPT-3.5 Turbo', description: 'Modelo rápido e econômico', isNew: false },
        ]
      },
      {
        name: 'Modelos de Imagem',
        description: 'Para geração de imagens',
        models: [
          { id: 'dall-e-3', name: 'DALL-E 3', description: 'Geração de imagens de última geração', isNew: false },
          { id: 'dall-e-2', name: 'DALL-E 2', description: 'Geração de imagens anterior', isNew: false },
        ]
      },
      {
        name: 'Modelos de Áudio',
        description: 'Para transcrição e texto-para-fala',
        models: [
          { id: 'whisper-1', name: 'Whisper', description: 'Reconhecimento de fala', isNew: false },
          { id: 'tts-1', name: 'TTS-1', description: 'Texto para fala (velocidade)', isNew: false },
          { id: 'tts-1-hd', name: 'TTS-1 HD', description: 'Texto para fala (qualidade)', isNew: false },
        ]
      },
      {
        name: 'Modelos de Embedding',
        description: 'Para representação vetorial de texto',
        models: [
          { id: 'text-embedding-3-large', name: 'Embedding 3 Large', description: 'Maior capacidade de embedding', isNew: false },
          { id: 'text-embedding-3-small', name: 'Embedding 3 Small', description: 'Embedding econômico', isNew: false },
          { id: 'text-embedding-ada-002', name: 'Ada 002', description: 'Modelo de embedding anterior', isNew: false },
        ]
      }
    ]
  },
  anthropic: {
    name: 'Anthropic',
    icon: '🔮',
    categories: [
      {
        name: 'Claude 3.5',
        description: 'A mais nova geração do Claude',
        models: [
          { id: 'claude-3-5-sonnet-20241022', name: 'Claude 3.5 Sonnet', description: 'Melhor equilíbrio entre velocidade e inteligência', isNew: true },
          { id: 'claude-3-5-haiku-20241022', name: 'Claude 3.5 Haiku', description: 'Resposta mais rápida e econômica', isNew: true },
        ]
      },
      {
        name: 'Claude 3',
        description: 'Modelos Claude 3',
        models: [
          { id: 'claude-3-opus-20240229', name: 'Claude 3 Opus', description: 'Modelo mais inteligente para tarefas complexas', isNew: false },
          { id: 'claude-3-sonnet-20240229', name: 'Claude 3 Sonnet', description: 'Equilíbrio entre inteligência e velocidade', isNew: false },
          { id: 'claude-3-haiku-20240307', name: 'Claude 3 Haiku', description: 'Respostas rápidas e econômicas', isNew: false },
        ]
      }
    ]
  },
  gemini: {
    name: 'Google Gemini',
    icon: '🧠',
    categories: [
      {
        name: 'Gemini 2.0',
        description: 'A mais nova geração do Gemini',
        models: [
          { id: 'gemini-2.0-flash-exp', name: 'Gemini 2.0 Flash', description: 'Modelo experimental rápido', isNew: true },
        ]
      },
      {
        name: 'Gemini 1.5',
        description: 'Modelos Gemini 1.5 com contexto longo',
        models: [
          { id: 'gemini-1.5-pro', name: 'Gemini 1.5 Pro', description: 'Melhor desempenho, contexto de 2M tokens', isNew: false },
          { id: 'gemini-1.5-flash', name: 'Gemini 1.5 Flash', description: 'Rápido e eficiente', isNew: false },
          { id: 'gemini-1.5-flash-8b', name: 'Gemini 1.5 Flash 8B', description: 'Versão mais leve e rápida', isNew: false },
        ]
      },
      {
        name: 'Gemini 1.0',
        description: 'Modelos Gemini 1.0',
        models: [
          { id: 'gemini-1.0-pro', name: 'Gemini 1.0 Pro', description: 'Modelo de geração anterior', isNew: false },
        ]
      }
    ]
  },
  elevenlabs: {
    name: 'ElevenLabs',
    icon: '🎤',
    categories: [
      {
        name: 'Modelos de Voz',
        description: 'Síntese de voz de alta qualidade',
        models: [
          { id: 'eleven_multilingual_v2', name: 'Multilingual v2', description: 'Suporte a 29 idiomas incluindo português', isNew: true },
          { id: 'eleven_turbo_v2_5', name: 'Turbo v2.5', description: 'Baixa latência para streaming', isNew: true },
          { id: 'eleven_turbo_v2', name: 'Turbo v2', description: 'Modelo otimizado para velocidade', isNew: false },
          { id: 'eleven_multilingual_v1', name: 'Multilingual v1', description: 'Suporte multilíngue original', isNew: false },
          { id: 'eleven_monolingual_v1', name: 'Monolingual v1', description: 'Otimizado para inglês', isNew: false },
        ]
      }
    ]
  },
  pexels: {
    name: 'Pexels',
    icon: '📷',
    categories: [
      {
        name: 'Recursos',
        description: 'APIs disponíveis',
        models: [
          { id: 'photos', name: 'Fotos', description: 'Banco de fotos gratuitas de alta qualidade', isNew: false },
          { id: 'videos', name: 'Vídeos', description: 'Banco de vídeos gratuitos de alta qualidade', isNew: false },
        ]
      }
    ]
  },
  pixabay: {
    name: 'Pixabay',
    icon: '🖼️',
    categories: [
      {
        name: 'Recursos',
        description: 'APIs disponíveis',
        models: [
          { id: 'images', name: 'Imagens', description: 'Fotos e ilustrações gratuitas', isNew: false },
          { id: 'videos', name: 'Vídeos', description: 'Vídeos gratuitos', isNew: false },
        ]
      }
    ]
  },
  youtube: {
    name: 'YouTube',
    icon: '📺',
    categories: [
      {
        name: 'APIs',
        description: 'APIs do YouTube Data v3',
        models: [
          { id: 'data-v3', name: 'YouTube Data API v3', description: 'Gerenciar vídeos, playlists, canais', isNew: false },
          { id: 'analytics', name: 'YouTube Analytics', description: 'Métricas e estatísticas', isNew: false },
        ]
      }
    ]
  },
  tavily: {
    name: 'Tavily',
    icon: '🔍',
    categories: [
      {
        name: 'APIs de Pesquisa',
        description: 'Pesquisa web com IA',
        models: [
          { id: 'search', name: 'Search API', description: 'Pesquisa web otimizada para IA', isNew: false },
          { id: 'extract', name: 'Extract API', description: 'Extração de conteúdo de URLs', isNew: false },
        ]
      }
    ]
  },
  json2video: {
    name: 'JSON2Video',
    icon: '🎬',
    categories: [
      {
        name: 'Renderização',
        description: 'APIs de renderização de vídeo',
        models: [
          { id: 'movie', name: 'Movie API', description: 'Criar vídeos a partir de JSON', isNew: false },
          { id: 'templates', name: 'Templates', description: 'Templates pré-definidos', isNew: false },
        ]
      }
    ]
  }
};

export async function GET(req: Request) {
  const { searchParams } = new URL(req.url);
  const provider = searchParams.get('provider');

  if (provider) {
    const providerData = MODELS_DATABASE[provider as keyof typeof MODELS_DATABASE];
    if (providerData) {
      return NextResponse.json(providerData);
    }
    return NextResponse.json({ error: 'Provider not found' }, { status: 404 });
  }

  // Retorna todos os providers
  return NextResponse.json(MODELS_DATABASE);
}

// Testar conexão real e listar modelos disponíveis
export async function POST(req: Request) {
  try {
    const { provider, key } = await req.json();

    if (!provider || !key) {
      return NextResponse.json({ error: 'Provider and key are required' }, { status: 400 });
    }

    let availableModels: string[] = [];
    let error = null;

    switch (provider) {
      case 'openai':
        try {
          const res = await fetch('https://api.openai.com/v1/models', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          if (res.ok) {
            const data = await res.json();
            availableModels = data.data.map((m: { id: string }) => m.id);
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      case 'gemini':
      case 'google':
        try {
          const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}`);
          if (res.ok) {
            const data = await res.json();
            availableModels = data.models.map((m: { name: string }) => m.name.replace('models/', ''));
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      case 'anthropic':
        // Anthropic não tem endpoint público para listar modelos, usar os conhecidos
        availableModels = ['claude-3-5-sonnet-20241022', 'claude-3-5-haiku-20241022', 'claude-3-opus-20240229', 'claude-3-sonnet-20240229', 'claude-3-haiku-20240307'];
        break;

      case 'elevenlabs':
        try {
          const res = await fetch('https://api.elevenlabs.io/v1/models', {
            headers: { 'xi-api-key': key }
          });
          if (res.ok) {
            const data = await res.json();
            availableModels = data.map((m: { model_id: string }) => m.model_id);
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      default:
        // Para providers sem lista de modelos, assumir disponível
        availableModels = ['default'];
    }

    return NextResponse.json({
      provider,
      availableModels,
      error,
      staticModels: MODELS_DATABASE[provider as keyof typeof MODELS_DATABASE] || null
    });

  } catch {
    return NextResponse.json({ error: 'Erro interno' }, { status: 500 });
  }
}

```

---
#### `app/api/proposal/description/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Description } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("description"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptSummary = script?.sections?.map((s: { content: string }) => s.content).join("\n").substring(0, 1000) || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are an SEO expert for YouTube video descriptions.
Create a description that:
- Starts with a compelling summary (first 2 lines are crucial for SEO)
- Includes timestamps for main sections
- Has relevant links placeholders
- Uses natural keyword placement
- Is 200-500 words
- Includes a call-to-action

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return ONLY the description text, no JSON wrapper.`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create an SEO-optimized YouTube description for a video about: ${theme}

Script Summary:
${scriptSummary}

Research Insights:
${researchContext}`,
      temperature: 0.7,
    });

    const description: Description = {
      id: uuidv4(),
      status: "ready",
      content: text.trim(),
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(description);
  } catch (error) {
    console.error("Description generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Description generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/rationale/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      channelData,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research ? `
Research Insights: ${research.consolidatedInsights}
Top Performing Topics: ${research.internalAnalysis?.topPerformingTopics?.join(", ") || "N/A"}
Trending Topics: ${research.externalAnalysis?.trendingTopics?.join(", ") || "N/A"}
Market Opportunities: ${research.externalAnalysis?.marketOpportunities?.join(", ") || "N/A"}
` : "";

    const channelContext = channelData ? `
Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Recent Performance: ${channelData.recentVideos?.slice(0, 3).map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ") || "N/A"}
` : "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist.
Write a compelling explanation of why this video proposal will perform well.
Focus on:
- Data-backed insights from research
- Alignment with audience interests
- Market opportunity and timing
- Competitive advantages
- Expected performance indicators

Write in a confident, analytical tone. Be specific with references to data.
Keep it to 2-3 paragraphs.`,
      prompt: `Explain why a video about "${theme}" will perform well.

${researchContext}
${channelContext}`,
      temperature: 0.7,
    });

    return NextResponse.json({ rationale: text.trim() });
  } catch (error) {
    console.error("Rationale generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Rationale generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/script/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { Script, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Verify AI provider is configured
    if (provider === "openai" && !process.env.OPENAI_API_KEY) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !process.env.ANTHROPIC_API_KEY) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    let aiModel;
    switch (provider) {
      case "openai":
        aiModel = openai(model);
        break;
      case "google":
        aiModel = google(model);
        break;
      case "anthropic":
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("script"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const researchContext = research?.consolidatedInsights || "No research data available";

    const systemPrompt = `You are an expert YouTube scriptwriter specializing in retention-focused content.
Your scripts must:
- Be at least 8 minutes long when read at a natural pace (approximately 1200-1500 words)
- Start with a powerful hook in the first 30 seconds
- Use pattern interrupts every 2-3 minutes to maintain engagement
- Include clear value propositions throughout
- End with a strong call-to-action

Return a JSON object with this structure:
{
  "sections": [
    {
      "type": "hook",
      "content": "The hook script text...",
      "duration": 30
    },
    {
      "type": "intro",
      "content": "Introduction text...",
      "duration": 60
    },
    {
      "type": "content",
      "content": "Main content section 1...",
      "duration": 120
    },
    // ... more content sections
    {
      "type": "cta",
      "content": "Call to action...",
      "duration": 30
    },
    {
      "type": "outro",
      "content": "Closing...",
      "duration": 30
    }
  ]
}

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create a retention-focused YouTube script about: ${theme}

Research Insights:
${researchContext}

Generate a complete script with all sections. The total duration should be at least 8 minutes (480 seconds).`,
      temperature: 0.8,
    });

    let scriptData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        scriptData = JSON.parse(match[0]);
      }
    } catch {
      // Fallback structure
      scriptData = {
        sections: [
          { type: "hook", content: "Generated script content", duration: 30 },
          { type: "intro", content: text.substring(0, 500), duration: 60 },
          { type: "content", content: text.substring(500), duration: 390 },
          { type: "cta", content: "Like and subscribe!", duration: 30 },
          { type: "outro", content: "Thanks for watching!", duration: 30 },
        ],
      };
    }

    const sections: ScriptSection[] = scriptData.sections.map((section: { type: string; content: string; duration: number }) => ({
      id: uuidv4(),
      type: section.type as ScriptSection["type"],
      content: section.content,
      duration: section.duration || 60,
    }));

    const totalDuration = sections.reduce((sum, s) => sum + s.duration, 0);

    const script: Script = {
      id: uuidv4(),
      status: "ready",
      sections,
      totalDuration,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
      audioUrl: null,
      ttsProvider: null,
      ttsVoice: null,
    };

    return NextResponse.json(script);
  } catch (error) {
    console.error("Script generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Script generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/soundtrack/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Soundtrack, SoundtrackSuggestion } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      mood,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const { text } = await generateText({
      model: aiModel,
      system: `You are a music supervisor for YouTube content.
Suggest 3 copyright-free music tracks that would fit the video theme and mood.
These should be actual royalty-free music suggestions from platforms like:
- YouTube Audio Library
- Pixabay Music
- Free Music Archive
- Incompetech

Return a JSON object with this structure:
{
  "suggestions": [
    {
      "title": "Track Title",
      "artist": "Artist Name",
      "genre": "Genre",
      "url": "URL or platform reference",
      "duration": 180,
      "license": "CC0 or specific license"
    }
  ]
}`,
      prompt: `Suggest 3 copyright-free music tracks for a video about: ${theme}
Mood: ${mood || "professional, engaging, educational"}`,
      temperature: 0.7,
    });

    let suggestionsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        suggestionsData = JSON.parse(match[0]);
      }
    } catch {
      suggestionsData = {
        suggestions: [
          {
            title: "Corporate Upbeat",
            artist: "Various",
            genre: "Corporate",
            url: "YouTube Audio Library",
            duration: 180,
            license: "Royalty Free",
          },
          {
            title: "Inspiring Background",
            artist: "Various",
            genre: "Inspirational",
            url: "YouTube Audio Library",
            duration: 240,
            license: "Royalty Free",
          },
          {
            title: "Modern Tech",
            artist: "Various",
            genre: "Electronic",
            url: "YouTube Audio Library",
            duration: 200,
            license: "Royalty Free",
          },
        ],
      };
    }

    const suggestions: SoundtrackSuggestion[] = suggestionsData.suggestions.map(
      (s: { title: string; artist: string; genre: string; url: string; duration: number; license: string }) => ({
        id: uuidv4(),
        title: s.title,
        artist: s.artist,
        genre: s.genre,
        url: s.url,
        duration: s.duration || 180,
        license: s.license,
        isUpload: false,
      })
    );

    const soundtrack: Soundtrack = {
      id: uuidv4(),
      status: "ready",
      suggestions,
      selected: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(soundtrack);
  } catch (error) {
    console.error("Soundtrack generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Soundtrack generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/tags/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Tags } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      description,
      research,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research?.externalAnalysis?.trendingTopics?.join(", ") || "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube SEO specialist.
Generate 15-30 relevant tags for a YouTube video.
Tags should include:
- Primary keywords (high search volume)
- Secondary keywords (medium search volume)
- Long-tail keywords
- Related topics
- Trending terms

Return ONLY a JSON array of strings (the tags), no other text.
Example: ["tag1", "tag2", "tag3"]`,
      prompt: `Generate tags for a YouTube video about: ${theme}

Description summary: ${description?.substring(0, 500) || "N/A"}

Trending topics in this niche: ${researchContext}`,
      temperature: 0.7,
    });

    let tagsList: string[] = [];
    try {
      const match = text.match(/\[[\s\S]*\]/);
      if (match) {
        tagsList = JSON.parse(match[0]);
      }
    } catch {
      // Parse as comma-separated if JSON fails
      tagsList = text.split(",").map((t) => t.trim().replace(/["'\[\]]/g, "")).filter(Boolean);
    }

    const tags: Tags = {
      id: uuidv4(),
      status: "ready",
      items: tagsList,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(tags);
  } catch (error) {
    console.error("Tags generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Tags generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/titles/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, TitlesAndThumbs, TitleThumbnailVariation } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("thumbnail"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptHook = script?.sections?.find((s: { type: string }) => s.type === "hook")?.content || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are a YouTube title and thumbnail strategist.
Create 3 variations of titles and thumbnail prompts.

Each title should:
- Be under 60 characters
- Create curiosity or urgency
- Include power words
- Be clear about the value

Each thumbnail prompt should:
- Be detailed for AI image generation
- Describe the visual elements clearly
- Include colors, composition, and mood
- NOT include text (text will be added separately)
- Focus on eye-catching visuals

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return a JSON object with this structure:
{
  "variations": [
    {
      "title": "Title 1",
      "thumbnailPrompt": "Detailed thumbnail prompt 1..."
    },
    {
      "title": "Title 2",
      "thumbnailPrompt": "Detailed thumbnail prompt 2..."
    },
    {
      "title": "Title 3",
      "thumbnailPrompt": "Detailed thumbnail prompt 3..."
    }
  ]
}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create 3 title and thumbnail variations for a video about: ${theme}

Hook from script: ${scriptHook}

Research insights: ${researchContext}`,
      temperature: 0.8,
    });

    let variationsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        variationsData = JSON.parse(match[0]);
      }
    } catch {
      variationsData = {
        variations: [
          { title: theme, thumbnailPrompt: `A professional YouTube thumbnail about ${theme}` },
          { title: `How to ${theme}`, thumbnailPrompt: `Eye-catching visual representation of ${theme}` },
          { title: `${theme} Explained`, thumbnailPrompt: `Educational and engaging thumbnail about ${theme}` },
        ],
      };
    }

    const variations: TitleThumbnailVariation[] = variationsData.variations.map(
      (v: { title: string; thumbnailPrompt: string }) => ({
        id: uuidv4(),
        title: v.title,
        thumbnailPrompt: v.thumbnailPrompt,
        thumbnailUrl: null,
        imageProvider: null,
      })
    );

    const titlesAndThumbs: TitlesAndThumbs = {
      id: uuidv4(),
      status: "ready",
      variations,
      selectedVariation: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(titlesAndThumbs);
  } catch (error) {
    console.error("Titles generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Titles generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/render/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { RenderData, StoryboardScene } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { storyboardId, scenes, soundtrack } = body as {
      storyboardId: string;
      scenes: StoryboardScene[];
      soundtrack?: { url: string };
    };

    if (!storyboardId || !scenes) {
      return NextResponse.json(
        { error: "Missing required fields: storyboardId, scenes" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    // Build JSON2Video project structure
    const project = {
      resolution: "full-hd",
      quality: "high",
      scenes: scenes.map((scene) => ({
        comment: scene.text.substring(0, 50),
        duration: scene.duration,
        elements: [
          // Background media
          scene.media?.url
            ? {
                type: scene.media.type === "video" ? "video" : "image",
                src: scene.media.url,
                duration: scene.duration,
              }
            : {
                type: "color",
                color: "#1a1a1a",
                duration: scene.duration,
              },
          // Text overlay
          {
            type: "text",
            text: scene.text.substring(0, 100),
            duration: scene.duration,
            style: {
              fontSize: 24,
              fontFamily: "Arial",
              color: "#ffffff",
              backgroundColor: "rgba(0,0,0,0.5)",
            },
            position: {
              x: "center",
              y: "bottom",
            },
          },
          // Voiceover
          ...(scene.voiceoverUrl
            ? [
                {
                  type: "audio",
                  src: scene.voiceoverUrl,
                  duration: scene.duration,
                },
              ]
            : []),
        ],
        transition: {
          type: scene.transition,
          duration: 0.5,
        },
      })),
      // Background music
      ...(soundtrack?.url
        ? {
            soundtrack: {
              src: soundtrack.url,
              volume: 0.3,
            },
          }
        : {}),
    };

    // Create render job
    const createResponse = await fetch("https://api.json2video.com/v2/movies", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": apiKey,
      },
      body: JSON.stringify({ project }),
    });

    if (!createResponse.ok) {
      const error = await createResponse.json();
      throw new Error(error.message || "Failed to create render job");
    }

    const jobData = await createResponse.json();

    const renderData: RenderData = {
      id: jobData.project || uuidv4(),
      createdAt: new Date().toISOString(),
      storyboardId,
      status: "rendering",
      progress: 0,
      videoUrl: null,
      error: null,
    };

    return NextResponse.json(renderData);
  } catch (error) {
    console.error("Render error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Render failed" },
      { status: 500 }
    );
  }
}

// Check render status
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const jobId = searchParams.get("jobId");

    if (!jobId) {
      return NextResponse.json(
        { error: "Missing jobId parameter" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    const response = await fetch(`https://api.json2video.com/v2/movies/${jobId}`, {
      headers: {
        "x-api-key": apiKey,
      },
    });

    if (!response.ok) {
      throw new Error("Failed to check render status");
    }

    const data = await response.json();

    let status: RenderData["status"] = "rendering";
    if (data.status === "done") {
      status = "completed";
    } else if (data.status === "failed") {
      status = "error";
    }

    return NextResponse.json({
      id: jobId,
      status,
      progress: data.progress || 0,
      videoUrl: data.movie || null,
      error: data.error || null,
    });
  } catch (error) {
    console.error("Render status check error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Status check failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/research/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { createOpenAI } from "@ai-sdk/openai";
import { createGoogleGenerativeAI } from "@ai-sdk/google";
import { createAnthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, ResearchData, ResearchQuery, ResearchResult } from "@/types";
import {
  getOpenAIKey,
  getGoogleKey,
  getAnthropicKey,
  getTavilyKey,
} from "@/lib/get-api-key";

async function searchWithTavily(query: string, apiKey: string): Promise<ResearchResult[]> {
  if (!apiKey) {
    return [];
  }

  try {
    const response = await fetch("https://api.tavily.com/search", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        api_key: apiKey,
        query,
        search_depth: "advanced",
        max_results: 5,
      }),
    });

    if (!response.ok) {
      throw new Error("Tavily search failed");
    }

    const data = await response.json();
    return data.results?.map((result: { title: string; url: string; content: string; score: number }) => ({
      title: result.title,
      url: result.url,
      snippet: result.content,
      score: result.score,
    })) || [];
  } catch (error) {
    console.error("Tavily search error:", error);
    return [];
  }
}

async function simulateSearchWithLLM(
  query: string,
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
): Promise<ResearchResult[]> {
  const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

  const { text } = await generateText({
    model: aiModel,
    system: `You are a research assistant. Generate realistic search results for the given query.
Return a JSON array with 3-5 results, each having: title, url, snippet, score (0-1).
Make the results relevant and informative for YouTube content creation.
Return ONLY valid JSON, no other text.`,
    prompt: `Generate search results for: "${query}"`,
    temperature: 0.7,
  });

  try {
    // Extract JSON from the response
    const jsonMatch = text.match(/\[[\s\S]*\]/);
    if (jsonMatch) {
      return JSON.parse(jsonMatch[0]);
    }
    return [];
  } catch {
    return [];
  }
}

function getAIModel(
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
) {
  switch (provider) {
    case "openai": {
      const openai = createOpenAI({
        apiKey: openaiKey || process.env.OPENAI_API_KEY,
      });
      return openai(model);
    }
    case "google": {
      const google = createGoogleGenerativeAI({
        apiKey: googleKey || process.env.GOOGLE_GENERATIVE_AI_API_KEY,
      });
      return google(model);
    }
    case "anthropic": {
      const anthropicClient = createAnthropic({
        apiKey: anthropicKey || process.env.ANTHROPIC_API_KEY,
      });
      return anthropicClient(model);
    }
    default:
      throw new Error(`Unknown provider: ${provider}`);
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      contextId,
      theme,
      channelData,
      metrics,
      provider,
      model,
      diretrizes,
    } = body;

    if (!contextId || !theme) {
      return NextResponse.json(
        { error: "Missing required fields: contextId, theme" },
        { status: 400 }
      );
    }

    // Get API keys from headers or env
    const openaiKey = getOpenAIKey(request);
    const googleKey = getGoogleKey(request);
    const anthropicKey = getAnthropicKey(request);
    const tavilyKey = getTavilyKey(request);

    // Verify AI provider is configured
    if (provider === "openai" && !openaiKey) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !googleKey) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !anthropicKey) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

    // Build context for analysis
    const channelContext = channelData
      ? `Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Total Views: ${channelData.viewCount}
Recent Videos: ${channelData.recentVideos?.map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ")}`
      : "No channel data available";

    const metricsContext = metrics?.length
      ? `Performance Metrics:\n${metrics.slice(0, 10).map((m: { title: string; views: number; ctr: number }) =>
          `- ${m.title}: ${m.views} views, ${m.ctr}% CTR`
        ).join("\n")}`
      : "No metrics data available";

    const diretrizesContext = diretrizes?.length
      ? `\n\nDiretrizes to follow:\n${diretrizes.map((d: { title: string; systemPrompt: string }) => `- ${d.title}: ${d.systemPrompt}`).join("\n")}`
      : "";

    // Step 1: Generate research queries
    const { text: queriesText } = await generateText({
      model: aiModel,
      system: `You are a YouTube research analyst. Generate 3-5 research queries to gather external information that will help create a high-performing video.
Return ONLY a JSON array of strings (queries).${diretrizesContext}`,
      prompt: `Theme: ${theme}

${channelContext}

${metricsContext}

Generate search queries to research this topic for a YouTube video.`,
      temperature: 0.7,
    });

    let queries: string[] = [];
    try {
      const match = queriesText.match(/\[[\s\S]*\]/);
      if (match) {
        queries = JSON.parse(match[0]);
      }
    } catch {
      queries = [theme, `${theme} trends 2024`, `${theme} YouTube video ideas`];
    }

    // Step 2: Execute searches
    const hasTavily = !!tavilyKey;
    const researchQueries: ResearchQuery[] = [];

    for (const query of queries.slice(0, 5)) {
      let results: ResearchResult[];
      let source: "tavily" | "llm_simulated";

      if (hasTavily) {
        results = await searchWithTavily(query, tavilyKey!);
        source = "tavily";
      } else {
        results = await simulateSearchWithLLM(query, provider, model, openaiKey, googleKey, anthropicKey);
        source = "llm_simulated";
      }

      researchQueries.push({ query, source, results });
    }

    // Step 3: Analyze and consolidate
    const { text: analysisText } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist. Analyze the provided data and research to generate actionable insights.
Return a JSON object with this structure:
{
  "internalAnalysis": {
    "topPerformingTopics": ["topic1", "topic2"],
    "audienceInsights": ["insight1", "insight2"],
    "contentGaps": ["gap1", "gap2"],
    "recommendations": ["rec1", "rec2"]
  },
  "externalAnalysis": {
    "trendingTopics": ["trend1", "trend2"],
    "competitorInsights": ["comp1", "comp2"],
    "marketOpportunities": ["opp1", "opp2"]
  },
  "consolidatedInsights": "A detailed paragraph summarizing all findings and strategic recommendations"
}${diretrizesContext}`,
      prompt: `Theme: ${theme}

Channel Data:
${channelContext}

Metrics:
${metricsContext}

Research Results:
${researchQueries.map((q) => `Query: ${q.query}\nResults: ${q.results.map((r) => r.snippet).join("\n")}`).join("\n\n")}

Analyze this data and provide strategic insights.`,
      temperature: 0.7,
    });

    let analysis;
    try {
      const match = analysisText.match(/\{[\s\S]*\}/);
      if (match) {
        analysis = JSON.parse(match[0]);
      }
    } catch {
      analysis = {
        internalAnalysis: {
          topPerformingTopics: [],
          audienceInsights: [],
          contentGaps: [],
          recommendations: [],
        },
        externalAnalysis: {
          trendingTopics: [],
          competitorInsights: [],
          marketOpportunities: [],
        },
        consolidatedInsights: "Research analysis completed. Please review the gathered data.",
      };
    }

    const researchData: ResearchData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      contextId,
      internalAnalysis: analysis.internalAnalysis,
      externalAnalysis: analysis.externalAnalysis,
      queries: researchQueries,
      consolidatedInsights: analysis.consolidatedInsights,
    };

    return NextResponse.json(researchData);
  } catch (error) {
    console.error("Research error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Research failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/status/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

export async function GET() {
  return NextResponse.json({
    openai: !!process.env.OPENAI_API_KEY,
    gemini: !!process.env.GEMINI_API_KEY || !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    youtube: !!process.env.YOUTUBEDATA_API_KEY || !!process.env.YOUTUBE_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
    github: !!process.env.GITHUB_TOKEN,
    vercel: !!process.env.VERCEL_TOKEN && !!process.env.VERCEL_PROJECT_ID,
  });
}

```

---
#### `app/api/storyboard/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { StoryboardData, StoryboardScene, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { proposalId, script } = body as {
      proposalId: string;
      script: { sections: ScriptSection[] };
    };

    if (!proposalId || !script?.sections) {
      return NextResponse.json(
        { error: "Missing required fields: proposalId, script" },
        { status: 400 }
      );
    }

    // Split script sections into storyboard scenes
    const scenes: StoryboardScene[] = [];
    let order = 0;

    for (const section of script.sections) {
      // Split content into smaller chunks for scenes
      // Each scene should be roughly 15-30 seconds
      const maxSceneDuration = 30;
      const contentChunks = splitContentIntoChunks(section.content, section.duration, maxSceneDuration);

      for (const chunk of contentChunks) {
        scenes.push({
          id: uuidv4(),
          order: order++,
          scriptSectionId: section.id,
          text: chunk.text,
          voiceoverUrl: null,
          media: null,
          duration: chunk.duration,
          transition: order === contentChunks.length - 1 ? "fade" : "cut",
        });
      }
    }

    const storyboard: StoryboardData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      scenes,
      totalDuration: scenes.reduce((sum, s) => sum + s.duration, 0),
    };

    return NextResponse.json(storyboard);
  } catch (error) {
    console.error("Storyboard generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Storyboard generation failed" },
      { status: 500 }
    );
  }
}

function splitContentIntoChunks(
  content: string,
  totalDuration: number,
  maxDuration: number
): { text: string; duration: number }[] {
  const sentences = content.match(/[^.!?]+[.!?]+/g) || [content];
  const chunks: { text: string; duration: number }[] = [];

  let currentChunk = "";
  let currentDuration = 0;
  const durationPerSentence = totalDuration / sentences.length;

  for (const sentence of sentences) {
    const sentenceDuration = Math.round(durationPerSentence);

    if (currentDuration + sentenceDuration > maxDuration && currentChunk) {
      chunks.push({
        text: currentChunk.trim(),
        duration: currentDuration,
      });
      currentChunk = sentence;
      currentDuration = sentenceDuration;
    } else {
      currentChunk += " " + sentence;
      currentDuration += sentenceDuration;
    }
  }

  if (currentChunk.trim()) {
    chunks.push({
      text: currentChunk.trim(),
      duration: currentDuration || maxDuration,
    });
  }

  // Ensure we have at least one chunk
  if (chunks.length === 0) {
    chunks.push({
      text: content,
      duration: totalDuration,
    });
  }

  return chunks;
}

```

---
#### `app/api/system/health/route.ts`

```
import { NextResponse } from 'next/server';
import type { SystemMonitorData, SystemHealth, APIHealthStatus } from '@/types';

export const dynamic = 'force-dynamic';

/**
 * GET /api/system/health
 * Returns system health metrics and API status
 */
export async function GET() {
  try {
    // System Health Metrics
    const memoryUsage = process.memoryUsage();
    const systemHealth: SystemHealth = {
      memory: {
        rss: memoryUsage.rss,
        heapTotal: memoryUsage.heapTotal,
        heapUsed: memoryUsage.heapUsed,
        external: memoryUsage.external,
      },
      uptime: process.uptime(),
      nodeVersion: process.version,
      platform: process.platform,
      timestamp: new Date().toISOString(),
    };

    // API Health Checks
    const apiStatuses: APIHealthStatus[] = [];

    // Check OpenAI
    apiStatuses.push(await checkOpenAI());

    // Check YouTube
    apiStatuses.push(await checkYouTube());

    // Check Google Gemini
    apiStatuses.push(await checkGoogle());

    // Check Anthropic
    apiStatuses.push(await checkAnthropic());

    // Check Pexels
    apiStatuses.push(await checkPexels());

    // Check Pixabay
    apiStatuses.push(await checkPixabay());

    // Check Unsplash
    apiStatuses.push(await checkUnsplash());

    const response: SystemMonitorData = {
      system: systemHealth,
      apis: apiStatuses,
    };

    return NextResponse.json(response);
  } catch (error) {
    console.error('Health check failed:', error);
    return NextResponse.json(
      { error: 'Failed to retrieve system health' },
      { status: 500 }
    );
  }
}

/**
 * Helper function to check OpenAI API
 */
async function checkOpenAI(): Promise<APIHealthStatus> {
  const apiKey = process.env.OPENAI_API_KEY;

  if (!apiKey) {
    return {
      name: 'OpenAI',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.openai.com/v1/models', {
      method: 'GET',
      headers: {
        Authorization: `Bearer ${apiKey}`,
      },
      signal: AbortSignal.timeout(5000), // 5s timeout
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'OpenAI',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'OpenAI',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'OpenAI',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check YouTube API
 */
async function checkYouTube(): Promise<APIHealthStatus> {
  const apiKey = process.env.YOUTUBE_API_KEY;

  if (!apiKey) {
    return {
      name: 'YouTube',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${apiKey}`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'YouTube',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'YouTube',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'YouTube',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Google Gemini API
 */
async function checkGoogle(): Promise<APIHealthStatus> {
  const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;

  if (!apiKey) {
    return {
      name: 'Google Gemini',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Google Gemini',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Google Gemini',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Google Gemini',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Anthropic API
 */
async function checkAnthropic(): Promise<APIHealthStatus> {
  const apiKey = process.env.ANTHROPIC_API_KEY;

  if (!apiKey) {
    return {
      name: 'Anthropic',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  // Anthropic doesn't have a simple health endpoint, so we just check if key exists
  return {
    name: 'Anthropic',
    status: apiKey ? 'unknown' : 'offline',
    error: apiKey ? undefined : 'API key not configured',
  };
}

/**
 * Helper function to check Pexels API
 */
async function checkPexels(): Promise<APIHealthStatus> {
  const apiKey = process.env.PEXELS_API_KEY;

  if (!apiKey) {
    return {
      name: 'Pexels',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.pexels.com/v1/curated?per_page=1&page=1', {
      method: 'GET',
      headers: {
        Authorization: apiKey,
      },
      signal: AbortSignal.timeout(5000),
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Pexels',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Pexels',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Pexels',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Pixabay API
 */
async function checkPixabay(): Promise<APIHealthStatus> {
  const apiKey = process.env.PIXABAY_API_KEY;

  if (!apiKey) {
    return {
      name: 'Pixabay',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://pixabay.com/api/?key=${apiKey}&q=nature&per_page=3`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Pixabay',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Pixabay',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Pixabay',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Unsplash API
 */
async function checkUnsplash(): Promise<APIHealthStatus> {
  const apiKey = process.env.UNSPLASH_ACCESS_KEY;

  if (!apiKey) {
    return {
      name: 'Unsplash',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.unsplash.com/photos?per_page=1', {
      method: 'GET',
      headers: {
        Authorization: `Client-ID ${apiKey}`,
      },
      signal: AbortSignal.timeout(5000),
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Unsplash',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Unsplash',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Unsplash',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

```

---
#### `app/api/test-connection/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

interface TestResult {
  success: boolean;
  message: string;
  responseTime: number;
  details?: string;
}

export async function POST(req: Request) {
  try {
    const { provider } = await req.json();

    if (!provider) {
      return NextResponse.json({ error: 'Provider is required' }, { status: 400 });
    }

    const startTime = Date.now();
    const result: TestResult = { success: false, message: '', responseTime: 0 };

    // Pegar a chave do ambiente
    const keyMap: Record<string, string | undefined> = {
      openai: process.env.OPENAI_API_KEY,
      gemini: process.env.GEMINI_API_KEY || process.env.GOOGLE_GENERATIVE_AI_API_KEY,
      anthropic: process.env.ANTHROPIC_API_KEY,
      youtube: process.env.YOUTUBEDATA_API_KEY || process.env.YOUTUBE_API_KEY,
      pexels: process.env.PEXELS_API_KEY,
      pixabay: process.env.PIXABAY_API_KEY,
      elevenlabs: process.env.ELEVENLABS_API_KEY,
      tavily: process.env.TAVILY_API_KEY,
      json2video: process.env.JSON2VIDEO_API_KEY,
      github: process.env.GITHUB_TOKEN,
      vercel: process.env.VERCEL_TOKEN,
    };

    const key = keyMap[provider];

    if (!key) {
      return NextResponse.json({
        success: false,
        message: 'API key não configurada no servidor',
        responseTime: Date.now() - startTime
      });
    }

    try {
      switch (provider) {
        case 'openai':
          const openaiRes = await fetch('https://api.openai.com/v1/models?limit=1', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          result.success = openaiRes.ok;
          result.message = openaiRes.ok ? 'OpenAI respondendo! Modelos disponíveis.' : 'Falha na autenticação';
          if (openaiRes.ok) {
            const data = await openaiRes.json();
            result.details = `${data.data?.length || 0} modelos encontrados`;
          }
          break;

        case 'gemini':
          const geminiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}&pageSize=1`);
          result.success = geminiRes.ok;
          result.message = geminiRes.ok ? 'Gemini respondendo!' : 'Falha na autenticação';
          break;

        case 'anthropic':
          // Anthropic: fazer uma mini chamada
          const anthropicRes = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
              'x-api-key': key,
              'anthropic-version': '2023-06-01',
              'content-type': 'application/json'
            },
            body: JSON.stringify({
              model: "claude-3-haiku-20240307",
              max_tokens: 1,
              messages: [{ role: "user", content: "Hi" }]
            })
          });
          result.success = anthropicRes.status !== 401 && anthropicRes.status !== 403;
          result.message = result.success ? 'Anthropic respondendo!' : 'Falha na autenticação';
          break;

        case 'youtube':
          const ytRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${key}`);
          result.success = ytRes.ok;
          result.message = ytRes.ok ? 'YouTube Data API respondendo!' : 'Falha na autenticação';
          break;

        case 'pexels':
          const pexelsRes = await fetch('https://api.pexels.com/v1/curated?per_page=1', {
            headers: { 'Authorization': key }
          });
          result.success = pexelsRes.ok;
          result.message = pexelsRes.ok ? 'Pexels respondendo! Fotos disponíveis.' : 'Falha na autenticação';
          if (pexelsRes.ok) {
            const data = await pexelsRes.json();
            result.details = `${data.total_results?.toLocaleString() || 'Milhões de'} fotos disponíveis`;
          }
          break;

        case 'pixabay':
          const pixabayRes = await fetch(`https://pixabay.com/api/?key=${key}&q=nature&per_page=3`);
          result.success = pixabayRes.ok;
          result.message = pixabayRes.ok ? 'Pixabay respondendo!' : 'Falha na autenticação';
          if (pixabayRes.ok) {
            const data = await pixabayRes.json();
            result.details = `${data.totalHits?.toLocaleString() || 'Muitas'} imagens encontradas`;
          }
          break;

        case 'elevenlabs':
          const elevenRes = await fetch('https://api.elevenlabs.io/v1/voices', {
            headers: { 'xi-api-key': key }
          });
          result.success = elevenRes.ok;
          result.message = elevenRes.ok ? 'ElevenLabs respondendo!' : 'Falha na autenticação';
          if (elevenRes.ok) {
            const data = await elevenRes.json();
            result.details = `${data.voices?.length || 0} vozes disponíveis`;
          }
          break;

        case 'tavily':
          // Tavily - não fazer busca real para não gastar crédito, apenas verificar auth
          const tavilyRes = await fetch('https://api.tavily.com/search', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ api_key: key, query: "test", max_results: 1 })
          });
          result.success = tavilyRes.ok;
          result.message = tavilyRes.ok ? 'Tavily respondendo! Pesquisa IA pronta.' : 'Falha na autenticação';
          break;

        case 'json2video':
          const j2vRes = await fetch('https://api.json2video.com/v2/movie', {
            headers: { 'x-api-key': key }
          });
          result.success = j2vRes.status !== 401 && j2vRes.status !== 403;
          result.message = result.success ? 'JSON2Video respondendo!' : 'Falha na autenticação';
          break;

        case 'github':
          const githubRes = await fetch('https://api.github.com/user', {
            headers: {
              'Authorization': `token ${key}`,
              'Accept': 'application/vnd.github.v3+json'
            }
          });
          result.success = githubRes.ok;
          result.message = githubRes.ok ? 'GitHub conectado!' : 'Falha na autenticação';
          if (githubRes.ok) {
            const data = await githubRes.json();
            result.details = `Usuário: ${data.login}`;
          }
          break;

        case 'vercel':
          const vercelRes = await fetch('https://api.vercel.com/v9/projects', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          result.success = vercelRes.ok;
          result.message = vercelRes.ok ? 'Vercel conectado!' : 'Falha na autenticação';
          if (vercelRes.ok) {
            const data = await vercelRes.json();
            result.details = `${data.projects?.length || 0} projetos encontrados`;
          }
          break;

        default:
          result.message = 'Provider não suportado para teste';
      }
    } catch (fetchError) {
      result.success = false;
      result.message = 'Erro de conexão com a API';
      result.details = fetchError instanceof Error ? fetchError.message : 'Erro desconhecido';
    }

    result.responseTime = Date.now() - startTime;
    return NextResponse.json(result);

  } catch {
    return NextResponse.json({
      success: false,
      message: 'Erro interno no servidor',
      responseTime: 0
    }, { status: 500 });
  }
}

```

---
#### `app/api/tts/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { TTSProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { text, provider, voice } = body as {
      text: string;
      provider: TTSProvider;
      voice: string;
    };

    if (!text || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: text, provider" },
        { status: 400 }
      );
    }

    let audioBuffer: ArrayBuffer;

    switch (provider) {
      case "openai": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/audio/speech", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "tts-1-hd",
            input: text,
            voice: voice || "alloy",
            response_format: "mp3",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "OpenAI TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "elevenlabs": {
        const apiKey = process.env.ELEVENLABS_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "ElevenLabs API key not configured" },
            { status: 400 }
          );
        }

        const voiceId = voice || "21m00Tcm4TlvDq8ikWAM"; // Default to Rachel
        const response = await fetch(
          `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "xi-api-key": apiKey,
            },
            body: JSON.stringify({
              text,
              model_id: "eleven_multilingual_v2",
              voice_settings: {
                stability: 0.5,
                similarity_boost: 0.75,
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("ElevenLabs TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "google": {
        const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Google API key not configured" },
            { status: 400 }
          );
        }

        // Google Cloud TTS requires different authentication
        // For simplicity, we'll use a basic synthesis endpoint
        const response = await fetch(
          `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              input: { text },
              voice: {
                languageCode: "pt-BR",
                name: voice || "pt-BR-Wavenet-A",
              },
              audioConfig: {
                audioEncoding: "MP3",
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("Google TTS failed");
        }

        const data = await response.json();
        const audioContent = data.audioContent;

        // Convert base64 to buffer
        const binaryString = atob(audioContent);
        const bytes = new Uint8Array(binaryString.length);
        for (let i = 0; i < binaryString.length; i++) {
          bytes[i] = binaryString.charCodeAt(i);
        }
        audioBuffer = bytes.buffer;
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown TTS provider: ${provider}` },
          { status: 400 }
        );
    }

    // Convert to base64 for response
    const base64Audio = Buffer.from(audioBuffer).toString("base64");
    const audioUrl = `data:audio/mp3;base64,${base64Audio}`;

    return NextResponse.json({ audioUrl, provider });
  } catch (error) {
    console.error("TTS error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "TTS generation failed" },
      { status: 500 }
    );
  }
}

export async function GET() {
  // Return available voices for each provider
  const voices = {
    openai: [
      { id: "alloy", name: "Alloy" },
      { id: "echo", name: "Echo" },
      { id: "fable", name: "Fable" },
      { id: "onyx", name: "Onyx" },
      { id: "nova", name: "Nova" },
      { id: "shimmer", name: "Shimmer" },
    ],
    elevenlabs: process.env.ELEVENLABS_API_KEY
      ? [
          { id: "21m00Tcm4TlvDq8ikWAM", name: "Rachel" },
          { id: "AZnzlk1XvdvUeBnXmlld", name: "Domi" },
          { id: "EXAVITQu4vr4xnSDxMaL", name: "Bella" },
          { id: "ErXwobaYiN019PkySvjV", name: "Antoni" },
          { id: "MF3mGyEYCl7XYWbV9V6O", name: "Elli" },
          { id: "TxGEqnHWrfWFTfGW9XjX", name: "Josh" },
        ]
      : [],
    google: [
      { id: "pt-BR-Wavenet-A", name: "Brazilian Portuguese - Female" },
      { id: "pt-BR-Wavenet-B", name: "Brazilian Portuguese - Male" },
      { id: "en-US-Wavenet-D", name: "English US - Male" },
      { id: "en-US-Wavenet-F", name: "English US - Female" },
    ],
  };

  return NextResponse.json(voices);
}

```

---
#### `app/api/upload/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { put } from '@vercel/blob';

export const runtime = 'nodejs';

/**
 * POST /api/upload
 * Upload a file to Vercel Blob storage
 */
export async function POST(request: NextRequest) {
  try {
    const formData = await request.formData();
    const file = formData.get('file') as File | null;
    const type = formData.get('type') as string | null;

    if (!file) {
      return NextResponse.json(
        { error: 'No file provided' },
        { status: 400 }
      );
    }

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      return NextResponse.json(
        { error: 'Invalid file type. Allowed: JPEG, PNG, GIF, WebP' },
        { status: 400 }
      );
    }

    // Validate file size (max 5MB)
    const maxSize = 5 * 1024 * 1024; // 5MB
    if (file.size > maxSize) {
      return NextResponse.json(
        { error: 'File too large. Maximum size is 5MB' },
        { status: 400 }
      );
    }

    // Generate unique filename
    const timestamp = Date.now();
    const extension = file.name.split('.').pop() || 'jpg';
    const folder = type === 'avatar' ? 'avatars' : 'uploads';
    const filename = `${folder}/${timestamp}-${Math.random().toString(36).substring(7)}.${extension}`;

    // Upload to Vercel Blob
    const blob = await put(filename, file, {
      access: 'public',
    });

    return NextResponse.json({
      url: blob.url,
      filename: blob.pathname,
      size: file.size,
    });
  } catch (error) {
    console.error('Upload error:', error);
    return NextResponse.json(
      { error: 'Failed to upload file' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/youtube/channel/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ChannelData, RecentVideo } from "@/types";
import { getYouTubeKeys } from "@/lib/get-api-key";

export async function GET(request: NextRequest) {
  const { apiKey, channelId } = getYouTubeKeys(request);

  if (!apiKey || !channelId) {
    return NextResponse.json(
      {
        error: "YouTube API key or Channel ID not configured",
        details: !apiKey
          ? "YOUTUBE_API_KEY missing"
          : "YOUTUBE_CHANNEL_ID missing",
      },
      { status: 400 }
    );
  }

  try {
    // Fetch channel data
    const channelResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`
    );

    if (!channelResponse.ok) {
      const errorData = await channelResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${channelResponse.status}`;
      throw new Error(`YouTube API Error: ${errorMessage}`);
    }

    const channelData = await channelResponse.json();

    if (!channelData.items || channelData.items.length === 0) {
      return NextResponse.json(
        {
          error: "Channel not found",
          details: `No channel found with ID: ${channelId}`,
        },
        { status: 404 }
      );
    }

    const channel = channelData.items[0];

    // Fetch recent videos
    const videosResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&type=video&order=date&maxResults=10&key=${apiKey}`
    );

    if (!videosResponse.ok) {
      const errorData = await videosResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${videosResponse.status}`;
      throw new Error(`Failed to fetch videos: ${errorMessage}`);
    }

    const videosData = await videosResponse.json();
    const videoIds =
      videosData.items
        ?.map((item: { id: { videoId: string } }) => item.id.videoId)
        .join(",") || "";

    // Fetch video statistics
    let recentVideos: RecentVideo[] = [];
    if (videoIds) {
      const statsResponse = await fetch(
        `https://www.googleapis.com/youtube/v3/videos?part=statistics,snippet&id=${videoIds}&key=${apiKey}`
      );

      if (statsResponse.ok) {
        const statsData = await statsResponse.json();
        recentVideos =
          statsData.items?.map(
            (video: {
              id: string;
              snippet: {
                title: string;
                description: string;
                thumbnails: { medium: { url: string } };
                publishedAt: string;
              };
              statistics: {
                viewCount: string;
                likeCount: string;
                commentCount: string;
              };
            }) => ({
              id: video.id,
              title: video.snippet.title,
              description: video.snippet.description,
              thumbnailUrl: video.snippet.thumbnails.medium.url,
              publishedAt: video.snippet.publishedAt,
              viewCount: parseInt(video.statistics.viewCount || "0"),
              likeCount: parseInt(video.statistics.likeCount || "0"),
              commentCount: parseInt(video.statistics.commentCount || "0"),
            })
          ) || [];
      }
    }

    const result: ChannelData = {
      channelId: channel.id,
      title: channel.snippet.title,
      description: channel.snippet.description,
      subscriberCount: parseInt(channel.statistics.subscriberCount || "0"),
      videoCount: parseInt(channel.statistics.videoCount || "0"),
      viewCount: parseInt(channel.statistics.viewCount || "0"),
      recentVideos,
    };

    return NextResponse.json(result);
  } catch (error) {
    console.error("YouTube API error:", error);
    return NextResponse.json(
      {
        error: "Failed to fetch YouTube data",
        details: error instanceof Error ? error.message : "Unknown error",
      },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/youtube/upload/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { UploadData, UploadSetup } from "@/types";

/**
 * ⚠️ STUB IMPLEMENTATION - NOT PRODUCTION READY
 *
 * This endpoint returns simulated upload responses only.
 * Actual YouTube upload requires:
 * 1. OAuth2 authentication flow with youtube.upload scope
 * 2. Resumable upload implementation
 * 3. Video download from videoUrl
 * 4. Proper error handling and retry logic
 *
 * See PRODUCTION_NOTES.md for implementation guide.
 */

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      proposalId,
      renderId,
      videoUrl,
      title,
      description,
      tags,
      uploadSetup,
      accessToken,
    } = body as {
      proposalId: string;
      renderId: string;
      videoUrl: string;
      title: string;
      description: string;
      tags: string[];
      uploadSetup: UploadSetup;
      accessToken: string;
    };

    if (!proposalId || !renderId || !videoUrl || !title || !accessToken) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Prepare metadata
    const metadata = {
      snippet: {
        title,
        description,
        tags,
        categoryId: uploadSetup?.category || "22", // People & Blogs
        defaultLanguage: uploadSetup?.language || "pt",
      },
      status: {
        privacyStatus: "private", // Always upload as private first
        selfDeclaredMadeForKids: uploadSetup?.madeForKids || false,
        license: uploadSetup?.license === "creative_commons" ? "creativeCommon" : "youtube",
        embeddable: uploadSetup?.allowEmbedding !== false,
      },
    };

    // In a real implementation, this would:
    // 1. Download the video from videoUrl
    // 2. Use YouTube Data API v3 to upload the video
    // 3. Set the thumbnail
    //
    // For now, we'll return a simulated upload response
    // The actual implementation would require OAuth2 authentication flow

    // Note: YouTube upload requires OAuth2 with youtube.upload scope
    // This is typically done through a separate auth flow

    const uploadData: UploadData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      renderId,
      status: "pending",
      youtubeVideoId: null,
      youtubeUrl: null,
      error: null,
    };

    // In production, you would implement the actual upload here:
    // 1. Initialize resumable upload
    // 2. Upload video in chunks
    // 3. Set thumbnail
    // 4. Return video ID

    // For now, return pending status
    // The client can poll for status updates

    return NextResponse.json({
      ...uploadData,
      message: "Upload initiated. YouTube OAuth2 authentication required.",
      metadata,
    });
  } catch (error) {
    console.error("Upload error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Upload failed" },
      { status: 500 }
    );
  }
}

// Get YouTube categories
export async function GET() {
  const apiKey = process.env.YOUTUBE_API_KEY;

  if (!apiKey) {
    // Return default categories if no API key
    return NextResponse.json({
      categories: [
        { id: "1", title: "Film & Animation" },
        { id: "2", title: "Autos & Vehicles" },
        { id: "10", title: "Music" },
        { id: "15", title: "Pets & Animals" },
        { id: "17", title: "Sports" },
        { id: "19", title: "Travel & Events" },
        { id: "20", title: "Gaming" },
        { id: "22", title: "People & Blogs" },
        { id: "23", title: "Comedy" },
        { id: "24", title: "Entertainment" },
        { id: "25", title: "News & Politics" },
        { id: "26", title: "Howto & Style" },
        { id: "27", title: "Education" },
        { id: "28", title: "Science & Technology" },
        { id: "29", title: "Nonprofits & Activism" },
      ],
    });
  }

  try {
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/videoCategories?part=snippet&regionCode=BR&key=${apiKey}`
    );

    if (!response.ok) {
      throw new Error("Failed to fetch categories");
    }

    const data = await response.json();
    const categories = data.items
      ?.filter((item: { snippet: { assignable: boolean } }) => item.snippet.assignable)
      .map((item: { id: string; snippet: { title: string } }) => ({
        id: item.id,
        title: item.snippet.title,
      }));

    return NextResponse.json({ categories });
  } catch (error) {
    console.error("Categories fetch error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Failed to fetch categories" },
      { status: 500 }
    );
  }
}

```

---
#### `app/approve/[token]/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { useParams, useRouter } from 'next/navigation';
import {
  CheckCircle2,
  XCircle,
  MessageSquare,
  FileText,
  Clock,
  Loader2,
  AlertTriangle,
  ChevronDown,
  ChevronUp,
} from 'lucide-react';

interface ProjectData {
  project: {
    id: string;
    name: string;
    topic: string;
    status: string;
  };
  script: {
    title: string;
    content: string;
    sections: {
      hook?: string;
      body?: string[];
      cta?: string;
    };
  } | null;
  research: {
    summary: string;
  } | null;
  workflow: {
    currentStep: string;
    approvalSentAt: string;
  };
}

export default function ApprovalPage() {
  const params = useParams();
  const router = useRouter();
  const token = params.token as string;

  const [data, setData] = useState<ProjectData | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [submitting, setSubmitting] = useState(false);
  const [showFeedback, setShowFeedback] = useState(false);
  const [feedback, setFeedback] = useState('');
  const [expandedSections, setExpandedSections] = useState<Record<string, boolean>>({
    script: true,
    research: false,
  });

  useEffect(() => {
    async function fetchData() {
      try {
        const response = await fetch(`/api/approve?token=${token}`);
        if (!response.ok) {
          const err = await response.json();
          throw new Error(err.error || 'Failed to load project');
        }
        const projectData = await response.json();
        setData(projectData);
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Failed to load project');
      } finally {
        setLoading(false);
      }
    }

    if (token) {
      fetchData();
    }
  }, [token]);

  const handleApprove = async () => {
    setSubmitting(true);
    try {
      const response = await fetch('/api/approve', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token, action: 'approve' }),
      });

      if (!response.ok) {
        throw new Error('Failed to approve');
      }

      router.push('/approve/success');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to approve');
    } finally {
      setSubmitting(false);
    }
  };

  const handleRequestChanges = async () => {
    if (!feedback.trim()) {
      setError('Please provide feedback for changes');
      return;
    }

    setSubmitting(true);
    try {
      const response = await fetch('/api/approve', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token, action: 'request_changes', feedback }),
      });

      if (!response.ok) {
        throw new Error('Failed to submit feedback');
      }

      router.push('/approve/feedback-sent');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to submit feedback');
    } finally {
      setSubmitting(false);
    }
  };

  const toggleSection = (section: string) => {
    setExpandedSections(prev => ({ ...prev, [section]: !prev[section] }));
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-zinc-950 flex items-center justify-center">
        <div className="text-center">
          <Loader2 className="w-12 h-12 text-violet-500 animate-spin mx-auto mb-4" />
          <p className="text-zinc-400">Carregando roteiro...</p>
        </div>
      </div>
    );
  }

  if (error && !data) {
    return (
      <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
        <div className="bg-zinc-900 border border-red-500/30 rounded-2xl p-8 max-w-md text-center">
          <AlertTriangle className="w-16 h-16 text-red-500 mx-auto mb-4" />
          <h1 className="text-xl font-bold text-white mb-2">Erro ao carregar</h1>
          <p className="text-zinc-400">{error}</p>
        </div>
      </div>
    );
  }

  if (!data) return null;

  const isAwaitingApproval = data.project.status === 'AWAITING_APPROVAL';

  return (
    <div className="min-h-screen bg-zinc-950 p-4 md:p-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 mb-6">
          <div className="flex items-start justify-between">
            <div>
              <h1 className="text-2xl font-bold text-white mb-2">
                Aprovacao de Roteiro
              </h1>
              <p className="text-zinc-400">{data.project.name}</p>
            </div>
            <div className="flex items-center gap-2 px-3 py-1.5 bg-amber-500/20 rounded-full">
              <Clock className="w-4 h-4 text-amber-500" />
              <span className="text-sm text-amber-500">Aguardando Aprovacao</span>
            </div>
          </div>
        </div>

        {/* Error message */}
        {error && (
          <div className="bg-red-500/20 border border-red-500/30 rounded-xl p-4 mb-6">
            <p className="text-red-400">{error}</p>
          </div>
        )}

        {/* Script Section */}
        <div className="bg-zinc-900 border border-zinc-800 rounded-2xl mb-6 overflow-hidden">
          <button
            onClick={() => toggleSection('script')}
            className="w-full flex items-center justify-between p-6 text-left hover:bg-zinc-800/50 transition-colors"
          >
            <div className="flex items-center gap-3">
              <FileText className="w-5 h-5 text-violet-500" />
              <span className="text-lg font-semibold text-white">Roteiro</span>
            </div>
            {expandedSections.script ? (
              <ChevronUp className="w-5 h-5 text-zinc-400" />
            ) : (
              <ChevronDown className="w-5 h-5 text-zinc-400" />
            )}
          </button>

          {expandedSections.script && data.script && (
            <div className="px-6 pb-6 border-t border-zinc-800 pt-4">
              <h2 className="text-xl font-bold text-white mb-4">
                {data.script.title}
              </h2>

              {data.script.sections?.hook && (
                <div className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">HOOK</h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.sections.hook}
                  </p>
                </div>
              )}

              {data.script.sections?.body?.map((section, index) => (
                <div key={index} className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">
                    SECAO {index + 1}
                  </h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">{section}</p>
                </div>
              ))}

              {data.script.sections?.cta && (
                <div className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">CTA</h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.sections.cta}
                  </p>
                </div>
              )}

              {data.script.content && !data.script.sections?.hook && (
                <div className="prose prose-invert max-w-none">
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.content}
                  </p>
                </div>
              )}
            </div>
          )}
        </div>

        {/* Research Summary */}
        {data.research && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl mb-6 overflow-hidden">
            <button
              onClick={() => toggleSection('research')}
              className="w-full flex items-center justify-between p-6 text-left hover:bg-zinc-800/50 transition-colors"
            >
              <div className="flex items-center gap-3">
                <MessageSquare className="w-5 h-5 text-blue-500" />
                <span className="text-lg font-semibold text-white">
                  Resumo da Pesquisa
                </span>
              </div>
              {expandedSections.research ? (
                <ChevronUp className="w-5 h-5 text-zinc-400" />
              ) : (
                <ChevronDown className="w-5 h-5 text-zinc-400" />
              )}
            </button>

            {expandedSections.research && (
              <div className="px-6 pb-6 border-t border-zinc-800 pt-4">
                <p className="text-zinc-300 whitespace-pre-wrap">
                  {data.research.summary}
                </p>
              </div>
            )}
          </div>
        )}

        {/* Feedback Section */}
        {showFeedback && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 mb-6">
            <h3 className="text-lg font-semibold text-white mb-4">
              Solicitar Alteracoes
            </h3>
            <textarea
              value={feedback}
              onChange={(e) => setFeedback(e.target.value)}
              placeholder="Descreva as alteracoes necessarias..."
              className="w-full h-32 bg-zinc-800 border border-zinc-700 rounded-xl p-4 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-violet-500 resize-none"
            />
          </div>
        )}

        {/* Action Buttons */}
        {isAwaitingApproval && (
          <div className="flex flex-col sm:flex-row gap-4">
            <button
              onClick={handleApprove}
              disabled={submitting}
              className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {submitting ? (
                <Loader2 className="w-5 h-5 animate-spin" />
              ) : (
                <CheckCircle2 className="w-5 h-5" />
              )}
              Aprovar Roteiro
            </button>

            {!showFeedback ? (
              <button
                onClick={() => setShowFeedback(true)}
                className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-semibold rounded-xl transition-all"
              >
                <XCircle className="w-5 h-5" />
                Solicitar Alteracoes
              </button>
            ) : (
              <button
                onClick={handleRequestChanges}
                disabled={submitting || !feedback.trim()}
                className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-amber-600 hover:bg-amber-500 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {submitting ? (
                  <Loader2 className="w-5 h-5 animate-spin" />
                ) : (
                  <MessageSquare className="w-5 h-5" />
                )}
                Enviar Feedback
              </button>
            )}
          </div>
        )}

        {!isAwaitingApproval && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 text-center">
            <p className="text-zinc-400">
              Este roteiro ja foi processado. Status atual:{' '}
              <span className="text-white font-medium">{data.project.status}</span>
            </p>
          </div>
        )}
      </div>
    </div>
  );
}

```

---
#### `app/approve/feedback-sent/page.tsx`

```
"use client";

import { MessageSquare, ArrowRight } from 'lucide-react';
import Link from 'next/link';

export default function FeedbackSentPage() {
  return (
    <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
      <div className="bg-zinc-900 border border-amber-500/30 rounded-2xl p-8 max-w-md text-center">
        <div className="w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
          <MessageSquare className="w-10 h-10 text-amber-500" />
        </div>

        <h1 className="text-2xl font-bold text-white mb-2">
          Feedback Enviado!
        </h1>

        <p className="text-zinc-400 mb-6">
          Seu feedback foi registrado.
          O roteiro sera revisado e voce recebera um novo email para aprovacao.
        </p>

        <Link
          href="/"
          className="inline-flex items-center gap-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white font-semibold rounded-xl transition-all"
        >
          Voltar ao Dashboard
          <ArrowRight className="w-4 h-4" />
        </Link>
      </div>
    </div>
  );
}

```

---
#### `app/approve/success/page.tsx`

```
"use client";

import { CheckCircle2, ArrowRight } from 'lucide-react';
import Link from 'next/link';

export default function ApprovalSuccessPage() {
  return (
    <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
      <div className="bg-zinc-900 border border-green-500/30 rounded-2xl p-8 max-w-md text-center">
        <div className="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
          <CheckCircle2 className="w-10 h-10 text-green-500" />
        </div>

        <h1 className="text-2xl font-bold text-white mb-2">
          Roteiro Aprovado!
        </h1>

        <p className="text-zinc-400 mb-6">
          O workflow continuara automaticamente.
          Voce recebera um email quando o video estiver pronto.
        </p>

        <div className="bg-zinc-800 rounded-xl p-4 mb-6">
          <p className="text-sm text-zinc-400">Proximos passos:</p>
          <ul className="text-left text-sm text-zinc-300 mt-2 space-y-1">
            <li>1. Geracao do storyboard</li>
            <li>2. Renderizacao do video</li>
            <li>3. Upload para YouTube</li>
          </ul>
        </div>

        <Link
          href="/"
          className="inline-flex items-center gap-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white font-semibold rounded-xl transition-all"
        >
          Voltar ao Dashboard
          <ArrowRight className="w-4 h-4" />
        </Link>
      </div>
    </div>
  );
}

```

---
#### `app/documentation/design-system/page.tsx`

```
'use client';

import { useState } from 'react';
import {
  Palette,
  Type,
  Box,
  Layers,
  Sparkles,
  Zap,
  MousePointer2,
  Layout,
  Circle,
  CheckCircle2,
  AlertCircle,
  XCircle,
  Info,
  ChevronRight,
  Loader2,
  ArrowRight,
  Settings,
  Bell,
  Star,
} from 'lucide-react';
import {
  ColorSwatch,
  ColorPalette,
  ColorGrid,
  GradientCard,
  GradientGrid,
  TypographySample,
  TypographyScale,
  FontPreview,
  ComponentPreview,
  ComponentSection,
  PreviewGrid,
  SpacingPreview,
  ShadowPreview,
  RadiusPreview,
} from '@/components/design-system';

// Navegação do Design System
const sections = [
  { id: 'overview', label: 'Visão Geral', icon: Layout },
  { id: 'colors', label: 'Cores', icon: Palette },
  { id: 'gradients', label: 'Gradientes', icon: Sparkles },
  { id: 'typography', label: 'Tipografia', icon: Type },
  { id: 'spacing', label: 'Espaçamento', icon: Box },
  { id: 'components', label: 'Componentes', icon: Layers },
  { id: 'motion', label: 'Motion', icon: Zap },
  { id: 'guidelines', label: 'Guidelines', icon: MousePointer2 },
];

export default function DesignSystemPage() {
  const [activeSection, setActiveSection] = useState('overview');

  const scrollToSection = (id: string) => {
    setActiveSection(id);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  };

  return (
    <div className="min-h-screen bg-layer-0">
      {/* Header Hero */}
      <header className="relative overflow-hidden border-b border-border-subtle">
        {/* Background Effects */}
        <div className="absolute inset-0 bg-gradient-orion-deep opacity-50" />
        <div className="absolute inset-0" style={{ background: 'var(--gradient-mesh)' }} />

        <div className="relative max-w-7xl mx-auto px-6 py-16 sm:py-24">
          <div className="flex items-center gap-3 mb-6">
            <div className="w-12 h-12 rounded-xl bg-gradient-cyan-blue flex items-center justify-center shadow-glow-md">
              <Palette className="w-6 h-6 text-white" />
            </div>
            <span className="badge-info">v1.0</span>
          </div>

          <h1 className="text-4xl sm:text-5xl lg:text-6xl font-bold text-foreground mb-4">
            ORION{' '}
            <span className="text-gradient">Design System</span>
          </h1>

          <p className="text-lg sm:text-xl text-foreground-secondary max-w-2xl mb-8">
            Sistema de design completo para a plataforma ORION. Uma linguagem visual
            unificada que guia todas as experiências do produto.
          </p>

          <div className="flex flex-wrap gap-4">
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Dark-first</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Glassmorphism</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Motion disciplinado</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Acessível</span>
            </div>
          </div>
        </div>
      </header>

      <div className="max-w-7xl mx-auto px-6 py-12">
        <div className="flex flex-col lg:flex-row gap-12">
          {/* Sidebar Navigation */}
          <aside className="lg:w-64 shrink-0">
            <nav className="lg:sticky lg:top-6 space-y-1">
              {sections.map((section) => {
                const Icon = section.icon;
                const isActive = activeSection === section.id;

                return (
                  <button
                    key={section.id}
                    onClick={() => scrollToSection(section.id)}
                    className={`
                      w-full flex items-center gap-3 px-4 py-3 rounded-lg
                      transition-all duration-200 text-left
                      ${isActive
                        ? 'bg-surface-glass border border-border-active text-foreground shadow-glow-sm'
                        : 'text-foreground-muted hover:text-foreground hover:bg-surface-glass-subtle'
                      }
                    `}
                  >
                    <Icon className="w-5 h-5" />
                    <span className="font-medium">{section.label}</span>
                    {isActive && (
                      <ChevronRight className="w-4 h-4 ml-auto" />
                    )}
                  </button>
                );
              })}
            </nav>
          </aside>

          {/* Main Content */}
          <main className="flex-1 space-y-24">
            {/* Overview */}
            <section id="overview" className="scroll-mt-6">
              <SectionHeader
                title="Visão Geral"
                description="Fundamentos e princípios do Design System ORION."
              />

              <div className="grid md:grid-cols-2 gap-6 mt-8">
                <PrincipleCard
                  icon={<Circle className="w-6 h-6" />}
                  title="Dark-First"
                  description="Projetado primariamente para modo escuro. Um centro de comando para produção de vídeos exige foco e redução de fadiga visual."
                />
                <PrincipleCard
                  icon={<Layers className="w-6 h-6" />}
                  title="Profundidade"
                  description="Sistema de camadas (layers) que cria hierarquia visual clara. Do layer-0 mais profundo ao layer-4 mais elevado."
                />
                <PrincipleCard
                  icon={<Sparkles className="w-6 h-6" />}
                  title="Glassmorphism Moderado"
                  description="Efeitos de vidro sutis para criar sofisticação sem comprometer legibilidade ou performance."
                />
                <PrincipleCard
                  icon={<Zap className="w-6 h-6" />}
                  title="Motion Funcional"
                  description="Animações servem a um propósito: feedback, transição de contexto ou indicação de estado. Nunca decorativas."
                />
              </div>

              {/* Color Identity */}
              <div className="mt-12 card-glass p-8 rounded-2xl">
                <h3 className="text-xl font-semibold text-foreground mb-6">Identidade de Cores</h3>
                <div className="grid md:grid-cols-3 gap-8">
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-gradient-cyan-blue shadow-glow-md" />
                    <div>
                      <h4 className="font-semibold text-foreground">Azul ORION + Cyan</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Cor principal. Transmite confiança, tecnologia e profissionalismo.
                        Usado em CTAs primários, estados ativos e elementos de foco.
                      </p>
                    </div>
                  </div>
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-orion-red-600 shadow-lg" />
                    <div>
                      <h4 className="font-semibold text-foreground">Vermelho ORION</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Acento crítico do logo. Estritamente limitado a CTAs críticos,
                        estados de erro ou ações irreversíveis.
                      </p>
                    </div>
                  </div>
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-gradient-orion-deep" />
                    <div>
                      <h4 className="font-semibold text-foreground">Azul Profundo</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Base do sistema. Múltiplas camadas de azul escuro criam
                        profundidade e hierarquia visual.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* Colors */}
            <section id="colors" className="scroll-mt-6">
              <SectionHeader
                title="Cores"
                description="Paleta completa de cores do sistema ORION."
              />

              {/* Background Layers */}
              <ColorGrid
                title="Backgrounds (Layers)"
                description="Sistema de camadas para criar profundidade visual."
                className="mt-8"
              >
                <ColorSwatch name="Layer 0" value="#050A12" cssVariable="--bg-layer-0" />
                <ColorSwatch name="Layer 1" value="#0A1628" cssVariable="--bg-layer-1" />
                <ColorSwatch name="Layer 2" value="#0F2341" cssVariable="--bg-layer-2" />
                <ColorSwatch name="Layer 3" value="#1A3A5C" cssVariable="--bg-layer-3" />
                <ColorSwatch name="Layer 4" value="#245177" cssVariable="--bg-layer-4" />
              </ColorGrid>

              {/* Brand Colors */}
              <div className="mt-12 space-y-8">
                <ColorPalette
                  name="ORION Blue"
                  colors={[
                    { shade: '50', value: '#E8F4FC', cssVar: '--orion-blue-50' },
                    { shade: '100', value: '#C5E4F8', cssVar: '--orion-blue-100' },
                    { shade: '200', value: '#8EC8F2', cssVar: '--orion-blue-200' },
                    { shade: '300', value: '#57ACEB', cssVar: '--orion-blue-300' },
                    { shade: '400', value: '#3B82F6', cssVar: '--orion-blue-400' },
                    { shade: '500', value: '#2563EB', cssVar: '--orion-blue-500' },
                    { shade: '600', value: '#1D4ED8', cssVar: '--orion-blue-600' },
                    { shade: '700', value: '#1E3A5F', cssVar: '--orion-blue-700' },
                    { shade: '800', value: '#0F2341', cssVar: '--orion-blue-800' },
                    { shade: '900', value: '#0A1628', cssVar: '--orion-blue-900' },
                    { shade: '950', value: '#050A12', cssVar: '--orion-blue-950' },
                  ]}
                />

                <ColorPalette
                  name="Cyan (Estados Ativos)"
                  colors={[
                    { shade: '400', value: '#22D3EE', cssVar: '--accent-cyan-400' },
                    { shade: '500', value: '#06B6D4', cssVar: '--accent-cyan-500' },
                    { shade: '600', value: '#0891B2', cssVar: '--accent-cyan-600' },
                  ]}
                />

                <ColorPalette
                  name="Indigo (Estados Secundários)"
                  colors={[
                    { shade: '400', value: '#818CF8', cssVar: '--accent-indigo-400' },
                    { shade: '500', value: '#6366F1', cssVar: '--accent-indigo-500' },
                    { shade: '600', value: '#4F46E5', cssVar: '--accent-indigo-600' },
                  ]}
                />

                <ColorPalette
                  name="Violet (Decorativo)"
                  colors={[
                    { shade: '400', value: '#A78BFA', cssVar: '--accent-violet-400' },
                    { shade: '500', value: '#8B5CF6', cssVar: '--accent-violet-500' },
                    { shade: '600', value: '#7C3AED', cssVar: '--accent-violet-600' },
                  ]}
                />

                <ColorPalette
                  name="ORION Red (Acento Crítico)"
                  colors={[
                    { shade: '400', value: '#F87171', cssVar: '--orion-red-400' },
                    { shade: '500', value: '#EF4444', cssVar: '--orion-red-500' },
                    { shade: '600', value: '#DC2626', cssVar: '--orion-red-600' },
                  ]}
                />
              </div>

              {/* Semantic Colors */}
              <div className="mt-12">
                <h3 className="text-xl font-semibold text-foreground mb-6">Cores Semânticas</h3>
                <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                  <SemanticColorCard
                    name="Success"
                    icon={<CheckCircle2 className="w-5 h-5" />}
                    bgClass="bg-success-bg"
                    borderClass="border-success-border"
                    textClass="text-success-text"
                  />
                  <SemanticColorCard
                    name="Warning"
                    icon={<AlertCircle className="w-5 h-5" />}
                    bgClass="bg-warning-bg"
                    borderClass="border-warning-border"
                    textClass="text-warning-text"
                  />
                  <SemanticColorCard
                    name="Error"
                    icon={<XCircle className="w-5 h-5" />}
                    bgClass="bg-error-bg"
                    borderClass="border-error-border"
                    textClass="text-error-text"
                  />
                  <SemanticColorCard
                    name="Info"
                    icon={<Info className="w-5 h-5" />}
                    bgClass="bg-info-bg"
                    borderClass="border-info-border"
                    textClass="text-info-text"
                  />
                </div>
              </div>

              {/* Text Colors */}
              <div className="mt-12">
                <h3 className="text-xl font-semibold text-foreground mb-6">Cores de Texto</h3>
                <div className="card-glass p-6 rounded-xl space-y-4">
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground">Texto Primário</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-secondary">Texto Secundário</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-secondary</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-muted">Texto Muted</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-muted</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-disabled">Texto Disabled</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-disabled</code>
                  </div>
                </div>
              </div>
            </section>

            {/* Gradients */}
            <section id="gradients" className="scroll-mt-6">
              <SectionHeader
                title="Gradientes"
                description="Gradientes oficiais do sistema ORION."
              />

              <GradientGrid
                title="Gradientes Principais"
                description="Usados em elementos de destaque e CTAs."
                className="mt-8"
              >
                <GradientCard
                  name="Cyan Blue"
                  cssVariable="--gradient-cyan-blue"
                  gradient="linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%)"
                  description="Botões primários, CTAs"
                />
                <GradientCard
                  name="Blue Indigo"
                  cssVariable="--gradient-blue-indigo"
                  gradient="linear-gradient(135deg, #3B82F6 0%, #6366F1 100%)"
                  description="Estados ativos, foco"
                />
                <GradientCard
                  name="Violet Blue"
                  cssVariable="--gradient-violet-blue"
                  gradient="linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%)"
                  description="Elementos decorativos"
                />
              </GradientGrid>

              <GradientGrid
                title="Gradientes de Background"
                description="Usados em fundos e seções."
                className="mt-12"
              >
                <GradientCard
                  name="ORION Primary"
                  cssVariable="--gradient-orion-primary"
                  gradient="linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%)"
                  description="Headers, heroes"
                />
                <GradientCard
                  name="ORION Dark"
                  cssVariable="--gradient-orion-dark"
                  gradient="linear-gradient(180deg, #050A12 0%, #0A1628 100%)"
                  description="Fundos principais"
                />
                <GradientCard
                  name="ORION Deep"
                  cssVariable="--gradient-orion-deep"
                  gradient="linear-gradient(135deg, #050A12 0%, #0F2341 100%)"
                  description="Seções profundas"
                />
              </GradientGrid>

              <GradientGrid
                title="Gradientes de Efeito"
                description="Usados para glow e efeitos visuais."
                className="mt-12"
              >
                <GradientCard
                  name="Cyan Glow"
                  cssVariable="--gradient-cyan-glow"
                  gradient="linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%)"
                  description="Efeito de luz superior"
                />
                <GradientCard
                  name="Blue Glow"
                  cssVariable="--gradient-blue-glow"
                  gradient="linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%)"
                  description="Efeito de luz azul"
                />
                <GradientCard
                  name="Card Gradient"
                  cssVariable="--gradient-card"
                  gradient="linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%)"
                  description="Fundo de cards"
                />
              </GradientGrid>
            </section>

            {/* Typography */}
            <section id="typography" className="scroll-mt-6">
              <SectionHeader
                title="Tipografia"
                description="Sistema tipográfico do ORION."
              />

              <FontPreview />

              <TypographyScale
                title="Escala de Tamanhos"
                description="Tamanhos de fonte padronizados."
                className="mt-12"
              >
                <TypographySample
                  name="Display Large"
                  description="Títulos hero"
                  fontClass="text-5xl font-bold tracking-tight"
                  specs={{ size: '3rem / 48px', weight: '700', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Display Medium"
                  description="Títulos de seção"
                  fontClass="text-4xl font-bold tracking-tight"
                  specs={{ size: '2.25rem / 36px', weight: '700', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Heading 1"
                  description="Títulos principais"
                  fontClass="text-3xl font-semibold"
                  specs={{ size: '1.875rem / 30px', weight: '600', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Heading 2"
                  description="Subtítulos"
                  fontClass="text-2xl font-semibold"
                  specs={{ size: '1.5rem / 24px', weight: '600', lineHeight: '1.33' }}
                />
                <TypographySample
                  name="Heading 3"
                  description="Títulos de card"
                  fontClass="text-xl font-semibold"
                  specs={{ size: '1.25rem / 20px', weight: '600', lineHeight: '1.4' }}
                />
                <TypographySample
                  name="Body Large"
                  description="Texto de destaque"
                  fontClass="text-lg"
                  specs={{ size: '1.125rem / 18px', weight: '400', lineHeight: '1.625' }}
                />
                <TypographySample
                  name="Body"
                  description="Texto padrão"
                  fontClass="text-base"
                  specs={{ size: '1rem / 16px', weight: '400', lineHeight: '1.5' }}
                />
                <TypographySample
                  name="Body Small"
                  description="Texto secundário"
                  fontClass="text-sm"
                  specs={{ size: '0.875rem / 14px', weight: '400', lineHeight: '1.43' }}
                />
                <TypographySample
                  name="Caption"
                  description="Legendas e labels"
                  fontClass="text-xs"
                  specs={{ size: '0.75rem / 12px', weight: '400', lineHeight: '1.33' }}
                />
                <TypographySample
                  name="Code"
                  description="Código e dados"
                  fontClass="text-sm font-mono"
                  sampleText="const orion = 'design-system';"
                  specs={{ size: '0.875rem / 14px', weight: '400' }}
                />
              </TypographyScale>
            </section>

            {/* Spacing */}
            <section id="spacing" className="scroll-mt-6">
              <SectionHeader
                title="Espaçamento"
                description="Sistema de espaçamento baseado em múltiplos de 4px."
              />

              <div className="mt-8 grid md:grid-cols-2 gap-8">
                {/* Spacing Scale */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-6">Escala Base</h3>
                  <div className="space-y-4">
                    <SpacingPreview name="0.5" value="0.125rem" />
                    <SpacingPreview name="1" value="0.25rem" />
                    <SpacingPreview name="2" value="0.5rem" />
                    <SpacingPreview name="3" value="0.75rem" />
                    <SpacingPreview name="4" value="1rem" />
                    <SpacingPreview name="6" value="1.5rem" />
                    <SpacingPreview name="8" value="2rem" />
                    <SpacingPreview name="12" value="3rem" />
                    <SpacingPreview name="16" value="4rem" />
                    <SpacingPreview name="24" value="6rem" />
                  </div>
                </div>

                {/* Border Radius */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-6">Border Radius</h3>
                  <div className="grid grid-cols-4 gap-4">
                    <RadiusPreview name="sm" radius="0.25rem" />
                    <RadiusPreview name="md" radius="0.375rem" />
                    <RadiusPreview name="lg" radius="0.5rem" />
                    <RadiusPreview name="xl" radius="0.75rem" />
                    <RadiusPreview name="2xl" radius="1rem" />
                    <RadiusPreview name="3xl" radius="1.5rem" />
                    <RadiusPreview name="4xl" radius="2rem" />
                    <RadiusPreview name="full" radius="9999px" />
                  </div>
                </div>
              </div>

              {/* Shadows */}
              <div className="mt-8">
                <h3 className="text-xl font-semibold text-foreground mb-6">Sombras</h3>
                <div className="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-8">
                  <ShadowPreview name="Card" shadow="var(--shadow-card)" />
                  <ShadowPreview name="Card Hover" shadow="var(--shadow-card-hover)" />
                  <ShadowPreview name="Elevated" shadow="var(--shadow-card-elevated)" />
                  <ShadowPreview name="Glow Blue" shadow="var(--shadow-glow-blue)" />
                  <ShadowPreview name="Glow Cyan" shadow="var(--shadow-glow-cyan)" />
                  <ShadowPreview name="Glow Violet" shadow="var(--shadow-glow-violet)" />
                </div>
              </div>
            </section>

            {/* Components */}
            <section id="components" className="scroll-mt-6">
              <SectionHeader
                title="Componentes"
                description="Componentes UI do sistema ORION."
              />

              {/* Buttons */}
              <ComponentSection
                title="Botões"
                description="Sistema completo de botões com variantes e estados."
                className="mt-8"
              >
                <ComponentPreview
                  title="Variantes de Botão"
                  description="6 variantes para diferentes contextos."
                >
                  <div className="flex flex-wrap gap-4">
                    <button className="btn-primary">Primary</button>
                    <button className="btn-secondary">Secondary</button>
                    <button className="btn-outline">Outline</button>
                    <button className="btn-ghost">Ghost</button>
                    <button className="btn-success">Success</button>
                    <button className="btn-danger">Danger</button>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Tamanhos"
                  description="3 tamanhos disponíveis."
                >
                  <div className="flex flex-wrap items-center gap-4">
                    <button className="btn-primary btn-sm">Small</button>
                    <button className="btn-primary">Medium</button>
                    <button className="btn-primary btn-lg">Large</button>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Estados"
                  description="Estados de loading e disabled."
                >
                  <div className="flex flex-wrap items-center gap-4">
                    <button className="btn-primary" disabled>
                      Disabled
                    </button>
                    <button className="btn-primary flex items-center gap-2">
                      <Loader2 className="w-4 h-4 animate-spin" />
                      Loading
                    </button>
                    <button className="btn-primary flex items-center gap-2">
                      Continuar
                      <ArrowRight className="w-4 h-4" />
                    </button>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Badges */}
              <ComponentSection
                title="Badges"
                description="Indicadores de status e tags."
                className="mt-12"
              >
                <ComponentPreview
                  title="Variantes Semânticas"
                  description="Badges para diferentes estados."
                >
                  <div className="flex flex-wrap gap-3">
                    <span className="badge-success">Success</span>
                    <span className="badge-warning">Warning</span>
                    <span className="badge-error">Error</span>
                    <span className="badge-info">Info</span>
                    <span className="badge-default">Default</span>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Com Ícones"
                  description="Badges com ícones para mais contexto."
                >
                  <div className="flex flex-wrap gap-3">
                    <span className="badge-success flex items-center gap-1.5">
                      <CheckCircle2 className="w-3.5 h-3.5" />
                      Aprovado
                    </span>
                    <span className="badge-warning flex items-center gap-1.5">
                      <AlertCircle className="w-3.5 h-3.5" />
                      Pendente
                    </span>
                    <span className="badge-error flex items-center gap-1.5">
                      <XCircle className="w-3.5 h-3.5" />
                      Rejeitado
                    </span>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Cards */}
              <ComponentSection
                title="Cards"
                description="Containers com diferentes níveis de elevação."
                className="mt-12"
              >
                <PreviewGrid cols={3}>
                  <div className="card p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Padrão</h4>
                    <p className="text-sm text-foreground-muted">
                      Card básico com background sutil e borda.
                    </p>
                  </div>
                  <div className="card-elevated p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Elevado</h4>
                    <p className="text-sm text-foreground-muted">
                      Card com sombra para maior destaque.
                    </p>
                  </div>
                  <div className="card-glass p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Glass</h4>
                    <p className="text-sm text-foreground-muted">
                      Card com efeito glassmorphism.
                    </p>
                  </div>
                  <div className="card-hover p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Hover</h4>
                    <p className="text-sm text-foreground-muted">
                      Passe o mouse para ver o efeito.
                    </p>
                  </div>
                  <div className="card p-6 glow-hover border border-border-subtle">
                    <h4 className="font-semibold text-foreground mb-2">Card Glow</h4>
                    <p className="text-sm text-foreground-muted">
                      Com efeito de glow no hover.
                    </p>
                  </div>
                </PreviewGrid>
              </ComponentSection>

              {/* Form Elements */}
              <ComponentSection
                title="Formulários"
                description="Inputs, selects e outros elementos de formulário."
                className="mt-12"
              >
                <ComponentPreview
                  title="Inputs"
                  description="Campos de entrada de texto."
                >
                  <div className="space-y-4 max-w-md">
                    <div>
                      <label className="label">Label padrão</label>
                      <input type="text" className="input" placeholder="Digite algo..." />
                    </div>
                    <div>
                      <label className="label">Textarea</label>
                      <textarea className="textarea" placeholder="Descrição..." rows={3} />
                    </div>
                    <div>
                      <label className="label">Select</label>
                      <select className="select">
                        <option>Opção 1</option>
                        <option>Opção 2</option>
                        <option>Opção 3</option>
                      </select>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Step Indicators */}
              <ComponentSection
                title="Step Indicators"
                description="Indicadores de progresso do workflow."
                className="mt-12"
              >
                <ComponentPreview
                  title="Estados de Step"
                  description="Diferentes estados do indicador de step."
                >
                  <div className="flex items-center gap-4">
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-completed">
                        <CheckCircle2 className="w-5 h-5" />
                      </div>
                      <span className="text-xs text-foreground-muted">Completed</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-active">2</div>
                      <span className="text-xs text-foreground-muted">Active</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-pending">3</div>
                      <span className="text-xs text-foreground-muted">Pending</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-locked">4</div>
                      <span className="text-xs text-foreground-muted">Locked</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-error">
                        <XCircle className="w-5 h-5" />
                      </div>
                      <span className="text-xs text-foreground-muted">Error</span>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Status Indicators */}
              <ComponentSection
                title="Status Indicators"
                description="Pontos de status para indicar estados."
                className="mt-12"
              >
                <ComponentPreview
                  title="Status Dots"
                  description="Indicadores visuais de status."
                >
                  <div className="flex items-center gap-6">
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-online" />
                      <span className="text-sm text-foreground-muted">Online</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-offline" />
                      <span className="text-sm text-foreground-muted">Offline</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-warning" />
                      <span className="text-sm text-foreground-muted">Warning</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-error" />
                      <span className="text-sm text-foreground-muted">Error</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot-pulse status-online" />
                      <span className="text-sm text-foreground-muted">Pulse</span>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>
            </section>

            {/* Motion */}
            <section id="motion" className="scroll-mt-6">
              <SectionHeader
                title="Motion"
                description="Sistema de animações e transições."
              />

              <div className="mt-8 space-y-8">
                {/* Duration */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-4">Durações</h3>
                  <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Fast</p>
                      <p className="text-xs text-foreground-muted font-mono">150ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Micro-interações, hovers</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Normal</p>
                      <p className="text-xs text-foreground-muted font-mono">200ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Transições padrão</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Slow</p>
                      <p className="text-xs text-foreground-muted font-mono">300ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Transições de entrada</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Slower</p>
                      <p className="text-xs text-foreground-muted font-mono">500ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Animações complexas</p>
                    </div>
                  </div>
                </div>

                {/* Easings */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-4">Easings</h3>
                  <div className="grid sm:grid-cols-2 gap-4">
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease In Out</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.4, 0, 0.2, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Padrão para a maioria das transições</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease Out</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0, 0, 0.2, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Elementos entrando na tela</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease In</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.4, 0, 1, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Elementos saindo da tela</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Spring</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.175, 0.885, 0.32, 1.275)</p>
                      <p className="text-xs text-foreground-muted mt-2">Animações com bounce sutil</p>
                    </div>
                  </div>
                </div>

                {/* Animation Examples */}
                <ComponentPreview
                  title="Exemplos de Animação"
                  description="Animações disponíveis no sistema."
                >
                  <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <AnimationDemo name="Pulse Glow" className="animate-pulse-glow" />
                    <AnimationDemo name="Float" className="animate-float" />
                    <AnimationDemo name="Shimmer" className="shimmer bg-layer-2" />
                    <AnimationDemo name="Spinner" hasSpinner />
                  </div>
                </ComponentPreview>
              </div>
            </section>

            {/* Guidelines */}
            <section id="guidelines" className="scroll-mt-6">
              <SectionHeader
                title="Guidelines"
                description="Diretrizes de uso do Design System."
              />

              <div className="mt-8 space-y-8">
                {/* Glassmorphism */}
                <GuidelineCard
                  title="Glassmorphism"
                  description="Quando usar e quando evitar efeitos de vidro."
                >
                  <div className="grid md:grid-cols-2 gap-6">
                    <div>
                      <h4 className="text-sm font-semibold text-success-text mb-3 flex items-center gap-2">
                        <CheckCircle2 className="w-4 h-4" />
                        Usar para
                      </h4>
                      <ul className="space-y-2 text-sm text-foreground-muted">
                        <li>Cards sobre backgrounds com gradiente</li>
                        <li>Modais e overlays</li>
                        <li>Navegação flutuante</li>
                        <li>Elementos que precisam de profundidade</li>
                      </ul>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-error-text mb-3 flex items-center gap-2">
                        <XCircle className="w-4 h-4" />
                        Evitar para
                      </h4>
                      <ul className="space-y-2 text-sm text-foreground-muted">
                        <li>Texto pequeno ou crítico</li>
                        <li>Muitos elementos em sequência</li>
                        <li>Dispositivos de baixa performance</li>
                        <li>Elementos com muito conteúdo</li>
                      </ul>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Cor Vermelha */}
                <GuidelineCard
                  title="Uso do Vermelho ORION"
                  description="O vermelho é reservado para situações específicas."
                >
                  <div className="space-y-4">
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Ações destrutivas</p>
                        <p className="text-xs text-foreground-muted">Deletar, cancelar assinatura, remover acesso</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Estados de erro</p>
                        <p className="text-xs text-foreground-muted">Validação de formulário, falhas de sistema</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Alertas críticos</p>
                        <p className="text-xs text-foreground-muted">Downtime, problemas de segurança</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <XCircle className="w-5 h-5 text-error-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Nunca usar para</p>
                        <p className="text-xs text-foreground-muted">CTAs primários, decoração, ênfase geral</p>
                      </div>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Motion */}
                <GuidelineCard
                  title="Disciplina de Motion"
                  description="Animações devem servir a um propósito."
                >
                  <div className="grid md:grid-cols-3 gap-6">
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Zap className="w-4 h-4 text-cyan-400" />
                        Feedback
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Indicar que uma ação foi reconhecida. Hover states, cliques, submits.
                      </p>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Settings className="w-4 h-4 text-cyan-400" />
                        Transição
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Suavizar mudanças de contexto. Página, modal, painel lateral.
                      </p>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Bell className="w-4 h-4 text-cyan-400" />
                        Estado
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Indicar status atual. Loading, processando, aguardando.
                      </p>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Accessibility */}
                <GuidelineCard
                  title="Acessibilidade"
                  description="Garantindo uma experiência inclusiva."
                >
                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Contraste mínimo 4.5:1</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Texto sobre fundos deve ter contraste suficiente para leitura.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Focus visible</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Todos os elementos interativos devem ter estado de foco visível.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Reduzir movimento</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Respeitar prefers-reduced-motion do usuário.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Touch targets</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Mínimo de 44x44px para elementos tocáveis em mobile.
                      </p>
                    </div>
                  </div>
                </GuidelineCard>
              </div>
            </section>
          </main>
        </div>
      </div>

      {/* Footer */}
      <footer className="border-t border-border-subtle mt-24">
        <div className="max-w-7xl mx-auto px-6 py-12">
          <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
            <div className="flex items-center gap-3">
              <div className="w-8 h-8 rounded-lg bg-gradient-cyan-blue flex items-center justify-center">
                <Palette className="w-4 h-4 text-white" />
              </div>
              <span className="font-semibold text-foreground">ORION Design System</span>
            </div>
            <p className="text-sm text-foreground-muted">
              Single Source of Truth para a plataforma ORION
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}

// Helper Components

function SectionHeader({ title, description }: { title: string; description: string }) {
  return (
    <div className="pb-6 border-b border-border-subtle">
      <h2 className="text-3xl font-bold text-foreground">{title}</h2>
      <p className="mt-2 text-foreground-muted">{description}</p>
    </div>
  );
}

function PrincipleCard({
  icon,
  title,
  description,
}: {
  icon: React.ReactNode;
  title: string;
  description: string;
}) {
  return (
    <div className="card-glass p-6 rounded-xl glow-hover border border-border-subtle">
      <div className="w-12 h-12 rounded-xl bg-gradient-cyan-blue flex items-center justify-center text-white mb-4">
        {icon}
      </div>
      <h3 className="text-lg font-semibold text-foreground mb-2">{title}</h3>
      <p className="text-sm text-foreground-muted">{description}</p>
    </div>
  );
}

function SemanticColorCard({
  name,
  icon,
  bgClass,
  borderClass,
  textClass,
}: {
  name: string;
  icon: React.ReactNode;
  bgClass: string;
  borderClass: string;
  textClass: string;
}) {
  return (
    <div className={`p-4 rounded-xl border ${bgClass} ${borderClass}`}>
      <div className={`flex items-center gap-3 ${textClass}`}>
        {icon}
        <span className="font-medium">{name}</span>
      </div>
    </div>
  );
}

function AnimationDemo({
  name,
  className = '',
  hasSpinner = false,
}: {
  name: string;
  className?: string;
  hasSpinner?: boolean;
}) {
  return (
    <div className="text-center">
      <div
        className={`
          w-20 h-20 mx-auto rounded-xl border border-border-active
          flex items-center justify-center
          ${className}
        `}
      >
        {hasSpinner ? (
          <div className="spinner" />
        ) : (
          <div className="w-8 h-8 rounded-lg bg-gradient-cyan-blue" />
        )}
      </div>
      <p className="mt-3 text-sm text-foreground-muted">{name}</p>
    </div>
  );
}

function GuidelineCard({
  title,
  description,
  children,
}: {
  title: string;
  description: string;
  children: React.ReactNode;
}) {
  return (
    <div className="card-glass p-6 rounded-xl">
      <h3 className="text-lg font-semibold text-foreground mb-2">{title}</h3>
      <p className="text-sm text-foreground-muted mb-6">{description}</p>
      {children}
    </div>
  );
}

```

---
#### `app/documentation/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { cn } from "@/lib/utils";
import {
  exportTabAsMarkdown,
  exportAllTabsAsMarkdown,
  exportTabAsPDF,
  DocumentationTab,
} from "@/lib/documentation-export";
import {
  Brain,
  Building2,
  Plug,
  Layers,
  Compass,
  Download,
  FileText,
  FileDown,
  ChevronRight,
  BookOpen,
  Mail,
  Clock,
  Rocket,
  TrendingUp,
  GitBranch,
} from "lucide-react";
import { ShareProvider, useShare } from "@/lib/share-context";
import ShareButtons from "@/components/documentation/ShareButtons";
import Image from "next/image";

// Configuração do projeto
const PROJECT_CONFIG = {
  name: "ORION",
  subtitle: "AI Video Production Workflow - White Label SaaS Platform",
  launchDate: new Date("2025-03-15T00:00:00"),
  lastUpdate: {
    date: "23/01/2026",
    time: "20:10",
    author: "Claude",
    authorType: "ai" as const,
  },
  progress: {
    completed: 82,
    items: [
      { name: "Interface Base", percent: 100, status: "done" },
      { name: "Documentação", percent: 100, status: "done" },
      { name: "AI Agents (Inngest)", percent: 100, status: "done" },
      { name: "Prisma Database", percent: 100, status: "done" },
      { name: "Sistema de Aprovação", percent: 100, status: "done" },
      { name: "Deploy & Testes", percent: 90, status: "progress" },
    ],
  },
};

// Tab Components
import GenesisTab from "@/components/documentation/GenesisTab";
import SystemVisionTab from "@/components/documentation/SystemVisionTab";
import IntegrationsTab from "@/components/documentation/IntegrationsTab";
import TechStackTab from "@/components/documentation/TechStackTab";
import CurrentStateTab from "@/components/documentation/CurrentStateTab";
import DecisionsTab from "@/components/documentation/DecisionsTab";

// Tab content for export
import {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
  decisionsContent,
} from "@/components/documentation/content";

const tabs = [
  {
    id: "genesis",
    label: "Gênese & Intenção",
    icon: Brain,
    description: "Origem e propósito fundamental do sistema",
    component: GenesisTab,
    gradient: "from-purple-500 to-indigo-600",
  },
  {
    id: "system-vision",
    label: "Visão Sistêmica",
    icon: Building2,
    description: "Funcionamento e arquitetura operacional",
    component: SystemVisionTab,
    gradient: "from-blue-500 to-cyan-600",
  },
  {
    id: "integrations",
    label: "Integrações & APIs",
    icon: Plug,
    description: "Conexões externas e fluxo de dados",
    component: IntegrationsTab,
    gradient: "from-green-500 to-emerald-600",
  },
  {
    id: "tech-stack",
    label: "Stack Tecnológica",
    icon: Layers,
    description: "Tecnologias e linguagens utilizadas",
    component: TechStackTab,
    gradient: "from-orange-500 to-amber-600",
  },
  {
    id: "current-state",
    label: "Estado Atual",
    icon: Compass,
    description: "Status do projeto e próximos passos",
    component: CurrentStateTab,
    gradient: "from-rose-500 to-pink-600",
  },
  {
    id: "decisions",
    label: "Decisoes Claude",
    icon: GitBranch,
    description: "Registro de decisoes arquiteturais e debates tecnicas",
    component: DecisionsTab,
    gradient: "from-violet-500 to-purple-600",
  },
];

// Componente de Countdown
function CountdownTimer({ targetDate }: { targetDate: Date }) {
  const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });

  useEffect(() => {
    const calculateTimeLeft = () => {
      const now = new Date();
      const difference = targetDate.getTime() - now.getTime();

      if (difference > 0) {
        setTimeLeft({
          days: Math.floor(difference / (1000 * 60 * 60 * 24)),
          hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
          minutes: Math.floor((difference / 1000 / 60) % 60),
          seconds: Math.floor((difference / 1000) % 60),
        });
      }
    };

    calculateTimeLeft();
    const timer = setInterval(calculateTimeLeft, 1000);
    return () => clearInterval(timer);
  }, [targetDate]);

  return (
    <div className="flex items-center gap-2 text-sm">
      <Rocket className="w-4 h-4 text-amber-400" />
      <span className="text-secondary">Lançamento em:</span>
      <div className="flex gap-1">
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.days}d</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.hours}h</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.minutes}m</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.seconds}s</span>
      </div>
    </div>
  );
}

// Componente de Barra de Progresso
function ProjectProgress() {
  return (
    <div className="bg-layer-1/80 border border-subtle rounded-xl p-4">
      <div className="flex items-center justify-between mb-3">
        <div className="flex items-center gap-2">
          <TrendingUp className="w-5 h-5 text-green-400" />
          <span className="font-semibold text-white">Progresso do Projeto</span>
        </div>
        <span className="text-2xl font-bold text-green-400">{PROJECT_CONFIG.progress.completed}%</span>
      </div>

      {/* Barra principal */}
      <div className="h-3 bg-layer-2 rounded-full overflow-hidden mb-4">
        <div
          className="h-full bg-gradient-to-r from-green-500 to-emerald-400 rounded-full transition-all duration-500"
          style={{ width: `${PROJECT_CONFIG.progress.completed}%` }}
        />
      </div>

      {/* Items detalhados */}
      <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
        {PROJECT_CONFIG.progress.items.map((item) => (
          <div key={item.name} className="bg-layer-2/50 rounded-lg p-2">
            <div className="flex items-center justify-between mb-1">
              <span className="text-xs text-muted truncate">{item.name}</span>
              <span className={cn(
                "text-xs font-medium",
                item.status === "done" ? "text-green-400" : "text-amber-400"
              )}>{item.percent}%</span>
            </div>
            <div className="h-1.5 bg-zinc-700 rounded-full overflow-hidden">
              <div
                className={cn(
                  "h-full rounded-full transition-all",
                  item.status === "done" ? "bg-green-500" : "bg-amber-500"
                )}
                style={{ width: `${item.percent}%` }}
              />
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// Componente Avatar do Kleiton
function KleitonAvatar({ size = 48 }: { size?: number }) {
  const [imageError, setImageError] = useState(false);

  if (imageError) {
    return (
      <div
        className="bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold"
        style={{ width: size, height: size, fontSize: size * 0.4 }}
      >
        KJ
      </div>
    );
  }

  return (
    <Image
      src="/images/kleiton-profile.jpg"
      alt="Kleiton Jatobá"
      width={size}
      height={size}
      className="rounded-full object-cover"
      onError={() => setImageError(true)}
    />
  );
}

// Componente de Última Atualização
function LastUpdateInfo() {
  return (
    <div className="flex flex-wrap items-center gap-3 text-sm bg-layer-2/50 px-3 py-2 rounded-lg">
      <Clock className="w-4 h-4 text-blue-400" />
      <div className="flex flex-wrap items-center gap-2">
        <span className="text-muted">Última atualização:</span>
        <span className="text-white font-medium">{PROJECT_CONFIG.lastUpdate.date}</span>
        <span className="text-muted">às</span>
        <span className="text-white font-medium">{PROJECT_CONFIG.lastUpdate.time}</span>
        <span className="text-muted">por</span>
        <div className="flex items-center gap-1">
          {PROJECT_CONFIG.lastUpdate.authorType === "ai" ? (
            <span className="bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded text-xs font-medium">
              🤖 {PROJECT_CONFIG.lastUpdate.author}
            </span>
          ) : (
            <span className="bg-blue-500/20 text-blue-300 px-2 py-0.5 rounded text-xs font-medium flex items-center gap-1">
              <KleitonAvatar size={16} />
              {PROJECT_CONFIG.lastUpdate.author}
            </span>
          )}
        </div>
      </div>
    </div>
  );
}

function DocumentationContent() {
  const [activeTab, setActiveTab] = useState("genesis");
  const { isSharedView, canCopy } = useShare();

  const activeTabData = tabs.find((t) => t.id === activeTab);
  const ActiveComponent = activeTabData?.component;

  // Prepare documentation tabs for export
  const documentationTabs: DocumentationTab[] = [
    { id: "genesis", title: "Gênese & Intenção do Sistema", icon: "🧠", content: genesisContent },
    { id: "system-vision", title: "Visão Sistêmica & Funcionamento", icon: "🏗️", content: systemVisionContent },
    { id: "integrations", title: "Arquitetura de Integrações & APIs", icon: "🔌", content: integrationsContent },
    { id: "tech-stack", title: "Stack Tecnológica & Linguagens", icon: "🧱", content: techStackContent },
    { id: "current-state", title: "Estado Atual & Próximos Passos", icon: "🧭", content: currentStateContent },
    { id: "decisions", title: "Decisoes Arquiteturais - Claude Code", icon: "🔀", content: decisionsContent },
  ];

  const handleExportMarkdown = () => {
    const tab = documentationTabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsMarkdown(tab);
  };

  const handleExportAllMarkdown = () => {
    exportAllTabsAsMarkdown(documentationTabs);
  };

  const handleExportPDF = () => {
    const tab = tabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsPDF(activeTab, tab.label);
  };

  return (
    <div className="min-h-full">
      {/* Header Principal com Nome do Sistema */}
      <div className="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 px-4 sm:px-8 py-6 sm:py-10">
        <div className="max-w-7xl mx-auto">
          {/* Título do Sistema */}
          <div className="text-center mb-6">
            <h1 className="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-2">
              📺 {PROJECT_CONFIG.name}
            </h1>
            <p className="text-white/90 text-base sm:text-lg">
              {PROJECT_CONFIG.subtitle}
            </p>
            <p className="text-white/70 text-sm mt-1">
              Documentação Técnica Completa
            </p>
          </div>

          {/* Countdown de Lançamento */}
          <div className="flex justify-center mb-6">
            <div className="bg-black/20 backdrop-blur-sm px-4 py-2 rounded-xl">
              <CountdownTimer targetDate={PROJECT_CONFIG.launchDate} />
            </div>
          </div>

          <div className="flex flex-col sm:flex-row sm:items-center gap-4 mb-4">
            <div className="flex items-center gap-3">
              <div className="p-2 sm:p-3 bg-white/10 backdrop-blur-sm rounded-xl">
                <BookOpen className="w-6 h-6 sm:w-8 sm:h-8 text-white" />
              </div>
              <div>
                <h2 className="text-xl sm:text-2xl font-bold text-white">
                  Documentação Viva
                </h2>
                <p className="text-white/80 text-sm sm:text-base">
                  Memória cognitiva e base de auditoria técnica
                </p>
              </div>
            </div>

            {/* Share Button - Only visible for owners */}
            {!isSharedView && (
              <div className="sm:ml-auto">
                <ShareButtons />
              </div>
            )}
          </div>

          {/* Founder Info com Foto */}
          <div className="flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-6 mb-6 p-3 sm:p-4 bg-white/10 backdrop-blur-sm rounded-xl">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full overflow-hidden border-2 border-white/30">
                <KleitonAvatar size={48} />
              </div>
              <div>
                <p className="text-white font-semibold text-sm sm:text-base">Kleiton Jatobá</p>
                <p className="text-white/70 text-xs sm:text-sm">Founder & Creator</p>
              </div>
            </div>
            <div className="flex items-center gap-2 text-white/80 text-xs sm:text-sm">
              <Mail className="w-4 h-4" />
              <a href="mailto:akzdigitalbr@gmail.com" className="hover:text-white transition-colors">
                akzdigitalbr@gmail.com
              </a>
            </div>
          </div>

          {/* Export Buttons - Only visible for owners */}
          {canCopy && (
            <div className="flex flex-wrap gap-2 sm:gap-3">
              <button
                onClick={handleExportMarkdown}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <FileText className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Aba (Markdown)</span>
                <span className="sm:hidden">Aba MD</span>
              </button>
              <button
                onClick={handleExportAllMarkdown}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <FileDown className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Tudo (Markdown)</span>
                <span className="sm:hidden">Tudo MD</span>
              </button>
              <button
                onClick={handleExportPDF}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <Download className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Aba (PDF)</span>
                <span className="sm:hidden">PDF</span>
              </button>
            </div>
          )}

          {/* Shared View Notice */}
          {isSharedView && (
            <div className="p-3 bg-amber-500/20 border border-amber-500/30 rounded-xl">
              <p className="text-amber-200 text-sm">
                Você está visualizando uma versão compartilhada desta documentação.
              </p>
            </div>
          )}
        </div>
      </div>

      {/* Seção de Progresso e Última Atualização */}
      <div className="bg-zinc-950 border-b border-subtle px-4 sm:px-8 py-4">
        <div className="max-w-7xl mx-auto space-y-4">
          {/* Última Atualização */}
          <LastUpdateInfo />

          {/* Barra de Progresso do Projeto */}
          <ProjectProgress />
        </div>
      </div>

        {/* Tab Navigation */}
        <div className="bg-layer-1/50 border-b border-subtle sticky top-0 z-10 backdrop-blur-md">
          <div className="max-w-7xl mx-auto px-4 sm:px-8">
            <div className="flex overflow-x-auto gap-1 py-2 hide-scrollbar">
              {tabs.map((tab) => {
                const Icon = tab.icon;
                const isActive = activeTab === tab.id;

                return (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={cn(
                      "flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-medium whitespace-nowrap transition-all",
                      isActive
                        ? `bg-gradient-to-r ${tab.gradient} text-white shadow-lg`
                        : "text-muted hover:text-white hover:bg-layer-2"
                    )}
                  >
                    <Icon className="w-4 h-4" />
                    <span className="hidden sm:inline">{tab.label}</span>
                    <span className="sm:hidden">{tab.label.split(' ')[0]}</span>
                  </button>
                );
              })}
            </div>
          </div>
        </div>

        {/* Tab Description */}
        {activeTabData && (
          <div className="bg-layer-1/30 border-b border-subtle">
            <div className="max-w-7xl mx-auto px-4 sm:px-8 py-3 sm:py-4">
              <div className="flex items-center gap-2 text-muted text-sm">
                <ChevronRight className="w-4 h-4 flex-shrink-0" />
                <span>{activeTabData.description}</span>
              </div>
            </div>
          </div>
        )}

        {/* Tab Content */}
        <div className="max-w-7xl mx-auto px-4 sm:px-8 py-6 sm:py-8">
          <div id={`tab-content-${activeTab}`}>
            {ActiveComponent && <ActiveComponent />}
          </div>
        </div>

      <style jsx global>{`
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        /* Protection for shared views */
        .shared-view {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }
        .shared-view * {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }
      `}</style>
    </div>
  );
}

export default function DocumentationPage() {
  return (
    <ShareProvider>
      <DocumentationContent />
    </ShareProvider>
  );
}

```

---
#### `app/globals.css`

```
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   ORION Design System - CSS Variables
   ============================================

   Paleta baseada no logo oficial ORION:
   - Azul profundo como cor dominante
   - Vermelho ORION para CTAs críticos
   - Cyan/Indigo para estados ativos

   Dark-first: Sem modo claro.
   ============================================ */

:root {
  /* ========================================
     BACKGROUNDS - Camadas de profundidade
     ======================================== */
  --bg-layer-0: #050A12;   /* Base mais profunda */
  --bg-layer-1: #0A1628;   /* Cards, sidebar */
  --bg-layer-2: #0F2341;   /* Elementos elevados */
  --bg-layer-3: #1A3A5C;   /* Hover states */
  --bg-layer-4: #245177;   /* Elementos em destaque */

  /* Aliases semânticos */
  --background: var(--bg-layer-0);
  --background-secondary: var(--bg-layer-1);
  --background-tertiary: var(--bg-layer-2);
  --background-elevated: var(--bg-layer-3);

  /* ========================================
     SURFACES - Cards e Painéis
     ======================================== */
  --surface-default: rgba(10, 22, 40, 0.8);
  --surface-elevated: rgba(15, 35, 65, 0.9);
  --surface-glass: rgba(26, 58, 92, 0.4);
  --surface-glass-subtle: rgba(10, 22, 40, 0.6);
  --surface-overlay: rgba(5, 10, 18, 0.85);

  /* ========================================
     BORDERS
     ======================================== */
  --border-subtle: rgba(30, 58, 95, 0.3);
  --border-default: rgba(30, 58, 95, 0.5);
  --border-strong: rgba(59, 130, 246, 0.4);
  --border-active: rgba(6, 182, 212, 0.5);
  --border-glow: rgba(59, 130, 246, 0.6);

  /* ========================================
     TEXT
     ======================================== */
  --foreground: #F0F4F8;
  --foreground-secondary: #94A3B8;
  --foreground-muted: #64748B;
  --foreground-disabled: #475569;
  --foreground-inverse: #0A1628;

  /* ========================================
     BRAND COLORS - ORION
     ======================================== */
  /* Azul ORION - cor principal */
  --orion-blue-50: #E8F4FC;
  --orion-blue-100: #C5E4F8;
  --orion-blue-200: #8EC8F2;
  --orion-blue-300: #57ACEB;
  --orion-blue-400: #3B82F6;
  --orion-blue-500: #2563EB;
  --orion-blue-600: #1D4ED8;
  --orion-blue-700: #1E3A5F;
  --orion-blue-800: #0F2341;
  --orion-blue-900: #0A1628;
  --orion-blue-950: #050A12;

  /* Vermelho ORION - acento crítico */
  --orion-red-400: #F87171;
  --orion-red-500: #EF4444;
  --orion-red-600: #DC2626;

  /* ========================================
     ACCENT COLORS
     ======================================== */
  /* Cyan - estados ativos, links, foco */
  --accent-cyan-400: #22D3EE;
  --accent-cyan-500: #06B6D4;
  --accent-cyan-600: #0891B2;

  /* Indigo - estados secundários */
  --accent-indigo-400: #818CF8;
  --accent-indigo-500: #6366F1;
  --accent-indigo-600: #4F46E5;

  /* Violet - elementos decorativos */
  --accent-violet-400: #A78BFA;
  --accent-violet-500: #8B5CF6;
  --accent-violet-600: #7C3AED;

  /* ========================================
     SEMANTIC COLORS
     ======================================== */
  --success: #10B981;
  --success-bg: rgba(16, 185, 129, 0.1);
  --success-border: rgba(16, 185, 129, 0.3);
  --success-text: #34D399;

  --warning: #F59E0B;
  --warning-bg: rgba(245, 158, 11, 0.1);
  --warning-border: rgba(245, 158, 11, 0.3);
  --warning-text: #FBBF24;

  --error: #EF4444;
  --error-bg: rgba(239, 68, 68, 0.1);
  --error-border: rgba(239, 68, 68, 0.3);
  --error-text: #F87171;

  --info: #3B82F6;
  --info-bg: rgba(59, 130, 246, 0.1);
  --info-border: rgba(59, 130, 246, 0.3);
  --info-text: #60A5FA;

  /* ========================================
     EFFECTS - Glow e Highlight
     ======================================== */
  --glow-blue: rgba(59, 130, 246, 0.4);
  --glow-cyan: rgba(6, 182, 212, 0.4);
  --glow-violet: rgba(139, 92, 246, 0.4);
  --glow-red: rgba(239, 68, 68, 0.3);
  --highlight: rgba(6, 182, 212, 0.1);

  /* ========================================
     GRADIENTS
     ======================================== */
  --gradient-orion-primary: linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%);
  --gradient-orion-dark: linear-gradient(180deg, #050A12 0%, #0A1628 100%);
  --gradient-orion-deep: linear-gradient(135deg, #050A12 0%, #0F2341 100%);
  --gradient-cyan-blue: linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%);
  --gradient-blue-indigo: linear-gradient(135deg, #3B82F6 0%, #6366F1 100%);
  --gradient-violet-blue: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%);
  --gradient-cyan-glow: linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%);
  --gradient-blue-glow: linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%);
  --gradient-border: linear-gradient(90deg, #3B82F6, #06B6D4, #8B5CF6, #3B82F6);
  --gradient-card: linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%);
  --gradient-card-hover: linear-gradient(180deg, rgba(26, 58, 92, 0.4) 0%, rgba(15, 35, 65, 0.6) 100%);
  --gradient-mesh: radial-gradient(at 40% 20%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 80% 80%, rgba(6, 182, 212, 0.1) 0px, transparent 50%);

  /* ========================================
     SHADOWS
     ======================================== */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  --shadow-glow-blue: 0 0 20px 0 rgba(59, 130, 246, 0.3);
  --shadow-glow-cyan: 0 0 20px 0 rgba(6, 182, 212, 0.3);
  --shadow-glow-violet: 0 0 20px 0 rgba(139, 92, 246, 0.3);
  --shadow-card: 0 4px 20px 0 rgba(0, 0, 0, 0.3);
  --shadow-card-hover: 0 8px 30px 0 rgba(0, 0, 0, 0.4), 0 0 20px 0 rgba(59, 130, 246, 0.1);
  --shadow-card-elevated: 0 12px 40px 0 rgba(0, 0, 0, 0.5);

  /* ========================================
     MOTION
     ======================================== */
  --duration-instant: 0ms;
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;

  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);

  --transition-fast: 150ms var(--ease-in-out);
  --transition-normal: 200ms var(--ease-in-out);
  --transition-slow: 300ms var(--ease-in-out);
  --transition-spring: 300ms var(--ease-spring);

  /* ========================================
     RADIUS
     ======================================== */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  --radius-3xl: 1.5rem;
  --radius-full: 9999px;

  /* ========================================
     Z-INDEX
     ======================================== */
  --z-base: 0;
  --z-raised: 10;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-overlay: 300;
  --z-modal: 400;
  --z-popover: 500;
  --z-toast: 600;
  --z-tooltip: 700;
}

/* ============================================
   BASE STYLES
   ============================================ */

body {
  color: var(--foreground);
  background: var(--background);
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: -0.01em;
}

/* Mesh background sutil para a página */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--gradient-mesh);
  pointer-events: none;
  z-index: -1;
}

/* Typography refinements */
h1, h2, h3, h4, h5, h6 {
  letter-spacing: -0.025em;
  font-weight: 600;
  color: var(--foreground);
}

/* Monospace for data/numbers */
.font-mono {
  font-family: "JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  font-feature-settings: "liga" 0;
}

/* ============================================
   SCROLLBAR
   ============================================ */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--bg-layer-3);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--bg-layer-4);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--bg-layer-3) transparent;
}

/* ============================================
   FOCUS STATES
   ============================================ */

.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  --tw-ring-color: var(--accent-cyan-500);
  --tw-ring-offset-color: var(--bg-layer-0);
}

/* Focus visible para acessibilidade */
:focus-visible {
  outline: 2px solid var(--accent-cyan-500);
  outline-offset: 2px;
}

/* ============================================
   BUTTONS - Sistema Completo
   ============================================ */

.btn {
  @apply inline-flex items-center justify-center gap-2 font-medium
         transition-all
         active:scale-[0.98]
         disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100;
  border-radius: var(--radius-lg);
  transition: var(--transition-fast);
}

/* Primary - Azul ORION com cyan glow */
.btn-primary {
  @apply btn text-white px-4 py-2.5;
  background: var(--gradient-cyan-blue);
  box-shadow: var(--shadow-glow-cyan);
}

.btn-primary:hover {
  filter: brightness(1.1);
  box-shadow: 0 0 30px 0 rgba(6, 182, 212, 0.4);
}

/* Secondary - Superfície elevada */
.btn-secondary {
  @apply btn text-white px-4 py-2.5;
  background: var(--surface-elevated);
  border: 1px solid var(--border-default);
}

.btn-secondary:hover {
  background: var(--bg-layer-3);
  border-color: var(--border-strong);
}

/* Outline - Borda com transparência */
.btn-outline {
  @apply btn px-4 py-2.5;
  background: transparent;
  border: 1px solid var(--border-default);
  color: var(--foreground-secondary);
}

.btn-outline:hover {
  border-color: var(--accent-cyan-500);
  color: var(--foreground);
  background: rgba(6, 182, 212, 0.1);
}

/* Ghost - Apenas texto */
.btn-ghost {
  @apply btn px-4 py-2.5;
  background: transparent;
  color: var(--foreground-muted);
}

.btn-ghost:hover {
  background: var(--surface-glass);
  color: var(--foreground);
}

/* Danger - Vermelho ORION (CTAs críticos) */
.btn-danger {
  @apply btn text-white px-4 py-2.5;
  background: var(--orion-red-600);
}

.btn-danger:hover {
  background: var(--orion-red-500);
  box-shadow: var(--glow-red);
}

/* Success */
.btn-success {
  @apply btn text-white px-4 py-2.5;
  background: var(--success);
  box-shadow: 0 0 15px 0 rgba(16, 185, 129, 0.3);
}

.btn-success:hover {
  filter: brightness(1.1);
}

/* Warning */
.btn-warning {
  @apply btn text-white px-4 py-2.5;
  background: var(--warning);
}

.btn-warning:hover {
  filter: brightness(1.1);
}

/* Button sizes */
.btn-sm {
  @apply text-sm px-3 py-1.5;
}

.btn-lg {
  @apply text-base px-6 py-3;
}

/* ============================================
   FORM ELEMENTS
   ============================================ */

.input {
  @apply w-full px-4 py-2.5 text-white placeholder-zinc-500;
  background: var(--bg-layer-1);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  transition: var(--transition-fast);
}

.input:hover {
  border-color: var(--border-strong);
}

.input:focus {
  outline: none;
  border-color: var(--accent-cyan-500);
  box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
}

.textarea {
  @apply input resize-none min-h-[100px];
}

.label {
  @apply block text-sm font-medium mb-2 tracking-wide;
  color: var(--foreground-secondary);
}

.select {
  @apply input appearance-none cursor-pointer
         bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%2394A3B8%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E')]
         bg-no-repeat bg-[right_0.75rem_center] bg-[length:1rem] pr-10;
}

/* ============================================
   CARDS - Sistema de Profundidade
   ============================================ */

.card {
  background: var(--surface-default);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  backdrop-filter: blur(12px);
}

.card-elevated {
  @apply card;
  background: var(--surface-elevated);
  box-shadow: var(--shadow-card);
}

/* Card com hover effect */
.card-hover {
  @apply card;
  transition: var(--transition-slow);
}

.card-hover:hover {
  border-color: var(--border-strong);
  box-shadow: var(--shadow-card-hover);
  transform: translateY(-2px);
}

/* Card glassmorphism */
.card-glass {
  background: var(--surface-glass);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  backdrop-filter: blur(20px);
}

.card-glass:hover {
  border-color: var(--border-active);
}

/* Card 3D */
.card-3d {
  @apply card;
  perspective: 1000px;
  transform-style: preserve-3d;
  transition: var(--transition-slow);
}

.card-3d:hover {
  transform: rotateX(2deg) rotateY(2deg) translateY(-5px);
}

/* ============================================
   BADGES - Indicadores de Status
   ============================================ */

.badge {
  @apply inline-flex items-center px-2.5 py-1 text-xs font-medium;
  border-radius: var(--radius-full);
  border: 1px solid transparent;
  transition: var(--transition-fast);
}

.badge-success {
  @apply badge;
  background: var(--success-bg);
  color: var(--success-text);
  border-color: var(--success-border);
}

.badge-warning {
  @apply badge;
  background: var(--warning-bg);
  color: var(--warning-text);
  border-color: var(--warning-border);
}

.badge-error {
  @apply badge;
  background: var(--error-bg);
  color: var(--error-text);
  border-color: var(--error-border);
}

.badge-info {
  @apply badge;
  background: var(--info-bg);
  color: var(--info-text);
  border-color: var(--info-border);
}

.badge-default {
  @apply badge;
  background: var(--surface-glass);
  color: var(--foreground-secondary);
  border-color: var(--border-subtle);
}

/* Badge com glow */
.badge-glow {
  box-shadow: 0 0 10px 0 currentColor;
}

/* ============================================
   STEP INDICATOR - Workflow Progress
   ============================================ */

.step-indicator {
  @apply flex items-center justify-center w-10 h-10 text-sm font-semibold;
  border-radius: var(--radius-full);
  transition: var(--transition-slow);
}

.step-active {
  @apply step-indicator text-white;
  background: var(--gradient-cyan-blue);
  box-shadow: var(--shadow-glow-cyan), 0 0 0 4px rgba(6, 182, 212, 0.15);
}

.step-completed {
  @apply step-indicator text-white;
  background: var(--success);
}

.step-pending {
  @apply step-indicator;
  background: var(--bg-layer-2);
  color: var(--foreground-muted);
  border: 1px solid var(--border-default);
}

.step-locked {
  @apply step-indicator;
  background: var(--bg-layer-1);
  color: var(--foreground-disabled);
  border: 1px solid var(--border-subtle);
}

.step-error {
  @apply step-indicator text-white;
  background: var(--error);
  box-shadow: 0 0 15px 0 rgba(239, 68, 68, 0.3);
}

/* ============================================
   GLASS EFFECTS
   ============================================ */

.glass {
  background: var(--surface-glass);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border-subtle);
}

.glass-subtle {
  background: var(--surface-glass-subtle);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border-subtle);
}

.glass-strong {
  background: var(--surface-elevated);
  backdrop-filter: blur(30px);
  border: 1px solid var(--border-default);
}

/* ============================================
   GRADIENTS - Utilitários
   ============================================ */

.gradient-orion {
  background: var(--gradient-orion-primary);
}

.gradient-orion-dark {
  background: var(--gradient-orion-dark);
}

.gradient-cyan-blue {
  background: var(--gradient-cyan-blue);
}

.gradient-blue-indigo {
  background: var(--gradient-blue-indigo);
}

.gradient-violet-blue {
  background: var(--gradient-violet-blue);
}

/* Text gradient */
.text-gradient {
  @apply bg-clip-text text-transparent;
  background: var(--gradient-cyan-blue);
}

.text-gradient-violet {
  @apply bg-clip-text text-transparent;
  background: var(--gradient-violet-blue);
}

/* ============================================
   STATUS INDICATORS
   ============================================ */

.status-dot {
  @apply w-2 h-2 rounded-full;
}

.status-online {
  background: var(--success);
}

.status-offline {
  background: var(--foreground-disabled);
}

.status-warning {
  background: var(--warning);
}

.status-error {
  background: var(--error);
}

.status-loading {
  background: var(--accent-cyan-500);
}

/* Status dot com pulse */
.status-dot-pulse {
  @apply status-dot relative;
}

.status-dot-pulse::after {
  content: '';
  @apply absolute inset-0 rounded-full;
  background: inherit;
  animation: statusPulse 2s ease-in-out infinite;
}

@keyframes statusPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.5);
  }
}

/* ============================================
   LOADING STATES
   ============================================ */

/* Spinner */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.spinner {
  @apply inline-block w-5 h-5 border-2 rounded-full;
  border-color: var(--accent-cyan-500);
  border-top-color: transparent;
  animation: spin 0.6s linear infinite;
}

.spinner-sm {
  @apply w-4 h-4;
}

.spinner-lg {
  @apply w-8 h-8;
  border-width: 3px;
}

/* Skeleton loader */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  border-radius: var(--radius-md);
  background: linear-gradient(
    90deg,
    var(--bg-layer-2) 0%,
    var(--bg-layer-3) 50%,
    var(--bg-layer-2) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* ============================================
   GLOW EFFECTS
   ============================================ */

.glow-hover {
  transition: var(--transition-slow);
}

.glow-hover:hover {
  box-shadow: var(--shadow-glow-blue);
  border-color: var(--border-glow);
}

.glow-cyan-hover:hover {
  box-shadow: var(--shadow-glow-cyan);
  border-color: var(--border-active);
}

/* Pulse glow para elementos ativos */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 0 0 var(--glow-cyan);
  }
  50% {
    box-shadow: 0 0 20px 4px var(--glow-cyan);
  }
}

.animate-pulse-glow {
  animation: pulseGlow 2s ease-in-out infinite;
}

/* ============================================
   ANIMATIONS - Micro-interações
   ============================================ */

/* Fade in up */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s ease-out forwards;
}

/* Slide in right */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out forwards;
}

/* Scale in */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out forwards;
}

/* Stagger children */
.stagger-children > * {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s var(--ease-in-out);
}

.stagger-children.animate-in > *:nth-child(1) { transition-delay: 0.1s; }
.stagger-children.animate-in > *:nth-child(2) { transition-delay: 0.15s; }
.stagger-children.animate-in > *:nth-child(3) { transition-delay: 0.2s; }
.stagger-children.animate-in > *:nth-child(4) { transition-delay: 0.25s; }
.stagger-children.animate-in > *:nth-child(5) { transition-delay: 0.3s; }
.stagger-children.animate-in > *:nth-child(6) { transition-delay: 0.35s; }

.stagger-children.animate-in > * {
  opacity: 1;
  transform: translateY(0);
}

/* Dropdown animation */
.dropdown-enter {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
}

.dropdown-enter-active {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: opacity 150ms ease-out, transform 150ms ease-out;
}

.dropdown-exit {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.dropdown-exit-active {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
  transition: opacity 100ms ease-in, transform 100ms ease-in;
}

/* Scroll animations */
.scroll-animate {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.6s var(--ease-in-out);
}

.scroll-animate.animate-in {
  opacity: 1;
  transform: translateY(0);
}

.scale-on-scroll {
  opacity: 0;
  transform: scale(0.95);
  transition: all 0.5s var(--ease-in-out);
}

.scale-on-scroll.animate-in {
  opacity: 1;
  transform: scale(1);
}

.slide-left {
  opacity: 0;
  transform: translateX(-40px);
  transition: all 0.6s var(--ease-in-out);
}

.slide-right {
  opacity: 0;
  transform: translateX(40px);
  transition: all 0.6s var(--ease-in-out);
}

.slide-left.animate-in,
.slide-right.animate-in {
  opacity: 1;
  transform: translateX(0);
}

/* Float animation */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Gradient border animation */
@keyframes gradientBorder {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.gradient-border {
  position: relative;
  background: var(--gradient-border);
  background-size: 300% 300%;
  animation: gradientBorder 4s ease infinite;
}

/* Data flow animation */
@keyframes dataFlow {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.data-flow {
  background: linear-gradient(90deg, transparent, var(--glow-cyan), transparent);
  background-size: 200% 100%;
  animation: dataFlow 2s linear infinite;
}

/* Typewriter effect */
@keyframes typewriter {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

.typewriter {
  overflow: hidden;
  white-space: nowrap;
  animation: typewriter 2s steps(40) forwards;
}

/* Progress bar */
@keyframes progressFill {
  from {
    width: 0;
  }
}

.progress-animate {
  animation: progressFill 1s ease-out forwards;
}

/* Pulsing node */
@keyframes pulseNode {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 var(--glow-blue);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 20px 5px var(--glow-blue);
  }
}

.pulse-node {
  animation: pulseNode 2s ease-in-out infinite;
}

/* Line pulse */
@keyframes linePulse {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 1;
  }
}

.line-pulse {
  animation: linePulse 1.5s ease-in-out infinite;
}

/* Flow line */
@keyframes flowLine {
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.flow-line {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: flowLine 2s ease forwards;
}

/* Shimmer overlay */
.shimmer {
  position: relative;
  overflow: hidden;
}

.shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.08),
    transparent
  );
  animation: shimmerMove 2s infinite;
}

@keyframes shimmerMove {
  100% {
    left: 100%;
  }
}

/* ============================================
   PAGE TRANSITIONS
   ============================================ */

.page-transition-enter {
  opacity: 0;
  transform: translateY(10px);
}

.page-transition-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: all 0.3s ease;
}

.page-transition-exit {
  opacity: 1;
}

.page-transition-exit-active {
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* ============================================
   MOBILE RESPONSIVE
   ============================================ */

/* Safe area padding */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Touch-friendly targets */
@media (hover: none) and (pointer: coarse) {
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Better mobile scrolling */
.mobile-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* No select */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* ============================================
   UTILITIES
   ============================================ */

/* Text colors */
.text-primary {
  color: var(--foreground);
}

.text-secondary {
  color: var(--foreground-secondary);
}

.text-muted {
  color: var(--foreground-muted);
}

.text-disabled {
  color: var(--foreground-disabled);
}

/* Background colors */
.bg-layer-0 {
  background: var(--bg-layer-0);
}

.bg-layer-1 {
  background: var(--bg-layer-1);
}

.bg-layer-2 {
  background: var(--bg-layer-2);
}

.bg-layer-3 {
  background: var(--bg-layer-3);
}

.bg-layer-4 {
  background: var(--bg-layer-4);
}

/* Border colors */
.border-subtle {
  border-color: var(--border-subtle);
}

.border-default {
  border-color: var(--border-default);
}

.border-strong {
  border-color: var(--border-strong);
}

.border-active {
  border-color: var(--border-active);
}

/* Parallax helper */
.parallax-slow {
  will-change: transform;
  transform: translateZ(0);
}

```

---
#### `app/layout.tsx`

```
import type { Metadata } from "next";
import "./globals.css";
import Layout from "@/components/Layout";
import { VercelToolbar } from "@/components/VercelToolbar";
import { getBrandingConfig } from "@/lib/branding";
import { Analytics } from "@vercel/analytics/react";
import { SpeedInsights } from "@vercel/speed-insights/next";

export async function generateMetadata(): Promise<Metadata> {
  const branding = await getBrandingConfig();

  return {
    title: branding.systemName,
    description: "AI Video Production Workflow - White Label SaaS Platform",
  };
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="pt-BR" className="dark">
      <body className="font-sans bg-[#09090b] text-white">
        {/* O Layout aqui garante que o Menu Lateral apareça sempre */}
        <Layout>
          {children}
        </Layout>
        {/* Vercel Toolbar - habilitado em TODOS os ambientes (dev, preview, production) */}
        {/* Permite menções @Claude e comentários visuais em produção */}
        <VercelToolbar />
        {/* Vercel Analytics & Speed Insights - Monitoramento profissional */}
        <Analytics />
        <SpeedInsights />
      </body>
    </html>
  );
}

```

---
#### `app/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { motion, AnimatePresence } from 'framer-motion';
import {
  Activity,
  ArrowRight,
  CheckCircle2,
  Clock,
  Film,
  Loader2,
  Play,
  Rocket,
  Settings,
  Sparkles,
  TrendingUp,
  Video,
  Wifi,
  WifiOff,
  Zap,
  Eye,
  BarChart3,
  Code2,
  Server,
  Brain,
} from 'lucide-react';
import {
  AreaChart,
  Area,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
  RadialBarChart,
  RadialBar,
  PolarAngleAxis,
} from 'recharts';
import { useUIStore, useBrandingStore } from '@/lib/store';

interface APIStatus {
  name: string;
  key: string;
  status: 'checking' | 'online' | 'offline' | 'error';
  icon: string;
  category: 'ai' | 'media' | 'output' | 'infra';
}

interface SystemHealth {
  overall: 'healthy' | 'degraded' | 'critical';
  onlineAPIs: number;
  totalAPIs: number;
  lastCheck: Date;
}

const API_LIST: Omit<APIStatus, 'status'>[] = [
  { name: 'Gemini', key: 'gemini', icon: '🧠', category: 'ai' },
  { name: 'OpenAI', key: 'openai', icon: '🤖', category: 'ai' },
  { name: 'Anthropic', key: 'anthropic', icon: '🔮', category: 'ai' },
  { name: 'YouTube', key: 'youtube', icon: '📺', category: 'output' },
  { name: 'Pexels', key: 'pexels', icon: '📷', category: 'media' },
  { name: 'Pixabay', key: 'pixabay', icon: '🖼️', category: 'media' },
  { name: 'ElevenLabs', key: 'elevenlabs', icon: '🎤', category: 'media' },
  { name: 'Tavily', key: 'tavily', icon: '🔍', category: 'ai' },
  { name: 'JSON2Video', key: 'json2video', icon: '🎬', category: 'output' },
  { name: 'GitHub', key: 'github', icon: '🐙', category: 'infra' },
  { name: 'Vercel', key: 'vercel', icon: '▲', category: 'infra' },
];

// Mock chart data for API availability trends (last 7 checks)
const generateChartData = (currentPercentage: number) => {
  const data = [];
  const now = new Date();

  for (let i = 6; i >= 0; i--) {
    const time = new Date(now.getTime() - i * 10 * 60 * 1000); // 10 min intervals
    const variance = Math.random() * 20 - 10; // ±10%
    const availability = Math.max(60, Math.min(100, currentPercentage + variance));

    data.push({
      time: time.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),
      availability: Math.round(availability),
    });
  }

  return data;
};

export default function DashboardPage() {
  const router = useRouter();
  const { openApiKeyModal } = useUIStore();
  const { systemName } = useBrandingStore();

  const [isLoading, setIsLoading] = useState(true);
  const [apiStatuses, setApiStatuses] = useState<APIStatus[]>([]);
  const [systemHealth, setSystemHealth] = useState<SystemHealth>({
    overall: 'healthy',
    onlineAPIs: 0,
    totalAPIs: API_LIST.length,
    lastCheck: new Date(),
  });
  const [chartData, setChartData] = useState<Array<{ time: string; availability: number }>>([]);

  useEffect(() => {
    checkSystemStatus();
  }, []);

  const checkSystemStatus = async () => {
    setIsLoading(true);

    const statuses: APIStatus[] = API_LIST.map(api => ({
      ...api,
      status: 'checking' as const,
    }));
    setApiStatuses(statuses);

    try {
      const response = await fetch('/api/status');
      const data = await response.json();

      const updatedStatuses: APIStatus[] = API_LIST.map((api) => ({
        ...api,
        status: data[api.key] === true ? 'online' : 'offline',
      }));

      setApiStatuses(updatedStatuses);

      const onlineCount = updatedStatuses.filter(s => s.status === 'online').length;
      const healthStatus: 'healthy' | 'degraded' | 'critical' =
        onlineCount === API_LIST.length ? 'healthy' :
        onlineCount >= API_LIST.length * 0.5 ? 'degraded' : 'critical';

      setSystemHealth({
        overall: healthStatus,
        onlineAPIs: onlineCount,
        totalAPIs: API_LIST.length,
        lastCheck: new Date(),
      });

      // Generate chart data based on current availability
      const currentAvailability = Math.round((onlineCount / API_LIST.length) * 100);
      setChartData(generateChartData(currentAvailability));
    } catch {
      const errorStatuses: APIStatus[] = API_LIST.map(api => ({
        ...api,
        status: 'error' as const,
      }));
      setApiStatuses(errorStatuses);
      setSystemHealth({
        overall: 'critical',
        onlineAPIs: 0,
        totalAPIs: API_LIST.length,
        lastCheck: new Date(),
      });
    } finally {
      setIsLoading(false);
    }
  };

  const categorizedAPIs = {
    ai: apiStatuses.filter(a => a.category === 'ai'),
    media: apiStatuses.filter(a => a.category === 'media'),
    output: apiStatuses.filter(a => a.category === 'output'),
    infra: apiStatuses.filter(a => a.category === 'infra'),
  };

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.1,
      },
    },
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: {
      opacity: 1,
      y: 0,
      transition: {
        type: "spring",
        stiffness: 100,
      },
    },
  };

  return (
    <div className="min-h-full pb-8">
      {/* Hero Section */}
      <motion.div
        initial={{ opacity: 0, y: -20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
        className="mb-8"
      >
        <div className="flex items-center justify-between">
          <div>
            <div className="flex items-center gap-4 mb-3">
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                transition={{ type: "spring", stiffness: 200, delay: 0.2 }}
                className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-500 flex items-center justify-center shadow-lg shadow-cyan-500/30"
              >
                <Sparkles className="w-7 h-7 text-white" />
              </motion.div>
              <div>
                <h1 className="text-4xl font-bold text-white mb-1">
                  {systemName}
                </h1>
                <p className="text-foreground-muted flex items-center gap-2">
                  <span>Mission Control</span>
                  <span className="text-foreground-muted/50">•</span>
                  <span className="text-cyan-400 font-medium">AI-Powered Production</span>
                </p>
              </div>
            </div>
          </div>

          <motion.button
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.95 }}
            onClick={() => router.push('/workflow')}
            className="relative px-8 py-3.5 rounded-xl bg-gradient-to-r from-cyan-500 via-blue-500 to-blue-600 text-white font-semibold shadow-glow-lg shadow-cyan-500/50 hover:shadow-glow-lg hover:shadow-cyan-400/70 transition-all duration-300 overflow-hidden group active:scale-95 border border-cyan-400/30 hover:border-cyan-300/60"
          >
            {/* Animated shine effect */}
            <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000" />

            <span className="relative z-10 flex items-center gap-2">
              <Rocket className="w-5 h-5 drop-shadow-glow" />
              Nova Produção
              <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform drop-shadow-glow" />
            </span>

            {/* Pulsing glow background */}
            <div className="absolute inset-0 bg-gradient-to-r from-cyan-400 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity animate-pulse-slow" />
          </motion.button>
        </div>
      </motion.div>

      {/* Bento Grid */}
      <motion.div
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        className="grid grid-cols-12 gap-4"
      >
        {/* System Health - Large Card (Spans 8 cols) */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-8"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-cyan-950/40 via-blue-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-cyan-500/20 p-6 h-full group hover:border-cyan-400/60 hover:shadow-glow-lg hover:shadow-cyan-500/50 transition-all duration-300">
            {/* Animated gradient mesh background */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay on hover */}
            <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-blue-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500/30 to-blue-500/30 border border-cyan-400/50 flex items-center justify-center shadow-glow-sm shadow-cyan-500/50 group-hover:shadow-glow-md group-hover:shadow-cyan-400/70 transition-shadow duration-300">
                    <Activity className="w-5 h-5 text-cyan-300 group-hover:text-cyan-200 transition-colors" />
                  </div>
                  <div>
                    <h2 className="text-lg font-semibold text-white">Status do Sistema</h2>
                    <p className="text-sm text-foreground-muted">Monitoramento em tempo real</p>
                  </div>
                </div>

                {/* Status Badge */}
                <div className={`flex items-center gap-2 px-4 py-2 rounded-full ${
                  systemHealth.overall === 'healthy'
                    ? 'bg-success/10 border border-success/20'
                    : systemHealth.overall === 'degraded'
                    ? 'bg-warning/10 border border-warning/20'
                    : 'bg-error/10 border border-error/20'
                }`}>
                  <div className="relative w-2 h-2">
                    <div className={`absolute inset-0 rounded-full animate-ping opacity-75 ${
                      systemHealth.overall === 'healthy' ? 'bg-success' :
                      systemHealth.overall === 'degraded' ? 'bg-warning' : 'bg-error'
                    }`} />
                    <div className={`relative w-2 h-2 rounded-full ${
                      systemHealth.overall === 'healthy' ? 'bg-success' :
                      systemHealth.overall === 'degraded' ? 'bg-warning' : 'bg-error'
                    }`} />
                  </div>
                  <span className={`text-sm font-medium ${
                    systemHealth.overall === 'healthy' ? 'text-success' :
                    systemHealth.overall === 'degraded' ? 'text-warning' : 'text-error'
                  }`}>
                    {systemHealth.overall === 'healthy' ? 'Operacional' :
                     systemHealth.overall === 'degraded' ? 'Degradado' : 'Crítico'}
                  </span>
                </div>
              </div>

              {isLoading ? (
                <div className="flex items-center justify-center py-12">
                  <Loader2 className="w-8 h-8 text-cyan-500 animate-spin" />
                </div>
              ) : (
                <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                  <StatCard
                    label="APIs Online"
                    value={systemHealth.onlineAPIs}
                    icon={<Wifi className="w-5 h-5" />}
                    color="cyan"
                  />
                  <StatCard
                    label="APIs Offline"
                    value={systemHealth.totalAPIs - systemHealth.onlineAPIs}
                    icon={<WifiOff className="w-5 h-5" />}
                    color="rose"
                  />
                  <StatCard
                    label="Disponibilidade"
                    value={`${Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%`}
                    icon={<TrendingUp className="w-5 h-5" />}
                    color="emerald"
                  />
                  <StatCard
                    label="Última Check"
                    value={systemHealth.lastCheck.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}
                    icon={<Clock className="w-5 h-5" />}
                    color="violet"
                  />
                </div>
              )}
            </div>
          </div>
        </motion.div>

        {/* Quick Actions - Vertical Card (Spans 4 cols) */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-4"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-950/40 via-violet-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-purple-500/20 p-6 h-full group hover:border-purple-400/60 hover:shadow-glow-lg hover:shadow-purple-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-purple-500/20 via-violet-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-purple-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 border border-purple-400/50 flex items-center justify-center shadow-glow-sm shadow-purple-500/50 group-hover:shadow-glow-md group-hover:shadow-purple-400/70 transition-shadow duration-300">
                  <Zap className="w-5 h-5 text-purple-300 group-hover:text-purple-200 transition-colors" />
                </div>
                <h2 className="text-lg font-semibold text-white">Ações Rápidas</h2>
              </div>

              <div className="space-y-3">
                <ActionButton
                  icon={<Play className="w-4 h-4" />}
                  label="Iniciar Produção"
                  description="Novo workflow de vídeo"
                  onClick={() => router.push('/workflow')}
                  gradient="from-cyan-500 to-blue-500"
                />
                <ActionButton
                  icon={<Settings className="w-4 h-4" />}
                  label="Configurar APIs"
                  description="Gerenciar integrações"
                  onClick={openApiKeyModal}
                  gradient="from-violet-500 to-purple-500"
                />
                <ActionButton
                  icon={<Eye className="w-4 h-4" />}
                  label="Documentação"
                  description="Guias e referências"
                  onClick={() => router.push('/documentation')}
                  gradient="from-emerald-500 to-green-500"
                />
              </div>
            </div>
          </div>
        </motion.div>

        {/* AI Providers */}
        <APICard
          title="Provedores IA"
          icon={<Brain className="w-5 h-5 text-violet-400" />}
          apis={categorizedAPIs.ai}
          onConfigure={openApiKeyModal}
          color="violet"
        />

        {/* Media APIs */}
        <APICard
          title="Mídia"
          icon={<Film className="w-5 h-5 text-cyan-400" />}
          apis={categorizedAPIs.media}
          onConfigure={openApiKeyModal}
          color="cyan"
        />

        {/* Output */}
        <APICard
          title="Output"
          icon={<Video className="w-5 h-5 text-rose-400" />}
          apis={categorizedAPIs.output}
          onConfigure={openApiKeyModal}
          color="rose"
        />

        {/* Infrastructure */}
        <APICard
          title="Infraestrutura"
          icon={<Server className="w-5 h-5 text-amber-400" />}
          apis={categorizedAPIs.infra}
          onConfigure={openApiKeyModal}
          color="amber"
        />

        {/* Statistics with Chart - Wide Card */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-6"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-950/40 via-green-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-emerald-500/20 p-6 h-full group hover:border-emerald-400/60 hover:shadow-glow-lg hover:shadow-emerald-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-emerald-500/20 via-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-emerald-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500/30 to-green-500/30 border border-emerald-400/50 flex items-center justify-center shadow-glow-sm shadow-emerald-500/50 group-hover:shadow-glow-md group-hover:shadow-emerald-400/70 transition-shadow duration-300">
                    <BarChart3 className="w-5 h-5 text-emerald-300 group-hover:text-emerald-200 transition-colors" />
                  </div>
                  <div>
                    <h2 className="text-lg font-semibold text-white">Disponibilidade</h2>
                    <p className="text-xs text-foreground-muted">Últimos 60 minutos</p>
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-2xl font-bold text-emerald-400">
                    {Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%
                  </div>
                  <div className="text-xs text-foreground-muted">Uptime</div>
                </div>
              </div>

              <AnimatePresence mode="wait">
                {isLoading ? (
                  <motion.div
                    key="loading"
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="flex items-center justify-center h-48"
                  >
                    <Loader2 className="w-8 h-8 text-emerald-500 animate-spin" />
                  </motion.div>
                ) : (
                  <motion.div
                    key="chart"
                    initial={{ opacity: 0, scale: 0.95 }}
                    animate={{ opacity: 1, scale: 1 }}
                    exit={{ opacity: 0, scale: 0.95 }}
                    transition={{ duration: 0.3 }}
                    className="h-48"
                  >
                    <ResponsiveContainer width="100%" height="100%">
                      <AreaChart data={chartData}>
                        <defs>
                          <linearGradient id="availabilityGradient" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stopColor="#10b981" stopOpacity={0.4} />
                            <stop offset="100%" stopColor="#10b981" stopOpacity={0.0} />
                          </linearGradient>
                        </defs>
                        <CartesianGrid strokeDasharray="3 3" stroke="#334155" opacity={0.3} />
                        <XAxis
                          dataKey="time"
                          stroke="#64748b"
                          fontSize={11}
                          tickLine={false}
                          axisLine={{ stroke: '#334155' }}
                        />
                        <YAxis
                          stroke="#64748b"
                          fontSize={11}
                          tickLine={false}
                          axisLine={{ stroke: '#334155' }}
                          domain={[0, 100]}
                          ticks={[0, 25, 50, 75, 100]}
                        />
                        <Tooltip
                          contentStyle={{
                            backgroundColor: '#0f172a',
                            border: '1px solid #334155',
                            borderRadius: '8px',
                            fontSize: '12px',
                          }}
                          labelStyle={{ color: '#94a3b8' }}
                          itemStyle={{ color: '#10b981' }}
                        />
                        <Area
                          type="monotone"
                          dataKey="availability"
                          stroke="#10b981"
                          strokeWidth={2}
                          fill="url(#availabilityGradient)"
                        />
                      </AreaChart>
                    </ResponsiveContainer>
                  </motion.div>
                )}
              </AnimatePresence>
            </div>
          </div>
        </motion.div>

        {/* System Health with Radial Chart */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-6"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-950/40 via-indigo-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-blue-500/20 p-6 h-full group hover:border-blue-400/60 hover:shadow-glow-lg hover:shadow-blue-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-blue-500/20 via-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-blue-400/50 flex items-center justify-center shadow-glow-sm shadow-blue-500/50 group-hover:shadow-glow-md group-hover:shadow-blue-400/70 transition-shadow duration-300">
                  <Code2 className="w-5 h-5 text-blue-300 group-hover:text-blue-200 transition-colors" />
                </div>
                <div>
                  <h2 className="text-lg font-semibold text-white">Saúde do Sistema</h2>
                  <p className="text-xs text-foreground-muted">Status atual das APIs</p>
                </div>
              </div>

              <AnimatePresence mode="wait">
                {isLoading ? (
                  <motion.div
                    key="loading"
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="flex items-center justify-center h-48"
                  >
                    <Loader2 className="w-8 h-8 text-cyan-500 animate-spin" />
                  </motion.div>
                ) : (
                  <motion.div
                    key="radial"
                    initial={{ opacity: 0, scale: 0.95 }}
                    animate={{ opacity: 1, scale: 1 }}
                    exit={{ opacity: 0, scale: 0.95 }}
                    transition={{ duration: 0.3 }}
                    className="h-48 flex items-center"
                  >
                    <ResponsiveContainer width="100%" height="100%">
                      <RadialBarChart
                        cx="50%"
                        cy="50%"
                        innerRadius="60%"
                        outerRadius="100%"
                        data={[
                          {
                            name: 'Disponibilidade',
                            value: Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100),
                            fill: systemHealth.overall === 'healthy' ? '#10b981' :
                                  systemHealth.overall === 'degraded' ? '#f59e0b' : '#ef4444',
                          },
                        ]}
                        startAngle={90}
                        endAngle={-270}
                      >
                        <PolarAngleAxis type="number" domain={[0, 100]} tick={false} />
                        <RadialBar
                          background={{ fill: '#1e293b' }}
                          dataKey="value"
                          cornerRadius={10}
                        />
                        <text
                          x="50%"
                          y="50%"
                          textAnchor="middle"
                          dominantBaseline="middle"
                          className="fill-white text-4xl font-bold"
                        >
                          {Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%
                        </text>
                      </RadialBarChart>
                    </ResponsiveContainer>
                  </motion.div>
                )}
              </AnimatePresence>

              <div className="grid grid-cols-2 gap-3 mt-4">
                <InfoRow label="Online" value={`${systemHealth.onlineAPIs}/${systemHealth.totalAPIs}`} />
                <InfoRow label="Status" value={systemHealth.overall === 'healthy' ? '✅ OK' : systemHealth.overall === 'degraded' ? '⚠️ Degradado' : '❌ Crítico'} />
              </div>
            </div>
          </div>
        </motion.div>

        {/* CTA Banner */}
        {systemHealth.overall === 'healthy' && !isLoading && (
          <motion.div
            variants={itemVariants}
            className="col-span-12"
          >
            <div className="relative overflow-hidden rounded-2xl bg-gradient-to-r from-cyan-500/10 via-blue-500/10 to-purple-500/10 backdrop-blur-xl border border-cyan-500/20 p-6">
              <div className="absolute inset-0 bg-[linear-gradient(to_right,#0891b2_1px,transparent_1px),linear-gradient(to_bottom,#0891b2_1px,transparent_1px)] bg-[size:14px_24px] opacity-5" />

              <div className="relative z-10 flex flex-col sm:flex-row items-center justify-between gap-4">
                <div className="flex items-center gap-4">
                  <motion.div
                    animate={{ rotate: 360 }}
                    transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
                    className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/30"
                  >
                    <CheckCircle2 className="w-7 h-7 text-white" />
                  </motion.div>
                  <div>
                    <h3 className="text-lg font-semibold text-white mb-1">
                      Sistema 100% Operacional
                    </h3>
                    <p className="text-sm text-foreground-muted">
                      Todas as APIs conectadas. Pronto para produção de vídeos.
                    </p>
                  </div>
                </div>
                <motion.button
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={() => router.push('/workflow')}
                  className="px-6 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 transition-shadow flex items-center gap-2 active:scale-95"
                >
                  <Rocket className="w-5 h-5" />
                  Iniciar Produção
                  <ArrowRight className="w-5 h-5" />
                </motion.button>
              </div>
            </div>
          </motion.div>
        )}
      </motion.div>
    </div>
  );
}

// Helper Components
function StatCard({ label, value, icon, color }: { label: string; value: string | number; icon: React.ReactNode; color: string }) {
  const colorClasses = {
    cyan: 'from-cyan-500/20 to-blue-500/20 border-cyan-500/30 text-cyan-400',
    rose: 'from-rose-500/20 to-red-500/20 border-rose-500/30 text-rose-400',
    emerald: 'from-emerald-500/20 to-green-500/20 border-emerald-500/30 text-emerald-400',
    violet: 'from-violet-500/20 to-purple-500/20 border-violet-500/30 text-violet-400',
  };

  return (
    <motion.div
      whileHover={{ scale: 1.05, y: -2 }}
      className="relative overflow-hidden rounded-xl bg-layer-2/50 border border-border-subtle p-4 group cursor-default"
    >
      <div className={`absolute inset-0 bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} opacity-0 group-hover:opacity-100 transition-opacity`} />

      <div className="relative z-10">
        <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} border ${colorClasses[color as keyof typeof colorClasses].split(' ')[2]} flex items-center justify-center mb-3`}>
          <div className={colorClasses[color as keyof typeof colorClasses].split(' ')[3]}>
            {icon}
          </div>
        </div>
        <div className="text-2xl font-bold text-white mb-1">{value}</div>
        <div className="text-xs text-foreground-muted">{label}</div>
      </div>
    </motion.div>
  );
}

function ActionButton({ icon, label, description, onClick, gradient }: {
  icon: React.ReactNode;
  label: string;
  description: string;
  onClick: () => void;
  gradient: string;
}) {
  return (
    <motion.button
      whileHover={{ x: 4 }}
      whileTap={{ scale: 0.98 }}
      onClick={onClick}
      className="w-full flex items-center gap-3 p-3 rounded-xl bg-layer-2/50 border border-border-subtle hover:border-cyan-500/30 transition-all duration-200 group text-left active:scale-95"
    >
      <div className={`w-10 h-10 rounded-lg bg-gradient-to-br ${gradient} flex items-center justify-center flex-shrink-0 shadow-lg`}>
        <div className="text-white">{icon}</div>
      </div>
      <div className="flex-1 min-w-0">
        <div className="text-sm font-medium text-white group-hover:text-cyan-400 transition-colors">{label}</div>
        <div className="text-xs text-foreground-muted truncate">{description}</div>
      </div>
      <ArrowRight className="w-4 h-4 text-foreground-muted group-hover:text-cyan-400 group-hover:translate-x-1 transition-all flex-shrink-0" />
    </motion.button>
  );
}

function APICard({ title, icon, apis, onConfigure, color }: {
  title: string;
  icon: React.ReactNode;
  apis: APIStatus[];
  onConfigure: () => void;
  color: string;
}) {
  const colorClasses = {
    violet: 'from-violet-500/20 to-purple-500/20 border-violet-500/30 violet-500/5',
    cyan: 'from-cyan-500/20 to-blue-500/20 border-cyan-500/30 cyan-500/5',
    rose: 'from-rose-500/20 to-red-500/20 border-rose-500/30 rose-500/5',
    amber: 'from-amber-500/20 to-orange-500/20 border-amber-500/30 amber-500/5',
  };

  return (
    <motion.div
      variants={{
        hidden: { opacity: 0, y: 20 },
        visible: {
          opacity: 1,
          y: 0,
          transition: {
            type: "spring",
            stiffness: 100,
          },
        },
      }}
      className="col-span-12 sm:col-span-6 lg:col-span-3"
    >
      <div className={`relative overflow-hidden rounded-2xl bg-gradient-to-br from-layer-1/80 to-layer-2/50 backdrop-blur-xl border border-border-subtle p-5 h-full group hover:border-${color}-500/30 transition-all duration-300`}>
        <div className={`absolute inset-0 bg-gradient-to-br from-${color}-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300`} />

        <div className="relative z-10">
          <div className="flex items-center gap-2 mb-4">
            <div className={`w-9 h-9 rounded-lg bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} border ${colorClasses[color as keyof typeof colorClasses].split(' ')[2]} flex items-center justify-center`}>
              {icon}
            </div>
            <h3 className="font-medium text-white text-sm">{title}</h3>
          </div>

          <div className="space-y-2">
            {apis.map(api => (
              <APIRow key={api.key} api={api} onConfigure={onConfigure} />
            ))}
          </div>
        </div>
      </div>
    </motion.div>
  );
}

function APIRow({ api, onConfigure }: { api: APIStatus; onConfigure: () => void }) {
  return (
    <div className="flex items-center justify-between p-2 rounded-lg hover:bg-layer-2/50 transition-colors group/row">
      <div className="flex items-center gap-2 min-w-0">
        <span className="text-sm">{api.icon}</span>
        <span className="text-xs text-foreground truncate">{api.name}</span>
      </div>
      {api.status === 'checking' ? (
        <Loader2 className="w-3.5 h-3.5 text-cyan-400 animate-spin flex-shrink-0" />
      ) : api.status === 'online' ? (
        <div className="flex items-center gap-1 flex-shrink-0">
          <div className="w-1.5 h-1.5 rounded-full bg-success" />
          <span className="text-xs text-success">On</span>
        </div>
      ) : (
        <button
          onClick={onConfigure}
          className="text-xs text-error hover:text-error/80 transition-colors flex-shrink-0"
        >
          Off
        </button>
      )}
    </div>
  );
}

function InfoRow({ label, value }: { label: string; value: string }) {
  return (
    <div className="flex items-center justify-between p-3 rounded-lg bg-layer-2/30 border border-border-subtle">
      <span className="text-sm text-foreground-muted">{label}</span>
      <span className="text-sm font-medium text-white">{value}</span>
    </div>
  );
}

```

---
#### `app/settings/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { User, FileText, Globe, Terminal, Settings, Palette, Activity, HardDrive } from 'lucide-react';
import { ProfileTab } from '@/components/settings/ProfileTab';
import { DocsManagerTab } from '@/components/settings/DocsManagerTab';
import { IntegrationsTab } from '@/components/settings/IntegrationsTab';
import { LogsTab } from '@/components/settings/LogsTab';
import { AppearanceTab } from '@/components/settings/AppearanceTab';
import { SystemMonitorTab } from '@/components/settings/SystemMonitorTab';
import { FilesTab } from '@/components/settings/FilesTab';
import { getProfile, getDocs, getTokens } from '@/app/actions/settings';
import type { UserProfile, DocsData, IntegrationTokens, SettingsTab as TabType } from '@/types';

export default function SettingsPage() {
  const [activeTab, setActiveTab] = useState<TabType>('profile');
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [docs, setDocs] = useState<DocsData>({ pages: [], updatedAt: new Date().toISOString() });
  const [tokens, setTokens] = useState<IntegrationTokens | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadInitialData();
  }, []);

  const loadInitialData = async () => {
    setLoading(true);
    try {
      const [profileData, docsData, tokensData] = await Promise.all([
        getProfile(),
        getDocs(),
        getTokens(),
      ]);

      setProfile(profileData);
      setDocs(docsData);
      setTokens(tokensData);
    } catch (error) {
      console.error('Failed to load settings data:', error);
      alert('Erro ao carregar configurações');
    } finally {
      setLoading(false);
    }
  };

  const handleDocsUpdate = async () => {
    try {
      const docsData = await getDocs();
      setDocs(docsData);
    } catch (error) {
      console.error('Failed to reload docs:', error);
    }
  };

  const handleTokensUpdate = async () => {
    try {
      const tokensData = await getTokens();
      setTokens(tokensData);
    } catch (error) {
      console.error('Failed to reload tokens:', error);
    }
  };

  const tabs = [
    {
      id: 'profile' as TabType,
      label: 'Perfil',
      icon: User,
      color: 'indigo',
    },
    {
      id: 'appearance' as TabType,
      label: 'Aparência',
      icon: Palette,
      color: 'purple',
    },
    {
      id: 'monitor' as TabType,
      label: 'Monitor',
      icon: Activity,
      color: 'cyan',
    },
    {
      id: 'files' as TabType,
      label: 'Arquivos',
      icon: HardDrive,
      color: 'orange',
    },
    {
      id: 'docs' as TabType,
      label: 'Documentação',
      icon: FileText,
      color: 'amber',
    },
    {
      id: 'integrations' as TabType,
      label: 'Integrações',
      icon: Globe,
      color: 'blue',
    },
    {
      id: 'logs' as TabType,
      label: 'Logs',
      icon: Terminal,
      color: 'emerald',
    },
  ];

  const getTabColorClasses = (color: string) => {
    const colors = {
      indigo: {
        active: 'text-indigo-400 bg-indigo-500/10 border-2 border-indigo-500/30 shadow-glow-md shadow-indigo-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-indigo-500/20',
        indicator: 'bg-indigo-500 shadow-glow-sm shadow-indigo-500/50',
      },
      purple: {
        active: 'text-purple-400 bg-purple-500/10 border-2 border-purple-500/30 shadow-glow-md shadow-purple-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-purple-500/20',
        indicator: 'bg-purple-500 shadow-glow-sm shadow-purple-500/50',
      },
      cyan: {
        active: 'text-cyan-400 bg-cyan-500/10 border-2 border-cyan-500/30 shadow-glow-md shadow-cyan-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-cyan-500/20',
        indicator: 'bg-cyan-500 shadow-glow-sm shadow-cyan-500/50',
      },
      orange: {
        active: 'text-orange-400 bg-orange-500/10 border-2 border-orange-500/30 shadow-glow-md shadow-orange-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-orange-500/20',
        indicator: 'bg-orange-500 shadow-glow-sm shadow-orange-500/50',
      },
      amber: {
        active: 'text-amber-400 bg-amber-500/10 border-2 border-amber-500/30 shadow-glow-md shadow-amber-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-amber-500/20',
        indicator: 'bg-amber-500 shadow-glow-sm shadow-amber-500/50',
      },
      blue: {
        active: 'text-blue-400 bg-blue-500/10 border-2 border-blue-500/30 shadow-glow-md shadow-blue-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-blue-500/20',
        indicator: 'bg-blue-500 shadow-glow-sm shadow-blue-500/50',
      },
      emerald: {
        active: 'text-emerald-400 bg-emerald-500/10 border-2 border-emerald-500/30 shadow-glow-md shadow-emerald-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-emerald-500/20',
        indicator: 'bg-emerald-500 shadow-glow-sm shadow-emerald-500/50',
      },
    };

    return colors[color as keyof typeof colors] || colors.indigo;
  };

  if (loading) {
    return (
      <div className="min-h-full flex items-center justify-center">
        <div className="text-center">
          <div className="relative inline-block">
            <Settings className="w-12 h-12 text-cyan-500 mx-auto mb-4 animate-spin" />
            <div className="absolute inset-0 w-12 h-12 bg-cyan-500/20 blur-xl animate-pulse" />
          </div>
          <p className="text-muted">Carregando configurações...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-full">
      {/* Header */}
      <div className="border-b border-subtle bg-gradient-to-br from-layer-1/80 via-indigo-950/20 to-layer-1/80 backdrop-blur-sm sticky top-0 z-10 shadow-lg shadow-indigo-500/5">
        <div className="max-w-7xl mx-auto px-6 py-6">
          <div className="flex items-center gap-3">
            <div className="relative p-2.5 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-glow-md shadow-indigo-500/50 group hover:shadow-glow-lg hover:shadow-indigo-400/70 transition-all duration-300">
              <Settings className="w-6 h-6 text-white relative z-10" />
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-blue-500/20 to-purple-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
            </div>
            <div>
              <h1 className="text-2xl font-bold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent">Configurações</h1>
              <p className="text-sm text-muted">Gerencie perfil, documentação e integrações</p>
            </div>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-6 py-8">
        <div className="grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6">
          {/* Sidebar Tabs */}
          <div className="space-y-2">
            {tabs.map((tab) => {
              const Icon = tab.icon;
              const isActive = activeTab === tab.id;
              const colorClasses = getTabColorClasses(tab.color);

              return (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`w-full px-4 py-3.5 rounded-xl flex items-center gap-3 transition-all text-left relative group ${
                    isActive
                      ? colorClasses.active
                      : colorClasses.inactive
                  }`}
                >
                  <div className={`p-2 rounded-lg transition-all ${
                    isActive
                      ? 'bg-white/10 shadow-glow-sm'
                      : 'bg-layer-2 group-hover:bg-layer-3'
                  }`}>
                    <Icon className="w-4 h-4" />
                  </div>
                  <span className="font-medium">{tab.label}</span>
                  {isActive && (
                    <div className={`absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 ${colorClasses.indicator} rounded-r`} />
                  )}
                </button>
              );
            })}
          </div>

          {/* Tab Content */}
          <div className="min-h-[600px]">
            <div className="relative overflow-hidden bg-gradient-to-br from-layer-1/80 via-indigo-950/10 to-layer-2/50 backdrop-blur-xl border-2 border-subtle rounded-2xl p-8 shadow-xl hover:border-active/30 transition-all duration-300 group">
              {/* Animated gradient mesh background */}
              <div className="absolute inset-0 bg-gradient-mesh opacity-10" />

              {/* Glow overlay on hover */}
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

              {/* Shimmer effect */}
              <div className="absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-700">
                <div className="absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/10 to-transparent animate-shimmer" />
              </div>

              {/* Content */}
              <div className="relative z-10">
                {activeTab === 'profile' && profile && (
                  <div className="animate-fade-in">
                    <ProfileTab initialProfile={profile} />
                  </div>
                )}

                {activeTab === 'appearance' && (
                  <div className="animate-fade-in">
                    <AppearanceTab />
                  </div>
                )}

                {activeTab === 'monitor' && (
                  <div className="animate-fade-in">
                    <SystemMonitorTab />
                  </div>
                )}

                {activeTab === 'files' && (
                  <div className="animate-fade-in">
                    <FilesTab />
                  </div>
                )}

                {activeTab === 'docs' && (
                  <div className="animate-fade-in">
                    <DocsManagerTab initialDocs={docs.pages} onUpdate={handleDocsUpdate} />
                  </div>
                )}

                {activeTab === 'integrations' && tokens && (
                  <div className="animate-fade-in">
                    <IntegrationsTab initialTokens={tokens} onUpdate={handleTokensUpdate} />
                  </div>
                )}

                {activeTab === 'logs' && (
                  <div className="animate-fade-in">
                    <LogsTab />
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Add custom animation styles */}
      <style jsx>{`
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fade-in {
          animation: fade-in 0.3s ease-out;
        }
      `}</style>
    </div>
  );
}

```

---
#### `app/step/1-input/page.tsx`

```
"use client";

import { useState, useEffect, useRef, useCallback } from 'react';
import { Upload, Youtube, Wifi, FileText, Sparkles, CheckCircle2, RefreshCw, ArrowRight, Users, Video, Eye, X, AlertCircle, Link2, MessageSquare, Table, Tag } from "lucide-react";
import { useAPIKeysStore } from '@/lib/api-keys-store';
import { useUIStore, useWorkflowStore } from '@/lib/store';
import { useRouter } from 'next/navigation';
import { WorkflowMode } from '@/types';
import ModeSelector from '@/components/workflow/ModeSelector';

interface ServerStatus {
  openai?: boolean;
  gemini?: boolean;
  anthropic?: boolean;
  youtube?: boolean;
  pexels?: boolean;
  pixabay?: boolean;
  elevenlabs?: boolean;
  tavily?: boolean;
  json2video?: boolean;
}

interface ChannelInfo {
  name: string;
  subscribers: string;
  videos: string;
  views: string;
  thumbnail?: string;
  channelId?: string;
  channelUrl?: string;
}

export default function InputPage() {
  const router = useRouter();
  const [serverStatus, setServerStatus] = useState<ServerStatus>({});
  const [loading, setLoading] = useState(true);
  const [mounted, setMounted] = useState(false);
  const [uploadedFile, setUploadedFile] = useState<File | null>(null);
  const [isDragging, setIsDragging] = useState(false);
  const [theme, setTheme] = useState("");
  const [channelInfo, setChannelInfo] = useState<ChannelInfo | null>(null);
  const [loadingChannel, setLoadingChannel] = useState(false);
  const [hasFetchedChannel, setHasFetchedChannel] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);

  // Novos campos do Pack #1
  const [selectedMode, setSelectedMode] = useState<WorkflowMode>("FAST");
  const [tagsFoco, setTagsFoco] = useState<string>("");
  const [linkConcorrente, setLinkConcorrente] = useState<string>("");
  const [transcricao, setTranscricao] = useState<string>("");
  const [youtubeSpreadsheet, setYoutubeSpreadsheet] = useState<File | null>(null);
  const [isDraggingSpreadsheet, setIsDraggingSpreadsheet] = useState(false);
  const spreadsheetInputRef = useRef<HTMLInputElement>(null);

  // Pega as chaves que você salvou no navegador
  const { keys: localKeys } = useAPIKeysStore();
  const { openApiKeyModal } = useUIStore();
  const { setContext, setStep } = useWorkflowStore();

  useEffect(() => {
    setMounted(true);
    checkServerStatus();
  }, []);

  const checkServerStatus = async () => {
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerStatus(data);
    } catch (error) {
      console.error("Erro ao verificar status:", error);
    } finally {
      setLoading(false);
    }
  };

  // LÓGICA DE CONEXÃO HÍBRIDA (O SEGREDO ESTÁ AQUI)
  // Verifica se a chave existe no Servidor Vercel OU no seu Navegador
  const isYoutubeConnected = serverStatus.youtube || (mounted && !!localKeys.youtube_api_key && localKeys.youtube_api_key.length > 5);

  const isAIConnected =
    serverStatus.openai || (mounted && !!localKeys.openai_api_key) ||
    serverStatus.gemini || (mounted && !!localKeys.google_api_key) ||
    serverStatus.anthropic || (mounted && !!localKeys.anthropic_api_key);

  // Carregar informações do canal
  const fetchChannelInfo = useCallback(async () => {
    if (hasFetchedChannel) return; // Evita chamadas duplicadas

    setLoadingChannel(true);
    setHasFetchedChannel(true);
    try {
      // Buscar dados reais da API do YouTube
      const headers: HeadersInit = {};
      if (localKeys.youtube_api_key) {
        headers['x-youtube-api-key'] = localKeys.youtube_api_key;
      }
      if (localKeys.youtube_channel_id) {
        headers['x-youtube-channel-id'] = localKeys.youtube_channel_id;
      }

      const response = await fetch('/api/youtube/channel', { headers });

      if (!response.ok) {
        throw new Error(`Erro ao buscar dados do canal: ${response.status}`);
      }

      const data = await response.json();

      // Formatar números para exibição amigável
      const formatNumber = (num: number): string => {
        if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;
        if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;
        return num.toString();
      };

      // Buscar thumbnail do canal
      const channelResponse = await fetch(
        `https://www.googleapis.com/youtube/v3/channels?part=snippet&id=${data.channelId}&key=${localKeys.youtube_api_key}`
      );

      let thumbnailUrl = undefined;
      if (channelResponse.ok) {
        const channelData = await channelResponse.json();
        if (channelData.items && channelData.items.length > 0) {
          thumbnailUrl = channelData.items[0].snippet.thumbnails.default.url;
        }
      }

      setChannelInfo({
        name: data.title,
        subscribers: formatNumber(data.subscriberCount),
        videos: formatNumber(data.videoCount),
        views: formatNumber(data.viewCount),
        thumbnail: thumbnailUrl,
        channelId: data.channelId,
        channelUrl: `https://www.youtube.com/channel/${data.channelId}`
      });
    } catch (error) {
      console.error("Erro ao buscar info do canal:", error);
      setHasFetchedChannel(false); // Permite tentar novamente em caso de erro
    } finally {
      setLoadingChannel(false);
    }
  }, [localKeys.youtube_api_key, localKeys.youtube_channel_id, hasFetchedChannel]);

  // Carregar informações do canal quando conectado
  useEffect(() => {
    if (isYoutubeConnected && !channelInfo && !loadingChannel && !hasFetchedChannel) {
      fetchChannelInfo();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [isYoutubeConnected]);

  // Upload de arquivo
  const handleFileSelect = useCallback((file: File) => {
    if (file && (file.type === 'text/csv' || file.name.endsWith('.csv'))) {
      setUploadedFile(file);
    } else {
      alert('Por favor, selecione um arquivo CSV válido.');
    }
  }, []);

  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
  }, []);

  const handleDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
    const file = e.dataTransfer.files[0];
    if (file) handleFileSelect(file);
  }, [handleFileSelect]);

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) handleFileSelect(file);
  };

  const handleClickUpload = () => {
    fileInputRef.current?.click();
  };

  const removeFile = () => {
    setUploadedFile(null);
    if (fileInputRef.current) {
      fileInputRef.current.value = '';
    }
  };

  // Funções para planilha do YouTube Studio
  const handleSpreadsheetSelect = useCallback((file: File) => {
    const validExtensions = ['.xlsx', '.xls', '.csv'];
    const isValid = validExtensions.some(ext => file.name.toLowerCase().endsWith(ext));

    if (file && isValid) {
      setYoutubeSpreadsheet(file);
    } else {
      alert('Por favor, selecione um arquivo válido (.xlsx, .xls ou .csv).');
    }
  }, []);

  const handleSpreadsheetDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(true);
  }, []);

  const handleSpreadsheetDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(false);
  }, []);

  const handleSpreadsheetDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(false);
    const file = e.dataTransfer.files[0];
    if (file) handleSpreadsheetSelect(file);
  }, [handleSpreadsheetSelect]);

  const handleSpreadsheetInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) handleSpreadsheetSelect(file);
  };

  const handleClickSpreadsheetUpload = () => {
    spreadsheetInputRef.current?.click();
  };

  const removeSpreadsheet = () => {
    setYoutubeSpreadsheet(null);
    if (spreadsheetInputRef.current) {
      spreadsheetInputRef.current.value = '';
    }
  };

  // Avançar para próxima etapa
  // Validação: pelo menos um campo deve estar preenchido além do modo
  const hasAnyInput =
    theme.trim().length > 0 ||
    linkConcorrente.trim().length > 0 ||
    transcricao.trim().length > 0 ||
    youtubeSpreadsheet !== null;

  const canAdvance = hasAnyInput && isAIConnected;

  const handleAdvance = () => {
    if (canAdvance) {
      const now = new Date().toISOString();

      // Processar tags de foco (separar por vírgula)
      const tagsArray = tagsFoco
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);

      setContext({
        id: crypto.randomUUID(),
        createdAt: now,
        updatedAt: now,
        theme: theme.trim() || null,
        autoMode: false,
        mode: selectedMode,
        tagsFoco: tagsArray,
        linkConcorrente: linkConcorrente.trim() || null,
        dadosConcorrente: null, // Será preenchido na próxima etapa se houver link
        transcricao: transcricao.trim() || null,
        planilhaYouTubeStudio: null, // Será processado na próxima etapa se houver arquivo
        metrics: [],
        channelData: channelInfo ? {
          channelId: "user-channel",
          title: channelInfo.name,
          description: "",
          subscriberCount: parseInt(channelInfo.subscribers.replace(/[^0-9]/g, "")) || 0,
          videoCount: parseInt(channelInfo.videos.replace(/[^0-9]/g, "")) || 0,
          viewCount: parseInt(channelInfo.views.replace(/[^0-9]/g, "")) || 0,
          recentVideos: [],
        } : null,
      });
      setStep(2);
      router.push('/step/2-research');
    }
  };

  return (
    <div className="w-full space-y-6 md:space-y-8 animate-in fade-in duration-500">

      {/* Cabeçalho */}
      <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-subtle pb-6">
        <div>
          <h1 className="text-2xl sm:text-3xl font-bold text-white tracking-tight">Menu de Entrada</h1>
          <p className="text-muted mt-1 text-sm sm:text-base">Configure o contexto inicial para a produção do seu vídeo.</p>
        </div>

        <button
          onClick={() => openApiKeyModal()}
          className={`px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg font-semibold shadow-lg flex items-center gap-2 transition-all active:scale-95 whitespace-nowrap cursor-pointer hover:ring-2 text-sm sm:text-base ${
            isYoutubeConnected && isAIConnected
              ? "bg-green-600 hover:bg-green-500 text-white shadow-green-500/20 hover:ring-green-500/50"
              : "bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/20 hover:ring-indigo-500/50"
          }`}
        >
          {loading ? <RefreshCw className="w-4 h-4 animate-spin" /> : <Wifi className="w-4 h-4" />}
          {isYoutubeConnected && isAIConnected ? "Conexões Ativas" : "Conectar APIs"}
        </button>
      </div>

      {/* Seletor de Modo de Workflow */}
      <ModeSelector
        selectedMode={selectedMode}
        onSelect={setSelectedMode}
      />

      {/* Planilha do YouTube Studio */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-green-500/10 rounded-lg">
            <Table className="w-4 h-4 sm:w-5 sm:h-5 text-green-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Planilha do YouTube Studio</h3>
            <p className="text-xs text-muted">Analise dados de performance dos seus vídeos (opcional)</p>
          </div>
        </div>

        <input
          ref={spreadsheetInputRef}
          type="file"
          accept=".xlsx,.xls,.csv"
          onChange={handleSpreadsheetInputChange}
          className="hidden"
        />

        {youtubeSpreadsheet ? (
          <div className="border-2 border-green-500/30 bg-green-500/5 rounded-xl p-4 sm:p-6">
            <div className="flex items-center justify-between gap-3">
              <div className="flex items-center gap-3 min-w-0">
                <div className="p-2 sm:p-3 bg-green-500/10 rounded-full flex-shrink-0">
                  <CheckCircle2 className="w-5 h-5 sm:w-6 sm:h-6 text-green-500" />
                </div>
                <div className="min-w-0">
                  <p className="font-medium text-green-400 text-sm sm:text-base truncate">{youtubeSpreadsheet.name}</p>
                  <p className="text-muted text-xs">{(youtubeSpreadsheet.size / 1024).toFixed(1)} KB</p>
                </div>
              </div>
              <button
                onClick={removeSpreadsheet}
                className="p-2 hover:bg-red-500/10 rounded-lg transition-colors flex-shrink-0"
              >
                <X className="w-4 h-4 text-red-400" />
              </button>
            </div>
          </div>
        ) : (
          <div
            onClick={handleClickSpreadsheetUpload}
            onDragOver={handleSpreadsheetDragOver}
            onDragLeave={handleSpreadsheetDragLeave}
            onDrop={handleSpreadsheetDrop}
            className={`border-2 border-dashed rounded-xl h-32 sm:h-40 flex flex-col items-center justify-center text-muted transition-all cursor-pointer ${
              isDraggingSpreadsheet
                ? 'border-green-500 bg-green-500/10'
                : 'border-subtle hover:bg-layer-2/50 hover:border-zinc-600'
            }`}
          >
            <div className={`p-2 sm:p-3 rounded-full mb-2 sm:mb-3 shadow-inner transition-colors ${isDraggingSpreadsheet ? 'bg-green-500/20' : 'bg-layer-2'}`}>
              <Table className={`w-5 h-5 sm:w-6 sm:h-6 ${isDraggingSpreadsheet ? 'text-green-400' : 'text-muted'}`} />
            </div>
            <p className="font-medium text-foreground-secondary text-sm sm:text-base">
              {isDraggingSpreadsheet ? 'Solte a planilha aqui' : 'Clique ou arraste a planilha'}
            </p>
            <p className="text-xs text-muted mt-1">XLSX, XLS ou CSV exportado do YouTube Studio</p>
          </div>
        )}
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">

        {/* Card Upload - AGORA FUNCIONAL */}
        <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6 hover:border-default transition-all group">
          <div className="flex items-center gap-3 mb-4 sm:mb-6">
            <div className="p-2 sm:p-2.5 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors">
              <Upload className="w-4 h-4 sm:w-5 sm:h-5 text-blue-500" />
            </div>
            <div>
              <h3 className="font-semibold text-white text-base sm:text-lg">Upload de Métricas</h3>
              <p className="text-xs text-muted">Dados históricos do canal (CSV)</p>
            </div>
          </div>

          <input
            ref={fileInputRef}
            type="file"
            accept=".csv"
            onChange={handleInputChange}
            className="hidden"
          />

          {uploadedFile ? (
            <div className="border-2 border-green-500/30 bg-green-500/5 rounded-xl p-4 sm:p-6">
              <div className="flex items-center justify-between gap-3">
                <div className="flex items-center gap-3 min-w-0">
                  <div className="p-2 sm:p-3 bg-green-500/10 rounded-full flex-shrink-0">
                    <CheckCircle2 className="w-5 h-5 sm:w-6 sm:h-6 text-green-500" />
                  </div>
                  <div className="min-w-0">
                    <p className="font-medium text-green-400 text-sm sm:text-base truncate">{uploadedFile.name}</p>
                    <p className="text-muted text-xs">{(uploadedFile.size / 1024).toFixed(1)} KB</p>
                  </div>
                </div>
                <button
                  onClick={removeFile}
                  className="p-2 hover:bg-red-500/10 rounded-lg transition-colors flex-shrink-0"
                >
                  <X className="w-4 h-4 text-red-400" />
                </button>
              </div>
            </div>
          ) : (
            <div
              onClick={handleClickUpload}
              onDragOver={handleDragOver}
              onDragLeave={handleDragLeave}
              onDrop={handleDrop}
              className={`border-2 border-dashed rounded-xl h-32 sm:h-40 flex flex-col items-center justify-center text-muted transition-all cursor-pointer ${
                isDragging
                  ? 'border-blue-500 bg-blue-500/10'
                  : 'border-subtle hover:bg-layer-2/50 hover:border-zinc-600'
              }`}
            >
              <div className={`p-2 sm:p-3 rounded-full mb-2 sm:mb-3 shadow-inner transition-colors ${isDragging ? 'bg-blue-500/20' : 'bg-layer-2'}`}>
                <FileText className={`w-5 h-5 sm:w-6 sm:h-6 ${isDragging ? 'text-blue-400' : 'text-muted'}`} />
              </div>
              <p className="font-medium text-foreground-secondary text-sm sm:text-base">
                {isDragging ? 'Solte o arquivo aqui' : 'Clique ou arraste o arquivo'}
              </p>
              <p className="text-xs text-muted mt-1">Apenas arquivos CSV</p>
            </div>
          )}
        </div>

        {/* Card YouTube Sync - COM INFO DO CANAL */}
        <div className={`border rounded-xl p-4 sm:p-6 transition-all group ${isYoutubeConnected ? 'bg-green-900/10 border-green-900/30' : 'bg-layer-1 border-subtle hover:border-default'}`}>
          <div className="flex items-center gap-3 mb-4 sm:mb-6">
            <div className={`p-2 sm:p-2.5 rounded-lg transition-colors ${isYoutubeConnected ? 'bg-green-500/20' : 'bg-red-500/10'}`}>
              <Youtube className={`w-4 h-4 sm:w-5 sm:h-5 ${isYoutubeConnected ? 'text-green-500' : 'text-red-500'}`} />
            </div>
            <div>
              <h3 className="font-semibold text-white text-base sm:text-lg">Sincronização</h3>
              <p className="text-xs text-muted">Conexão em tempo real</p>
            </div>
            {isYoutubeConnected && (
               <span className="ml-auto bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1 animate-in fade-in zoom-in">
                 <CheckCircle2 className="w-3 h-3" /> ATIVO
               </span>
            )}
          </div>

          <div className="bg-gradient-to-br from-zinc-900 to-zinc-950 border border-subtle rounded-xl min-h-[128px] sm:min-h-[160px] flex flex-col items-center justify-center p-4 sm:p-6 text-center relative overflow-hidden">
            {isYoutubeConnected ? (
              loadingChannel ? (
                <div className="z-10 flex flex-col items-center gap-3">
                  <RefreshCw className="w-6 h-6 sm:w-8 sm:h-8 text-green-500 animate-spin" />
                  <p className="text-muted text-sm">Carregando dados do canal...</p>
                </div>
              ) : channelInfo ? (
                <div className="z-10 w-full animate-in slide-in-from-bottom-2">
                  <div className="flex items-center gap-3 mb-3 sm:mb-4">
                    {channelInfo.thumbnail ? (
                      <img
                        src={channelInfo.thumbnail}
                        alt={channelInfo.name}
                        className="w-10 h-10 sm:w-12 sm:h-12 rounded-full flex-shrink-0 object-cover"
                      />
                    ) : (
                      <div className="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center text-white font-bold text-base sm:text-lg flex-shrink-0">
                        {channelInfo.name.charAt(0)}
                      </div>
                    )}
                    <div className="text-left min-w-0">
                      <p className="font-semibold text-white text-sm sm:text-base truncate">{channelInfo.name}</p>
                      <p className="text-green-400 text-xs">Canal Conectado</p>
                    </div>
                  </div>
                  <div className="grid grid-cols-3 gap-2 sm:gap-3">
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Users className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.subscribers}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Inscritos</p>
                    </div>
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Video className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.videos}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Vídeos</p>
                    </div>
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Eye className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.views}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Views</p>
                    </div>
                  </div>
                  {channelInfo.channelUrl && (
                    <div className="mt-3 pt-3 border-t border-subtle">
                      <p className="text-muted text-[10px] sm:text-xs mb-1">Canal no YouTube:</p>
                      <a
                        href={channelInfo.channelUrl}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="text-blue-400 hover:text-blue-300 text-xs sm:text-sm break-all transition-colors"
                      >
                        {channelInfo.channelUrl}
                      </a>
                      <p className="text-zinc-600 text-[10px] mt-1">ID: {channelInfo.channelId}</p>
                    </div>
                  )}
                </div>
              ) : (
                <div className="z-10 flex flex-col items-center gap-3 animate-in slide-in-from-bottom-2">
                   <div className="p-2 sm:p-3 bg-green-500/10 rounded-full mb-1 border border-green-500/20">
                      <CheckCircle2 className="w-6 h-6 sm:w-8 sm:h-8 text-green-500" />
                   </div>
                   <p className="text-green-400 font-medium text-sm sm:text-base">Canal Sincronizado</p>
                   <p className="text-muted text-xs">Pronto para gerar conteúdo</p>
                </div>
              )
            ) : (
              <div className="z-10 flex flex-col items-center gap-3">
                <div className="flex items-center gap-2 text-foreground-secondary">
                  <div className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                  <span className="text-xs sm:text-sm font-medium">API Necessária</span>
                </div>
                <button
                  onClick={() => openApiKeyModal()}
                  className="text-xs bg-layer-2 hover:bg-zinc-700 text-white px-3 sm:px-4 py-2 rounded-md border border-zinc-700 transition-colors cursor-pointer"
                >
                  Configurar Acesso
                </button>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Definição de Tema */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-amber-500/10 rounded-lg">
            <Sparkles className="w-4 h-4 sm:w-5 sm:h-5 text-amber-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Definição de Tema</h3>
            <p className="text-xs text-muted">O que vamos criar hoje? (opcional se houver outras fontes)</p>
          </div>
        </div>

        <input
          type="text"
          value={theme}
          onChange={(e) => setTheme(e.target.value)}
          placeholder="Ex: Oração da Manhã, Notícias sobre IA, Review de Tech..."
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Tags de Foco */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-purple-500/10 rounded-lg">
            <Tag className="w-4 h-4 sm:w-5 sm:h-5 text-purple-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Tags de Foco</h3>
            <p className="text-xs text-muted">Palavras-chave para direcionar o conteúdo (opcional)</p>
          </div>
        </div>

        <input
          type="text"
          value={tagsFoco}
          onChange={(e) => setTagsFoco(e.target.value)}
          placeholder="Ex: motivação, empreendedorismo, sucesso (separe por vírgula)"
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Link de Vídeo Concorrente */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-cyan-500/10 rounded-lg">
            <Link2 className="w-4 h-4 sm:w-5 sm:h-5 text-cyan-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Vídeo de Referência</h3>
            <p className="text-xs text-muted">Link de um vídeo para análise e inspiração (opcional)</p>
          </div>
        </div>

        <input
          type="url"
          value={linkConcorrente}
          onChange={(e) => setLinkConcorrente(e.target.value)}
          placeholder="https://www.youtube.com/watch?v=..."
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Transcrição de Vídeo */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-pink-500/10 rounded-lg">
            <MessageSquare className="w-4 h-4 sm:w-5 sm:h-5 text-pink-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Transcrição de Vídeo</h3>
            <p className="text-xs text-muted">Cole a transcrição de um vídeo para análise (opcional)</p>
          </div>
        </div>

        <textarea
          value={transcricao}
          onChange={(e) => setTranscricao(e.target.value)}
          placeholder="Cole aqui a transcrição completa de um vídeo..."
          rows={6}
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all text-sm sm:text-base resize-y"
        />
      </div>

      {/* Botão de Avançar */}
      <div className="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4 pt-4 border-t border-subtle">
        {!canAdvance && (
          <div className="flex items-center gap-2 text-amber-400 bg-amber-500/10 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm order-2 sm:order-1">
            <AlertCircle className="w-4 h-4 flex-shrink-0" />
            <span>
              {!hasAnyInput
                ? 'Preencha pelo menos um campo de input (tema, link, transcrição ou planilha)'
                : !isAIConnected
                ? 'Conecte pelo menos uma API de IA'
                : ''}
            </span>
          </div>
        )}

        <button
          onClick={handleAdvance}
          disabled={!canAdvance}
          className={`px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center gap-2 transition-all text-sm sm:text-base order-1 sm:order-2 ${
            canAdvance
              ? 'bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white shadow-indigo-500/20 hover:shadow-indigo-500/40 cursor-pointer active:scale-95'
              : 'bg-layer-2 text-muted cursor-not-allowed'
          }`}
        >
          Avançar para Pesquisa
          <ArrowRight className="w-4 h-4 sm:w-5 sm:h-5" />
        </button>
      </div>
    </div>
  );
}

```

---
#### `app/step/2-research/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { useAPIKeysStore, getAPIKeyHeaders } from "@/lib/api-keys-store";
import { AIProvider, APIKeyStatus, ResearchData } from "@/types";
import {
  Brain,
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Search,
  TrendingUp,
  Users,
  Lightbulb,
  Globe,
} from "lucide-react";

export default function Step2Research() {
  const router = useRouter();
  const { context, research, setResearch, setStep } = useWorkflowStore();
  const { getActiveDiretrizes } = useGuidelinesStore();
  const { keys } = useAPIKeysStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [isLoadingKeys, setIsLoadingKeys] = useState(true);
  const [isGenerating, setIsGenerating] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select first available provider
      if (status.openai) {
        setSelectedProvider("openai");
        setSelectedModel("gpt-4o");
      } else if (status.google) {
        setSelectedProvider("google");
        setSelectedModel("gemini-1.5-pro");
      } else if (status.anthropic) {
        setSelectedProvider("anthropic");
        setSelectedModel("claude-3-5-sonnet-latest");
      }
    });
  }, []);

  // Redirect if no context
  useEffect(() => {
    if (!context) {
      router.push("/step/1-input");
    }
  }, [context, router]);

  const handleGenerate = async () => {
    if (!selectedProvider || !selectedModel || !context) {
      setError("Selecione um provedor e modelo de IA.");
      return;
    }

    setIsGenerating(true);
    setError(null);

    try {
      const activeDiretrizes = getActiveDiretrizes();
      const apiKeyHeaders = getAPIKeyHeaders(keys);

      const response = await fetch("/api/research", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          ...apiKeyHeaders,
        },
        body: JSON.stringify({
          contextId: context.id,
          theme: context.theme,
          channelData: context.channelData,
          metrics: context.metrics,
          provider: selectedProvider,
          model: selectedModel,
          diretrizes: activeDiretrizes,
        }),
      });

      if (!response.ok) {
        const data = await response.json();
        throw new Error(data.error || "Falha na pesquisa");
      }

      const researchData: ResearchData = await response.json();
      setResearch(researchData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na pesquisa");
    } finally {
      setIsGenerating(false);
    }
  };

  const handleProceed = () => {
    if (research) {
      setStep(4);
      router.push("/step/4-proposal");
    }
  };

  if (!context) {
    return null;
  }

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Inteligência - Deep Research Agent
        </h1>
        <p className="text-muted">
          Análise profunda de dados e pesquisa de tendências para o tema:{" "}
          <span className="text-white font-medium">{context.theme}</span>
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
          </div>
        )}

        {/* AI Selection & Generate */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Brain className="w-5 h-5 text-purple-500" />
              Configuração do Agente
            </CardTitle>
            <CardDescription>
              Selecione o modelo de IA para executar a pesquisa profunda.
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            {isLoadingKeys ? (
              <div className="flex items-center justify-center py-8">
                <Loader2 className="w-6 h-6 animate-spin text-muted" />
              </div>
            ) : (
              <AIModelSelector
                selectedProvider={selectedProvider}
                selectedModel={selectedModel}
                onProviderChange={setSelectedProvider}
                onModelChange={setSelectedModel}
                apiKeyStatus={apiKeyStatus!}
                label="Selecione o modelo para pesquisa"
              />
            )}

            {apiKeyStatus?.tavily && (
              <div className="p-3 bg-green-500/10 border border-green-500/20 rounded-lg flex items-center gap-2">
                <Check className="w-4 h-4 text-green-400" />
                <span className="text-green-300 text-sm">
                  Tavily API detectada - pesquisa real habilitada
                </span>
              </div>
            )}

            {!apiKeyStatus?.tavily && (
              <div className="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg flex items-center gap-2">
                <AlertCircle className="w-4 h-4 text-yellow-400" />
                <span className="text-yellow-300 text-sm">
                  Tavily não configurado - pesquisa será simulada via LLM
                </span>
              </div>
            )}
          </CardContent>
          <CardFooter>
            <Button
              onClick={handleGenerate}
              isLoading={isGenerating}
              disabled={!selectedProvider || !selectedModel}
              leftIcon={<Search className="w-4 h-4" />}
            >
              {research ? "Regenerar Pesquisa" : "Executar Pesquisa"}
            </Button>
          </CardFooter>
        </Card>

        {/* Research Results */}
        {research && (
          <div className="space-y-6">
            {/* Internal Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <TrendingUp className="w-5 h-5 text-blue-500" />
                  Análise Interna (Canal)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <TrendingUp className="w-4 h-4" />
                      Tópicos de Alta Performance
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.internalAnalysis.topPerformingTopics.map((topic, i) => (
                        <Badge key={i} variant="success">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Users className="w-4 h-4" />
                      Insights da Audiência
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.audienceInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Lightbulb className="w-4 h-4" />
                      Lacunas de Conteúdo
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.contentGaps.map((gap, i) => (
                        <li key={i}>• {gap}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Check className="w-4 h-4" />
                      Recomendações
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.recommendations.map((rec, i) => (
                        <li key={i}>• {rec}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* External Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Globe className="w-5 h-5 text-green-500" />
                  Análise Externa (Mercado)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Tópicos em Alta
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.externalAnalysis.trendingTopics.map((topic, i) => (
                        <Badge key={i} variant="info">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Insights de Competidores
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.externalAnalysis.competitorInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Oportunidades de Mercado
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.externalAnalysis.marketOpportunities.map((opp, i) => (
                        <li key={i}>• {opp}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Consolidated Insights */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Brain className="w-5 h-5 text-purple-500" />
                  Síntese Estratégica
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-foreground-secondary leading-relaxed">
                  {research.consolidatedInsights}
                </p>
              </CardContent>
            </Card>

            {/* Research Queries */}
            <Card>
              <CardHeader>
                <CardTitle>Queries Executadas</CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  {research.queries.map((query, i) => (
                    <div
                      key={i}
                      className="p-3 bg-layer-3 rounded-lg border border-subtle"
                    >
                      <div className="flex items-center justify-between mb-2">
                        <span className="font-medium text-white">
                          {query.query}
                        </span>
                        <Badge variant={query.source === "tavily" ? "success" : "warning"}>
                          {query.source === "tavily" ? "Tavily" : "Simulado"}
                        </Badge>
                      </div>
                      <p className="text-sm text-muted">
                        {query.results.length} resultados encontrados
                      </p>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </div>
        )}

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/1-input")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={!research}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Proposta
        </Button>
      </div>
    </div>
  );
}

```

---
#### `app/step/4-proposal/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Textarea from "@/components/ui/Textarea";
import Select from "@/components/ui/Select";
import Toggle from "@/components/ui/Toggle";
import AssetCard from "@/components/AssetCard";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import {
  AIProvider,
  APIKeyStatus,
  ProposalData,
  Script,
  Soundtrack,
  Description,
  Tags,
  TitlesAndThumbs,
  UploadSetup,
  ImageProvider,
  TTSProvider,
} from "@/types";
import { v4 as uuidv4 } from "uuid";
import { formatDuration } from "@/lib/utils";
import {
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Sparkles,
  Image,
  Settings,
  Volume2,
} from "lucide-react";

export default function Step4Proposal() {
  const router = useRouter();
  const { context, research, proposal, setProposal, updateProposal, setStep } = useWorkflowStore();
  const { getDiretrizesForScope } = useGuidelinesStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Individual generation states
  const [generatingScript, setGeneratingScript] = useState(false);
  const [generatingSoundtrack, setGeneratingSoundtrack] = useState(false);
  const [generatingDescription, setGeneratingDescription] = useState(false);
  const [generatingTags, setGeneratingTags] = useState(false);
  const [generatingTitles, setGeneratingTitles] = useState(false);
  const [generatingImage, setGeneratingImage] = useState<string | null>(null);
  const [generatingAudio, setGeneratingAudio] = useState(false);

  // Edit states
  const [editingScript, setEditingScript] = useState(false);
  const [editingDescription, setEditingDescription] = useState(false);
  const [editingTags, setEditingTags] = useState(false);
  const [editContent, setEditContent] = useState("");

  // Default upload setup
  const defaultUploadSetup: UploadSetup = {
    category: "22",
    language: "pt",
    license: "youtube",
    madeForKids: false,
    ageRestricted: false,
    paidPromotion: false,
    allowComments: true,
    allowEmbedding: true,
  };

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no research
  useEffect(() => {
    if (!context || !research) {
      router.push("/step/1-input");
    }
  }, [context, research, router]);

  // Initialize proposal if not exists
  useEffect(() => {
    if (context && research && !proposal) {
      const initialProposal: ProposalData = {
        id: uuidv4(),
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
        contextId: context.id,
        researchId: research.id,
        rationale: "",
        script: {
          id: uuidv4(),
          status: "pending",
          sections: [],
          totalDuration: 0,
          generatedAt: "",
          approvedAt: null,
          audioUrl: null,
          ttsProvider: null,
          ttsVoice: null,
        },
        soundtrack: {
          id: uuidv4(),
          status: "pending",
          suggestions: [],
          selected: null,
          generatedAt: "",
          approvedAt: null,
        },
        description: {
          id: uuidv4(),
          status: "pending",
          content: "",
          generatedAt: "",
          approvedAt: null,
        },
        tags: {
          id: uuidv4(),
          status: "pending",
          items: [],
          generatedAt: "",
          approvedAt: null,
        },
        uploadSetup: defaultUploadSetup,
        titlesAndThumbs: {
          id: uuidv4(),
          status: "pending",
          variations: [],
          selectedVariation: null,
          generatedAt: "",
          approvedAt: null,
        },
        allApproved: false,
      };
      setProposal(initialProposal);
    }
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [context, research, proposal, setProposal]);

  const generateScript = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingScript(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("script");
      const response = await fetch("/api/proposal/script", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const script: Script = await response.json();
      updateProposal({ script, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar roteiro");
    } finally {
      setGeneratingScript(false);
    }
  };

  const generateSoundtrack = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingSoundtrack(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/soundtrack", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          mood: "professional, engaging",
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const soundtrack: Soundtrack = await response.json();
      updateProposal({ soundtrack, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar trilha");
    } finally {
      setGeneratingSoundtrack(false);
    }
  };

  const generateDescription = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingDescription(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("description");
      const response = await fetch("/api/proposal/description", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const description: Description = await response.json();
      updateProposal({ description, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar descrição");
    } finally {
      setGeneratingDescription(false);
    }
  };

  const generateTags = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTags(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/tags", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          description: proposal.description.content,
          research,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const tags: Tags = await response.json();
      updateProposal({ tags, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar tags");
    } finally {
      setGeneratingTags(false);
    }
  };

  const generateTitles = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTitles(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("thumbnail");
      const response = await fetch("/api/proposal/titles", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const titlesAndThumbs: TitlesAndThumbs = await response.json();
      updateProposal({ titlesAndThumbs, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar títulos");
    } finally {
      setGeneratingTitles(false);
    }
  };

  const generateThumbnailImage = async (variationId: string, provider: ImageProvider) => {
    if (!proposal) return;
    setGeneratingImage(variationId);
    setError(null);

    try {
      const variation = proposal.titlesAndThumbs.variations.find((v) => v.id === variationId);
      if (!variation) throw new Error("Variação não encontrada");

      const response = await fetch("/api/images/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          prompt: variation.thumbnailPrompt,
          provider,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { imageUrl } = await response.json();

      const updatedVariations = proposal.titlesAndThumbs.variations.map((v) =>
        v.id === variationId ? { ...v, thumbnailUrl: imageUrl, imageProvider: provider } : v
      );

      updateProposal({
        titlesAndThumbs: {
          ...proposal.titlesAndThumbs,
          variations: updatedVariations,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar imagem");
    } finally {
      setGeneratingImage(null);
    }
  };

  const generateAudio = async (ttsProvider: TTSProvider, voice: string) => {
    if (!proposal?.script) return;
    setGeneratingAudio(true);
    setError(null);

    try {
      const fullText = proposal.script.sections.map((s) => s.content).join("\n\n");
      const response = await fetch("/api/tts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          text: fullText,
          provider: ttsProvider,
          voice,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { audioUrl } = await response.json();

      updateProposal({
        script: {
          ...proposal.script,
          audioUrl,
          ttsProvider,
          ttsVoice: voice,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar áudio");
    } finally {
      setGeneratingAudio(false);
    }
  };

  const approveAsset = (asset: "script" | "soundtrack" | "description" | "tags" | "titlesAndThumbs") => {
    if (!proposal) return;

    const now = new Date().toISOString();
    const updates: Partial<ProposalData> = { updatedAt: now };

    switch (asset) {
      case "script":
        updates.script = { ...proposal.script, status: "approved", approvedAt: now };
        break;
      case "soundtrack":
        updates.soundtrack = { ...proposal.soundtrack, status: "approved", approvedAt: now };
        break;
      case "description":
        updates.description = { ...proposal.description, status: "approved", approvedAt: now };
        break;
      case "tags":
        updates.tags = { ...proposal.tags, status: "approved", approvedAt: now };
        break;
      case "titlesAndThumbs":
        updates.titlesAndThumbs = { ...proposal.titlesAndThumbs, status: "approved", approvedAt: now };
        break;
    }

    updateProposal(updates);

    // Check if all approved
    const updatedProposal = { ...proposal, ...updates };
    const allApproved =
      updatedProposal.script.status === "approved" &&
      updatedProposal.soundtrack.status === "approved" &&
      updatedProposal.description.status === "approved" &&
      updatedProposal.tags.status === "approved" &&
      updatedProposal.titlesAndThumbs.status === "approved";

    if (allApproved) {
      updateProposal({ allApproved: true });
    }
  };

  const handleProceed = () => {
    if (proposal?.allApproved) {
      setStep(5);
      router.push("/step/5-studio");
    }
  };

  if (!context || !research || !proposal) {
    return null;
  }

  const canProceed = proposal.allApproved;

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Proposta de Vídeo - Mesa de Decisão
        </h1>
        <p className="text-muted">
          Todos os assets são gerados aqui. Nada avança sem sua aprovação.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Rationale */}
        {proposal.rationale && (
          <Card className="bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/20">
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Sparkles className="w-5 h-5 text-yellow-500" />
                Por que esta proposta vai performar bem
              </CardTitle>
            </CardHeader>
            <CardContent>
              <p className="text-foreground-secondary leading-relaxed">{proposal.rationale}</p>
            </CardContent>
          </Card>
        )}

        {/* Script */}
        <AssetCard
          title="Roteiro"
          status={proposal.script.status}
          isGenerating={generatingScript}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.script.sections.map((s) => s.content).join("\n\n---\n\n"));
            setEditingScript(true);
          }}
          onRegenerate={generateScript}
          onApprove={() => approveAsset("script")}
          isEditing={editingScript}
          onCancelEdit={() => setEditingScript(false)}
          onSaveEdit={() => {
            // Parse edited content back to sections (simplified)
            setEditingScript(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={20}
              className="font-mono text-sm"
            />
          }
        >
          {proposal.script.sections.length > 0 ? (
            <div className="space-y-4">
              <div className="flex items-center gap-4 text-sm text-muted">
                <span>Duração: {formatDuration(proposal.script.totalDuration)}</span>
                <span>Seções: {proposal.script.sections.length}</span>
              </div>
              <div className="space-y-3 max-h-96 overflow-auto">
                {proposal.script.sections.map((section) => (
                  <div key={section.id} className="p-3 bg-layer-2 rounded-lg">
                    <div className="flex items-center gap-2 mb-2">
                      <Badge variant="info">{section.type}</Badge>
                      <span className="text-xs text-muted">
                        {formatDuration(section.duration)}
                      </span>
                    </div>
                    <p className="text-foreground-secondary text-sm whitespace-pre-wrap">
                      {section.content}
                    </p>
                  </div>
                ))}
              </div>

              {/* TTS Section */}
              <div className="pt-4 border-t border-gray-800">
                <h4 className="text-sm font-medium text-muted mb-3 flex items-center gap-2">
                  <Volume2 className="w-4 h-4" />
                  Gerar Áudio (TTS)
                </h4>
                {proposal.script.audioUrl ? (
                  <div className="flex items-center gap-3">
                    <audio controls src={proposal.script.audioUrl} className="flex-1" />
                    <Badge variant="success">Gerado</Badge>
                  </div>
                ) : (
                  <div className="flex items-center gap-3">
                    <Select
                      options={[
                        { value: "openai:alloy", label: "OpenAI - Alloy" },
                        { value: "openai:nova", label: "OpenAI - Nova" },
                        { value: "google:pt-BR-Wavenet-A", label: "Google - PT-BR Female" },
                      ]}
                      placeholder="Selecione voz..."
                      className="w-48"
                      onChange={(value) => {
                        const [provider, voice] = value.split(":") as [TTSProvider, string];
                        generateAudio(provider, voice);
                      }}
                    />
                    {generatingAudio && <Loader2 className="w-4 h-4 animate-spin" />}
                  </div>
                )}
              </div>
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar o roteiro
            </p>
          )}
        </AssetCard>

        {/* Soundtrack */}
        <AssetCard
          title="Trilha Sonora"
          status={proposal.soundtrack.status}
          isGenerating={generatingSoundtrack}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateSoundtrack}
          onApprove={() => approveAsset("soundtrack")}
        >
          {proposal.soundtrack.suggestions.length > 0 ? (
            <div className="space-y-3">
              {proposal.soundtrack.suggestions.map((track) => (
                <div
                  key={track.id}
                  className={`p-3 rounded-lg border transition-all cursor-pointer ${
                    proposal.soundtrack.selected === track.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-layer-2 border-subtle hover:border-gray-600"
                  }`}
                  onClick={() =>
                    updateProposal({
                      soundtrack: { ...proposal.soundtrack, selected: track.id },
                    })
                  }
                >
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="font-medium text-white">{track.title}</p>
                      <p className="text-sm text-muted">
                        {track.artist} • {track.genre}
                      </p>
                    </div>
                    <Badge variant="default">{track.license}</Badge>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para sugerir trilhas
            </p>
          )}
        </AssetCard>

        {/* Description */}
        <AssetCard
          title="Descrição"
          status={proposal.description.status}
          isGenerating={generatingDescription}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.description.content);
            setEditingDescription(true);
          }}
          onRegenerate={generateDescription}
          onApprove={() => approveAsset("description")}
          isEditing={editingDescription}
          onCancelEdit={() => setEditingDescription(false)}
          onSaveEdit={() => {
            updateProposal({
              description: { ...proposal.description, content: editContent },
            });
            setEditingDescription(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={10}
            />
          }
        >
          {proposal.description.content ? (
            <div className="prose prose-invert max-w-none">
              <pre className="whitespace-pre-wrap text-sm text-foreground-secondary font-sans">
                {proposal.description.content}
              </pre>
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar a descrição
            </p>
          )}
        </AssetCard>

        {/* Tags */}
        <AssetCard
          title="Tags"
          status={proposal.tags.status}
          isGenerating={generatingTags}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.tags.items.join(", "));
            setEditingTags(true);
          }}
          onRegenerate={generateTags}
          onApprove={() => approveAsset("tags")}
          isEditing={editingTags}
          onCancelEdit={() => setEditingTags(false)}
          onSaveEdit={() => {
            updateProposal({
              tags: {
                ...proposal.tags,
                items: editContent.split(",").map((t) => t.trim()).filter(Boolean),
              },
            });
            setEditingTags(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={4}
              helperText="Separe as tags por vírgula"
            />
          }
        >
          {proposal.tags.items.length > 0 ? (
            <div className="flex flex-wrap gap-2">
              {proposal.tags.items.map((tag, i) => (
                <Badge key={i} variant="default">
                  {tag}
                </Badge>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar as tags
            </p>
          )}
        </AssetCard>

        {/* Upload Setup */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Settings className="w-5 h-5 text-muted" />
              Setup de Upload
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <Select
                label="Categoria"
                value={proposal.uploadSetup.category}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, category: value },
                  })
                }
                options={[
                  { value: "22", label: "People & Blogs" },
                  { value: "27", label: "Education" },
                  { value: "28", label: "Science & Technology" },
                  { value: "24", label: "Entertainment" },
                  { value: "26", label: "Howto & Style" },
                ]}
              />
              <Select
                label="Idioma"
                value={proposal.uploadSetup.language}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, language: value },
                  })
                }
                options={[
                  { value: "pt", label: "Português" },
                  { value: "en", label: "English" },
                  { value: "es", label: "Español" },
                ]}
              />
              <Select
                label="Licença"
                value={proposal.uploadSetup.license}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: {
                      ...proposal.uploadSetup,
                      license: value as "youtube" | "creative_commons",
                    },
                  })
                }
                options={[
                  { value: "youtube", label: "YouTube Standard" },
                  { value: "creative_commons", label: "Creative Commons" },
                ]}
              />
            </div>
            <div className="mt-4 space-y-3">
              <Toggle
                checked={proposal.uploadSetup.madeForKids}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, madeForKids: checked },
                  })
                }
                label="Feito para crianças"
              />
              <Toggle
                checked={proposal.uploadSetup.allowComments}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowComments: checked },
                  })
                }
                label="Permitir comentários"
              />
              <Toggle
                checked={proposal.uploadSetup.allowEmbedding}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowEmbedding: checked },
                  })
                }
                label="Permitir incorporação"
              />
            </div>
          </CardContent>
        </Card>

        {/* Titles & Thumbnails */}
        <AssetCard
          title="Títulos e Thumbnails"
          status={proposal.titlesAndThumbs.status}
          isGenerating={generatingTitles}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateTitles}
          onApprove={() => approveAsset("titlesAndThumbs")}
        >
          {proposal.titlesAndThumbs.variations.length > 0 ? (
            <div className="space-y-4">
              {proposal.titlesAndThumbs.variations.map((variation) => (
                <div
                  key={variation.id}
                  className={`p-4 rounded-lg border transition-all ${
                    proposal.titlesAndThumbs.selectedVariation === variation.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-layer-2 border-subtle"
                  }`}
                >
                  <div className="flex items-start gap-4">
                    {/* Thumbnail */}
                    <div className="w-48 h-27 bg-layer-2 rounded-lg overflow-hidden flex-shrink-0">
                      {variation.thumbnailUrl ? (
                        <img
                          src={variation.thumbnailUrl}
                          alt={variation.title}
                          className="w-full h-full object-cover"
                        />
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-8 h-8 text-muted" />
                        </div>
                      )}
                    </div>

                    <div className="flex-1">
                      <h4 className="font-medium text-white mb-2">{variation.title}</h4>
                      <p className="text-sm text-muted mb-3">{variation.thumbnailPrompt}</p>

                      <div className="flex flex-wrap gap-2">
                        <Button
                          size="sm"
                          variant={
                            proposal.titlesAndThumbs.selectedVariation === variation.id
                              ? "success"
                              : "outline"
                          }
                          onClick={() =>
                            updateProposal({
                              titlesAndThumbs: {
                                ...proposal.titlesAndThumbs,
                                selectedVariation: variation.id,
                              },
                            })
                          }
                        >
                          {proposal.titlesAndThumbs.selectedVariation === variation.id
                            ? "Selecionado"
                            : "Selecionar"}
                        </Button>

                        {/* Image Generation Buttons */}
                        {apiKeyStatus?.openai && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "dalle")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            DALL·E
                          </Button>
                        )}
                        {apiKeyStatus?.stability && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "stability")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Stability
                          </Button>
                        )}
                        {apiKeyStatus?.replicate && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "replicate")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Replicate
                          </Button>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar títulos e prompts de thumbnail
            </p>
          )}
        </AssetCard>

        {/* Approval Status */}
        <Card className={canProceed ? "border-green-500/50" : "border-yellow-500/50"}>
          <CardContent className="py-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-4">
                {canProceed ? (
                  <>
                    <div className="w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center">
                      <Check className="w-5 h-5 text-green-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Todos os assets aprovados!</p>
                      <p className="text-sm text-muted">
                        Você pode prosseguir para o Studio de Criação.
                      </p>
                    </div>
                  </>
                ) : (
                  <>
                    <div className="w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center">
                      <AlertCircle className="w-5 h-5 text-yellow-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Aprovações pendentes</p>
                      <p className="text-sm text-muted">
                        Gere e aprove todos os assets para continuar.
                      </p>
                    </div>
                  </>
                )}
              </div>

              <div className="flex gap-2">
                {[
                  { name: "Roteiro", status: proposal.script.status },
                  { name: "Trilha", status: proposal.soundtrack.status },
                  { name: "Descrição", status: proposal.description.status },
                  { name: "Tags", status: proposal.tags.status },
                  { name: "Títulos", status: proposal.titlesAndThumbs.status },
                ].map((item) => (
                  <Badge
                    key={item.name}
                    variant={item.status === "approved" ? "success" : "warning"}
                    size="sm"
                  >
                    {item.name}
                  </Badge>
                ))}
              </div>
            </div>
          </CardContent>
        </Card>

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/2-research")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={!canProceed}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Studio
        </Button>
      </div>
    </div>
  );
}

```

---
#### `app/step/5-studio/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Input from "@/components/ui/Input";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus, StoryboardData, MediaItem, MediaSource } from "@/types";
import { formatDuration } from "@/lib/utils";
import {
  Film,
  ArrowRight,
  ArrowLeft,
  AlertCircle,
  Play,
  Image,
  Search,
  GripVertical,
  Trash2,
  Plus,
  Video,
} from "lucide-react";

export default function Step5Studio() {
  const router = useRouter();
  const { context, proposal, storyboard, render, setStoryboard, setRender, updateRender, setStep } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isGeneratingStoryboard, setIsGeneratingStoryboard] = useState(false);
  const [isSearchingMedia, setIsSearchingMedia] = useState<string | null>(null);
  const [isRendering, setIsRendering] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Media search state
  const [mediaSearchResults, setMediaSearchResults] = useState<Record<string, MediaItem[]>>({});
  const [selectedSources, setSelectedSources] = useState<MediaSource[]>(["pexels", "pixabay", "unsplash"]);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select available sources
      const sources: MediaSource[] = [];
      if (status.pexels) sources.push("pexels");
      if (status.pixabay) sources.push("pixabay");
      if (status.unsplash) sources.push("unsplash");
      setSelectedSources(sources);
    });
  }, []);

  // Redirect if no proposal
  useEffect(() => {
    if (!context || !proposal || !proposal.allApproved) {
      router.push("/step/4-proposal");
    }
  }, [context, proposal, router]);

  const generateStoryboard = async () => {
    if (!proposal) return;
    setIsGeneratingStoryboard(true);
    setError(null);

    try {
      const response = await fetch("/api/storyboard", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          script: proposal.script,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const storyboardData: StoryboardData = await response.json();
      setStoryboard(storyboardData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar storyboard");
    } finally {
      setIsGeneratingStoryboard(false);
    }
  };

  const searchMediaForScene = async (sceneId: string, query: string) => {
    setIsSearchingMedia(sceneId);
    setError(null);

    try {
      const response = await fetch("/api/media/search", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          query,
          sources: selectedSources,
          mediaType: "all",
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { results } = await response.json();
      setMediaSearchResults((prev) => ({ ...prev, [sceneId]: results }));
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na busca de mídia");
    } finally {
      setIsSearchingMedia(null);
    }
  };

  const selectMediaForScene = (sceneId: string, media: MediaItem) => {
    if (!storyboard) return;

    const updatedScenes = storyboard.scenes.map((scene) =>
      scene.id === sceneId ? { ...scene, media } : scene
    );

    setStoryboard({
      ...storyboard,
      scenes: updatedScenes,
    });

    // Clear search results for this scene
    setMediaSearchResults((prev) => {
      const updated = { ...prev };
      delete updated[sceneId];
      return updated;
    });
  };

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const updateSceneOrder = (fromIndex: number, toIndex: number) => {
    if (!storyboard) return;

    const scenes = [...storyboard.scenes];
    const [movedScene] = scenes.splice(fromIndex, 1);
    scenes.splice(toIndex, 0, movedScene);

    // Update order property
    const reorderedScenes = scenes.map((scene, i) => ({ ...scene, order: i }));

    setStoryboard({
      ...storyboard,
      scenes: reorderedScenes,
    });
  };

  const startRender = async () => {
    if (!storyboard || !proposal) return;
    setIsRendering(true);
    setError(null);

    try {
      const response = await fetch("/api/render", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          storyboardId: storyboard.id,
          scenes: storyboard.scenes,
          soundtrack: proposal.soundtrack.selected
            ? proposal.soundtrack.suggestions.find((s) => s.id === proposal.soundtrack.selected)
            : null,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const renderData = await response.json();
      setRender(renderData);

      // Poll for render status
      pollRenderStatus(renderData.id);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao iniciar renderização");
      setIsRendering(false);
    }
  };

  const pollRenderStatus = async (jobId: string) => {
    try {
      const response = await fetch(`/api/render?jobId=${jobId}`);
      if (!response.ok) throw new Error("Erro ao verificar status");

      const status = await response.json();
      updateRender(status);

      if (status.status === "rendering") {
        setTimeout(() => pollRenderStatus(jobId), 5000);
      } else {
        setIsRendering(false);
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao verificar renderização");
      setIsRendering(false);
    }
  };

  const handleProceed = () => {
    if (render?.status === "completed") {
      setStep(6);
      router.push("/step/6-upload");
    }
  };

  if (!context || !proposal) {
    return null;
  }

  const allScenesHaveMedia = storyboard?.scenes.every((scene) => scene.media !== null) ?? false;
  const canRender = storyboard && allScenesHaveMedia && apiKeyStatus?.json2video;

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Studio de Criação
        </h1>
        <p className="text-muted">
          Popule cada cena com mídia, revise e renderize seu vídeo.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Storyboard Generation */}
        {!storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Film className="w-5 h-5 text-purple-500" />
                Gerar Storyboard
              </CardTitle>
              <CardDescription>
                O storyboard divide o roteiro aprovado em cenas individuais.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <Button
                onClick={generateStoryboard}
                isLoading={isGeneratingStoryboard}
                leftIcon={<Film className="w-4 h-4" />}
              >
                Gerar Storyboard
              </Button>
            </CardContent>
          </Card>
        )}

        {/* Storyboard Scenes */}
        {storyboard && (
          <div className="space-y-6">
            <div className="flex items-center justify-between">
              <div>
                <h2 className="text-xl font-semibold text-white">
                  Storyboard ({storyboard.scenes.length} cenas)
                </h2>
                <p className="text-sm text-muted">
                  Duração total: {formatDuration(storyboard.totalDuration)}
                </p>
              </div>
              <div className="flex gap-2">
                <Badge variant={allScenesHaveMedia ? "success" : "warning"}>
                  {storyboard.scenes.filter((s) => s.media).length}/{storyboard.scenes.length} com mídia
                </Badge>
              </div>
            </div>

            {/* Media Sources Filter */}
            <Card padding="sm">
              <div className="flex items-center gap-4">
                <span className="text-sm text-muted">Fontes de mídia:</span>
                {(["pexels", "pixabay", "unsplash"] as MediaSource[]).map((source) => {
                  const isAvailable = apiKeyStatus?.[source as keyof APIKeyStatus];
                  const isSelected = selectedSources.includes(source);

                  return (
                    <button
                      key={source}
                      onClick={() => {
                        if (isAvailable) {
                          setSelectedSources((prev) =>
                            prev.includes(source)
                              ? prev.filter((s) => s !== source)
                              : [...prev, source]
                          );
                        }
                      }}
                      disabled={!isAvailable}
                      className={`px-3 py-1 rounded-full text-sm transition-all ${
                        !isAvailable
                          ? "bg-layer-2 text-disabled cursor-not-allowed"
                          : isSelected
                          ? "bg-primary-600 text-white"
                          : "bg-layer-2 text-muted hover:bg-layer-3"
                      }`}
                    >
                      {source.charAt(0).toUpperCase() + source.slice(1)}
                    </button>
                  );
                })}
              </div>
            </Card>

            {/* Scenes List */}
            <div className="space-y-4">
              {storyboard.scenes.map((scene, index) => (
                <Card key={scene.id} padding="sm">
                  <div className="flex gap-4">
                    {/* Drag Handle */}
                    <div className="flex items-center">
                      <GripVertical className="w-5 h-5 text-disabled cursor-move" />
                    </div>

                    {/* Scene Number */}
                    <div className="w-12 h-12 bg-layer-2 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span className="text-lg font-bold text-muted">{index + 1}</span>
                    </div>

                    {/* Media Preview */}
                    <div className="w-32 h-20 bg-layer-2 rounded-lg overflow-hidden flex-shrink-0">
                      {scene.media ? (
                        scene.media.type === "video" ? (
                          <video
                            src={scene.media.previewUrl}
                            className="w-full h-full object-cover"
                            muted
                          />
                        ) : (
                          <img
                            src={scene.media.previewUrl}
                            alt=""
                            className="w-full h-full object-cover"
                          />
                        )
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-6 h-6 text-disabled" />
                        </div>
                      )}
                    </div>

                    {/* Scene Content */}
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-1">
                        <Badge variant="info" size="sm">
                          {formatDuration(scene.duration)}
                        </Badge>
                        {scene.media && (
                          <Badge variant="success" size="sm">
                            {scene.media.source}
                          </Badge>
                        )}
                      </div>
                      <p className="text-sm text-secondary line-clamp-2">{scene.text}</p>

                      {/* Media Source Info */}
                      {scene.media && (
                        <p className="text-xs text-muted mt-1">{scene.media.attribution}</p>
                      )}
                    </div>

                    {/* Scene Actions */}
                    <div className="flex flex-col gap-2">
                      <SearchMediaButton
                        sceneText={scene.text}
                        isSearching={isSearchingMedia === scene.id}
                        onSearch={(query) => searchMediaForScene(scene.id, query)}
                      />
                      {scene.media && (
                        <Button
                          size="sm"
                          variant="ghost"
                          onClick={() => {
                            const updatedScenes = storyboard.scenes.map((s) =>
                              s.id === scene.id ? { ...s, media: null } : s
                            );
                            setStoryboard({ ...storyboard, scenes: updatedScenes });
                          }}
                        >
                          <Trash2 className="w-4 h-4" />
                        </Button>
                      )}
                    </div>
                  </div>

                  {/* Media Search Results */}
                  {mediaSearchResults[scene.id] && (
                    <div className="mt-4 pt-4 border-t border-subtle">
                      <div className="flex items-center justify-between mb-3">
                        <span className="text-sm text-muted">
                          {mediaSearchResults[scene.id].length} resultados encontrados
                        </span>
                        <button
                          onClick={() =>
                            setMediaSearchResults((prev) => {
                              const updated = { ...prev };
                              delete updated[scene.id];
                              return updated;
                            })
                          }
                          className="text-sm text-muted hover:text-muted"
                        >
                          Fechar
                        </button>
                      </div>
                      <div className="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2">
                        {mediaSearchResults[scene.id].slice(0, 16).map((media) => (
                          <button
                            key={media.id}
                            onClick={() => selectMediaForScene(scene.id, media)}
                            className="aspect-video bg-layer-2 rounded overflow-hidden hover:ring-2 hover:ring-primary-500 transition-all"
                          >
                            <img
                              src={media.previewUrl}
                              alt=""
                              className="w-full h-full object-cover"
                            />
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                </Card>
              ))}
            </div>
          </div>
        )}

        {/* Render Section */}
        {storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Video className="w-5 h-5 text-green-500" />
                Renderização
              </CardTitle>
              <CardDescription>
                Combine todas as cenas em um vídeo final.
              </CardDescription>
            </CardHeader>
            <CardContent>
              {!apiKeyStatus?.json2video ? (
                <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                  <p className="text-yellow-300 text-sm">
                    JSON2Video API não configurada. Adicione JSON2VIDEO_API_KEY para habilitar a
                    renderização.
                  </p>
                </div>
              ) : render ? (
                <div className="space-y-4">
                  <div className="flex items-center gap-4">
                    <Badge
                      variant={
                        render.status === "completed"
                          ? "success"
                          : render.status === "error"
                          ? "error"
                          : "info"
                      }
                    >
                      {render.status === "rendering"
                        ? `Renderizando... ${render.progress}%`
                        : render.status === "completed"
                        ? "Concluído"
                        : render.status === "error"
                        ? "Erro"
                        : "Pendente"}
                    </Badge>
                    {render.status === "rendering" && (
                      <div className="flex-1 h-2 bg-layer-2 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-primary-500 transition-all"
                          style={{ width: `${render.progress}%` }}
                        />
                      </div>
                    )}
                  </div>

                  {render.videoUrl && (
                    <div className="aspect-video bg-black rounded-lg overflow-hidden">
                      <video src={render.videoUrl} controls className="w-full h-full" />
                    </div>
                  )}

                  {render.error && (
                    <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                      <p className="text-red-300 text-sm">{render.error}</p>
                    </div>
                  )}
                </div>
              ) : (
                <Button
                  onClick={startRender}
                  isLoading={isRendering}
                  disabled={!canRender}
                  leftIcon={<Play className="w-4 h-4" />}
                >
                  Renderizar Vídeo
                </Button>
              )}

              {!allScenesHaveMedia && (
                <p className="text-sm text-yellow-400 mt-3">
                  Todas as cenas precisam ter mídia antes de renderizar.
                </p>
              )}
            </CardContent>
          </Card>
        )}

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/4-proposal")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={render?.status !== "completed"}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Upload
        </Button>
      </div>
    </div>
  );
}

// Search Media Button Component
function SearchMediaButton({
  sceneText,
  isSearching,
  onSearch,
}: {
  sceneText: string;
  isSearching: boolean;
  onSearch: (query: string) => void;
}) {
  const [showInput, setShowInput] = useState(false);
  const [query, setQuery] = useState("");

  const handleSearch = () => {
    if (query.trim()) {
      onSearch(query);
      setShowInput(false);
      setQuery("");
    }
  };

  // Auto-generate search query from scene text
  const autoSearch = () => {
    const keywords = sceneText.split(" ").slice(0, 5).join(" ");
    onSearch(keywords);
  };

  if (showInput) {
    return (
      <div className="flex gap-1">
        <Input
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="Buscar..."
          className="w-32 text-sm py-1"
          onKeyDown={(e) => e.key === "Enter" && handleSearch()}
        />
        <Button size="sm" onClick={handleSearch}>
          <Search className="w-4 h-4" />
        </Button>
      </div>
    );
  }

  return (
    <div className="flex gap-1">
      <Button
        size="sm"
        variant="outline"
        onClick={autoSearch}
        isLoading={isSearching}
      >
        <Search className="w-4 h-4" />
      </Button>
      <Button
        size="sm"
        variant="ghost"
        onClick={() => setShowInput(true)}
        title="Busca personalizada"
      >
        <Plus className="w-4 h-4" />
      </Button>
    </div>
  );
}

```

---
#### `app/step/6-upload/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus } from "@/types";
import { downloadJSON } from "@/lib/utils";
import {
  Upload,
  ArrowLeft,
  AlertCircle,
  Play,
  Youtube,
  FileVideo,
  FileText,
  Tag,
  Image,
  Download,
  ExternalLink,
  RefreshCw,
} from "lucide-react";

export default function Step6Upload() {
  const router = useRouter();
  const { context, proposal, storyboard, render, upload, setUpload, resetWorkflow } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isUploading, setIsUploading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no render
  useEffect(() => {
    if (!context || !proposal || !render?.videoUrl) {
      router.push("/step/5-studio");
    }
  }, [context, proposal, render, router]);

  const handleUpload = async () => {
    if (!proposal || !render) return;
    setIsUploading(true);
    setError(null);

    try {
      // Note: Real YouTube upload requires OAuth2 authentication
      // This is a simulation showing what the upload would do
      const selectedTitle = proposal.titlesAndThumbs.variations.find(
        (v) => v.id === proposal.titlesAndThumbs.selectedVariation
      );

      const response = await fetch("/api/youtube/upload", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          renderId: render.id,
          videoUrl: render.videoUrl,
          title: selectedTitle?.title || context?.theme || "Video",
          description: proposal.description.content,
          tags: proposal.tags.items,
          thumbnailUrl: selectedTitle?.thumbnailUrl,
          uploadSetup: proposal.uploadSetup,
          accessToken: "", // Would come from OAuth2 flow
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const uploadData = await response.json();
      setUpload(uploadData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao fazer upload");
    } finally {
      setIsUploading(false);
    }
  };

  const exportAllData = () => {
    const exportData = {
      context,
      proposal,
      storyboard,
      render,
      upload,
      exportedAt: new Date().toISOString(),
    };
    downloadJSON(exportData, `orion-export-${Date.now()}.json`);
  };

  const handleStartNew = () => {
    if (confirm("Tem certeza que deseja iniciar um novo projeto? Todos os dados serão perdidos.")) {
      resetWorkflow();
      router.push("/step/1-input");
    }
  };

  if (!context || !proposal || !render) {
    return null;
  }

  const selectedTitle = proposal.titlesAndThumbs.variations.find(
    (v) => v.id === proposal.titlesAndThumbs.selectedVariation
  );

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Finalização e Upload
        </h1>
        <p className="text-muted">
          Revise seu vídeo e envie para o YouTube.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Video Preview */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Play className="w-5 h-5 text-green-500" />
              Preview do Vídeo
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="aspect-video bg-black rounded-lg overflow-hidden">
              <video src={render.videoUrl || undefined} controls className="w-full h-full" />
            </div>
          </CardContent>
        </Card>

        {/* Metadata Summary */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Title & Thumbnail */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Image className="w-5 h-5 text-purple-500" />
                Título e Thumbnail
              </CardTitle>
            </CardHeader>
            <CardContent>
              {selectedTitle ? (
                <div className="space-y-4">
                  <div>
                    <p className="text-sm text-muted mb-1">Título</p>
                    <p className="text-lg font-medium text-white">{selectedTitle.title}</p>
                  </div>
                  {selectedTitle.thumbnailUrl && (
                    <div>
                      <p className="text-sm text-muted mb-2">Thumbnail</p>
                      <img
                        src={selectedTitle.thumbnailUrl}
                        alt={selectedTitle.title}
                        className="rounded-lg max-w-xs"
                      />
                    </div>
                  )}
                </div>
              ) : (
                <p className="text-muted">Nenhum título selecionado</p>
              )}
            </CardContent>
          </Card>

          {/* Description */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileText className="w-5 h-5 text-blue-500" />
                Descrição
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="max-h-48 overflow-auto">
                <pre className="text-sm text-secondary whitespace-pre-wrap font-sans">
                  {proposal.description.content}
                </pre>
              </div>
            </CardContent>
          </Card>

          {/* Tags */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Tag className="w-5 h-5 text-yellow-500" />
                Tags ({proposal.tags.items.length})
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="flex flex-wrap gap-2 max-h-32 overflow-auto">
                {proposal.tags.items.map((tag, i) => (
                  <Badge key={i} variant="default">
                    {tag}
                  </Badge>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Upload Settings */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileVideo className="w-5 h-5 text-green-500" />
                Configurações de Upload
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-2 gap-3 text-sm">
                <div>
                  <p className="text-muted">Categoria</p>
                  <p className="text-white">{getCategoryName(proposal.uploadSetup.category)}</p>
                </div>
                <div>
                  <p className="text-muted">Idioma</p>
                  <p className="text-white">{getLanguageName(proposal.uploadSetup.language)}</p>
                </div>
                <div>
                  <p className="text-muted">Licença</p>
                  <p className="text-white">
                    {proposal.uploadSetup.license === "youtube"
                      ? "YouTube Standard"
                      : "Creative Commons"}
                  </p>
                </div>
                <div>
                  <p className="text-muted">Para Crianças</p>
                  <p className="text-white">{proposal.uploadSetup.madeForKids ? "Sim" : "Não"}</p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Upload Section */}
        <Card className={upload?.status === "published" ? "border-green-500/50" : ""}>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Youtube className="w-5 h-5 text-red-500" />
              Upload para YouTube
            </CardTitle>
            <CardDescription>
              Envie seu vídeo diretamente para o YouTube.
            </CardDescription>
          </CardHeader>
          <CardContent>
            {!apiKeyStatus?.youtube ? (
              <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                <p className="text-yellow-300 text-sm">
                  YouTube API não configurada. Adicione as chaves YOUTUBE_API_KEY e
                  YOUTUBE_CLIENT_ID/SECRET para habilitar o upload.
                </p>
              </div>
            ) : upload ? (
              <div className="space-y-4">
                <div className="flex items-center gap-4">
                  <Badge
                    variant={
                      upload.status === "published"
                        ? "success"
                        : upload.status === "error"
                        ? "error"
                        : "info"
                    }
                  >
                    {upload.status === "uploading"
                      ? "Enviando..."
                      : upload.status === "processing"
                      ? "Processando..."
                      : upload.status === "published"
                      ? "Publicado!"
                      : upload.status === "error"
                      ? "Erro"
                      : "Pendente"}
                  </Badge>
                </div>

                {upload.youtubeUrl && (
                  <div className="p-4 bg-green-500/10 border border-green-500/20 rounded-lg">
                    <p className="text-green-300 mb-2">Vídeo publicado com sucesso!</p>
                    <a
                      href={upload.youtubeUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="inline-flex items-center gap-2 text-green-400 hover:text-green-300"
                    >
                      <ExternalLink className="w-4 h-4" />
                      Ver no YouTube
                    </a>
                  </div>
                )}

                {upload.error && (
                  <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                    <p className="text-red-300 text-sm">{upload.error}</p>
                  </div>
                )}
              </div>
            ) : (
              <div className="space-y-4">
                <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
                  <p className="text-blue-300 text-sm">
                    <strong>Nota:</strong> O upload para o YouTube requer autenticação OAuth2.
                    Em produção, você será redirecionado para autorizar o acesso ao seu canal.
                  </p>
                </div>
                <Button
                  onClick={handleUpload}
                  isLoading={isUploading}
                  leftIcon={<Upload className="w-4 h-4" />}
                  size="lg"
                >
                  Confirmar e Enviar para o YouTube
                </Button>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Export & Actions */}
        <Card>
          <CardHeader>
            <CardTitle>Exportar Dados</CardTitle>
            <CardDescription>
              Baixe todos os dados do projeto em formato JSON.
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="flex flex-wrap gap-3">
              <Button variant="outline" onClick={exportAllData} leftIcon={<Download className="w-4 h-4" />}>
                Exportar Projeto Completo
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  downloadJSON(proposal, `proposal-${proposal.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
              >
                Exportar Proposta
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  storyboard && downloadJSON(storyboard, `storyboard-${storyboard.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
                disabled={!storyboard}
              >
                Exportar Storyboard
              </Button>
            </div>
          </CardContent>
        </Card>

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/5-studio")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleStartNew}
          variant="secondary"
          leftIcon={<RefreshCw className="w-4 h-4" />}
        >
          Iniciar Novo Projeto
        </Button>
      </div>
    </div>
  );
}

function getCategoryName(categoryId: string): string {
  const categories: Record<string, string> = {
    "1": "Film & Animation",
    "2": "Autos & Vehicles",
    "10": "Music",
    "15": "Pets & Animals",
    "17": "Sports",
    "19": "Travel & Events",
    "20": "Gaming",
    "22": "People & Blogs",
    "23": "Comedy",
    "24": "Entertainment",
    "25": "News & Politics",
    "26": "Howto & Style",
    "27": "Education",
    "28": "Science & Technology",
  };
  return categories[categoryId] || categoryId;
}

function getLanguageName(languageCode: string): string {
  const languages: Record<string, string> = {
    pt: "Português",
    en: "English",
    es: "Español",
  };
  return languages[languageCode] || languageCode;
}

```

---
#### `app/workflow/page.tsx`

```
"use client";

import { useState, useEffect, Suspense } from 'react';
import { CheckCircle2, Circle, Lock, ArrowRight, FileInput, Brain, FileVideo, Film, Wrench, Upload, AlertCircle } from 'lucide-react';
import { useWorkflowStore } from '@/lib/store';
import { useRouter, useSearchParams } from 'next/navigation';

const workflowSteps = [
  {
    step: 1 as const,
    title: "Entrada",
    description: "Defina o tema e configure o projeto",
    icon: FileInput,
    path: "/step/1-input",
    color: "from-blue-500 to-cyan-500",
  },
  {
    step: 2 as const,
    title: "Inteligência",
    description: "Pesquisa e análise de conteúdo",
    icon: Brain,
    path: "/step/2-research",
    color: "from-purple-500 to-pink-500",
  },
  {
    step: 4 as const,
    title: "Proposta",
    description: "Geração de roteiro e conteúdo",
    icon: FileVideo,
    path: "/step/4-proposal",
    color: "from-green-500 to-emerald-500",
  },
  {
    step: 5 as const,
    title: "Studio",
    description: "Seleção de mídia e storyboard",
    icon: Film,
    path: "/step/5-studio",
    color: "from-orange-500 to-red-500",
  },
  {
    step: 5 as const,
    title: "Render",
    description: "Renderização do vídeo",
    icon: Wrench,
    path: "/step/5-studio",
    color: "from-yellow-500 to-orange-500",
  },
  {
    step: 6 as const,
    title: "Upload",
    description: "Publicação no YouTube",
    icon: Upload,
    path: "/step/6-upload",
    color: "from-indigo-500 to-purple-500",
  },
];

function WorkflowContent() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const {
    currentStep,
    canNavigateToStep,
    resetWorkflow,
    context,
    research,
    proposal,
    storyboard,
    upload
  } = useWorkflowStore();
  const [hoveredStep, setHoveredStep] = useState<number | null>(null);
  const [showResetDialog, setShowResetDialog] = useState(false);

  // Reset workflow state on mount (unless continuing)
  useEffect(() => {
    const continueParam = searchParams.get('continue');
    const hasData = context !== null || research !== null || proposal !== null;

    // Se NÃO está continuando explicitamente E tem dados antigos, mostrar dialog
    if (!continueParam && hasData) {
      setShowResetDialog(true);
    }

    // Se parâmetro continue=false foi passado, resetar imediatamente
    if (continueParam === 'false') {
      resetWorkflow();
      setShowResetDialog(false);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [searchParams]); // Removido resetWorkflow, context, etc pra evitar loops

  // Verifica se um step foi realmente completado baseado nos dados
  const isStepCompleted = (step: 1 | 2 | 4 | 5 | 6): boolean => {
    switch (step) {
      case 1:
        return context !== null;
      case 2:
        return research !== null;
      case 4:
        return proposal !== null && proposal.allApproved === true;
      case 5:
        return storyboard !== null;
      case 6:
        return upload !== null;
      default:
        return false;
    }
  };

  const getStepStatus = (step: 1 | 2 | 4 | 5 | 6) => {
    // Primeiro verifica se o step foi completado com dados reais
    if (isStepCompleted(step) && step < currentStep) return "completed";
    if (step === currentStep) return "current";
    if (canNavigateToStep(step)) return "available";
    return "locked";
  };

  const handleStepClick = (step: 1 | 2 | 4 | 5 | 6, path: string) => {
    const status = getStepStatus(step);
    if (status !== "locked") {
      router.push(path);
    }
  };

  return (
    <div className="w-full">
      {/* Reset Dialog */}
      {showResetDialog && (
        <>
          <div className="fixed inset-0 bg-black/70 backdrop-blur-sm z-50" onClick={() => setShowResetDialog(false)} />
          <div className="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md p-6 bg-layer-2 border border-warning/30 rounded-2xl shadow-2xl">
            <div className="flex items-start gap-4 mb-6">
              <div className="w-12 h-12 rounded-xl bg-warning/10 border border-warning/20 flex items-center justify-center flex-shrink-0">
                <AlertCircle className="w-6 h-6 text-warning" />
              </div>
              <div>
                <h3 className="text-lg font-semibold text-white mb-2">Workflow em Andamento</h3>
                <p className="text-sm text-muted">
                  Detectamos um workflow anterior. Deseja continuar de onde parou ou iniciar um novo?
                </p>
              </div>
            </div>
            <div className="flex gap-3">
              <button
                onClick={() => {
                  setShowResetDialog(false);
                }}
                className="flex-1 px-4 py-2.5 rounded-lg bg-layer-1 border border-default hover:bg-surface-elevated text-text-primary transition-all"
              >
                Continuar
              </button>
              <button
                onClick={() => {
                  resetWorkflow();
                  setShowResetDialog(false);
                  router.push('/workflow?continue=false');
                }}
                className="flex-1 px-4 py-2.5 rounded-lg bg-warning/10 border border-warning/30 hover:bg-warning/20 text-warning transition-all"
              >
                Iniciar Novo
              </button>
            </div>
          </div>
        </>
      )}

      {/* Header */}
      <div className="mb-12">
        <h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
          WorkFlow de Produção
        </h1>
        <p className="text-muted">Siga as etapas para criar seu vídeo automaticamente</p>
      </div>

      {/* Timeline Horizontal */}
      <div className="relative mb-12">
        {/* Progress Bar */}
        <div className="absolute top-[52px] left-0 right-0 h-1 bg-layer-2 rounded-full">
          <div
            className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500"
            style={{
              width: `${(workflowSteps.findIndex(s => s.step === currentStep) / (workflowSteps.length - 1)) * 100}%`
            }}
          />
        </div>

        {/* Steps */}
        <div className="grid grid-cols-6 gap-4">
          {workflowSteps.map((stepData, index) => {
            const status = getStepStatus(stepData.step);
            const isCompleted = status === "completed";
            const isCurrent = status === "current";
            const isLocked = status === "locked";
            const Icon = stepData.icon;

            return (
              <div key={index} className="relative">
                <button
                  onClick={() => handleStepClick(stepData.step, stepData.path)}
                  onMouseEnter={() => setHoveredStep(index)}
                  onMouseLeave={() => setHoveredStep(null)}
                  disabled={isLocked}
                  className={`
                    relative w-full flex flex-col items-center cursor-pointer disabled:cursor-not-allowed
                    transition-all duration-300
                    ${hoveredStep === index && !isLocked ? 'scale-110' : ''}
                  `}
                >
                  {/* Circle */}
                  <div
                    className={`
                      relative z-10 w-[104px] h-[104px] rounded-full flex items-center justify-center
                      transition-all duration-300 border-4
                      ${isCompleted
                        ? 'bg-gradient-to-br from-green-500 to-emerald-500 border-green-400 shadow-lg shadow-green-500/50'
                        : isCurrent
                        ? `bg-gradient-to-br ${stepData.color} border-white shadow-lg shadow-purple-500/50 animate-pulse`
                        : isLocked
                        ? 'bg-layer-2 border-subtle'
                        : 'bg-layer-1 border-default hover:border-active'
                      }
                    `}
                  >
                    {isCompleted ? (
                      <CheckCircle2 className="w-12 h-12 text-white" />
                    ) : isCurrent ? (
                      <Icon className="w-12 h-12 text-white" />
                    ) : isLocked ? (
                      <Lock className="w-12 h-12 text-disabled" />
                    ) : (
                      <Icon className="w-12 h-12 text-muted" />
                    )}
                  </div>

                  {/* Label */}
                  <div className="mt-4 text-center">
                    <h3
                      className={`
                        text-sm font-bold mb-1 transition-colors
                        ${isCompleted
                          ? 'text-green-400'
                          : isCurrent
                          ? 'text-white'
                          : isLocked
                          ? 'text-disabled'
                          : 'text-muted'
                        }
                      `}
                    >
                      {stepData.title}
                    </h3>
                    <p className="text-xs text-muted max-w-[120px]">
                      {stepData.description}
                    </p>
                  </div>

                  {/* Step Number Badge */}
                  <div
                    className={`
                      absolute -top-2 -right-2 z-20 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                      ${isCompleted
                        ? 'bg-green-500 text-white'
                        : isCurrent
                        ? 'bg-indigo-500 text-white'
                        : 'bg-layer-2 text-muted'
                      }
                    `}
                  >
                    {index + 1}
                  </div>
                </button>
              </div>
            );
          })}
        </div>
      </div>

      {/* Current Step Info */}
      <div className="bg-gradient-to-br from-indigo-900/20 to-purple-900/20 border border-indigo-500/30 rounded-xl p-6">
        <div className="flex items-start gap-4">
          <div className="p-3 bg-indigo-500/10 rounded-lg">
            {workflowSteps.find(s => s.step === currentStep)?.icon ? (
              <div className="w-8 h-8 text-indigo-400">
                {(() => {
                  const StepIcon = workflowSteps.find(s => s.step === currentStep)?.icon;
                  return StepIcon ? <StepIcon className="w-full h-full" /> : null;
                })()}
              </div>
            ) : null}
          </div>
          <div className="flex-1">
            <h3 className="text-lg font-bold text-white mb-2">
              Etapa Atual: {workflowSteps.find(s => s.step === currentStep)?.title}
            </h3>
            <p className="text-sm text-muted mb-4">
              {workflowSteps.find(s => s.step === currentStep)?.description}
            </p>
            <button
              onClick={() => {
                const currentStepData = workflowSteps.find(s => s.step === currentStep);
                if (currentStepData) {
                  router.push(currentStepData.path);
                }
              }}
              className="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium rounded-lg transition-colors inline-flex items-center gap-2"
            >
              Continuar
              <ArrowRight className="w-4 h-4" />
            </button>
          </div>
        </div>
      </div>

      {/* Instructions */}
      <div className="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center mb-3">
            <CheckCircle2 className="w-6 h-6 text-green-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Completadas</h4>
          <p className="text-sm text-muted">Marcadas em verde. Você pode revisitar a qualquer momento.</p>
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-indigo-500/10 rounded-lg flex items-center justify-center mb-3">
            <Circle className="w-6 h-6 text-indigo-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapa Atual</h4>
          <p className="text-sm text-muted">Destacada e pulsando. Clique para continuar o workflow.</p>
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-layer-3/50 rounded-lg flex items-center justify-center mb-3">
            <Lock className="w-6 h-6 text-muted" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Bloqueadas</h4>
          <p className="text-sm text-muted">Complete as etapas anteriores para desbloquear.</p>
        </div>
      </div>
    </div>
  );
}

export default function WorkflowPage() {
  return (
    <Suspense fallback={
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <div className="w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4" />
          <p className="text-foreground-muted">Carregando workflow...</p>
        </div>
      </div>
    }>
      <WorkflowContent />
    </Suspense>
  );
}

```

---
#### `components/AIModelSelector.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Select from "@/components/ui/Select";
import { AIProvider, AIModelOption, APIKeyStatus } from "@/types";
import { getModelsForProvider, getProviderName } from "@/lib/ai";
import { AlertCircle } from "lucide-react";

interface AIModelSelectorProps {
  selectedProvider: AIProvider | null;
  selectedModel: string | null;
  onProviderChange: (provider: AIProvider) => void;
  onModelChange: (model: string) => void;
  apiKeyStatus?: APIKeyStatus;
  label?: string;
  compact?: boolean;
}

export default function AIModelSelector({
  selectedProvider,
  selectedModel,
  onProviderChange,
  onModelChange,
  apiKeyStatus,
  label = "AI Model",
  compact = false,
}: AIModelSelectorProps) {
  const [models, setModels] = useState<AIModelOption[]>([]);

  const providers: { value: AIProvider; label: string; available: boolean }[] = [
    {
      value: "openai",
      label: getProviderName("openai"),
      available: apiKeyStatus?.openai ?? true,
    },
    {
      value: "google",
      label: getProviderName("google"),
      available: apiKeyStatus?.google ?? true,
    },
    {
      value: "anthropic",
      label: getProviderName("anthropic"),
      available: apiKeyStatus?.anthropic ?? true,
    },
  ];

  useEffect(() => {
    if (selectedProvider) {
      const providerModels = getModelsForProvider(selectedProvider);
      setModels(providerModels);

      // Auto-select first model if none selected
      if (!selectedModel && providerModels.length > 0) {
        onModelChange(providerModels[0].id);
      }
    }
  }, [selectedProvider, selectedModel, onModelChange]);

  const availableProviders = providers.filter((p) => p.available);
  const hasAnyProvider = availableProviders.length > 0;

  if (!hasAnyProvider) {
    return (
      <div className="flex items-center gap-2 text-yellow-500 text-sm">
        <AlertCircle className="w-4 h-4" />
        <span>No AI provider configured. Please add API keys.</span>
      </div>
    );
  }

  if (compact) {
    return (
      <div className="flex items-center gap-2">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.label,
            disabled: !p.available,
          }))}
          placeholder="Provider"
          className="w-36"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Model"
            className="w-40"
          />
        )}
      </div>
    );
  }

  return (
    <div className="space-y-3">
      {label && (
        <label className="block text-sm font-medium text-gray-300">
          {label}
        </label>
      )}
      <div className="flex flex-wrap gap-3">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.available ? p.label : `${p.label} (not configured)`,
            disabled: !p.available,
          }))}
          placeholder="Select provider..."
          className="w-48"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Select model..."
            className="w-48"
          />
        )}
      </div>
      {selectedProvider && !providers.find((p) => p.value === selectedProvider)?.available && (
        <p className="text-sm text-yellow-500 flex items-center gap-1">
          <AlertCircle className="w-4 h-4" />
          This provider is not configured. Add the API key in settings.
        </p>
      )}
    </div>
  );
}

```

---
#### `components/ApiKeysModal.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Modal from "@/components/ui/Modal";
import Button from "@/components/ui/Button";
import Input from "@/components/ui/Input";
import Badge from "@/components/ui/Badge";
import { useUIStore } from "@/lib/store";
import { useAPIKeysStore, StoredAPIKeys } from "@/lib/api-keys-store";
import { APIKeyStatus } from "@/types";
import { checkAPIKeys } from "@/lib/api-keys";
import ModelsExplorer from "@/components/ModelsExplorer";
import {
  Check,
  X,
  Loader2,
  ExternalLink,
  Eye,
  EyeOff,
  Save,
  TestTube,
  Trash2,
  Key,
  Cpu,
  ChevronRight,
} from "lucide-react";

interface KeyConfig {
  key: keyof StoredAPIKeys;
  name: string;
  envVar: string;
  docsUrl: string;
  placeholder: string;
  required: boolean;
  dependsOn?: keyof StoredAPIKeys;
}

const API_KEYS_CONFIG: KeyConfig[] = [
  {
    key: "youtube_api_key",
    name: "YouTube Data API Key",
    envVar: "YOUTUBE_API_KEY",
    docsUrl: "https://console.cloud.google.com/apis/credentials",
    placeholder: "AIza...",
    required: true,
  },
  {
    key: "youtube_channel_id",
    name: "YouTube Channel ID",
    envVar: "YOUTUBE_CHANNEL_ID",
    docsUrl: "https://www.youtube.com/account_advanced",
    placeholder: "UC...",
    required: true,
    dependsOn: "youtube_api_key",
  },
  {
    key: "openai_api_key",
    name: "OpenAI",
    envVar: "OPENAI_API_KEY",
    docsUrl: "https://platform.openai.com/api-keys",
    placeholder: "sk-...",
    required: false,
  },
  {
    key: "google_api_key",
    name: "Google Gemini",
    envVar: "GOOGLE_GENERATIVE_AI_API_KEY",
    docsUrl: "https://aistudio.google.com/apikey",
    placeholder: "AIza...",
    required: false,
  },
  {
    key: "anthropic_api_key",
    name: "Anthropic Claude",
    envVar: "ANTHROPIC_API_KEY",
    docsUrl: "https://console.anthropic.com/settings/keys",
    placeholder: "sk-ant-...",
    required: false,
  },
  {
    key: "pexels_api_key",
    name: "Pexels",
    envVar: "PEXELS_API_KEY",
    docsUrl: "https://www.pexels.com/api/",
    placeholder: "...",
    required: false,
  },
  {
    key: "pixabay_api_key",
    name: "Pixabay",
    envVar: "PIXABAY_API_KEY",
    docsUrl: "https://pixabay.com/api/docs/",
    placeholder: "...",
    required: false,
  },
  {
    key: "unsplash_api_key",
    name: "Unsplash",
    envVar: "UNSPLASH_ACCESS_KEY",
    docsUrl: "https://unsplash.com/developers",
    placeholder: "...",
    required: false,
  },
  {
    key: "json2video_api_key",
    name: "JSON2Video",
    envVar: "JSON2VIDEO_API_KEY",
    docsUrl: "https://json2video.com/",
    placeholder: "...",
    required: false,
  },
  {
    key: "elevenlabs_api_key",
    name: "ElevenLabs",
    envVar: "ELEVENLABS_API_KEY",
    docsUrl: "https://elevenlabs.io/",
    placeholder: "...",
    required: false,
  },
  {
    key: "tavily_api_key",
    name: "Tavily (Pesquisa)",
    envVar: "TAVILY_API_KEY",
    docsUrl: "https://tavily.com/",
    placeholder: "tvly-...",
    required: false,
  },
  {
    key: "replicate_api_key",
    name: "Replicate",
    envVar: "REPLICATE_API_TOKEN",
    docsUrl: "https://replicate.com/account/api-tokens",
    placeholder: "r8_...",
    required: false,
  },
  {
    key: "stability_api_key",
    name: "Stability AI",
    envVar: "STABILITY_API_KEY",
    docsUrl: "https://platform.stability.ai/",
    placeholder: "sk-...",
    required: false,
  },
];

export default function ApiKeysModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const { keys, testedKeys, setKey, markKeyTested, clearKey, clearAllKeys } =
    useAPIKeysStore();

  const [serverStatus, setServerStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingServer] = useState(true);
  const [testingKey, setTestingKey] = useState<string | null>(null);
  const [testingAll, setTestingAll] = useState(false);
  const [showPassword, setShowPassword] = useState<Record<string, boolean>>({});
  const [testResults, setTestResults] = useState<Record<string, { success: boolean; message: string }>>({});

  // Carregar status das chaves do servidor
  useEffect(() => {
    if (isApiKeyModalOpen) {
      setIsLoadingServer(true);
      checkAPIKeys().then((status) => {
        setServerStatus(status);
        setIsLoadingServer(false);
      });
    }
  }, [isApiKeyModalOpen]);

  const testSingleKey = async (config: KeyConfig) => {
    const value = keys[config.key];
    if (!value) {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Chave não preenchida" },
      }));
      return;
    }

    setTestingKey(config.key);
    try {
      const response = await fetch("/api/config/test-key", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          keyType: config.key,
          keyValue: value,
          channelId: config.key === "youtube_api_key" ? keys.youtube_channel_id : undefined,
        }),
      });

      const result = await response.json();
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: result.success, message: result.message },
      }));
      markKeyTested(config.key, result.success);
    } catch {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Erro ao testar" },
      }));
      markKeyTested(config.key, false);
    } finally {
      setTestingKey(null);
    }
  };

  const testAllKeys = async () => {
    setTestingAll(true);
    const keysToTest = API_KEYS_CONFIG.filter((config) => keys[config.key]);

    for (const config of keysToTest) {
      await testSingleKey(config);
    }
    setTestingAll(false);
  };

  const toggleShowPassword = (key: string) => {
    setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));
  };

  const getKeyStatus = (config: KeyConfig) => {
    const hasLocalKey = !!keys[config.key];
    const localKeyTested = testedKeys[config.key];
    const serverKey = config.key.replace("_api_key", "").replace("_", "") as keyof APIKeyStatus;
    const hasServerKey = serverStatus?.[serverKey] ?? false;

    if (hasLocalKey && localKeyTested) {
      return "valid";
    } else if (hasLocalKey) {
      return "pending";
    } else if (hasServerKey) {
      return "server";
    }
    return "missing";
  };

  const configuredCount = API_KEYS_CONFIG.filter((config) => {
    const status = getKeyStatus(config);
    return status === "valid" || status === "server";
  }).length;

  const [activeTab, setActiveTab] = useState<'keys' | 'models'>('keys');
  const [selectedProvider, setSelectedProvider] = useState<string | null>(null);

  // Provedores de IA para explorar modelos
  const AI_PROVIDERS = [
    { key: 'openai', name: 'OpenAI', icon: '🤖', apiKeyField: 'openai_api_key' },
    { key: 'anthropic', name: 'Anthropic', icon: '🔮', apiKeyField: 'anthropic_api_key' },
    { key: 'gemini', name: 'Google Gemini', icon: '🧠', apiKeyField: 'google_api_key' },
    { key: 'elevenlabs', name: 'ElevenLabs', icon: '🎤', apiKeyField: 'elevenlabs_api_key' },
    { key: 'pexels', name: 'Pexels', icon: '📷', apiKeyField: 'pexels_api_key' },
    { key: 'pixabay', name: 'Pixabay', icon: '🖼️', apiKeyField: 'pixabay_api_key' },
    { key: 'youtube', name: 'YouTube', icon: '📺', apiKeyField: 'youtube_api_key' },
    { key: 'tavily', name: 'Tavily', icon: '🔍', apiKeyField: 'tavily_api_key' },
    { key: 'json2video', name: 'JSON2Video', icon: '🎬', apiKeyField: 'json2video_api_key' },
  ];

  const isProviderConnected = (apiKeyField: string) => {
    const hasLocalKey = !!keys[apiKeyField as keyof StoredAPIKeys];
    const serverKey = apiKeyField.replace("_api_key", "").replace("_", "") as keyof APIKeyStatus;
    const hasServerKey = serverStatus?.[serverKey] ?? false;
    return hasLocalKey || hasServerKey;
  };

  return (
    <Modal
      isOpen={isApiKeyModalOpen}
      onClose={closeApiKeyModal}
      title="Configurar API Keys"
      size="xl"
    >
      <div className="space-y-6">
        {/* Tabs */}
        <div className="flex border-b border-subtle">
          <button
            onClick={() => { setActiveTab('keys'); setSelectedProvider(null); }}
            className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${
              activeTab === 'keys'
                ? 'text-indigo-400 border-b-2 border-indigo-400'
                : 'text-muted hover:text-gray-200'
            }`}
          >
            <Key className="w-4 h-4" />
            API Keys
          </button>
          <button
            onClick={() => setActiveTab('models')}
            className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${
              activeTab === 'models'
                ? 'text-indigo-400 border-b-2 border-indigo-400'
                : 'text-muted hover:text-gray-200'
            }`}
          >
            <Cpu className="w-4 h-4" />
            Modelos Disponíveis
          </button>
        </div>

        {/* Tab: Modelos */}
        {activeTab === 'models' && (
          <div className="space-y-4">
            {!selectedProvider ? (
              <>
                <p className="text-sm text-muted">
                  Selecione um provedor para explorar os modelos disponíveis:
                </p>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                  {AI_PROVIDERS.map(provider => {
                    const connected = isProviderConnected(provider.apiKeyField);
                    return (
                      <button
                        key={provider.key}
                        onClick={() => setSelectedProvider(provider.key)}
                        className={`p-4 rounded-lg border transition-all flex items-center gap-3 hover:bg-layer-2/50 ${
                          connected
                            ? 'border-green-500/30 bg-green-900/10'
                            : 'border-subtle bg-layer-2/30'
                        }`}
                      >
                        <span className="text-2xl">{provider.icon}</span>
                        <div className="text-left flex-1">
                          <p className="font-medium text-white text-sm">{provider.name}</p>
                          <p className={`text-xs ${connected ? 'text-green-400' : 'text-muted'}`}>
                            {connected ? 'Conectado' : 'Não configurado'}
                          </p>
                        </div>
                        <ChevronRight className="w-4 h-4 text-muted" />
                      </button>
                    );
                  })}
                </div>
              </>
            ) : (
              <>
                <button
                  onClick={() => setSelectedProvider(null)}
                  className="text-sm text-indigo-400 hover:text-indigo-300 flex items-center gap-1"
                >
                  ← Voltar para lista
                </button>
                <ModelsExplorer
                  provider={selectedProvider}
                  apiKey={keys[AI_PROVIDERS.find(p => p.key === selectedProvider)?.apiKeyField as keyof StoredAPIKeys]}
                  isConnected={isProviderConnected(AI_PROVIDERS.find(p => p.key === selectedProvider)?.apiKeyField || '')}
                />
              </>
            )}
          </div>
        )}

        {/* Tab: API Keys */}
        {activeTab === 'keys' && (
          <>
        {/* Resumo */}
        <div className="flex items-center justify-between p-4 bg-layer-2/50 rounded-lg">
          <div>
            <p className="text-sm text-muted">APIs Configuradas</p>
            <p className="text-2xl font-bold text-white">
              {configuredCount} / {API_KEYS_CONFIG.length}
            </p>
          </div>
          <div className="flex gap-2">
            <Button
              variant="outline"
              size="sm"
              onClick={testAllKeys}
              isLoading={testingAll}
              leftIcon={<TestTube className="w-4 h-4" />}
            >
              Testar Todas
            </Button>
            <Button
              variant="ghost"
              size="sm"
              onClick={clearAllKeys}
              leftIcon={<Trash2 className="w-4 h-4" />}
            >
              Limpar
            </Button>
          </div>
        </div>

        {/* Instruções */}
        <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
          <p className="text-sm text-blue-300">
            <strong>Como funciona:</strong> Insira suas API keys abaixo. Elas serão salvas
            na sua sessão do navegador (sessionStorage) e usadas enquanto você estiver
            usando o sistema. As chaves do servidor (.env) têm prioridade.
          </p>
        </div>

        {/* Lista de APIs */}
        <div className="space-y-3 max-h-[50vh] overflow-auto pr-2">
          {API_KEYS_CONFIG.map((config) => {
            const status = getKeyStatus(config);
            const isTestingThis = testingKey === config.key;
            const testResult = testResults[config.key];

            return (
              <div
                key={config.key}
                className="p-4 bg-layer-2/30 rounded-lg border border-subtle"
              >
                <div className="flex items-center justify-between mb-2">
                  <div className="flex items-center gap-2">
                    <span className="font-medium text-white">{config.name}</span>
                    {config.required && (
                      <Badge variant="warning" size="sm">
                        Requerido
                      </Badge>
                    )}
                    {status === "valid" && (
                      <Badge variant="success" size="sm">
                        <Check className="w-3 h-3 mr-1" />
                        Validado
                      </Badge>
                    )}
                    {status === "server" && (
                      <Badge variant="info" size="sm">
                        Servidor
                      </Badge>
                    )}
                    {status === "pending" && (
                      <Badge variant="warning" size="sm">
                        Não testada
                      </Badge>
                    )}
                  </div>
                  <a
                    href={config.docsUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-sm text-primary-400 hover:text-primary-300 flex items-center gap-1"
                  >
                    Obter
                    <ExternalLink className="w-3 h-3" />
                  </a>
                </div>

                <div className="flex gap-2">
                  <div className="flex-1 relative">
                    <Input
                      type={showPassword[config.key] ? "text" : "password"}
                      value={keys[config.key]}
                      onChange={(e) => setKey(config.key, e.target.value)}
                      placeholder={config.placeholder}
                      className="pr-10 font-mono text-sm"
                    />
                    <button
                      type="button"
                      onClick={() => toggleShowPassword(config.key)}
                      className="absolute right-3 top-1/2 -translate-y-1/2 text-muted hover:text-gray-300"
                    >
                      {showPassword[config.key] ? (
                        <EyeOff className="w-4 h-4" />
                      ) : (
                        <Eye className="w-4 h-4" />
                      )}
                    </button>
                  </div>
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => testSingleKey(config)}
                    isLoading={isTestingThis}
                    disabled={!keys[config.key] || testingAll}
                    className="w-24"
                  >
                    {isTestingThis ? (
                      <Loader2 className="w-4 h-4 animate-spin" />
                    ) : (
                      <>
                        <TestTube className="w-4 h-4 mr-1" />
                        Testar
                      </>
                    )}
                  </Button>
                  {keys[config.key] && (
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => clearKey(config.key)}
                      className="px-2"
                    >
                      <X className="w-4 h-4" />
                    </Button>
                  )}
                </div>

                {/* Resultado do teste */}
                {testResult && (
                  <div
                    className={`mt-2 text-sm flex items-center gap-1 ${
                      testResult.success ? "text-green-400" : "text-red-400"
                    }`}
                  >
                    {testResult.success ? (
                      <Check className="w-4 h-4" />
                    ) : (
                      <X className="w-4 h-4" />
                    )}
                    {testResult.message}
                  </div>
                )}

                {/* Info do env var */}
                <p className="text-xs text-muted mt-2 font-mono">
                  ENV: {config.envVar}
                </p>
              </div>
            );
          })}
        </div>

        {/* Requisitos Mínimos */}
        <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
          <p className="text-sm text-yellow-300">
            <strong>Requisitos mínimos para funcionar:</strong>
          </p>
          <ul className="text-sm text-yellow-300/80 mt-2 list-disc list-inside space-y-1">
            <li>YouTube Data API Key + Channel ID (para sincronização)</li>
            <li>Pelo menos 1 provedor de AI (OpenAI, Google, ou Anthropic)</li>
            <li>Pelo menos 1 provedor de mídia (Pexels, Pixabay, ou Unsplash)</li>
          </ul>
        </div>
          </>
        )}

        {/* Botões de ação */}
        <div className="flex justify-end gap-2 pt-4 border-t border-subtle">
          <Button variant="ghost" onClick={closeApiKeyModal}>
            Fechar
          </Button>
          <Button
            variant="primary"
            onClick={closeApiKeyModal}
            leftIcon={<Save className="w-4 h-4" />}
          >
            Salvar e Fechar
          </Button>
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/AssetCard.tsx`

```
"use client";

import { useState } from "react";
import Card from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { AssetStatus, AIProvider, APIKeyStatus } from "@/types";
import { Check, RefreshCw, Pencil, Loader2, AlertCircle } from "lucide-react";

interface AssetCardProps {
  title: string;
  status: AssetStatus;
  children: React.ReactNode;
  isEditing?: boolean;
  onEdit?: () => void;
  onRegenerate?: (provider: AIProvider, model: string) => void;
  onApprove?: () => void;
  onCancelEdit?: () => void;
  onSaveEdit?: () => void;
  editContent?: React.ReactNode;
  apiKeyStatus?: APIKeyStatus;
  error?: string;
  isGenerating?: boolean;
}

export default function AssetCard({
  title,
  status,
  children,
  isEditing = false,
  onEdit,
  onRegenerate,
  onApprove,
  onCancelEdit,
  onSaveEdit,
  editContent,
  apiKeyStatus,
  error,
  isGenerating = false,
}: AssetCardProps) {
  const [showRegenerate, setShowRegenerate] = useState(false);
  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  const getStatusBadge = () => {
    switch (status) {
      case "pending":
        return <Badge variant="default">Pendente</Badge>;
      case "generating":
        return <Badge variant="info">Gerando...</Badge>;
      case "ready":
        return <Badge variant="warning">Aguardando Aprovação</Badge>;
      case "approved":
        return <Badge variant="success">Aprovado</Badge>;
      case "error":
        return <Badge variant="error">Erro</Badge>;
      default:
        return null;
    }
  };

  const handleRegenerate = () => {
    if (selectedProvider && selectedModel && onRegenerate) {
      onRegenerate(selectedProvider, selectedModel);
      setShowRegenerate(false);
    }
  };

  return (
    <Card className="relative">
      {/* Header */}
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-3">
          <h3 className="text-lg font-semibold text-white">{title}</h3>
          {getStatusBadge()}
        </div>
      </div>

      {/* Error message */}
      {error && (
        <div className="mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span className="text-sm">{error}</span>
        </div>
      )}

      {/* Content */}
      <div className="mb-4">
        {isGenerating ? (
          <div className="flex items-center justify-center py-8">
            <Loader2 className="w-8 h-8 animate-spin text-primary-500" />
          </div>
        ) : isEditing ? (
          editContent
        ) : (
          children
        )}
      </div>

      {/* Regenerate AI Selector */}
      {showRegenerate && (
        <div className="mb-4 p-4 bg-layer-2/50 rounded-lg space-y-3">
          <AIModelSelector
            selectedProvider={selectedProvider}
            selectedModel={selectedModel}
            onProviderChange={setSelectedProvider}
            onModelChange={setSelectedModel}
            apiKeyStatus={apiKeyStatus}
            label="Selecione o modelo para regenerar"
          />
          <div className="flex gap-2">
            <Button
              size="sm"
              variant="primary"
              onClick={handleRegenerate}
              disabled={!selectedProvider || !selectedModel}
            >
              Regenerar
            </Button>
            <Button
              size="sm"
              variant="ghost"
              onClick={() => setShowRegenerate(false)}
            >
              Cancelar
            </Button>
          </div>
        </div>
      )}

      {/* Actions */}
      <div className="flex flex-wrap gap-2">
        {isEditing ? (
          <>
            <Button size="sm" variant="success" onClick={onSaveEdit}>
              Salvar
            </Button>
            <Button size="sm" variant="ghost" onClick={onCancelEdit}>
              Cancelar
            </Button>
          </>
        ) : (
          <>
            {status !== "approved" && status !== "generating" && onEdit && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<Pencil className="w-4 h-4" />}
                onClick={onEdit}
              >
                Editar
              </Button>
            )}
            {status !== "approved" && status !== "generating" && onRegenerate && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<RefreshCw className="w-4 h-4" />}
                onClick={() => setShowRegenerate(true)}
              >
                Regerar
              </Button>
            )}
            {status === "ready" && onApprove && (
              <Button
                size="sm"
                variant="success"
                leftIcon={<Check className="w-4 h-4" />}
                onClick={onApprove}
              >
                Aprovar
              </Button>
            )}
            {status === "approved" && (
              <span className="flex items-center gap-1 text-green-400 text-sm">
                <Check className="w-4 h-4" />
                Aprovado
              </span>
            )}
          </>
        )}
      </div>
    </Card>
  );
}

```

---
#### `components/ConnectApisModal.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { X, Check, AlertCircle, RefreshCw, Key, Save, Server, Monitor, Trash2 } from 'lucide-react';
import { useAPIKeysStore, StoredAPIKeys } from '@/lib/api-keys-store';
import { useUIStore } from '@/lib/store';

// Mapeamento EXATO com lib/api-keys-store.ts
const KEY_MAP: Record<string, keyof StoredAPIKeys> = {
  openai: "openai_api_key",
  gemini: "google_api_key",
  anthropic: "anthropic_api_key",
  youtube: "youtube_api_key",
  pexels: "pexels_api_key",
  pixabay: "pixabay_api_key",
  elevenlabs: "elevenlabs_api_key",
  tavily: "tavily_api_key",
  json2video: "json2video_api_key"
};

const API_NAMES: Record<string, string> = {
  openai: "OpenAI (GPT-4)",
  gemini: "Google Gemini",
  anthropic: "Anthropic Claude",
  youtube: "YouTube Data API",
  pexels: "Pexels Media",
  pixabay: "Pixabay Media",
  elevenlabs: "ElevenLabs Voice",
  tavily: "Tavily Search",
  json2video: "JSON2Video"
};

export default function ConnectApisModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const isOpen = isApiKeyModalOpen;
  const onClose = closeApiKeyModal;
  const [loading, setLoading] = useState(true);
  const [serverKeys, setServerKeys] = useState<Record<string, boolean>>({});
  const [showEdit, setShowEdit] = useState<string | null>(null);
  const [manualInput, setManualInput] = useState("");
  const [mounted, setMounted] = useState(false);
  
  const { keys: localKeys, setKey, clearKey } = useAPIKeysStore();

  useEffect(() => {
    setMounted(true);
  }, []);

  useEffect(() => {
    if (isOpen) {
      checkServerKeys();
    }
  }, [isOpen]);

  const checkServerKeys = async () => {
    setLoading(true);
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerKeys(data);
    } catch (e) {
      console.error(e);
    } finally {
      setLoading(false);
    }
  };

  const handleSaveKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      setKey(storeKeyName, manualInput);
      setShowEdit(null);
      setManualInput("");
    }
  };

  const handleClearKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      clearKey(storeKeyName);
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-[99999] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-200">
      <div className="w-full max-w-3xl bg-[#09090b] border border-subtle rounded-xl text-white shadow-2xl flex flex-col max-h-[85vh]">
        
        <div className="flex items-center justify-between p-6 border-b border-subtle bg-layer-1/50 rounded-t-xl">
          <div>
            <h2 className="text-xl font-bold flex items-center gap-2">
              <Key className="w-5 h-5 text-indigo-500" />
              Central de Conexões
            </h2>
            <p className="text-muted text-sm">Gerencie chaves do Servidor (.env) ou Locais (Navegador).</p>
          </div>
          <button onClick={onClose} className="p-2 hover:bg-layer-2 rounded-full transition-colors cursor-pointer">
            <X className="w-6 h-6 text-muted hover:text-white" />
          </button>
        </div>

        <div className="p-6 overflow-y-auto custom-scrollbar space-y-4">
          {loading ? (
             <div className="flex flex-col items-center justify-center py-12 text-zinc-500 gap-3">
               <RefreshCw className="animate-spin w-8 h-8 text-indigo-500" />
               <p>Verificando status...</p>
             </div>
          ) : (
            Object.keys(API_NAMES).map((key) => {
              const storeKeyName = KEY_MAP[key];
              const isServerConnected = serverKeys[key];
              const hasLocalKey = mounted && !!localKeys[storeKeyName];
              const isLocalConnected = hasLocalKey;
              const isConnected = isServerConnected || isLocalConnected;
              const isEditing = showEdit === key;

              return (
                <div key={key} className={`border rounded-lg transition-all ${isConnected ? 'border-green-900/30 bg-green-900/5' : 'border-subtle bg-layer-1/30'}`}>
                  <div className="flex items-center justify-between p-4">
                    <div className="flex items-center gap-3">
                      <div className={`p-2 rounded-lg ${isConnected ? 'bg-green-500/10' : 'bg-layer-2'}`}>
                        {isConnected ? <Check className="w-5 h-5 text-green-500" /> : <AlertCircle className="w-5 h-5 text-zinc-500" />}
                      </div>
                      <div>
                        <h3 className="font-semibold text-zinc-200">{API_NAMES[key]}</h3>
                        <div className="flex items-center gap-2 mt-1">
                          {isServerConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-layer-2 px-2 py-0.5 rounded text-zinc-300 border border-subtle">
                              <Server className="w-3 h-3" /> Servidor
                            </span>
                          )}
                          {isLocalConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-indigo-900/30 px-2 py-0.5 rounded text-indigo-300 border border-indigo-500/20">
                              <Monitor className="w-3 h-3" /> Local
                            </span>
                          )}
                          {!isConnected && <span className="text-[10px] text-red-400 font-medium">Chave ausente</span>}
                        </div>
                      </div>
                    </div>

                    <div className="flex items-center gap-2">
                      {isLocalConnected && !isServerConnected && (
                         <button onClick={() => handleClearKey(key)} className="p-2 text-zinc-500 hover:text-red-400 transition-colors" title="Remover">
                           <Trash2 className="w-4 h-4" />
                         </button>
                      )}
                      {!isServerConnected && (
                        <button
                          onClick={() => {
                            setShowEdit(isEditing ? null : key);
                            setManualInput(localKeys[storeKeyName] || "");
                          }}
                          className={`px-3 py-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer border ${isEditing ? 'bg-zinc-700 border-zinc-600 text-white' : 'bg-layer-1 border-subtle text-zinc-300 hover:bg-layer-2'}`}
                        >
                          {isEditing ? 'Cancelar' : (isLocalConnected ? 'Editar' : 'Adicionar')}
                        </button>
                      )}
                    </div>
                  </div>

                  {isEditing && (
                    <div className="p-4 border-t border-subtle bg-black/20 animate-in slide-in-from-top-2 duration-200">
                      <label className="text-xs text-muted mb-1.5 block">Cole sua chave API aqui:</label>
                      <div className="flex gap-2">
                        <input 
                          type="password"
                          placeholder="sk-..."
                          className="flex-1 bg-zinc-950 border border-subtle rounded-md py-2 px-3 text-sm text-white focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                          value={manualInput}
                          onChange={(e) => setManualInput(e.target.value)}
                        />
                        <button 
                          onClick={() => handleSaveKey(key)}
                          disabled={!manualInput}
                          className="bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 cursor-pointer shadow-lg shadow-indigo-500/20"
                        >
                          <Save className="w-4 h-4" /> Salvar
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              );
            })
          )}
        </div>
        
        <div className="p-6 border-t border-subtle bg-layer-1/50 rounded-b-xl flex justify-between items-center">
          <button onClick={checkServerKeys} className="text-muted hover:text-white text-sm flex items-center gap-2 transition-colors cursor-pointer">
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} /> Verificar
          </button>
          <button onClick={onClose} className="px-6 py-2.5 bg-white hover:bg-zinc-200 text-black font-bold rounded-lg transition-colors cursor-pointer shadow-lg shadow-white/5">
            Concluir
          </button>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/FileDropzone.tsx`

```
"use client";

import { useCallback } from "react";
import { useDropzone } from "react-dropzone";
import { cn } from "@/lib/utils";
import { Upload, File, X } from "lucide-react";

interface FileDropzoneProps {
  onFileAccepted: (file: File) => void;
  accept?: Record<string, string[]>;
  maxSize?: number;
  currentFile?: File | null;
  onRemove?: () => void;
  label?: string;
  description?: string;
}

export default function FileDropzone({
  onFileAccepted,
  accept = { "text/csv": [".csv"] },
  maxSize = 10 * 1024 * 1024, // 10MB
  currentFile,
  onRemove,
  label = "Upload de Arquivo",
  description = "Arraste e solte ou clique para selecionar",
}: FileDropzoneProps) {
  const onDrop = useCallback(
    (acceptedFiles: File[]) => {
      if (acceptedFiles.length > 0) {
        onFileAccepted(acceptedFiles[0]);
      }
    },
    [onFileAccepted]
  );

  const { getRootProps, getInputProps, isDragActive, fileRejections } =
    useDropzone({
      onDrop,
      accept,
      maxSize,
      multiple: false,
    });

  const formatFileSize = (bytes: number) => {
    if (bytes < 1024) return bytes + " B";
    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + " KB";
    return (bytes / (1024 * 1024)).toFixed(1) + " MB";
  };

  if (currentFile) {
    return (
      <div className="border border-subtle rounded-lg p-4 bg-layer-2/50">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="p-2 bg-primary-500/10 rounded-lg">
              <File className="w-5 h-5 text-primary-500" />
            </div>
            <div>
              <p className="text-sm font-medium text-white">{currentFile.name}</p>
              <p className="text-xs text-muted">
                {formatFileSize(currentFile.size)}
              </p>
            </div>
          </div>
          {onRemove && (
            <button
              onClick={onRemove}
              className="p-1 hover:bg-gray-700 rounded-lg transition-colors"
            >
              <X className="w-4 h-4 text-muted" />
            </button>
          )}
        </div>
      </div>
    );
  }

  return (
    <div>
      <div
        {...getRootProps()}
        className={cn(
          "border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200",
          isDragActive
            ? "border-primary-500 bg-primary-500/10"
            : "border-subtle hover:border-gray-600 bg-layer-2/30"
        )}
      >
        <input {...getInputProps()} />
        <Upload
          className={cn(
            "w-10 h-10 mx-auto mb-3",
            isDragActive ? "text-primary-500" : "text-muted"
          )}
        />
        <p className="text-sm font-medium text-white mb-1">{label}</p>
        <p className="text-xs text-muted">{description}</p>
        <p className="text-xs text-muted mt-2">
          Tamanho máximo: {formatFileSize(maxSize)}
        </p>
      </div>

      {fileRejections.length > 0 && (
        <div className="mt-2 text-sm text-red-400">
          {fileRejections[0].errors.map((error) => (
            <p key={error.code}>{error.message}</p>
          ))}
        </div>
      )}
    </div>
  );
}

```

---
#### `components/GuidelinesModal.tsx`

```
"use client";

import { useState } from "react";
import Modal from "@/components/ui/Modal";
import Toggle from "@/components/ui/Toggle";
import { useGuidelinesStore, useUIStore } from "@/lib/store";
import { Diretriz, DiretrizScope } from "@/types";
import {
  Plus,
  Pencil,
  Trash2,
  Check,
  FileText,
  Image,
  Volume2,
  AlignLeft,
  Film,
  Zap,
  Settings2,
  Sparkles,
  BookOpen
} from "lucide-react";
import { cn } from "@/lib/utils";

const SCOPE_OPTIONS: { value: DiretrizScope; label: string; icon: React.ElementType; color: string; bgColor: string }[] = [
  { value: "script", label: "Roteiro", icon: FileText, color: "text-blue-400", bgColor: "bg-blue-500/10 border-blue-500/30 hover:bg-blue-500/20" },
  { value: "thumbnail", label: "Thumbnail", icon: Image, color: "text-purple-400", bgColor: "bg-purple-500/10 border-purple-500/30 hover:bg-purple-500/20" },
  { value: "audio", label: "Áudio", icon: Volume2, color: "text-green-400", bgColor: "bg-green-500/10 border-green-500/30 hover:bg-green-500/20" },
  { value: "description", label: "Descrição", icon: AlignLeft, color: "text-amber-400", bgColor: "bg-amber-500/10 border-amber-500/30 hover:bg-amber-500/20" },
  { value: "video", label: "Vídeo", icon: Film, color: "text-red-400", bgColor: "bg-red-500/10 border-red-500/30 hover:bg-red-500/20" },
];

export default function GuidelinesModal() {
  const { isGuidelinesModalOpen, closeGuidelinesModal } = useUIStore();
  const {
    guidelines,
    addDiretriz,
    updateDiretriz,
    deleteDiretriz,
    toggleDiretriz,
  } = useGuidelinesStore();

  const [isCreating, setIsCreating] = useState(false);
  const [editingId, setEditingId] = useState<string | null>(null);
  const [formData, setFormData] = useState<{
    title: string;
    description: string;
    systemPrompt: string;
    appliesTo: DiretrizScope[];
  }>({
    title: "",
    description: "",
    systemPrompt: "",
    appliesTo: [],
  });

  const resetForm = () => {
    setFormData({
      title: "",
      description: "",
      systemPrompt: "",
      appliesTo: [],
    });
    setIsCreating(false);
    setEditingId(null);
  };

  const handleCreate = () => {
    if (!formData.title || !formData.systemPrompt || formData.appliesTo.length === 0) {
      return;
    }

    addDiretriz({
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
      active: true,
    });

    resetForm();
  };

  const handleEdit = (diretriz: Diretriz) => {
    setEditingId(diretriz.id);
    setFormData({
      title: diretriz.title,
      description: diretriz.description,
      systemPrompt: diretriz.systemPrompt,
      appliesTo: diretriz.appliesTo,
    });
  };

  const handleSaveEdit = () => {
    if (!editingId || !formData.title || !formData.systemPrompt) return;

    updateDiretriz(editingId, {
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
    });

    resetForm();
  };

  const handleDelete = (id: string) => {
    if (confirm("Tem certeza que deseja excluir esta diretriz?")) {
      deleteDiretriz(id);
    }
  };

  const toggleScope = (scope: DiretrizScope) => {
    setFormData((prev) => ({
      ...prev,
      appliesTo: prev.appliesTo.includes(scope)
        ? prev.appliesTo.filter((s) => s !== scope)
        : [...prev.appliesTo, scope],
    }));
  };

  return (
    <Modal
      isOpen={isGuidelinesModalOpen}
      onClose={closeGuidelinesModal}
      title=""
      size="xl"
    >
      <div className="space-y-6">
        {/* Header Customizado */}
        <div className="flex items-center gap-4 pb-4 border-b border-subtle">
          <div className="p-3 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 rounded-xl border border-indigo-500/30">
            <Settings2 className="w-6 h-6 text-indigo-400" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white flex items-center gap-2">
              Engine de Diretrizes
              <Sparkles className="w-5 h-5 text-amber-400" />
            </h2>
            <p className="text-muted text-sm">Configure comportamentos globais do sistema de IA</p>
          </div>
        </div>

        {/* Description */}
        <div className="p-4 bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10 border border-indigo-500/20 rounded-xl">
          <div className="flex items-start gap-3">
            <BookOpen className="w-5 h-5 text-indigo-400 mt-0.5 flex-shrink-0" />
            <p className="text-sm text-secondary">
              As diretrizes são <strong className="text-indigo-400">globais e transversais</strong>. Elas são
              aplicadas automaticamente em todas as gerações de conteúdo conforme
              o escopo selecionado. As diretrizes <strong className="text-green-400">ADICIONAM</strong> contexto à análise,
              nunca substituem.
            </p>
          </div>
        </div>

        {/* Create New Button */}
        {!isCreating && !editingId && (
          <button
            onClick={() => setIsCreating(true)}
            className="w-full p-4 border-2 border-dashed border-subtle hover:border-indigo-500/50 rounded-xl transition-all group hover:bg-indigo-500/5"
          >
            <div className="flex items-center justify-center gap-2 text-muted group-hover:text-indigo-400">
              <Plus className="w-5 h-5" />
              <span className="font-medium">Criar Nova Diretriz</span>
            </div>
          </button>
        )}

        {/* Create/Edit Form */}
        {(isCreating || editingId) && (
          <div className="bg-gradient-to-br from-zinc-900 to-zinc-950 border border-indigo-500/30 rounded-xl p-5 space-y-5">
            <div className="flex items-center gap-3 pb-3 border-b border-subtle">
              <div className={`p-2 rounded-lg ${editingId ? 'bg-amber-500/10' : 'bg-green-500/10'}`}>
                {editingId ? <Pencil className="w-4 h-4 text-amber-400" /> : <Zap className="w-4 h-4 text-green-400" />}
              </div>
              <h3 className="text-lg font-semibold text-white">
                {editingId ? "Editar Diretriz" : "Nova Diretriz"}
              </h3>
            </div>

            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-secondary mb-2">Título</label>
                <input
                  value={formData.title}
                  onChange={(e) => setFormData((prev) => ({ ...prev, title: e.target.value }))}
                  placeholder="Ex: Tom de voz formal"
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-2">Descrição (opcional)</label>
                <input
                  value={formData.description}
                  onChange={(e) => setFormData((prev) => ({ ...prev, description: e.target.value }))}
                  placeholder="Breve descrição da diretriz"
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-2">System Prompt</label>
                <textarea
                  value={formData.systemPrompt}
                  onChange={(e) => setFormData((prev) => ({ ...prev, systemPrompt: e.target.value }))}
                  placeholder="Instruções que serão adicionadas ao prompt do AI..."
                  rows={4}
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all resize-none"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-3">
                  Aplicar em:
                </label>
                <div className="flex flex-wrap gap-2">
                  {SCOPE_OPTIONS.map((option) => {
                    const Icon = option.icon;
                    const isSelected = formData.appliesTo.includes(option.value);
                    return (
                      <button
                        key={option.value}
                        onClick={() => toggleScope(option.value)}
                        className={cn(
                          "px-4 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 border",
                          isSelected
                            ? `${option.bgColor} ${option.color} border-current`
                            : "bg-layer-2 text-muted border-subtle hover:bg-zinc-700"
                        )}
                      >
                        <Icon className="w-4 h-4" />
                        {option.label}
                      </button>
                    );
                  })}
                </div>
              </div>

              <div className="flex gap-3 pt-3 border-t border-subtle">
                <button
                  onClick={editingId ? handleSaveEdit : handleCreate}
                  disabled={!formData.title || !formData.systemPrompt || formData.appliesTo.length === 0}
                  className={cn(
                    "flex-1 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",
                    formData.title && formData.systemPrompt && formData.appliesTo.length > 0
                      ? "bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-500 hover:to-purple-500"
                      : "bg-layer-2 text-muted cursor-not-allowed"
                  )}
                >
                  <Check className="w-4 h-4" />
                  {editingId ? "Salvar Alterações" : "Criar Diretriz"}
                </button>
                <button
                  onClick={resetForm}
                  className="px-6 py-3 rounded-lg font-medium bg-layer-2 text-secondary hover:bg-zinc-700 transition-colors"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        )}

        {/* Existing Guidelines */}
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <h3 className="text-sm font-semibold text-muted uppercase tracking-wider flex items-center gap-2">
              <BookOpen className="w-4 h-4" />
              Diretrizes Existentes
            </h3>
            <span className="px-2 py-1 bg-layer-2 rounded-full text-xs text-muted">
              {guidelines.diretrizes.length} {guidelines.diretrizes.length === 1 ? 'diretriz' : 'diretrizes'}
            </span>
          </div>

          {guidelines.diretrizes.length === 0 ? (
            <div className="text-center py-12 bg-layer-1/50 rounded-xl border border-subtle">
              <div className="w-16 h-16 bg-layer-2 rounded-full flex items-center justify-center mx-auto mb-4">
                <FileText className="w-8 h-8 text-disabled" />
              </div>
              <p className="text-muted mb-2">Nenhuma diretriz criada ainda</p>
              <p className="text-disabled text-sm">Crie sua primeira diretriz para personalizar o comportamento da IA</p>
            </div>
          ) : (
            <div className="space-y-3">
              {guidelines.diretrizes.map((diretriz) => (
                <div
                  key={diretriz.id}
                  className={cn(
                    "bg-layer-1 border rounded-xl p-4 transition-all group hover:shadow-lg",
                    diretriz.active ? "border-green-500/30 hover:border-green-500/50" : "border-subtle hover:border-subtle"
                  )}
                >
                  <div className="flex items-start justify-between gap-4">
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-2 flex-wrap">
                        <h4 className="font-semibold text-white">{diretriz.title}</h4>
                        <span className={cn(
                          "px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1",
                          diretriz.active
                            ? "bg-green-500/20 text-green-400"
                            : "bg-zinc-700 text-muted"
                        )}>
                          {diretriz.active ? (
                            <>
                              <span className="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></span>
                              Ativa
                            </>
                          ) : (
                            "Inativa"
                          )}
                        </span>
                      </div>
                      {diretriz.description && (
                        <p className="text-sm text-muted mb-3">
                          {diretriz.description}
                        </p>
                      )}
                      <div className="flex flex-wrap gap-2">
                        {diretriz.appliesTo.map((scope) => {
                          const scopeData = SCOPE_OPTIONS.find((o) => o.value === scope);
                          const Icon = scopeData?.icon || FileText;
                          return (
                            <span
                              key={scope}
                              className={cn(
                                "px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1.5 border",
                                scopeData?.bgColor || "bg-layer-2",
                                scopeData?.color || "text-muted"
                              )}
                            >
                              <Icon className="w-3 h-3" />
                              {scopeData?.label}
                            </span>
                          );
                        })}
                      </div>
                    </div>

                    <div className="flex items-center gap-2 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0">
                      <Toggle
                        checked={diretriz.active}
                        onChange={() => toggleDiretriz(diretriz.id)}
                      />
                      <button
                        onClick={() => handleEdit(diretriz)}
                        className="p-2 hover:bg-amber-500/10 rounded-lg transition-colors"
                        title="Editar"
                      >
                        <Pencil className="w-4 h-4 text-amber-400" />
                      </button>
                      <button
                        onClick={() => handleDelete(diretriz.id)}
                        className="p-2 hover:bg-red-500/10 rounded-lg transition-colors"
                        title="Excluir"
                      >
                        <Trash2 className="w-4 h-4 text-red-400" />
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/Layout.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { cn } from "@/lib/utils";
import { useUIStore, useBrandingStore } from "@/lib/store";
import {
  Menu,
  X,
  Home,
  Workflow,
  BookOpen,
  Key,
  ChevronRight,
  FileText,
  Settings,
  ChevronLeft,
  LogOut,
  Palette,
} from "lucide-react";
import GuidelinesModal from "./GuidelinesModal";
import ConnectApisModal from "./ConnectApisModal";
import { getProfile } from "@/app/actions/settings";
import type { UserProfile } from "@/types";

interface LayoutProps {
  children: React.ReactNode;
}

export default function Layout({ children }: LayoutProps) {
  const pathname = usePathname();
  const { isSidebarOpen, toggleSidebar, openGuidelinesModal, openApiKeyModal } = useUIStore();
  const { systemName, logoUrl } = useBrandingStore();
  const [isMobile, setIsMobile] = useState(false);
  const [isCollapsed, setIsCollapsed] = useState(false);
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [showUserMenu, setShowUserMenu] = useState(false);

  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 1024);
    };
    checkMobile();
    window.addEventListener("resize", checkMobile);
    return () => window.removeEventListener("resize", checkMobile);
  }, []);

  useEffect(() => {
    const loadProfile = async () => {
      try {
        const userProfile = await getProfile();
        setProfile(userProfile);
      } catch (error) {
        console.error('Failed to load profile:', error);
      }
    };
    loadProfile();
  }, []);

  const menuItems = [
    {
      label: "Home",
      icon: <Home className="w-5 h-5" />,
      path: "/",
      type: "link" as const,
    },
    {
      label: "WorkFlow",
      icon: <Workflow className="w-5 h-5" />,
      path: "/workflow",
      type: "link" as const,
    },
    {
      label: "Documentação",
      icon: <FileText className="w-5 h-5" />,
      path: "/documentation",
      type: "link" as const,
    },
    {
      label: "Design System",
      icon: <Palette className="w-5 h-5" />,
      path: "/documentation/design-system",
      type: "link" as const,
    },
    {
      label: "Diretrizes",
      icon: <BookOpen className="w-5 h-5" />,
      type: "button" as const,
      onClick: openGuidelinesModal,
    },
    {
      label: "API Keys",
      icon: <Key className="w-5 h-5" />,
      type: "button" as const,
      onClick: openApiKeyModal,
    },
  ];

  const settingsItem = {
    label: "Settings",
    icon: <Settings className="w-5 h-5" />,
    path: "/settings",
    type: "link" as const,
  };

  return (
    <div className="min-h-screen bg-layer-0 flex">
      {/* Mobile Menu Button */}
      <button
        onClick={toggleSidebar}
        className="lg:hidden fixed top-4 left-4 z-50 p-2 bg-layer-1 rounded-lg border border-default"
      >
        {isSidebarOpen ? (
          <X className="w-5 h-5 text-white" />
        ) : (
          <Menu className="w-5 h-5 text-white" />
        )}
      </button>

      {/* Sidebar */}
      <aside
        className={cn(
          "fixed lg:sticky top-0 left-0 z-40 h-screen bg-layer-1 border-r border-default transition-all duration-300",
          isSidebarOpen ? "translate-x-0" : "-translate-x-full lg:translate-x-0",
          isCollapsed && !isMobile ? "w-20" : "w-64"
        )}
      >
        <div className="flex flex-col h-full">
          {/* Logo */}
          <div className="p-6 border-b border-default">
            <Link href="/" className="flex items-center gap-3 group">
              <div className="w-10 h-10 flex items-center justify-center flex-shrink-0 relative">
                {logoUrl ? (
                  <img
                    src={logoUrl}
                    alt="ORION"
                    className="w-full h-full object-contain drop-shadow-glow"
                    onError={(e) => {
                      e.currentTarget.style.display = 'none';
                    }}
                  />
                ) : (
                  /* Fallback: Logo SVG ORION */
                  <div className="relative w-full h-full bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-glow-md shadow-cyan-500/50 group-hover:shadow-glow-lg group-hover:shadow-cyan-400/70 transition-all duration-300">
                    <div className="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-xl" />
                    <span className="relative text-white font-black text-lg tracking-tighter drop-shadow-lg">
                      OR
                    </span>
                  </div>
                )}
              </div>
              {(!isCollapsed || isMobile) && (
                <div className="flex flex-col">
                  <span className="text-xl font-bold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent whitespace-nowrap group-hover:from-cyan-300 group-hover:via-blue-300 group-hover:to-cyan-300 transition-all duration-300">
                    {systemName}
                  </span>
                  <span className="text-xs text-cyan-400 font-medium">
                    AI-Powered Production
                  </span>
                </div>
              )}
            </Link>
          </div>

          {/* Navigation */}
          <nav className="flex-1 p-4 space-y-1 overflow-auto">
            {menuItems.map((item, index) => {
              if (item.type === "link") {
                const isActive = pathname === item.path ||
                    (item.path === "/workflow" && pathname.startsWith("/step/")) ||
                    (item.path === "/documentation" && pathname.startsWith("/documentation"));

                return (
                  <Link
                    key={index}
                    href={item.path}
                    onClick={() => {
                      if (isMobile) toggleSidebar();
                    }}
                    className={cn(
                      "flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",
                      isActive
                        ? "bg-cyan-500/15 text-cyan-400 border border-cyan-500/30"
                        : "text-text-secondary hover:bg-surface-elevated hover:text-text-primary",
                      isCollapsed && !isMobile && "justify-center"
                    )}
                    title={isCollapsed && !isMobile ? item.label : undefined}
                  >
                    <span
                      className={cn(
                        "flex items-center justify-center w-8 h-8 rounded-lg flex-shrink-0",
                        isActive
                          ? "bg-cyan-500/25"
                          : "bg-surface-default"
                      )}
                    >
                      {item.icon}
                    </span>
                    {(!isCollapsed || isMobile) && (
                      <span className="font-medium">{item.label}</span>
                    )}
                  </Link>
                );
              } else {
                return (
                  <button
                    key={index}
                    onClick={() => {
                      item.onClick?.();
                      if (isMobile) toggleSidebar();
                    }}
                    className={cn(
                      "w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-text-secondary hover:bg-surface-elevated hover:text-text-primary transition-all duration-200",
                      isCollapsed && !isMobile && "justify-center"
                    )}
                    title={isCollapsed && !isMobile ? item.label : undefined}
                  >
                    <span className="flex items-center justify-center w-8 h-8 rounded-lg bg-surface-default flex-shrink-0">
                      {item.icon}
                    </span>
                    {(!isCollapsed || isMobile) && (
                      <>
                        <span className="font-medium">{item.label}</span>
                        <ChevronRight className="w-4 h-4 ml-auto" />
                      </>
                    )}
                  </button>
                );
              }
            })}
          </nav>

          {/* Footer */}
          <div className="p-4 border-t border-default space-y-3">
            {/* Settings Link */}
            <Link
              href={settingsItem.path}
              onClick={() => {
                if (isMobile) toggleSidebar();
              }}
              className={cn(
                "flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",
                pathname === settingsItem.path
                  ? "bg-emerald-500/15 text-emerald-400 border border-emerald-500/30"
                  : "text-text-secondary hover:bg-surface-elevated hover:text-text-primary",
                isCollapsed && !isMobile && "justify-center"
              )}
              title={isCollapsed && !isMobile ? settingsItem.label : undefined}
            >
              <span
                className={cn(
                  "flex items-center justify-center w-8 h-8 rounded-lg flex-shrink-0",
                  pathname === settingsItem.path
                    ? "bg-emerald-500/25"
                    : "bg-surface-default"
                )}
              >
                {settingsItem.icon}
              </span>
              {(!isCollapsed || isMobile) && (
                <span className="font-medium">{settingsItem.label}</span>
              )}
            </Link>

            {/* Collapse Button (desktop only) */}
            {!isMobile && (
              <button
                onClick={() => setIsCollapsed(!isCollapsed)}
                className="w-full flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg text-text-muted hover:bg-surface-elevated hover:text-text-primary transition-all duration-200 group border border-transparent hover:border-border-subtle"
                title={isCollapsed ? "Expandir sidebar" : "Recolher sidebar"}
              >
                <div className="flex items-center justify-center w-8 h-8 rounded-lg bg-surface-default group-hover:bg-cyan-500/10 transition-colors">
                  <ChevronLeft className={cn(
                    "w-4 h-4 transition-all duration-300 group-hover:text-cyan-400",
                    isCollapsed && "rotate-180"
                  )} />
                </div>
                {!isCollapsed && (
                  <span className="text-sm font-medium flex-1 text-left">Recolher</span>
                )}
              </button>
            )}

            {/* Version */}
            {(!isCollapsed || isMobile) && (
              <p className="text-xs text-text-muted text-center">
                {systemName} v1.0.0
              </p>
            )}
          </div>
        </div>
      </aside>

      {/* Overlay for mobile */}
      {isSidebarOpen && isMobile && (
        <div
          className="fixed inset-0 bg-black/50 z-30 lg:hidden"
          onClick={toggleSidebar}
        />
      )}

      {/* Main Content */}
      <main className="flex-1 min-h-screen flex flex-col">
        {/* Header with User Avatar */}
        <header className="sticky top-0 z-30 bg-layer-1/95 backdrop-blur-sm border-b border-default">
          <div className="flex items-center justify-end px-6 py-3 gap-4">
            {/* System Status Indicator */}
            <div className="hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-success/10 border border-success/20">
              <div className="relative w-2 h-2">
                <div className="absolute inset-0 bg-success rounded-full animate-ping opacity-75" />
                <div className="relative w-2 h-2 bg-success rounded-full" />
              </div>
              <span className="text-xs font-medium text-success">Sistema Operacional</span>
            </div>

            {profile && (
              <div className="relative">
                <button
                  onClick={() => setShowUserMenu(!showUserMenu)}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-surface-elevated transition-all"
                >
                  <div className="text-right hidden sm:block">
                    <p className="text-sm font-medium text-text-primary">{profile.name}</p>
                    <p className="text-xs text-text-secondary">{profile.role}</p>
                  </div>
                  <div className="relative">
                    <img
                      src={profile.avatarUrl}
                      alt={profile.name}
                      className="w-9 h-9 rounded-full border-2 border-subtle"
                    />
                    <div className="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-success rounded-full border-2 border-layer-1" />
                  </div>
                </button>

                {/* Dropdown Menu */}
                {showUserMenu && (
                  <>
                    <div
                      className="fixed inset-0 z-40"
                      onClick={() => setShowUserMenu(false)}
                    />
                    <div className="absolute right-0 mt-2 w-48 bg-layer-2 border border-default rounded-lg shadow-xl z-50 overflow-hidden">
                      <Link
                        href="/settings"
                        onClick={() => setShowUserMenu(false)}
                        className="flex items-center gap-2 px-4 py-3 hover:bg-surface-elevated transition-colors text-text-secondary hover:text-text-primary"
                      >
                        <Settings className="w-4 h-4" />
                        <span className="text-sm">Configurações</span>
                      </Link>
                      <div className="border-t border-default" />
                      <button
                        onClick={() => {
                          setShowUserMenu(false);
                          window.location.reload();
                        }}
                        className="w-full flex items-center gap-2 px-4 py-3 hover:bg-surface-elevated transition-colors text-red-400 hover:text-red-300"
                      >
                        <LogOut className="w-4 h-4" />
                        <span className="text-sm">Sair</span>
                      </button>
                    </div>
                  </>
                )}
              </div>
            )}
          </div>
        </header>

        {/* Page Content */}
        <div className="flex-1 overflow-y-auto p-6">
          <div className="max-w-7xl mx-auto">
            {children}
          </div>
        </div>
      </main>

      {/* Modals */}
      <GuidelinesModal />
      <ConnectApisModal />
    </div>
  );
}

```

---
#### `components/ModelsExplorer.tsx`

```
"use client";

import { useState, useEffect, useMemo } from "react";
import {
  Search,
  ChevronDown,
  ChevronUp,
  Sparkles,
  Check,
  Loader2,
  AlertCircle,
  Cpu,
} from "lucide-react";

interface Model {
  id: string;
  name: string;
  description: string;
  isNew?: boolean;
}

interface ModelCategory {
  name: string;
  description: string;
  models: Model[];
}

interface ProviderModels {
  name: string;
  icon: string;
  categories: ModelCategory[];
}

interface ModelsExplorerProps {
  provider: string;
  apiKey?: string;
  isConnected: boolean;
}

export default function ModelsExplorer({ provider, apiKey, isConnected }: ModelsExplorerProps) {
  const [models, setModels] = useState<ProviderModels | null>(null);
  const [availableModels, setAvailableModels] = useState<string[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchQuery, setSearchQuery] = useState("");
  const [expandedCategories, setExpandedCategories] = useState<Record<string, boolean>>({});
  const [loadingAvailable, setLoadingAvailable] = useState(false);

  // Carregar modelos estáticos
  useEffect(() => {
    const fetchModels = async () => {
      setLoading(true);
      try {
        const res = await fetch(`/api/models?provider=${provider}`);
        if (res.ok) {
          const data = await res.json();
          setModels(data);
          // Expandir primeira categoria por padrão
          if (data.categories?.length > 0) {
            setExpandedCategories({ [data.categories[0].name]: true });
          }
        }
      } catch (error) {
        console.error('Error fetching models:', error);
      } finally {
        setLoading(false);
      }
    };

    fetchModels();
  }, [provider]);

  // Carregar modelos disponíveis se conectado
  useEffect(() => {
    const fetchAvailableModels = async () => {
      if (!isConnected || !apiKey) return;

      setLoadingAvailable(true);
      try {
        const res = await fetch('/api/models', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ provider, key: apiKey })
        });
        if (res.ok) {
          const data = await res.json();
          setAvailableModels(data.availableModels || []);
        }
      } catch (error) {
        console.error('Error fetching available models:', error);
      } finally {
        setLoadingAvailable(false);
      }
    };

    fetchAvailableModels();
  }, [provider, apiKey, isConnected]);

  // Filtrar modelos por pesquisa
  const filteredCategories = useMemo(() => {
    if (!models?.categories) return [];
    if (!searchQuery.trim()) return models.categories;

    const query = searchQuery.toLowerCase();
    return models.categories
      .map(category => ({
        ...category,
        models: category.models.filter(
          model =>
            model.id.toLowerCase().includes(query) ||
            model.name.toLowerCase().includes(query) ||
            model.description.toLowerCase().includes(query)
        )
      }))
      .filter(category => category.models.length > 0);
  }, [models, searchQuery]);

  const toggleCategory = (categoryName: string) => {
    setExpandedCategories(prev => ({
      ...prev,
      [categoryName]: !prev[categoryName]
    }));
  };

  const isModelAvailable = (modelId: string) => {
    if (availableModels.length === 0) return null; // Não verificado
    return availableModels.some(m => m.includes(modelId) || modelId.includes(m));
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center p-8">
        <Loader2 className="w-6 h-6 text-indigo-400 animate-spin" />
      </div>
    );
  }

  if (!models) {
    return (
      <div className="p-4 text-center text-muted">
        <AlertCircle className="w-8 h-8 mx-auto mb-2 text-disabled" />
        <p>Modelos não disponíveis para este provedor</p>
      </div>
    );
  }

  return (
    <div className="space-y-4">
      {/* Header com pesquisa */}
      <div className="flex items-center gap-3">
        <span className="text-2xl">{models.icon}</span>
        <div className="flex-1">
          <h3 className="font-semibold text-white">{models.name}</h3>
          <p className="text-xs text-muted">
            {loadingAvailable ? (
              <span className="flex items-center gap-1">
                <Loader2 className="w-3 h-3 animate-spin" />
                Verificando disponibilidade...
              </span>
            ) : isConnected ? (
              <span className="text-green-400">API conectada - modelos verificados</span>
            ) : (
              <span className="text-yellow-400">Configure a API para ver disponibilidade</span>
            )}
          </p>
        </div>
      </div>

      {/* Campo de pesquisa */}
      <div className="relative">
        <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted" />
        <input
          type="text"
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder="Pesquisar modelos..."
          className="w-full pl-10 pr-4 py-2 bg-layer-2/50 border border-subtle rounded-lg text-sm text-white placeholder-zinc-500 focus:outline-none focus:border-indigo-500 transition-colors"
        />
      </div>

      {/* Lista de categorias e modelos */}
      <div className="space-y-2 max-h-[400px] overflow-y-auto pr-2">
        {filteredCategories.map((category) => (
          <div
            key={category.name}
            className="border border-subtle rounded-lg overflow-hidden"
          >
            {/* Cabeçalho da categoria */}
            <button
              onClick={() => toggleCategory(category.name)}
              className="w-full px-4 py-3 bg-layer-2/50 hover:bg-layer-2 flex items-center justify-between transition-colors"
            >
              <div className="text-left">
                <h4 className="font-medium text-white text-sm">{category.name}</h4>
                <p className="text-xs text-muted">{category.description}</p>
              </div>
              <div className="flex items-center gap-2">
                <span className="text-xs text-muted bg-zinc-700 px-2 py-0.5 rounded">
                  {category.models.length} modelos
                </span>
                {expandedCategories[category.name] ? (
                  <ChevronUp className="w-4 h-4 text-muted" />
                ) : (
                  <ChevronDown className="w-4 h-4 text-muted" />
                )}
              </div>
            </button>

            {/* Lista de modelos */}
            {expandedCategories[category.name] && (
              <div className="divide-y divide-zinc-800">
                {category.models.map((model) => {
                  const availability = isModelAvailable(model.id);
                  return (
                    <div
                      key={model.id}
                      className="px-4 py-3 bg-layer-1/50 hover:bg-layer-2/30 transition-colors"
                    >
                      <div className="flex items-start justify-between gap-2">
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 flex-wrap">
                            <span className="font-mono text-sm text-indigo-300">
                              {model.id}
                            </span>
                            {model.isNew && (
                              <span className="px-1.5 py-0.5 bg-green-500/20 text-green-400 text-[10px] font-medium rounded flex items-center gap-1">
                                <Sparkles className="w-2.5 h-2.5" />
                                NOVO
                              </span>
                            )}
                          </div>
                          <p className="text-sm text-white mt-0.5">{model.name}</p>
                          <p className="text-xs text-muted mt-0.5">{model.description}</p>
                        </div>

                        {/* Status de disponibilidade */}
                        <div className="flex-shrink-0">
                          {availability === true && (
                            <div className="flex items-center gap-1 text-green-400 bg-green-500/10 px-2 py-1 rounded">
                              <Check className="w-3 h-3" />
                              <span className="text-[10px] font-medium">Disponível</span>
                            </div>
                          )}
                          {availability === false && (
                            <div className="flex items-center gap-1 text-muted bg-zinc-700/30 px-2 py-1 rounded">
                              <Cpu className="w-3 h-3" />
                              <span className="text-[10px]">Indisponível</span>
                            </div>
                          )}
                          {availability === null && isConnected && (
                            <div className="flex items-center gap-1 text-yellow-400 bg-yellow-500/10 px-2 py-1 rounded">
                              <AlertCircle className="w-3 h-3" />
                              <span className="text-[10px]">Verificar</span>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}
          </div>
        ))}

        {filteredCategories.length === 0 && (
          <div className="p-8 text-center text-muted">
            <Search className="w-8 h-8 mx-auto mb-2 opacity-50" />
            <p>Nenhum modelo encontrado para &quot;{searchQuery}&quot;</p>
          </div>
        )}
      </div>
    </div>
  );
}

```

---
#### `components/VercelToolbar.tsx`

```
'use client';

import { VercelToolbar as Toolbar } from '@vercel/toolbar/next';

/**
 * Componente que integra o Vercel Toolbar em todos os ambientes.
 *
 * O Vercel Toolbar permite:
 * - Adicionar comentários visuais nas páginas usando @menções
 * - Mencionar @Claude para direcionar comentários para a IA
 * - Colaboração em tempo real com a equipe
 * - Funciona em desenvolvimento, preview E produção
 *
 * Configuração:
 * - Habilitado em todos os ambientes (dev, preview, production)
 * - Requer VERCEL_TOKEN e VERCEL_PROJECT_ID configurados
 * - Menções são extraídas via CLI: npm run vercel:comments
 */
export function VercelToolbar() {
  // Habilitar em TODOS os ambientes (dev, preview, production)
  // Para garantir que menções @Claude funcionem em produção
  const shouldInject = true;

  if (!shouldInject) {
    return null;
  }

  return <Toolbar />;
}

```

---
#### `components/design-system/ColorSwatch.tsx`

```
'use client';

import { useState } from 'react';
import { Check, Copy } from 'lucide-react';

interface ColorSwatchProps {
  name: string;
  value: string;
  cssVariable?: string;
  showHex?: boolean;
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

export function ColorSwatch({
  name,
  value,
  cssVariable,
  showHex = true,
  size = 'md',
  className = '',
}: ColorSwatchProps) {
  const [copied, setCopied] = useState(false);

  const sizes = {
    sm: 'w-12 h-12',
    md: 'w-16 h-16',
    lg: 'w-24 h-24',
  };

  const copyToClipboard = async () => {
    const textToCopy = cssVariable || value;
    await navigator.clipboard.writeText(textToCopy);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className={`group ${className}`}>
      <button
        onClick={copyToClipboard}
        className={`
          ${sizes[size]}
          rounded-xl border border-border-subtle
          transition-all duration-200
          hover:scale-105 hover:border-border-active
          hover:shadow-glow-md
          relative overflow-hidden
          focus:outline-none focus:ring-2 focus:ring-cyan-500/50
        `}
        style={{ backgroundColor: value }}
        title={`Copiar: ${cssVariable || value}`}
      >
        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 backdrop-blur-sm">
          {copied ? (
            <Check className="w-5 h-5 text-success" />
          ) : (
            <Copy className="w-4 h-4 text-white" />
          )}
        </div>
      </button>

      <div className="mt-2 space-y-0.5">
        <p className="text-sm font-medium text-foreground truncate">{name}</p>
        {showHex && (
          <p className="text-xs text-foreground-muted font-mono">
            {value.startsWith('var(') ? cssVariable : value}
          </p>
        )}
      </div>
    </div>
  );
}

interface ColorPaletteProps {
  name: string;
  colors: { shade: string; value: string; cssVar?: string }[];
  className?: string;
}

export function ColorPalette({ name, colors, className = '' }: ColorPaletteProps) {
  return (
    <div className={`space-y-3 ${className}`}>
      <h4 className="text-sm font-semibold text-foreground uppercase tracking-wider">
        {name}
      </h4>
      <div className="flex flex-wrap gap-3">
        {colors.map((color) => (
          <ColorSwatch
            key={color.shade}
            name={color.shade}
            value={color.value}
            cssVariable={color.cssVar}
            size="md"
          />
        ))}
      </div>
    </div>
  );
}

interface ColorGridProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function ColorGrid({ title, description, children, className = '' }: ColorGridProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4">
        {children}
      </div>
    </div>
  );
}

```

---
#### `components/design-system/ComponentPreview.tsx`

```
'use client';

import { useState } from 'react';
import { Code, Eye } from 'lucide-react';

interface ComponentPreviewProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  code?: string;
  className?: string;
}

export function ComponentPreview({
  title,
  description,
  children,
  code,
  className = '',
}: ComponentPreviewProps) {
  const [showCode, setShowCode] = useState(false);

  return (
    <div className={`card-glass overflow-hidden ${className}`}>
      {/* Header */}
      <div className="flex items-center justify-between px-6 py-4 border-b border-border-subtle">
        <div>
          <h4 className="text-lg font-semibold text-foreground">{title}</h4>
          {description && (
            <p className="text-sm text-foreground-muted mt-0.5">{description}</p>
          )}
        </div>
        {code && (
          <button
            onClick={() => setShowCode(!showCode)}
            className={`
              btn-ghost btn-sm gap-2
              ${showCode ? 'text-cyan-400' : ''}
            `}
          >
            {showCode ? (
              <>
                <Eye className="w-4 h-4" />
                Preview
              </>
            ) : (
              <>
                <Code className="w-4 h-4" />
                Código
              </>
            )}
          </button>
        )}
      </div>

      {/* Content */}
      {showCode && code ? (
        <div className="p-6 bg-layer-1">
          <pre className="text-sm font-mono text-foreground-secondary overflow-x-auto">
            <code>{code}</code>
          </pre>
        </div>
      ) : (
        <div className="p-6 bg-layer-0/50">
          {children}
        </div>
      )}
    </div>
  );
}

interface ComponentSectionProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function ComponentSection({ title, description, children, className = '' }: ComponentSectionProps) {
  return (
    <section className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-2xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-2 text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="space-y-6">
        {children}
      </div>
    </section>
  );
}

interface PreviewGridProps {
  children: React.ReactNode;
  cols?: 1 | 2 | 3 | 4;
  className?: string;
}

export function PreviewGrid({ children, cols = 2, className = '' }: PreviewGridProps) {
  const gridCols = {
    1: 'grid-cols-1',
    2: 'grid-cols-1 md:grid-cols-2',
    3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
    4: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-4',
  };

  return (
    <div className={`grid ${gridCols[cols]} gap-6 ${className}`}>
      {children}
    </div>
  );
}

interface SpacingPreviewProps {
  name: string;
  value: string;
  className?: string;
}

export function SpacingPreview({ name, value, className = '' }: SpacingPreviewProps) {
  return (
    <div className={`flex items-center gap-4 ${className}`}>
      <div
        className="bg-cyan-500/30 border border-cyan-500/50 rounded"
        style={{ width: value, height: value, minWidth: '4px', minHeight: '4px' }}
      />
      <div className="flex-1">
        <p className="text-sm font-medium text-foreground">{name}</p>
        <p className="text-xs text-foreground-muted font-mono">{value}</p>
      </div>
    </div>
  );
}

interface ShadowPreviewProps {
  name: string;
  shadow: string;
  className?: string;
}

export function ShadowPreview({ name, shadow, className = '' }: ShadowPreviewProps) {
  return (
    <div className={`flex flex-col items-center ${className}`}>
      <div
        className="w-24 h-24 bg-layer-2 rounded-xl mb-3"
        style={{ boxShadow: shadow }}
      />
      <p className="text-sm font-medium text-foreground text-center">{name}</p>
    </div>
  );
}

interface RadiusPreviewProps {
  name: string;
  radius: string;
  className?: string;
}

export function RadiusPreview({ name, radius, className = '' }: RadiusPreviewProps) {
  return (
    <div className={`flex flex-col items-center ${className}`}>
      <div
        className="w-20 h-20 bg-gradient-cyan-blue mb-3"
        style={{ borderRadius: radius }}
      />
      <p className="text-sm font-medium text-foreground">{name}</p>
      <p className="text-xs text-foreground-muted font-mono">{radius}</p>
    </div>
  );
}

```

---
#### `components/design-system/GradientCard.tsx`

```
'use client';

import { useState } from 'react';
import { Check, Copy } from 'lucide-react';

interface GradientCardProps {
  name: string;
  cssVariable: string;
  gradient: string;
  description?: string;
  className?: string;
}

export function GradientCard({
  name,
  cssVariable,
  gradient,
  description,
  className = '',
}: GradientCardProps) {
  const [copied, setCopied] = useState(false);

  const copyToClipboard = async () => {
    await navigator.clipboard.writeText(cssVariable);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className={`group ${className}`}>
      <button
        onClick={copyToClipboard}
        className="
          w-full h-32 rounded-xl border border-border-subtle
          transition-all duration-300
          hover:scale-[1.02] hover:border-border-active
          hover:shadow-card-hover
          relative overflow-hidden
          focus:outline-none focus:ring-2 focus:ring-cyan-500/50
        "
        style={{ background: gradient }}
        title={`Copiar: ${cssVariable}`}
      >
        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 backdrop-blur-sm">
          {copied ? (
            <div className="flex items-center gap-2 text-success">
              <Check className="w-5 h-5" />
              <span className="text-sm font-medium">Copiado!</span>
            </div>
          ) : (
            <div className="flex items-center gap-2 text-white">
              <Copy className="w-4 h-4" />
              <span className="text-sm">Copiar CSS</span>
            </div>
          )}
        </div>
      </button>

      <div className="mt-3 space-y-1">
        <p className="text-sm font-medium text-foreground">{name}</p>
        <p className="text-xs text-foreground-muted font-mono truncate">{cssVariable}</p>
        {description && (
          <p className="text-xs text-foreground-muted">{description}</p>
        )}
      </div>
    </div>
  );
}

interface GradientGridProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function GradientGrid({ title, description, children, className = '' }: GradientGridProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {children}
      </div>
    </div>
  );
}

```

---
#### `components/design-system/TypographySample.tsx`

```
'use client';

interface TypographySampleProps {
  name: string;
  description?: string;
  className?: string;
  fontClass?: string;
  sampleText?: string;
  specs?: {
    size?: string;
    weight?: string;
    lineHeight?: string;
    letterSpacing?: string;
  };
}

export function TypographySample({
  name,
  description,
  className = '',
  fontClass = '',
  sampleText = 'O rápido rato roeu a roupa do rei de Roma.',
  specs,
}: TypographySampleProps) {
  return (
    <div className={`card-glass p-6 rounded-xl ${className}`}>
      <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4">
        <div>
          <h4 className="text-lg font-semibold text-foreground">{name}</h4>
          {description && (
            <p className="text-sm text-foreground-muted mt-1">{description}</p>
          )}
        </div>
        {specs && (
          <div className="flex flex-wrap gap-2">
            {specs.size && (
              <span className="badge-default text-2xs">
                {specs.size}
              </span>
            )}
            {specs.weight && (
              <span className="badge-default text-2xs">
                {specs.weight}
              </span>
            )}
            {specs.lineHeight && (
              <span className="badge-default text-2xs">
                LH: {specs.lineHeight}
              </span>
            )}
            {specs.letterSpacing && (
              <span className="badge-default text-2xs">
                LS: {specs.letterSpacing}
              </span>
            )}
          </div>
        )}
      </div>
      <p className={`text-foreground ${fontClass}`}>{sampleText}</p>
    </div>
  );
}

interface TypographyScaleProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function TypographyScale({ title, description, children, className = '' }: TypographyScaleProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="space-y-4">
        {children}
      </div>
    </div>
  );
}

export function FontPreview() {
  return (
    <div className="grid md:grid-cols-2 gap-6">
      {/* Sans */}
      <div className="card-glass p-6 rounded-xl">
        <div className="flex items-center justify-between mb-4">
          <h4 className="text-lg font-semibold text-foreground">Inter</h4>
          <span className="badge-info">Sans-serif</span>
        </div>
        <p className="text-foreground mb-4">
          Fonte principal para UI, textos e títulos. Moderna, legível e com
          ótimo suporte a múltiplos pesos.
        </p>
        <div className="space-y-2 border-t border-border-subtle pt-4">
          <p className="font-normal text-foreground-muted">Regular 400</p>
          <p className="font-medium text-foreground-muted">Medium 500</p>
          <p className="font-semibold text-foreground-muted">Semibold 600</p>
          <p className="font-bold text-foreground-muted">Bold 700</p>
        </div>
      </div>

      {/* Mono */}
      <div className="card-glass p-6 rounded-xl">
        <div className="flex items-center justify-between mb-4">
          <h4 className="text-lg font-semibold text-foreground">JetBrains Mono</h4>
          <span className="badge-default">Monospace</span>
        </div>
        <p className="text-foreground mb-4">
          Fonte monospace para código, dados numéricos e elementos técnicos.
          Excelente legibilidade em tamanhos pequenos.
        </p>
        <div className="space-y-2 border-t border-border-subtle pt-4 font-mono">
          <p className="text-foreground-muted">const hello = &apos;world&apos;;</p>
          <p className="text-foreground-muted">1234567890</p>
          <p className="text-foreground-muted">@#$%^&*()_+=</p>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/design-system/index.ts`

```
/**
 * ORION Design System - Component Exports
 */

export { ColorSwatch, ColorPalette, ColorGrid } from './ColorSwatch';
export { GradientCard, GradientGrid } from './GradientCard';
export { TypographySample, TypographyScale, FontPreview } from './TypographySample';
export {
  ComponentPreview,
  ComponentSection,
  PreviewGrid,
  SpacingPreview,
  ShadowPreview,
  RadiusPreview,
} from './ComponentPreview';

```

---
#### `components/documentation/AnimatedSection.tsx`

```
"use client";

import { ReactNode, useRef, useEffect, useState } from "react";

interface AnimatedSectionProps {
  children: ReactNode;
  className?: string;
  delay?: number;
  animation?: "fade-up" | "fade-left" | "fade-right" | "scale" | "none";
}

export function AnimatedSection({
  children,
  className = "",
  delay = 0,
  animation = "fade-up",
}: AnimatedSectionProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setTimeout(() => setIsVisible(true), delay);
          observer.unobserve(element);
        }
      },
      { threshold: 0.1, rootMargin: "50px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, [delay]);

  const getAnimationStyles = () => {
    if (animation === "none") return {};

    const baseStyles = {
      transition: "all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",
    };

    if (!isVisible) {
      switch (animation) {
        case "fade-up":
          return { ...baseStyles, opacity: 0, transform: "translateY(30px)" };
        case "fade-left":
          return { ...baseStyles, opacity: 0, transform: "translateX(-30px)" };
        case "fade-right":
          return { ...baseStyles, opacity: 0, transform: "translateX(30px)" };
        case "scale":
          return { ...baseStyles, opacity: 0, transform: "scale(0.95)" };
        default:
          return { ...baseStyles, opacity: 0 };
      }
    }

    return { ...baseStyles, opacity: 1, transform: "translateY(0) translateX(0) scale(1)" };
  };

  return (
    <div ref={ref} className={className} style={getAnimationStyles()}>
      {children}
    </div>
  );
}

interface AnimatedCardProps {
  children: ReactNode;
  className?: string;
  delay?: number;
  hoverEffect?: boolean;
}

export function AnimatedCard({
  children,
  className = "",
  delay = 0,
  hoverEffect = true,
}: AnimatedCardProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setTimeout(() => setIsVisible(true), delay);
          observer.unobserve(element);
        }
      },
      { threshold: 0.1, rootMargin: "30px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, [delay]);

  return (
    <div
      ref={ref}
      className={`transition-all duration-500 ${hoverEffect ? "glow-hover" : ""} ${className}`}
      style={{
        opacity: isVisible ? 1 : 0,
        transform: isVisible ? "translateY(0) scale(1)" : "translateY(20px) scale(0.98)",
      }}
    >
      {children}
    </div>
  );
}

interface AnimatedGridProps {
  children: ReactNode;
  className?: string;
  staggerDelay?: number;
}

export function AnimatedGrid({ children, className = "", staggerDelay = 100 }: AnimatedGridProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.unobserve(element);
        }
      },
      { threshold: 0.05, rootMargin: "50px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, []);

  return (
    <div ref={ref} className={className}>
      {Array.isArray(children)
        ? children.map((child, index) => (
            <div
              key={index}
              style={{
                opacity: isVisible ? 1 : 0,
                transform: isVisible ? "translateY(0)" : "translateY(20px)",
                transition: `all 0.5s cubic-bezier(0.4, 0, 0.2, 1) ${index * staggerDelay}ms`,
              }}
            >
              {child}
            </div>
          ))
        : children}
    </div>
  );
}

export default AnimatedSection;

```

---
#### `components/documentation/CopyButton.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { Copy, Check, FileCode } from "lucide-react";

// Check if we're in a shared view context
function useCanCopy() {
  const [canCopy, setCanCopy] = useState(true);

  useEffect(() => {
    // Check URL for share token
    const params = new URLSearchParams(window.location.search);
    const token = params.get("s");

    if (token) {
      // Check if this token belongs to the owner
      try {
        const tokens = localStorage.getItem("ey_owner_tokens");
        const ownerTokens = tokens ? JSON.parse(tokens) : [];
        if (!ownerTokens.includes(token)) {
          setCanCopy(false);
        }
      } catch {
        setCanCopy(false);
      }
    }
  }, []);

  return canCopy;
}

interface CopyButtonProps {
  content: string;
  className?: string;
}

export function CopyButton({ content, className = "" }: CopyButtonProps) {
  const [copied, setCopied] = useState(false);
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  const handleCopy = async () => {
    try {
      await navigator.clipboard.writeText(content);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Failed to copy:", err);
    }
  };

  return (
    <button
      onClick={handleCopy}
      className={`p-1.5 rounded-lg transition-all ${
        copied
          ? "bg-green-500/20 text-green-400"
          : "bg-layer-2/50 text-muted hover:bg-zinc-700 hover:text-white"
      } ${className}`}
      title={copied ? "Copiado!" : "Copiar"}
    >
      {copied ? <Check className="w-3.5 h-3.5" /> : <Copy className="w-3.5 h-3.5" />}
    </button>
  );
}

interface MarkdownButtonProps {
  content: string;
  filename?: string;
  className?: string;
}

export function MarkdownButton({ content, filename = "content.md", className = "" }: MarkdownButtonProps) {
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  const handleDownload = () => {
    const blob = new Blob([content], { type: "text/markdown" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };

  return (
    <button
      onClick={handleDownload}
      className={`p-1.5 rounded-lg transition-all bg-layer-2/50 text-muted hover:bg-indigo-500/20 hover:text-indigo-400 ${className}`}
      title="Exportar como Markdown"
    >
      <FileCode className="w-3.5 h-3.5" />
    </button>
  );
}

interface CopyMdButtonsProps {
  content: string;
  markdownContent?: string;
  filename?: string;
  className?: string;
}

export function CopyMdButtons({ content, markdownContent, filename, className = "" }: CopyMdButtonsProps) {
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  return (
    <div className={`flex items-center gap-1 ${className}`}>
      <CopyButton content={content} />
      <MarkdownButton content={markdownContent || content} filename={filename} />
    </div>
  );
}

export default CopyMdButtons;

```

---
#### `components/documentation/CurrentStateTab.tsx`

```
"use client";

import {
  Compass,
  CheckCircle2,
  Clock,
  AlertTriangle,
  XCircle,
  ArrowRight,
  Target,
  Zap,
  Shield,
  TrendingUp,
  Calendar,
  Gauge,
} from "lucide-react";

export default function CurrentStateTab() {
  const completedFeatures = [
    { name: "Dashboard com Boot Sequence", priority: "Alta", impact: "Alto" },
    { name: "Workflow de 6 etapas", priority: "Crítica", impact: "Crítico" },
    { name: "Input de tema e configuração", priority: "Crítica", impact: "Alto" },
    { name: "Pesquisa com IA", priority: "Alta", impact: "Alto" },
    { name: "Geração de roteiro", priority: "Crítica", impact: "Crítico" },
    { name: "Geração de títulos/thumbnails", priority: "Alta", impact: "Alto" },
    { name: "Geração de descrição e tags", priority: "Alta", impact: "Alto" },
    { name: "Seleção de trilha sonora", priority: "Média", impact: "Médio" },
    { name: "Sistema de diretrizes", priority: "Média", impact: "Alto" },
    { name: "Configuração de API Keys", priority: "Crítica", impact: "Crítico" },
    { name: "Persistência de estado", priority: "Alta", impact: "Alto" },
    { name: "Prisma Schema + Database", priority: "Crítica", impact: "Crítico" },
    { name: "Inngest Video Pipeline", priority: "Crítica", impact: "Crítico" },
    { name: "AI Agents (Research + Script)", priority: "Alta", impact: "Alto" },
    { name: "Sistema de Aprovação Humana", priority: "Alta", impact: "Alto" },
    { name: "Notificações por Email (Resend)", priority: "Média", impact: "Alto" },
  ];

  const partialFeatures = [
    { name: "Upload YouTube", progress: 85, blocker: "OAuth final config", priority: "Alta" },
    { name: "Render de vídeo (JSON2VIDEO)", progress: 75, blocker: "Integração API", priority: "Alta" },
    { name: "TTS (ElevenLabs)", progress: 60, blocker: "API quota", priority: "Média" },
    { name: "Storyboard editor", progress: 50, blocker: "UX refinement", priority: "Média" },
    { name: "Migração localStorage → Prisma", progress: 40, blocker: "Refatoração frontend", priority: "Alta" },
  ];

  const notStartedFeatures = [
    { name: "Multi-idioma interface", complexity: "Média", priority: "Baixa", impact: "Médio" },
    { name: "Histórico de vídeos", complexity: "Baixa", priority: "Média", impact: "Alto" },
    { name: "Templates de vídeo", complexity: "Média", priority: "Média", impact: "Alto" },
    { name: "Batch processing", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Analytics dashboard", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Colaboração multi-usuário", complexity: "Alta", priority: "Baixa", impact: "Baixo" },
  ];

  const technicalDebt = {
    high: [
      { name: "Error boundaries", description: "Implementar em todas as páginas", impact: "Estabilidade", effort: "Baixo" },
      { name: "Loading states", description: "Padronizar em todas as operações", impact: "UX", effort: "Médio" },
      { name: "Testes E2E", description: "Adicionar testes com Playwright", impact: "Qualidade", effort: "Alto" },
    ],
    medium: [
      { name: "Code splitting", description: "Otimizar bundle com lazy loading", impact: "Performance", effort: "Médio" },
      { name: "API rate limiting", description: "Implementar no frontend", impact: "Custo", effort: "Médio" },
      { name: "Retry logic", description: "Melhorar para falhas de API", impact: "Resiliência", effort: "Médio" },
    ],
    low: [
      { name: "CSS cleanup", description: "Remover estilos não utilizados", impact: "Manutenção", effort: "Baixo" },
      { name: "Type coverage", description: "Aumentar coverage de tipos", impact: "DX", effort: "Médio" },
      { name: "Documentation", description: "Documentar funções complexas", impact: "Manutenção", effort: "Médio" },
    ],
  };

  const risks = {
    technical: [
      { risk: "API rate limits", probability: "Média", impact: "Alto", mitigation: "Cache, retry, fallbacks" },
      { risk: "Custo de APIs", probability: "Alta", impact: "Médio", mitigation: "Monitoramento, alertas" },
      { risk: "Mudanças em APIs externas", probability: "Média", impact: "Alto", mitigation: "Versionamento, abstrações" },
      { risk: "Performance em mobile", probability: "Baixa", impact: "Médio", mitigation: "Testing, otimização" },
    ],
    business: [
      { risk: "Políticas YouTube", probability: "Média", impact: "Crítico", mitigation: "Compliance, guidelines" },
      { risk: "Competição", probability: "Alta", impact: "Médio", mitigation: "Inovação, UX" },
      { risk: "Dependência de IAs", probability: "Média", impact: "Alto", mitigation: "Multi-provider" },
    ],
  };

  const getPriorityColor = (priority: string) => {
    switch (priority.toLowerCase()) {
      case "crítica":
        return "bg-red-500/20 text-red-400";
      case "alta":
        return "bg-orange-500/20 text-orange-400";
      case "média":
        return "bg-yellow-500/20 text-yellow-400";
      case "baixa":
        return "bg-green-500/20 text-green-400";
      default:
        return "bg-zinc-500/20 text-muted";
    }
  };

  const getImpactColor = (impact: string) => {
    switch (impact.toLowerCase()) {
      case "crítico":
        return "bg-red-500/20 text-red-400";
      case "alto":
        return "bg-purple-500/20 text-purple-400";
      case "médio":
        return "bg-blue-500/20 text-blue-400";
      case "baixo":
        return "bg-zinc-500/20 text-muted";
      default:
        return "bg-zinc-500/20 text-muted";
    }
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-900/50 via-pink-900/50 to-rose-900/50 border border-rose-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-rose-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-rose-500/20 rounded-xl">
              <Compass className="w-8 h-8 text-rose-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Status Geral do Projeto
              </h2>
              <p className="text-rose-300">Estado atual e roadmap</p>
            </div>
          </div>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
            {[
              { label: "Versão", value: "2.0.0", icon: Target },
              { label: "Status", value: "Em Produção", icon: CheckCircle2 },
              { label: "Última Atualização", value: "Janeiro 2026", icon: Calendar },
              { label: "Uptime", value: "99.9%", icon: Gauge },
            ].map((stat, i) => (
              <div
                key={i}
                className="bg-layer-1/50 rounded-lg p-4 border border-subtle"
              >
                <stat.icon className="w-5 h-5 text-rose-400 mb-2" />
                <p className="text-xs text-muted">{stat.label}</p>
                <p className="text-lg font-bold text-white">{stat.value}</p>
              </div>
            ))}
          </div>

          <div className="mt-4">
            <p className="text-sm text-muted">
              URL de Produção:{" "}
              <a
                href="https://emergecy-youtube.vercel.app"
                target="_blank"
                rel="noopener noreferrer"
                className="text-rose-400 hover:text-rose-300 underline"
              >
                https://emergecy-youtube.vercel.app
              </a>
            </p>
          </div>
        </div>
      </section>

      {/* Completed Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <CheckCircle2 className="w-6 h-6 text-green-400" />
          Funcionalidades Concluídas
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <div className="bg-green-500/10 border-b border-subtle px-4 py-3 flex items-center justify-between">
            <span className="font-medium text-green-400">Core Features</span>
            <span className="text-sm text-muted">
              {completedFeatures.length} funcionalidades
            </span>
          </div>
          <div className="p-4 max-h-96 overflow-y-auto">
            <table className="w-full text-sm">
              <thead>
                <tr className="text-muted text-xs uppercase">
                  <th className="text-left pb-3">Funcionalidade</th>
                  <th className="text-left pb-3">Prioridade</th>
                  <th className="text-left pb-3">Impacto</th>
                  <th className="text-left pb-3">Status</th>
                </tr>
              </thead>
              <tbody>
                {completedFeatures.map((feature, i) => (
                  <tr key={i} className="border-t border-subtle">
                    <td className="py-3 text-white">{feature.name}</td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                        {feature.priority}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                        {feature.impact}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className="flex items-center gap-1 text-green-400">
                        <CheckCircle2 className="w-4 h-4" />
                        Concluído
                      </span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </section>

      {/* Partial Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Clock className="w-6 h-6 text-yellow-400" />
          Funcionalidades Parciais
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {partialFeatures.map((feature, i) => (
            <div
              key={i}
              className="bg-layer-1 border border-subtle rounded-xl p-5"
            >
              <div className="flex items-center justify-between mb-3">
                <h4 className="font-semibold text-white">{feature.name}</h4>
                <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                  {feature.priority}
                </span>
              </div>

              <div className="mb-3">
                <div className="flex items-center justify-between text-sm mb-1">
                  <span className="text-muted">Progresso</span>
                  <span className="text-white font-medium">{feature.progress}%</span>
                </div>
                <div className="w-full h-2 bg-layer-2 rounded-full overflow-hidden">
                  <div
                    className="h-full bg-gradient-to-r from-yellow-500 to-amber-500 rounded-full"
                    style={{ width: `${feature.progress}%` }}
                  />
                </div>
              </div>

              <div className="flex items-center gap-2 text-sm">
                <AlertTriangle className="w-4 h-4 text-yellow-400" />
                <span className="text-muted">Bloqueio:</span>
                <span className="text-yellow-400">{feature.blocker}</span>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Not Started Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <XCircle className="w-6 h-6 text-muted" />
          Funcionalidades Não Iniciadas
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <table className="w-full text-sm">
            <thead className="bg-layer-2/50">
              <tr className="text-muted text-xs uppercase">
                <th className="text-left p-4">Funcionalidade</th>
                <th className="text-left p-4">Complexidade</th>
                <th className="text-left p-4">Prioridade</th>
                <th className="text-left p-4">Impacto</th>
              </tr>
            </thead>
            <tbody>
              {notStartedFeatures.map((feature, i) => (
                <tr key={i} className="border-t border-subtle hover:bg-layer-2/30">
                  <td className="p-4 text-secondary">{feature.name}</td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${
                      feature.complexity === "Alta" ? "bg-red-500/20 text-red-400" :
                      feature.complexity === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                      "bg-green-500/20 text-green-400"
                    }`}>
                      {feature.complexity}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                      {feature.priority}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                      {feature.impact}
                    </span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </section>

      {/* Technical Debt */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <AlertTriangle className="w-6 h-6 text-amber-400" />
          Dívidas Técnicas
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* High Priority */}
          <div className="bg-red-500/5 border border-red-500/20 rounded-xl overflow-hidden">
            <div className="bg-red-500/10 px-4 py-3 border-b border-red-500/20">
              <h4 className="font-semibold text-red-400">Alta Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.high.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Medium Priority */}
          <div className="bg-yellow-500/5 border border-yellow-500/20 rounded-xl overflow-hidden">
            <div className="bg-yellow-500/10 px-4 py-3 border-b border-yellow-500/20">
              <h4 className="font-semibold text-yellow-400">Média Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.medium.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Low Priority */}
          <div className="bg-green-500/5 border border-green-500/20 rounded-xl overflow-hidden">
            <div className="bg-green-500/10 px-4 py-3 border-b border-green-500/20">
              <h4 className="font-semibold text-green-400">Baixa Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.low.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Risks */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Riscos Conhecidos
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Technical Risks */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-violet-500/10 px-4 py-3 border-b border-subtle">
              <h4 className="font-semibold text-violet-400">Riscos Técnicos</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.technical.map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-muted">
                    <span className="text-muted">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Business Risks */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-rose-500/10 px-4 py-3 border-b border-subtle">
              <h4 className="font-semibold text-rose-400">Riscos de Negócio</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.business.map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-muted">
                    <span className="text-muted">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Future Evolution */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <TrendingUp className="w-6 h-6 text-cyan-400" />
          Sugestões de Evolução Futura
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Short Term */}
          <div className="bg-gradient-to-b from-cyan-900/30 to-zinc-900 border border-cyan-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-cyan-500/20 rounded-lg flex items-center justify-center">
                <Zap className="w-4 h-4 text-cyan-400" />
              </div>
              <div>
                <h4 className="font-semibold text-cyan-400">Curto Prazo</h4>
                <p className="text-xs text-muted">1-3 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                { name: "Completar Upload YouTube", priority: "Crítica" },
                { name: "Implementar Render Local", priority: "Alta" },
                { name: "Adicionar Testes", priority: "Alta" },
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-cyan-400 mt-0.5" />
                  <div>
                    <p className="text-sm text-white">{item.name}</p>
                    <span className={`text-xs ${getPriorityColor(item.priority)}`}>
                      {item.priority}
                    </span>
                  </div>
                </li>
              ))}
            </ul>
          </div>

          {/* Medium Term */}
          <div className="bg-gradient-to-b from-purple-900/30 to-zinc-900 border border-purple-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center">
                <Target className="w-4 h-4 text-purple-400" />
              </div>
              <div>
                <h4 className="font-semibold text-purple-400">Médio Prazo</h4>
                <p className="text-xs text-muted">3-6 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "Templates de Vídeo",
                "Histórico e Analytics",
                "Melhorias de UX",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-purple-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>

          {/* Long Term */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center">
                <TrendingUp className="w-4 h-4 text-amber-400" />
              </div>
              <div>
                <h4 className="font-semibold text-amber-400">Longo Prazo</h4>
                <p className="text-xs text-muted">6-12 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "API Pública",
                "Marketplace de Assets",
                "Versão Enterprise",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-amber-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Conclusion */}
      <section className="bg-gradient-to-r from-indigo-900/30 via-purple-900/30 to-pink-900/30 border border-purple-500/20 rounded-xl p-6">
        <h3 className="text-xl font-bold text-white mb-4">Conclusão</h3>
        <p className="text-secondary mb-4">
          O ORION está em estágio de{" "}
          <span className="text-green-400 font-semibold">produção funcional</span> com
          as principais features de geração de conteúdo operacionais. Os próximos
          passos críticos são:
        </p>
        <ol className="space-y-2 text-secondary">
          {[
            "Completar a integração de upload YouTube",
            "Implementar render de vídeo completo",
            "Adicionar cobertura de testes",
            "Resolver dívidas técnicas de alta prioridade",
          ].map((item, i) => (
            <li key={i} className="flex items-center gap-3">
              <span className="w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-400 text-sm font-bold">
                {i + 1}
              </span>
              {item}
            </li>
          ))}
        </ol>
        <p className="text-muted mt-4 text-sm">
          O sistema está preparado para escalar e evoluir conforme as necessidades
          dos usuários.
        </p>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-rose-900/20 border border-rose-500/20 rounded-xl">
        <p className="text-sm text-rose-300 italic text-center">
          Este documento reflete o estado atual do ORION e serve como
          roadmap para decisões de desenvolvimento futuro.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/DecisionsTab.tsx`

```
"use client";

import AnimatedSection from "./AnimatedSection";
import {
  Brain,
  GitBranch,
  CheckCircle2,
  AlertTriangle,
  Lightbulb,
  Server,
  Database,
  Mail,
  Workflow,
  Zap,
} from "lucide-react";

export default function DecisionsTab() {
  return (
    <div className="space-y-8">
      {/* Header */}
      <AnimatedSection delay={0}>
        <div className="bg-gradient-to-r from-violet-600/20 to-purple-600/20 border border-violet-500/30 rounded-2xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <GitBranch className="w-8 h-8 text-violet-400" />
            <h2 className="text-2xl font-bold text-white">
              Decisoes Arquiteturais - Claude Code
            </h2>
          </div>
          <p className="text-secondary">
            Registro historico de todas as decisoes arquiteturais, debates e consensos
            alcancados durante o desenvolvimento do ORION. Este documento serve como
            auditoria tecnica e memoria do projeto.
          </p>
        </div>
      </AnimatedSection>

      {/* Sessao 1: O Grande Debate - Janeiro 2026 */}
      <AnimatedSection delay={0.1}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Brain className="w-6 h-6 text-amber-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessao 1: O Grande Debate Arquitetural (Janeiro 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Necessidade de migrar de localStorage para persistencia real em banco de dados,
              implementar workflows duraveis para processos longos (renderizacao de video,
              deep research), e criar sistema de aprovacao humana (human-in-the-loop).
            </p>
          </div>

          {/* Participantes */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Participantes do Debate</h4>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">🤖</span>
                  <span className="font-medium text-white">Claude (Anthropic)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Conservadora e battle-tested. Priorizou estabilidade com Inngest.
                </p>
              </div>
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">🌟</span>
                  <span className="font-medium text-white">Gemini (Google)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Bleeding edge. Descobriu ToolLoopAgent no AI SDK 6.
                </p>
              </div>
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">💬</span>
                  <span className="font-medium text-white">ChatGPT (OpenAI)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Validador critico. Confirmou existencia do SDK 6 e cautela com beta.
                </p>
              </div>
            </div>
          </div>

          {/* Pontos Criticos Identificados */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-red-400 mb-3 flex items-center gap-2">
              <AlertTriangle className="w-5 h-5" />
              Pontos Criticos Identificados
            </h4>
            <div className="space-y-3">
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">1. Vercel Functions Timeout</p>
                <p className="text-muted text-sm">
                  Limite de 300s (5 min) no Vercel Pro. Processos como renderizacao podem levar
                  minutos/horas. Solucao: workflows duraveis externos.
                </p>
              </div>
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">2. Vercel Workflow DevKit em Beta</p>
                <p className="text-muted text-sm">
                  Embora exista, ainda esta em Public Beta. Risco de bugs criticos em producao.
                </p>
              </div>
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">3. AI SDK Versao Atual</p>
                <p className="text-muted text-sm">
                  Projeto usa AI SDK 4.3.19. Para usar ToolLoopAgent, precisa migrar para v6.
                </p>
              </div>
            </div>
          </div>

          {/* Consenso Alcancado */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-green-400 mb-3 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              Consenso Unanime: OPCAO B - Arquitetura Hibrida
            </h4>
            <div className="bg-green-950/30 border border-green-800/50 rounded-lg p-4">
              <p className="text-secondary mb-4">
                Apos debate intenso, as tres IAs chegaram a um consenso:
              </p>
              <ul className="space-y-2 text-sm">
                <li className="flex items-start gap-2">
                  <Zap className="w-4 h-4 text-yellow-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Cerebro (AI SDK 6 + ToolLoopAgent):</strong> Inteligencia
                    de ultima geracao para agentes autonomos.
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Server className="w-4 h-4 text-blue-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Corpo Blindado (Inngest):</strong> Durabilidade,
                    retries automaticos, sleep nativo, battle-tested (100M+ execucoes/dia).
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Database className="w-4 h-4 text-green-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Persistencia (Vercel Postgres + Prisma):</strong> Estado
                    persistente cross-device, relacional, migracao controlada.
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Mail className="w-4 h-4 text-purple-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Notificacao (Resend):</strong> 10K emails/mes gratis
                    para aprovacao humana.
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Stack Final Decidida */}
      <AnimatedSection delay={0.2}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Workflow className="w-6 h-6 text-cyan-400" />
            <h3 className="text-xl font-semibold text-white">
              Stack Tecnica Final Aprovada
            </h3>
          </div>

          <div className="overflow-x-auto">
            <table className="w-full text-sm">
              <thead>
                <tr className="border-b border-subtle">
                  <th className="text-left py-3 px-4 text-muted font-medium">Camada</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Tecnologia</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Justificativa</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Custo</th>
                </tr>
              </thead>
              <tbody>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Intelligence</td>
                  <td className="py-3 px-4 text-cyan-400">AI SDK 6 + ToolLoopAgent</td>
                  <td className="py-3 px-4 text-muted">Agentes autonomos com loop de ferramentas</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Orchestration</td>
                  <td className="py-3 px-4 text-cyan-400">Inngest</td>
                  <td className="py-3 px-4 text-muted">Workflows duraveis, 100K runs/mes free</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Persistence</td>
                  <td className="py-3 px-4 text-cyan-400">Vercel Postgres + Prisma</td>
                  <td className="py-3 px-4 text-muted">256MB incluido no Pro, ORM type-safe</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Storage</td>
                  <td className="py-3 px-4 text-cyan-400">Vercel Blob</td>
                  <td className="py-3 px-4 text-muted">1GB incluido no Pro para videos/audios</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Notifications</td>
                  <td className="py-3 px-4 text-cyan-400">Resend</td>
                  <td className="py-3 px-4 text-muted">10K emails/mes para aprovacao</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr>
                  <td className="py-3 px-4 text-white font-bold">TOTAL</td>
                  <td className="py-3 px-4"></td>
                  <td className="py-3 px-4"></td>
                  <td className="py-3 px-4 text-green-400 font-bold">$20/mes (Vercel Pro)</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </AnimatedSection>

      {/* Arquitetura Visual */}
      <AnimatedSection delay={0.3}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Lightbulb className="w-6 h-6 text-yellow-400" />
            <h3 className="text-xl font-semibold text-white">
              Arquitetura do Pipeline de Video
            </h3>
          </div>

          <div className="bg-zinc-950 rounded-lg p-4 overflow-x-auto">
            <pre className="text-xs sm:text-sm text-secondary whitespace-pre font-mono">
{`┌─────────────────────────────────────────────────────────────────┐
│  AI SDK 6 (ToolLoopAgent)          Inngest                      │
│  ┌─────────────────────┐           ┌─────────────────────┐      │
│  │ Research Agent      │──────────>│ step.run()          │      │
│  │ (Gemini 2.0)        │           │ step.sleep()        │      │
│  └─────────────────────┘           │ step.waitForEvent() │      │
│  ┌─────────────────────┐           │ Retry automatico    │      │
│  │ Script Agent        │──────────>│                     │      │
│  │ (Claude 3.5)        │           └─────────────────────┘      │
│  └─────────────────────┘                    │                   │
│                                             ▼                   │
│                        ┌────────────────────────────────────┐   │
│                        │ Vercel Postgres + Blob             │   │
│                        └────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘

FLUXO DO WORKFLOW:
─────────────────────────────────────────────────────────────────────
1. Deep Research (Gemini)    →  Pesquisa trends e referencias
2. Script Generation (Claude) →  Gera roteiro otimizado
3. AGUARDAR APROVACAO        →  Email + step.waitForEvent('7d')
4. Storyboard Generation     →  Cria cenas com prompts visuais
5. Render (JSON2VIDEO)       →  step.sleep() enquanto renderiza
6. Upload YouTube            →  Com retry automatico`}
            </pre>
          </div>
        </div>
      </AnimatedSection>

      {/* Modelo de Dados */}
      <AnimatedSection delay={0.4}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Database className="w-6 h-6 text-emerald-400" />
            <h3 className="text-xl font-semibold text-white">
              Modelo de Dados (Prisma Schema)
            </h3>
          </div>

          <div className="bg-zinc-950 rounded-lg p-4 overflow-x-auto">
            <pre className="text-xs sm:text-sm text-green-400 whitespace-pre font-mono">
{`model Project {
  id          String         @id @default(cuid())
  name        String
  status      ProjectStatus  @default(DRAFT)
  createdAt   DateTime       @default(now())

  // Relacionamentos
  context     Context?
  research    Research?
  script      Script?
  storyboard  Storyboard?
  render      Render?
  upload      Upload?
  workflow    WorkflowState?
}

enum ProjectStatus {
  DRAFT | RESEARCHING | SCRIPTING | AWAITING_APPROVAL
  APPROVED | RENDERING | UPLOADING | COMPLETED | FAILED
}

model WorkflowState {
  inngestRunId     String?   // ID da execucao no Inngest
  currentStep      String
  awaitingApproval Boolean   @default(false)
  approvalToken    String?   @unique
}`}
            </pre>
          </div>
        </div>
      </AnimatedSection>

      {/* Status de Implementacao */}
      <AnimatedSection delay={0.5}>
        <div className="bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-xl p-6">
          <h3 className="text-xl font-semibold text-white mb-4 flex items-center gap-2">
            <CheckCircle2 className="w-6 h-6 text-green-400" />
            Fases Implementadas
          </h3>
          <div className="space-y-3">
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 1</span>
              <span className="text-green-300 line-through">Setup Prisma + Vercel Postgres + Schema</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 2</span>
              <span className="text-green-300 line-through">Configuracao Inngest + Client + Webhook</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 3</span>
              <span className="text-green-300 line-through">Agentes AI SDK 6 (Research + Script)</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 4</span>
              <span className="text-green-300 line-through">Sistema de Aprovacao + Notificacoes</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 5</span>
              <span className="text-amber-300">Refatoracao Frontend + Migracao localStorage</span>
              <span className="text-amber-400 text-xs">(Em progresso)</span>
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 6</span>
              <span className="text-green-300 line-through">Design System ORION - Tokens, CSS e Documentacao</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
          </div>

          {/* Fase 6 - Design System Details */}
          <div className="mt-6 p-4 bg-cyan-950/30 border border-cyan-800/50 rounded-lg">
            <h4 className="text-sm font-semibold text-cyan-400 mb-3 flex items-center gap-2">
              🎨 Fase 6: Design System ORION (23/01/2026)
            </h4>
            <p className="text-muted text-sm mb-3">
              Sistema de design completo com paleta ORION (azul profundo + vermelho acento),
              glassmorphism, motion funcional e documentacao visual interativa.
            </p>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs font-mono">
              <div className="text-cyan-400">lib/design-tokens.ts</div>
              <div className="text-cyan-400">app/globals.css (atualizado)</div>
              <div className="text-cyan-400">tailwind.config.ts (atualizado)</div>
              <div className="text-cyan-400">components/design-system/ColorSwatch.tsx</div>
              <div className="text-cyan-400">components/design-system/GradientCard.tsx</div>
              <div className="text-cyan-400">components/design-system/TypographySample.tsx</div>
              <div className="text-cyan-400">components/design-system/ComponentPreview.tsx</div>
              <div className="text-cyan-400">app/documentation/design-system/page.tsx</div>
            </div>
          </div>

          <div className="mt-4 p-4 bg-layer-1/50 rounded-lg">
            <h4 className="text-sm font-semibold text-white mb-2">Arquivos Anteriores (Fases 1-4):</h4>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs font-mono">
              <div className="text-muted">prisma/schema.prisma</div>
              <div className="text-muted">lib/db/prisma.ts</div>
              <div className="text-muted">lib/inngest/client.ts</div>
              <div className="text-muted">lib/inngest/functions/video-pipeline.ts</div>
              <div className="text-muted">lib/agents/research-agent.ts</div>
              <div className="text-muted">lib/agents/script-agent.ts</div>
              <div className="text-muted">lib/services/research.service.ts</div>
              <div className="text-muted">lib/services/script.service.ts</div>
              <div className="text-muted">lib/services/notification.service.ts</div>
              <div className="text-muted">app/api/inngest/route.ts</div>
              <div className="text-muted">app/api/approve/route.ts</div>
              <div className="text-muted">app/approve/[token]/page.tsx</div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Sessao 2: Rebranding para ORION - 23/01/2026 */}
      <AnimatedSection delay={0.5}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Zap className="w-6 h-6 text-blue-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessão 2: Rebranding para ORION (23 de Janeiro de 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Decisão de renomear o projeto de &quot;Emergency YouTube&quot; para <strong className="text-white">ORION</strong>,
              visando uma identidade de marca mais profissional, escalável e alinhada com a visão de um sistema
              de automação inteligente de classe enterprise.
            </p>
          </div>

          {/* Data e Motivação */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Motivação</h4>
            <div className="space-y-3">
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">1. Identidade Profissional</p>
<p className="text-muted text-sm">
                  Nome &quot;ORION&quot; transmite inovação, tecnologia e navegação (guia/orientação),
                  alinhado com a proposta de guiar criadores de conteúdo.
                </p>
              </div>
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">2. Escalabilidade de Marca</p>
                <p className="text-muted text-sm">
                  Permite expansão além do YouTube (TikTok, Instagram, podcasts) sem limitação no nome.
                </p>
              </div>
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">3. White Label Implementado</p>
                <p className="text-muted text-sm">
                  Com o Design System ORION já implementado, o rebranding consolida a identidade visual unificada.
                </p>
              </div>
            </div>
          </div>

          {/* Decisao Final */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-green-400 mb-3 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              Decisão Implementada
            </h4>
            <div className="bg-green-950/30 border border-green-800/50 rounded-lg p-4">
              <div className="space-y-2 text-sm">
                <p className="text-secondary">
                  <strong className="text-white">Nome Oficial:</strong> ORION
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Nome Anterior:</strong> Emergency YouTube (mantido em documentação histórica)
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Data:</strong> 23 de Janeiro de 2026
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Logos:</strong> logo-orion-branca-transp-grande.png e pequena.png
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Blob Storage:</strong> orion-storage (criado na Vercel)
                </p>
              </div>
            </div>
          </div>

          {/* Implementacao Tecnica */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Implementação Técnica</h4>
            <div className="space-y-2 text-sm">
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Substituição global: &quot;Emergency YouTube&quot; → &quot;ORION&quot; (17 arquivos)</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">package.json: &quot;emergecy-youtube&quot; → &quot;orion&quot;</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Logos adicionadas em /public/assets/</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Blob Storage &quot;orion-storage&quot; criado na Vercel</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">BLOB_READ_WRITE_TOKEN configurado nas variáveis de ambiente</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Documentação completa atualizada em components/documentation/</span>
              </div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Sessao 3: Visual Upgrade State of the Art - 24/01/2026 */}
      <AnimatedSection delay={0.6}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Zap className="w-6 h-6 text-cyan-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessão 3: Visual Upgrade State of the Art (24 de Janeiro de 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Upgrade visual completo para atingir nível &quot;State of the Art&quot; (Vercel/Linear/Raycast).
              Implementação de visualizações de dados interativas, design tokens forçados, Bento Grid refinado,
              e consistência visual em todas as páginas internas do sistema.
            </p>
          </div>

          {/* PART 1: Analytics Infrastructure */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-cyan-400 mb-3">PART 1: Analytics &amp; Charts Infrastructure</h4>
            <div className="space-y-3">
              <div className="bg-cyan-950/30 border border-cyan-800/50 rounded-lg p-4">
                <p className="text-cyan-300 font-medium mb-2">Instalações</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">recharts (^2.x) - Biblioteca de gráficos React</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">@vercel/analytics - Monitoramento de usuários</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">@vercel/speed-insights - Performance metrics</span>
                  </div>
                </div>
                <p className="text-muted text-xs mt-2">Commit: aac0b1a</p>
              </div>
            </div>
          </div>

          {/* PART 2: Design Tokens Integration */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-blue-400 mb-3">PART 2: Design Tokens Forçados no Tailwind</h4>
            <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
              <p className="text-blue-300 font-medium mb-2">Mudança Crítica: Single Source of Truth</p>
              <p className="text-secondary text-sm mb-3">
                Tailwind config agora importa diretamente de <code className="text-cyan-400">lib/design-tokens.ts</code> ao invés de usar CSS variables.
                Garante consistência absoluta e TypeScript safety.
              </p>
              <div className="space-y-1 text-sm">
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Cores: backgrounds.*, surfaces.*, borders.*, text.*, brand.*, accent.*, semantic.*</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Gradientes: todos os gradients.* mapeados para backgroundImage</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Sombras: designShadows.* com glow variants</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Motion: duration e easing functions do motion.*</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Slate 100-900: Paleta completa com opacidade correta</span>
                </div>
              </div>
              <p className="text-muted text-xs mt-2">Commit: f79f131</p>
            </div>
          </div>

          {/* PART 3: Bento Grid + Recharts */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-emerald-400 mb-3">PART 3: Bento Grid + Recharts + Animations WOW Factor</h4>
            <div className="space-y-3">
              <div className="bg-emerald-950/30 border border-emerald-800/50 rounded-lg p-4">
                <p className="text-emerald-300 font-medium mb-2">Visualizações Interativas (Recharts)</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">AreaChart com gradiente - Disponibilidade API (últimos 60min)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">RadialBarChart - Saúde do Sistema (percentual circular)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Tooltips customizados com tema ORION</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Gradientes dinâmicos nos gráficos (emerald, cyan)</span>
                  </div>
                </div>
              </div>
              <div className="bg-emerald-950/30 border border-emerald-800/50 rounded-lg p-4">
                <p className="text-emerald-300 font-medium mb-2">Micro-interações</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">active:scale-95 em TODOS os botões</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Framer Motion whileHover/whileTap</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">AnimatePresence para transições suaves</span>
                  </div>
                </div>
                <p className="text-muted text-xs mt-2">Commit: bfe7c8d</p>
              </div>
            </div>
          </div>

          {/* PART 4: Design Consistency */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">PART 4: Consistência de Design nas Páginas Internas</h4>
            <div className="bg-violet-950/30 border border-violet-800/50 rounded-lg p-4">
              <p className="text-violet-300 font-medium mb-2">Workflow Page Modernização</p>
              <div className="space-y-1 text-sm mb-3">
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">20+ substituições: zinc-*/gray-* → design tokens (text-muted, bg-layer-*, etc.)</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">100% consistente com ORION design system</span>
                </div>
              </div>
              <p className="text-muted text-sm">
                <strong className="text-white">Próximo:</strong> 13 arquivos restantes identificados para atualização
                (step/1-input, step/2-research, step/4-proposal, settings, approve/*, documentation/*)
              </p>
              <p className="text-muted text-xs mt-2">Commit: 5578edd</p>
            </div>
          </div>

          {/* Status Atual */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-amber-400 mb-3 flex items-center gap-2">
              <AlertTriangle className="w-5 h-5" />
              Status Atual e Próximos Passos
            </h4>
            <div className="bg-amber-950/30 border border-amber-800/50 rounded-lg p-4">
              <p className="text-amber-300 font-medium mb-2">Em Progresso</p>
              <div className="space-y-1 text-sm">
                <div className="text-secondary">✅ Dashboard: State-of-the-art com Recharts</div>
                <div className="text-secondary">✅ Design Tokens: Fully integrated</div>
                <div className="text-secondary">✅ Workflow Page: Modernizado</div>
                <div className="text-amber-300">⏳ Páginas Internas: 13 arquivos pendentes (step/*, settings, approve/*, documentation/*)</div>
                <div className="text-amber-300">⏳ Glow Effects: Aplicar referências visuais (AlphaGPT style)</div>
                <div className="text-amber-300">⏳ Logo ORION: Integrar marca oficial</div>
                <div className="text-amber-300">⏳ YouTube Connection: Corrigir loading infinito</div>
              </div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Footer */}
      <AnimatedSection delay={0.7}>
        <div className="bg-layer-2/30 rounded-xl p-4 text-center">
          <p className="text-muted text-sm">
            Documento atualizado em: 24/01/2026 | Última decisão: Visual Upgrade State of the Art (em progresso)
          </p>
          <p className="text-disabled text-xs mt-1">
            Participantes: Claude (Anthropic), Gemini (Google), ChatGPT (OpenAI) | Deploy: Vercel Pro
          </p>
        </div>
      </AnimatedSection>
    </div>
  );
}

```

---
#### `components/documentation/GenesisTab.tsx`

```
"use client";

import {
  Lightbulb,
  Target,
  Code2,
  CheckCircle2,
  XCircle,
  Puzzle,
  Layers,
  Eye,
  Shield,
  FileText,
  Zap,
  Brain,
  Users,
  Clock,
  DollarSign,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

export default function GenesisTab() {
  return (
    <div className="space-y-12">
      {/* Hero Section */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-900/50 via-indigo-900/50 to-purple-900/50 border border-purple-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-purple-500/20 rounded-xl">
              <Lightbulb className="w-8 h-8 text-purple-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Por Que Este Sistema Foi Criado
              </h2>
              <p className="text-purple-300">A origem e propósito fundamental</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O <strong className="text-white">ORION</strong> (anteriormente ORION) nasceu de uma necessidade
            real e urgente: <span className="text-purple-400 font-semibold">democratizar a produção
            de vídeos profissionais para YouTube</span>, eliminando as barreiras técnicas, financeiras
            e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.
          </p>
        </div>
      </section>

      {/* The Problem */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Target className="w-6 h-6 text-red-400" />
            O Problema Fundamental
          </h3>
          <CopyMdButtons
            content="Barreiras para criar vídeos: 1) Habilidades técnicas (edição, design, áudio), 2) Investimento (equipamentos, software), 3) Tempo extensivo (8-20h por vídeo), 4) Conhecimento SEO"
            markdownContent={`## O Problema Fundamental\n\nCriar vídeos de qualidade para YouTube tradicionalmente exige:\n\n1. **Habilidades Técnicas** - Edição de vídeo, design gráfico e produção de áudio\n2. **Investimento** - Equipamentos, software e possivelmente equipe\n3. **Tempo Extensivo** - Um vídeo de 10 min pode levar 8-20 horas de produção\n4. **Conhecimento SEO** - Otimização e descoberta do conteúdo\n\n> Esta barreira exclui milhões de potenciais criadores que têm conhecimento valioso mas não os recursos para transformá-lo em conteúdo visual.`}
            filename="problema.md"
          />
        </div>
        <p className="text-muted mb-6">
          Criar vídeos de qualidade para YouTube tradicionalmente exige:
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {[
            {
              icon: Code2,
              title: "Habilidades Técnicas",
              description: "Edição de vídeo, design gráfico e produção de áudio",
              color: "text-red-400",
              bg: "bg-red-500/10",
              border: "border-red-500/20",
            },
            {
              icon: DollarSign,
              title: "Investimento",
              description: "Equipamentos, software e possivelmente equipe",
              color: "text-orange-400",
              bg: "bg-orange-500/10",
              border: "border-orange-500/20",
            },
            {
              icon: Clock,
              title: "Tempo Extensivo",
              description: "Um vídeo de 10 min pode levar 8-20 horas de produção",
              color: "text-yellow-400",
              bg: "bg-yellow-500/10",
              border: "border-yellow-500/20",
            },
            {
              icon: Brain,
              title: "Conhecimento SEO",
              description: "Otimização e descoberta do conteúdo",
              color: "text-amber-400",
              bg: "bg-amber-500/10",
              border: "border-amber-500/20",
            },
          ].map((item, index) => (
            <div
              key={index}
              className={`${item.bg} ${item.border} border rounded-xl p-5`}
            >
              <item.icon className={`w-8 h-8 ${item.color} mb-3`} />
              <h4 className="font-semibold text-white mb-2">{item.title}</h4>
              <p className="text-sm text-muted">{item.description}</p>
            </div>
          ))}
        </div>
        <div className="mt-6 p-4 bg-layer-2/50 rounded-xl border border-subtle">
          <p className="text-secondary italic">
            Essa barreira exclui milhões de potenciais criadores que têm conhecimento
            valioso mas não os recursos para transformá-lo em conteúdo visual.
          </p>
        </div>
      </section>

      {/* The Solution */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Zap className="w-6 h-6 text-green-400" />
            A Solução Proposta
          </h3>
          <CopyMdButtons
            content="ORION: 1) Recebe tema, 2) Pesquisa conteúdo, 3) Gera roteiro/trilha/thumbnail/descrição, 4) Cria storyboard, 5) Renderiza vídeo, 6) Publica no YouTube"
            markdownContent={`## A Solução Proposta\n\nO ORION é um sistema de automação inteligente que:\n\n1. Recebe apenas o tema/tópico do vídeo\n2. Pesquisa e estrutura o conteúdo automaticamente\n3. Gera roteiro, trilha sonora, thumbnail e descrição\n4. Cria o storyboard com seleção de mídias\n5. Renderiza o vídeo final\n6. Publica diretamente no YouTube`}
            filename="solucao.md"
          />
        </div>
        <div className="bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/20 rounded-xl p-6">
          <p className="text-secondary mb-6">
            O ORION é um <strong className="text-green-400">sistema de automação inteligente</strong> que:
          </p>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              { num: "1", text: "Recebe apenas o tema/tópico do vídeo" },
              { num: "2", text: "Pesquisa e estrutura o conteúdo automaticamente" },
              { num: "3", text: "Gera roteiro, trilha sonora, thumbnail e descrição" },
              { num: "4", text: "Cria o storyboard com seleção de mídias" },
              { num: "5", text: "Renderiza o vídeo final" },
              { num: "6", text: "Publica diretamente no YouTube" },
            ].map((step, index) => (
              <div
                key={index}
                className="flex items-start gap-3 p-3 bg-layer-1/50 rounded-lg"
              >
                <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
                  <span className="text-white font-bold text-sm">{step.num}</span>
                </div>
                <p className="text-secondary text-sm">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Design Guidelines */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <FileText className="w-6 h-6 text-blue-400" />
            Diretrizes de Design (Prompts Fundacionais)
          </h3>
          <CopyMdButtons
            content="Diretrizes: 1) Automação Máxima com Controle Humano, 2) Qualidade Profissional, 3) Interface Intuitiva, 4) Escalabilidade"
            markdownContent={`## Diretrizes de Design\n\n### 1. Automação Máxima, Controle Humano\n- O sistema automatiza tarefas repetitivas e técnicas\n- O humano mantém controle sobre decisões criativas e editoriais\n- Cada etapa pode ser revisada e modificada antes de avançar\n\n### 2. Qualidade de Produção Profissional\n- Outputs devem ser indistinguíveis de produções manuais\n- Padrões de YouTube Creator Academy são referência\n- SEO e engagement são prioridades arquiteturais\n\n### 3. Interface Intuitiva\n- Zero curva de aprendizado para operações básicas\n- Interface guiada por workflow linear\n- Feedback visual claro em cada etapa\n\n### 4. Escalabilidade\n- Suportar múltiplos vídeos em paralelo\n- Funcionar com diferentes nichos de conteúdo\n- Permitir personalização de diretrizes por projeto`}
            filename="diretrizes-design.md"
          />
        </div>
        <div className="space-y-4">
          {[
            {
              title: "Automação Máxima, Controle Humano",
              points: [
                "O sistema automatiza tarefas repetitivas e técnicas",
                "O humano mantém controle sobre decisões criativas e editoriais",
                "Cada etapa pode ser revisada e modificada antes de avançar",
              ],
              icon: Users,
              color: "indigo",
            },
            {
              title: "Qualidade de Produção Profissional",
              points: [
                "Outputs devem ser indistinguíveis de produções manuais",
                "Padrões de YouTube Creator Academy são referência",
                "SEO e engagement são prioridades arquiteturais",
              ],
              icon: Target,
              color: "purple",
            },
            {
              title: "Interface Intuitiva",
              points: [
                "Zero curva de aprendizado para operações básicas",
                "Interface guiada por workflow linear",
                "Feedback visual claro em cada etapa",
              ],
              icon: Eye,
              color: "cyan",
            },
            {
              title: "Escalabilidade",
              points: [
                "Suportar múltiplos vídeos em paralelo",
                "Funcionar com diferentes nichos de conteúdo",
                "Permitir personalização de diretrizes por projeto",
              ],
              icon: Layers,
              color: "green",
            },
          ].map((guideline, index) => (
            <div
              key={index}
              className={`bg-${guideline.color}-500/5 border border-${guideline.color}-500/20 rounded-xl p-5`}
              style={{
                backgroundColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.05)`,
                borderColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.2)`,
              }}
            >
              <div className="flex items-center gap-3 mb-3">
                <guideline.icon className={`w-6 h-6 text-${guideline.color}-400`} />
                <h4 className="font-semibold text-white">{guideline.title}</h4>
              </div>
              <ul className="space-y-2">
                {guideline.points.map((point, i) => (
                  <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                    {point}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Architectural Decisions */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Puzzle className="w-6 h-6 text-amber-400" />
            Decisões Arquiteturais Derivadas
          </h3>
          <CopyMdButtons
            content="Por que Next.js 15? App Router, Server Components, API Routes, Vercel nativo. Por que Zustand? Simplicidade, persistência localStorage, TypeScript first. Por que 6 Etapas? Espelha produção real, validação humana, rollback."
            markdownContent={`## Decisões Arquiteturais\n\n### Por que Next.js 15?\n- App Router para roteamento moderno\n- Server Components para performance\n- API Routes para backend integrado\n- Vercel como deploy nativo\n\n### Por que Zustand?\n- Simplicidade sobre complexidade\n- Persistência nativa com localStorage\n- TypeScript first\n- Minimal boilerplate\n\n### Por que 6 Etapas?\n- Espelha produção real de vídeo\n- Validação humana em cada transição\n- Rollback para etapas anteriores\n- Clareza sobre status atual`}
            filename="decisoes-arquiteturais.md"
          />
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-zinc-700 to-zinc-800 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">N</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Next.js 15?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>App Router para roteamento moderno</li>
              <li>Server Components para performance</li>
              <li>API Routes para backend integrado</li>
              <li>Vercel como deploy nativo</li>
            </ul>
          </div>
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-amber-600 to-yellow-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">Z</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Zustand?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>Simplicidade sobre complexidade</li>
              <li>Persistência nativa com localStorage</li>
              <li>TypeScript first</li>
              <li>Minimal boilerplate</li>
            </ul>
          </div>
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">6</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que 6 Etapas?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>Espelha produção real de vídeo</li>
              <li>Validação humana em cada transição</li>
              <li>Rollback para etapas anteriores</li>
              <li>Clareza sobre status atual</li>
            </ul>
          </div>
        </div>
      </section>

      {/* What the system does/doesn't do */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Layers className="w-6 h-6 text-cyan-400" />
          Elementos Intencionais
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="bg-green-900/20 border border-green-500/20 rounded-xl p-5">
            <h4 className="font-bold text-green-400 mb-4 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              O que o sistema FAZ:
            </h4>
            <ul className="space-y-3">
              {[
                "Pesquisa profunda sobre qualquer tema",
                "Geração de roteiros otimizados para engagement",
                "Seleção automática de mídia relevante",
                "Composição de vídeo com narração",
                "Upload direto para YouTube",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                  <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
          <div className="bg-red-900/20 border border-red-500/20 rounded-xl p-5">
            <h4 className="font-bold text-red-400 mb-4 flex items-center gap-2">
              <XCircle className="w-5 h-5" />
              O que o sistema NÃO FAZ (exclusões conscientes):
            </h4>
            <ul className="space-y-3">
              {[
                "Não substitui a voz humana",
                "Não gera conteúdo controverso",
                "Não garante viralização",
                "Não armazena vídeos eternamente",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                  <XCircle className="w-4 h-4 text-red-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Design Principles */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Princípios de Design
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {[
            {
              num: "1",
              title: "Transparência sobre Magia",
              description:
                "O sistema mostra claramente o que está fazendo em cada etapa, evitando caixas pretas que frustram usuários.",
            },
            {
              num: "2",
              title: "Falhas Graceful",
              description:
                "Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando completamente.",
            },
            {
              num: "3",
              title: "Dados Locais",
              description:
                "Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.",
            },
            {
              num: "4",
              title: "Documentação Viva",
              description:
                "Este próprio módulo é parte do sistema, não um documento externo que envelhece.",
            },
          ].map((principle, index) => (
            <div
              key={index}
              className="bg-layer-1/50 border border-subtle rounded-xl p-5 flex gap-4"
            >
              <div className="w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                <span className="text-violet-400 font-bold">{principle.num}</span>
              </div>
              <div>
                <h4 className="font-semibold text-white mb-1">{principle.title}</h4>
                <p className="text-sm text-muted">{principle.description}</p>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-purple-900/20 border border-purple-500/20 rounded-xl">
        <p className="text-sm text-purple-300 italic text-center">
          Este documento representa a intenção fundacional do sistema ORION,
          servindo como referência para decisões futuras e transferência de contexto entre IAs.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/IntegrationsTab.tsx`

```
"use client";

import {
  Plug,
  AlertCircle,
  ArrowRight,
  Shield,
  Server,
  Database,
  Key,
  RefreshCw,
  Lock,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

// API/Service logos as simple text badges (would be real logos in production)
const ServiceLogo = ({ name, color }: { name: string; color: string }) => (
  <div
    className={`w-12 h-12 rounded-xl bg-gradient-to-br ${color} flex items-center justify-center text-white font-bold text-lg shadow-lg`}
  >
    {name.charAt(0)}
  </div>
);

export default function IntegrationsTab() {
  const integrations = [
    {
      name: "Inngest",
      logo: "I",
      gradient: "from-emerald-500 to-green-600",
      function: "Orquestração de workflows duráveis e pipelines de vídeo",
      criticality: "Crítica",
      criticalityColor: "bg-red-500/20 text-red-400 font-bold",
      model: "Event-driven Workflow",
      use: "Video pipeline, aprovação humana, retries",
      auth: "API Keys (INNGEST_EVENT_KEY, INNGEST_SIGNING_KEY)",
      endpoints: ["/api/inngest", "step.run()", "step.waitForEvent()"],
    },
    {
      name: "Resend",
      logo: "R",
      gradient: "from-violet-500 to-indigo-600",
      function: "Envio de emails transacionais e notificações",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "REST API",
      use: "Aprovação de roteiros, alertas",
      auth: "API Key (RESEND_API_KEY)",
      endpoints: ["POST /emails"],
    },
    {
      name: "Anthropic Claude",
      logo: "C",
      gradient: "from-amber-500 to-orange-600",
      function: "Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Claude 3.5 Sonnet / Claude 3 Opus",
      use: "Roteiros, análise, estruturação",
      auth: "API Key (ANTHROPIC_API_KEY)",
      endpoints: ["POST /v1/messages"],
    },
    {
      name: "Google Gemini",
      logo: "G",
      gradient: "from-blue-500 to-indigo-600",
      function: "Deep Research e análise de tendências",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Gemini 2.0 Flash",
      use: "Research Agent, análise de canal",
      auth: "API Key (GOOGLE_GENERATIVE_AI_API_KEY)",
      endpoints: [],
    },
    {
      name: "OpenAI",
      logo: "O",
      gradient: "from-green-500 to-emerald-600",
      function: "Geração de imagens e modelos alternativos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "GPT-4o, DALL-E 3",
      use: "Thumbnails, imagens complementares",
      auth: "API Key (OPENAI_API_KEY)",
      endpoints: ["POST /v1/chat/completions", "POST /v1/images/generations"],
    },
    {
      name: "YouTube Data API",
      logo: "Y",
      gradient: "from-red-500 to-red-600",
      function: "Upload de vídeos e gerenciamento de canal",
      criticality: "Crítica",
      criticalityColor: "bg-red-500/20 text-red-400 font-bold",
      model: "v3",
      use: "Upload, metadados, thumbnails",
      auth: "OAuth 2.0",
      endpoints: ["youtube.upload", "youtube.readonly"],
    },
    {
      name: "Pexels",
      logo: "P",
      gradient: "from-teal-500 to-cyan-600",
      function: "Busca de imagens e vídeos stock gratuitos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "REST API",
      use: "B-roll, imagens de cena",
      auth: "API Key (PEXELS_API_KEY)",
      endpoints: ["GET /v1/search", "GET /videos/search"],
    },
    {
      name: "Pixabay",
      logo: "X",
      gradient: "from-lime-500 to-green-600",
      function: "Busca alternativa de mídia stock",
      criticality: "Baixa",
      criticalityColor: "bg-green-500/20 text-green-400",
      model: "REST API",
      use: "Fallback para Pexels",
      auth: "API Key (PIXABAY_API_KEY)",
      endpoints: [],
    },
    {
      name: "ElevenLabs",
      logo: "E",
      gradient: "from-violet-500 to-purple-600",
      function: "Text-to-Speech de alta qualidade",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Multilingual v2",
      use: "Narração do vídeo",
      auth: "API Key (ELEVENLABS_API_KEY)",
      endpoints: ["POST /v1/text-to-speech"],
    },
    {
      name: "Replicate",
      logo: "R",
      gradient: "from-pink-500 to-rose-600",
      function: "Geração de imagens via modelos open-source",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "Flux, SDXL",
      use: "Thumbnails, arte conceitual",
      auth: "API Token (REPLICATE_API_TOKEN)",
      endpoints: ["POST /v1/predictions"],
    },
  ];

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-green-900/50 via-emerald-900/50 to-green-900/50 border border-green-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-green-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-green-500/20 rounded-xl">
              <Plug className="w-8 h-8 text-green-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral das Integrações
              </h2>
              <p className="text-green-300">Arquitetura de conexões externas</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O ORION integra-se com{" "}
            <span className="text-green-400 font-semibold">múltiplos serviços externos</span>{" "}
            para fornecer suas funcionalidades. Cada integração tem um propósito
            específico e nível de criticidade definido.
          </p>
        </div>
      </section>

      {/* Integration Cards */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Server className="w-6 h-6 text-emerald-400" />
            APIs e Serviços Integrados
          </h3>
          <CopyMdButtons
            content={integrations.map(api => `${api.name}: ${api.function}`).join('\n')}
            markdownContent={`## APIs e Serviços Integrados\n\n${integrations.map(api =>
              `### ${api.name}\n- **Função:** ${api.function}\n- **Criticidade:** ${api.criticality}\n- **Modelo:** ${api.model}\n- **Uso:** ${api.use}\n- **Auth:** ${api.auth}`
            ).join('\n\n')}`}
            filename="apis-integradas.md"
          />
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {integrations.map((api, index) => (
            <div
              key={index}
              className="bg-layer-1 border border-subtle rounded-xl p-6 hover:border-subtle transition-colors"
            >
              <div className="flex items-start gap-4 mb-4">
                <ServiceLogo name={api.name} color={api.gradient} />
                <div className="flex-1">
                  <div className="flex items-center gap-2 mb-1">
                    <h4 className="font-bold text-white">{api.name}</h4>
                    <span className={`px-2 py-0.5 rounded text-xs ${api.criticalityColor}`}>
                      {api.criticality}
                    </span>
                  </div>
                  <p className="text-sm text-muted">{api.function}</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <p className="text-xs text-muted uppercase mb-1">Modelo/Versão</p>
                  <p className="text-secondary">{api.model}</p>
                </div>
                <div>
                  <p className="text-xs text-muted uppercase mb-1">Uso Principal</p>
                  <p className="text-secondary">{api.use}</p>
                </div>
              </div>

              <div className="mt-4 pt-4 border-t border-subtle">
                <div className="flex items-center gap-2 text-xs text-muted">
                  <Key className="w-3 h-3" />
                  <span>{api.auth}</span>
                </div>
                {api.endpoints.length > 0 && (
                  <div className="flex flex-wrap gap-1 mt-2">
                    {api.endpoints.map((endpoint, i) => (
                      <code
                        key={i}
                        className="px-2 py-1 bg-layer-2 rounded text-xs text-muted font-mono"
                      >
                        {endpoint}
                      </code>
                    ))}
                  </div>
                )}
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Connection Diagram */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Plug className="w-6 h-6 text-cyan-400" />
            Diagrama de Conexões
          </h3>
          <CopyMdButtons
            content="Diagrama de Conexões: IA Providers (Anthropic, Google Gemini, OpenAI, Replicate), Media Services (Pexels, Pixabay, ElevenLabs, Replicate Video), Video Platform (YouTube Data API)"
            markdownContent={`## Diagrama de Conexões\n\n### IA PROVIDERS\n- Anthropic Claude\n- Google Gemini\n- OpenAI GPT-4\n- Replicate\n\n### MEDIA SERVICES\n- Pexels Images\n- Pixabay Videos\n- ElevenLabs TTS\n- Replicate Video\n\n### VIDEO PLATFORM\n- YouTube Data API v3`}
            filename="diagrama-conexoes.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-8">
          <div className="text-center mb-8">
            <div className="inline-block bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl px-8 py-4">
              <p className="text-white font-bold text-lg">EMERGENCY YOUTUBE</p>
              <p className="text-white/70 text-sm">Next.js App</p>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {/* Orchestration */}
            <div className="bg-emerald-500/5 border border-emerald-500/20 rounded-xl p-5">
              <h4 className="font-bold text-emerald-400 mb-4 text-center">ORCHESTRATION</h4>
              <div className="space-y-3">
                {[
                  { name: "Inngest", color: "from-emerald-500 to-green-600" },
                  { name: "Resend Email", color: "from-violet-500 to-indigo-600" },
                  { name: "Prisma ORM", color: "from-cyan-500 to-blue-600" },
                ].map((service, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${service.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {service.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{service.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* IA Providers */}
            <div className="bg-amber-500/5 border border-amber-500/20 rounded-xl p-5">
              <h4 className="font-bold text-amber-400 mb-4 text-center">IA PROVIDERS</h4>
              <div className="space-y-3">
                {[
                  { name: "Anthropic Claude", color: "from-amber-500 to-orange-600" },
                  { name: "Google Gemini", color: "from-blue-500 to-indigo-600" },
                  { name: "OpenAI GPT-4", color: "from-green-500 to-emerald-600" },
                  { name: "Replicate", color: "from-pink-500 to-rose-600" },
                ].map((provider, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${provider.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {provider.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{provider.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Media Services */}
            <div className="bg-cyan-500/5 border border-cyan-500/20 rounded-xl p-5">
              <h4 className="font-bold text-cyan-400 mb-4 text-center">MEDIA SERVICES</h4>
              <div className="space-y-3">
                {[
                  { name: "Pexels Images", color: "from-teal-500 to-cyan-600" },
                  { name: "Pixabay Videos", color: "from-lime-500 to-green-600" },
                  { name: "ElevenLabs TTS", color: "from-violet-500 to-purple-600" },
                  { name: "JSON2VIDEO", color: "from-pink-500 to-rose-600" },
                ].map((service, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${service.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {service.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{service.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Video Platform */}
            <div className="bg-red-500/5 border border-red-500/20 rounded-xl p-5">
              <h4 className="font-bold text-red-400 mb-4 text-center">VIDEO PLATFORM</h4>
              <div className="flex flex-col items-center justify-center h-[calc(100%-2rem)]">
                <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white text-2xl font-bold mb-3">
                  Y
                </div>
                <span className="text-secondary font-medium">YouTube Data API</span>
                <span className="text-xs text-muted mt-1">v3</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Data Flow */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <ArrowRight className="w-6 h-6 text-blue-400" />
            Fluxo Real de Dados
          </h3>
          <CopyMdButtons
            content="Fluxos: 1) Geração de Roteiro (Usuário → API → Anthropic → Roteiro → UI), 2) Geração de Thumbnail (Roteiro → API → Replicate/DALL-E → Imagem → Preview), 3) Upload YouTube (Vídeo → API → OAuth → YouTube → URL)"
            markdownContent={`## Fluxo Real de Dados\n\n### 1. Geração de Roteiro\nUsuário (Input tema) → API (/proposal/script) → Anthropic (Claude API) → Roteiro (Estruturado) → Frontend (UI)\n\n### 2. Geração de Thumbnail\nRoteiro (Contexto) → API (/images/generate) → Replicate/DALL-E → Imagem (Base64) → Frontend (Preview)\n\n### 3. Upload para YouTube\nVídeo (Renderizado) → API (/youtube/upload) → OAuth 2.0 (Auth) → YouTube (Data API) → Publicado (URL)`}
            filename="fluxo-dados.md"
          />
        </div>

        <div className="space-y-6">
          {/* Script Generation Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">1. Geração de Roteiro</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Usuário", sub: "Input (tema)" },
                { label: "API", sub: "/proposal/script" },
                { label: "Anthropic", sub: "Claude API" },
                { label: "Roteiro", sub: "Estruturado" },
                { label: "Frontend", sub: "UI" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* Thumbnail Generation Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">2. Geração de Thumbnail</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Roteiro", sub: "Contexto" },
                { label: "API", sub: "/images/generate" },
                { label: "Replicate", sub: "ou DALL-E" },
                { label: "Imagem", sub: "Base64" },
                { label: "Frontend", sub: "Preview" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* YouTube Upload Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">3. Upload para YouTube</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Vídeo", sub: "Renderizado" },
                { label: "API", sub: "/youtube/upload" },
                { label: "OAuth 2.0", sub: "Auth" },
                { label: "YouTube", sub: "Data API" },
                { label: "Publicado", sub: "URL" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Security */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Shield className="w-6 h-6 text-violet-400" />
            Observações de Autenticação e Segurança
          </h3>
          <CopyMdButtons
            content="Segurança: API Keys Sistema (Variáveis ambiente Vercel), API Keys Usuário (localStorage criptografado), OAuth Tokens (Cookie httpOnly). Fallbacks: Anthropic→Gemini, Pexels→Pixabay, ElevenLabs→TTS alternativo"
            markdownContent={`## Autenticação e Segurança\n\n### Armazenamento de Credenciais\n- **API Keys (Sistema):** Variáveis de ambiente (Vercel) - Não expostas ao cliente\n- **API Keys (Usuário):** localStorage (browser) - Criptografadas localmente\n- **OAuth Tokens:** Cookie httpOnly - Sessão segura\n\n### Fallback e Redundância\n- Anthropic → Google Gemini\n- Pexels → Pixabay\n- ElevenLabs → TTS alternativo`}
            filename="seguranca.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Credential Storage */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <Database className="w-5 h-5 text-amber-400" />
              Armazenamento de Credenciais
            </h4>
            <div className="space-y-3">
              {[
                { type: "API Keys (Sistema)", local: "Variáveis de ambiente (Vercel)", security: "Não expostas ao cliente" },
                { type: "API Keys (Usuário)", local: "localStorage (browser)", security: "Criptografadas localmente" },
                { type: "OAuth Tokens", local: "Cookie httpOnly", security: "Sessão segura" },
              ].map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.type}</p>
                  <p className="text-xs text-muted">{item.local}</p>
                  <p className="text-xs text-green-400 mt-1 flex items-center gap-1">
                    <Lock className="w-3 h-3" />
                    {item.security}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Fallback & Redundancy */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <RefreshCw className="w-5 h-5 text-cyan-400" />
              Fallback e Redundância
            </h4>
            <div className="space-y-4">
              {[
                {
                  primary: "Anthropic",
                  fallback: "Google Gemini",
                  icon: AlertCircle,
                },
                {
                  primary: "Pexels",
                  fallback: "Pixabay",
                  icon: AlertCircle,
                },
                {
                  primary: "ElevenLabs",
                  fallback: "TTS alternativo",
                  icon: AlertCircle,
                },
              ].map((item, i) => (
                <div key={i} className="flex items-center gap-3">
                  <div className="flex-1 p-2 bg-layer-2 rounded text-center">
                    <p className="text-sm text-white">{item.primary}</p>
                  </div>
                  <item.icon className="w-4 h-4 text-yellow-400" />
                  <div className="flex-1 p-2 bg-layer-2/50 rounded text-center border border-dashed border-subtle">
                    <p className="text-sm text-muted">{item.fallback}</p>
                  </div>
                </div>
              ))}
            </div>
            <p className="text-xs text-muted mt-4">
              Se o serviço primário falhar, o sistema tenta automaticamente o fallback.
            </p>
          </div>
        </div>
      </section>

      {/* OAuth Flow */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Key className="w-6 h-6 text-red-400" />
            Fluxo OAuth (YouTube)
          </h3>
          <CopyMdButtons
            content="Fluxo OAuth: 1) Usuário clica Conectar → 2) Redirect Google OAuth → 3) Autoriza escopos → 4) Callback com código → 5) Tokens armazenados"
            markdownContent={`## Fluxo OAuth (YouTube)\n\n1. Usuário clica em Conectar YouTube\n2. Redirect para Google OAuth\n3. Usuário autoriza escopos\n4. Callback com código\n5. Tokens armazenados`}
            filename="oauth-flow.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
            {[
              { num: "1", text: "Usuário clica em Conectar YouTube" },
              { num: "2", text: "Redirect para Google OAuth" },
              { num: "3", text: "Usuário autoriza escopos" },
              { num: "4", text: "Callback com código" },
              { num: "5", text: "Tokens armazenados" },
            ].map((step, i) => (
              <div key={i} className="text-center">
                <div className="w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-2">
                  <span className="text-red-400 font-bold">{step.num}</span>
                </div>
                <p className="text-xs text-muted">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-green-900/20 border border-green-500/20 rounded-xl">
        <p className="text-sm text-green-300 italic text-center">
          Este documento detalha todas as integrações do ORION, seus fluxos de dados
          e considerações de segurança.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/ShareButtons.tsx`

```
"use client";

import { useState } from "react";
import { Share2, Link2, Check, MessageCircle, Mail, X } from "lucide-react";
import { useShare } from "@/lib/share-context";

export default function ShareButtons() {
  const { canShare, generateShareLink } = useShare();
  const [showModal, setShowModal] = useState(false);
  const [shareUrl, setShareUrl] = useState("");
  const [copied, setCopied] = useState(false);

  if (!canShare) return null;

  const handleShare = () => {
    const url = generateShareLink();
    setShareUrl(url);
    setShowModal(true);
  };

  const copyToClipboard = async () => {
    try {
      await navigator.clipboard.writeText(shareUrl);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Failed to copy:", err);
    }
  };

  const shareViaWhatsApp = () => {
    const text = encodeURIComponent(
      `Confira a documentação do ORION: ${shareUrl}`
    );
    window.open(`https://wa.me/?text=${text}`, "_blank");
  };

  const shareViaEmail = () => {
    const subject = encodeURIComponent("Documentação ORION");
    const body = encodeURIComponent(
      `Olá!\n\nConfira a documentação do ORION:\n${shareUrl}\n\nAtenciosamente.`
    );
    window.open(`mailto:?subject=${subject}&body=${body}`, "_blank");
  };

  return (
    <>
      <button
        onClick={handleShare}
        className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 rounded-lg text-white text-sm font-medium transition-all shadow-lg shadow-green-500/20"
      >
        <Share2 className="w-4 h-4" />
        Compartilhar
      </button>

      {/* Modal de Compartilhamento */}
      {showModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200">
          <div className="bg-layer-1 border border-subtle rounded-2xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-bold text-white flex items-center gap-2">
                <Share2 className="w-5 h-5 text-green-400" />
                Compartilhar Documentação
              </h3>
              <button
                onClick={() => setShowModal(false)}
                className="p-1.5 hover:bg-layer-2 rounded-lg transition-colors"
              >
                <X className="w-5 h-5 text-muted" />
              </button>
            </div>

            <p className="text-muted text-sm mb-4">
              Quem receber este link poderá visualizar a documentação, mas{" "}
              <strong className="text-amber-400">não poderá copiar conteúdos nem compartilhar novamente</strong>.
            </p>

            {/* Link Display */}
            <div className="bg-layer-2/50 border border-subtle rounded-xl p-3 mb-4">
              <p className="text-xs text-muted mb-2">Link de Compartilhamento:</p>
              <div className="flex items-center gap-2">
                <input
                  type="text"
                  value={shareUrl}
                  readOnly
                  className="flex-1 bg-transparent text-secondary text-sm outline-none truncate"
                />
                <button
                  onClick={copyToClipboard}
                  className={`p-2 rounded-lg transition-all ${
                    copied
                      ? "bg-green-500/20 text-green-400"
                      : "bg-zinc-700 text-muted hover:bg-zinc-600 hover:text-white"
                  }`}
                  title={copied ? "Copiado!" : "Copiar link"}
                >
                  {copied ? <Check className="w-4 h-4" /> : <Link2 className="w-4 h-4" />}
                </button>
              </div>
            </div>

            {/* Share Options */}
            <div className="grid grid-cols-2 gap-3">
              <button
                onClick={shareViaWhatsApp}
                className="flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-500 rounded-xl text-white font-medium transition-all"
              >
                <MessageCircle className="w-5 h-5" />
                WhatsApp
              </button>
              <button
                onClick={shareViaEmail}
                className="flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-white font-medium transition-all"
              >
                <Mail className="w-5 h-5" />
                Email
              </button>
            </div>

            {/* Info Box */}
            <div className="mt-4 p-3 bg-amber-500/10 border border-amber-500/20 rounded-xl">
              <p className="text-xs text-amber-300">
                <strong>Proteções ativas:</strong> O link compartilhado terá proteção contra cópia de texto,
                seleção de conteúdo e não mostrará opções de compartilhamento para o visitante.
              </p>
            </div>
          </div>
        </div>
      )}
    </>
  );
}

```

---
#### `components/documentation/SystemVisionTab.tsx`

```
"use client";

import {
  Play,
  Search,
  FileText,
  Film,
  Clapperboard,
  Upload,
  Users,
  Bot,
  ArrowRight,
  CheckCircle2,
  Monitor,
  Server,
  Database,
  Briefcase,
  GraduationCap,
  Building,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

export default function SystemVisionTab() {
  const workflowSteps = [
    {
      num: 1,
      title: "Input",
      subtitle: "Entrada de Dados",
      icon: Play,
      color: "indigo",
      inputs: ["Tema principal", "Configurações de formato", "Público-alvo", "Diretrizes"],
      outputs: ["Objeto de contexto", "Parâmetros validados"],
    },
    {
      num: 2,
      title: "Research",
      subtitle: "Pesquisa",
      icon: Search,
      color: "blue",
      inputs: ["Contexto estruturado"],
      outputs: ["Dados de pesquisa", "Referências", "Sugestões"],
    },
    {
      num: 3,
      title: "Proposal",
      subtitle: "Proposta Criativa",
      icon: FileText,
      color: "purple",
      inputs: ["Pesquisa consolidada"],
      outputs: ["Roteiro", "Títulos", "Descrição", "Tags"],
    },
    {
      num: 4,
      title: "Studio",
      subtitle: "Produção Visual",
      icon: Film,
      color: "pink",
      inputs: ["Roteiro aprovado"],
      outputs: ["Storyboard", "Mídias selecionadas"],
    },
    {
      num: 5,
      title: "Render",
      subtitle: "Composição",
      icon: Clapperboard,
      color: "orange",
      inputs: ["Storyboard completo"],
      outputs: ["Vídeo renderizado", "Preview"],
    },
    {
      num: 6,
      title: "Upload",
      subtitle: "Publicação",
      icon: Upload,
      color: "green",
      inputs: ["Vídeo final"],
      outputs: ["URL do vídeo", "Estatísticas"],
    },
  ];

  const colorMap: Record<string, { bg: string; border: string; text: string; gradient: string }> = {
    indigo: { bg: "bg-indigo-500/10", border: "border-indigo-500/30", text: "text-indigo-400", gradient: "from-indigo-500 to-indigo-600" },
    blue: { bg: "bg-blue-500/10", border: "border-blue-500/30", text: "text-blue-400", gradient: "from-blue-500 to-blue-600" },
    purple: { bg: "bg-purple-500/10", border: "border-purple-500/30", text: "text-purple-400", gradient: "from-purple-500 to-purple-600" },
    pink: { bg: "bg-pink-500/10", border: "border-pink-500/30", text: "text-pink-400", gradient: "from-pink-500 to-pink-600" },
    orange: { bg: "bg-orange-500/10", border: "border-orange-500/30", text: "text-orange-400", gradient: "from-orange-500 to-orange-600" },
    green: { bg: "bg-green-500/10", border: "border-green-500/30", text: "text-green-400", gradient: "from-green-500 to-green-600" },
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-900/50 via-cyan-900/50 to-blue-900/50 border border-blue-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <h2 className="text-2xl font-bold text-white mb-4">O Que o Sistema Faz</h2>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O <strong className="text-white">ORION</strong> é uma plataforma de automação
            de produção de vídeos que transforma um simples tema em um{" "}
            <span className="text-cyan-400 font-semibold">
              vídeo completo publicado no YouTube
            </span>
            . O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.
          </p>
        </div>
      </section>

      {/* Target Audience */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Users className="w-6 h-6 text-cyan-400" />
            Para Quem Foi Projetado
          </h3>
          <CopyMdButtons
            content="Público-alvo: Criadores Solo (empreendedores, educadores), Pequenas Empresas (marketing, comunicação), Agências (produção em escala, prototipagem)"
            markdownContent={`## Para Quem Foi Projetado\n\n### Criadores de Conteúdo Solo\n- Empreendedores digitais\n- Educadores e professores\n- Profissionais liberais\n\n### Pequenas Empresas\n- Marketing digital interno\n- Comunicação institucional\n- Treinamento corporativo\n\n### Agências e Produtoras\n- Produção em escala\n- Prototipagem rápida\n- Testes de conceito`}
            filename="publico-alvo.md"
          />
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {[
            {
              icon: Briefcase,
              title: "Criadores de Conteúdo Solo",
              items: ["Empreendedores digitais", "Educadores e professores", "Profissionais liberais"],
              color: "cyan",
            },
            {
              icon: Building,
              title: "Pequenas Empresas",
              items: ["Marketing digital interno", "Comunicação institucional", "Treinamento corporativo"],
              color: "blue",
            },
            {
              icon: GraduationCap,
              title: "Agências e Produtoras",
              items: ["Produção em escala", "Prototipagem rápida", "Testes de conceito"],
              color: "indigo",
            },
          ].map((profile, index) => (
            <div
              key={index}
              className="bg-layer-1 border border-subtle rounded-xl p-6"
            >
              <profile.icon className={`w-10 h-10 text-${profile.color}-400 mb-4`} />
              <h4 className="font-bold text-white mb-3">{profile.title}</h4>
              <ul className="space-y-2">
                {profile.items.map((item, i) => (
                  <li key={i} className="flex items-center gap-2 text-muted text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400" />
                    {item}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Workflow Steps */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Play className="w-6 h-6 text-green-400" />
            Fluxo Principal de Funcionamento
          </h3>
          <CopyMdButtons
            content="Workflow: 1) Input (Tema, Configurações) → 2) Research (Pesquisa) → 3) Proposal (Roteiro) → 4) Studio (Storyboard) → 5) Render (Vídeo) → 6) Upload (YouTube)"
            markdownContent={`## Fluxo Principal de Funcionamento\n\n### 1. Input - Entrada de Dados\n- **Entradas:** Tema principal, Configurações de formato, Público-alvo, Diretrizes\n- **Saídas:** Objeto de contexto, Parâmetros validados\n\n### 2. Research - Pesquisa\n- **Entradas:** Contexto estruturado\n- **Saídas:** Dados de pesquisa, Referências, Sugestões\n\n### 3. Proposal - Proposta Criativa\n- **Entradas:** Pesquisa consolidada\n- **Saídas:** Roteiro, Títulos, Descrição, Tags\n\n### 4. Studio - Produção Visual\n- **Entradas:** Roteiro aprovado\n- **Saídas:** Storyboard, Mídias selecionadas\n\n### 5. Render - Composição\n- **Entradas:** Storyboard completo\n- **Saídas:** Vídeo renderizado, Preview\n\n### 6. Upload - Publicação\n- **Entradas:** Vídeo final\n- **Saídas:** URL do vídeo, Estatísticas`}
            filename="workflow.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {workflowSteps.map((step) => {
            const colors = colorMap[step.color];
            return (
              <div
                key={step.num}
                className={`${colors.bg} ${colors.border} border rounded-xl p-5 relative overflow-hidden`}
              >
                <div className="absolute top-0 right-0 text-6xl font-bold text-white/5">
                  {step.num}
                </div>
                <div className="relative">
                  <div className="flex items-center gap-3 mb-4">
                    <div className={`w-12 h-12 bg-gradient-to-br ${colors.gradient} rounded-xl flex items-center justify-center`}>
                      <step.icon className="w-6 h-6 text-white" />
                    </div>
                    <div>
                      <h4 className="font-bold text-white">{step.title}</h4>
                      <p className={`text-sm ${colors.text}`}>{step.subtitle}</p>
                    </div>
                  </div>

                  <div className="space-y-3">
                    <div>
                      <p className="text-xs font-medium text-muted uppercase mb-2">Entradas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.inputs.map((input, i) => (
                          <span key={i} className="px-2 py-1 bg-layer-2 rounded text-xs text-secondary">
                            {input}
                          </span>
                        ))}
                      </div>
                    </div>
                    <div>
                      <p className="text-xs font-medium text-muted uppercase mb-2">Saídas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.outputs.map((output, i) => (
                          <span key={i} className={`px-2 py-1 ${colors.bg} rounded text-xs ${colors.text}`}>
                            {output}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </section>

      {/* Human vs Automation */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Users className="w-6 h-6 text-purple-400" />
            Interação entre Automação e Decisão Humana
          </h3>
          <CopyMdButtons
            content="Filosofia: O sistema sugere, o humano decide. Cada etapa gera proposta, usuário pode aceitar/modificar/regenerar, histórico permite rollback."
            markdownContent={`## Interação entre Automação e Decisão Humana\n\n| Etapa | Decisão Humana | Automação |\n|-------|----------------|----------|\n| Input | Define tema e parâmetros | Valida e estrutura |\n| Research | Aprova abordagem | Pesquisa e sintetiza |\n| Proposal | Revisa e edita roteiro | Gera todas as versões |\n| Studio | Ajusta mídias | Seleciona e compõe |\n| Render | Aprova preview | Renderiza vídeo |\n| Upload | Confirma publicação | Executa upload |\n\n### Filosofia de Controle\n**"O sistema sugere, o humano decide"**\n\n- Cada etapa gera uma proposta completa\n- O usuário pode aceitar, modificar ou regenerar\n- Nenhuma ação destrutiva sem confirmação\n- Histórico de versões permite rollback`}
            filename="automacao-humano.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <div className="grid grid-cols-3 gap-0 border-b border-subtle bg-layer-2/50">
            <div className="p-4 font-semibold text-white">Etapa</div>
            <div className="p-4 font-semibold text-purple-400 flex items-center gap-2">
              <Users className="w-4 h-4" /> Decisão Humana
            </div>
            <div className="p-4 font-semibold text-cyan-400 flex items-center gap-2">
              <Bot className="w-4 h-4" /> Automação
            </div>
          </div>
          {[
            { step: "Input", human: "Define tema e parâmetros", auto: "Valida e estrutura" },
            { step: "Research", human: "Aprova abordagem", auto: "Pesquisa e sintetiza" },
            { step: "Proposal", human: "Revisa e edita roteiro", auto: "Gera todas as versões" },
            { step: "Studio", human: "Ajusta mídias", auto: "Seleciona e compõe" },
            { step: "Render", human: "Aprova preview", auto: "Renderiza vídeo" },
            { step: "Upload", human: "Confirma publicação", auto: "Executa upload" },
          ].map((row, index) => (
            <div
              key={index}
              className="grid grid-cols-3 gap-0 border-b border-subtle last:border-0 hover:bg-layer-2/30 transition-colors"
            >
              <div className="p-4 text-secondary font-medium">{row.step}</div>
              <div className="p-4 text-muted text-sm">{row.human}</div>
              <div className="p-4 text-muted text-sm">{row.auto}</div>
            </div>
          ))}
        </div>

        <div className="mt-6 p-5 bg-purple-900/20 border border-purple-500/20 rounded-xl">
          <h4 className="font-bold text-purple-400 mb-2">Filosofia de Controle</h4>
          <p className="text-xl font-semibold text-white mb-4">&quot;O sistema sugere, o humano decide&quot;</p>
          <ul className="grid grid-cols-1 md:grid-cols-2 gap-3">
            {[
              "Cada etapa gera uma proposta completa",
              "O usuário pode aceitar, modificar ou regenerar",
              "Nenhuma ação destrutiva sem confirmação",
              "Histórico de versões permite rollback",
            ].map((item, i) => (
              <li key={i} className="flex items-center gap-2 text-secondary text-sm">
                <CheckCircle2 className="w-4 h-4 text-green-400" />
                {item}
              </li>
            ))}
          </ul>
        </div>
      </section>

      {/* Architecture Components */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Server className="w-6 h-6 text-orange-400" />
            Componentes Principais e Responsabilidades
          </h3>
          <CopyMdButtons
            content="Componentes: Frontend (Next.js, React, Tailwind, Zustand), Backend (API Routes, integração IAs), Estado Global (Zustand Stores com localStorage)"
            markdownContent={`## Componentes Principais\n\n### Frontend (Next.js App Router)\n**Responsabilidades:**\n- Interface de usuário\n- Navegação por workflow\n- Estado local e persistência\n- Comunicação com APIs\n\n**Tecnologias:** React 19, Tailwind, Framer Motion, Zustand\n\n### Backend (API Routes)\n**Responsabilidades:**\n- Integração com IAs\n- Comunicação externa\n- Processamento de dados\n- Validação e segurança\n\n**Endpoints:** /api/proposal/*, /api/images/*, /api/youtube/*\n\n### Estado Global (Zustand Stores)\n**Stores:**\n- WorkflowStore - Dados e navegação\n- GuidelinesStore - Diretrizes\n- UIStore - Estado de interface\n\n**Persistência:** localStorage`}
            filename="componentes.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Frontend */}
          <div className="bg-gradient-to-b from-blue-900/30 to-zinc-900 border border-blue-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Monitor className="w-8 h-8 text-blue-400" />
              <div>
                <h4 className="font-bold text-white">Frontend</h4>
                <p className="text-xs text-blue-400">Next.js App Router</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-muted">
              <li>Interface de usuário</li>
              <li>Navegação por workflow</li>
              <li>Estado local e persistência</li>
              <li>Comunicação com APIs</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Tecnologias</p>
            <div className="flex flex-wrap gap-1">
              {["React 19", "Tailwind", "Framer Motion", "Zustand"].map((tech, i) => (
                <span key={i} className="px-2 py-1 bg-blue-500/10 text-blue-400 rounded text-xs">
                  {tech}
                </span>
              ))}
            </div>
          </div>

          {/* Backend */}
          <div className="bg-gradient-to-b from-green-900/30 to-zinc-900 border border-green-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Server className="w-8 h-8 text-green-400" />
              <div>
                <h4 className="font-bold text-white">Backend</h4>
                <p className="text-xs text-green-400">API Routes</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-muted">
              <li>Integração com IAs</li>
              <li>Comunicação externa</li>
              <li>Processamento de dados</li>
              <li>Validação e segurança</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Endpoints</p>
            <div className="flex flex-wrap gap-1">
              {["/api/proposal/*", "/api/images/*", "/api/youtube/*"].map((endpoint, i) => (
                <span key={i} className="px-2 py-1 bg-green-500/10 text-green-400 rounded text-xs font-mono">
                  {endpoint}
                </span>
              ))}
            </div>
          </div>

          {/* State */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Database className="w-8 h-8 text-amber-400" />
              <div>
                <h4 className="font-bold text-white">Estado Global</h4>
                <p className="text-xs text-amber-400">Zustand Stores</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Stores</p>
            <ul className="space-y-2 text-sm text-muted">
              <li><strong className="text-amber-400">WorkflowStore</strong> - Dados e navegação</li>
              <li><strong className="text-amber-400">GuidelinesStore</strong> - Diretrizes</li>
              <li><strong className="text-amber-400">UIStore</strong> - Estado de interface</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Persistência</p>
            <span className="px-2 py-1 bg-amber-500/10 text-amber-400 rounded text-xs">
              localStorage
            </span>
          </div>
        </div>
      </section>

      {/* Flow Diagram */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <ArrowRight className="w-6 h-6 text-cyan-400" />
          Diagrama de Fluxo Operacional
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px]">
            {/* Top Row */}
            <div className="flex items-center justify-center gap-4 mb-6">
              {[
                { name: "INPUT", sub: "Tema", color: "indigo" },
                { name: "RESEARCH", sub: "Pesquisa", color: "blue" },
                { name: "PROPOSAL", sub: "Roteiro", color: "purple" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-muted">{step.sub}</p>
                  </div>
                  {i < 2 && <ArrowRight className="w-6 h-6 text-disabled" />}
                </div>
              ))}
            </div>

            {/* Arrow Down */}
            <div className="flex justify-end mr-16 mb-6">
              <div className="w-0.5 h-12 bg-zinc-700" />
            </div>

            {/* Bottom Row */}
            <div className="flex items-center justify-center gap-4 flex-row-reverse">
              {[
                { name: "UPLOAD", sub: "YouTube", color: "green" },
                { name: "RENDER", sub: "Vídeo", color: "orange" },
                { name: "STUDIO", sub: "Storyboard", color: "pink" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  {i < 2 && <ArrowRight className="w-6 h-6 text-disabled rotate-180" />}
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-muted">{step.sub}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-blue-900/20 border border-blue-500/20 rounded-xl">
        <p className="text-sm text-blue-300 italic text-center">
          Este documento descreve a visão sistêmica do ORION, detalhando seu
          funcionamento e a interação entre componentes automatizados e decisões humanas.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/TechStackTab.tsx`

```
"use client";

import {
  Layers,
  Code,
  Cpu,
  Cloud,
  Package,
  CheckCircle2,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

// Tech logo component
const TechLogo = ({
  name,
  letter,
  gradient,
}: {
  name: string;
  letter: string;
  gradient: string;
}) => (
  <div className="flex flex-col items-center gap-2">
    <div
      className={`w-14 h-14 rounded-xl bg-gradient-to-br ${gradient} flex items-center justify-center text-white font-bold text-xl shadow-lg`}
    >
      {letter}
    </div>
    <span className="text-xs text-muted">{name}</span>
  </div>
);

export default function TechStackTab() {
  const dependencies = {
    production: [
      { name: "next", version: "15.1.11", function: "Framework" },
      { name: "react", version: "19.0.0", function: "UI Library" },
      { name: "ai", version: "latest", function: "AI SDK 6" },
      { name: "@ai-sdk/anthropic", version: "latest", function: "Claude AI" },
      { name: "@ai-sdk/google", version: "latest", function: "Gemini AI" },
      { name: "@ai-sdk/openai", version: "latest", function: "GPT AI" },
      { name: "inngest", version: "3.49.3", function: "Workflow Orchestration" },
      { name: "prisma", version: "6.x", function: "Database ORM" },
      { name: "@prisma/client", version: "6.x", function: "Prisma Client" },
      { name: "resend", version: "6.8.0", function: "Email Service" },
      { name: "zustand", version: "5.0.3", function: "State Management" },
      { name: "tailwindcss", version: "3.4.17", function: "Styling" },
      { name: "framer-motion", version: "11.15.0", function: "Animations" },
      { name: "lucide-react", version: "0.469.0", function: "Icons" },
      { name: "zod", version: "3.24.1", function: "Validation" },
    ],
    dev: [
      { name: "typescript", version: "5.7.3", function: "Type checking" },
      { name: "eslint", version: "9.x", function: "Linting" },
      { name: "@types/react", version: "19.x", function: "React types" },
      { name: "@types/node", version: "22.x", function: "Node types" },
    ],
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-orange-900/50 via-amber-900/50 to-orange-900/50 border border-orange-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-orange-500/20 rounded-xl">
              <Layers className="w-8 h-8 text-orange-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral da Stack
              </h2>
              <p className="text-orange-300">Tecnologias e arquitetura</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O ORION utiliza uma{" "}
            <span className="text-orange-400 font-semibold">
              stack moderna e otimizada
            </span>{" "}
            para aplicações web de alta performance, com foco em Developer
            Experience (DX) e User Experience (UX).
          </p>
        </div>
      </section>

      {/* Languages */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Code className="w-6 h-6 text-blue-400" />
            Linguagens de Programação
          </h3>
          <CopyMdButtons
            content="TypeScript 5.7: 100% do código frontend e backend. Strict mode, Path aliases, Type inference, Utility types."
            markdownContent={`## Linguagens de Programação\n\n### TypeScript 5.7\n- 100% do código frontend e backend\n- Strict mode habilitado\n- Path aliases (@/components, @/lib)\n- Type inference avançado\n- Utility types (Partial, Pick, Omit)\n\n**Benefícios:**\n- Detecção de erros em desenvolvimento\n- Autocomplete inteligente\n- Refatoração segura\n- Documentação inline via tipos`}
            filename="linguagens.md"
          />
        </div>

        <div className="bg-gradient-to-r from-blue-900/30 to-indigo-900/30 border border-blue-500/20 rounded-xl p-6">
          <div className="flex items-start gap-6">
            <div className="w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg">
              TS
            </div>
            <div className="flex-1">
              <h4 className="text-xl font-bold text-white mb-2">TypeScript 5.7</h4>
              <p className="text-muted mb-4">
                100% do código frontend e backend
              </p>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p className="text-xs font-medium text-muted uppercase mb-2">
                    Características Utilizadas
                  </p>
                  <ul className="space-y-1 text-sm text-secondary">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Strict mode habilitado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Path aliases (@/components, @/lib)
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Type inference avançado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Utility types (Partial, Pick, Omit)
                    </li>
                  </ul>
                </div>
                <div>
                  <p className="text-xs font-medium text-muted uppercase mb-2">
                    Benefícios
                  </p>
                  <ul className="space-y-1 text-sm text-secondary">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Detecção de erros em desenvolvimento
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Autocomplete inteligente
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Refatoração segura
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Documentação inline via tipos
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Frameworks */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Package className="w-6 h-6 text-purple-400" />
            Frameworks e Bibliotecas
          </h3>
          <CopyMdButtons
            content="Next.js 15.1.11, React 19, Tailwind CSS 3.4.17, Zustand 5.0, Framer Motion 11.15, Lucide React 0.469"
            markdownContent={`## Frameworks e Bibliotecas\n\n### Next.js 15.1.11\n- App Router para roteamento\n- Server Components para performance\n- API Routes para backend\n- Image Optimization\n\n### React 19\n- Hooks: useState, useEffect, useCallback, useMemo, useRef\n- Functional Components, Custom Hooks\n\n### Tailwind CSS 3.4.17\n- Framework CSS utility-first\n\n### Zustand 5.0\n- State Management\n- Stores: WorkflowStore, GuidelinesStore, UIStore\n\n### Framer Motion 11.15\n- Animações e transições\n\n### Lucide React 0.469\n- Biblioteca de ícones`}
            filename="frameworks.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {/* Next.js */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-lg border border-zinc-600">
                N
              </div>
              <div>
                <h4 className="font-bold text-white">Next.js 15.1.11</h4>
                <p className="text-xs text-muted">Framework Full-Stack</p>
              </div>
            </div>
            <div className="space-y-2 text-sm">
              {[
                { feature: "App Router", use: "Roteamento e layouts" },
                { feature: "Server Components", use: "Performance e SEO" },
                { feature: "API Routes", use: "Backend integrado" },
                { feature: "Image Optimization", use: "Otimização de mídia" },
              ].map((item, i) => (
                <div key={i} className="flex justify-between text-muted">
                  <span className="text-white">{item.feature}</span>
                  <span>{item.use}</span>
                </div>
              ))}
            </div>
          </div>

          {/* React */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg">
                R
              </div>
              <div>
                <h4 className="font-bold text-white">React 19</h4>
                <p className="text-xs text-muted">UI Library</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Hooks</p>
              <div className="flex flex-wrap gap-1">
                {["useState", "useEffect", "useCallback", "useMemo", "useRef"].map(
                  (hook, i) => (
                    <code
                      key={i}
                      className="px-2 py-1 bg-cyan-500/10 text-cyan-400 rounded text-xs"
                    >
                      {hook}
                    </code>
                  )
                )}
              </div>
              <p className="text-xs font-medium text-muted uppercase mt-3">
                Patterns
              </p>
              <p className="text-sm text-muted">
                Functional Components, Custom Hooks, Composição
              </p>
            </div>
          </div>

          {/* Tailwind */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center text-white font-bold text-lg">
                T
              </div>
              <div>
                <h4 className="font-bold text-white">Tailwind CSS 3.4.17</h4>
                <p className="text-xs text-muted">Framework CSS</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">
                Classes Mais Usadas
              </p>
              <div className="font-mono text-xs space-y-1">
                <div className="text-muted">
                  <span className="text-teal-400">bg-layer-1</span> → Background
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">text-white</span> → Texto
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">border-subtle</span> → Bordas
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">rounded-xl</span> → Cantos
                </div>
              </div>
            </div>
          </div>

          {/* Zustand */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 flex items-center justify-center text-white font-bold text-lg">
                Z
              </div>
              <div>
                <h4 className="font-bold text-white">Zustand 5.0</h4>
                <p className="text-xs text-muted">State Management</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Stores</p>
              <ul className="text-sm space-y-1">
                <li className="text-amber-400">WorkflowStore</li>
                <li className="text-amber-400">GuidelinesStore</li>
                <li className="text-amber-400">UIStore</li>
              </ul>
              <p className="text-xs text-muted mt-2">
                Middleware: persist, devtools
              </p>
            </div>
          </div>

          {/* Framer Motion */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg">
                F
              </div>
              <div>
                <h4 className="font-bold text-white">Framer Motion 11.15</h4>
                <p className="text-xs text-muted">Animations</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Uso</p>
              <ul className="text-sm text-muted space-y-1">
                <li>Transições de página</li>
                <li>Animações de entrada</li>
                <li>Hover effects</li>
                <li>Loading states</li>
              </ul>
            </div>
          </div>

          {/* Lucide */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center text-white font-bold text-lg">
                L
              </div>
              <div>
                <h4 className="font-bold text-white">Lucide React 0.469</h4>
                <p className="text-xs text-muted">Iconography</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">
                Padrão de Uso
              </p>
              <code className="block p-2 bg-layer-2 rounded text-xs text-secondary">
                {`<IconName className="w-5 h-5" />`}
              </code>
            </div>
          </div>
        </div>
      </section>

      {/* Infrastructure */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Cloud className="w-6 h-6 text-green-400" />
            Tecnologias de Infraestrutura
          </h3>
          <CopyMdButtons
            content="Vercel: Deploy automático, Edge Functions, CDN Global. GitHub: Versionamento, CI/CD automático."
            markdownContent={`## Infraestrutura\n\n### Vercel\n- Hospedagem e Deploy\n- Automatic deployments\n- Edge Functions\n- Environment Variables\n- Analytics\n- Preview deployments\n- CDN Global\n\n### GitHub\n- Versionamento\n- CI/CD automático\n- push main → Deploy production\n- push feature/* → Preview deploy\n- pull request → Checks automáticos`}
            filename="infraestrutura.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Vercel */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-600 to-zinc-900 flex items-center justify-center text-white font-bold text-xl border border-zinc-500">
                V
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">Vercel</h4>
                <p className="text-sm text-muted">Hospedagem e Deploy</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">
              Features Utilizadas
            </p>
            <div className="grid grid-cols-2 gap-2">
              {[
                "Automatic deployments",
                "Edge Functions",
                "Environment Variables",
                "Analytics",
                "Preview deployments",
                "CDN Global",
              ].map((feature, i) => (
                <div
                  key={i}
                  className="flex items-center gap-2 text-sm text-secondary"
                >
                  <CheckCircle2 className="w-4 h-4 text-green-400" />
                  {feature}
                </div>
              ))}
            </div>
          </div>

          {/* GitHub */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-xl">
                G
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">GitHub</h4>
                <p className="text-sm text-muted">Versionamento e CI</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">
              Workflows
            </p>
            <ul className="space-y-2 text-sm text-secondary">
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  push main
                </code>
                <span className="text-muted">→</span>
                Deploy production
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  push feature/*
                </code>
                <span className="text-muted">→</span>
                Preview deploy
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  pull request
                </code>
                <span className="text-muted">→</span>
                Checks automáticos
              </li>
            </ul>
          </div>
        </div>
      </section>

      {/* Architecture Diagram */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Cpu className="w-6 h-6 text-violet-400" />
            Diagrama por Camadas
          </h3>
          <CopyMdButtons
            content="Camadas: Frontend (React, Tailwind, Framer, Zustand, Lucide) → Framework (Next.js 15) → Backend (Vercel AI, Zod) → IA (Anthropic, Google, OpenAI) → Infraestrutura (Vercel)"
            markdownContent={`## Arquitetura por Camadas\n\n### FRONTEND\nReact 19, Tailwind, Framer Motion, Zustand, Lucide\n\n### FRAMEWORK\nNext.js 15 (App Router, Server Components, API Routes)\n\n### BACKEND\nVercel AI SDK, Zod, node-fetch\n\n### IA LAYER\nAnthropic Claude, Google AI, OpenAI\n\n### INFRAESTRUTURA\nVercel (Edge Functions, CDN Global, Env Vars)`}
            filename="arquitetura-camadas.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px] space-y-4">
            {/* Frontend Layer */}
            <div className="bg-blue-500/10 border border-blue-500/20 rounded-xl p-4">
              <h4 className="font-bold text-blue-400 mb-3 text-center">FRONTEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="React 19" letter="R" gradient="from-cyan-500 to-blue-600" />
                <TechLogo name="Tailwind" letter="T" gradient="from-teal-500 to-cyan-600" />
                <TechLogo name="Framer" letter="F" gradient="from-pink-500 to-purple-600" />
                <TechLogo name="Zustand" letter="Z" gradient="from-amber-500 to-yellow-600" />
                <TechLogo name="Lucide" letter="L" gradient="from-red-500 to-orange-600" />
              </div>
            </div>

            {/* Framework Layer */}
            <div className="bg-layer-2/50 border border-subtle rounded-xl p-4">
              <h4 className="font-bold text-muted mb-3 text-center">FRAMEWORK</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Next.js 15</p>
                  <div className="flex gap-4 mt-2 text-xs text-muted">
                    <span>App Router</span>
                    <span>Server Components</span>
                    <span>API Routes</span>
                  </div>
                </div>
              </div>
            </div>

            {/* Backend Layer */}
            <div className="bg-green-500/10 border border-green-500/20 rounded-xl p-4">
              <h4 className="font-bold text-green-400 mb-3 text-center">BACKEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Vercel AI" letter="V" gradient="from-green-500 to-emerald-600" />
                <TechLogo name="Zod" letter="Z" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="node-fetch" letter="N" gradient="from-lime-500 to-green-600" />
              </div>
            </div>

            {/* IA Layer */}
            <div className="bg-purple-500/10 border border-purple-500/20 rounded-xl p-4">
              <h4 className="font-bold text-purple-400 mb-3 text-center">IA LAYER</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Anthropic" letter="A" gradient="from-amber-500 to-orange-600" />
                <TechLogo name="Google AI" letter="G" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="OpenAI" letter="O" gradient="from-green-500 to-emerald-600" />
              </div>
            </div>

            {/* Infrastructure Layer */}
            <div className="bg-amber-500/10 border border-amber-500/20 rounded-xl p-4">
              <h4 className="font-bold text-amber-400 mb-3 text-center">INFRAESTRUTURA</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Vercel</p>
                  <div className="flex gap-4 mt-2 text-xs text-muted">
                    <span>Edge Functions</span>
                    <span>CDN Global</span>
                    <span>Env Vars</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Dependencies Table */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Package className="w-6 h-6 text-cyan-400" />
          Dependências
        </h3>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Production */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-green-500/10 border-b border-subtle px-4 py-3">
              <h4 className="font-bold text-green-400">Production Dependencies</h4>
            </div>
            <div className="p-4 max-h-80 overflow-y-auto">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-muted text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-secondary">
                  {dependencies.production.map((dep, i) => (
                    <tr key={i} className="border-t border-subtle">
                      <td className="py-2 font-mono text-cyan-400">{dep.name}</td>
                      <td className="py-2 text-muted">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>

          {/* Dev */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-amber-500/10 border-b border-subtle px-4 py-3">
              <h4 className="font-bold text-amber-400">Dev Dependencies</h4>
            </div>
            <div className="p-4">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-muted text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-secondary">
                  {dependencies.dev.map((dep, i) => (
                    <tr key={i} className="border-t border-subtle">
                      <td className="py-2 font-mono text-amber-400">{dep.name}</td>
                      <td className="py-2 text-muted">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-orange-900/20 border border-orange-500/20 rounded-xl">
        <p className="text-sm text-orange-300 italic text-center">
          Este documento cataloga todas as tecnologias utilizadas no ORION,
          sua função e posição na arquitetura.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/content.ts`

```
// Documentation Content for Export
// This file contains the markdown content for each documentation tab

export const genesisContent = `# Gênese & Intenção do Sistema

## Por Que Este Sistema Foi Criado

O **ORION** nasceu de uma necessidade real e urgente: **democratizar a produção de vídeos profissionais para YouTube**, eliminando as barreiras técnicas, financeiras e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.

### O Problema Fundamental

Criar vídeos de qualidade para YouTube tradicionalmente exige:
- **Habilidades técnicas** em edição de vídeo, design gráfico e produção de áudio
- **Investimento significativo** em equipamentos, software e possivelmente equipe
- **Tempo extensivo** - um vídeo de 10 minutos pode levar 8-20 horas de produção
- **Conhecimento de SEO** para otimização e descoberta do conteúdo

Essa barreira exclui milhões de potenciais criadores que têm conhecimento valioso mas não os recursos para transformá-lo em conteúdo visual.

### A Solução Proposta

O ORION é um **sistema de automação inteligente** que:
1. Recebe apenas o tema/tópico do vídeo
2. Pesquisa e estrutura o conteúdo automaticamente
3. Gera roteiro, trilha sonora, thumbnail e descrição
4. Cria o storyboard com seleção de mídias
5. Renderiza o vídeo final
6. Publica diretamente no YouTube

## Prompts Fundacionais

### Diretrizes de Design

O sistema foi projetado seguindo estas premissas:

1. **Automação Máxima, Controle Humano**
   - O sistema automatiza tarefas repetitivas e técnicas
   - O humano mantém controle sobre decisões criativas e editoriais
   - Cada etapa pode ser revisada e modificada antes de avançar

2. **Qualidade de Produção Profissional**
   - Outputs devem ser indistinguíveis de produções manuais
   - Padrões de YouTube Creator Academy são referência
   - SEO e engagement são prioridades arquiteturais

3. **Interface Intuitiva**
   - Zero curva de aprendizado para operações básicas
   - Interface guiada por workflow linear
   - Feedback visual claro em cada etapa

4. **Escalabilidade**
   - Suportar múltiplos vídeos em paralelo
   - Funcionar com diferentes nichos de conteúdo
   - Permitir personalização de diretrizes por projeto

## Decisões Arquiteturais Derivadas

### Por que Next.js 15?

- **App Router** para roteamento moderno e layouts aninhados
- **Server Components** para performance e SEO
- **API Routes** para backend integrado
- **Vercel** como deploy nativo e otimizado

### Por que Zustand para Estado?

- Simplicidade sobre complexidade (vs Redux)
- Persistência nativa com localStorage
- TypeScript first
- Minimal boilerplate

### Por que Workflow em 6 Etapas?

O workflow espelha o processo real de produção de vídeo:
1. **Input** → Briefing criativo
2. **Research** → Pesquisa e referências
3. **Proposal** → Roteiro e assets
4. **Studio** → Storyboard e composição
5. **Render** → Produção final
6. **Upload** → Publicação

Esta estrutura permite:
- Validação humana em cada transição
- Rollback para etapas anteriores
- Persistência de progresso
- Clareza sobre status atual

## Elementos Intencionais

### O que o sistema FAZ:
- Pesquisa profunda sobre qualquer tema
- Geração de roteiros otimizados para engagement
- Seleção automática de mídia relevante
- Composição de vídeo com narração
- Upload direto para YouTube

### O que o sistema NÃO FAZ (exclusões conscientes):
- **Não substitui a voz humana** - se o criador quiser narrar, deve gravar separadamente
- **Não gera conteúdo controverso** - políticas de content safety são aplicadas
- **Não garante viralização** - o sistema otimiza, mas resultados dependem do conteúdo
- **Não armazena vídeos eternamente** - após upload, o vídeo vive no YouTube

## Princípios de Design

### 1. Transparência sobre Magia
O sistema mostra claramente o que está fazendo em cada etapa, evitando "caixas pretas" que frustram usuários.

### 2. Falhas Graceful
Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando o workflow completamente.

### 3. Dados Locais
Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.

### 4. Documentação Viva
Este próprio módulo é parte do sistema, não um documento externo que envelhece.

---

*Este documento representa a intenção fundacional do sistema ORION, servindo como referência para decisões futuras e transferência de contexto entre IAs.*
`;

export const systemVisionContent = `# Visão Sistêmica & Funcionamento

## O Que o Sistema Faz

O **ORION** é uma plataforma de automação de produção de vídeos que transforma um simples tema em um vídeo completo publicado no YouTube. O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.

## Para Quem Foi Projetado

### Perfis de Usuário Primários

1. **Criadores de Conteúdo Solo**
   - Empreendedores digitais
   - Educadores e professores
   - Profissionais liberais

2. **Pequenas Empresas**
   - Marketing digital interno
   - Comunicação institucional
   - Treinamento corporativo

3. **Agências e Produtoras**
   - Produção em escala
   - Prototipagem rápida
   - Testes de conceito

### Requisitos do Usuário
- Conta Google com canal YouTube ativo
- Acesso às APIs necessárias (fornecidas ou próprias)
- Navegador moderno (Chrome, Firefox, Safari, Edge)

## Fluxo Principal de Funcionamento

### Etapa 1: Input (Entrada de Dados)

**Objetivo:** Capturar a intenção e parâmetros do vídeo

**Entradas:**
- Tema principal do vídeo
- Configurações de formato (duração, estilo)
- Público-alvo e tom de voz
- Diretrizes específicas (opcional)

**Saídas:**
- Objeto de contexto estruturado
- Parâmetros validados para próximas etapas

### Etapa 2: Research (Pesquisa)

**Objetivo:** Coletar informações e referências sobre o tema

**Processo:**
1. Análise semântica do tema
2. Busca em fontes confiáveis
3. Extração de pontos-chave
4. Identificação de ângulos únicos
5. Estruturação de outline inicial

**Saídas:**
- Dados de pesquisa estruturados
- Referências e fontes
- Sugestões de abordagem

### Etapa 3: Proposal (Proposta Criativa)

**Objetivo:** Gerar todos os assets criativos do vídeo

**Componentes Gerados:**
- **Roteiro completo** com marcações de tempo
- **Trilha sonora** sugerida com justificativa
- **Títulos e thumbnails** otimizados para CTR
- **Descrição** com timestamps e links
- **Tags e hashtags** para SEO

**Saídas:**
- Pacote completo de proposta criativa
- Preview de cada componente
- Opções de variação

### Etapa 4: Studio (Produção Visual)

**Objetivo:** Criar o storyboard e selecionar mídias

**Processo:**
1. Divisão do roteiro em cenas
2. Busca de imagens/vídeos por cena
3. Definição de transições
4. Preview do storyboard
5. Ajustes manuais (se necessário)

**Saídas:**
- Storyboard completo com mídias
- Timeline visual do vídeo
- Assets prontos para render

### Etapa 5: Render (Composição)

**Objetivo:** Gerar o vídeo final

**Processo:**
1. Síntese de voz (TTS) do roteiro
2. Composição de vídeo com mídias
3. Sincronização de áudio
4. Aplicação de efeitos e transições
5. Exportação em formato YouTube

**Saídas:**
- Arquivo de vídeo renderizado
- Preview para aprovação
- Metadados de produção

### Etapa 6: Upload (Publicação)

**Objetivo:** Publicar o vídeo no YouTube

**Processo:**
1. Autenticação com YouTube
2. Upload do vídeo
3. Aplicação de metadados
4. Configuração de privacidade
5. Geração de thumbnail
6. Agendamento (opcional)

**Saídas:**
- Vídeo publicado no YouTube
- URL do vídeo
- Estatísticas iniciais

## Interação entre Automação e Decisão Humana

### Pontos de Validação Humana

| Etapa | Decisão Humana | Automação |
|-------|----------------|-----------|
| Input | Define tema e parâmetros | Valida e estrutura |
| Research | Aprova abordagem | Pesquisa e sintetiza |
| Proposal | Revisa e edita roteiro | Gera todas as versões |
| Studio | Ajusta mídias | Seleciona e compõe |
| Render | Aprova preview | Renderiza vídeo |
| Upload | Confirma publicação | Executa upload |

### Filosofia de Controle

**"O sistema sugere, o humano decide"**

- Cada etapa gera uma proposta completa
- O usuário pode aceitar, modificar ou regenerar
- Nenhuma ação destrutiva é executada sem confirmação
- Histórico de versões permite rollback

## Componentes Principais e Responsabilidades

### Frontend (Next.js App Router)

**Responsabilidades:**
- Interface de usuário
- Navegação por workflow
- Estado local e persistência
- Comunicação com APIs

**Tecnologias:**
- React 19 com Server Components
- Tailwind CSS para estilos
- Framer Motion para animações
- Zustand para estado

### Backend (API Routes)

**Responsabilidades:**
- Integração com IAs (Anthropic, OpenAI, Google)
- Comunicação com serviços externos
- Processamento de dados
- Validação e segurança

**Endpoints Principais:**
- /api/proposal/* - Geração de conteúdo
- /api/images/* - Geração de imagens
- /api/media/* - Busca de mídia
- /api/youtube/* - Integração YouTube
- /api/render - Composição de vídeo
- /api/tts - Text-to-Speech

### Estado Global (Zustand Stores)

**WorkflowStore:**
- Dados de cada etapa
- Navegação entre etapas
- Persistência localStorage

**GuidelinesStore:**
- Diretrizes personalizadas
- Configurações de projeto

**UIStore:**
- Estado de modais
- Preferências de interface

---

## Diagrama de Fluxo Operacional

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                     EMERGENCY YOUTUBE                           │
│                    Fluxo de Produção                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  INPUT   │───▶│ RESEARCH │───▶│ PROPOSAL │                  │
│  │  Tema    │    │ Pesquisa │    │ Roteiro  │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │ Contexto │    │  Dados   │    │  Assets  │                  │
│  │   JSON   │    │Pesquisa  │    │Criativos │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                       │                         │
│                                       ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  UPLOAD  │◀───│  RENDER  │◀───│  STUDIO  │                  │
│  │ YouTube  │    │  Vídeo   │    │Storyboard│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  Vídeo   │    │ Arquivo  │    │  Mídias  │                  │
│  │Publicado │    │  .mp4    │    │Selecionad│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

---

*Este documento descreve a visão sistêmica do ORION, detalhando seu funcionamento e a interação entre componentes automatizados e decisões humanas.*
`;

export const integrationsContent = `# Arquitetura de Integrações & APIs

## Visão Geral das Integrações

O ORION integra-se com múltiplos serviços externos para fornecer suas funcionalidades. Cada integração tem um propósito específico e nível de criticidade definido.

## APIs e Serviços Integrados

### 1. Anthropic Claude API

**Função:** Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Modelo | Claude 3.5 Sonnet / Claude 3 Opus |
| Uso Principal | Roteiros, análise, estruturação |
| Autenticação | API Key (ANTHROPIC_API_KEY) |

**Fluxo de Dados:**
- Input: Tema, contexto, diretrizes
- Output: Texto estruturado (roteiro, descrição, tags)

**Endpoints Utilizados:**
- POST /v1/messages

---

### 2. Google Gemini API

**Função:** Geração de conteúdo alternativa e pesquisa

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | Gemini 1.5 Pro |
| Uso Principal | Backup de geração, análise |
| Autenticação | API Key (GOOGLE_GENERATIVE_AI_API_KEY) |

**Fluxo de Dados:**
- Input: Prompts estruturados
- Output: Texto gerado

---

### 3. OpenAI API

**Função:** Geração de imagens e modelos alternativos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | GPT-4o, DALL-E 3 |
| Uso Principal | Thumbnails, imagens complementares |
| Autenticação | API Key (OPENAI_API_KEY) |

**Endpoints Utilizados:**
- POST /v1/chat/completions
- POST /v1/images/generations

---

### 4. YouTube Data API v3

**Função:** Upload de vídeos e gerenciamento de canal

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Crítica |
| Versão | v3 |
| Uso Principal | Upload, metadados, thumbnails |
| Autenticação | OAuth 2.0 |

**Escopos Necessários:**
- youtube.upload
- youtube.readonly
- youtube.force-ssl

**Fluxo de Dados:**
- Input: Arquivo de vídeo, metadados
- Output: ID do vídeo publicado, URL

---

### 5. Pexels API

**Função:** Busca de imagens e vídeos stock gratuitos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Uso Principal | B-roll, imagens de cena |
| Autenticação | API Key (PEXELS_API_KEY) |

**Endpoints Utilizados:**
- GET /v1/search (imagens)
- GET /videos/search (vídeos)

---

### 6. Pixabay API

**Função:** Busca alternativa de mídia stock

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Baixa (backup) |
| Uso Principal | Fallback para Pexels |
| Autenticação | API Key (PIXABAY_API_KEY) |

---

### 7. ElevenLabs API

**Função:** Text-to-Speech de alta qualidade

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Uso Principal | Narração do vídeo |
| Autenticação | API Key (ELEVENLABS_API_KEY) |

**Vozes Disponíveis:**
- Português (múltiplas vozes)
- Inglês (múltiplas vozes)

---

### 8. Replicate API

**Função:** Geração de imagens via modelos open-source

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelos | Flux, SDXL |
| Uso Principal | Thumbnails, arte conceitual |
| Autenticação | API Token (REPLICATE_API_TOKEN) |

---

## Diagrama de Conexões

\`\`\`
                    ┌─────────────────────────────────────┐
                    │         EMERGENCY YOUTUBE           │
                    │          (Next.js App)              │
                    └─────────────────────────────────────┘
                                     │
           ┌─────────────────────────┼─────────────────────────┐
           │                         │                         │
           ▼                         ▼                         ▼
┌─────────────────────┐   ┌─────────────────────┐   ┌─────────────────────┐
│   IA PROVIDERS      │   │   MEDIA SERVICES    │   │   VIDEO PLATFORM    │
├─────────────────────┤   ├─────────────────────┤   ├─────────────────────┤
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Anthropic   │  │   │  │    Pexels    │  │   │  │   YouTube    │  │
│  │   Claude     │  │   │  │   Images     │  │   │  │   Data API   │  │
│  └──────────────┘  │   │  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   └─────────────────────┘
│  │   Google     │  │   │  │   Pixabay    │  │
│  │   Gemini     │  │   │  │   Videos     │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │   OpenAI     │  │   │  │  ElevenLabs  │  │
│  │   GPT-4o     │  │   │  │     TTS      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Replicate   │  │   │  │  Replicate   │  │
│  │   Images     │  │   │  │   Video      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
└─────────────────────┘   └─────────────────────┘
\`\`\`

## Fluxo Real de Dados

### 1. Geração de Roteiro

\`\`\`
Usuário ──▶ Input (tema) ──▶ API /proposal/script
                                    │
                                    ▼
                              Anthropic API
                                    │
                                    ▼
                           Roteiro Estruturado
                                    │
                                    ▼
                              Frontend (UI)
\`\`\`

### 2. Geração de Thumbnail

\`\`\`
Roteiro ──▶ API /images/generate ──▶ Replicate/DALL-E
                                          │
                                          ▼
                                    Imagem Base64
                                          │
                                          ▼
                                    Frontend (Preview)
\`\`\`

### 3. Upload para YouTube

\`\`\`
Vídeo Renderizado ──▶ API /youtube/upload
                            │
                            ▼
                      OAuth 2.0 Auth
                            │
                            ▼
                     YouTube Data API
                            │
                            ▼
                   Vídeo Publicado (URL)
\`\`\`

## Observações de Autenticação

### Armazenamento de Credenciais

| Tipo | Local | Segurança |
|------|-------|-----------|
| API Keys | Variáveis de ambiente (Vercel) | Não expostas ao cliente |
| API Keys do Usuário | localStorage (browser) | Criptografadas localmente |
| OAuth Tokens | Cookie httpOnly | Sessão segura |

### Fluxo OAuth (YouTube)

1. Usuário clica em "Conectar YouTube"
2. Redirect para Google OAuth
3. Usuário autoriza escopos
4. Callback com código de autorização
5. Troca por access_token + refresh_token
6. Tokens armazenados em cookie seguro

### Fallback e Redundância

**Se Anthropic falhar:**
- Tentativa com Google Gemini
- Mensagem de erro amigável se ambos falharem

**Se Pexels falhar:**
- Tentativa com Pixabay
- Permite upload manual de mídia

**Se ElevenLabs falhar:**
- Opção de TTS alternativo
- Permite upload de áudio manual

---

*Este documento detalha todas as integrações do ORION, seus fluxos de dados e considerações de segurança.*
`;

export const techStackContent = `# Stack Tecnológica & Linguagens

## Visão Geral da Stack

O ORION utiliza uma stack moderna e otimizada para aplicações web de alta performance, com foco em Developer Experience (DX) e User Experience (UX).

## Linguagens de Programação

### TypeScript 5.7

**Uso:** 100% do código frontend e backend

**Características Utilizadas:**
- Strict mode habilitado
- Path aliases (@/components, @/lib)
- Type inference avançado
- Utility types (Partial, Pick, Omit)

**Benefícios:**
- Detecção de erros em tempo de desenvolvimento
- Autocomplete inteligente
- Refatoração segura
- Documentação inline via tipos

---

## Frameworks e Bibliotecas

### Next.js 15.1.11

**Categoria:** Framework Full-Stack

| Feature | Uso no Projeto |
|---------|----------------|
| App Router | Roteamento e layouts |
| Server Components | Performance e SEO |
| API Routes | Backend integrado |
| Image Optimization | Otimização de mídia |
| Font Optimization | Fontes otimizadas |

**Configurações Especiais:**
- Output: Standalone (otimizado para containers)
- TypeScript: Strict mode
- ESLint: Integrado

---

### React 19

**Categoria:** UI Library

**Hooks Utilizados:**
- useState, useEffect (padrão)
- useCallback, useMemo (otimização)
- useRef (referências DOM)

**Patterns:**
- Functional Components exclusivamente
- Custom Hooks para lógica reutilizável
- Composição sobre herança

---

### Tailwind CSS 3.4.17

**Categoria:** Framework CSS

**Customizações:**
- Cores: primary (red), accent (yellow)
- Animações customizadas
- Typography plugin
- Forms plugin

**Utilities Mais Usados:**
\`\`\`
bg-zinc-900     → Background escuro
text-white      → Texto principal
border-zinc-800 → Bordas sutis
rounded-xl      → Cantos arredondados
flex/grid       → Layouts
\`\`\`

---

### Zustand 5.0

**Categoria:** State Management

**Stores Implementadas:**
1. WorkflowStore - Estado do workflow
2. GuidelinesStore - Diretrizes
3. UIStore - Estado da interface

**Middleware:**
- persist (localStorage)
- devtools (desenvolvimento)

---

### Framer Motion 11.15

**Categoria:** Animações

**Uso:**
- Transições de página
- Animações de entrada
- Hover effects
- Loading states

---

### Lucide React 0.469

**Categoria:** Iconografia

**Padrão de Uso:**
\`\`\`tsx
import { IconName } from "lucide-react";
<IconName className="w-5 h-5" />
\`\`\`

---

## Tecnologias de Infraestrutura

### Vercel

**Função:** Hospedagem e Deploy

**Features Utilizadas:**
- Automatic deployments (Git push)
- Edge Functions
- Environment Variables
- Analytics
- Preview deployments

**Configuração:**
- Framework preset: Next.js
- Build command: next build
- Output directory: .next

---

### GitHub

**Função:** Versionamento e CI

**Workflows:**
- Push to main → Deploy production
- Push to feature/* → Preview deploy
- Pull requests → Checks automáticos

---

## Diagrama por Camadas

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                         FRONTEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   React 19  │  │  Tailwind   │  │   Framer    │             │
│  │     UI      │  │    CSS      │  │   Motion    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Zustand   │  │   Lucide    │  │    clsx     │             │
│  │    State    │  │   Icons     │  │   + merge   │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         FRAMEWORK                               │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Next.js 15                            │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │   App    │  │  Server  │  │   API    │              │   │
│  │  │  Router  │  │Components│  │  Routes  │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│                          BACKEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Vercel AI  │  │    Zod     │  │  node-fetch │             │
│  │     SDK     │  │ Validation │  │   HTTP      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         IA LAYER                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Anthropic  │  │   Google   │  │   OpenAI    │             │
│  │    SDK      │  │    AI      │  │    SDK      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                       INFRAESTRUTURA                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      Vercel                              │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │  Edge    │  │   CDN    │  │  Env     │              │   │
│  │  │Functions │  │  Global  │  │  Vars    │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

## Dependências Principais

### Production Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| next | 15.1.11 | Framework |
| react | 19.0.0 | UI Library |
| zustand | 5.0.3 | State Management |
| tailwindcss | 3.4.17 | Styling |
| framer-motion | 11.15.0 | Animations |
| lucide-react | 0.469.0 | Icons |
| @ai-sdk/anthropic | latest | Claude AI |
| @ai-sdk/google | latest | Gemini AI |
| @ai-sdk/openai | latest | GPT AI |
| zod | 3.24.1 | Validation |
| clsx | 2.1.1 | Class merging |
| tailwind-merge | 2.6.0 | Tailwind utilities |

### Dev Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| typescript | 5.7.3 | Type checking |
| eslint | 9.x | Linting |
| @types/react | 19.x | React types |
| @types/node | 22.x | Node types |

---

*Este documento cataloga todas as tecnologias utilizadas no ORION, sua função e posição na arquitetura.*
`;

export const currentStateContent = `# Estado Atual & Próximos Passos

## Status Geral do Projeto

**Versão:** 1.0.0
**Status:** Em Produção (Visual Upgrade em Progresso)
**URL:** https://emergecy-youtube.vercel.app
**Última Atualização:** 24 de Janeiro de 2026
**Nome Oficial:** ORION (anteriormente Emergency YouTube)

---

## 🎨 Visual Upgrade State of the Art (Em Progresso - 24/01/2026)

### Objetivo
Elevar o padrão visual do ORION para nível "State of the Art" (Vercel/Linear/Raycast) com glow effects, gradientes vibrantes, visualizações de dados interativas e micro-interações em toda a interface.

### Progresso Atual

#### ✅ COMPLETO
| Componente | Status | Descrição |
|------------|--------|-----------|
| Dashboard | ✅ 100% | Bento Grid + Recharts (AreaChart, RadialBarChart) com gradientes |
| Design Tokens | ✅ 100% | Tailwind importa lib/design-tokens.ts (single source of truth) |
| Analytics | ✅ 100% | Vercel Analytics + Speed Insights integrados |
| Workflow Page | ✅ 100% | Design tokens aplicados, consistência visual |
| Micro-interações | ✅ 100% | active:scale-95, whileHover, AnimatePresence |

#### ⏳ EM PROGRESSO
| Componente | Status | Bloqueio |
|------------|--------|----------|
| Páginas Internas | 🔶 20% | 13 arquivos com design antigo (step/*, settings, approve/*, documentation/*) |
| Glow Effects | 🔶 0% | Precisa implementar referências visuais (AlphaGPT style) |
| Logo Integration | 🔶 0% | Logo ORION oficial não integrada no sistema |
| YouTube OAuth | 🔶 50% | Loading infinito na conexão |

#### 📋 PRÓXIMOS PASSOS CRÍTICOS
1. **Modernizar Páginas Internas** (step/1-input, step/2-research, step/4-proposal, settings)
   - Substituir zinc-*/gray-* por design tokens
   - Aplicar glow effects e gradientes vibrantes
   - Adicionar micro-interações consistentes

2. **Implementar Visual Identity**
   - Integrar logo ORION oficial em header/sidebar
   - Aplicar glow effects tipo AlphaGPT/Gyanaguru
   - Adicionar connection flow animations

3. **Corrigir Funcionalidades**
   - Resolver YouTube OAuth loading infinito
   - Garantir que settings funcionem de fato
   - Testar todas as integrações

---

## Funcionalidades Concluídas

### Core Features

| Funcionalidade | Status | Prioridade | Impacto |
|----------------|--------|------------|---------|
| Dashboard com Boot Sequence | Concluído | Alta | Alto |
| Workflow de 6 etapas | Concluído | Crítica | Crítico |
| Input de tema e configuração | Concluído | Crítica | Alto |
| Pesquisa com IA | Concluído | Alta | Alto |
| Geração de roteiro | Concluído | Crítica | Crítico |
| Geração de títulos/thumbnails | Concluído | Alta | Alto |
| Geração de descrição e tags | Concluído | Alta | Alto |
| Seleção de trilha sonora | Concluído | Média | Médio |
| Sistema de diretrizes | Concluído | Média | Alto |
| Configuração de API Keys | Concluído | Crítica | Crítico |
| Persistência de estado | Concluído | Alta | Alto |

### Integrações Operacionais

| Integração | Status | Testado |
|------------|--------|---------|
| Anthropic Claude | Operacional | Sim |
| Google Gemini | Operacional | Sim |
| OpenAI GPT-4 | Operacional | Sim |
| Pexels | Operacional | Sim |
| Pixabay | Operacional | Sim |

---

## Funcionalidades Parciais

| Funcionalidade | Progresso | Bloqueio | Prioridade |
|----------------|-----------|----------|------------|
| Upload YouTube | 80% | OAuth config | Alta |
| Render de vídeo | 70% | Integração FFmpeg | Alta |
| TTS (ElevenLabs) | 60% | API quota | Média |
| Storyboard editor | 50% | UX refinement | Média |

---

## Funcionalidades Não Iniciadas

| Funcionalidade | Complexidade | Prioridade | Impacto |
|----------------|--------------|------------|---------|
| Multi-idioma interface | Média | Baixa | Médio |
| Histórico de vídeos | Baixa | Média | Alto |
| Templates de vídeo | Média | Média | Alto |
| Batch processing | Alta | Baixa | Médio |
| Analytics dashboard | Alta | Baixa | Médio |
| Colaboração multi-usuário | Alta | Baixa | Baixo |

---

## Dívidas Técnicas

### Alta Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Error boundaries | Implementar error boundaries em todas as páginas | Estabilidade | Baixo |
| Loading states | Padronizar loading states em todas as operações | UX | Médio |
| Testes E2E | Adicionar testes end-to-end com Playwright | Qualidade | Alto |

### Média Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Code splitting | Otimizar bundle size com lazy loading | Performance | Médio |
| API rate limiting | Implementar rate limiting no frontend | Custo | Médio |
| Retry logic | Melhorar retry logic para falhas de API | Resiliência | Médio |

### Baixa Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| CSS cleanup | Remover estilos não utilizados | Manutenção | Baixo |
| Type coverage | Aumentar coverage de tipos | DX | Médio |
| Documentation | Documentar funções complexas | Manutenção | Médio |

---

## Riscos Conhecidos

### Riscos Técnicos

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| API rate limits | Média | Alto | Cache, retry, fallbacks |
| Custo de APIs | Alta | Médio | Monitoramento, alertas |
| Mudanças em APIs externas | Média | Alto | Versionamento, abstrações |
| Performance em mobile | Baixa | Médio | Testing, otimização |

### Riscos de Negócio

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| Políticas YouTube | Média | Crítico | Compliance, guidelines |
| Competição | Alta | Médio | Inovação, UX |
| Dependência de IAs | Média | Alto | Multi-provider |

---

## Sugestões de Evolução Futura

### Curto Prazo (1-3 meses)

1. **Completar Upload YouTube**
   - Prioridade: Crítica
   - Impacto: Crítico
   - Complexidade: Média

2. **Implementar Render Local**
   - Prioridade: Alta
   - Impacto: Alto
   - Complexidade: Alta

3. **Adicionar Testes**
   - Prioridade: Alta
   - Impacto: Médio
   - Complexidade: Média

### Médio Prazo (3-6 meses)

1. **Templates de Vídeo**
   - Criar biblioteca de templates por nicho
   - Permitir customização de templates
   - Sistema de compartilhamento

2. **Histórico e Analytics**
   - Dashboard de vídeos produzidos
   - Métricas de performance
   - Insights de melhoria

3. **Melhorias de UX**
   - Onboarding interativo
   - Tooltips contextuais
   - Keyboard shortcuts

### Longo Prazo (6-12 meses)

1. **API Pública**
   - Expor funcionalidades via API
   - SDK para integrações
   - Documentação completa

2. **Marketplace de Assets**
   - Trilhas sonoras
   - Templates
   - Vozes TTS

3. **Versão Enterprise**
   - Multi-tenant
   - SSO/SAML
   - SLA garantido

---

## Métricas de Qualidade

### Performance

| Métrica | Atual | Meta |
|---------|-------|------|
| LCP (Largest Contentful Paint) | 1.2s | < 2.5s |
| FID (First Input Delay) | 50ms | < 100ms |
| CLS (Cumulative Layout Shift) | 0.05 | < 0.1 |
| Bundle Size | 450KB | < 500KB |

### Code Quality

| Métrica | Atual | Meta |
|---------|-------|------|
| TypeScript Coverage | 100% | 100% |
| ESLint Errors | 0 | 0 |
| Test Coverage | 0% | > 70% |

---

## Conclusão

O ORION está em estágio de **produção funcional** com as principais features de geração de conteúdo operacionais. Os próximos passos críticos são:

1. Completar a integração de upload YouTube
2. Implementar render de vídeo completo
3. Adicionar cobertura de testes
4. Resolver dívidas técnicas de alta prioridade

O sistema está preparado para escalar e evoluir conforme as necessidades dos usuários.

---

*Este documento reflete o estado atual do ORION e serve como roadmap para decisões de desenvolvimento futuro.*
`;

export const decisionsContent = `# Decisoes Arquiteturais - Claude Code

## Registro de Decisoes de Desenvolvimento

Este documento registra todas as decisoes arquiteturais importantes tomadas durante o desenvolvimento do ORION, incluindo debates, consensos e justificativas tecnicas.

---

## Sessao 1: O Grande Debate Arquitetural (Janeiro 2026)

### Contexto

Necessidade de migrar de localStorage para persistencia real em banco de dados, implementar workflows duraveis para processos longos (renderizacao de video, deep research), e criar sistema de aprovacao humana (human-in-the-loop).

### Participantes do Debate

1. **Claude (Anthropic)** - Posicao: Conservadora e battle-tested. Priorizou estabilidade.
2. **Gemini (Google)** - Posicao: Bleeding edge. Descobriu ToolLoopAgent no AI SDK 6.
3. **ChatGPT (OpenAI)** - Posicao: Validador critico. Confirmou existencia do SDK 6.

### Pontos Criticos Identificados

#### 1. Vercel Functions Timeout
- Limite de 300s (5 min) no Vercel Pro
- Processos como renderizacao podem levar minutos/horas
- Solucao: workflows duraveis externos

#### 2. Vercel Workflow DevKit em Beta
- Embora exista, ainda esta em Public Beta
- Risco de bugs criticos em producao

#### 3. AI SDK Versao Atual
- Projeto usa AI SDK 4.3.19
- Para usar ToolLoopAgent, precisa migrar para v6

### Consenso Unanime: OPCAO B - Arquitetura Hibrida

Apos debate intenso, as tres IAs chegaram a um consenso:

| Camada | Tecnologia | Justificativa |
|--------|------------|---------------|
| Intelligence | AI SDK 6 + ToolLoopAgent | Agentes autonomos com loop de ferramentas |
| Orchestration | Inngest | Durabilidade, retries, sleep nativo |
| Persistence | Vercel Postgres + Prisma | Estado persistente cross-device |
| Storage | Vercel Blob | 1GB incluido no Pro |
| Notifications | Resend | 10K emails/mes gratis |

**Custo Total: $20/mes (Vercel Pro)**

---

## Arquitetura do Pipeline de Video

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│  AI SDK 6 (ToolLoopAgent)          Inngest                      │
│  ┌─────────────────────┐           ┌─────────────────────┐      │
│  │ Research Agent      │──────────>│ step.run()          │      │
│  │ (Gemini 2.0)        │           │ step.sleep()        │      │
│  └─────────────────────┘           │ step.waitForEvent() │      │
│  ┌─────────────────────┐           │ Retry automatico    │      │
│  │ Script Agent        │──────────>│                     │      │
│  │ (Claude 3.5)        │           └─────────────────────┘      │
│  └─────────────────────┘                    │                   │
│                                             ▼                   │
│                        ┌────────────────────────────────────┐   │
│                        │ Vercel Postgres + Blob             │   │
│                        └────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

### Fluxo do Workflow

1. **Deep Research (Gemini)** → Pesquisa trends e referencias
2. **Script Generation (Claude)** → Gera roteiro otimizado
3. **AGUARDAR APROVACAO** → Email + step.waitForEvent('7d')
4. **Storyboard Generation** → Cria cenas com prompts visuais
5. **Render (JSON2VIDEO)** → step.sleep() enquanto renderiza
6. **Upload YouTube** → Com retry automatico

---

## Modelo de Dados (Prisma Schema)

\`\`\`prisma
model Project {
  id          String         @id @default(cuid())
  name        String
  status      ProjectStatus  @default(DRAFT)
  createdAt   DateTime       @default(now())

  // Relacionamentos
  context     Context?
  research    Research?
  script      Script?
  storyboard  Storyboard?
  render      Render?
  upload      Upload?
  workflow    WorkflowState?
}

enum ProjectStatus {
  DRAFT
  RESEARCHING
  SCRIPTING
  AWAITING_APPROVAL
  APPROVED
  RENDERING
  UPLOADING
  COMPLETED
  FAILED
}

model WorkflowState {
  inngestRunId     String?
  currentStep      String
  awaitingApproval Boolean   @default(false)
  approvalToken    String?   @unique
}
\`\`\`

---

## Fases de Implementacao (CONCLUÍDO 23/01/2026)

### FASE 1: Setup & Dependencias ✅
- Ajustado package.json para AI SDK 6
- Instalado inngest, prisma, @prisma/client, resend

### FASE 2: Banco de Dados (Prisma) ✅
- Criado prisma/schema.prisma completo
- Models: Project, Research, Script, Storyboard, Render, Upload, WorkflowState

### FASE 3: Configuracao Inngest ✅
- Criado client (lib/inngest/client.ts)
- Criado API route (app/api/inngest/route.ts)
- Implementado video-pipeline.ts com step.waitForEvent()

### FASE 4: Agentes AI SDK 6 ✅
- Implementados em lib/agents/
- research-agent.ts (Gemini 2.0 Flash)
- script-agent.ts (Claude 3.5 Sonnet)

### FASE 5: Sistema de Aprovacao ✅
- Notificacoes por email (Resend)
- Pagina de aprovacao /approve/[token]
- Paginas de success e feedback-sent

### FASE 6: Frontend (EM PROGRESSO)
- Migracao de localStorage para Prisma
- Integracao com Inngest pipeline

---

## Arquivos Criados

\`\`\`
prisma/schema.prisma
lib/db/prisma.ts
lib/inngest/client.ts
lib/inngest/functions/video-pipeline.ts
lib/agents/research-agent.ts
lib/agents/script-agent.ts
lib/services/research.service.ts
lib/services/script.service.ts
lib/services/storyboard.service.ts
lib/services/render.service.ts
lib/services/upload.service.ts
lib/services/notification.service.ts
app/api/inngest/route.ts
app/api/approve/route.ts
app/approve/[token]/page.tsx
app/approve/success/page.tsx
app/approve/feedback-sent/page.tsx
\`\`\`

---

## Referencias e Fontes

- [AI SDK 6](https://ai-sdk.dev)
- [Inngest Vercel Integration](https://inngest.com/docs/guides/vercel)
- [Prisma Documentation](https://www.prisma.io/docs)
- [Resend API](https://resend.com/docs)

---

*Documento gerado em: 23/01/2026*
*Implementacao concluida: 23/01/2026*
*Participantes: Claude (Anthropic), Gemini (Google), ChatGPT (OpenAI)*
*Deploy: Vercel Pro - https://emergecy-youtube.vercel.app*
`;

```

---
#### `components/documentation/index.ts`

```
// Documentation Module Components
export { default as GenesisTab } from "./GenesisTab";
export { default as SystemVisionTab } from "./SystemVisionTab";
export { default as IntegrationsTab } from "./IntegrationsTab";
export { default as TechStackTab } from "./TechStackTab";
export { default as CurrentStateTab } from "./CurrentStateTab";
export { default as DecisionsTab } from "./DecisionsTab";

// Content exports for Markdown generation
export {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
  decisionsContent,
} from "./content";

```

---
#### `components/proposal/ThumbnailEditor.tsx`

```
"use client";

import { useState } from "react";
import { motion } from "framer-motion";
import {
  Upload,
  Copy,
  RefreshCw,
  Sparkles,
  CheckCircle2,
  AlertCircle,
  Image as ImageIcon,
  Loader2,
} from "lucide-react";
import { TitleThumbnailVariation } from "@/types";
import { cn } from "@/lib/utils";
import Button from "@/components/ui/Button";
import Card from "@/components/ui/Card";

interface ThumbnailEditorProps {
  variations: [
    TitleThumbnailVariation,
    TitleThumbnailVariation,
    TitleThumbnailVariation
  ];
  onVariationUpdate: (index: number, updates: Partial<TitleThumbnailVariation>) => void;
  onGenerateThumbnail: (index: number, prompt: string) => Promise<void>;
  className?: string;
}

export default function ThumbnailEditor({
  variations,
  onVariationUpdate,
  onGenerateThumbnail,
  className,
}: ThumbnailEditorProps) {
  const labels = ["A", "B", "C"];
  const allReady = variations.every((v) => v.isReady);

  return (
    <div className={cn("space-y-6", className)}>
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h3 className="text-xl font-bold text-white">
            Teste A/B/C de Thumbnails
          </h3>
          <p className="text-sm text-gray-400 mt-1">
            Todas as 3 versões serão enviadas para teste no YouTube
          </p>
        </div>

        {/* Status Badge */}
        <div
          className={cn(
            "px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2",
            allReady
              ? "bg-green-500/20 text-green-400"
              : "bg-amber-500/20 text-amber-400"
          )}
        >
          {allReady ? (
            <>
              <CheckCircle2 className="w-4 h-4" />
              Todas prontas
            </>
          ) : (
            <>
              <AlertCircle className="w-4 h-4" />
              {variations.filter((v) => v.isReady).length}/3 prontas
            </>
          )}
        </div>
      </div>

      {/* Grid de Variações */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {variations.map((variation, index) => (
          <ThumbnailVariationCard
            key={variation.id}
            variation={variation}
            label={labels[index]}
            index={index}
            onUpdate={(updates) => onVariationUpdate(index, updates)}
            onGenerate={(prompt) => onGenerateThumbnail(index, prompt)}
          />
        ))}
      </div>

      {/* Aviso */}
      {!allReady && (
        <div className="bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3">
          <AlertCircle className="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" />
          <div className="flex-1">
            <p className="text-amber-400 font-semibold text-sm">
              Complete todas as 3 thumbnails para continuar
            </p>
            <p className="text-amber-400/70 text-xs mt-1">
              O YouTube permite testar até 3 thumbnails simultaneamente para
              descobrir qual performa melhor.
            </p>
          </div>
        </div>
      )}
    </div>
  );
}

interface ThumbnailVariationCardProps {
  variation: TitleThumbnailVariation;
  label: string;
  index: number;
  onUpdate: (updates: Partial<TitleThumbnailVariation>) => void;
  onGenerate: (prompt: string) => Promise<void>;
}

function ThumbnailVariationCard({
  variation,
  label,
  index,
  onUpdate,
  onGenerate,
}: ThumbnailVariationCardProps) {
  const [isGenerating, setIsGenerating] = useState(false);
  const [isUploading, setIsUploading] = useState(false);

  const handleGenerate = async () => {
    setIsGenerating(true);
    try {
      await onGenerate(variation.thumbnailPrompt);
    } finally {
      setIsGenerating(false);
    }
  };

  const handleUpload = async (file: File) => {
    setIsUploading(true);
    try {
      // Implementar upload de arquivo
      // Por agora, simular com setTimeout
      await new Promise((resolve) => setTimeout(resolve, 1000));

      const url = URL.createObjectURL(file);
      onUpdate({
        thumbnailUrl: url,
        isReady: true,
      });
    } finally {
      setIsUploading(false);
    }
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file && file.type.startsWith("image/")) {
      handleUpload(file);
    }
  };

  const copyPrompt = () => {
    navigator.clipboard.writeText(variation.thumbnailPrompt);
  };

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: index * 0.1 }}
    >
      <Card className="p-0 overflow-hidden">
        {/* Header */}
        <div className="bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-gray-800 p-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-cyan-500/50">
                {label}
              </div>
              <div>
                <h4 className="font-semibold text-white">Variação {label}</h4>
                <p className="text-xs text-gray-400">
                  {variation.isReady ? "Pronta" : "Pendente"}
                </p>
              </div>
            </div>

            {variation.isReady && (
              <CheckCircle2 className="w-5 h-5 text-green-500" />
            )}
          </div>
        </div>

        <div className="p-4 space-y-4">
          {/* Título */}
          <div>
            <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
              Título
            </label>
            <input
              type="text"
              value={variation.title}
              onChange={(e) => onUpdate({ title: e.target.value })}
              className="mt-1 w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"
              placeholder="Título chamativo para o vídeo"
            />
          </div>

          {/* Prompt */}
          <div>
            <div className="flex items-center justify-between mb-1">
              <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
                Prompt da Thumbnail
              </label>
              <button
                onClick={copyPrompt}
                className="text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-1"
              >
                <Copy className="w-3 h-3" />
                Copiar
              </button>
            </div>
            <textarea
              value={variation.thumbnailPrompt}
              onChange={(e) => onUpdate({ thumbnailPrompt: e.target.value })}
              rows={3}
              className="w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"
              placeholder="Descreva a thumbnail que deseja gerar com IA..."
            />
          </div>

          {/* Preview da Thumbnail */}
          <div>
            <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2 block">
              Preview
            </label>
            {variation.thumbnailUrl ? (
              <div className="relative aspect-video rounded-lg overflow-hidden bg-gray-900 border border-gray-700">
                <img
                  src={variation.thumbnailUrl}
                  alt={`Thumbnail ${label}`}
                  className="w-full h-full object-cover"
                />
                <button
                  onClick={() => onUpdate({ thumbnailUrl: null, isReady: false })}
                  className="absolute top-2 right-2 p-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors"
                >
                  <RefreshCw className="w-4 h-4 text-white" />
                </button>
              </div>
            ) : (
              <div className="aspect-video rounded-lg bg-gray-900 border-2 border-dashed border-gray-700 flex items-center justify-center">
                <div className="text-center">
                  <ImageIcon className="w-12 h-12 text-gray-600 mx-auto mb-2" />
                  <p className="text-sm text-gray-500">Nenhuma thumbnail</p>
                </div>
              </div>
            )}
          </div>

          {/* Ações */}
          <div className="space-y-2">
            <Button
              onClick={handleGenerate}
              disabled={isGenerating || !variation.thumbnailPrompt}
              className="w-full"
              variant="primary"
            >
              {isGenerating ? (
                <>
                  <Loader2 className="w-4 h-4 animate-spin" />
                  Gerando...
                </>
              ) : (
                <>
                  <Sparkles className="w-4 h-4" />
                  Gerar com IA
                </>
              )}
            </Button>

            <div className="relative">
              <input
                type="file"
                accept="image/*"
                onChange={handleFileChange}
                className="hidden"
                id={`upload-${variation.id}`}
                disabled={isUploading}
              />
              <label
                htmlFor={`upload-${variation.id}`}
                className={cn(
                  "w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all cursor-pointer",
                  isUploading
                    ? "bg-gray-800 text-gray-500 cursor-not-allowed"
                    : "bg-gray-800 hover:bg-gray-700 text-white border border-gray-700"
                )}
              >
                {isUploading ? (
                  <>
                    <Loader2 className="w-4 h-4 animate-spin" />
                    Enviando...
                  </>
                ) : (
                  <>
                    <Upload className="w-4 h-4" />
                    Upload Manual
                  </>
                )}
              </label>
            </div>
          </div>
        </div>
      </Card>
    </motion.div>
  );
}

```

---
#### `components/settings/AppearanceTab.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { Palette, Save, RefreshCw, RotateCcw, Upload, Image as ImageIcon } from 'lucide-react';
import { getBranding, updateBranding, resetBranding } from '@/app/actions/settings';
import { useBrandingStore } from '@/lib/store';
import type { BrandingConfig } from '@/types';

export function AppearanceTab() {
  const [config, setConfig] = useState<BrandingConfig>({
    systemName: 'ORION',
    logoUrl: null,
    updatedAt: new Date().toISOString(),
  });
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [loading, setLoading] = useState(true);

  const { setBranding, resetBranding: resetBrandingStore } = useBrandingStore();

  useEffect(() => {
    loadBranding();
  }, []);

  const loadBranding = async () => {
    setLoading(true);
    try {
      const data = await getBranding();
      setConfig(data);
    } catch (error) {
      console.error('Failed to load branding:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSave = async () => {
    setSaving(true);
    setSuccess(false);

    try {
      const updated = await updateBranding({
        systemName: config.systemName,
        logoUrl: config.logoUrl,
      });

      setConfig(updated);

      // Sync with Zustand store (client-side)
      setBranding(updated.systemName, updated.logoUrl);

      setSuccess(true);
      setTimeout(() => setSuccess(false), 3000);
    } catch (error) {
      console.error('Failed to update branding:', error);
      alert('Erro ao atualizar aparência');
    } finally {
      setSaving(false);
    }
  };

  const handleReset = async () => {
    if (!confirm('Tem certeza que deseja resetar para o padrão ORION?')) {
      return;
    }

    setSaving(true);
    try {
      const defaultConfig = await resetBranding();
      setConfig(defaultConfig);

      // Sync with Zustand store
      resetBrandingStore();

      alert('Branding resetado com sucesso!');
    } catch (error) {
      console.error('Failed to reset branding:', error);
      alert('Erro ao resetar branding');
    } finally {
      setSaving(false);
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-purple-500/10 rounded-lg">
            <Palette className="w-5 h-5 text-purple-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Aparência do Sistema</h2>
            <p className="text-sm text-muted">Personalize o nome e logotipo (White Label)</p>
          </div>
        </div>
        <button
          onClick={handleReset}
          disabled={saving}
          className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-secondary rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <RotateCcw className="w-4 h-4" />
          Resetar Padrão
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Logo Preview */}
        <div className="lg:col-span-1">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-4">Preview do Logo</h3>

            <div className="aspect-square bg-black/50 border-2 border-dashed border-subtle rounded-xl flex items-center justify-center overflow-hidden">
              {config.logoUrl ? (
                <img
                  src={config.logoUrl}
                  alt="Logo"
                  className="w-full h-full object-contain p-4"
                  onError={(e) => {
                    e.currentTarget.src = '';
                    e.currentTarget.style.display = 'none';
                  }}
                />
              ) : (
                <div className="text-center">
                  <ImageIcon className="w-12 h-12 text-disabled mx-auto mb-2" />
                  <p className="text-xs text-muted">Sem logo</p>
                </div>
              )}
            </div>

            <div className="mt-4 p-3 bg-layer-1 border border-subtle rounded-lg">
              <p className="text-xs font-semibold text-muted mb-1">Nome do Sistema:</p>
              <p className="text-lg font-bold text-white">{config.systemName}</p>
            </div>
          </div>
        </div>

        {/* Configuration Form */}
        <div className="lg:col-span-2 space-y-4">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
            {/* System Name */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Nome do Sistema
              </label>
              <input
                type="text"
                value={config.systemName}
                onChange={(e) => setConfig({ ...config, systemName: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all"
                placeholder="Ex: ORION, MyApp, Studio..."
              />
              <p className="text-xs text-muted mt-1">
                Este nome aparecerá na barra lateral e no título da página
              </p>
            </div>

            {/* Logo URL */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                URL do Logotipo
              </label>
              <input
                type="url"
                value={config.logoUrl || ''}
                onChange={(e) => setConfig({ ...config, logoUrl: e.target.value || null })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all"
                placeholder="https://exemplo.com/logo.png"
              />
              <p className="text-xs text-muted mt-1">
                Formatos recomendados: PNG, SVG (fundo transparente)
              </p>
            </div>

            {/* Info Box */}
            <div className="bg-purple-500/10 border border-purple-500/30 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <Upload className="w-5 h-5 text-purple-400 flex-shrink-0 mt-0.5" />
                <div>
                  <h4 className="text-sm font-semibold text-purple-300 mb-1">
                    Como fazer upload do logo
                  </h4>
                  <ul className="text-xs text-purple-200/80 space-y-1">
                    <li>• Use um serviço como Imgur, Cloudinary ou GitHub</li>
                    <li>• Para GitHub: suba a imagem e copie o link &quot;raw&quot;</li>
                    <li>• Tamanho recomendado: 512x512px ou maior</li>
                    <li>• Deixe em branco para usar o logo padrão</li>
                  </ul>
                </div>
              </div>
            </div>

            {/* Save Button */}
            <div className="flex items-center justify-between pt-4 border-t border-subtle">
              <div className="text-xs text-muted">
                Última atualização:{' '}
                {new Date(config.updatedAt).toLocaleString('pt-BR')}
              </div>
              <button
                onClick={handleSave}
                disabled={saving}
                className="px-6 py-2.5 bg-purple-600 hover:bg-purple-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {saving ? (
                  <>
                    <RefreshCw className="w-4 h-4 animate-spin" />
                    Salvando...
                  </>
                ) : success ? (
                  <>
                    <Save className="w-4 h-4" />
                    Salvo!
                  </>
                ) : (
                  <>
                    <Save className="w-4 h-4" />
                    Salvar Alterações
                  </>
                )}
              </button>
            </div>
          </div>

          {/* Additional Info */}
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <ImageIcon className="w-4 h-4 text-muted" />
              Sistema White Label
            </h3>
            <p className="text-sm text-muted leading-relaxed">
              Com o sistema White Label, você pode personalizar completamente a identidade visual do ORION.
              Altere o nome do sistema e o logotipo para refletir sua marca. As mudanças são aplicadas
              automaticamente em toda a interface, incluindo a barra lateral, título da página e metadados.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/DocsManagerTab.tsx`

```
"use client";

import { useState } from 'react';
import { FileText, Plus, Edit2, Trash2, Eye, EyeOff, Save, X } from 'lucide-react';
import { createDocPage, updateDocPage, deleteDocPage } from '@/app/actions/settings';
import type { DocPage, DocCategory } from '@/types';

interface DocsManagerTabProps {
  initialDocs: DocPage[];
  onUpdate: () => void;
}

const CATEGORIES: { value: DocCategory; label: string }[] = [
  { value: 'getting-started', label: 'Primeiros Passos' },
  { value: 'features', label: 'Recursos' },
  { value: 'api', label: 'API' },
  { value: 'guides', label: 'Guias' },
  { value: 'changelog', label: 'Changelog' },
];

export function DocsManagerTab({ initialDocs, onUpdate }: DocsManagerTabProps) {
  const [docs, setDocs] = useState(initialDocs);
  const [isCreating, setIsCreating] = useState(false);
  const [editingId, setEditingId] = useState<string | null>(null);
  const [formData, setFormData] = useState<Partial<DocPage>>({
    title: '',
    category: 'getting-started',
    content: '',
    visible: true,
    order: 1,
  });

  const handleCreate = async () => {
    try {
      const newDoc = await createDocPage({
        title: formData.title || 'Sem título',
        category: formData.category as DocCategory,
        content: formData.content || '',
        visible: formData.visible ?? true,
        order: formData.order ?? docs.length + 1,
      });

      setDocs([...docs, newDoc]);
      setIsCreating(false);
      setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
      onUpdate();
    } catch (error) {
      console.error('Failed to create doc:', error);
      alert('Erro ao criar documento');
    }
  };

  const handleUpdate = async (id: string) => {
    try {
      const updated = await updateDocPage(id, formData);
      if (updated) {
        setDocs(docs.map(doc => doc.id === id ? updated : doc));
        setEditingId(null);
        setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to update doc:', error);
      alert('Erro ao atualizar documento');
    }
  };

  const handleDelete = async (id: string) => {
    if (!confirm('Tem certeza que deseja excluir este documento?')) return;

    try {
      const success = await deleteDocPage(id);
      if (success) {
        setDocs(docs.filter(doc => doc.id !== id));
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to delete doc:', error);
      alert('Erro ao excluir documento');
    }
  };

  const handleToggleVisibility = async (doc: DocPage) => {
    try {
      const updated = await updateDocPage(doc.id, { visible: !doc.visible });
      if (updated) {
        setDocs(docs.map(d => d.id === doc.id ? updated : d));
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to toggle visibility:', error);
    }
  };

  const startEdit = (doc: DocPage) => {
    setEditingId(doc.id);
    setFormData({
      title: doc.title,
      category: doc.category,
      content: doc.content,
      visible: doc.visible,
      order: doc.order,
    });
  };

  const cancelEdit = () => {
    setEditingId(null);
    setIsCreating(false);
    setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-amber-500/10 rounded-lg">
            <FileText className="w-5 h-5 text-amber-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Gerenciador de Documentação</h2>
            <p className="text-sm text-muted">Crie e edite páginas de documentação</p>
          </div>
        </div>
        <button
          onClick={() => setIsCreating(true)}
          className="px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95"
        >
          <Plus className="w-4 h-4" />
          Nova Página
        </button>
      </div>

      {/* Create/Edit Form */}
      {(isCreating || editingId) && (
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-white">
              {isCreating ? 'Criar Nova Página' : 'Editar Página'}
            </h3>
            <button
              onClick={cancelEdit}
              className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
            >
              <X className="w-5 h-5 text-muted" />
            </button>
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">Título</label>
              <input
                type="text"
                value={formData.title}
                onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white"
                placeholder="Título da página"
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">Categoria</label>
              <select
                value={formData.category}
                onChange={(e) => setFormData({ ...formData, category: e.target.value as DocCategory })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white"
              >
                {CATEGORIES.map(cat => (
                  <option key={cat.value} value={cat.value}>{cat.label}</option>
                ))}
              </select>
            </div>
          </div>

          <div>
            <label className="block text-sm font-medium text-secondary mb-2">Conteúdo (Markdown)</label>
            <textarea
              value={formData.content}
              onChange={(e) => setFormData({ ...formData, content: e.target.value })}
              rows={10}
              className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white font-mono text-sm resize-none"
              placeholder="# Título\n\nConteúdo em markdown..."
            />
          </div>

          <div className="flex items-center justify-between">
            <label className="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                checked={formData.visible}
                onChange={(e) => setFormData({ ...formData, visible: e.target.checked })}
                className="w-4 h-4 rounded border-subtle text-amber-600 focus:ring-amber-500"
              />
              <span className="text-sm text-secondary">Visível no menu de documentação</span>
            </label>

            <button
              onClick={() => editingId ? handleUpdate(editingId) : handleCreate()}
              className="px-6 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95"
            >
              <Save className="w-4 h-4" />
              {isCreating ? 'Criar' : 'Salvar'}
            </button>
          </div>
        </div>
      )}

      {/* Docs List */}
      <div className="grid grid-cols-1 gap-3">
        {docs.map((doc) => (
          <div
            key={doc.id}
            className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:border-subtle transition-all"
          >
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3 flex-1 min-w-0">
                <div className={`p-2 rounded-lg ${doc.visible ? 'bg-green-500/10' : 'bg-layer-2'}`}>
                  {doc.visible ? (
                    <Eye className="w-4 h-4 text-green-500" />
                  ) : (
                    <EyeOff className="w-4 h-4 text-muted" />
                  )}
                </div>
                <div className="flex-1 min-w-0">
                  <h4 className="font-semibold text-white truncate">{doc.title}</h4>
                  <div className="flex items-center gap-2 text-xs text-muted">
                    <span>{CATEGORIES.find(c => c.value === doc.category)?.label}</span>
                    <span>•</span>
                    <span>Ordem: {doc.order}</span>
                  </div>
                </div>
              </div>
              <div className="flex items-center gap-2">
                <button
                  onClick={() => handleToggleVisibility(doc)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                  title={doc.visible ? 'Ocultar' : 'Mostrar'}
                >
                  {doc.visible ? (
                    <Eye className="w-4 h-4 text-muted" />
                  ) : (
                    <EyeOff className="w-4 h-4 text-muted" />
                  )}
                </button>
                <button
                  onClick={() => startEdit(doc)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                >
                  <Edit2 className="w-4 h-4 text-blue-400" />
                </button>
                <button
                  onClick={() => handleDelete(doc.id)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                >
                  <Trash2 className="w-4 h-4 text-red-400" />
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

```

---
#### `components/settings/FilesTab.tsx`

```
"use client";

import React, { useState, useEffect, useRef } from 'react';
import {
  FolderOpen,
  File,
  RefreshCw,
  ChevronRight,
  FileText,
  FolderClosed,
  Upload,
  Image as ImageIcon,
  Video,
  Music,
  Archive,
  ExternalLink,
  AlertCircle,
  Cloud,
} from 'lucide-react';
import type { DirectoryListing, FileEntry } from '@/types';

export function FilesTab() {
  const [listing, setListing] = useState<DirectoryListing | null>(null);
  const [loading, setLoading] = useState(true);
  const [currentPath, setCurrentPath] = useState('');
  const [uploading, setUploading] = useState(false);
  const [uploadError, setUploadError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    loadDirectory(currentPath);
  }, [currentPath]);

  const loadDirectory = async (path: string) => {
    setLoading(true);
    try {
      const response = await fetch(`/api/files/list?path=${encodeURIComponent(path)}`);
      if (response.ok) {
        const data = await response.json();
        setListing(data);
      } else {
        console.error('Failed to load directory');
      }
    } catch (error) {
      console.error('Error loading directory:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;

    setUploading(true);
    setUploadError(null);

    try {
      const formData = new FormData();
      formData.append('file', file);
      if (currentPath) {
        formData.append('folder', currentPath);
      }

      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error || 'Upload failed');
      }

      // Refresh the listing after upload
      await loadDirectory(currentPath);
    } catch (error) {
      console.error('Upload error:', error);
      setUploadError(error instanceof Error ? error.message : 'Erro ao fazer upload');
    } finally {
      setUploading(false);
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    }
  };

  const handleDownload = (file: FileEntry) => {
    if (file.type === 'directory' || !file.url) return;

    // Open URL directly for Vercel Blob files
    window.open(file.url, '_blank');
  };

  const handleNavigate = (file: FileEntry) => {
    if (file.type === 'directory') {
      setCurrentPath(file.path);
    }
  };

  const handleGoUp = () => {
    const parts = currentPath.split('/').filter(Boolean);
    parts.pop();
    setCurrentPath(parts.join('/'));
  };

  const formatBytes = (bytes?: number): string => {
    if (!bytes) return '—';
    const kb = bytes / 1024;
    if (kb < 1024) return `${kb.toFixed(2)} KB`;
    const mb = kb / 1024;
    if (mb < 1024) return `${mb.toFixed(2)} MB`;
    const gb = mb / 1024;
    return `${gb.toFixed(2)} GB`;
  };

  const formatDate = (dateString?: string): string => {
    if (!dateString) return '—';
    return new Date(dateString).toLocaleString('pt-BR');
  };

  const getFileIcon = (entry: FileEntry) => {
    if (entry.type === 'directory') {
      return <FolderClosed className="w-5 h-5 text-yellow-500" />;
    }

    const ext = entry.name.split('.').pop()?.toLowerCase();
    const iconMap: Record<string, React.ReactElement> = {
      // Documents
      json: <FileText className="w-5 h-5 text-blue-400" />,
      txt: <FileText className="w-5 h-5 text-muted" />,
      csv: <FileText className="w-5 h-5 text-green-400" />,
      xml: <FileText className="w-5 h-5 text-orange-400" />,
      md: <FileText className="w-5 h-5 text-purple-400" />,
      pdf: <FileText className="w-5 h-5 text-red-400" />,
      // Images
      jpg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      jpeg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      png: <ImageIcon className="w-5 h-5 text-pink-400" />,
      gif: <ImageIcon className="w-5 h-5 text-pink-400" />,
      webp: <ImageIcon className="w-5 h-5 text-pink-400" />,
      svg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      // Video
      mp4: <Video className="w-5 h-5 text-cyan-400" />,
      webm: <Video className="w-5 h-5 text-cyan-400" />,
      mov: <Video className="w-5 h-5 text-cyan-400" />,
      // Audio
      mp3: <Music className="w-5 h-5 text-emerald-400" />,
      wav: <Music className="w-5 h-5 text-emerald-400" />,
      ogg: <Music className="w-5 h-5 text-emerald-400" />,
      // Archives
      zip: <Archive className="w-5 h-5 text-amber-400" />,
      tar: <Archive className="w-5 h-5 text-amber-400" />,
      gz: <Archive className="w-5 h-5 text-amber-400" />,
    };

    return iconMap[ext || ''] || <File className="w-5 h-5 text-muted" />;
  };

  if (loading && !listing) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-orange-500/10 rounded-lg">
            <Cloud className="w-5 h-5 text-orange-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Gerenciador de Arquivos</h2>
            <p className="text-sm text-muted">
              Vercel Blob Storage - Arquivos do projeto
            </p>
          </div>
        </div>

        <div className="flex items-center gap-3">
          {/* Upload Button */}
          <button
            onClick={() => fileInputRef.current?.click()}
            disabled={uploading}
            className="px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            {uploading ? (
              <RefreshCw className="w-4 h-4 animate-spin" />
            ) : (
              <Upload className="w-4 h-4" />
            )}
            Upload
          </button>

          <input
            ref={fileInputRef}
            type="file"
            onChange={handleFileUpload}
            className="hidden"
          />

          {/* Refresh Button */}
          <button
            onClick={() => loadDirectory(currentPath)}
            disabled={loading}
            className="px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
        </div>
      </div>

      {/* Upload Error */}
      {uploadError && (
        <div className="p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400 text-sm">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span>{uploadError}</span>
        </div>
      )}

      {/* Status Message */}
      {listing?.message && (
        <div className="p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg flex items-center gap-2 text-amber-400 text-sm">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span>{listing.message}</span>
        </div>
      )}

      {/* Stats */}
      {listing && (
        <div className="grid grid-cols-3 gap-4">
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Total de Arquivos</p>
            <p className="text-2xl font-bold text-white">{listing.totalFiles || 0}</p>
          </div>
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Tamanho Total</p>
            <p className="text-2xl font-bold text-white">{formatBytes(listing.totalSize)}</p>
          </div>
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Nesta Pasta</p>
            <p className="text-2xl font-bold text-white">{listing.entries.length}</p>
          </div>
        </div>
      )}

      {/* Breadcrumb */}
      <div className="flex items-center gap-2 text-sm">
        <FolderOpen className="w-4 h-4 text-muted" />
        <button
          onClick={() => setCurrentPath('')}
          className="text-orange-400 hover:text-orange-300 transition-colors"
        >
          root
        </button>
        {currentPath.split('/').filter(Boolean).map((part, index, arr) => (
          <div key={index} className="flex items-center gap-2">
            <ChevronRight className="w-4 h-4 text-disabled" />
            <button
              onClick={() => {
                const newPath = arr.slice(0, index + 1).join('/');
                setCurrentPath(newPath);
              }}
              className="text-orange-400 hover:text-orange-300 transition-colors"
            >
              {part}
            </button>
          </div>
        ))}
      </div>

      {/* File List */}
      <div className="bg-layer-1/50 border border-subtle rounded-xl overflow-hidden">
        {/* Header */}
        <div className="grid grid-cols-12 gap-4 px-6 py-3 bg-zinc-950/50 border-b border-subtle text-xs font-medium text-muted">
          <div className="col-span-6">Nome</div>
          <div className="col-span-2">Tamanho</div>
          <div className="col-span-3">Modificado</div>
          <div className="col-span-1 text-right">Ação</div>
        </div>

        {/* Entries */}
        <div className="divide-y divide-zinc-800">
          {/* Go Up Button */}
          {currentPath && (
            <button
              onClick={handleGoUp}
              className="w-full grid grid-cols-12 gap-4 px-6 py-3 hover:bg-layer-2/50 transition-colors text-left"
            >
              <div className="col-span-6 flex items-center gap-3">
                <FolderClosed className="w-5 h-5 text-muted" />
                <span className="text-muted">..</span>
              </div>
              <div className="col-span-5 text-sm text-muted">Voltar</div>
            </button>
          )}

          {listing?.entries.map((entry, index) => (
            <div
              key={index}
              className="grid grid-cols-12 gap-4 px-6 py-3 hover:bg-layer-2/50 transition-colors group"
            >
              {/* Name */}
              <button
                onClick={() => entry.type === 'directory' ? handleNavigate(entry) : null}
                className="col-span-6 flex items-center gap-3 text-left"
              >
                {getFileIcon(entry)}
                <span className="text-white font-medium truncate group-hover:text-orange-400 transition-colors">
                  {entry.name}
                </span>
              </button>

              {/* Size */}
              <div className="col-span-2 flex items-center text-sm text-muted">
                {formatBytes(entry.size)}
              </div>

              {/* Modified Date */}
              <div className="col-span-3 flex items-center text-sm text-muted">
                {formatDate(entry.modifiedAt)}
              </div>

              {/* Action */}
              <div className="col-span-1 flex items-center justify-end">
                {entry.type === 'file' && entry.url && (
                  <button
                    onClick={() => handleDownload(entry)}
                    className="p-2 hover:bg-orange-600/20 rounded-lg transition-colors"
                    title="Abrir/Baixar arquivo"
                  >
                    <ExternalLink className="w-4 h-4 text-orange-400" />
                  </button>
                )}
              </div>
            </div>
          ))}

          {listing?.entries.length === 0 && (
            <div className="px-6 py-12 text-center">
              <Cloud className="w-12 h-12 text-disabled mx-auto mb-3" />
              <p className="text-muted">Nenhum arquivo encontrado</p>
              <p className="text-disabled text-sm mt-1">
                Faça upload de arquivos para começar
              </p>
            </div>
          )}
        </div>
      </div>

      {/* Info */}
      <div className="bg-orange-500/10 border border-orange-500/30 rounded-lg p-4">
        <div className="flex items-start gap-3">
          <Cloud className="w-5 h-5 text-orange-400 flex-shrink-0 mt-0.5" />
          <div>
            <h4 className="text-sm font-semibold text-orange-300 mb-1">
              Vercel Blob Storage
            </h4>
            <p className="text-xs text-orange-200/80">
              Os arquivos são armazenados no Vercel Blob, um serviço de armazenamento
              de objetos integrado ao Vercel. Faça upload de imagens, vídeos, documentos
              e outros arquivos para usar em seus projetos.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/IntegrationsTab.tsx`

```
"use client";

import { useState } from 'react';
import { Github, Globe, Save, Trash2, CheckCircle2, XCircle, RefreshCw } from 'lucide-react';
import { saveGitHubTokens, saveVercelTokens, removeGitHubTokensAction, removeVercelTokensAction } from '@/app/actions/settings';
import { testGitHubConnection } from '@/app/actions/github';
import { testVercelConnection } from '@/app/actions/vercel';
import type { IntegrationTokens } from '@/types';

interface IntegrationsTabProps {
  initialTokens: IntegrationTokens;
  onUpdate: () => void;
}

export function IntegrationsTab({ initialTokens, onUpdate }: IntegrationsTabProps) {
  const [tokens, setTokens] = useState(initialTokens);
  const [githubForm, setGithubForm] = useState({
    token: tokens.github?.token || '',
    owner: tokens.github?.owner || '',
    repo: tokens.github?.repo || '',
  });
  const [vercelForm, setVercelForm] = useState({
    token: tokens.vercel?.token || '',
    projectId: tokens.vercel?.projectId || '',
  });
  const [testing, setTesting] = useState<'github' | 'vercel' | null>(null);
  const [testResults, setTestResults] = useState<{
    github?: { success: boolean; error?: string };
    vercel?: { success: boolean; error?: string };
  }>({});

  const handleSaveGitHub = async () => {
    try {
      const updated = await saveGitHubTokens(
        githubForm.token,
        githubForm.owner,
        githubForm.repo
      );
      setTokens(updated);
      onUpdate();
      alert('Integração GitHub salva com sucesso!');
    } catch (error) {
      console.error('Failed to save GitHub tokens:', error);
      alert('Erro ao salvar integração GitHub');
    }
  };

  const handleSaveVercel = async () => {
    try {
      const updated = await saveVercelTokens(
        vercelForm.token,
        vercelForm.projectId
      );
      setTokens(updated);
      onUpdate();
      alert('Integração Vercel salva com sucesso!');
    } catch (error) {
      console.error('Failed to save Vercel tokens:', error);
      alert('Erro ao salvar integração Vercel');
    }
  };

  const handleRemoveGitHub = async () => {
    if (!confirm('Tem certeza que deseja remover a integração GitHub?')) return;

    try {
      const updated = await removeGitHubTokensAction();
      setTokens(updated);
      setGithubForm({ token: '', owner: '', repo: '' });
      setTestResults({ ...testResults, github: undefined });
      onUpdate();
    } catch (error) {
      console.error('Failed to remove GitHub tokens:', error);
      alert('Erro ao remover integração GitHub');
    }
  };

  const handleRemoveVercel = async () => {
    if (!confirm('Tem certeza que deseja remover a integração Vercel?')) return;

    try {
      const updated = await removeVercelTokensAction();
      setTokens(updated);
      setVercelForm({ token: '', projectId: '' });
      setTestResults({ ...testResults, vercel: undefined });
      onUpdate();
    } catch (error) {
      console.error('Failed to remove Vercel tokens:', error);
      alert('Erro ao remover integração Vercel');
    }
  };

  const handleTestGitHub = async () => {
    setTesting('github');
    try {
      const result = await testGitHubConnection();
      setTestResults({ ...testResults, github: result });
    } catch {
      setTestResults({
        ...testResults,
        github: { success: false, error: 'Erro ao testar conexão' },
      });
    } finally {
      setTesting(null);
    }
  };

  const handleTestVercel = async () => {
    setTesting('vercel');
    try {
      const result = await testVercelConnection();
      setTestResults({ ...testResults, vercel: result });
    } catch {
      setTestResults({
        ...testResults,
        vercel: { success: false, error: 'Erro ao testar conexão' },
      });
    } finally {
      setTesting(null);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center gap-3 pb-4 border-b border-subtle">
        <div className="p-2 bg-blue-500/10 rounded-lg">
          <Globe className="w-5 h-5 text-blue-500" />
        </div>
        <div>
          <h2 className="text-xl font-bold text-white">Integrações & Tokens</h2>
          <p className="text-sm text-muted">Configure APIs para logs e automação</p>
        </div>
      </div>

      <div className="space-y-6">
        {/* GitHub Integration */}
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-2 bg-layer-2 rounded-lg">
              <Github className="w-5 h-5 text-white" />
            </div>
            <div className="flex-1">
              <h3 className="font-semibold text-white">GitHub</h3>
              <p className="text-xs text-muted">Para logs de commits e changelog automático</p>
            </div>
            {tokens.github && (
              <span className="px-2 py-1 bg-green-500/10 text-green-400 text-xs rounded-full flex items-center gap-1">
                <CheckCircle2 className="w-3 h-3" />
                Configurado
              </span>
            )}
          </div>

          <div className="space-y-3">
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Token</label>
              <input
                type="password"
                value={githubForm.token}
                onChange={(e) => setGithubForm({ ...githubForm, token: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="ghp_..."
              />
            </div>
            <div className="grid grid-cols-2 gap-3">
              <div>
                <label className="block text-sm font-medium text-secondary mb-1">Owner</label>
                <input
                  type="text"
                  value={githubForm.owner}
                  onChange={(e) => setGithubForm({ ...githubForm, owner: e.target.value })}
                  className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                  placeholder="username"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-secondary mb-1">Repositório</label>
                <input
                  type="text"
                  value={githubForm.repo}
                  onChange={(e) => setGithubForm({ ...githubForm, repo: e.target.value })}
                  className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                  placeholder="repository-name"
                />
              </div>
            </div>

            {testResults.github && (
              <div className={`p-3 rounded-lg flex items-center gap-2 text-sm ${testResults.github.success ? 'bg-green-500/10 text-green-400' : 'bg-red-500/10 text-red-400'}`}>
                {testResults.github.success ? (
                  <><CheckCircle2 className="w-4 h-4" /> Conexão bem-sucedida!</>
                ) : (
                  <><XCircle className="w-4 h-4" /> {testResults.github.error}</>
                )}
              </div>
            )}

            <div className="flex gap-2">
              <button
                onClick={handleTestGitHub}
                disabled={testing === 'github' || !tokens.github}
                className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
              >
                {testing === 'github' ? (
                  <><RefreshCw className="w-4 h-4 animate-spin" /> Testando...</>
                ) : (
                  <>Testar Conexão</>
                )}
              </button>
              <button
                onClick={handleSaveGitHub}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm flex items-center gap-2 transition-all"
              >
                <Save className="w-4 h-4" />
                Salvar
              </button>
              {tokens.github && (
                <button
                  onClick={handleRemoveGitHub}
                  className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
                >
                  <Trash2 className="w-4 h-4" />
                  Remover
                </button>
              )}
            </div>
          </div>
        </div>

        {/* Vercel Integration */}
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-2 bg-layer-2 rounded-lg">
              <svg className="w-5 h-5 text-white" viewBox="0 0 76 76" fill="currentColor">
                <path d="M38 0L76 66H0L38 0z" />
              </svg>
            </div>
            <div className="flex-1">
              <h3 className="font-semibold text-white">Vercel</h3>
              <p className="text-xs text-muted">Para logs de deployments</p>
            </div>
            {tokens.vercel && (
              <span className="px-2 py-1 bg-green-500/10 text-green-400 text-xs rounded-full flex items-center gap-1">
                <CheckCircle2 className="w-3 h-3" />
                Configurado
              </span>
            )}
          </div>

          <div className="space-y-3">
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Token</label>
              <input
                type="password"
                value={vercelForm.token}
                onChange={(e) => setVercelForm({ ...vercelForm, token: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="v1_..."
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Project ID</label>
              <input
                type="text"
                value={vercelForm.projectId}
                onChange={(e) => setVercelForm({ ...vercelForm, projectId: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="prj_..."
              />
            </div>

            {testResults.vercel && (
              <div className={`p-3 rounded-lg flex items-center gap-2 text-sm ${testResults.vercel.success ? 'bg-green-500/10 text-green-400' : 'bg-red-500/10 text-red-400'}`}>
                {testResults.vercel.success ? (
                  <><CheckCircle2 className="w-4 h-4" /> Conexão bem-sucedida!</>
                ) : (
                  <><XCircle className="w-4 h-4" /> {testResults.vercel.error}</>
                )}
              </div>
            )}

            <div className="flex gap-2">
              <button
                onClick={handleTestVercel}
                disabled={testing === 'vercel' || !tokens.vercel}
                className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
              >
                {testing === 'vercel' ? (
                  <><RefreshCw className="w-4 h-4 animate-spin" /> Testando...</>
                ) : (
                  <>Testar Conexão</>
                )}
              </button>
              <button
                onClick={handleSaveVercel}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm flex items-center gap-2 transition-all"
              >
                <Save className="w-4 h-4" />
                Salvar
              </button>
              {tokens.vercel && (
                <button
                  onClick={handleRemoveVercel}
                  className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
                >
                  <Trash2 className="w-4 h-4" />
                  Remover
                </button>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/LogsTab.tsx`

```
"use client";

import { useState, useEffect, useCallback } from 'react';
import { Terminal, GitCommit, Globe, Search, Trash2, RefreshCw, AlertCircle, CheckCircle2, Info, AlertTriangle } from 'lucide-react';
import { getLogs, clearLogs, searchSystemLogs } from '@/app/actions/settings';
import { fetchGitHubCommits } from '@/app/actions/github';
import { fetchVercelDeployments } from '@/app/actions/vercel';
import type { SystemLog, GitHubCommit, VercelDeployment, LogLevel } from '@/types';

type LogsTabView = 'system' | 'git' | 'vercel';

export function LogsTab() {
  const [activeView, setActiveView] = useState<LogsTabView>('system');
  const [systemLogs, setSystemLogs] = useState<SystemLog[]>([]);
  const [gitCommits, setGitCommits] = useState<GitHubCommit[]>([]);
  const [vercelDeployments, setVercelDeployments] = useState<VercelDeployment[]>([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const loadData = useCallback(async () => {
    setLoading(true);
    setError(null);

    try {
      if (activeView === 'system') {
        const logs = await getLogs(100);
        setSystemLogs(logs);
      } else if (activeView === 'git') {
        const { commits, error } = await fetchGitHubCommits(50);
        if (error) {
          setError(error);
        } else {
          setGitCommits(commits);
        }
      } else if (activeView === 'vercel') {
        const { deployments, error } = await fetchVercelDeployments(50);
        if (error) {
          setError(error);
        } else {
          setVercelDeployments(deployments);
        }
      }
    } catch (err) {
      console.error('Failed to load logs:', err);
      setError(err instanceof Error ? err.message : 'Erro ao carregar dados');
    } finally {
      setLoading(false);
    }
  }, [activeView]);

  useEffect(() => {
    loadData();
  }, [loadData]);

  const handleSearch = async () => {
    if (!searchQuery.trim() || activeView !== 'system') return;

    setLoading(true);
    try {
      const results = await searchSystemLogs(searchQuery);
      setSystemLogs(results);
    } catch (err) {
      console.error('Search failed:', err);
    } finally {
      setLoading(false);
    }
  };

  const handleClearLogs = async () => {
    if (!confirm('Tem certeza que deseja limpar todos os logs do sistema?')) return;

    try {
      await clearLogs();
      setSystemLogs([]);
      alert('Logs limpos com sucesso!');
    } catch (err) {
      console.error('Failed to clear logs:', err);
      alert('Erro ao limpar logs');
    }
  };

  const handleClearSearch = () => {
    setSearchQuery('');
    loadData();
  };

  const getLogLevelStyles = (level: LogLevel) => {
    switch (level) {
      case 'error':
        return {
          bg: 'bg-red-500/10',
          text: 'text-red-400',
          border: 'border-red-500/20',
          icon: AlertCircle,
        };
      case 'warning':
        return {
          bg: 'bg-amber-500/10',
          text: 'text-amber-400',
          border: 'border-amber-500/20',
          icon: AlertTriangle,
        };
      case 'success':
        return {
          bg: 'bg-green-500/10',
          text: 'text-green-400',
          border: 'border-green-500/20',
          icon: CheckCircle2,
        };
      default:
        return {
          bg: 'bg-blue-500/10',
          text: 'text-blue-400',
          border: 'border-blue-500/20',
          icon: Info,
        };
    }
  };

  const getDeploymentStateStyles = (state: string) => {
    switch (state) {
      case 'READY':
        return {
          bg: 'bg-green-500/10',
          text: 'text-green-400',
          label: 'Pronto',
        };
      case 'ERROR':
        return {
          bg: 'bg-red-500/10',
          text: 'text-red-400',
          label: 'Erro',
        };
      case 'BUILDING':
        return {
          bg: 'bg-blue-500/10',
          text: 'text-blue-400',
          label: 'Construindo',
        };
      case 'QUEUED':
        return {
          bg: 'bg-amber-500/10',
          text: 'text-amber-400',
          label: 'Na Fila',
        };
      default:
        return {
          bg: 'bg-zinc-500/10',
          text: 'text-muted',
          label: state,
        };
    }
  };

  const formatTimestamp = (timestamp: string | number) => {
    const date = typeof timestamp === 'number' ? new Date(timestamp) : new Date(timestamp);
    return new Intl.DateTimeFormat('pt-BR', {
      day: '2-digit',
      month: 'short',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
    }).format(date);
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-emerald-500/10 rounded-lg">
            <Terminal className="w-5 h-5 text-emerald-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Logs & Atividades</h2>
            <p className="text-sm text-muted">Monitore o sistema, commits e deployments</p>
          </div>
        </div>
        <div className="flex items-center gap-2">
          <button
            onClick={loadData}
            disabled={loading}
            className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
          {activeView === 'system' && systemLogs.length > 0 && (
            <button
              onClick={handleClearLogs}
              className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
            >
              <Trash2 className="w-4 h-4" />
              Limpar Logs
            </button>
          )}
        </div>
      </div>

      {/* Tabs */}
      <div className="flex gap-2 border-b border-subtle">
        <button
          onClick={() => setActiveView('system')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'system'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <Terminal className="w-4 h-4" />
            Logs do Sistema
          </div>
          {activeView === 'system' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
        <button
          onClick={() => setActiveView('git')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'git'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <GitCommit className="w-4 h-4" />
            Commits GitHub
          </div>
          {activeView === 'git' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
        <button
          onClick={() => setActiveView('vercel')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'vercel'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <Globe className="w-4 h-4" />
            Deployments Vercel
          </div>
          {activeView === 'vercel' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
      </div>

      {/* Search Bar (System Logs only) */}
      {activeView === 'system' && (
        <div className="flex gap-2">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted" />
            <input
              type="text"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              onKeyDown={(e) => e.key === 'Enter' && handleSearch()}
              placeholder="Pesquisar nos logs..."
              className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 pl-10 pr-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-emerald-500"
            />
          </div>
          <button
            onClick={handleSearch}
            disabled={!searchQuery.trim() || loading}
            className="px-4 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Buscar
          </button>
          {searchQuery && (
            <button
              onClick={handleClearSearch}
              className="px-4 py-2.5 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg transition-all"
            >
              Limpar
            </button>
          )}
        </div>
      )}

      {/* Error Message */}
      {error && (
        <div className="bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-start gap-3">
          <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0 mt-0.5" />
          <div>
            <h4 className="text-sm font-semibold text-red-400 mb-1">Erro ao carregar dados</h4>
            <p className="text-sm text-red-300">{error}</p>
          </div>
        </div>
      )}

      {/* Loading State */}
      {loading && (
        <div className="flex items-center justify-center py-12">
          <div className="flex items-center gap-3 text-muted">
            <RefreshCw className="w-5 h-5 animate-spin" />
            <span>Carregando...</span>
          </div>
        </div>
      )}

      {/* Content */}
      {!loading && (
        <>
          {/* System Logs View */}
          {activeView === 'system' && (
            <div className="space-y-2">
              {systemLogs.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <Terminal className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum log encontrado</p>
                </div>
              ) : (
                systemLogs.map((log) => {
                  const styles = getLogLevelStyles(log.level);
                  const Icon = styles.icon;

                  return (
                    <div
                      key={log.id}
                      className={`bg-layer-1/50 border ${styles.border} rounded-lg p-4 hover:bg-layer-1 transition-all`}
                    >
                      <div className="flex items-start gap-3">
                        <div className={`p-2 ${styles.bg} rounded-lg flex-shrink-0`}>
                          <Icon className={`w-4 h-4 ${styles.text}`} />
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 mb-1">
                            <span className={`px-2 py-0.5 ${styles.bg} ${styles.text} text-xs font-medium rounded uppercase`}>
                              {log.level}
                            </span>
                            <span className="px-2 py-0.5 bg-layer-2 text-muted text-xs rounded">
                              {log.source}
                            </span>
                            <span className="text-xs text-muted">
                              {formatTimestamp(log.timestamp)}
                            </span>
                          </div>
                          <p className="text-sm text-white">{log.message}</p>
                          {log.details && Object.keys(log.details).length > 0 && (
                            <div className="mt-2 p-2 bg-black/30 rounded border border-subtle">
                              <pre className="text-xs text-muted font-mono overflow-x-auto">
                                {JSON.stringify(log.details, null, 2)}
                              </pre>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })
              )}
            </div>
          )}

          {/* Git Commits View */}
          {activeView === 'git' && (
            <div className="space-y-2">
              {gitCommits.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <GitCommit className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum commit encontrado</p>
                  <p className="text-xs text-muted mt-1">Configure a integração GitHub nas configurações</p>
                </div>
              ) : (
                gitCommits.map((commit) => (
                  <div
                    key={commit.sha}
                    className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:bg-layer-1 transition-all"
                  >
                    <div className="flex items-start gap-3">
                      <div className="p-2 bg-layer-2 rounded-lg flex-shrink-0">
                        <GitCommit className="w-4 h-4 text-muted" />
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 mb-1">
                          <code className="px-2 py-0.5 bg-layer-2 text-secondary text-xs font-mono rounded">
                            {commit.sha}
                          </code>
                          <span className="text-xs text-muted">
                            {formatTimestamp(commit.date)}
                          </span>
                        </div>
                        <p className="text-sm text-white mb-1">{commit.message}</p>
                        <div className="flex items-center gap-2 text-xs text-muted">
                          <span>{commit.author}</span>
                          {commit.url && (
                            <>
                              <span>•</span>
                              <a
                                href={commit.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="text-emerald-400 hover:text-emerald-300 hover:underline"
                              >
                                Ver no GitHub
                              </a>
                            </>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                ))
              )}
            </div>
          )}

          {/* Vercel Deployments View */}
          {activeView === 'vercel' && (
            <div className="space-y-2">
              {vercelDeployments.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <Globe className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum deployment encontrado</p>
                  <p className="text-xs text-muted mt-1">Configure a integração Vercel nas configurações</p>
                </div>
              ) : (
                vercelDeployments.map((deployment) => {
                  const styles = getDeploymentStateStyles(deployment.state);

                  return (
                    <div
                      key={deployment.uid}
                      className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:bg-layer-1 transition-all"
                    >
                      <div className="flex items-start gap-3">
                        <div className={`p-2 ${styles.bg} rounded-lg flex-shrink-0`}>
                          <Globe className={`w-4 h-4 ${styles.text}`} />
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 mb-1">
                            <span className={`px-2 py-0.5 ${styles.bg} ${styles.text} text-xs font-medium rounded`}>
                              {styles.label}
                            </span>
                            <span className="text-xs text-muted">
                              {formatTimestamp(deployment.createdAt)}
                            </span>
                          </div>
                          <p className="text-sm text-white mb-1">{deployment.name}</p>
                          {deployment.url && (
                            <a
                              href={`https://${deployment.url}`}
                              target="_blank"
                              rel="noopener noreferrer"
                              className="text-xs text-emerald-400 hover:text-emerald-300 hover:underline"
                            >
                              {deployment.url}
                            </a>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })
              )}
            </div>
          )}
        </>
      )}
    </div>
  );
}

```

---
#### `components/settings/ProfileTab.tsx`

```
"use client";

import { useState, useRef } from 'react';
import { User, Save, RefreshCw, Upload, Camera, X } from 'lucide-react';
import { updateProfile } from '@/app/actions/settings';
import type { UserProfile } from '@/types';

interface ProfileTabProps {
  initialProfile: UserProfile;
}

export function ProfileTab({ initialProfile }: ProfileTabProps) {
  const [profile, setProfile] = useState(initialProfile);
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [uploadError, setUploadError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);

  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      setUploadError('Tipo de arquivo inválido. Use JPEG, PNG, GIF ou WebP.');
      return;
    }

    // Validate file size (max 5MB)
    const maxSize = 5 * 1024 * 1024;
    if (file.size > maxSize) {
      setUploadError('Arquivo muito grande. Máximo 5MB.');
      return;
    }

    setUploading(true);
    setUploadError(null);

    try {
      const formData = new FormData();
      formData.append('file', file);
      formData.append('type', 'avatar');

      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error || 'Upload failed');
      }

      const result = await response.json();
      setProfile({ ...profile, avatarUrl: result.url });
    } catch (error) {
      console.error('Upload error:', error);
      setUploadError(error instanceof Error ? error.message : 'Erro ao fazer upload');
    } finally {
      setUploading(false);
      // Reset file input
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    }
  };

  const handleSave = async () => {
    setSaving(true);
    setSuccess(false);

    try {
      const updated = await updateProfile({
        name: profile.name,
        role: profile.role,
        avatarUrl: profile.avatarUrl,
        bio: profile.bio,
      });

      setProfile(updated);
      setSuccess(true);

      setTimeout(() => setSuccess(false), 3000);
    } catch (error) {
      console.error('Failed to update profile:', error);
      alert('Erro ao atualizar perfil');
    } finally {
      setSaving(false);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center gap-3 pb-4 border-b border-subtle">
        <div className="p-2 bg-indigo-500/10 rounded-lg">
          <User className="w-5 h-5 text-indigo-500" />
        </div>
        <div>
          <h2 className="text-xl font-bold text-white">Perfil do Usuário</h2>
          <p className="text-sm text-muted">Gerencie suas informações pessoais</p>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Avatar Preview with Upload */}
        <div className="lg:col-span-1">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 text-center">
            <div className="relative w-32 h-32 mx-auto mb-4">
              <div className="w-full h-full rounded-full overflow-hidden border-4 border-subtle">
                <img
                  src={profile.avatarUrl}
                  alt={profile.name}
                  className="w-full h-full object-cover"
                />
              </div>

              {/* Upload Overlay */}
              <button
                onClick={() => fileInputRef.current?.click()}
                disabled={uploading}
                className="absolute inset-0 flex items-center justify-center bg-black/60 rounded-full opacity-0 hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-not-allowed"
              >
                {uploading ? (
                  <RefreshCw className="w-8 h-8 text-white animate-spin" />
                ) : (
                  <Camera className="w-8 h-8 text-white" />
                )}
              </button>

              {/* Hidden file input */}
              <input
                ref={fileInputRef}
                type="file"
                accept="image/jpeg,image/png,image/gif,image/webp"
                onChange={handleFileSelect}
                className="hidden"
              />
            </div>

            <h3 className="text-lg font-semibold text-white">{profile.name}</h3>
            <p className="text-sm text-muted">{profile.role}</p>
            <p className="text-xs text-muted mt-2">ID: {profile.id}</p>

            {/* Upload Button */}
            <button
              onClick={() => fileInputRef.current?.click()}
              disabled={uploading}
              className="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm rounded-lg flex items-center gap-2 mx-auto transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {uploading ? (
                <>
                  <RefreshCw className="w-4 h-4 animate-spin" />
                  Enviando...
                </>
              ) : (
                <>
                  <Upload className="w-4 h-4" />
                  Alterar Foto
                </>
              )}
            </button>

            {/* Upload Error */}
            {uploadError && (
              <div className="mt-3 p-2 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400 text-xs">
                <X className="w-4 h-4 flex-shrink-0" />
                <span>{uploadError}</span>
              </div>
            )}

            <p className="text-xs text-muted mt-3">
              Clique na foto ou no botão para alterar.
              <br />
              Formatos: JPEG, PNG, GIF, WebP (máx. 5MB)
            </p>
          </div>
        </div>

        {/* Profile Form */}
        <div className="lg:col-span-2 space-y-4">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
            {/* Name */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Nome
              </label>
              <input
                type="text"
                value={profile.name}
                onChange={(e) => setProfile({ ...profile, name: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="Seu nome"
              />
            </div>

            {/* Role */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Cargo
              </label>
              <input
                type="text"
                value={profile.role}
                onChange={(e) => setProfile({ ...profile, role: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="Seu cargo"
              />
            </div>

            {/* Avatar URL - Manual input as fallback */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                URL do Avatar (alternativo)
              </label>
              <input
                type="url"
                value={profile.avatarUrl}
                onChange={(e) => setProfile({ ...profile, avatarUrl: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="https://..."
              />
              <p className="text-xs text-muted mt-1">
                Ou use{' '}
                <a
                  href="https://api.dicebear.com/7.x/avataaars/svg?seed=YourName"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-indigo-400 hover:text-indigo-300"
                >
                  DiceBear
                </a>{' '}
                para gerar avatares
              </p>
            </div>

            {/* Bio */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Bio
              </label>
              <textarea
                value={profile.bio}
                onChange={(e) => setProfile({ ...profile, bio: e.target.value })}
                rows={3}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all resize-none"
                placeholder="Escreva uma breve descrição sobre você..."
              />
            </div>

            {/* Save Button */}
            <div className="flex items-center justify-between pt-4 border-t border-subtle">
              <div className="text-xs text-muted">
                Última atualização:{' '}
                {new Date(profile.updatedAt).toLocaleString('pt-BR')}
              </div>
              <button
                onClick={handleSave}
                disabled={saving}
                className="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {saving ? (
                  <>
                    <RefreshCw className="w-4 h-4 animate-spin" />
                    Salvando...
                  </>
                ) : success ? (
                  <>
                    <Save className="w-4 h-4" />
                    Salvo!
                  </>
                ) : (
                  <>
                    <Save className="w-4 h-4" />
                    Salvar Alterações
                  </>
                )}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/SystemMonitorTab.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { Activity, RefreshCw, Cpu, Clock, Server, CheckCircle, XCircle, AlertCircle, Zap } from 'lucide-react';
import type { SystemMonitorData } from '@/types';

export function SystemMonitorTab() {
  const [data, setData] = useState<SystemMonitorData | null>(null);
  const [loading, setLoading] = useState(true);
  const [lastUpdate, setLastUpdate] = useState<Date | null>(null);
  const [autoRefresh, setAutoRefresh] = useState(true);

  useEffect(() => {
    loadHealthData();

    // Auto-refresh every 30 seconds
    if (autoRefresh) {
      const interval = setInterval(() => {
        loadHealthData();
      }, 30000);

      return () => clearInterval(interval);
    }
  }, [autoRefresh]);

  const loadHealthData = async () => {
    setLoading(true);
    try {
      const response = await fetch('/api/system/health');
      if (response.ok) {
        const healthData = await response.json();
        setData(healthData);
        setLastUpdate(new Date());
      } else {
        console.error('Failed to fetch health data');
      }
    } catch (error) {
      console.error('Error fetching health data:', error);
    } finally {
      setLoading(false);
    }
  };

  const formatBytes = (bytes: number): string => {
    const mb = bytes / 1024 / 1024;
    return `${mb.toFixed(2)} MB`;
  };

  const formatUptime = (seconds: number): string => {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    return `${hours}h ${minutes}m ${secs}s`;
  };

  const getStatusIcon = (status: string) => {
    switch (status) {
      case 'online':
        return <CheckCircle className="w-5 h-5 text-green-500" />;
      case 'offline':
        return <XCircle className="w-5 h-5 text-red-500" />;
      default:
        return <AlertCircle className="w-5 h-5 text-yellow-500" />;
    }
  };

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'online':
        return 'bg-green-500/10 border-green-500/30 text-green-400';
      case 'offline':
        return 'bg-red-500/10 border-red-500/30 text-red-400';
      default:
        return 'bg-yellow-500/10 border-yellow-500/30 text-yellow-400';
    }
  };

  if (loading && !data) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-cyan-500/10 rounded-lg">
            <Activity className="w-5 h-5 text-cyan-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Monitor do Sistema</h2>
            <p className="text-sm text-muted">
              Acompanhe a saúde da aplicação e status das APIs
            </p>
          </div>
        </div>

        <div className="flex items-center gap-3">
          <label className="flex items-center gap-2 text-sm text-muted">
            <input
              type="checkbox"
              checked={autoRefresh}
              onChange={(e) => setAutoRefresh(e.target.checked)}
              className="w-4 h-4 rounded border-subtle bg-layer-1 text-cyan-500 focus:ring-2 focus:ring-cyan-500"
            />
            Auto-refresh (30s)
          </label>

          <button
            onClick={loadHealthData}
            disabled={loading}
            className="px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
        </div>
      </div>

      {lastUpdate && (
        <div className="text-xs text-muted">
          Última atualização: {lastUpdate.toLocaleString('pt-BR')}
        </div>
      )}

      {data && (
        <>
          {/* System Metrics */}
          <div>
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <Server className="w-4 h-4 text-muted" />
              Métricas do Sistema
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
              {/* Memory Usage */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Cpu className="w-4 h-4 text-blue-400" />
                  <span className="text-xs font-medium text-muted">Memória RSS</span>
                </div>
                <p className="text-2xl font-bold text-white">
                  {formatBytes(data.system.memory.rss)}
                </p>
                <p className="text-xs text-muted mt-1">
                  Heap: {formatBytes(data.system.memory.heapUsed)} /{' '}
                  {formatBytes(data.system.memory.heapTotal)}
                </p>
              </div>

              {/* Uptime */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Clock className="w-4 h-4 text-green-400" />
                  <span className="text-xs font-medium text-muted">Uptime</span>
                </div>
                <p className="text-2xl font-bold text-white">
                  {formatUptime(data.system.uptime)}
                </p>
                <p className="text-xs text-muted mt-1">Tempo ativo do processo</p>
              </div>

              {/* Node Version */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Zap className="w-4 h-4 text-yellow-400" />
                  <span className="text-xs font-medium text-muted">Node.js</span>
                </div>
                <p className="text-2xl font-bold text-white">{data.system.nodeVersion}</p>
                <p className="text-xs text-muted mt-1">Versão do runtime</p>
              </div>

              {/* Platform */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Server className="w-4 h-4 text-purple-400" />
                  <span className="text-xs font-medium text-muted">Plataforma</span>
                </div>
                <p className="text-2xl font-bold text-white capitalize">
                  {data.system.platform}
                </p>
                <p className="text-xs text-muted mt-1">Sistema operacional</p>
              </div>
            </div>
          </div>

          {/* API Status */}
          <div>
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <Activity className="w-4 h-4 text-muted" />
              Status das APIs
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
              {data.apis.map((api, index) => (
                <div
                  key={index}
                  className={`border rounded-xl p-4 ${getStatusColor(api.status)}`}
                >
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-3">
                      {getStatusIcon(api.status)}
                      <div>
                        <p className="font-semibold">{api.name}</p>
                        {api.responseTime && (
                          <p className="text-xs opacity-80 mt-0.5">
                            {api.responseTime}ms
                          </p>
                        )}
                      </div>
                    </div>

                    <span className="text-xs font-bold uppercase px-2 py-1 rounded bg-black/20">
                      {api.status}
                    </span>
                  </div>

                  {api.error && (
                    <p className="text-xs mt-2 opacity-70">{api.error}</p>
                  )}
                </div>
              ))}
            </div>
          </div>

          {/* System Info */}
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-3">
              Informações Técnicas
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
              <div>
                <span className="text-muted">Memória Externa:</span>
                <span className="text-white ml-2 font-mono">
                  {formatBytes(data.system.memory.external)}
                </span>
              </div>
              <div>
                <span className="text-muted">Timestamp:</span>
                <span className="text-white ml-2 font-mono">
                  {new Date(data.system.timestamp).toLocaleString('pt-BR')}
                </span>
              </div>
            </div>
          </div>
        </>
      )}
    </div>
  );
}

```

---
#### `components/studio/AIMediaGenerator.tsx`

```
"use client";

import { useState } from "react";
import { Sparkles, DollarSign, Image, Video, Loader2, AlertCircle } from "lucide-react";
import { motion } from "framer-motion";
import { cn } from "@/lib/utils";
import Button from "@/components/ui/Button";
import Modal from "@/components/ui/Modal";

interface AIMediaGeneratorProps {
  sceneText: string;
  onGenerate: (prompt: string, type: "image" | "video") => Promise<string>;
  className?: string;
}

export default function AIMediaGenerator({
  sceneText,
  onGenerate,
  className,
}: AIMediaGeneratorProps) {
  const [isOpen, setIsOpen] = useState(false);
  const [prompt, setPrompt] = useState("");
  const [mediaType, setMediaType] = useState<"image" | "video">("image");
  const [isGenerating, setIsGenerating] = useState(false);
  const [generatedUrl, setGeneratedUrl] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  const costs = {
    image: { flux: 0.04, dalle: 0.02, stability: 0.03 },
    video: { runway: 0.50, pika: 0.40 },
  };

  const estimatedCost = mediaType === "image" ? costs.image.flux : costs.video.runway;

  const handleGenerate = async () => {
    if (!prompt.trim()) {
      setError("Por favor, descreva a mídia que deseja gerar");
      return;
    }

    setIsGenerating(true);
    setError(null);
    setGeneratedUrl(null);

    try {
      const url = await onGenerate(prompt, mediaType);
      setGeneratedUrl(url);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar mídia");
    } finally {
      setIsGenerating(false);
    }
  };

  const handleUseMedia = () => {
    // Implementar uso da mídia gerada
    setIsOpen(false);
    setPrompt("");
    setGeneratedUrl(null);
  };

  const handleClose = () => {
    if (!isGenerating) {
      setIsOpen(false);
      setPrompt("");
      setGeneratedUrl(null);
      setError(null);
    }
  };

  return (
    <>
      <button
        onClick={() => setIsOpen(true)}
        className={cn(
          "w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg",
          "bg-gradient-to-r from-purple-600 to-pink-600",
          "hover:from-purple-500 hover:to-pink-500",
          "text-white font-medium transition-all",
          "shadow-lg shadow-purple-500/20",
          className
        )}
      >
        <Sparkles className="w-4 h-4" />
        Gerar com IA
      </button>

      <Modal isOpen={isOpen} onClose={handleClose} title="Gerar Mídia com IA">
        <div className="space-y-6">
          {/* Tipo de Mídia */}
          <div>
            <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-3 block">
              Tipo de Mídia
            </label>
            <div className="grid grid-cols-2 gap-3">
              <button
                onClick={() => setMediaType("image")}
                className={cn(
                  "p-4 rounded-lg border-2 transition-all",
                  mediaType === "image"
                    ? "border-cyan-500 bg-cyan-500/10"
                    : "border-gray-700 hover:border-gray-600"
                )}
              >
                <Image className={cn("w-6 h-6 mx-auto mb-2", mediaType === "image" ? "text-cyan-400" : "text-gray-500")} />
                <p className={cn("text-sm font-medium", mediaType === "image" ? "text-cyan-400" : "text-gray-400")}>
                  Imagem
                </p>
                <p className="text-xs text-gray-600 mt-1">
                  ~${costs.image.flux.toFixed(2)}
                </p>
              </button>

              <button
                onClick={() => setMediaType("video")}
                className={cn(
                  "p-4 rounded-lg border-2 transition-all",
                  mediaType === "video"
                    ? "border-cyan-500 bg-cyan-500/10"
                    : "border-gray-700 hover:border-gray-600"
                )}
              >
                <Video className={cn("w-6 h-6 mx-auto mb-2", mediaType === "video" ? "text-cyan-400" : "text-gray-500")} />
                <p className={cn("text-sm font-medium", mediaType === "video" ? "text-cyan-400" : "text-gray-400")}>
                  Vídeo
                </p>
                <p className="text-xs text-gray-600 mt-1">
                  ~${costs.video.runway.toFixed(2)}
                </p>
              </button>
            </div>
          </div>

          {/* Contexto da Cena */}
          <div className="bg-gray-900 border border-gray-800 rounded-lg p-4">
            <p className="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2">
              Texto da Cena
            </p>
            <p className="text-sm text-gray-300">{sceneText}</p>
          </div>

          {/* Prompt */}
          <div>
            <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-2 block">
              Descreva a {mediaType === "image" ? "imagem" : "vídeo"}
            </label>
            <textarea
              value={prompt}
              onChange={(e) => setPrompt(e.target.value)}
              rows={4}
              placeholder={
                mediaType === "image"
                  ? "Ex: Paisagem montanhosa ao nascer do sol, cores vibrantes, estilo fotorrealista..."
                  : "Ex: Câmera se movendo suavemente sobre uma floresta verde, vista aérea, iluminação natural..."
              }
              className="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"
              disabled={isGenerating}
            />
            <div className="flex items-center justify-between mt-2">
              <p className="text-xs text-gray-600">
                {prompt.length} caracteres
              </p>
              <div className="flex items-center gap-1 text-xs text-amber-400">
                <DollarSign className="w-3 h-3" />
                <span>Custo estimado: ${estimatedCost.toFixed(2)}</span>
              </div>
            </div>
          </div>

          {/* Preview */}
          <AnimatePresence>
            {generatedUrl && (
              <motion.div
                initial={{ opacity: 0, scale: 0.95 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, scale: 0.95 }}
                className="space-y-3"
              >
                <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide block">
                  Preview
                </label>
                <div className="relative aspect-video rounded-lg overflow-hidden bg-gray-900 border border-gray-700">
                  {mediaType === "image" ? (
                    <img
                      src={generatedUrl}
                      alt="Generated"
                      className="w-full h-full object-cover"
                    />
                  ) : (
                    <video
                      src={generatedUrl}
                      controls
                      className="w-full h-full object-cover"
                    />
                  )}
                </div>
              </motion.div>
            )}
          </AnimatePresence>

          {/* Erro */}
          {error && (
            <div className="bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-center gap-2">
              <AlertCircle className="w-4 h-4 text-red-500 flex-shrink-0" />
              <p className="text-sm text-red-400">{error}</p>
            </div>
          )}

          {/* Ações */}
          <div className="flex gap-3">
            {generatedUrl ? (
              <>
                <Button
                  onClick={handleGenerate}
                  variant="secondary"
                  className="flex-1"
                  disabled={isGenerating}
                >
                  Gerar Novamente
                </Button>
                <Button onClick={handleUseMedia} variant="primary" className="flex-1">
                  Usar Esta Mídia
                </Button>
              </>
            ) : (
              <>
                <Button
                  onClick={handleClose}
                  variant="secondary"
                  className="flex-1"
                  disabled={isGenerating}
                >
                  Cancelar
                </Button>
                <Button
                  onClick={handleGenerate}
                  variant="primary"
                  className="flex-1"
                  disabled={isGenerating || !prompt.trim()}
                >
                  {isGenerating ? (
                    <>
                      <Loader2 className="w-4 h-4 animate-spin" />
                      Gerando...
                    </>
                  ) : (
                    <>
                      <Sparkles className="w-4 h-4" />
                      Gerar
                    </>
                  )}
                </Button>
              </>
            )}
          </div>

          {/* Aviso de Custo */}
          <div className="bg-amber-500/10 border border-amber-500/30 rounded-lg p-3">
            <p className="text-xs text-amber-400">
              ⚠️ A geração de mídia com IA consome créditos. O valor será debitado
              após a geração bem-sucedida.
            </p>
          </div>
        </div>
      </Modal>
    </>
  );
}

```

---
#### `components/studio/MediaSearchModal.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { Search, Filter, Grid3x3, PlayCircle, Download, Loader2, X } from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";
import { cn } from "@/lib/utils";
import Modal from "@/components/ui/Modal";
import { MediaItem } from "@/types";

interface MediaSearchModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSelect: (media: MediaItem) => void;
  initialQuery?: string;
  type?: "image" | "video" | "all";
}

export default function MediaSearchModal({
  isOpen,
  onClose,
  onSelect,
  initialQuery = "",
  type = "all",
}: MediaSearchModalProps) {
  const [query, setQuery] = useState(initialQuery);
  const [mediaType, setMediaType] = useState<"image" | "video" | "all">(type);
  const [source, setSource] = useState<"pexels" | "pixabay" | "all">("all");
  const [sortBy, setSortBy] = useState<"relevance" | "popular">("relevance");
  const [results, setResults] = useState<MediaItem[]>([]);
  const [isSearching, setIsSearching] = useState(false);
  const [selectedMedia, setSelectedMedia] = useState<MediaItem | null>(null);

  useEffect(() => {
    if (isOpen && initialQuery) {
      handleSearch();
    }
  }, [isOpen]);

  const handleSearch = async () => {
    if (!query.trim()) return;

    setIsSearching(true);
    try {
      // Implementar busca real nas APIs
      // Por agora, simular com dados mock
      await new Promise((resolve) => setTimeout(resolve, 1000));

      const mockResults: MediaItem[] = Array.from({ length: 12 }, (_, i) => ({
        id: `media-${i}`,
        source: i % 2 === 0 ? "pexels" : "pixabay",
        sourceId: `${i}`,
        url: `https://via.placeholder.com/1920x1080/1a1a2e/16213e?text=Media+${i + 1}`,
        previewUrl: `https://via.placeholder.com/400x300/1a1a2e/16213e?text=Media+${i + 1}`,
        type: mediaType === "all" ? (i % 2 === 0 ? "image" : "video") : mediaType,
        duration: mediaType === "video" || (mediaType === "all" && i % 2 !== 0) ? 15 : null,
        attribution: `Photographer ${i + 1}`,
      }));

      setResults(mockResults);
    } catch (error) {
      console.error("Erro ao buscar mídia:", error);
    } finally {
      setIsSearching(false);
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter") {
      handleSearch();
    }
  };

  const handleSelectMedia = (media: MediaItem) => {
    setSelectedMedia(media);
  };

  const handleConfirmSelection = () => {
    if (selectedMedia) {
      onSelect(selectedMedia);
      onClose();
    }
  };

  return (
    <Modal
      isOpen={isOpen}
      onClose={onClose}
      title="Buscar Mídia"
      size="large"
    >
      <div className="space-y-6">
        {/* Busca */}
        <div className="flex gap-3">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" />
            <input
              type="text"
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Buscar imagens ou vídeos..."
              className="w-full bg-gray-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"
            />
          </div>
          <button
            onClick={handleSearch}
            disabled={isSearching || !query.trim()}
            className={cn(
              "px-6 py-3 rounded-lg font-medium transition-all",
              isSearching || !query.trim()
                ? "bg-gray-800 text-gray-500 cursor-not-allowed"
                : "bg-cyan-600 hover:bg-cyan-500 text-white"
            )}
          >
            {isSearching ? <Loader2 className="w-5 h-5 animate-spin" /> : "Buscar"}
          </button>
        </div>

        {/* Filtros */}
        <div className="flex flex-wrap items-center gap-3">
          <div className="flex items-center gap-2">
            <Filter className="w-4 h-4 text-gray-500" />
            <span className="text-sm text-gray-500">Filtros:</span>
          </div>

          {/* Tipo */}
          <select
            value={mediaType}
            onChange={(e) => setMediaType(e.target.value as "image" | "video" | "all")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="all">Todos</option>
            <option value="image">Imagens</option>
            <option value="video">Vídeos</option>
          </select>

          {/* Fonte */}
          <select
            value={source}
            onChange={(e) => setSource(e.target.value as "pexels" | "pixabay" | "all")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="all">Todas as fontes</option>
            <option value="pexels">Pexels</option>
            <option value="pixabay">Pixabay</option>
          </select>

          {/* Ordenação */}
          <select
            value={sortBy}
            onChange={(e) => setSortBy(e.target.value as "relevance" | "popular")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="relevance">Relevância</option>
            <option value="popular">Popularidade</option>
          </select>
        </div>

        {/* Resultados */}
        <div className="min-h-[400px]">
          {isSearching ? (
            <div className="flex items-center justify-center h-[400px]">
              <div className="text-center">
                <Loader2 className="w-12 h-12 text-cyan-500 animate-spin mx-auto mb-4" />
                <p className="text-gray-400">Buscando mídia...</p>
              </div>
            </div>
          ) : results.length > 0 ? (
            <>
              <div className="flex items-center justify-between mb-4">
                <p className="text-sm text-gray-400">
                  {results.length} resultados encontrados
                </p>
                {selectedMedia && (
                  <div className="flex items-center gap-2 text-sm text-cyan-400">
                    <span>1 selecionado</span>
                    <button
                      onClick={() => setSelectedMedia(null)}
                      className="p-1 hover:bg-cyan-500/20 rounded transition-colors"
                    >
                      <X className="w-4 h-4" />
                    </button>
                  </div>
                )}
              </div>

              <div className="grid grid-cols-3 gap-4 max-h-[500px] overflow-y-auto pr-2">
                {results.map((media) => (
                  <MediaCard
                    key={media.id}
                    media={media}
                    isSelected={selectedMedia?.id === media.id}
                    onClick={() => handleSelectMedia(media)}
                  />
                ))}
              </div>
            </>
          ) : (
            <div className="flex items-center justify-center h-[400px]">
              <div className="text-center">
                <Grid3x3 className="w-16 h-16 text-gray-700 mx-auto mb-4" />
                <p className="text-gray-500">Nenhum resultado encontrado</p>
                <p className="text-sm text-gray-600 mt-2">
                  Tente buscar com outros termos
                </p>
              </div>
            </div>
          )}
        </div>

        {/* Ações */}
        {selectedMedia && (
          <div className="flex gap-3 pt-4 border-t border-gray-800">
            <button
              onClick={onClose}
              className="flex-1 px-4 py-3 rounded-lg font-medium bg-gray-800 hover:bg-gray-700 text-white transition-all"
            >
              Cancelar
            </button>
            <button
              onClick={handleConfirmSelection}
              className="flex-1 px-4 py-3 rounded-lg font-medium bg-cyan-600 hover:bg-cyan-500 text-white transition-all"
            >
              Usar Mídia Selecionada
            </button>
          </div>
        )}
      </div>
    </Modal>
  );
}

interface MediaCardProps {
  media: MediaItem;
  isSelected: boolean;
  onClick: () => void;
}

function MediaCard({ media, isSelected, onClick }: MediaCardProps) {
  return (
    <motion.button
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
      onClick={onClick}
      className={cn(
        "relative aspect-video rounded-lg overflow-hidden bg-gray-900 border-2 transition-all",
        isSelected
          ? "border-cyan-500 ring-2 ring-cyan-500/50"
          : "border-gray-800 hover:border-gray-700"
      )}
    >
      <img
        src={media.previewUrl}
        alt="Media preview"
        className="w-full h-full object-cover"
      />

      {/* Overlay com info */}
      <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 hover:opacity-100 transition-opacity">
        <div className="absolute bottom-2 left-2 right-2">
          <div className="flex items-center justify-between text-white text-xs">
            <span className="truncate">{media.attribution}</span>
            {media.type === "video" && media.duration && (
              <div className="flex items-center gap-1 bg-black/50 rounded px-1.5 py-0.5">
                <PlayCircle className="w-3 h-3" />
                <span>{media.duration}s</span>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Indicador de tipo */}
      <div className="absolute top-2 right-2">
        <div className="bg-black/70 backdrop-blur-sm rounded-full p-1.5">
          {media.type === "video" ? (
            <PlayCircle className="w-4 h-4 text-white" />
          ) : (
            <Download className="w-4 h-4 text-white" />
          )}
        </div>
      </div>

      {/* Check de seleção */}
      <AnimatePresence>
        {isSelected && (
          <motion.div
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            exit={{ scale: 0 }}
            className="absolute top-2 left-2 bg-cyan-500 rounded-full p-1"
          >
            <svg
              className="w-4 h-4 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={3}
                d="M5 13l4 4L19 7"
              />
            </svg>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.button>
  );
}

```

---
#### `components/studio/MediaUploader.tsx`

```
"use client";

import { useState, useCallback } from "react";
import { Upload, X, FileVideo, FileImage, AlertCircle } from "lucide-react";
import { cn } from "@/lib/utils";
import { motion } from "framer-motion";

interface MediaUploaderProps {
  sceneId: string;
  onUploadComplete: (url: string, type: "image" | "video") => void;
  className?: string;
}

export default function MediaUploader({
  sceneId,
  onUploadComplete,
  className,
}: MediaUploaderProps) {
  const [isDragging, setIsDragging] = useState(false);
  const [isUploading, setIsUploading] = useState(false);
  const [uploadProgress, setUploadProgress] = useState(0);
  const [error, setError] = useState<string | null>(null);

  const handleFile = useCallback(
    async (file: File) => {
      setError(null);

      // Validar tipo de arquivo
      const isVideo = file.type.startsWith("video/");
      const isImage = file.type.startsWith("image/");

      if (!isVideo && !isImage) {
        setError("Formato de arquivo não suportado");
        return;
      }

      // Validar tamanho (máximo 100MB)
      const maxSize = 100 * 1024 * 1024;
      if (file.size > maxSize) {
        setError("Arquivo muito grande. Máximo: 100MB");
        return;
      }

      setIsUploading(true);
      setUploadProgress(0);

      try {
        // Simular upload com progresso
        // Em produção, fazer upload real para Vercel Blob ou S3
        const interval = setInterval(() => {
          setUploadProgress((prev) => {
            if (prev >= 90) {
              clearInterval(interval);
              return prev;
            }
            return prev + 10;
          });
        }, 200);

        await new Promise((resolve) => setTimeout(resolve, 2000));

        clearInterval(interval);
        setUploadProgress(100);

        // Criar URL temporário
        const url = URL.createObjectURL(file);
        const type = isVideo ? "video" : "image";

        onUploadComplete(url, type);

        setTimeout(() => {
          setIsUploading(false);
          setUploadProgress(0);
        }, 500);
      } catch {
        setError("Erro ao fazer upload do arquivo");
        setIsUploading(false);
        setUploadProgress(0);
      }
    },
    [onUploadComplete]
  );

  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
  }, []);

  const handleDrop = useCallback(
    (e: React.DragEvent) => {
      e.preventDefault();
      setIsDragging(false);

      const file = e.dataTransfer.files[0];
      if (file) {
        handleFile(file);
      }
    },
    [handleFile]
  );

  const handleFileSelect = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const file = e.target.files?.[0];
      if (file) {
        handleFile(file);
      }
    },
    [handleFile]
  );

  return (
    <div className={cn("space-y-4", className)}>
      <input
        type="file"
        accept="video/*,image/*"
        onChange={handleFileSelect}
        className="hidden"
        id={`media-upload-${sceneId}`}
        disabled={isUploading}
      />

      <label
        htmlFor={`media-upload-${sceneId}`}
        onDragOver={handleDragOver}
        onDragLeave={handleDragLeave}
        onDrop={handleDrop}
        className={cn(
          "block border-2 border-dashed rounded-xl p-8 transition-all cursor-pointer",
          isDragging
            ? "border-cyan-500 bg-cyan-500/10"
            : isUploading
            ? "border-gray-700 bg-gray-900 cursor-not-allowed"
            : "border-gray-700 hover:border-gray-600 hover:bg-gray-900/50"
        )}
      >
        <div className="flex flex-col items-center justify-center text-center">
          {isUploading ? (
            <motion.div
              initial={{ scale: 0.8, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              className="space-y-4 w-full"
            >
              <div className="w-16 h-16 rounded-full bg-cyan-500/20 flex items-center justify-center mx-auto">
                <Upload className="w-8 h-8 text-cyan-500 animate-pulse" />
              </div>
              <div className="space-y-2">
                <p className="text-white font-medium">Enviando arquivo...</p>
                <div className="w-full max-w-xs mx-auto h-2 bg-gray-800 rounded-full overflow-hidden">
                  <motion.div
                    initial={{ width: 0 }}
                    animate={{ width: `${uploadProgress}%` }}
                    transition={{ duration: 0.3 }}
                    className="h-full bg-gradient-to-r from-cyan-500 to-blue-600"
                  />
                </div>
                <p className="text-sm text-gray-400">{uploadProgress}%</p>
              </div>
            </motion.div>
          ) : (
            <>
              <div className="w-16 h-16 rounded-full bg-gray-800 flex items-center justify-center mb-4">
                <Upload className="w-8 h-8 text-gray-500" />
              </div>
              <p className="text-white font-medium mb-2">
                {isDragging ? "Solte o arquivo aqui" : "Clique ou arraste um arquivo"}
              </p>
              <p className="text-sm text-gray-500 mb-4">
                Vídeo ou imagem própria
              </p>
              <div className="flex items-center gap-4 text-xs text-gray-600">
                <div className="flex items-center gap-1">
                  <FileVideo className="w-4 h-4" />
                  <span>MP4, MOV, WEBM</span>
                </div>
                <div className="flex items-center gap-1">
                  <FileImage className="w-4 h-4" />
                  <span>JPG, PNG, WEBP</span>
                </div>
              </div>
            </>
          )}
        </div>
      </label>

      {error && (
        <motion.div
          initial={{ opacity: 0, y: -10 }}
          animate={{ opacity: 1, y: 0 }}
          className="bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-center gap-2"
        >
          <AlertCircle className="w-4 h-4 text-red-500 flex-shrink-0" />
          <p className="text-sm text-red-400">{error}</p>
          <button
            onClick={() => setError(null)}
            className="ml-auto p-1 hover:bg-red-500/20 rounded transition-colors"
          >
            <X className="w-4 h-4 text-red-400" />
          </button>
        </motion.div>
      )}
    </div>
  );
}

```

---
#### `components/system/SystemStatus.tsx`

```
"use client";

import { useEffect, useState } from "react";

type Health = {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, "ONLINE" | "OFFLINE">;
};

export default function SystemStatus() {
  const [data, setData] = useState<Health | null>(null);

  useEffect(() => {
    fetch("/api/health")
      .then(res => res.json())
      .then(setData)
      .catch(() => setData(null));
  }, []);

  if (!data) {
    return <p>Checking system status...</p>;
  }

  return (
    <div style={{ border: "1px solid #333", padding: 16 }}>
      <strong>System Status: {data.status}</strong>
      <ul>
        {Object.entries(data.apis).map(([name, status]) => (
          <li key={name}>
            {name}: {status}
          </li>
        ))}
      </ul>
    </div>
  );
}

```

---
#### `components/ui/ActivityLog.tsx`

```
"use client";

import { useEffect, useRef } from "react";
import { motion } from "framer-motion";
import { CheckCircle2, XCircle, AlertCircle, Info, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";

export type ActivityStatus = "pending" | "running" | "success" | "error" | "warning" | "info";

export interface Activity {
  id: string;
  message: string;
  status: ActivityStatus;
  timestamp: Date;
  details?: string;
}

interface ActivityLogProps {
  activities: Activity[];
  className?: string;
  maxHeight?: string;
  autoScroll?: boolean;
  showTimestamp?: boolean;
}

export default function ActivityLog({
  activities,
  className,
  maxHeight = "400px",
  autoScroll = true,
  showTimestamp = true,
}: ActivityLogProps) {
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (autoScroll && scrollRef.current) {
      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
    }
  }, [activities, autoScroll]);

  return (
    <div
      ref={scrollRef}
      className={cn(
        "bg-gray-950 border border-gray-800 rounded-lg p-4 font-mono text-sm overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",
        className
      )}
      style={{ maxHeight }}
    >
      <AnimatePresence initial={false}>
        {activities.map((activity, index) => (
          <ActivityItem
            key={activity.id}
            activity={activity}
            showTimestamp={showTimestamp}
            isLast={index === activities.length - 1}
          />
        ))}
      </AnimatePresence>
    </div>
  );
}

interface ActivityItemProps {
  activity: Activity;
  showTimestamp: boolean;
  isLast: boolean;
}

function ActivityItem({ activity, showTimestamp, isLast }: ActivityItemProps) {
  const getIcon = () => {
    switch (activity.status) {
      case "success":
        return <CheckCircle2 className="w-4 h-4 text-green-500 flex-shrink-0" />;
      case "error":
        return <XCircle className="w-4 h-4 text-red-500 flex-shrink-0" />;
      case "warning":
        return <AlertCircle className="w-4 h-4 text-amber-500 flex-shrink-0" />;
      case "running":
        return <Loader2 className="w-4 h-4 text-cyan-500 animate-spin flex-shrink-0" />;
      case "info":
        return <Info className="w-4 h-4 text-blue-500 flex-shrink-0" />;
      default:
        return <div className="w-2 h-2 rounded-full bg-gray-600 flex-shrink-0" />;
    }
  };

  const getTextColor = () => {
    switch (activity.status) {
      case "success":
        return "text-green-400";
      case "error":
        return "text-red-400";
      case "warning":
        return "text-amber-400";
      case "running":
        return "text-cyan-400";
      case "info":
        return "text-blue-400";
      default:
        return "text-gray-400";
    }
  };

  const formatTime = (date: Date) => {
    return date.toLocaleTimeString("pt-BR", {
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
    });
  };

  return (
    <motion.div
      initial={{ opacity: 0, x: -10 }}
      animate={{ opacity: 1, x: 0 }}
      exit={{ opacity: 0, x: 10 }}
      transition={{ duration: 0.2 }}
      className={cn("flex items-start gap-3 py-2", !isLast && "border-b border-gray-800/50")}
    >
      {getIcon()}

      <div className="flex-1 min-w-0">
        <div className="flex items-center gap-2 flex-wrap">
          {showTimestamp && (
            <span className="text-xs text-gray-600">[{formatTime(activity.timestamp)}]</span>
          )}
          <span className={cn("font-medium", getTextColor())}>{activity.message}</span>
        </div>

        {activity.details && (
          <div className="mt-1 text-xs text-gray-500 pl-4 border-l-2 border-gray-800">
            {activity.details}
          </div>
        )}
      </div>
    </motion.div>
  );
}

// Hook para gerenciar activities
export function useActivityLog() {
  const [activities, setActivities] = useState<Activity[]>([]);

  const addActivity = (message: string, status: ActivityStatus = "info", details?: string) => {
    const activity: Activity = {
      id: `${Date.now()}-${Math.random()}`,
      message,
      status,
      timestamp: new Date(),
      details,
    };
    setActivities((prev) => [...prev, activity]);
    return activity.id;
  };

  const updateActivity = (id: string, updates: Partial<Activity>) => {
    setActivities((prev) =>
      prev.map((activity) =>
        activity.id === id ? { ...activity, ...updates } : activity
      )
    );
  };

  const clearActivities = () => {
    setActivities([]);
  };

  return {
    activities,
    addActivity,
    updateActivity,
    clearActivities,
  };
}

function useState<T>(initialState: T): [T, React.Dispatch<React.SetStateAction<T>>] {
  const ref = useRef<T>(initialState);
  const [, forceUpdate] = useReducer((x) => x + 1, 0);

  const setState = (value: T | ((prev: T) => T)) => {
    const newValue = typeof value === "function" ? (value as (prev: T) => T)(ref.current) : value;
    ref.current = newValue;
    forceUpdate();
  };

  return [ref.current, setState];
}

function useReducer(reducer: (x: number) => number, initialState: number): [number, () => void] {
  const ref = useRef<number>(initialState);
  const forceUpdateRef = useRef<(() => void) | null>(null);

  if (!forceUpdateRef.current) {
    forceUpdateRef.current = () => {
      ref.current = reducer(ref.current);
    };
  }

  return [ref.current, forceUpdateRef.current];
}

```

---
#### `components/ui/Badge.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface BadgeProps {
  children: React.ReactNode;
  variant?: "default" | "success" | "warning" | "error" | "info";
  size?: "sm" | "md";
  className?: string;
}

export default function Badge({
  children,
  variant = "default",
  size = "sm",
  className,
}: BadgeProps) {
  const variants = {
    default: "bg-gray-700 text-gray-300",
    success: "bg-green-500/10 text-green-400",
    warning: "bg-yellow-500/10 text-yellow-400",
    error: "bg-red-500/10 text-red-400",
    info: "bg-blue-500/10 text-blue-400",
  };

  const sizes = {
    sm: "px-2 py-0.5 text-xs",
    md: "px-3 py-1 text-sm",
  };

  return (
    <span
      className={cn(
        "inline-flex items-center rounded-full font-medium",
        variants[variant],
        sizes[size],
        className
      )}
    >
      {children}
    </span>
  );
}

```

---
#### `components/ui/Button.tsx`

```
"use client";

import { forwardRef, ButtonHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { Loader2 } from "lucide-react";

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: "primary" | "secondary" | "outline" | "success" | "warning" | "danger" | "ghost";
  size?: "sm" | "md" | "lg";
  isLoading?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      className,
      variant = "primary",
      size = "md",
      isLoading = false,
      leftIcon,
      rightIcon,
      children,
      disabled,
      ...props
    },
    ref
  ) => {
    const variants = {
      primary: "bg-primary-600 hover:bg-primary-700 text-white",
      secondary: "bg-gray-700 hover:bg-gray-600 text-white",
      outline: "border border-gray-600 hover:border-gray-500 hover:bg-gray-800 text-gray-300",
      success: "bg-green-600 hover:bg-green-700 text-white",
      warning: "bg-yellow-600 hover:bg-yellow-700 text-white",
      danger: "bg-red-600 hover:bg-red-700 text-white",
      ghost: "hover:bg-gray-800 text-gray-300",
    };

    const sizes = {
      sm: "text-sm px-3 py-1.5",
      md: "px-4 py-2",
      lg: "text-lg px-6 py-3",
    };

    return (
      <button
        ref={ref}
        className={cn(
          "inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200",
          "disabled:opacity-50 disabled:cursor-not-allowed",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          variants[variant],
          sizes[size],
          className
        )}
        disabled={disabled || isLoading}
        {...props}
      >
        {isLoading ? (
          <Loader2 className="w-4 h-4 animate-spin" />
        ) : (
          leftIcon
        )}
        {children}
        {!isLoading && rightIcon}
      </button>
    );
  }
);

Button.displayName = "Button";

export default Button;

```

---
#### `components/ui/Card.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface CardProps {
  children: React.ReactNode;
  className?: string;
  hover?: boolean;
  padding?: "none" | "sm" | "md" | "lg";
}

export default function Card({
  children,
  className,
  hover = false,
  padding = "md",
}: CardProps) {
  const paddings = {
    none: "",
    sm: "p-4",
    md: "p-6",
    lg: "p-8",
  };

  return (
    <div
      className={cn(
        "rounded-xl border border-gray-800 bg-gray-900/50 backdrop-blur-sm",
        paddings[padding],
        hover && "transition-all duration-200 hover:shadow-lg hover:shadow-primary-500/10 hover:-translate-y-0.5",
        className
      )}
    >
      {children}
    </div>
  );
}

interface CardHeaderProps {
  children: React.ReactNode;
  className?: string;
}

export function CardHeader({ children, className }: CardHeaderProps) {
  return (
    <div className={cn("mb-4", className)}>
      {children}
    </div>
  );
}

interface CardTitleProps {
  children: React.ReactNode;
  className?: string;
}

export function CardTitle({ children, className }: CardTitleProps) {
  return (
    <h3 className={cn("text-lg font-semibold text-white", className)}>
      {children}
    </h3>
  );
}

interface CardDescriptionProps {
  children: React.ReactNode;
  className?: string;
}

export function CardDescription({ children, className }: CardDescriptionProps) {
  return (
    <p className={cn("text-sm text-gray-400 mt-1", className)}>
      {children}
    </p>
  );
}

interface CardContentProps {
  children: React.ReactNode;
  className?: string;
}

export function CardContent({ children, className }: CardContentProps) {
  return <div className={cn("", className)}>{children}</div>;
}

interface CardFooterProps {
  children: React.ReactNode;
  className?: string;
}

export function CardFooter({ children, className }: CardFooterProps) {
  return (
    <div className={cn("mt-4 pt-4 border-t border-gray-800", className)}>
      {children}
    </div>
  );
}

```

---
#### `components/ui/Input.tsx`

```
"use client";

import { forwardRef, InputHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Input = forwardRef<HTMLInputElement, InputProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={inputId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <input
          ref={ref}
          id={inputId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Input.displayName = "Input";

export default Input;

```

---
#### `components/ui/Modal.tsx`

```
"use client";

import { useEffect, useCallback } from "react";
import { X } from "lucide-react";
import { cn } from "@/lib/utils";

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  size?: "sm" | "md" | "lg" | "xl" | "full";
  showCloseButton?: boolean;
}

export default function Modal({
  isOpen,
  onClose,
  title,
  children,
  size = "md",
  showCloseButton = true,
}: ModalProps) {
  const handleEscape = useCallback(
    (e: KeyboardEvent) => {
      if (e.key === "Escape") {
        onClose();
      }
    },
    [onClose]
  );

  useEffect(() => {
    if (isOpen) {
      document.addEventListener("keydown", handleEscape);
      document.body.style.overflow = "hidden";
    }

    return () => {
      document.removeEventListener("keydown", handleEscape);
      document.body.style.overflow = "unset";
    };
  }, [isOpen, handleEscape]);

  if (!isOpen) return null;

  const sizes = {
    sm: "max-w-md",
    md: "max-w-lg",
    lg: "max-w-2xl",
    xl: "max-w-4xl",
    full: "max-w-[90vw]",
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center">
      {/* Backdrop */}
      <div
        className="absolute inset-0 bg-black/70 backdrop-blur-sm"
        onClick={onClose}
      />

      {/* Modal */}
      <div
        className={cn(
          "relative w-full mx-4 bg-gradient-to-br from-layer-1/95 via-indigo-950/20 to-layer-2/95 backdrop-blur-xl rounded-2xl shadow-2xl border-2 border-subtle",
          "max-h-[90vh] overflow-hidden flex flex-col",
          "animate-fade-in shadow-glow-lg shadow-indigo-500/20",
          sizes[size]
        )}
      >
        {/* Animated gradient mesh background */}
        <div className="absolute inset-0 bg-gradient-mesh opacity-10 pointer-events-none" />

        {/* Glow overlay */}
        <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-blue-500/5 to-purple-500/5 pointer-events-none rounded-2xl" />

        {/* Header */}
        {(title || showCloseButton) && (
          <div className="relative z-10 flex items-center justify-between px-6 py-4 border-b border-subtle bg-gradient-to-r from-layer-2/50 to-transparent backdrop-blur-sm">
            {title && (
              <h2 className="text-lg font-semibold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent">{title}</h2>
            )}
            {showCloseButton && (
              <button
                onClick={onClose}
                className="p-1 rounded-lg hover:bg-layer-2 text-muted hover:text-white transition-all hover:shadow-glow-sm"
              >
                <X className="w-5 h-5" />
              </button>
            )}
          </div>
        )}

        {/* Content */}
        <div className="relative z-10 flex-1 overflow-auto p-6">{children}</div>
      </div>
    </div>
  );
}

```

---
#### `components/ui/ProgressBar.tsx`

```
"use client";

import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

interface ProgressBarProps {
  progress: number; // 0-100
  label?: string;
  showPercentage?: boolean;
  className?: string;
  variant?: "default" | "success" | "warning" | "error";
  animate?: boolean;
}

export default function ProgressBar({
  progress,
  label,
  showPercentage = true,
  className,
  variant = "default",
  animate = true,
}: ProgressBarProps) {
  const normalizedProgress = Math.min(Math.max(progress, 0), 100);

  const variantStyles = {
    default: "from-cyan-500 to-blue-600",
    success: "from-green-500 to-emerald-600",
    warning: "from-amber-500 to-orange-600",
    error: "from-red-500 to-rose-600",
  };

  const glowColors = {
    default: "shadow-cyan-500/50",
    success: "shadow-green-500/50",
    warning: "shadow-amber-500/50",
    error: "shadow-red-500/50",
  };

  return (
    <div className={cn("space-y-2", className)}>
      {(label || showPercentage) && (
        <div className="flex items-center justify-between text-sm">
          {label && <span className="text-gray-300">{label}</span>}
          {showPercentage && (
            <span className="text-gray-400 font-mono">
              {normalizedProgress.toFixed(0)}%
            </span>
          )}
        </div>
      )}

      <div className="relative w-full h-2 bg-gray-800 rounded-full overflow-hidden">
        {/* Barra de fundo com shimmer */}
        <div className="absolute inset-0 bg-gradient-to-r from-transparent via-gray-700/50 to-transparent animate-shimmer" />

        {/* Barra de progresso */}
        <motion.div
          initial={animate ? { width: 0 } : { width: `${normalizedProgress}%` }}
          animate={{ width: `${normalizedProgress}%` }}
          transition={{
            duration: animate ? 0.5 : 0,
            ease: "easeOut",
          }}
          className={cn(
            "h-full rounded-full bg-gradient-to-r shadow-lg",
            variantStyles[variant],
            glowColors[variant]
          )}
        >
          {/* Efeito de brilho animado */}
          <div className="w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer" />
        </motion.div>
      </div>
    </div>
  );
}

interface MultiProgressBarProps {
  segments: Array<{
    value: number;
    label: string;
    color: string;
  }>;
  className?: string;
}

export function MultiProgressBar({ segments, className }: MultiProgressBarProps) {
  const total = segments.reduce((sum, seg) => sum + seg.value, 0);

  return (
    <div className={cn("space-y-3", className)}>
      <div className="flex items-center h-3 w-full bg-gray-800 rounded-full overflow-hidden">
        {segments.map((segment, index) => {
          const percentage = (segment.value / total) * 100;

          return (
            <motion.div
              key={index}
              initial={{ width: 0 }}
              animate={{ width: `${percentage}%` }}
              transition={{ duration: 0.5, delay: index * 0.1 }}
              className="h-full"
              style={{ backgroundColor: segment.color }}
            />
          );
        })}
      </div>

      <div className="grid grid-cols-2 gap-2">
        {segments.map((segment, index) => {
          const percentage = ((segment.value / total) * 100).toFixed(1);

          return (
            <div key={index} className="flex items-center gap-2">
              <div
                className="w-3 h-3 rounded-full"
                style={{ backgroundColor: segment.color }}
              />
              <span className="text-xs text-gray-400">
                {segment.label} ({percentage}%)
              </span>
            </div>
          );
        })}
      </div>
    </div>
  );
}

```

---
#### `components/ui/Select.tsx`

```
"use client";

import { forwardRef, SelectHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { ChevronDown } from "lucide-react";

interface SelectOption {
  value: string;
  label: string;
  disabled?: boolean;
}

interface SelectProps extends Omit<SelectHTMLAttributes<HTMLSelectElement>, "onChange"> {
  label?: string;
  error?: string;
  options: SelectOption[];
  placeholder?: string;
  onChange?: (value: string) => void;
}

const Select = forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, label, error, options, placeholder, id, onChange, ...props }, ref) => {
    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={selectId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <div className="relative">
          <select
            ref={ref}
            id={selectId}
            className={cn(
              "w-full rounded-lg border bg-gray-800 px-4 py-2 pr-10 text-white appearance-none cursor-pointer",
              "transition-colors duration-200",
              "focus:outline-none focus:ring-1",
              error
                ? "border-red-500 focus:border-red-500 focus:ring-red-500"
                : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
              className
            )}
            onChange={(e) => onChange?.(e.target.value)}
            {...props}
          >
            {placeholder && (
              <option value="" disabled>
                {placeholder}
              </option>
            )}
            {options.map((option) => (
              <option
                key={option.value}
                value={option.value}
                disabled={option.disabled}
              >
                {option.label}
              </option>
            ))}
          </select>
          <ChevronDown className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none" />
        </div>
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
      </div>
    );
  }
);

Select.displayName = "Select";

export default Select;

```

---
#### `components/ui/StepIndicator.tsx`

```
"use client";

import { motion } from "framer-motion";
import { CheckCircle2, Circle, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";

export interface Step {
  id: string;
  title: string;
  description?: string;
  status: "pending" | "active" | "completed" | "error";
}

interface StepIndicatorProps {
  steps: Step[];
  currentStep: number;
  className?: string;
  orientation?: "horizontal" | "vertical";
  showDescription?: boolean;
}

export default function StepIndicator({
  steps,
  currentStep,
  className,
  orientation = "horizontal",
  showDescription = true,
}: StepIndicatorProps) {
  return orientation === "horizontal" ? (
    <HorizontalStepIndicator
      steps={steps}
      currentStep={currentStep}
      className={className}
      showDescription={showDescription}
    />
  ) : (
    <VerticalStepIndicator
      steps={steps}
      currentStep={currentStep}
      className={className}
      showDescription={showDescription}
    />
  );
}

function HorizontalStepIndicator({
  steps,
  currentStep,
  className,
  showDescription,
}: Omit<StepIndicatorProps, "orientation">) {
  return (
    <div className={cn("w-full", className)}>
      <div className="flex items-center justify-between">
        {steps.map((step, index) => {
          const isCompleted = index < currentStep;
          const isActive = index === currentStep;
          const isPending = index > currentStep;

          return (
            <div key={step.id} className="flex items-center flex-1">
              {/* Step Circle */}
              <div className="flex flex-col items-center">
                <div className="relative">
                  {isCompleted ? (
                    <motion.div
                      initial={{ scale: 0 }}
                      animate={{ scale: 1 }}
                      className="w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-green-500/50"
                    >
                      <CheckCircle2 className="w-6 h-6 text-white" />
                    </motion.div>
                  ) : isActive ? (
                    <motion.div
                      animate={{
                        scale: [1, 1.1, 1],
                        boxShadow: [
                          "0 0 0 0 rgba(6, 182, 212, 0.7)",
                          "0 0 0 10px rgba(6, 182, 212, 0)",
                          "0 0 0 0 rgba(6, 182, 212, 0)",
                        ],
                      }}
                      transition={{
                        duration: 2,
                        repeat: Infinity,
                        repeatType: "loop",
                      }}
                      className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/50"
                    >
                      <Loader2 className="w-6 h-6 text-white animate-spin" />
                    </motion.div>
                  ) : (
                    <div className="w-10 h-10 rounded-full bg-gray-800 border-2 border-gray-700 flex items-center justify-center">
                      <Circle className="w-6 h-6 text-gray-600" />
                    </div>
                  )}
                </div>

                {/* Step Info */}
                <div className="mt-3 text-center max-w-[120px]">
                  <p
                    className={cn(
                      "text-sm font-semibold",
                      isCompleted && "text-green-400",
                      isActive && "text-cyan-400",
                      isPending && "text-gray-500"
                    )}
                  >
                    {step.title}
                  </p>
                  {showDescription && step.description && (
                    <p className="text-xs text-gray-600 mt-1">{step.description}</p>
                  )}
                </div>
              </div>

              {/* Connector Line */}
              {index < steps.length - 1 && (
                <div className="flex-1 h-0.5 mx-4 relative">
                  <div className="absolute inset-0 bg-gray-800" />
                  <motion.div
                    initial={{ width: "0%" }}
                    animate={{ width: index < currentStep ? "100%" : "0%" }}
                    transition={{ duration: 0.5 }}
                    className="absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-600"
                  />
                </div>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}

function VerticalStepIndicator({
  steps,
  currentStep,
  className,
  showDescription,
}: Omit<StepIndicatorProps, "orientation">) {
  return (
    <div className={cn("space-y-6", className)}>
      {steps.map((step, index) => {
        const isCompleted = index < currentStep;
        const isActive = index === currentStep;
        const isPending = index > currentStep;

        return (
          <div key={step.id} className="flex items-start gap-4">
            {/* Step Circle and Line */}
            <div className="flex flex-col items-center">
              <div className="relative">
                {isCompleted ? (
                  <motion.div
                    initial={{ scale: 0 }}
                    animate={{ scale: 1 }}
                    className="w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-green-500/50"
                  >
                    <CheckCircle2 className="w-6 h-6 text-white" />
                  </motion.div>
                ) : isActive ? (
                  <motion.div
                    animate={{
                      scale: [1, 1.1, 1],
                      boxShadow: [
                        "0 0 0 0 rgba(6, 182, 212, 0.7)",
                        "0 0 0 10px rgba(6, 182, 212, 0)",
                        "0 0 0 0 rgba(6, 182, 212, 0)",
                      ],
                    }}
                    transition={{
                      duration: 2,
                      repeat: Infinity,
                      repeatType: "loop",
                    }}
                    className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/50"
                  >
                    <Loader2 className="w-6 h-6 text-white animate-spin" />
                  </motion.div>
                ) : (
                  <div className="w-10 h-10 rounded-full bg-gray-800 border-2 border-gray-700 flex items-center justify-center">
                    <Circle className="w-6 h-6 text-gray-600" />
                  </div>
                )}
              </div>

              {/* Connector Line */}
              {index < steps.length - 1 && (
                <div className="w-0.5 h-16 my-2 relative">
                  <div className="absolute inset-0 bg-gray-800" />
                  <motion.div
                    initial={{ height: "0%" }}
                    animate={{ height: index < currentStep ? "100%" : "0%" }}
                    transition={{ duration: 0.5 }}
                    className="absolute inset-0 bg-gradient-to-b from-green-500 to-emerald-600"
                  />
                </div>
              )}
            </div>

            {/* Step Info */}
            <div className="flex-1 pt-2">
              <p
                className={cn(
                  "text-base font-semibold",
                  isCompleted && "text-green-400",
                  isActive && "text-cyan-400",
                  isPending && "text-gray-500"
                )}
              >
                {step.title}
              </p>
              {showDescription && step.description && (
                <p className="text-sm text-gray-600 mt-1">{step.description}</p>
              )}
            </div>
          </div>
        );
      })}
    </div>
  );
}

// Compact version for minimal space
interface CompactStepIndicatorProps {
  totalSteps: number;
  currentStep: number;
  className?: string;
}

export function CompactStepIndicator({
  totalSteps,
  currentStep,
  className,
}: CompactStepIndicatorProps) {
  const progress = ((currentStep + 1) / totalSteps) * 100;

  return (
    <div className={cn("space-y-2", className)}>
      <div className="flex items-center justify-between text-sm">
        <span className="text-gray-400">
          Etapa {currentStep + 1} de {totalSteps}
        </span>
        <span className="text-cyan-400 font-semibold">{progress.toFixed(0)}%</span>
      </div>
      <div className="relative w-full h-2 bg-gray-800 rounded-full overflow-hidden">
        <motion.div
          initial={{ width: 0 }}
          animate={{ width: `${progress}%` }}
          transition={{ duration: 0.5 }}
          className="h-full rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 shadow-lg shadow-cyan-500/50"
        />
      </div>
    </div>
  );
}

```

---
#### `components/ui/StreamingText.tsx`

```
"use client";

import { useState, useEffect, useRef } from "react";
import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

interface StreamingTextProps {
  text: string;
  speed?: number; // caracteres por segundo
  className?: string;
  onComplete?: () => void;
  showCursor?: boolean;
  skipAnimation?: boolean;
}

export default function StreamingText({
  text,
  speed = 50,
  className,
  onComplete,
  showCursor = true,
  skipAnimation = false,
}: StreamingTextProps) {
  const [displayedText, setDisplayedText] = useState("");
  const [isComplete, setIsComplete] = useState(false);
  const indexRef = useRef(0);

  useEffect(() => {
    if (skipAnimation) {
      setDisplayedText(text);
      setIsComplete(true);
      onComplete?.();
      return;
    }

    indexRef.current = 0;
    setDisplayedText("");
    setIsComplete(false);

    const interval = setInterval(() => {
      if (indexRef.current < text.length) {
        setDisplayedText(text.slice(0, indexRef.current + 1));
        indexRef.current++;
      } else {
        clearInterval(interval);
        setIsComplete(true);
        onComplete?.();
      }
    }, 1000 / speed);

    return () => clearInterval(interval);
  }, [text, speed, onComplete, skipAnimation]);

  return (
    <div className={cn("relative", className)}>
      <span className="whitespace-pre-wrap">{displayedText}</span>
      {showCursor && !isComplete && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          className="inline-block w-0.5 h-4 bg-cyan-400 ml-1"
        />
      )}
    </div>
  );
}

interface StreamingMarkdownProps {
  markdown: string;
  speed?: number;
  className?: string;
  onComplete?: () => void;
}

export function StreamingMarkdown({
  markdown,
  speed = 50,
  className,
  onComplete,
}: StreamingMarkdownProps) {
  const [displayedText, setDisplayedText] = useState("");
  const [isComplete, setIsComplete] = useState(false);
  const indexRef = useRef(0);

  useEffect(() => {
    indexRef.current = 0;
    setDisplayedText("");
    setIsComplete(false);

    const interval = setInterval(() => {
      if (indexRef.current < markdown.length) {
        setDisplayedText(markdown.slice(0, indexRef.current + 1));
        indexRef.current++;
      } else {
        clearInterval(interval);
        setIsComplete(true);
        onComplete?.();
      }
    }, 1000 / speed);

    return () => clearInterval(interval);
  }, [markdown, speed, onComplete]);

  // Renderizar markdown básico
  const renderMarkdown = (text: string) => {
    const lines = text.split("\n");
    return lines.map((line, index) => {
      // Headers
      if (line.startsWith("### ")) {
        return (
          <h3 key={index} className="text-lg font-semibold text-white mt-4 mb-2">
            {line.replace("### ", "")}
          </h3>
        );
      }
      if (line.startsWith("## ")) {
        return (
          <h2 key={index} className="text-xl font-bold text-white mt-4 mb-2">
            {line.replace("## ", "")}
          </h2>
        );
      }
      if (line.startsWith("# ")) {
        return (
          <h1 key={index} className="text-2xl font-bold text-white mt-4 mb-3">
            {line.replace("# ", "")}
          </h1>
        );
      }

      // Lista
      if (line.startsWith("- ") || line.startsWith("* ")) {
        return (
          <li key={index} className="text-gray-300 ml-4">
            • {line.replace(/^[-*] /, "")}
          </li>
        );
      }

      // Parágrafo vazio
      if (line.trim() === "") {
        return <div key={index} className="h-2" />;
      }

      // Parágrafo normal
      return (
        <p key={index} className="text-gray-300 mb-2">
          {line}
        </p>
      );
    });
  };

  return (
    <div className={cn("space-y-1", className)}>
      {renderMarkdown(displayedText)}
      {!isComplete && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          className="inline-block w-0.5 h-4 bg-cyan-400 ml-1"
        />
      )}
    </div>
  );
}

interface TypewriterProps {
  words: string[];
  loop?: boolean;
  delayBetweenWords?: number;
  className?: string;
}

export function Typewriter({
  words,
  loop = true,
  delayBetweenWords = 2000,
  className,
}: TypewriterProps) {
  const [currentWordIndex, setCurrentWordIndex] = useState(0);
  const [displayedText, setDisplayedText] = useState("");
  const [isDeleting, setIsDeleting] = useState(false);

  useEffect(() => {
    const currentWord = words[currentWordIndex];

    const timeout = setTimeout(
      () => {
        if (!isDeleting) {
          if (displayedText.length < currentWord.length) {
            setDisplayedText(currentWord.slice(0, displayedText.length + 1));
          } else {
            setTimeout(() => setIsDeleting(true), delayBetweenWords);
          }
        } else {
          if (displayedText.length > 0) {
            setDisplayedText(displayedText.slice(0, -1));
          } else {
            setIsDeleting(false);
            if (loop || currentWordIndex < words.length - 1) {
              setCurrentWordIndex((prev) => (prev + 1) % words.length);
            }
          }
        }
      },
      isDeleting ? 50 : 100
    );

    return () => clearTimeout(timeout);
  }, [displayedText, isDeleting, currentWordIndex, words, loop, delayBetweenWords]);

  return (
    <span className={cn("inline-flex items-center", className)}>
      <span>{displayedText}</span>
      <motion.span
        animate={{ opacity: [1, 0] }}
        transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
        className="inline-block w-0.5 h-5 bg-cyan-400 ml-1"
      />
    </span>
  );
}

```

---
#### `components/ui/Textarea.tsx`

```
"use client";

import { forwardRef, TextareaHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface TextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Textarea = forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const textareaId = id || `textarea-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={textareaId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <textarea
          ref={ref}
          id={textareaId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200 resize-none",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Textarea.displayName = "Textarea";

export default Textarea;

```

---
#### `components/ui/Toggle.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface ToggleProps {
  checked: boolean;
  onChange: (checked: boolean) => void;
  label?: string;
  description?: string;
  disabled?: boolean;
}

export default function Toggle({
  checked,
  onChange,
  label,
  description,
  disabled = false,
}: ToggleProps) {
  return (
    <div className="flex items-start gap-3">
      <button
        type="button"
        role="switch"
        aria-checked={checked}
        disabled={disabled}
        onClick={() => !disabled && onChange(!checked)}
        className={cn(
          "relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          checked ? "bg-primary-600" : "bg-gray-700",
          disabled && "opacity-50 cursor-not-allowed"
        )}
      >
        <span
          className={cn(
            "pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",
            checked ? "translate-x-5" : "translate-x-0"
          )}
        />
      </button>
      {(label || description) && (
        <div className="flex flex-col">
          {label && (
            <span className={cn("text-sm font-medium text-white", disabled && "opacity-50")}>
              {label}
            </span>
          )}
          {description && (
            <span className={cn("text-sm text-gray-400", disabled && "opacity-50")}>
              {description}
            </span>
          )}
        </div>
      )}
    </div>
  );
}

```

---
#### `components/workflow/ModeSelector.tsx`

```
"use client";

import { motion } from "framer-motion";
import { Zap, Settings, Crown, CheckCircle2, Lock } from "lucide-react";
import { WorkflowMode } from "@/types";
import { WORKFLOW_MODES, WorkflowModeConfig } from "@/lib/workflow-modes";
import { cn } from "@/lib/utils";
import Badge from "@/components/ui/Badge";

interface ModeSelectorProps {
  selectedMode: WorkflowMode;
  onSelect: (mode: WorkflowMode) => void;
  className?: string;
}

const iconMap = {
  Zap: Zap,
  Settings: Settings,
  Crown: Crown,
};

export default function ModeSelector({
  selectedMode,
  onSelect,
  className,
}: ModeSelectorProps) {
  const modes = Object.values(WORKFLOW_MODES);

  return (
    <div className={cn("space-y-4", className)}>
      <div>
        <h3 className="text-lg font-semibold text-white mb-2">
          Escolha o Modo de Operação
        </h3>
        <p className="text-sm text-gray-400">
          Selecione como você deseja criar seu vídeo
        </p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {modes.map((mode) => (
          <ModeCard
            key={mode.id}
            mode={mode}
            isSelected={selectedMode === mode.id}
            onSelect={() => onSelect(mode.id)}
          />
        ))}
      </div>
    </div>
  );
}

interface ModeCardProps {
  mode: WorkflowModeConfig;
  isSelected: boolean;
  onSelect: () => void;
}

function ModeCard({ mode, isSelected, onSelect }: ModeCardProps) {
  const Icon = iconMap[mode.icone as keyof typeof iconMap] || Zap;

  return (
    <motion.button
      onClick={mode.ativo ? onSelect : undefined}
      disabled={!mode.ativo}
      whileHover={mode.ativo ? { scale: 1.02 } : undefined}
      whileTap={mode.ativo ? { scale: 0.98 } : undefined}
      className={cn(
        "relative p-6 rounded-xl border text-left transition-all duration-200",
        "bg-gradient-to-br backdrop-blur-sm",
        mode.ativo
          ? isSelected
            ? "border-cyan-500 bg-cyan-500/10 shadow-lg shadow-cyan-500/20"
            : "border-gray-800 bg-gray-900/50 hover:border-gray-700"
          : "border-gray-800 bg-gray-900/30 cursor-not-allowed opacity-60"
      )}
    >
      {/* Badge de destaque */}
      {mode.badge && (
        <div className="absolute top-4 right-4">
          <Badge variant={mode.ativo ? "primary" : "secondary"}>
            {mode.badge}
          </Badge>
        </div>
      )}

      {/* Ícone do modo */}
      <div
        className={cn(
          "mb-4 p-3 rounded-lg inline-flex",
          mode.ativo
            ? `bg-gradient-to-br ${mode.cor}`
            : "bg-gray-800"
        )}
      >
        {mode.ativo ? (
          <Icon className="w-6 h-6 text-white" />
        ) : (
          <Lock className="w-6 h-6 text-gray-500" />
        )}
      </div>

      {/* Nome e descrição */}
      <div className="mb-4">
        <h4 className="text-lg font-semibold text-white mb-1 flex items-center gap-2">
          {mode.nome}
          {isSelected && mode.ativo && (
            <CheckCircle2 className="w-5 h-5 text-cyan-400" />
          )}
        </h4>
        <p className="text-sm text-gray-400">{mode.descricao}</p>
      </div>

      {/* Tempo estimado */}
      {mode.ativo && (
        <div className="mb-4 text-xs text-gray-500">
          ⏱️ Tempo estimado: {mode.tempoEstimado}
        </div>
      )}

      {/* Lista de recursos */}
      {mode.ativo && (
        <div className="space-y-2">
          <p className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
            Recursos incluídos:
          </p>
          <ul className="space-y-1">
            {mode.recursos.slice(0, 3).map((recurso, index) => (
              <li key={index} className="text-xs text-gray-500 flex items-start gap-2">
                <span className="text-cyan-500 mt-0.5">•</span>
                <span>{recurso}</span>
              </li>
            ))}
            {mode.recursos.length > 3 && (
              <li className="text-xs text-gray-500 italic">
                + {mode.recursos.length - 3} mais recursos
              </li>
            )}
          </ul>
        </div>
      )}

      {!mode.ativo && (
        <div className="mt-4">
          <p className="text-sm text-gray-500 italic">
            Este modo estará disponível em breve
          </p>
        </div>
      )}

      {/* Indicador de seleção */}
      {isSelected && mode.ativo && (
        <div className="absolute inset-0 rounded-xl border-2 border-cyan-500 pointer-events-none" />
      )}
    </motion.button>
  );
}

```

---
#### `lib/agents/adaptive-analysis-agent.ts`

```
/**
 * ============================================
 * ORION - Agente de Análise Adaptativa
 * ============================================
 *
 * Agente de IA que se adapta aos inputs disponíveis para
 * gerar análises e insights relevantes.
 */

import { ContextData, YouTubeStudioData, CompetitorData } from '@/types';
import { extractInsightsFromSpreadsheet } from '@/lib/services/spreadsheet.service';

export interface AdaptiveAnalysisResult {
  summary: string;
  insights: string[];
  suggestions: string[];
  topics: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  } | null;
}

/**
 * Analisa o contexto de forma adaptativa baseado nos inputs disponíveis
 */
export async function analyzeContext(context: ContextData): Promise<AdaptiveAnalysisResult> {
  const insights: string[] = [];
  const suggestions: string[] = [];
  const topics: string[] = [];
  const hooks: string[] = [];
  let structure = null;

  // Análise da planilha do YouTube Studio
  if (context.planilhaYouTubeStudio) {
    const spreadsheetInsights = analyzeSpreadsheetData(context.planilhaYouTubeStudio);
    insights.push(...spreadsheetInsights.insights);
    suggestions.push(...spreadsheetInsights.suggestions);
  }

  // Análise do tema fornecido
  if (context.theme) {
    const themeAnalysis = analyzeTheme(context.theme, context.tagsFoco);
    insights.push(...themeAnalysis.insights);
    topics.push(...themeAnalysis.topics);
    suggestions.push(...themeAnalysis.suggestions);
  }

  // Análise do concorrente
  if (context.dadosConcorrente) {
    const competitorAnalysis = analyzeCompetitor(context.dadosConcorrente);
    insights.push(...competitorAnalysis.insights);
    hooks.push(...competitorAnalysis.hooks);
    structure = competitorAnalysis.structure;
  }

  // Análise de transcrição
  if (context.transcricao) {
    const transcriptAnalysis = analyzeTranscript(context.transcricao);
    insights.push(...transcriptAnalysis.insights);
    hooks.push(...transcriptAnalysis.hooks);
    if (!structure) {
      structure = transcriptAnalysis.structure;
    }
  }

  // Cruzamento de dados
  const crossAnalysis = performCrossAnalysis(context);
  suggestions.push(...crossAnalysis);

  // Gerar resumo
  const summary = generateSummary(context, insights);

  return {
    summary,
    insights: [...new Set(insights)], // Remover duplicatas
    suggestions: [...new Set(suggestions)],
    topics: [...new Set(topics)],
    hooks: [...new Set(hooks)],
    structure
  };
}

/**
 * Analisa dados da planilha do YouTube Studio
 */
function analyzeSpreadsheetData(data: YouTubeStudioData): {
  insights: string[];
  suggestions: string[];
} {
  const insights = extractInsightsFromSpreadsheet(data);
  const suggestions: string[] = [];

  // Sugestões baseadas em performance
  if (data.avgCTR && data.avgCTR < 5) {
    suggestions.push('Teste thumbnails mais chamativas com cores vibrantes e rostos expressivos');
    suggestions.push('Use títulos que despertem curiosidade sem revelar tudo');
  }

  if (data.avgWatchTime && data.avgWatchTime < 180) {
    suggestions.push('Comece com um gancho forte nos primeiros 5 segundos');
    suggestions.push('Mantenha o ritmo dinâmico com cortes rápidos');
  }

  // Identificar padrões de sucesso
  if (data.topPerformingVideos && data.topPerformingVideos.length > 0) {
    const topTitles = data.topPerformingVideos.slice(0, 3).map(v => v.title);
    suggestions.push(`Padrões de sucesso identificados nos seus melhores vídeos: ${topTitles.join(', ')}`);
  }

  return { insights, suggestions };
}

/**
 * Analisa tema e tags de foco
 */
function analyzeTheme(theme: string, tagsFoco: string[]): {
  insights: string[];
  topics: string[];
  suggestions: string[];
} {
  const insights: string[] = [];
  const topics: string[] = [];
  const suggestions: string[] = [];

  // Expandir tema em subtópicos
  insights.push(`Tema principal: ${theme}`);

  // Processar tema para identificar subtópicos
  const themeWords = theme.toLowerCase().split(/\s+/);
  if (themeWords.length > 2) {
    topics.push(theme);
    // Sugerir variações
    suggestions.push(`Considere abordar diferentes ângulos: "Como", "Por que", "O que"`);
  }

  // Análise de tags de foco
  if (tagsFoco.length > 0) {
    insights.push(`Tags de foco: ${tagsFoco.join(', ')}`);
    topics.push(...tagsFoco);
    suggestions.push('Use as tags de foco como palavras-chave no título e descrição');
  }

  return { insights, topics, suggestions };
}

/**
 * Analisa vídeo concorrente
 */
function analyzeCompetitor(competitor: CompetitorData): {
  insights: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  };
} {
  const insights: string[] = [];
  const hooks: string[] = [];

  insights.push(`Vídeo de referência: "${competitor.videoTitle || 'Título não disponível'}"`);

  if (competitor.viewCount) {
    insights.push(`Performance: ${competitor.viewCount.toLocaleString()} visualizações`);
  }

  // Analisar tags do concorrente
  if (competitor.videoTags && competitor.videoTags.length > 0) {
    insights.push(`Tags usadas: ${competitor.videoTags.slice(0, 5).join(', ')}`);
  }

  // Extrair possíveis ganchos do título
  if (competitor.videoTitle) {
    const title = competitor.videoTitle;
    if (title.includes('?')) {
      hooks.push('Usar formato de pergunta no gancho');
    }
    if (/\d+/.test(title)) {
      hooks.push('Incluir números específicos para gerar curiosidade');
    }
    if (title.includes('!')) {
      hooks.push('Usar tom exclamativo para criar urgência');
    }
  }

  // Estrutura básica inferida
  const structure = {
    intro: competitor.videoTitle || 'Título chamativo',
    mainPoints: competitor.videoTags.slice(0, 3) || ['Ponto principal 1', 'Ponto principal 2', 'Ponto principal 3'],
    cta: 'Call-to-action forte'
  };

  return { insights, hooks, structure };
}

/**
 * Analisa transcrição de vídeo
 */
function analyzeTranscript(transcript: string): {
  insights: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  };
} {
  const insights: string[] = [];
  const hooks: string[] = [];

  // Analisar comprimento
  const wordCount = transcript.split(/\s+/).length;
  insights.push(`Transcrição com aproximadamente ${wordCount} palavras`);

  // Identificar possíveis ganchos (primeiras frases)
  const sentences = transcript.split(/[.!?]+/).filter(s => s.trim().length > 0);
  if (sentences.length > 0) {
    const firstSentence = sentences[0].trim();
    hooks.push(`Possível gancho: "${firstSentence}"`);
  }

  // Identificar CTAs
  const lowerTranscript = transcript.toLowerCase();
  if (lowerTranscript.includes('inscreva') || lowerTranscript.includes('subscribe')) {
    insights.push('CTA de inscrição identificado no vídeo');
  }
  if (lowerTranscript.includes('like') || lowerTranscript.includes('curtir')) {
    insights.push('CTA de curtida identificado no vídeo');
  }
  if (lowerTranscript.includes('comentário') || lowerTranscript.includes('comment')) {
    insights.push('CTA de comentário identificado no vídeo');
  }

  // Estrutura básica
  const structure = {
    intro: sentences[0] || 'Introdução forte',
    mainPoints: sentences.slice(1, 4).filter(s => s.length > 20) || ['Ponto 1', 'Ponto 2', 'Ponto 3'],
    cta: 'Inscreva-se para mais conteúdo'
  };

  return { insights, hooks, structure };
}

/**
 * Realiza análise cruzada de múltiplas fontes
 */
function performCrossAnalysis(context: ContextData): string[] {
  const suggestions: string[] = [];

  // Cruzar dados de planilha com tema
  if (context.planilhaYouTubeStudio && context.theme) {
    suggestions.push(
      'Cruzando dados: Use insights de performance dos seus vídeos anteriores para guiar o novo conteúdo sobre este tema'
    );
  }

  // Cruzar concorrente com suas métricas
  if (context.dadosConcorrente && context.planilhaYouTubeStudio) {
    suggestions.push(
      'Análise competitiva: Compare as estratégias do concorrente com o que funciona no seu canal'
    );
  }

  // Cruzar transcrição com tema
  if (context.transcricao && context.theme) {
    suggestions.push(
      'Adapte a estrutura da transcrição fornecida para se adequar ao tema escolhido'
    );
  }

  return suggestions;
}

/**
 * Gera resumo da análise
 */
function generateSummary(context: ContextData, insights: string[]): string {
  const sources: string[] = [];

  if (context.planilhaYouTubeStudio) sources.push('análise de performance histórica');
  if (context.theme) sources.push('tema definido');
  if (context.dadosConcorrente) sources.push('análise de concorrente');
  if (context.transcricao) sources.push('transcrição de referência');

  const summary = `Análise completa realizada com base em: ${sources.join(', ')}.
    ${insights.length} insights identificados.
    ${context.tagsFoco.length > 0 ? `Foco em: ${context.tagsFoco.join(', ')}.` : ''}
    Modo de operação: ${context.mode}.`;

  return summary;
}

```

---
#### `lib/agents/index.ts`

```
export { runResearchAgent, type ResearchAgentResult } from './research-agent';
export { runScriptAgent, type ScriptAgentResult, type ResearchContext } from './script-agent';

```

---
#### `lib/agents/research-agent.ts`

```
import { google } from '@ai-sdk/google';
import { generateText } from 'ai';

/**
 * Research Agent using Gemini 2.0
 *
 * This agent performs deep research on YouTube trends,
 * channel analytics, and content opportunities.
 */

export interface ResearchAgentResult {
  summary: string;
  topPerformingTopics: string[];
  audienceInsights: string[];
  contentGaps: string[];
  trends: string[];
  competitors: string[];
}

export async function runResearchAgent(
  topic: string,
  channelContext?: string
): Promise<ResearchAgentResult> {
  const { text } = await generateText({
    model: google('gemini-2.0-flash-exp'),
    system: `You are an expert YouTube content research agent for the Brazilian market.
Your job is to analyze trends, audience behavior, and content opportunities.
Always provide actionable insights based on data patterns.
Respond in valid JSON format.`,
    prompt: `Research topic: "${topic}"
${channelContext ? `Channel context: ${channelContext}` : ''}

Analyze and return JSON with:
{
  "summary": "Brief research summary",
  "topPerformingTopics": ["topic1", "topic2", ...],
  "audienceInsights": ["insight1", "insight2", ...],
  "contentGaps": ["gap1", "gap2", ...],
  "trends": ["trend1", "trend2", ...],
  "competitors": ["competitor insight 1", ...]
}`,
  });

  const jsonMatch = text.match(/\{[\s\S]*\}/);
  if (jsonMatch) {
    return JSON.parse(jsonMatch[0]);
  }

  return {
    summary: text,
    topPerformingTopics: [],
    audienceInsights: [],
    contentGaps: [],
    trends: [],
    competitors: [],
  };
}

```

---
#### `lib/agents/script-agent.ts`

```
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

/**
 * Script Agent using Claude
 *
 * This agent creates engaging YouTube scripts with:
 * - Strong hooks
 * - Value-packed content
 * - Clear CTAs
 * - SEO-optimized titles
 */

export interface ScriptAgentResult {
  title: string;
  hook: string;
  sections: {
    title: string;
    content: string;
  }[];
  cta: string;
  fullScript: string;
  metadata: {
    wordCount: number;
    estimatedDuration: string;
    tone: string;
  };
}

export interface ResearchContext {
  summary?: string;
  topPerformingTopics?: string[];
  audienceInsights?: string[];
  trends?: string[];
}

export async function runScriptAgent(
  topic: string,
  research: ResearchContext
): Promise<ScriptAgentResult> {
  const { text } = await generateText({
    model: anthropic('claude-sonnet-4-20250514'),
    system: `You are an expert YouTube scriptwriter for the Brazilian market.
Create engaging, retention-optimized scripts that hook viewers in the first 30 seconds.
Always respond in valid JSON format.`,
    prompt: `Create a YouTube script for: "${topic}"

Research insights:
- Top topics: ${research.topPerformingTopics?.join(', ') || 'N/A'}
- Audience insights: ${research.audienceInsights?.join(', ') || 'N/A'}
- Trends: ${research.trends?.join(', ') || 'N/A'}
- Summary: ${research.summary || 'N/A'}

Create a complete script with:
1. Attention-grabbing hook (first 30 seconds)
2. 3-5 main content sections
3. Strong call-to-action

Return JSON:
{
  "title": "SEO-optimized title",
  "hook": "Opening hook text",
  "sections": [
    {"title": "Section 1", "content": "Section content..."},
    {"title": "Section 2", "content": "Section content..."}
  ],
  "cta": "Call to action text",
  "fullScript": "Complete script text",
  "metadata": {
    "wordCount": 1500,
    "estimatedDuration": "10-12 minutes",
    "tone": "engaging and educational"
  }
}`,
  });

  const jsonMatch = text.match(/\{[\s\S]*\}/);
  if (jsonMatch) {
    return JSON.parse(jsonMatch[0]);
  }

  return {
    title: topic,
    hook: '',
    sections: [],
    cta: '',
    fullScript: text,
    metadata: {
      wordCount: text.split(' ').length,
      estimatedDuration: 'unknown',
      tone: 'neutral',
    },
  };
}

```

---
#### `lib/ai.ts`

```
import { AIProvider, AIModelOption, Diretriz } from "@/types";

export const AI_MODELS: Record<AIProvider, AIModelOption[]> = {
  openai: [
    { id: "gpt-4o", name: "GPT-4o", provider: "openai" },
    { id: "gpt-4o-mini", name: "GPT-4o Mini", provider: "openai" },
    { id: "gpt-4-turbo", name: "GPT-4 Turbo", provider: "openai" },
  ],
  google: [
    { id: "gemini-1.5-pro", name: "Gemini 1.5 Pro", provider: "google" },
    { id: "gemini-1.5-flash", name: "Gemini 1.5 Flash", provider: "google" },
    { id: "gemini-2.0-flash-exp", name: "Gemini 2.0 Flash", provider: "google" },
  ],
  anthropic: [
    { id: "claude-3-5-sonnet-latest", name: "Claude 3.5 Sonnet", provider: "anthropic" },
    { id: "claude-3-5-haiku-latest", name: "Claude 3.5 Haiku", provider: "anthropic" },
  ],
};

export function getModelsForProvider(provider: AIProvider): AIModelOption[] {
  return AI_MODELS[provider] || [];
}

export function getProviderName(provider: AIProvider): string {
  const names: Record<AIProvider, string> = {
    openai: "OpenAI",
    google: "Google Gemini",
    anthropic: "Anthropic Claude",
  };
  return names[provider];
}

export function buildSystemPromptWithDiretrizes(
  basePrompt: string,
  diretrizes: Diretriz[],
  scope: Diretriz["appliesTo"][number]
): string {
  const applicableDiretrizes = diretrizes.filter(
    (d) => d.active && d.appliesTo.includes(scope)
  );

  if (applicableDiretrizes.length === 0) {
    return basePrompt;
  }

  const diretrizesText = applicableDiretrizes
    .map((d) => `### ${d.title}\n${d.systemPrompt}`)
    .join("\n\n");

  return `${basePrompt}

## Diretrizes Adicionais (MUST FOLLOW):
${diretrizesText}`;
}

export interface GenerationRequest {
  provider: AIProvider;
  model: string;
  systemPrompt: string;
  userPrompt: string;
  temperature?: number;
}

export async function generateWithAI(request: GenerationRequest): Promise<string> {
  const response = await fetch("/api/ai/generate", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI generation failed");
  }

  const data = await response.json();
  return data.text;
}

export async function streamWithAI(
  request: GenerationRequest,
  onChunk: (chunk: string) => void
): Promise<void> {
  const response = await fetch("/api/ai/stream", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI streaming failed");
  }

  const reader = response.body?.getReader();
  if (!reader) throw new Error("No response body");

  const decoder = new TextDecoder();
  while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    const chunk = decoder.decode(value);
    onChunk(chunk);
  }
}

```

---
#### `lib/api-keys-store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";

export interface StoredAPIKeys {
  youtube_api_key: string;
  youtube_channel_id: string;
  openai_api_key: string;
  google_api_key: string;
  anthropic_api_key: string;
  pexels_api_key: string;
  pixabay_api_key: string;
  unsplash_api_key: string;
  json2video_api_key: string;
  elevenlabs_api_key: string;
  tavily_api_key: string;
  replicate_api_key: string;
  stability_api_key: string;
}

export interface APIKeyTestResult {
  key: keyof StoredAPIKeys;
  success: boolean;
  message: string;
}

interface APIKeysStore {
  keys: StoredAPIKeys;
  testedKeys: Record<keyof StoredAPIKeys, boolean>;

  setKey: (key: keyof StoredAPIKeys, value: string) => void;
  setKeys: (keys: Partial<StoredAPIKeys>) => void;
  markKeyTested: (key: keyof StoredAPIKeys, success: boolean) => void;
  clearKey: (key: keyof StoredAPIKeys) => void;
  clearAllKeys: () => void;
  getKey: (key: keyof StoredAPIKeys) => string;
  hasKey: (key: keyof StoredAPIKeys) => boolean;
}

const defaultKeys: StoredAPIKeys = {
  youtube_api_key: "",
  youtube_channel_id: "",
  openai_api_key: "",
  google_api_key: "",
  anthropic_api_key: "",
  pexels_api_key: "",
  pixabay_api_key: "",
  unsplash_api_key: "",
  json2video_api_key: "",
  elevenlabs_api_key: "",
  tavily_api_key: "",
  replicate_api_key: "",
  stability_api_key: "",
};

const defaultTestedKeys: Record<keyof StoredAPIKeys, boolean> = {
  youtube_api_key: false,
  youtube_channel_id: false,
  openai_api_key: false,
  google_api_key: false,
  anthropic_api_key: false,
  pexels_api_key: false,
  pixabay_api_key: false,
  unsplash_api_key: false,
  json2video_api_key: false,
  elevenlabs_api_key: false,
  tavily_api_key: false,
  replicate_api_key: false,
  stability_api_key: false,
};

export const useAPIKeysStore = create<APIKeysStore>()(
  persist(
    (set, get) => ({
      keys: defaultKeys,
      testedKeys: defaultTestedKeys,

      setKey: (key, value) =>
        set((state) => ({
          keys: { ...state.keys, [key]: value },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      setKeys: (keys) =>
        set((state) => ({
          keys: { ...state.keys, ...keys },
        })),

      markKeyTested: (key, success) =>
        set((state) => ({
          testedKeys: { ...state.testedKeys, [key]: success },
        })),

      clearKey: (key) =>
        set((state) => ({
          keys: { ...state.keys, [key]: "" },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      clearAllKeys: () =>
        set({
          keys: defaultKeys,
          testedKeys: defaultTestedKeys,
        }),

      getKey: (key) => get().keys[key],

      hasKey: (key) => !!get().keys[key],
    }),
    {
      name: "orion-api-keys",
      storage: createJSONStorage(() => sessionStorage), // Usar sessionStorage para segurança
    }
  )
);

// Helper para obter headers com as chaves da sessão
export function getAPIKeyHeaders(keys: StoredAPIKeys): Record<string, string> {
  const headers: Record<string, string> = {};

  if (keys.youtube_api_key) headers["x-youtube-api-key"] = keys.youtube_api_key;
  if (keys.youtube_channel_id) headers["x-youtube-channel-id"] = keys.youtube_channel_id;
  if (keys.openai_api_key) headers["x-openai-api-key"] = keys.openai_api_key;
  if (keys.google_api_key) headers["x-google-api-key"] = keys.google_api_key;
  if (keys.anthropic_api_key) headers["x-anthropic-api-key"] = keys.anthropic_api_key;
  if (keys.pexels_api_key) headers["x-pexels-api-key"] = keys.pexels_api_key;
  if (keys.pixabay_api_key) headers["x-pixabay-api-key"] = keys.pixabay_api_key;
  if (keys.unsplash_api_key) headers["x-unsplash-api-key"] = keys.unsplash_api_key;
  if (keys.json2video_api_key) headers["x-json2video-api-key"] = keys.json2video_api_key;
  if (keys.elevenlabs_api_key) headers["x-elevenlabs-api-key"] = keys.elevenlabs_api_key;
  if (keys.tavily_api_key) headers["x-tavily-api-key"] = keys.tavily_api_key;
  if (keys.replicate_api_key) headers["x-replicate-api-key"] = keys.replicate_api_key;
  if (keys.stability_api_key) headers["x-stability-api-key"] = keys.stability_api_key;

  return headers;
}

```

---
#### `lib/api-keys.ts`

```
import { APIKeyStatus } from "@/types";
import { StoredAPIKeys } from "./api-keys-store";

// Check API keys from server (env vars)
export async function checkServerAPIKeys(): Promise<APIKeyStatus> {
  try {
    const response = await fetch("/api/config/keys");
    if (!response.ok) {
      throw new Error("Failed to fetch API key status");
    }
    return await response.json();
  } catch (error) {
    console.error("Error checking API keys:", error);
    return getEmptyStatus();
  }
}

// Get empty status
function getEmptyStatus(): APIKeyStatus {
  return {
    youtube: false,
    openai: false,
    google: false,
    anthropic: false,
    pexels: false,
    pixabay: false,
    unsplash: false,
    json2video: false,
    elevenlabs: false,
    tavily: false,
    replicate: false,
    stability: false,
  };
}

// Check API keys from client storage
export function checkClientAPIKeys(keys: StoredAPIKeys): APIKeyStatus {
  return {
    youtube: !!(keys.youtube_api_key && keys.youtube_channel_id),
    openai: !!keys.openai_api_key,
    google: !!keys.google_api_key,
    anthropic: !!keys.anthropic_api_key,
    pexels: !!keys.pexels_api_key,
    pixabay: !!keys.pixabay_api_key,
    unsplash: !!keys.unsplash_api_key,
    json2video: !!keys.json2video_api_key,
    elevenlabs: !!keys.elevenlabs_api_key,
    tavily: !!keys.tavily_api_key,
    replicate: !!keys.replicate_api_key,
    stability: !!keys.stability_api_key,
  };
}

// Merge server and client status (client takes precedence if key exists)
export function mergeAPIKeyStatus(server: APIKeyStatus, client: APIKeyStatus): APIKeyStatus {
  return {
    youtube: server.youtube || client.youtube,
    openai: server.openai || client.openai,
    google: server.google || client.google,
    anthropic: server.anthropic || client.anthropic,
    pexels: server.pexels || client.pexels,
    pixabay: server.pixabay || client.pixabay,
    unsplash: server.unsplash || client.unsplash,
    json2video: server.json2video || client.json2video,
    elevenlabs: server.elevenlabs || client.elevenlabs,
    tavily: server.tavily || client.tavily,
    replicate: server.replicate || client.replicate,
    stability: server.stability || client.stability,
  };
}

// Combined check - gets status from both server and client
export async function checkAPIKeys(): Promise<APIKeyStatus> {
  // Get server status
  const serverStatus = await checkServerAPIKeys();

  // Get client keys from store (need to access outside React)
  let clientStatus = getEmptyStatus();

  if (typeof window !== "undefined") {
    try {
      const stored = sessionStorage.getItem("orion-api-keys");
      if (stored) {
        const parsed = JSON.parse(stored);
        if (parsed.state?.keys) {
          clientStatus = checkClientAPIKeys(parsed.state.keys);
        }
      }
    } catch (e) {
      console.error("Error reading client keys:", e);
    }
  }

  // Merge both
  return mergeAPIKeyStatus(serverStatus, clientStatus);
}

export function getRequiredKeysForStep(step: number): (keyof APIKeyStatus)[] {
  switch (step) {
    case 1:
      return ["youtube"];
    case 2:
      return ["openai", "google", "anthropic"]; // At least one AI provider
    case 4:
      return ["openai", "google", "anthropic"]; // AI for generation
    case 5:
      return ["pexels", "pixabay", "unsplash", "json2video"];
    case 6:
      return ["youtube"];
    default:
      return [];
  }
}

export function hasRequiredKeys(
  status: APIKeyStatus,
  step: number
): { hasAll: boolean; missing: string[] } {
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const _required = getRequiredKeysForStep(step);
  const missing: string[] = [];

  // For AI providers, we need at least one
  if (step === 2 || step === 4) {
    const aiProviders = ["openai", "google", "anthropic"] as const;
    const hasAnyAI = aiProviders.some((provider) => status[provider]);
    if (!hasAnyAI) {
      missing.push("At least one AI provider (OpenAI, Google, or Anthropic)");
    }
  }

  // For media, we need at least one
  if (step === 5) {
    const mediaProviders = ["pexels", "pixabay", "unsplash"] as const;
    const hasAnyMedia = mediaProviders.some((provider) => status[provider]);
    if (!hasAnyMedia) {
      missing.push("At least one media provider (Pexels, Pixabay, or Unsplash)");
    }
    if (!status.json2video) {
      missing.push("JSON2Video");
    }
  }

  // YouTube is always required for steps 1 and 6
  if ((step === 1 || step === 6) && !status.youtube) {
    missing.push("YouTube API");
  }

  return {
    hasAll: missing.length === 0,
    missing,
  };
}

```

---
#### `lib/branding.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { BrandingConfig } from '@/types';

const BRANDING_FILE = path.join(process.cwd(), 'data', 'branding.json');

/**
 * Get branding configuration
 */
export async function getBrandingConfig(): Promise<BrandingConfig> {
  try {
    const fileContent = await fs.readFile(BRANDING_FILE, 'utf-8');
    return JSON.parse(fileContent) as BrandingConfig;
  } catch (error) {
    console.error('Failed to read branding config:', error);
    // Return default branding if file doesn't exist
    return {
      systemName: 'ORION',
      logoUrl: null,
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update branding configuration
 */
export async function updateBrandingConfig(
  updates: Partial<Omit<BrandingConfig, 'updatedAt'>>
): Promise<BrandingConfig> {
  try {
    const currentConfig = await getBrandingConfig();

    const updatedConfig: BrandingConfig = {
      ...currentConfig,
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(BRANDING_FILE, JSON.stringify(updatedConfig, null, 2), 'utf-8');

    return updatedConfig;
  } catch (error) {
    console.error('Failed to update branding config:', error);
    throw error;
  }
}

/**
 * Reset branding to default (ORION)
 */
export async function resetBrandingConfig(): Promise<BrandingConfig> {
  const defaultConfig: BrandingConfig = {
    systemName: 'ORION',
    logoUrl: null,
    updatedAt: new Date().toISOString(),
  };

  try {
    await fs.writeFile(BRANDING_FILE, JSON.stringify(defaultConfig, null, 2), 'utf-8');
    return defaultConfig;
  } catch (error) {
    console.error('Failed to reset branding config:', error);
    throw error;
  }
}

```

---
#### `lib/db/index.ts`

```
export { prisma, default as db } from './prisma';

```

---
#### `lib/db/prisma.ts`

```
import { PrismaClient } from '@prisma/client';

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
  });

if (process.env.NODE_ENV !== 'production') {
  globalForPrisma.prisma = prisma;
}

export default prisma;

```

---
#### `lib/design-tokens.ts`

```
/**
 * ============================================
 * ORION Design System - Design Tokens
 * ============================================
 *
 * Single Source of Truth para cores, tipografia,
 * espaçamentos e motion do sistema ORION.
 *
 * Paleta baseada no logo oficial:
 * - Azul profundo como base
 * - Vermelho ORION como acento crítico
 * - Cyan/Indigo para estados ativos
 */

// ============================================
// CORES - PALETA ORION
// ============================================

/**
 * Cores de fundo em camadas (layers)
 * Do mais profundo ao mais elevado
 */
export const backgrounds = {
  layer0: '#050A12',  // Base mais profunda - fundo principal
  layer1: '#0A1628',  // Cards, sidebar - azul muito escuro
  layer2: '#0F2341',  // Elementos elevados
  layer3: '#1A3A5C',  // Hover states, menus
  layer4: '#245177',  // Elementos em destaque
} as const;

/**
 * Cores de superfície (para cards e painéis)
 */
export const surfaces = {
  default: 'rgba(10, 22, 40, 0.8)',    // Card padrão com transparência
  elevated: 'rgba(15, 35, 65, 0.9)',   // Card elevado
  glass: 'rgba(26, 58, 92, 0.4)',      // Glassmorphism
  glassSubtle: 'rgba(10, 22, 40, 0.6)', // Glass mais sutil
  overlay: 'rgba(5, 10, 18, 0.8)',     // Overlay para modais
} as const;

/**
 * Cores de borda
 */
export const borders = {
  subtle: 'rgba(30, 58, 95, 0.3)',      // Borda sutil
  default: 'rgba(30, 58, 95, 0.5)',     // Borda padrão
  strong: 'rgba(59, 130, 246, 0.4)',    // Borda com destaque
  active: 'rgba(6, 182, 212, 0.5)',     // Borda ativa (cyan)
  glow: 'rgba(59, 130, 246, 0.6)',      // Borda com glow
} as const;

/**
 * Cores de texto
 */
export const text = {
  primary: '#F0F4F8',     // Texto principal - quase branco
  secondary: '#94A3B8',   // Texto secundário - slate-400
  muted: '#64748B',       // Texto muted - slate-500
  disabled: '#475569',    // Texto desabilitado - slate-600
  inverse: '#0A1628',     // Texto em fundos claros
} as const;

/**
 * Cores da marca ORION
 */
export const brand = {
  // Azul ORION - cor principal
  blue: {
    50: '#E8F4FC',
    100: '#C5E4F8',
    200: '#8EC8F2',
    300: '#57ACEB',
    400: '#3B82F6',   // Azul principal
    500: '#2563EB',
    600: '#1D4ED8',
    700: '#1E3A5F',   // Azul profundo (do logo)
    800: '#0F2341',
    900: '#0A1628',   // Azul mais escuro
    950: '#050A12',
  },
  // Vermelho ORION - acento crítico (do logo YouTube)
  red: {
    50: '#FEF2F2',
    100: '#FEE2E2',
    200: '#FECACA',
    300: '#FCA5A5',
    400: '#F87171',
    500: '#EF4444',   // Vermelho principal
    600: '#DC2626',
    700: '#B91C1C',
    800: '#991B1B',
    900: '#7F1D1D',
    950: '#450A0A',
  },
} as const;

/**
 * Cores de acento
 */
export const accent = {
  // Cyan - estados ativos, links, foco
  cyan: {
    50: '#ECFEFF',
    100: '#CFFAFE',
    200: '#A5F3FC',
    300: '#67E8F9',
    400: '#22D3EE',
    500: '#06B6D4',   // Cyan principal
    600: '#0891B2',
    700: '#0E7490',
    800: '#155E75',
    900: '#164E63',
    950: '#083344',
  },
  // Indigo - estados secundários
  indigo: {
    50: '#EEF2FF',
    100: '#E0E7FF',
    200: '#C7D2FE',
    300: '#A5B4FC',
    400: '#818CF8',
    500: '#6366F1',   // Indigo principal
    600: '#4F46E5',
    700: '#4338CA',
    800: '#3730A3',
    900: '#312E81',
    950: '#1E1B4B',
  },
  // Violet - elementos decorativos
  violet: {
    50: '#F5F3FF',
    100: '#EDE9FE',
    200: '#DDD6FE',
    300: '#C4B5FD',
    400: '#A78BFA',
    500: '#8B5CF6',   // Violet principal
    600: '#7C3AED',
    700: '#6D28D9',
    800: '#5B21B6',
    900: '#4C1D95',
    950: '#2E1065',
  },
} as const;

/**
 * Cores semânticas (feedback)
 */
export const semantic = {
  success: {
    bg: 'rgba(16, 185, 129, 0.1)',      // Fundo verde
    border: 'rgba(16, 185, 129, 0.3)',  // Borda verde
    text: '#34D399',                     // Texto verde claro
    solid: '#10B981',                    // Solid verde
  },
  warning: {
    bg: 'rgba(245, 158, 11, 0.1)',
    border: 'rgba(245, 158, 11, 0.3)',
    text: '#FBBF24',
    solid: '#F59E0B',
  },
  error: {
    bg: 'rgba(239, 68, 68, 0.1)',
    border: 'rgba(239, 68, 68, 0.3)',
    text: '#F87171',
    solid: '#EF4444',
  },
  info: {
    bg: 'rgba(59, 130, 246, 0.1)',
    border: 'rgba(59, 130, 246, 0.3)',
    text: '#60A5FA',
    solid: '#3B82F6',
  },
} as const;

/**
 * Cores de glow e highlight
 */
export const effects = {
  glowBlue: 'rgba(59, 130, 246, 0.4)',
  glowCyan: 'rgba(6, 182, 212, 0.4)',
  glowViolet: 'rgba(139, 92, 246, 0.4)',
  glowRed: 'rgba(239, 68, 68, 0.3)',
  highlight: 'rgba(6, 182, 212, 0.1)',
} as const;

// ============================================
// GRADIENTES
// ============================================

export const gradients = {
  // Gradientes principais ORION
  orionPrimary: 'linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%)',
  orionDark: 'linear-gradient(180deg, #050A12 0%, #0A1628 100%)',
  orionDeep: 'linear-gradient(135deg, #050A12 0%, #0F2341 100%)',

  // Gradientes de acento
  cyanBlue: 'linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%)',
  blueIndigo: 'linear-gradient(135deg, #3B82F6 0%, #6366F1 100%)',
  violetBlue: 'linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%)',

  // Gradientes de destaque
  cyanGlow: 'linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%)',
  blueGlow: 'linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%)',

  // Gradiente de borda animada
  borderGradient: 'linear-gradient(90deg, #3B82F6, #06B6D4, #8B5CF6, #3B82F6)',

  // Gradientes sutis para cards
  cardSubtle: 'linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%)',
  cardHover: 'linear-gradient(180deg, rgba(26, 58, 92, 0.4) 0%, rgba(15, 35, 65, 0.6) 100%)',

  // Mesh gradients para fundos
  meshBackground: 'radial-gradient(at 40% 20%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 80% 80%, rgba(6, 182, 212, 0.1) 0px, transparent 50%)',
} as const;

// ============================================
// TIPOGRAFIA
// ============================================

export const typography = {
  fonts: {
    sans: '"Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
    mono: '"JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, monospace',
  },

  // Tamanhos de fonte (em rem)
  sizes: {
    xs: '0.75rem',      // 12px
    sm: '0.875rem',     // 14px
    base: '1rem',       // 16px
    lg: '1.125rem',     // 18px
    xl: '1.25rem',      // 20px
    '2xl': '1.5rem',    // 24px
    '3xl': '1.875rem',  // 30px
    '4xl': '2.25rem',   // 36px
    '5xl': '3rem',      // 48px
    '6xl': '3.75rem',   // 60px
  },

  // Line heights
  lineHeights: {
    none: '1',
    tight: '1.25',
    snug: '1.375',
    normal: '1.5',
    relaxed: '1.625',
    loose: '2',
  },

  // Font weights
  weights: {
    normal: '400',
    medium: '500',
    semibold: '600',
    bold: '700',
  },

  // Letter spacing
  tracking: {
    tighter: '-0.05em',
    tight: '-0.025em',
    normal: '0',
    wide: '0.025em',
    wider: '0.05em',
  },
} as const;

// Presets de tipografia para uso rápido
export const textStyles = {
  // Display - títulos grandes
  displayLg: {
    fontSize: typography.sizes['5xl'],
    fontWeight: typography.weights.bold,
    lineHeight: typography.lineHeights.tight,
    letterSpacing: typography.tracking.tight,
  },
  displayMd: {
    fontSize: typography.sizes['4xl'],
    fontWeight: typography.weights.bold,
    lineHeight: typography.lineHeights.tight,
    letterSpacing: typography.tracking.tight,
  },

  // Headings
  h1: {
    fontSize: typography.sizes['3xl'],
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.tight,
  },
  h2: {
    fontSize: typography.sizes['2xl'],
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.tight,
  },
  h3: {
    fontSize: typography.sizes.xl,
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.snug,
  },
  h4: {
    fontSize: typography.sizes.lg,
    fontWeight: typography.weights.medium,
    lineHeight: typography.lineHeights.snug,
  },

  // Body text
  bodyLg: {
    fontSize: typography.sizes.lg,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.relaxed,
  },
  bodyMd: {
    fontSize: typography.sizes.base,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },
  bodySm: {
    fontSize: typography.sizes.sm,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },

  // Labels e captions
  label: {
    fontSize: typography.sizes.sm,
    fontWeight: typography.weights.medium,
    letterSpacing: typography.tracking.wide,
  },
  caption: {
    fontSize: typography.sizes.xs,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },

  // Code
  code: {
    fontFamily: typography.fonts.mono,
    fontSize: typography.sizes.sm,
  },
} as const;

// ============================================
// ESPAÇAMENTO
// ============================================

// Base: 4px
export const spacing = {
  px: '1px',
  0: '0',
  0.5: '0.125rem',  // 2px
  1: '0.25rem',     // 4px
  1.5: '0.375rem',  // 6px
  2: '0.5rem',      // 8px
  2.5: '0.625rem',  // 10px
  3: '0.75rem',     // 12px
  3.5: '0.875rem',  // 14px
  4: '1rem',        // 16px
  5: '1.25rem',     // 20px
  6: '1.5rem',      // 24px
  7: '1.75rem',     // 28px
  8: '2rem',        // 32px
  9: '2.25rem',     // 36px
  10: '2.5rem',     // 40px
  11: '2.75rem',    // 44px
  12: '3rem',       // 48px
  14: '3.5rem',     // 56px
  16: '4rem',       // 64px
  20: '5rem',       // 80px
  24: '6rem',       // 96px
  28: '7rem',       // 112px
  32: '8rem',       // 128px
} as const;

// Espaçamentos semânticos
export const componentSpacing = {
  // Padding interno de componentes
  cardPadding: spacing[6],         // 24px
  cardPaddingSm: spacing[4],       // 16px
  cardPaddingLg: spacing[8],       // 32px

  buttonPadding: spacing[4],       // 16px horizontal
  buttonPaddingY: spacing[2.5],    // 10px vertical

  inputPadding: spacing[4],        // 16px
  inputPaddingY: spacing[3],       // 12px

  // Gaps
  gridGap: spacing[6],             // 24px
  gridGapSm: spacing[4],           // 16px
  stackGap: spacing[4],            // 16px
  inlineGap: spacing[2],           // 8px

  // Section spacing
  sectionGap: spacing[16],         // 64px
  sectionGapSm: spacing[10],       // 40px

  // Page margins
  pageMargin: spacing[8],          // 32px
  pageMarginMobile: spacing[4],    // 16px
} as const;

// ============================================
// BORDER RADIUS
// ============================================

export const radius = {
  none: '0',
  sm: '0.25rem',    // 4px
  md: '0.375rem',   // 6px
  lg: '0.5rem',     // 8px
  xl: '0.75rem',    // 12px
  '2xl': '1rem',    // 16px
  '3xl': '1.5rem',  // 24px
  full: '9999px',
} as const;

// ============================================
// SOMBRAS
// ============================================

export const shadows = {
  none: 'none',
  sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
  md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)',
  lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1)',
  xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)',
  '2xl': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
  inner: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.05)',

  // Shadows com cor
  glowBlue: '0 0 20px 0 rgba(59, 130, 246, 0.3)',
  glowCyan: '0 0 20px 0 rgba(6, 182, 212, 0.3)',
  glowViolet: '0 0 20px 0 rgba(139, 92, 246, 0.3)',

  // Card shadows
  card: '0 4px 20px 0 rgba(0, 0, 0, 0.3)',
  cardHover: '0 8px 30px 0 rgba(0, 0, 0, 0.4), 0 0 20px 0 rgba(59, 130, 246, 0.1)',
  cardElevated: '0 12px 40px 0 rgba(0, 0, 0, 0.5)',
} as const;

// ============================================
// MOTION / ANIMAÇÃO
// ============================================

export const motion = {
  // Durations
  duration: {
    instant: '0ms',
    fast: '150ms',
    normal: '200ms',
    slow: '300ms',
    slower: '500ms',
  },

  // Easings
  easing: {
    linear: 'linear',
    easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
    easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
    easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    spring: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
  },

  // Transitions pré-definidos
  transitions: {
    fast: '150ms cubic-bezier(0.4, 0, 0.2, 1)',
    normal: '200ms cubic-bezier(0.4, 0, 0.2, 1)',
    slow: '300ms cubic-bezier(0.4, 0, 0.2, 1)',
    spring: '300ms cubic-bezier(0.175, 0.885, 0.32, 1.275)',
  },
} as const;

// Presets de animação para Framer Motion
export const motionPresets = {
  fadeIn: {
    initial: { opacity: 0 },
    animate: { opacity: 1 },
    exit: { opacity: 0 },
    transition: { duration: 0.2 },
  },
  fadeInUp: {
    initial: { opacity: 0, y: 10 },
    animate: { opacity: 1, y: 0 },
    exit: { opacity: 0, y: 10 },
    transition: { duration: 0.3 },
  },
  fadeInDown: {
    initial: { opacity: 0, y: -10 },
    animate: { opacity: 1, y: 0 },
    exit: { opacity: 0, y: -10 },
    transition: { duration: 0.3 },
  },
  scaleIn: {
    initial: { opacity: 0, scale: 0.95 },
    animate: { opacity: 1, scale: 1 },
    exit: { opacity: 0, scale: 0.95 },
    transition: { duration: 0.2 },
  },
  slideInLeft: {
    initial: { opacity: 0, x: -20 },
    animate: { opacity: 1, x: 0 },
    exit: { opacity: 0, x: -20 },
    transition: { duration: 0.3 },
  },
  slideInRight: {
    initial: { opacity: 0, x: 20 },
    animate: { opacity: 1, x: 0 },
    exit: { opacity: 0, x: 20 },
    transition: { duration: 0.3 },
  },
  staggerChildren: {
    animate: {
      transition: {
        staggerChildren: 0.1,
      },
    },
  },
} as const;

// ============================================
// Z-INDEX
// ============================================

export const zIndex = {
  hide: -1,
  base: 0,
  raised: 10,
  dropdown: 100,
  sticky: 200,
  overlay: 300,
  modal: 400,
  popover: 500,
  toast: 600,
  tooltip: 700,
  max: 9999,
} as const;

// ============================================
// BREAKPOINTS
// ============================================

export const breakpoints = {
  sm: '640px',
  md: '768px',
  lg: '1024px',
  xl: '1280px',
  '2xl': '1536px',
} as const;

// ============================================
// COMPONENTES - CONFIGURAÇÕES PADRÃO
// ============================================

export const components = {
  button: {
    height: {
      sm: '32px',
      md: '40px',
      lg: '48px',
    },
    radius: radius.lg,
  },
  input: {
    height: {
      sm: '32px',
      md: '40px',
      lg: '48px',
    },
    radius: radius.lg,
  },
  card: {
    radius: radius.xl,
    padding: componentSpacing.cardPadding,
  },
  badge: {
    radius: radius.full,
    height: '24px',
  },
  modal: {
    radius: radius['2xl'],
    maxWidth: '500px',
  },
} as const;

// ============================================
// EXPORTS CONSOLIDADOS
// ============================================

export const tokens = {
  colors: {
    backgrounds,
    surfaces,
    borders,
    text,
    brand,
    accent,
    semantic,
    effects,
  },
  gradients,
  typography,
  textStyles,
  spacing,
  componentSpacing,
  radius,
  shadows,
  motion,
  motionPresets,
  zIndex,
  breakpoints,
  components,
} as const;

export default tokens;

```

---
#### `lib/docs-manager.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { DocPage, DocsData, DocCategory } from '@/types';

const DOCS_FILE = path.join(process.cwd(), 'data', 'docs-content.json');

/**
 * Get all documentation pages
 */
export async function getAllDocs(): Promise<DocsData> {
  try {
    const fileContent = await fs.readFile(DOCS_FILE, 'utf-8');
    return JSON.parse(fileContent) as DocsData;
  } catch (error) {
    console.error('Failed to read docs:', error);
    return {
      pages: [],
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Get a specific doc page by ID
 */
export async function getDocById(id: string): Promise<DocPage | null> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages.find(page => page.id === id) || null;
  } catch (error) {
    console.error('Failed to get doc by ID:', error);
    return null;
  }
}

/**
 * Get docs by category
 */
export async function getDocsByCategory(category: DocCategory): Promise<DocPage[]> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages
      .filter(page => page.category === category)
      .sort((a, b) => a.order - b.order);
  } catch (error) {
    console.error('Failed to get docs by category:', error);
    return [];
  }
}

/**
 * Get visible docs only
 */
export async function getVisibleDocs(): Promise<DocPage[]> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages.filter(page => page.visible);
  } catch (error) {
    console.error('Failed to get visible docs:', error);
    return [];
  }
}

/**
 * Create a new doc page
 */
export async function createDoc(
  doc: Omit<DocPage, 'id' | 'createdAt' | 'updatedAt'>
): Promise<DocPage> {
  try {
    const docsData = await getAllDocs();

    const newDoc: DocPage = {
      ...doc,
      id: `doc-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    };

    docsData.pages.push(newDoc);
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return newDoc;
  } catch (error) {
    console.error('Failed to create doc:', error);
    throw error;
  }
}

/**
 * Update an existing doc page
 */
export async function updateDoc(
  id: string,
  updates: Partial<Omit<DocPage, 'id' | 'createdAt'>>
): Promise<DocPage | null> {
  try {
    const docsData = await getAllDocs();
    const docIndex = docsData.pages.findIndex(page => page.id === id);

    if (docIndex === -1) {
      return null;
    }

    const updatedDoc: DocPage = {
      ...docsData.pages[docIndex],
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    docsData.pages[docIndex] = updatedDoc;
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return updatedDoc;
  } catch (error) {
    console.error('Failed to update doc:', error);
    throw error;
  }
}

/**
 * Delete a doc page
 */
export async function deleteDoc(id: string): Promise<boolean> {
  try {
    const docsData = await getAllDocs();
    const filteredPages = docsData.pages.filter(page => page.id !== id);

    if (filteredPages.length === docsData.pages.length) {
      return false; // Doc not found
    }

    docsData.pages = filteredPages;
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return true;
  } catch (error) {
    console.error('Failed to delete doc:', error);
    throw error;
  }
}

/**
 * Reorder docs
 */
export async function reorderDocs(docIds: string[]): Promise<void> {
  try {
    const docsData = await getAllDocs();

    // Update order for each doc
    docIds.forEach((id, index) => {
      const doc = docsData.pages.find(page => page.id === id);
      if (doc) {
        doc.order = index + 1;
        doc.updatedAt = new Date().toISOString();
      }
    });

    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to reorder docs:', error);
    throw error;
  }
}

```

---
#### `lib/documentation-export.ts`

```
// Documentation Export Utilities
// Handles PDF and Markdown exports for the Living Documentation module

export interface DocumentationTab {
  id: string;
  title: string;
  icon: string;
  content: string;
}

// Convert HTML content to clean Markdown
export function htmlToMarkdown(html: string, title: string): string {
  // Remove HTML tags and convert to markdown structure
  let markdown = `# ${title}\n\n`;
  markdown += `*Exportado em: ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}*\n\n---\n\n`;

  // Basic HTML to Markdown conversion
  const content = html
    // Headers
    .replace(/<h1[^>]*>(.*?)<\/h1>/gi, '# $1\n\n')
    .replace(/<h2[^>]*>(.*?)<\/h2>/gi, '## $1\n\n')
    .replace(/<h3[^>]*>(.*?)<\/h3>/gi, '### $1\n\n')
    .replace(/<h4[^>]*>(.*?)<\/h4>/gi, '#### $1\n\n')
    // Paragraphs and breaks
    .replace(/<p[^>]*>(.*?)<\/p>/gi, '$1\n\n')
    .replace(/<br\s*\/?>/gi, '\n')
    // Lists
    .replace(/<ul[^>]*>/gi, '\n')
    .replace(/<\/ul>/gi, '\n')
    .replace(/<ol[^>]*>/gi, '\n')
    .replace(/<\/ol>/gi, '\n')
    .replace(/<li[^>]*>(.*?)<\/li>/gi, '- $1\n')
    // Bold and italic
    .replace(/<strong[^>]*>(.*?)<\/strong>/gi, '**$1**')
    .replace(/<b[^>]*>(.*?)<\/b>/gi, '**$1**')
    .replace(/<em[^>]*>(.*?)<\/em>/gi, '*$1*')
    .replace(/<i[^>]*>(.*?)<\/i>/gi, '*$1*')
    // Code
    .replace(/<code[^>]*>(.*?)<\/code>/gi, '`$1`')
    .replace(/<pre[^>]*>(.*?)<\/pre>/gi, '```\n$1\n```\n')
    // Links
    .replace(/<a[^>]*href="([^"]*)"[^>]*>(.*?)<\/a>/gi, '[$2]($1)')
    // Tables
    .replace(/<table[^>]*>/gi, '\n')
    .replace(/<\/table>/gi, '\n')
    .replace(/<thead[^>]*>/gi, '')
    .replace(/<\/thead>/gi, '')
    .replace(/<tbody[^>]*>/gi, '')
    .replace(/<\/tbody>/gi, '')
    .replace(/<tr[^>]*>/gi, '|')
    .replace(/<\/tr>/gi, '|\n')
    .replace(/<th[^>]*>(.*?)<\/th>/gi, ' $1 |')
    .replace(/<td[^>]*>(.*?)<\/td>/gi, ' $1 |')
    // Divs and spans
    .replace(/<div[^>]*>/gi, '\n')
    .replace(/<\/div>/gi, '\n')
    .replace(/<span[^>]*>(.*?)<\/span>/gi, '$1')
    // Remove remaining HTML tags
    .replace(/<[^>]+>/g, '')
    // Clean up whitespace
    .replace(/\n{3,}/g, '\n\n')
    .replace(/&nbsp;/g, ' ')
    .replace(/&amp;/g, '&')
    .replace(/&lt;/g, '<')
    .replace(/&gt;/g, '>')
    .replace(/&quot;/g, '"')
    .trim();

  return markdown + content;
}

// Download file helper
export function downloadFile(content: string, filename: string, mimeType: string): void {
  const blob = new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// Export single tab as Markdown
export function exportTabAsMarkdown(tab: DocumentationTab): void {
  const markdown = tab.content;
  const filename = `documentacao-${tab.id}-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(markdown, filename, 'text/markdown;charset=utf-8');
}

// Export all tabs as consolidated Markdown
export function exportAllTabsAsMarkdown(tabs: DocumentationTab[]): void {
  let consolidatedMarkdown = `# Documentação Viva do Sistema - ORION

*Sistema de Automação de Produção de Vídeos para YouTube*

**Exportado em:** ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}

---

## Índice

${tabs.map((tab, index) => `${index + 1}. [${tab.title}](#${tab.id})`).join('\n')}

---

`;

  tabs.forEach((tab, index) => {
    consolidatedMarkdown += `\n\n${'='.repeat(80)}\n`;
    consolidatedMarkdown += `# ${index + 1}. ${tab.title}\n`;
    consolidatedMarkdown += `${'='.repeat(80)}\n\n`;
    consolidatedMarkdown += tab.content;
    consolidatedMarkdown += '\n\n';
  });

  consolidatedMarkdown += `\n---\n\n*Documento gerado automaticamente pelo módulo de Documentação Viva do ORION*`;

  const filename = `documentacao-completa-orion-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(consolidatedMarkdown, filename, 'text/markdown;charset=utf-8');
}

// Generate PDF using browser print
export function exportTabAsPDF(tabId: string, tabTitle: string): void {
  const printWindow = window.open('', '_blank');
  if (!printWindow) {
    alert('Por favor, permita pop-ups para exportar PDF');
    return;
  }

  const content = document.getElementById(`tab-content-${tabId}`);
  if (!content) return;

  printWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${tabTitle} - Documentação ORION</title>
      <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          line-height: 1.6;
          color: #1a1a1a;
          padding: 40px;
          max-width: 800px;
          margin: 0 auto;
        }

        h1 {
          font-size: 28px;
          font-weight: 700;
          margin-bottom: 24px;
          color: #111;
          border-bottom: 3px solid #6366f1;
          padding-bottom: 12px;
        }

        h2 {
          font-size: 22px;
          font-weight: 600;
          margin: 32px 0 16px 0;
          color: #222;
        }

        h3 {
          font-size: 18px;
          font-weight: 600;
          margin: 24px 0 12px 0;
          color: #333;
        }

        h4 {
          font-size: 16px;
          font-weight: 600;
          margin: 20px 0 10px 0;
          color: #444;
        }

        p {
          margin-bottom: 12px;
          color: #333;
        }

        ul, ol {
          margin: 12px 0 12px 24px;
        }

        li {
          margin-bottom: 6px;
        }

        table {
          width: 100%;
          border-collapse: collapse;
          margin: 16px 0;
        }

        th, td {
          border: 1px solid #ddd;
          padding: 10px;
          text-align: left;
        }

        th {
          background: #f5f5f5;
          font-weight: 600;
        }

        code {
          background: #f5f5f5;
          padding: 2px 6px;
          border-radius: 4px;
          font-family: 'Monaco', 'Consolas', monospace;
          font-size: 14px;
        }

        pre {
          background: #1a1a1a;
          color: #f0f0f0;
          padding: 16px;
          border-radius: 8px;
          overflow-x: auto;
          margin: 16px 0;
        }

        .badge {
          display: inline-block;
          padding: 4px 10px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 500;
        }

        .badge-green { background: #dcfce7; color: #166534; }
        .badge-yellow { background: #fef9c3; color: #854d0e; }
        .badge-red { background: #fee2e2; color: #991b1b; }
        .badge-blue { background: #dbeafe; color: #1e40af; }

        .diagram {
          background: #fafafa;
          border: 1px solid #e5e5e5;
          border-radius: 8px;
          padding: 20px;
          margin: 16px 0;
        }

        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 1px solid #e5e5e5;
          font-size: 12px;
          color: #666;
          text-align: center;
        }

        @media print {
          body { padding: 20px; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <h1>${tabTitle}</h1>
      <p style="color: #666; font-size: 14px; margin-bottom: 24px;">
        ORION - Documentação Viva do Sistema<br>
        Exportado em: ${new Date().toLocaleDateString('pt-BR', {
          day: '2-digit',
          month: 'long',
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        })}
      </p>
      ${content.innerHTML}
      <div class="footer">
        Documento gerado pelo módulo de Documentação Viva - ORION
      </div>
    </body>
    </html>
  `);

  printWindow.document.close();
  printWindow.focus();

  setTimeout(() => {
    printWindow.print();
  }, 500);
}

```

---
#### `lib/get-api-key.ts`

```
import { NextRequest } from "next/server";

// Mapeamento de headers para variáveis de ambiente
const KEY_MAPPING: Record<string, string> = {
  "x-youtube-api-key": "YOUTUBE_API_KEY",
  "x-youtube-channel-id": "YOUTUBE_CHANNEL_ID",
  "x-openai-api-key": "OPENAI_API_KEY",
  "x-google-api-key": "GOOGLE_GENERATIVE_AI_API_KEY",
  "x-anthropic-api-key": "ANTHROPIC_API_KEY",
  "x-pexels-api-key": "PEXELS_API_KEY",
  "x-pixabay-api-key": "PIXABAY_API_KEY",
  "x-unsplash-api-key": "UNSPLASH_ACCESS_KEY",
  "x-json2video-api-key": "JSON2VIDEO_API_KEY",
  "x-elevenlabs-api-key": "ELEVENLABS_API_KEY",
  "x-tavily-api-key": "TAVILY_API_KEY",
  "x-replicate-api-key": "REPLICATE_API_TOKEN",
  "x-stability-api-key": "STABILITY_API_KEY",
};

/**
 * Obtém uma API key, priorizando:
 * 1. Header da requisição (chave da sessão do usuário)
 * 2. Variável de ambiente do servidor
 */
export function getAPIKey(
  request: NextRequest,
  headerName: string
): string | undefined {
  // Primeiro, tentar obter do header
  const headerValue = request.headers.get(headerName);
  if (headerValue) {
    return headerValue;
  }

  // Segundo, tentar obter da variável de ambiente
  const envVar = KEY_MAPPING[headerName];
  if (envVar) {
    return process.env[envVar];
  }

  return undefined;
}

/**
 * Obtém múltiplas API keys de uma vez
 */
export function getAPIKeys(
  request: NextRequest,
  keys: string[]
): Record<string, string | undefined> {
  const result: Record<string, string | undefined> = {};
  for (const key of keys) {
    result[key] = getAPIKey(request, key);
  }
  return result;
}

// Helpers específicos para cada serviço
export function getYouTubeKeys(request: NextRequest) {
  return {
    apiKey: getAPIKey(request, "x-youtube-api-key"),
    channelId: getAPIKey(request, "x-youtube-channel-id"),
  };
}

export function getOpenAIKey(request: NextRequest) {
  return getAPIKey(request, "x-openai-api-key");
}

export function getGoogleKey(request: NextRequest) {
  return getAPIKey(request, "x-google-api-key");
}

export function getAnthropicKey(request: NextRequest) {
  return getAPIKey(request, "x-anthropic-api-key");
}

export function getPexelsKey(request: NextRequest) {
  return getAPIKey(request, "x-pexels-api-key");
}

export function getPixabayKey(request: NextRequest) {
  return getAPIKey(request, "x-pixabay-api-key");
}

export function getUnsplashKey(request: NextRequest) {
  return getAPIKey(request, "x-unsplash-api-key");
}

export function getJSON2VideoKey(request: NextRequest) {
  return getAPIKey(request, "x-json2video-api-key");
}

export function getElevenLabsKey(request: NextRequest) {
  return getAPIKey(request, "x-elevenlabs-api-key");
}

export function getTavilyKey(request: NextRequest) {
  return getAPIKey(request, "x-tavily-api-key");
}

export function getReplicateKey(request: NextRequest) {
  return getAPIKey(request, "x-replicate-api-key");
}

export function getStabilityKey(request: NextRequest) {
  return getAPIKey(request, "x-stability-api-key");
}

```

---
#### `lib/inngest/client.ts`

```
import { Inngest } from 'inngest';

// Create the Inngest client
export const inngest = new Inngest({
  id: 'orion-video-pipeline',
  name: 'ORION Video Production',
});

// Event types for type safety
export type OrionEvents = {
  'project/start': {
    data: {
      projectId: string;
      topic: string;
      autoMode: boolean;
    };
  };
  'project/approved': {
    data: {
      projectId: string;
      feedback?: string;
    };
  };
  'project/rejected': {
    data: {
      projectId: string;
      feedback: string;
    };
  };
};

```

---
#### `lib/inngest/functions/video-pipeline.ts`

```
import { inngest } from '../client';
import { prisma } from '@/lib/db';
import { researchService } from '@/lib/services/research.service';
import { scriptService } from '@/lib/services/script.service';
import { storyboardService } from '@/lib/services/storyboard.service';
import { renderService } from '@/lib/services/render.service';
import { uploadService } from '@/lib/services/upload.service';
import { notificationService } from '@/lib/services/notification.service';
import crypto from 'crypto';

/**
 * Main Video Production Pipeline
 *
 * This workflow orchestrates the entire video production process:
 * 1. Deep Research (Gemini) - Analyzes trends and channel data
 * 2. Script Generation (Claude) - Creates optimized script
 * 3. Human Approval - Waits for user approval via email
 * 4. Storyboard Generation - Creates visual scene descriptions
 * 5. Video Rendering (JSON2VIDEO) - Renders the final video
 * 6. YouTube Upload - Publishes with automatic retries
 */
export const videoPipeline = inngest.createFunction(
  {
    id: 'video-production-pipeline',
    name: 'Video Production Pipeline',
    retries: 3,
  },
  { event: 'project/start' },
  async ({ event, step }) => {
    const { projectId, topic, autoMode } = event.data;

    // Initialize workflow state
    await step.run('init-workflow', async () => {
      await prisma.workflowState.upsert({
        where: { projectId },
        create: {
          projectId,
          currentStep: 'research',
          approvalToken: crypto.randomBytes(32).toString('hex'),
        },
        update: {
          currentStep: 'research',
          error: null,
        },
      });

      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'RESEARCHING' },
      });
    });

    // Step 1: Deep Research with Gemini
    const researchResult = await step.run('deep-research', async () => {
      await prisma.workflowState.update({
        where: { projectId },
        data: { researchStartedAt: new Date() },
      });

      const result = await researchService.execute(projectId, topic);

      await prisma.workflowState.update({
        where: { projectId },
        data: { researchCompletedAt: new Date() },
      });

      return result;
    });

    // Step 2: Script Generation with Claude
    await step.run('update-status-scripting', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'SCRIPTING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'script',
          scriptStartedAt: new Date(),
        },
      });
    });

    const scriptResult = await step.run('generate-script', async () => {
      const result = await scriptService.generate(projectId, topic, researchResult);

      await prisma.workflowState.update({
        where: { projectId },
        data: { scriptCompletedAt: new Date() },
      });

      return result;
    });

    // Step 3: Human Approval (skip if autoMode)
    if (!autoMode) {
      await step.run('send-approval-request', async () => {
        const workflowState = await prisma.workflowState.findUnique({
          where: { projectId },
        });

        if (workflowState?.approvalToken) {
          const project = await prisma.project.findUnique({
            where: { id: projectId },
          });

          await notificationService.sendApprovalEmail(
            projectId,
            workflowState.approvalToken,
            project?.name || topic
          );

          await prisma.project.update({
            where: { id: projectId },
            data: { status: 'AWAITING_APPROVAL' },
          });

          await prisma.workflowState.update({
            where: { projectId },
            data: {
              currentStep: 'approval',
              approvalSentAt: new Date(),
            },
          });
        }
      });

      // Wait for approval event (max 7 days)
      const approval = await step.waitForEvent('wait-for-approval', {
        event: 'project/approved',
        timeout: '7d',
        match: 'data.projectId',
      });

      if (!approval) {
        throw new Error('Approval timeout - project expired after 7 days');
      }
    }

    // Step 4: Generate Storyboard
    await step.run('update-status-storyboard', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'STORYBOARDING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'storyboard',
          approvedAt: new Date(),
          storyboardStartedAt: new Date(),
        },
      });
    });

    const storyboardResult = await step.run('generate-storyboard', async () => {
      const result = await storyboardService.generate(projectId, scriptResult);

      await prisma.workflowState.update({
        where: { projectId },
        data: { storyboardCompletedAt: new Date() },
      });

      return result;
    });

    // Step 5: Render Video
    await step.run('update-status-rendering', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'RENDERING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'render',
          renderStartedAt: new Date(),
        },
      });
    });

    const renderResult = await step.run('submit-render-job', async () => {
      return await renderService.submit(projectId, storyboardResult);
    });

    // Poll for render completion
    await step.run('wait-for-render', async () => {
      let completed = false;
      let attempts = 0;
      const maxAttempts = 60; // 30 minutes max (30s intervals)

      while (!completed && attempts < maxAttempts) {
        await new Promise((resolve) => setTimeout(resolve, 30000));
        const status = await renderService.checkStatus(projectId, renderResult.externalJobId);

        if (status.completed) {
          completed = true;
          await prisma.workflowState.update({
            where: { projectId },
            data: { renderCompletedAt: new Date() },
          });
        } else if (status.failed) {
          throw new Error(`Render failed: ${status.error}`);
        }

        attempts++;
      }

      if (!completed) {
        throw new Error('Render timeout after 30 minutes');
      }
    });

    // Step 6: Upload to YouTube
    await step.run('update-status-uploading', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'UPLOADING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'upload',
          uploadStartedAt: new Date(),
        },
      });
    });

    const render = await prisma.render.findUnique({ where: { projectId } });

    const uploadResult = await step.run('upload-to-youtube', async () => {
      return await uploadService.upload(projectId, {
        videoUrl: render?.videoUrl || undefined,
        thumbnailUrl: render?.thumbnailUrl || undefined,
        duration: render?.duration || undefined,
      });
    });

    // Final: Mark as completed
    await step.run('complete-workflow', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'COMPLETED' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'completed',
          uploadCompletedAt: new Date(),
        },
      });

      // Send completion notification
      await notificationService.sendCompletionEmail(
        projectId,
        uploadResult.youtubeUrl
      );
    });

    return {
      success: true,
      projectId,
      youtubeUrl: uploadResult.youtubeUrl,
    };
  }
);

// Export all functions
export const functions = [videoPipeline];

```

---
#### `lib/integration-tokens.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { IntegrationTokens } from '@/types';

const TOKENS_FILE = path.join(process.cwd(), 'data', 'integration-tokens.json');

/**
 * Get integration tokens
 */
export async function getIntegrationTokens(): Promise<IntegrationTokens> {
  try {
    const fileContent = await fs.readFile(TOKENS_FILE, 'utf-8');
    return JSON.parse(fileContent) as IntegrationTokens;
  } catch (error) {
    console.error('Failed to read integration tokens:', error);
    return {
      github: null,
      vercel: null,
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update GitHub tokens
 */
export async function updateGitHubTokens(
  token: string,
  owner: string,
  repo: string
): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      github: { token, owner, repo },
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to update GitHub tokens:', error);
    throw error;
  }
}

/**
 * Update Vercel tokens
 */
export async function updateVercelTokens(
  token: string,
  projectId: string
): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      vercel: { token, projectId },
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to update Vercel tokens:', error);
    throw error;
  }
}

/**
 * Remove GitHub tokens
 */
export async function removeGitHubTokens(): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      github: null,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to remove GitHub tokens:', error);
    throw error;
  }
}

/**
 * Remove Vercel tokens
 */
export async function removeVercelTokens(): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      vercel: null,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to remove Vercel tokens:', error);
    throw error;
  }
}

```

---
#### `lib/logger.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { SystemLog, LogLevel, LogSource, LogsData } from '@/types';

const LOGS_FILE = path.join(process.cwd(), 'data', 'system-logs.json');

/**
 * Utility function to log system events
 * This function writes to the system-logs.json file
 */
export async function logSystemEvent(
  level: LogLevel,
  source: LogSource,
  message: string,
  details?: Record<string, unknown>
): Promise<void> {
  try {
    // Read existing logs
    const fileContent = await fs.readFile(LOGS_FILE, 'utf-8');
    const logsData: LogsData = JSON.parse(fileContent);

    // Create new log entry
    const newLog: SystemLog = {
      id: `log-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      timestamp: new Date().toISOString(),
      level,
      source,
      message,
      details,
    };

    // Add to logs array (prepend to show newest first)
    logsData.logs.unshift(newLog);

    // Keep only last 1000 logs to prevent file from growing too large
    if (logsData.logs.length > 1000) {
      logsData.logs = logsData.logs.slice(0, 1000);
    }

    // Write back to file
    await fs.writeFile(LOGS_FILE, JSON.stringify(logsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to write system log:', error);
    // Don't throw - logging should never break the application
  }
}

/**
 * Read all system logs
 */
export async function getSystemLogs(limit?: number): Promise<SystemLog[]> {
  try {
    const fileContent = await fs.readFile(LOGS_FILE, 'utf-8');
    const logsData: LogsData = JSON.parse(fileContent);

    if (limit) {
      return logsData.logs.slice(0, limit);
    }

    return logsData.logs;
  } catch (error) {
    console.error('Failed to read system logs:', error);
    return [];
  }
}

/**
 * Clear all system logs
 */
export async function clearSystemLogs(): Promise<void> {
  try {
    const logsData: LogsData = { logs: [] };
    await fs.writeFile(LOGS_FILE, JSON.stringify(logsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to clear system logs:', error);
    throw error;
  }
}

/**
 * Search logs by text
 */
export async function searchLogs(query: string): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    const lowerQuery = query.toLowerCase();

    return logs.filter(log =>
      log.message.toLowerCase().includes(lowerQuery) ||
      log.source.toLowerCase().includes(lowerQuery) ||
      (log.details && JSON.stringify(log.details).toLowerCase().includes(lowerQuery))
    );
  } catch (error) {
    console.error('Failed to search logs:', error);
    return [];
  }
}

/**
 * Get logs by level
 */
export async function getLogsByLevel(level: LogLevel): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    return logs.filter(log => log.level === level);
  } catch (error) {
    console.error('Failed to get logs by level:', error);
    return [];
  }
}

/**
 * Get logs by source
 */
export async function getLogsBySource(source: LogSource): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    return logs.filter(log => log.source === source);
  } catch (error) {
    console.error('Failed to get logs by source:', error);
    return [];
  }
}

```

---
#### `lib/services/notification.service.ts`

```
import { Resend } from 'resend';
import { prisma } from '@/lib/db';

// Lazy initialization to avoid build-time errors
let resendInstance: Resend | null = null;

function getResend(): Resend {
  if (!resendInstance) {
    resendInstance = new Resend(process.env.RESEND_API_KEY);
  }
  return resendInstance;
}

export const notificationService = {
  /**
   * Send approval request email
   */
  async sendApprovalEmail(
    projectId: string,
    approvalToken: string,
    projectName: string
  ): Promise<void> {
    const baseUrl = process.env.NEXT_PUBLIC_URL || 'http://localhost:3000';
    const approvalUrl = `${baseUrl}/approve/${approvalToken}`;

    const notificationEmail = process.env.NOTIFICATION_EMAIL;

    if (!notificationEmail) {
      console.warn('[Notification] NOTIFICATION_EMAIL not set, skipping email');
      return;
    }

    // Get script details
    const script = await prisma.script.findUnique({
      where: { projectId },
    });

    try {
      await getResend().emails.send({
        from: 'ORION <noreply@orion.video>',
        to: notificationEmail,
        subject: `[Aprovação Necessária] Roteiro: ${projectName}`,
        html: `
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <title>Aprovação de Roteiro</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0a0a0a; color: #fafafa; padding: 40px;">
            <div style="max-width: 600px; margin: 0 auto; background: #18181b; border-radius: 16px; padding: 32px; border: 1px solid #27272a;">
              <h1 style="color: #fafafa; margin-bottom: 8px;">🎬 Novo Roteiro Pronto</h1>
              <h2 style="color: #a1a1aa; font-weight: normal; margin-top: 0;">${projectName}</h2>

              ${script?.title ? `
              <div style="background: #27272a; border-radius: 8px; padding: 16px; margin: 24px 0;">
                <h3 style="color: #fafafa; margin-top: 0;">Título do Vídeo:</h3>
                <p style="color: #e4e4e7; font-size: 18px;">${script.title}</p>
              </div>
              ` : ''}

              <p style="color: #a1a1aa; line-height: 1.6;">
                O roteiro foi gerado e está aguardando sua aprovação.
                Clique no botão abaixo para revisar e aprovar.
              </p>

              <a href="${approvalUrl}"
                 style="display: inline-block; background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
                        color: white; text-decoration: none; padding: 16px 32px; border-radius: 8px;
                        font-weight: 600; margin: 24px 0;">
                Revisar Roteiro →
              </a>

              <p style="color: #71717a; font-size: 12px; margin-top: 32px;">
                Este link expira em 7 dias.<br>
                Se você não solicitou este email, ignore-o.
              </p>
            </div>
          </body>
          </html>
        `,
      });

      console.log(`[Notification] Approval email sent for project ${projectId}`);
    } catch (error) {
      console.error('[Notification] Failed to send approval email:', error);
      throw error;
    }
  },

  /**
   * Send completion notification
   */
  async sendCompletionEmail(projectId: string, youtubeUrl: string): Promise<void> {
    const notificationEmail = process.env.NOTIFICATION_EMAIL;

    if (!notificationEmail) {
      console.warn('[Notification] NOTIFICATION_EMAIL not set, skipping email');
      return;
    }

    const project = await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    try {
      await getResend().emails.send({
        from: 'ORION <noreply@orion.video>',
        to: notificationEmail,
        subject: `✅ Vídeo Publicado: ${project?.name || 'Projeto'}`,
        html: `
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <title>Vídeo Publicado</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0a0a0a; color: #fafafa; padding: 40px;">
            <div style="max-width: 600px; margin: 0 auto; background: #18181b; border-radius: 16px; padding: 32px; border: 1px solid #27272a;">
              <h1 style="color: #22c55e; margin-bottom: 8px;">✅ Vídeo Publicado!</h1>
              <h2 style="color: #fafafa; font-weight: normal; margin-top: 0;">${project?.script?.title || project?.name}</h2>

              <p style="color: #a1a1aa; line-height: 1.6;">
                Seu vídeo foi renderizado e publicado no YouTube com sucesso!
              </p>

              <a href="${youtubeUrl}"
                 style="display: inline-block; background: #ef4444;
                        color: white; text-decoration: none; padding: 16px 32px; border-radius: 8px;
                        font-weight: 600; margin: 24px 0;">
                ▶️ Ver no YouTube
              </a>

              <p style="color: #71717a; font-size: 12px; margin-top: 32px;">
                ORION - Produção Automatizada de Vídeos
              </p>
            </div>
          </body>
          </html>
        `,
      });

      console.log(`[Notification] Completion email sent for project ${projectId}`);
    } catch (error) {
      console.error('[Notification] Failed to send completion email:', error);
      // Don't throw - completion email is not critical
    }
  },
};

```

---
#### `lib/services/render.service.ts`

```
import { prisma } from '@/lib/db';

interface Scene {
  id: number;
  duration: number;
  narration: string;
  visualDescription: string;
  mediaType: 'video' | 'image' | 'animation';
  transition: string;
}

interface StoryboardData {
  scenes: Scene[];
}

interface RenderJobResult {
  externalJobId: string;
  status: string;
}

interface RenderStatusResult {
  completed: boolean;
  failed: boolean;
  videoUrl?: string;
  error?: string;
}

export const renderService = {
  /**
   * Submit render job to JSON2VIDEO
   */
  async submit(projectId: string, storyboard: StoryboardData): Promise<RenderJobResult> {
    // Get project data
    await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    // TODO: Integrate with JSON2VIDEO API using storyboard.scenes
    // For now, we create a mock job
    const sceneCount = storyboard.scenes?.length || 0;
    const externalJobId = `job_${Date.now()}_${projectId.slice(0, 8)}_scenes_${sceneCount}`;

    // Create render record
    await prisma.render.upsert({
      where: { projectId },
      create: {
        projectId,
        externalJobId,
        status: 'processing',
      },
      update: {
        externalJobId,
        status: 'processing',
      },
    });

    return {
      externalJobId,
      status: 'processing',
    };
  },

  /**
   * Check render job status
   */
  async checkStatus(projectId: string, externalJobId: string): Promise<RenderStatusResult> {
    const render = await prisma.render.findUnique({
      where: { projectId },
    });

    if (!render) {
      return { completed: false, failed: true, error: 'Render not found' };
    }

    // Verify job ID matches
    if (render.externalJobId !== externalJobId) {
      return { completed: false, failed: true, error: 'Job ID mismatch' };
    }

    // TODO: Check JSON2VIDEO API for actual status
    // For now, mock as completed after creation
    const mockVideoUrl = `https://storage.example.com/videos/${projectId}.mp4`;

    await prisma.render.update({
      where: { projectId },
      data: {
        status: 'completed',
        videoUrl: mockVideoUrl,
        thumbnailUrl: `https://storage.example.com/thumbnails/${projectId}.jpg`,
        duration: 600, // 10 minutes
      },
    });

    return {
      completed: true,
      failed: false,
      videoUrl: mockVideoUrl,
    };
  },
};

```

---
#### `lib/services/research.service.ts`

```
import { prisma } from '@/lib/db';
import { google } from '@ai-sdk/google';
import { generateText } from 'ai';

interface ResearchResult {
  internalAnalysis: {
    topPerformingTopics: string[];
    audienceInsights: string[];
    contentGaps: string[];
  };
  externalAnalysis: {
    trends: string[];
    competitors: string[];
  };
}

export const researchService = {
  /**
   * Execute deep research using Gemini 2.0
   */
  async execute(projectId: string, topic: string): Promise<ResearchResult> {
    // Update research status
    await prisma.research.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      // Use Gemini 2.0 for deep research
      const { text } = await generateText({
        model: google('gemini-2.0-flash-exp'),
        system: `You are a YouTube content research specialist for the Brazilian market.
Your task is to analyze trends, audience behavior, and content opportunities.
Always respond in valid JSON format.`,
        prompt: `Conduct deep research on the topic: "${topic}"

Analyze:
1. Internal factors: What topics perform well in this niche? What does the audience want?
2. External factors: Current trends, competitor analysis, content gaps

Return a JSON object with this structure:
{
  "internalAnalysis": {
    "topPerformingTopics": ["topic1", "topic2", ...],
    "audienceInsights": ["insight1", "insight2", ...],
    "contentGaps": ["gap1", "gap2", ...]
  },
  "externalAnalysis": {
    "trends": ["trend1", "trend2", ...],
    "competitors": ["competitor insight 1", ...]
  },
  "summary": "Brief summary of findings"
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result = jsonMatch ? JSON.parse(jsonMatch[0]) : {
        internalAnalysis: { topPerformingTopics: [], audienceInsights: [], contentGaps: [] },
        externalAnalysis: { trends: [], competitors: [] },
      };

      // Save research results
      await prisma.research.update({
        where: { projectId },
        data: {
          internalAnalysis: result.internalAnalysis,
          externalAnalysis: result.externalAnalysis,
          summary: result.summary || text,
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.research.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/script.service.ts`

```
import { prisma } from '@/lib/db';
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

interface ScriptResult {
  title: string;
  content: string;
  sections: {
    hook: string;
    body: string[];
    cta: string;
  };
}

interface ResearchData {
  internalAnalysis?: {
    topPerformingTopics: string[];
    audienceInsights: string[];
    contentGaps: string[];
  };
  externalAnalysis?: {
    trends: string[];
    competitors: string[];
  };
}

export const scriptService = {
  /**
   * Generate script using Claude
   */
  async generate(projectId: string, topic: string, research: ResearchData): Promise<ScriptResult> {
    // Update script status
    await prisma.script.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      const { text } = await generateText({
        model: anthropic('claude-sonnet-4-20250514'),
        system: `You are an expert YouTube scriptwriter for the Brazilian market.
Create engaging, value-packed scripts optimized for retention.
Always respond in valid JSON format.`,
        prompt: `Create a YouTube script for: "${topic}"

Research insights:
- Top topics: ${research.internalAnalysis?.topPerformingTopics?.join(', ') || 'N/A'}
- Audience insights: ${research.internalAnalysis?.audienceInsights?.join(', ') || 'N/A'}
- Trends: ${research.externalAnalysis?.trends?.join(', ') || 'N/A'}

Requirements:
1. Hook (first 30 seconds): Grab attention immediately
2. Body: 3-5 main points with value and entertainment
3. CTA: Clear call-to-action

Return JSON:
{
  "title": "Video title (SEO optimized)",
  "content": "Full script text",
  "sections": {
    "hook": "Opening hook text",
    "body": ["Point 1 text", "Point 2 text", ...],
    "cta": "Call to action text"
  },
  "metadata": {
    "wordCount": 1500,
    "estimatedDuration": "10-12 minutes",
    "tone": "engaging and educational"
  }
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result = jsonMatch ? JSON.parse(jsonMatch[0]) : {
        title: topic,
        content: text,
        sections: { hook: '', body: [], cta: '' },
      };

      // Save script
      await prisma.script.update({
        where: { projectId },
        data: {
          title: result.title,
          content: result.content,
          sections: result.sections,
          metadata: result.metadata,
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.script.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/spreadsheet.service.ts`

```
/**
 * ============================================
 * ORION - Serviço de Processamento de Planilhas
 * ============================================
 *
 * Processa planilhas exportadas do YouTube Studio para
 * extrair métricas e insights de performance.
 */

import * as XLSX from 'xlsx';
import { ChannelMetrics, YouTubeStudioData } from '@/types';

interface SpreadsheetRow {
  [key: string]: string | number | undefined;
}

/**
 * Processa um arquivo de planilha (CSV ou XLSX) do YouTube Studio
 */
export async function parseYouTubeStudioSpreadsheet(
  fileBuffer: ArrayBuffer
): Promise<YouTubeStudioData> {
  try {
    // Ler o arquivo com SheetJS
    const workbook = XLSX.read(fileBuffer, { type: 'array' });

    // Pegar a primeira planilha
    const firstSheetName = workbook.SheetNames[0];
    const worksheet = workbook.Sheets[firstSheetName];

    // Converter para JSON
    const rawData = XLSX.utils.sheet_to_json<SpreadsheetRow>(worksheet);

    // Processar os dados
    const metrics = parseMetricsFromSpreadsheet(rawData);

    // Calcular estatísticas agregadas
    const avgCTR = calculateAverageCTR(metrics);
    const avgWatchTime = calculateAverageWatchTime(metrics);
    const topPerformingVideos = getTopPerformingVideos(metrics, 10);

    return {
      id: `yt-studio-${Date.now()}`,
      rawData: rawData as unknown as Record<string, unknown>,
      totalVideos: metrics.length,
      analyzedAt: new Date().toISOString(),
      topPerformingVideos,
      avgCTR,
      avgWatchTime
    };
  } catch (error) {
    console.error('Erro ao processar planilha do YouTube Studio:', error);
    throw new Error(`Falha ao processar planilha: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);
  }
}

/**
 * Converte dados brutos da planilha em objetos ChannelMetrics
 */
function parseMetricsFromSpreadsheet(data: SpreadsheetRow[]): ChannelMetrics[] {
  return data.map((row, index) => {
    // Tentar mapear colunas comuns do YouTube Studio
    // As colunas podem variar dependendo do idioma/formato da exportação
    const videoId = String(row['Video ID'] || row['ID do vídeo'] || `video-${index}`);
    const title = String(row['Video title'] || row['Título do vídeo'] || row['Title'] || row['Título'] || 'Sem título');
    const views = Number(row['Views'] || row['Visualizações'] || row['Visualizacoes'] || 0);
    const likes = Number(row['Likes'] || row['Curtidas'] || 0);
    const comments = Number(row['Comments'] || row['Comentários'] || row['Comentarios'] || 0);
    const watchTime = Number(row['Watch time (hours)'] || row['Tempo de exibição'] || row['Watch time'] || 0);
    const avgViewDuration = Number(row['Average view duration'] || row['Duração média da visualização'] || row['Avg view duration'] || 0);
    const ctr = Number(row['CTR'] || row['Impressions click-through rate'] || row['Taxa de cliques das impressões'] || 0);
    const impressions = Number(row['Impressions'] || row['Impressões'] || row['Impressoes'] || 0);
    const publishedAt = String(row['Published'] || row['Publicado em'] || row['Date'] || new Date().toISOString());

    return {
      videoId,
      title,
      views,
      likes,
      comments,
      watchTime: watchTime * 3600, // Converter horas para segundos
      averageViewDuration: avgViewDuration,
      ctr,
      impressions,
      publishedAt
    };
  }).filter(metric => metric.views > 0); // Filtrar vídeos sem visualizações
}

/**
 * Calcula CTR médio
 */
function calculateAverageCTR(metrics: ChannelMetrics[]): number {
  if (metrics.length === 0) return 0;

  const totalCTR = metrics.reduce((sum, m) => sum + m.ctr, 0);
  return Number((totalCTR / metrics.length).toFixed(2));
}

/**
 * Calcula tempo de exibição médio
 */
function calculateAverageWatchTime(metrics: ChannelMetrics[]): number {
  if (metrics.length === 0) return 0;

  const totalWatchTime = metrics.reduce((sum, m) => sum + m.watchTime, 0);
  return Number((totalWatchTime / metrics.length).toFixed(0));
}

/**
 * Retorna os vídeos com melhor performance
 */
function getTopPerformingVideos(metrics: ChannelMetrics[], limit: number): ChannelMetrics[] {
  // Ordenar por uma combinação de visualizações e CTR
  return [...metrics]
    .sort((a, b) => {
      const scoreA = a.views * (1 + a.ctr / 100);
      const scoreB = b.views * (1 + b.ctr / 100);
      return scoreB - scoreA;
    })
    .slice(0, limit);
}

/**
 * Valida se um arquivo parece ser uma planilha do YouTube Studio
 */
export function validateYouTubeStudioSpreadsheet(fileBuffer: ArrayBuffer): {
  valid: boolean;
  error?: string;
} {
  try {
    const workbook = XLSX.read(fileBuffer, { type: 'array' });

    if (workbook.SheetNames.length === 0) {
      return { valid: false, error: 'Planilha vazia' };
    }

    const worksheet = workbook.Sheets[workbook.SheetNames[0]];
    const data = XLSX.utils.sheet_to_json<SpreadsheetRow>(worksheet);

    if (data.length === 0) {
      return { valid: false, error: 'Nenhum dado encontrado na planilha' };
    }

    // Verificar se tem pelo menos algumas colunas esperadas
    const firstRow = data[0];
    const hasExpectedColumns =
      Object.keys(firstRow).some(key =>
        key.toLowerCase().includes('video') ||
        key.toLowerCase().includes('vídeo') ||
        key.toLowerCase().includes('title') ||
        key.toLowerCase().includes('título')
      );

    if (!hasExpectedColumns) {
      return {
        valid: false,
        error: 'Formato de planilha não reconhecido. Certifique-se de exportar do YouTube Studio.'
      };
    }

    return { valid: true };
  } catch (error) {
    return {
      valid: false,
      error: `Erro ao validar planilha: ${error instanceof Error ? error.message : 'Erro desconhecido'}`
    };
  }
}

/**
 * Extrai insights principais dos dados da planilha
 */
export function extractInsightsFromSpreadsheet(data: YouTubeStudioData): string[] {
  const insights: string[] = [];

  if (!data.topPerformingVideos || data.topPerformingVideos.length === 0) {
    return ['Não foram encontrados dados suficientes para gerar insights'];
  }

  // Insight sobre CTR
  if (data.avgCTR && data.avgCTR > 0) {
    if (data.avgCTR > 10) {
      insights.push(`CTR médio excelente de ${data.avgCTR}% - suas thumbnails e títulos são muito eficazes`);
    } else if (data.avgCTR > 5) {
      insights.push(`CTR médio bom de ${data.avgCTR}% - há espaço para melhorar thumbnails e títulos`);
    } else {
      insights.push(`CTR médio de ${data.avgCTR}% - foque em melhorar suas thumbnails e títulos para aumentar cliques`);
    }
  }

  // Insight sobre tempo de exibição
  if (data.avgWatchTime && data.avgWatchTime > 0) {
    const avgMinutes = Math.floor(data.avgWatchTime / 60);
    insights.push(`Tempo médio de exibição de ${avgMinutes} minutos - ${avgMinutes > 3 ? 'ótima retenção' : 'trabalhe em ganchos mais fortes'}`);
  }

  // Insight sobre vídeos de sucesso
  if (data.topPerformingVideos && data.topPerformingVideos.length > 0) {
    const topVideo = data.topPerformingVideos[0];
    insights.push(`Seu vídeo de maior sucesso "${topVideo.title}" tem ${topVideo.views.toLocaleString()} visualizações`);
  }

  return insights;
}

```

---
#### `lib/services/storyboard.service.ts`

```
import { prisma } from '@/lib/db';
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

interface Scene {
  id: number;
  duration: number;
  narration: string;
  visualDescription: string;
  mediaType: 'video' | 'image' | 'animation';
  transition: string;
}

interface StoryboardResult {
  scenes: Scene[];
}

interface ScriptData {
  title: string;
  content: string;
  sections?: {
    hook: string;
    body: string[];
    cta: string;
  };
}

export const storyboardService = {
  /**
   * Generate storyboard from script
   */
  async generate(projectId: string, script: ScriptData): Promise<StoryboardResult> {
    // Update storyboard status
    await prisma.storyboard.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      const { text } = await generateText({
        model: anthropic('claude-sonnet-4-20250514'),
        system: `You are a video storyboard specialist.
Create detailed scene-by-scene breakdowns for video production.
Always respond in valid JSON format.`,
        prompt: `Create a storyboard for this script:

Title: ${script.title}
Content: ${script.content}

For each scene, specify:
1. Duration (seconds)
2. Narration text
3. Visual description (what should be on screen)
4. Media type (video, image, animation)
5. Transition to next scene

Return JSON:
{
  "scenes": [
    {
      "id": 1,
      "duration": 5,
      "narration": "Text to speak",
      "visualDescription": "What appears on screen",
      "mediaType": "video",
      "transition": "fade"
    }
  ]
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result: StoryboardResult = jsonMatch ? JSON.parse(jsonMatch[0]) : { scenes: [] };

      // Save storyboard
      await prisma.storyboard.update({
        where: { projectId },
        data: {
          scenes: JSON.parse(JSON.stringify(result.scenes)),
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.storyboard.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/upload.service.ts`

```
import { prisma } from '@/lib/db';

interface VideoData {
  videoUrl?: string;
  thumbnailUrl?: string;
  duration?: number;
}

interface UploadResult {
  youtubeVideoId: string;
  youtubeUrl: string;
}

export const uploadService = {
  /**
   * Upload video to YouTube
   */
  async upload(projectId: string, video: VideoData): Promise<UploadResult> {
    // Get project with script for title/description
    const project = await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    if (!project?.script) {
      throw new Error('Script not found');
    }

    // Get or create upload record
    let upload = await prisma.upload.findUnique({
      where: { projectId },
    });

    if (!upload) {
      upload = await prisma.upload.create({
        data: {
          projectId,
          title: project.script.title || project.name,
          status: 'pending',
        },
      });
    }

    // TODO: Integrate with YouTube Data API
    // For now, mock the upload
    const mockVideoId = `YT_${Date.now()}_${projectId.slice(0, 8)}`;
    const mockYoutubeUrl = `https://youtube.com/watch?v=${mockVideoId}`;

    // Log video data for future integration
    console.log('[Upload Service] Video data:', {
      projectId,
      videoUrl: video.videoUrl,
      thumbnailUrl: video.thumbnailUrl,
      duration: video.duration,
    });

    await prisma.upload.update({
      where: { projectId },
      data: {
        youtubeVideoId: mockVideoId,
        youtubeUrl: mockYoutubeUrl,
        title: project.script.title || project.name,
        description: project.script.content?.slice(0, 500) || '',
        publishedAt: new Date(),
        status: 'completed',
      },
    });

    return {
      youtubeVideoId: mockVideoId,
      youtubeUrl: mockYoutubeUrl,
    };
  },
};

```

---
#### `lib/share-context.tsx`

```
"use client";

import { createContext, useContext, useState, useEffect, ReactNode } from "react";

interface ShareContextType {
  isSharedView: boolean;
  shareToken: string | null;
  generateShareLink: () => string;
  canCopy: boolean;
  canShare: boolean;
}

const ShareContext = createContext<ShareContextType | undefined>(undefined);

// Generate a unique share token
function generateToken(): string {
  return btoa(Date.now().toString(36) + Math.random().toString(36).substring(2));
}

// Store owner tokens in localStorage
function getOwnerTokens(): string[] {
  if (typeof window === "undefined") return [];
  try {
    const tokens = localStorage.getItem("ey_owner_tokens");
    return tokens ? JSON.parse(tokens) : [];
  } catch {
    return [];
  }
}

function addOwnerToken(token: string) {
  if (typeof window === "undefined") return;
  const tokens = getOwnerTokens();
  if (!tokens.includes(token)) {
    tokens.push(token);
    localStorage.setItem("ey_owner_tokens", JSON.stringify(tokens));
  }
}

export function ShareProvider({ children }: { children: ReactNode }) {
  const [isSharedView, setIsSharedView] = useState(false);
  const [shareToken, setShareToken] = useState<string | null>(null);

  useEffect(() => {
    // Check if this is a shared view by looking at the URL
    const params = new URLSearchParams(window.location.search);
    const token = params.get("s");

    if (token) {
      // Check if this token belongs to the owner
      const ownerTokens = getOwnerTokens();
      if (!ownerTokens.includes(token)) {
        // This is a viewer (not the owner)
        setIsSharedView(true);
        setShareToken(token);

        // Apply copy protection for shared views
        document.body.classList.add("shared-view");

        // Disable right-click
        const handleContextMenu = (e: MouseEvent) => {
          e.preventDefault();
          return false;
        };

        // Disable copy/cut
        const handleCopy = (e: ClipboardEvent) => {
          e.preventDefault();
          return false;
        };

        // Disable text selection via keyboard
        const handleKeydown = (e: KeyboardEvent) => {
          if (
            (e.ctrlKey || e.metaKey) &&
            (e.key === "c" || e.key === "a" || e.key === "u" || e.key === "s")
          ) {
            e.preventDefault();
            return false;
          }
        };

        document.addEventListener("contextmenu", handleContextMenu);
        document.addEventListener("copy", handleCopy);
        document.addEventListener("cut", handleCopy);
        document.addEventListener("keydown", handleKeydown);

        return () => {
          document.removeEventListener("contextmenu", handleContextMenu);
          document.removeEventListener("copy", handleCopy);
          document.removeEventListener("cut", handleCopy);
          document.removeEventListener("keydown", handleKeydown);
          document.body.classList.remove("shared-view");
        };
      }
    }
  }, []);

  const generateShareLink = (): string => {
    const token = generateToken();
    addOwnerToken(token); // Mark this token as owned by the creator

    const baseUrl = window.location.origin + window.location.pathname;
    return `${baseUrl}?s=${token}`;
  };

  return (
    <ShareContext.Provider
      value={{
        isSharedView,
        shareToken,
        generateShareLink,
        canCopy: !isSharedView,
        canShare: !isSharedView,
      }}
    >
      {children}
    </ShareContext.Provider>
  );
}

export function useShare() {
  const context = useContext(ShareContext);
  if (context === undefined) {
    throw new Error("useShare must be used within a ShareProvider");
  }
  return context;
}

```

---
#### `lib/store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";
import {
  WorkflowStep,
  ContextData,
  ResearchData,
  ProposalData,
  StoryboardData,
  RenderData,
  UploadData,
  GuidelinesData,
  Diretriz,
} from "@/types";
import { v4 as uuidv4 } from "uuid";

// ============================================
// Workflow Store
// ============================================
interface WorkflowStore {
  currentStep: WorkflowStep;
  context: ContextData | null;
  research: ResearchData | null;
  proposal: ProposalData | null;
  storyboard: StoryboardData | null;
  render: RenderData | null;
  upload: UploadData | null;

  // Navigation
  setStep: (step: WorkflowStep) => void;
  canNavigateToStep: (step: WorkflowStep) => boolean;

  // Context (Step 1)
  setContext: (context: ContextData) => void;
  clearContext: () => void;

  // Research (Step 2)
  setResearch: (research: ResearchData) => void;
  clearResearch: () => void;

  // Proposal (Step 4)
  setProposal: (proposal: ProposalData) => void;
  updateProposal: (updates: Partial<ProposalData>) => void;
  clearProposal: () => void;

  // Storyboard (Step 5)
  setStoryboard: (storyboard: StoryboardData) => void;
  updateStoryboard: (updates: Partial<StoryboardData>) => void;
  clearStoryboard: () => void;

  // Render (Step 5)
  setRender: (render: RenderData) => void;
  updateRender: (updates: Partial<RenderData>) => void;
  clearRender: () => void;

  // Upload (Step 6)
  setUpload: (upload: UploadData) => void;
  updateUpload: (updates: Partial<UploadData>) => void;
  clearUpload: () => void;

  // Reset all
  resetWorkflow: () => void;
}

export const useWorkflowStore = create<WorkflowStore>()(
  persist(
    (set, get) => ({
      currentStep: 1,
      context: null,
      research: null,
      proposal: null,
      storyboard: null,
      render: null,
      upload: null,

      setStep: (step) => {
        if (get().canNavigateToStep(step)) {
          set({ currentStep: step });
        }
      },

      canNavigateToStep: (step) => {
        const { context, research, proposal, storyboard } = get();

        switch (step) {
          case 1:
            return true;
          case 2:
            return context !== null;
          case 4:
            return research !== null;
          case 5:
            return proposal !== null && proposal.allApproved;
          case 6:
            return storyboard !== null;
          default:
            return false;
        }
      },

      setContext: (context) => set({ context }),
      clearContext: () => set({ context: null }),

      setResearch: (research) => set({ research }),
      clearResearch: () => set({ research: null }),

      setProposal: (proposal) => set({ proposal }),
      updateProposal: (updates) =>
        set((state) => ({
          proposal: state.proposal ? { ...state.proposal, ...updates } : null,
        })),
      clearProposal: () => set({ proposal: null }),

      setStoryboard: (storyboard) => set({ storyboard }),
      updateStoryboard: (updates) =>
        set((state) => ({
          storyboard: state.storyboard
            ? { ...state.storyboard, ...updates }
            : null,
        })),
      clearStoryboard: () => set({ storyboard: null }),

      setRender: (render) => set({ render }),
      updateRender: (updates) =>
        set((state) => ({
          render: state.render ? { ...state.render, ...updates } : null,
        })),
      clearRender: () => set({ render: null }),

      setUpload: (upload) => set({ upload }),
      updateUpload: (updates) =>
        set((state) => ({
          upload: state.upload ? { ...state.upload, ...updates } : null,
        })),
      clearUpload: () => set({ upload: null }),

      resetWorkflow: () =>
        set({
          currentStep: 1,
          context: null,
          research: null,
          proposal: null,
          storyboard: null,
          render: null,
          upload: null,
        }),
    }),
    {
      name: "orion-workflow",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// Guidelines Store (Global - Not a step)
// ============================================
interface GuidelinesStore {
  guidelines: GuidelinesData;

  // CRUD Operations
  addDiretriz: (diretriz: Omit<Diretriz, "id" | "createdAt" | "updatedAt">) => void;
  updateDiretriz: (id: string, updates: Partial<Diretriz>) => void;
  deleteDiretriz: (id: string) => void;
  toggleDiretriz: (id: string) => void;

  // Getters
  getActiveDiretrizes: () => Diretriz[];
  getDiretrizesForScope: (scope: Diretriz["appliesTo"][number]) => Diretriz[];
}

const defaultGuidelines: GuidelinesData = {
  diretrizes: [],
  updatedAt: new Date().toISOString(),
};

export const useGuidelinesStore = create<GuidelinesStore>()(
  persist(
    (set, get) => ({
      guidelines: defaultGuidelines,

      addDiretriz: (diretriz) => {
        const now = new Date().toISOString();
        const newDiretriz: Diretriz = {
          ...diretriz,
          id: uuidv4(),
          createdAt: now,
          updatedAt: now,
        };
        set((state) => ({
          guidelines: {
            diretrizes: [...state.guidelines.diretrizes, newDiretriz],
            updatedAt: now,
          },
        }));
      },

      updateDiretriz: (id, updates) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, ...updates, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      deleteDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.filter((d) => d.id !== id),
            updatedAt: now,
          },
        }));
      },

      toggleDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, active: !d.active, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      getActiveDiretrizes: () => {
        return get().guidelines.diretrizes.filter((d) => d.active);
      },

      getDiretrizesForScope: (scope) => {
        return get()
          .guidelines.diretrizes.filter((d) => d.active && d.appliesTo.includes(scope));
      },
    }),
    {
      name: "orion-guidelines",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// UI Store (Non-persistent)
// ============================================
interface UIStore {
  isSidebarOpen: boolean;
  isGuidelinesModalOpen: boolean;
  isApiKeyModalOpen: boolean;
  isConnectApisModalOpen: boolean;
  activeModal: string | null;

  toggleSidebar: () => void;
  setSidebarOpen: (open: boolean) => void;
  openGuidelinesModal: () => void;
  closeGuidelinesModal: () => void;
  openApiKeyModal: () => void;
  closeApiKeyModal: () => void;
  setConnectApisModalOpen: (open: boolean) => void;
  setActiveModal: (modal: string | null) => void;
}

export const useUIStore = create<UIStore>()((set) => ({
  isSidebarOpen: true,
  isGuidelinesModalOpen: false,
  isApiKeyModalOpen: false,
  isConnectApisModalOpen: false,
  activeModal: null,

  toggleSidebar: () => set((state) => ({ isSidebarOpen: !state.isSidebarOpen })),
  setSidebarOpen: (open) => set({ isSidebarOpen: open }),
  openGuidelinesModal: () => set({ isGuidelinesModalOpen: true }),
  closeGuidelinesModal: () => set({ isGuidelinesModalOpen: false }),
  openApiKeyModal: () => set({ isApiKeyModalOpen: true }),
  closeApiKeyModal: () => set({ isApiKeyModalOpen: false }),
  setConnectApisModalOpen: (open) => set({ isConnectApisModalOpen: open }),
  setActiveModal: (modal) => set({ activeModal: modal }),
}));

// ============================================
// Branding Store (White Label System)
// ============================================
interface BrandingStore {
  systemName: string;
  logoUrl: string | null;
  setSystemName: (name: string) => void;
  setLogoUrl: (url: string | null) => void;
  setBranding: (systemName: string, logoUrl: string | null) => void;
  resetBranding: () => void;
}

const defaultBranding = {
  systemName: "ORION",
  logoUrl: null,
};

export const useBrandingStore = create<BrandingStore>()(
  persist(
    (set) => ({
      systemName: defaultBranding.systemName,
      logoUrl: defaultBranding.logoUrl,

      setSystemName: (name) => set({ systemName: name }),
      setLogoUrl: (url) => set({ logoUrl: url }),
      setBranding: (systemName, logoUrl) => set({ systemName, logoUrl }),
      resetBranding: () => set(defaultBranding),
    }),
    {
      name: "orion-branding",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

```

---
#### `lib/system/api-registry.ts`

```
export type ApiStatus = "ONLINE" | "OFFLINE";

export interface ApiCheck {
  name: string;
  env: string;
  check: () => Promise<ApiStatus>;
}

export const apiRegistry: ApiCheck[] = [
  {
    name: "GEMINI",
    env: "GOOGLE_GENERATIVE_AI_API_KEY",
    check: async () => {
      return process.env.GOOGLE_GENERATIVE_AI_API_KEY ? "ONLINE" : "OFFLINE";
    }
  }
];

```

---
#### `lib/system/boot.ts`

```
import { apiRegistry, ApiStatus } from "./api-registry";

export interface BootReport {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, ApiStatus>;
}

export async function systemBoot(): Promise<BootReport> {
  const apis: Record<string, ApiStatus> = {};
  let degraded = false;

  for (const api of apiRegistry) {
    const status = await api.check();
    apis[api.name] = status;
    if (status !== "ONLINE") degraded = true;
  }

  return {
    status: degraded ? "DEGRADED" : "ONLINE",
    apis
  };
}

```

---
#### `lib/user-profile.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { UserProfile } from '@/types';

const PROFILE_FILE = path.join(process.cwd(), 'data', 'user-profile.json');

/**
 * Get user profile
 */
export async function getUserProfile(): Promise<UserProfile> {
  try {
    const fileContent = await fs.readFile(PROFILE_FILE, 'utf-8');
    return JSON.parse(fileContent) as UserProfile;
  } catch (error) {
    console.error('Failed to read user profile:', error);
    // Return default profile if file doesn't exist
    return {
      id: 'admin-001',
      name: 'Admin',
      role: 'System Administrator',
      avatarUrl: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Admin',
      bio: 'ORION System Administrator',
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update user profile
 */
export async function updateUserProfile(
  updates: Partial<Omit<UserProfile, 'id' | 'createdAt'>>
): Promise<UserProfile> {
  try {
    const currentProfile = await getUserProfile();

    const updatedProfile: UserProfile = {
      ...currentProfile,
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(PROFILE_FILE, JSON.stringify(updatedProfile, null, 2), 'utf-8');

    return updatedProfile;
  } catch (error) {
    console.error('Failed to update user profile:', error);
    throw error;
  }
}

```

---
#### `lib/utils.ts`

```
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatDuration(seconds: number): string {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = Math.floor(seconds % 60);

  if (hours > 0) {
    return `${hours}:${minutes.toString().padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
  }
  return `${minutes}:${secs.toString().padStart(2, "0")}`;
}

export function formatNumber(num: number): string {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + "M";
  }
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + "K";
  }
  return num.toString();
}

export function formatDate(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
  });
}

export function formatDateTime(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
    hour: "2-digit",
    minute: "2-digit",
  });
}

export function truncateText(text: string, maxLength: number): string {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength - 3) + "...";
}

export function generateId(): string {
  return Math.random().toString(36).substring(2) + Date.now().toString(36);
}

export function debounce<T extends (...args: unknown[]) => unknown>(
  func: T,
  wait: number
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout | null = null;

  return (...args: Parameters<T>) => {
    if (timeout) clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
}

export function parseCSV(csvText: string): Record<string, string>[] {
  const lines = csvText.trim().split("\n");
  if (lines.length < 2) return [];

  const headers = lines[0].split(",").map((h) => h.trim().replace(/"/g, ""));
  const rows: Record<string, string>[] = [];

  for (let i = 1; i < lines.length; i++) {
    const values = parseCSVLine(lines[i]);
    if (values.length === headers.length) {
      const row: Record<string, string> = {};
      headers.forEach((header, index) => {
        row[header] = values[index];
      });
      rows.push(row);
    }
  }

  return rows;
}

function parseCSVLine(line: string): string[] {
  const values: string[] = [];
  let current = "";
  let inQuotes = false;

  for (let i = 0; i < line.length; i++) {
    const char = line[i];

    if (char === '"') {
      inQuotes = !inQuotes;
    } else if (char === "," && !inQuotes) {
      values.push(current.trim());
      current = "";
    } else {
      current += char;
    }
  }

  values.push(current.trim());
  return values;
}

export function downloadJSON(data: object, filename: string): void {
  const blob = new Blob([JSON.stringify(data, null, 2)], {
    type: "application/json",
  });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

export function estimateReadingTime(text: string, wordsPerMinute = 150): number {
  const wordCount = text.split(/\s+/).length;
  return Math.ceil((wordCount / wordsPerMinute) * 60);
}

```

---
#### `lib/workflow-logger.ts`

```
/**
 * Workflow Logger - Integration helper for adding logs to the workflow
 * 
 * This file provides convenient functions to log workflow events
 */

import { addLog } from '@/app/actions/settings';
import type { LogLevel } from '@/types';

export async function logWorkflowStep(step: string, action: string, details?: Record<string, unknown>) {
  try {
    await addLog('info', 'workflow', `${step}: ${action}`, details);
  } catch (error) {
    console.error('Failed to log workflow step:', error);
  }
}

export async function logWorkflowSuccess(step: string, message: string, details?: Record<string, unknown>) {
  try {
    await addLog('success', 'workflow', `${step}: ${message}`, details);
  } catch (error) {
    console.error('Failed to log workflow success:', error);
  }
}

export async function logWorkflowError(step: string, error: string | Error, details?: Record<string, unknown>) {
  try {
    const errorMessage = error instanceof Error ? error.message : error;
    await addLog('error', 'workflow', `${step}: ${errorMessage}`, details);
  } catch (err) {
    console.error('Failed to log workflow error:', err);
  }
}

export async function logAPICall(apiName: string, action: string, success: boolean, details?: Record<string, unknown>) {
  try {
    const level: LogLevel = success ? 'success' : 'error';
    await addLog(level, 'api', `${apiName}: ${action}`, details);
  } catch (error) {
    console.error('Failed to log API call:', error);
  }
}

export async function logUserAction(action: string, details?: Record<string, unknown>) {
  try {
    await addLog('info', 'user', action, details);
  } catch (error) {
    console.error('Failed to log user action:', error);
  }
}

```

---
#### `lib/workflow-modes.ts`

```
/**
 * ============================================
 * ORION - Sistema de Modos de Workflow
 * ============================================
 *
 * Configuração dos diferentes modos de operação do sistema ORION.
 * Cada modo define um conjunto de funcionalidades e fluxo de trabalho.
 */

import { WorkflowMode } from "@/types";

export interface WorkflowModeConfig {
  id: WorkflowMode;
  nome: string;
  descricao: string;
  descricaoDetalhada: string;
  ativo: boolean;
  recursos: string[];
  icone: string; // Lucide icon name
  cor: string; // Cor do gradiente
  tempoEstimado: string;
  badge?: string;
}

/**
 * Configuração completa de todos os modos disponíveis
 */
export const WORKFLOW_MODES: Record<WorkflowMode, WorkflowModeConfig> = {
  FAST: {
    id: "FAST",
    nome: "Modo Rápido",
    descricao: "Mídia stock + opção de geração IA sob demanda",
    descricaoDetalhada: "Crie vídeos rapidamente usando nossa biblioteca de mídia stock. Opcionalmente, gere mídia customizada com IA quando necessário.",
    ativo: true,
    recursos: [
      "Múltiplas fontes de input (planilha, tema, link, transcrição)",
      "Análise adaptativa com IA",
      "Teste A/B/C de thumbnails para YouTube",
      "Biblioteca de mídia stock (Pexels, Pixabay)",
      "Geração de mídia com IA sob demanda",
      "Upload de mídia própria",
      "Preview obrigatório antes do upload",
      "Feedback em tempo real"
    ],
    icone: "Zap",
    cor: "from-cyan-500 to-blue-600",
    tempoEstimado: "15-30 min",
    badge: "Recomendado"
  },
  STANDARD: {
    id: "STANDARD",
    nome: "Modo Padrão",
    descricao: "Em breve - Equilíbrio entre velocidade e personalização",
    descricaoDetalhada: "Modo balanceado com mais opções de customização e controle sobre o processo de criação.",
    ativo: false,
    recursos: [
      "Todas as funcionalidades do Modo Rápido",
      "Editor de roteiro avançado",
      "Timeline de edição",
      "Mais controles de personalização",
      "Aprovações em múltiplas etapas"
    ],
    icone: "Settings",
    cor: "from-blue-500 to-indigo-600",
    tempoEstimado: "45-60 min"
  },
  PREMIUM: {
    id: "PREMIUM",
    nome: "Modo Premium",
    descricao: "Em breve - Máxima personalização e controle",
    descricaoDetalhada: "Controle total sobre cada aspecto da produção do vídeo, com ferramentas profissionais de edição.",
    ativo: false,
    recursos: [
      "Todas as funcionalidades do Modo Padrão",
      "Editor de vídeo profissional integrado",
      "Biblioteca de transições e efeitos",
      "Animações customizadas",
      "Múltiplas revisões",
      "Exportação em múltiplos formatos",
      "Suporte prioritário"
    ],
    icone: "Crown",
    cor: "from-purple-500 to-pink-600",
    tempoEstimado: "90+ min",
    badge: "Em breve"
  }
};

/**
 * Retorna apenas os modos ativos
 */
export function getActiveModes(): WorkflowModeConfig[] {
  return Object.values(WORKFLOW_MODES).filter(mode => mode.ativo);
}

/**
 * Retorna configuração de um modo específico
 */
export function getModeConfig(mode: WorkflowMode): WorkflowModeConfig {
  return WORKFLOW_MODES[mode];
}

/**
 * Verifica se um modo está ativo
 */
export function isModeActive(mode: WorkflowMode): boolean {
  return WORKFLOW_MODES[mode].ativo;
}

/**
 * Retorna o modo padrão
 */
export function getDefaultMode(): WorkflowMode {
  return "FAST";
}

```

---
#### `next.config.js`

```
/** @type {import('next').NextConfig} */
const nextConfig = {
  eslint: {
    ignoreDuringBuilds: true,
  },
  typescript: {
    ignoreBuildErrors: true,
  },
};

module.exports = nextConfig;

```

---
#### `next.config.ts`

```
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Build will fail on TypeScript/ESLint errors (production-safe)
};

export default nextConfig;

```

---
#### `package.json`

```
{
  "name": "orion",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "jest",
    "vercel:comments": "tsx scripts/get-vercel-comments.ts",
    "vercel:comments:all": "tsx scripts/get-vercel-comments.ts --show-resolved"
  },
  "dependencies": {
    "@ai-sdk/anthropic": "^3.0.23",
    "@ai-sdk/google": "^3.0.13",
    "@ai-sdk/openai": "^3.0.18",
    "@ffmpeg/ffmpeg": "^0.12.15",
    "@ffmpeg/util": "^0.12.2",
    "@google/generative-ai": "^0.24.1",
    "@prisma/client": "^6.19.2",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-progress": "^1.1.8",
    "@radix-ui/react-separator": "^1.1.8",
    "@radix-ui/react-slot": "^1.2.4",
    "@types/xlsx": "^0.0.35",
    "@vercel/analytics": "^1.6.1",
    "@vercel/blob": "^2.0.0",
    "@vercel/speed-insights": "^1.3.1",
    "@vercel/toolbar": "^0.1.32",
    "ai": "^6.0.49",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "framer-motion": "^11.15.0",
    "inngest": "^3.49.3",
    "lucide-react": "^0.469.0",
    "next": "^15.5.9",
    "papaparse": "^5.4.1",
    "prisma": "^6.19.2",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-dropzone": "^14.3.5",
    "recharts": "^3.7.0",
    "resend": "^6.8.0",
    "tailwind-merge": "^2.6.0",
    "uuid": "^11.0.4",
    "xlsx": "^0.18.5",
    "zod": "^3.25.76",
    "zustand": "^5.0.2"
  },
  "devDependencies": {
    "@types/jest": "^30.0.0",
    "@types/node": "^22.10.5",
    "@types/papaparse": "^5.3.15",
    "@types/react": "^19.0.2",
    "@types/react-dom": "^19.0.2",
    "@types/uuid": "^10.0.0",
    "autoprefixer": "^10.4.20",
    "eslint": "^9.17.0",
    "eslint-config-next": "15.1.11",
    "jest": "^30.2.0",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.17",
    "ts-jest": "^29.4.6",
    "tsx": "^4.21.0",
    "typescript": "^5.7.2"
  }
}

```

---
#### `prisma/schema.prisma`

```
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id                   String                @id @default(cuid())
  name                 String
  topic                String
  status               ProjectStatus         @default(PENDING)
  autoMode             Boolean               @default(false)
  mode                 String                @default("FAST")
  tagsFoco             String[]
  linkConcorrente      String?
  transcricao          String?               @db.Text
  createdAt            DateTime              @default(now())
  updatedAt            DateTime              @updatedAt
  render               Render?
  research             Research?
  script               Script?
  storyboard           Storyboard?
  upload               Upload?
  workflowState        WorkflowState?
  youtubeStudioData    YouTubeStudioData?
  competitorAnalysis   CompetitorAnalysis?

  @@index([status])
  @@index([createdAt])
  @@index([mode])
}

model Research {
  id               String   @id @default(cuid())
  projectId        String   @unique
  internalAnalysis Json?
  externalAnalysis Json?
  summary          String?
  status           String   @default("pending")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  project          Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Script {
  id         String    @id @default(cuid())
  projectId  String    @unique
  title      String?
  content    String?
  sections   Json?
  metadata   Json?
  approved   Boolean   @default(false)
  approvedAt DateTime?
  feedback   String?
  status     String    @default("pending")
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  project    Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Storyboard {
  id        String   @id @default(cuid())
  projectId String   @unique
  scenes    Json?
  status    String   @default("pending")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Render {
  id               String    @id @default(cuid())
  projectId        String    @unique
  externalJobId    String?
  videoUrl         String?
  thumbnailUrl     String?
  duration         Int?
  status           String    @default("pending")
  error            String?
  videoPreviewUrl  String?
  previewApproved  Boolean   @default(false)
  previewApprovedAt DateTime?
  previewNotes     String?   @db.Text
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  project          Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Upload {
  id             String    @id @default(cuid())
  projectId      String    @unique
  youtubeVideoId String?
  youtubeUrl     String?
  title          String?
  description    String?
  tags           Json?
  publishedAt    DateTime?
  status         String    @default("pending")
  error          String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  project        Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model WorkflowState {
  id                    String    @id @default(cuid())
  projectId             String    @unique
  currentStep           String    @default("init")
  inngestRunId          String?
  approvalToken         String?   @unique
  researchStartedAt     DateTime?
  researchCompletedAt   DateTime?
  scriptStartedAt       DateTime?
  scriptCompletedAt     DateTime?
  approvalSentAt        DateTime?
  approvedAt            DateTime?
  storyboardStartedAt   DateTime?
  storyboardCompletedAt DateTime?
  renderStartedAt       DateTime?
  renderCompletedAt     DateTime?
  uploadStartedAt       DateTime?
  uploadCompletedAt     DateTime?
  error                 String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  project               Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([approvalToken])
}

model UserSettings {
  id                String   @id @default(cuid())
  email             String   @unique
  notificationEmail String?
  autoApprove       Boolean  @default(false)
  maxRetries        Int      @default(3)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model YouTubeStudioData {
  id          String   @id @default(cuid())
  projectId   String   @unique
  rawData     Json
  totalVideos Int
  analyzedAt  DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model CompetitorAnalysis {
  id               String   @id @default(cuid())
  projectId        String   @unique
  videoUrl         String
  videoTitle       String?
  videoDescription String?  @db.Text
  videoTags        String[]
  analyzedAt       DateTime @default(now())
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  project          Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

enum ProjectStatus {
  PENDING
  RESEARCHING
  SCRIPTING
  AWAITING_APPROVAL
  APPROVED
  STORYBOARDING
  RENDERING
  UPLOADING
  COMPLETED
  FAILED
}

```

---
#### `tailwind.config.ts`

```
import type { Config } from "tailwindcss";
import tokens from "./lib/design-tokens";

/**
 * ============================================
 * ORION Design System - Tailwind Configuration
 * ============================================
 *
 * Configuração estendida do Tailwind CSS
 * sincronizada com o Design System ORION.
 *
 * FONTE PRIMÁRIA: lib/design-tokens.ts
 * Este arquivo força o uso dos design tokens
 * TypeScript como single source of truth.
 */
const config: Config = {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      // ========================================
      // CORES - Paleta ORION (Design Tokens)
      // ========================================
      colors: {
        background: tokens.colors.backgrounds.layer0,
        foreground: tokens.colors.text.primary,
        layer: tokens.colors.backgrounds,
        surface: tokens.colors.surfaces,
        border: tokens.colors.borders,
        text: tokens.colors.text,
        
        // Paletas da marca
        orion: tokens.colors.brand.blue,
        'orion-red': tokens.colors.brand.red,
        
        // Paletas de acento
        cyan: tokens.colors.accent.cyan,
        indigo: tokens.colors.accent.indigo,
        violet: tokens.colors.accent.violet,

        // Cores semânticas
        success: {
          DEFAULT: tokens.colors.semantic.success.solid,
          bg: tokens.colors.semantic.success.bg,
          border: tokens.colors.semantic.success.border,
          text: tokens.colors.semantic.success.text,
        },
        warning: {
          DEFAULT: tokens.colors.semantic.warning.solid,
          bg: tokens.colors.semantic.warning.bg,
          border: tokens.colors.semantic.warning.border,
          text: tokens.colors.semantic.warning.text,
        },
        error: {
          DEFAULT: tokens.colors.semantic.error.solid,
          bg: tokens.colors.semantic.error.bg,
          border: tokens.colors.semantic.error.border,
          text: tokens.colors.semantic.error.text,
        },
        info: {
          DEFAULT: tokens.colors.semantic.info.solid,
          bg: tokens.colors.semantic.info.bg,
          border: tokens.colors.semantic.info.border,
          text: tokens.colors.semantic.info.text,
        },
        
        // Efeitos
        glow: tokens.colors.effects,
        highlight: tokens.colors.effects.highlight,
        
        // Paleta de utilidade (mantida para flexibilidade)
        slate: {
          50: "#F8FAFC",
          100: "#F1F5F9",
          200: "#E2E8F0",
          300: "#CBD5E1",
          400: "#94A3B8",
          500: "#64748B",
          600: "#475569",
          700: "#334155",
          800: "#1E293B",
          900: "#0F172A",
          950: "#020617",
        },
      },
      
      // ========================================
      // TIPOGRAFIA
      // ========================================
      fontFamily: tokens.typography.fonts,
      fontSize: tokens.typography.sizes,

      // ========================================
      // ESPAÇAMENTO
      // ========================================
      spacing: {
        ...tokens.spacing,
        // Mantendo customizações específicas se necessário
        "4.5": "1.125rem",
        "5.5": "1.375rem",
        "18": "4.5rem",
        "22": "5.5rem",
      },

      // ========================================
      // BORDER RADIUS
      // ========================================
      borderRadius: tokens.radius,

      // ========================================
      // SOMBRAS
      // ========================================
      boxShadow: {
        ...tokens.shadows, // sm, md, lg, xl, 2xl, inner, card, etc
        'glow-blue': tokens.shadows.glowBlue,
        'glow-cyan': tokens.shadows.glowCyan,
        'glow-violet': tokens.shadows.glowViolet,
      },

      // ========================================
      // GRADIENTES
      // ========================================
      backgroundImage: tokens.gradients,

      // ========================================
      // ANIMAÇÕES E KEYFRAMES
      // ========================================
      animation: {
        "fade-in": "fadeIn 0.2s ease-out",
        "fade-in-up": "fadeInUp 0.3s ease-out forwards",
        "fade-in-down": "fadeInDown 0.3s ease-out forwards",
        "slide-in-right": "slideInRight 0.3s ease-out forwards",
        "slide-in-left": "slideInLeft 0.3s ease-out forwards",
        "scale-in": "scaleIn 0.2s ease-out forwards",
        "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
        "spin-slow": "spin 3s linear infinite",
        "float": "float 3s ease-in-out infinite",
        "shimmer": "shimmer 2s ease-in-out infinite",
        "gradient-border": "gradientBorder 4s ease infinite",
      },
      keyframes: {
        fadeIn: { from: { opacity: "0" }, to: { opacity: "1" } },
        fadeInUp: { from: { opacity: "0", transform: "translateY(10px)" }, to: { opacity: "1", transform: "translateY(0)" } },
        fadeInDown: { from: { opacity: "0", transform: "translateY(-10px)" }, to: { opacity: "1", transform: "translateY(0)" } },
        slideInRight: { from: { opacity: "0", transform: "translateX(20px)" }, to: { opacity: "1", transform: "translateX(0)" } },
        slideInLeft: { from: { opacity: "0", transform: "translateX(-20px)" }, to: { opacity: "1", transform: "translateX(0)" } },
        scaleIn: { from: { opacity: "0", transform: "scale(0.95)" }, to: { opacity: "1", transform: "scale(1)" } },
        float: { "0%, 100%": { transform: "translateY(0)" }, "50%": { transform: "translateY(-5px)" } },
        shimmer: { "0%": { "background-position": "-200% 0" }, "100%": { "background-position": "200% 0" } },
        gradientBorder: { "0%, 100%": { "background-position": "0% 50%" }, "50%": { "background-position": "100% 50%" } },
      },

      // ========================================
      // TRANSIÇÕES
      // ========================================
      transitionDuration: tokens.motion.duration,
      transitionTimingFunction: tokens.motion.easing,

      // ========================================
      // Z-INDEX
      // ========================================
      zIndex: Object.fromEntries(Object.entries(tokens.zIndex).map(([k, v]) => [k, String(v)])),
      
      // ========================================
      // BLUR
      // ========================================
      backdropBlur: {
        xs: "2px"
      },
    },
  },
  plugins: [],
};

export default config;
```

---
#### `tsconfig.json`

```
{
  "compilerOptions": {
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "target": "ES2017"
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}

```

====================================================================
## Branch: remotes/origin/claude/implement-pack-1-orion-g9WG7
====================================================================

### File Structure
```
.env.example
app/actions/github.ts
app/actions/settings.ts
app/actions/vercel.ts
app/api/ai/generate/route.ts
app/api/ai/stream/route.ts
app/api/approve/route.ts
app/api/config/keys/route.ts
app/api/config/test-key/route.ts
app/api/files/download/route.ts
app/api/files/list/route.ts
app/api/health/route.ts
app/api/images/generate/route.ts
app/api/inngest/route.ts
app/api/media/search/route.ts
app/api/models/route.ts
app/api/proposal/description/route.ts
app/api/proposal/rationale/route.ts
app/api/proposal/script/route.ts
app/api/proposal/soundtrack/route.ts
app/api/proposal/tags/route.ts
app/api/proposal/titles/route.ts
app/api/render/route.ts
app/api/research/route.ts
app/api/status/route.ts
app/api/storyboard/route.ts
app/api/system/health/route.ts
app/api/test-connection/route.ts
app/api/tts/route.ts
app/api/upload/route.ts
app/api/youtube/channel/route.ts
app/api/youtube/upload/route.ts
app/approve/[token]/page.tsx
app/approve/feedback-sent/page.tsx
app/approve/success/page.tsx
app/documentation/design-system/page.tsx
app/documentation/page.tsx
app/globals.css
app/layout.tsx
app/page.tsx
app/settings/page.tsx
app/step/1-input/page.tsx
app/step/2-research/page.tsx
app/step/4-proposal/page.tsx
app/step/5-studio/page.tsx
app/step/6-upload/page.tsx
app/workflow/page.tsx
components/AIModelSelector.tsx
components/ApiKeysModal.tsx
components/AssetCard.tsx
components/ConnectApisModal.tsx
components/FileDropzone.tsx
components/GuidelinesModal.tsx
components/Layout.tsx
components/ModelsExplorer.tsx
components/VercelToolbar.tsx
components/design-system/ColorSwatch.tsx
components/design-system/ComponentPreview.tsx
components/design-system/GradientCard.tsx
components/design-system/TypographySample.tsx
components/design-system/index.ts
components/documentation/AnimatedSection.tsx
components/documentation/CopyButton.tsx
components/documentation/CurrentStateTab.tsx
components/documentation/DecisionsTab.tsx
components/documentation/GenesisTab.tsx
components/documentation/IntegrationsTab.tsx
components/documentation/ShareButtons.tsx
components/documentation/SystemVisionTab.tsx
components/documentation/TechStackTab.tsx
components/documentation/content.ts
components/documentation/index.ts
components/proposal/ThumbnailEditor.tsx
components/settings/AppearanceTab.tsx
components/settings/DocsManagerTab.tsx
components/settings/FilesTab.tsx
components/settings/IntegrationsTab.tsx
components/settings/LogsTab.tsx
components/settings/ProfileTab.tsx
components/settings/SystemMonitorTab.tsx
components/studio/AIMediaGenerator.tsx
components/studio/MediaSearchModal.tsx
components/studio/MediaUploader.tsx
components/system/SystemStatus.tsx
components/ui/ActivityLog.tsx
components/ui/Badge.tsx
components/ui/Button.tsx
components/ui/Card.tsx
components/ui/Input.tsx
components/ui/Modal.tsx
components/ui/ProgressBar.tsx
components/ui/Select.tsx
components/ui/StepIndicator.tsx
components/ui/StreamingText.tsx
components/ui/Textarea.tsx
components/ui/Toggle.tsx
components/workflow/ModeSelector.tsx
lib/agents/adaptive-analysis-agent.ts
lib/agents/index.ts
lib/agents/research-agent.ts
lib/agents/script-agent.ts
lib/ai.ts
lib/api-keys-store.ts
lib/api-keys.ts
lib/branding.ts
lib/db/index.ts
lib/db/prisma.ts
lib/design-tokens.ts
lib/docs-manager.ts
lib/documentation-export.ts
lib/get-api-key.ts
lib/inngest/client.ts
lib/inngest/functions/video-pipeline.ts
lib/integration-tokens.ts
lib/logger.ts
lib/services/notification.service.ts
lib/services/render.service.ts
lib/services/research.service.ts
lib/services/script.service.ts
lib/services/spreadsheet.service.ts
lib/services/storyboard.service.ts
lib/services/upload.service.ts
lib/share-context.tsx
lib/store.ts
lib/system/api-registry.ts
lib/system/boot.ts
lib/user-profile.ts
lib/utils.ts
lib/workflow-logger.ts
lib/workflow-modes.ts
next.config.ts
package.json
prisma/schema.prisma
tailwind.config.ts
tsconfig.json
```

### File Content
---
#### `.env.example`

```
# YouTube API
YOUTUBE_API_KEY=
YOUTUBE_CHANNEL_ID=
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=

# AI Providers
OPENAI_API_KEY=
GOOGLE_GENERATIVE_AI_API_KEY=
ANTHROPIC_API_KEY=

# Media APIs
PEXELS_API_KEY=
PIXABAY_API_KEY=
UNSPLASH_ACCESS_KEY=

# Video Rendering
JSON2VIDEO_API_KEY=

# Optional: Text-to-Speech
ELEVENLABS_API_KEY=

# Optional: Research
TAVILY_API_KEY=

# Optional: Image Generation
REPLICATE_API_TOKEN=
STABILITY_API_KEY=

# GitHub Integration
GITHUB_TOKEN=

# Vercel Integration (for comments and deployments)
VERCEL_TOKEN=
VERCEL_PROJECT_ID=
VERCEL_TEAM_ID=

# Vercel Blob Storage (upload de arquivos - avatares, thumbnails, etc)
BLOB_READ_WRITE_TOKEN=

# Email Notifications (Resend - sistema de aprovação)
RESEND_API_KEY=
NOTIFICATION_EMAIL=

# Application URL (para links em emails e notificações)
NEXT_PUBLIC_URL=

# Vercel Toolbar - Habilita menções @Claude em produção
# Para funcionar em produção, configure também as variáveis acima
NEXT_PUBLIC_VERCEL_ENV=production

```

---
#### `app/actions/github.ts`

```
'use server';

import { getIntegrationTokens } from '@/lib/integration-tokens';
import type { GitHubCommit, GitHubCommitsResponse } from '@/types';

/**
 * Fetch recent commits from GitHub
 */
export async function fetchGitHubCommits(limit: number = 20): Promise<GitHubCommitsResponse> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.github) {
      return {
        commits: [],
        error: 'GitHub integration not configured',
      };
    }

    const { token, owner, repo } = tokens.github;

    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}/commits?per_page=${limit}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          Accept: 'application/vnd.github.v3+json',
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        commits: [],
        error: `GitHub API error: ${response.status} - ${errorText}`,
      };
    }

    const data = await response.json();

    interface GitHubAPICommit {
      sha: string;
      html_url: string;
      commit: {
        message: string;
        author: {
          name: string;
          date: string;
        };
      };
    }

    const commits: GitHubCommit[] = (data as GitHubAPICommit[]).map((commit) => ({
      sha: commit.sha.substring(0, 7),
      message: commit.commit.message,
      author: commit.commit.author.name,
      date: commit.commit.author.date,
      url: commit.html_url,
    }));

    return { commits };
  } catch (error) {
    console.error('Failed to fetch GitHub commits:', error);
    return {
      commits: [],
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Test GitHub connection
 */
export async function testGitHubConnection(): Promise<{ success: boolean; error?: string }> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.github) {
      return {
        success: false,
        error: 'GitHub integration not configured',
      };
    }

    const { token, owner, repo } = tokens.github;

    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          Accept: 'application/vnd.github.v3+json',
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        success: false,
        error: `GitHub API error: ${response.status} - ${errorText}`,
      };
    }

    return { success: true };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Generate auto-update changelog from recent commits
 */
export async function generateChangelogFromCommits(): Promise<string> {
  try {
    const { commits, error } = await fetchGitHubCommits(10);

    if (error || commits.length === 0) {
      return '# Changelog\n\nNenhum commit encontrado ou erro ao buscar dados.';
    }

    let changelog = '# Changelog Automático\n\n';
    changelog += `*Última atualização: ${new Date().toLocaleString('pt-BR')}*\n\n`;
    changelog += '## Commits Recentes\n\n';

    commits.forEach((commit) => {
      const date = new Date(commit.date).toLocaleDateString('pt-BR');
      changelog += `- **${date}** - ${commit.message} (${commit.author})\n`;
    });

    return changelog;
  } catch (error) {
    console.error('Failed to generate changelog:', error);
    return '# Changelog\n\nErro ao gerar changelog.';
  }
}

```

---
#### `app/actions/settings.ts`

```
'use server';

import {
  getUserProfile,
  updateUserProfile as updateProfileLib,
} from '@/lib/user-profile';
import {
  getAllDocs,
  getDocById,
  getDocsByCategory,
  getVisibleDocs,
  createDoc as createDocLib,
  updateDoc as updateDocLib,
  deleteDoc as deleteDocLib,
  reorderDocs as reorderDocsLib,
} from '@/lib/docs-manager';
import {
  getIntegrationTokens,
  updateGitHubTokens as updateGitHubLib,
  updateVercelTokens as updateVercelLib,
  removeGitHubTokens as removeGitHubLib,
  removeVercelTokens as removeVercelLib,
} from '@/lib/integration-tokens';
import {
  logSystemEvent,
  getSystemLogs,
  clearSystemLogs as clearLogsLib,
  searchLogs as searchLogsLib,
  getLogsByLevel,
  getLogsBySource,
} from '@/lib/logger';
import {
  getBrandingConfig as getBrandingLib,
  updateBrandingConfig as updateBrandingLib,
  resetBrandingConfig as resetBrandingLib,
} from '@/lib/branding';
import type { UserProfile, DocPage, DocCategory, IntegrationTokens, SystemLog, LogLevel, LogSource, BrandingConfig } from '@/types';

// ============================================
// User Profile Actions
// ============================================

export async function getProfile(): Promise<UserProfile> {
  return getUserProfile();
}

export async function updateProfile(
  updates: Partial<Omit<UserProfile, 'id' | 'createdAt'>>
): Promise<UserProfile> {
  const profile = await updateProfileLib(updates);
  await logSystemEvent('info', 'user', 'Perfil atualizado');
  return profile;
}

// ============================================
// Documentation Actions
// ============================================

export async function getDocs() {
  return getAllDocs();
}

export async function getDoc(id: string) {
  return getDocById(id);
}

export async function getDocsByCateg(category: DocCategory) {
  return getDocsByCategory(category);
}

export async function getVisibleDocsAction() {
  return getVisibleDocs();
}

export async function createDocPage(
  doc: Omit<DocPage, 'id' | 'createdAt' | 'updatedAt'>
): Promise<DocPage> {
  const newDoc = await createDocLib(doc);
  await logSystemEvent('success', 'system', `Nova página de documentação criada: ${newDoc.title}`);
  return newDoc;
}

export async function updateDocPage(
  id: string,
  updates: Partial<Omit<DocPage, 'id' | 'createdAt'>>
): Promise<DocPage | null> {
  const updatedDoc = await updateDocLib(id, updates);
  if (updatedDoc) {
    await logSystemEvent('info', 'system', `Página de documentação atualizada: ${updatedDoc.title}`);
  }
  return updatedDoc;
}

export async function deleteDocPage(id: string): Promise<boolean> {
  const success = await deleteDocLib(id);
  if (success) {
    await logSystemEvent('warning', 'system', `Página de documentação removida: ID ${id}`);
  }
  return success;
}

export async function reorderDocPages(docIds: string[]): Promise<void> {
  await reorderDocsLib(docIds);
  await logSystemEvent('info', 'system', 'Ordem das páginas de documentação atualizada');
}

// ============================================
// Integration Tokens Actions
// ============================================

export async function getTokens(): Promise<IntegrationTokens> {
  return getIntegrationTokens();
}

export async function saveGitHubTokens(
  token: string,
  owner: string,
  repo: string
): Promise<IntegrationTokens> {
  const tokens = await updateGitHubLib(token, owner, repo);
  await logSystemEvent('success', 'system', `Integração GitHub configurada: ${owner}/${repo}`);
  return tokens;
}

export async function saveVercelTokens(
  token: string,
  projectId: string
): Promise<IntegrationTokens> {
  const tokens = await updateVercelLib(token, projectId);
  await logSystemEvent('success', 'system', `Integração Vercel configurada: ${projectId}`);
  return tokens;
}

export async function removeGitHubTokensAction(): Promise<IntegrationTokens> {
  const tokens = await removeGitHubLib();
  await logSystemEvent('warning', 'system', 'Integração GitHub removida');
  return tokens;
}

export async function removeVercelTokensAction(): Promise<IntegrationTokens> {
  const tokens = await removeVercelLib();
  await logSystemEvent('warning', 'system', 'Integração Vercel removida');
  return tokens;
}

// ============================================
// Logs Actions
// ============================================

export async function getLogs(limit?: number): Promise<SystemLog[]> {
  return getSystemLogs(limit);
}

export async function clearLogs(): Promise<void> {
  await clearLogsLib();
  await logSystemEvent('warning', 'system', 'Logs do sistema limpos');
}

export async function searchSystemLogs(query: string): Promise<SystemLog[]> {
  return searchLogsLib(query);
}

export async function getLogsByLevelAction(level: LogLevel): Promise<SystemLog[]> {
  return getLogsByLevel(level);
}

export async function getLogsBySourceAction(source: LogSource): Promise<SystemLog[]> {
  return getLogsBySource(source);
}

export async function addLog(
  level: LogLevel,
  source: LogSource,
  message: string,
  details?: Record<string, unknown>
): Promise<void> {
  await logSystemEvent(level, source, message, details);
}

// ============================================
// Branding Actions (White Label)
// ============================================

export async function getBranding(): Promise<BrandingConfig> {
  return getBrandingLib();
}

export async function updateBranding(
  updates: Partial<Omit<BrandingConfig, 'updatedAt'>>
): Promise<BrandingConfig> {
  const config = await updateBrandingLib(updates);
  await logSystemEvent('success', 'system', `Configuração de branding atualizada: ${config.systemName}`);
  return config;
}

export async function resetBranding(): Promise<BrandingConfig> {
  const config = await resetBrandingLib();
  await logSystemEvent('info', 'system', 'Branding resetado para padrão ORION');
  return config;
}

```

---
#### `app/actions/vercel.ts`

```
'use server';

import { getIntegrationTokens } from '@/lib/integration-tokens';
import type { VercelDeployment, VercelDeploymentsResponse, VercelDeploymentState } from '@/types';

/**
 * Fetch recent deployments from Vercel
 */
export async function fetchVercelDeployments(limit: number = 20): Promise<VercelDeploymentsResponse> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.vercel) {
      return {
        deployments: [],
        error: 'Vercel integration not configured',
      };
    }

    const { token, projectId } = tokens.vercel;

    const response = await fetch(
      `https://api.vercel.com/v6/deployments?projectId=${projectId}&limit=${limit}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        deployments: [],
        error: `Vercel API error: ${response.status} - ${errorText}`,
      };
    }

    const data = await response.json();

    interface VercelAPIDeployment {
      uid: string;
      name: string;
      url: string;
      state: string;
      createdAt: number;
      readyState: string;
    }

    interface VercelAPIResponse {
      deployments: VercelAPIDeployment[];
    }

    const deployments: VercelDeployment[] = (data as VercelAPIResponse).deployments.map((deployment) => ({
      uid: deployment.uid,
      name: deployment.name,
      url: deployment.url,
      state: deployment.state as VercelDeploymentState,
      createdAt: deployment.createdAt,
      readyState: deployment.readyState,
    }));

    return { deployments };
  } catch (error) {
    console.error('Failed to fetch Vercel deployments:', error);
    return {
      deployments: [],
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Test Vercel connection
 */
export async function testVercelConnection(): Promise<{ success: boolean; error?: string }> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.vercel) {
      return {
        success: false,
        error: 'Vercel integration not configured',
      };
    }

    const { token } = tokens.vercel;

    const response = await fetch(
      'https://api.vercel.com/v2/user',
      {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        success: false,
        error: `Vercel API error: ${response.status} - ${errorText}`,
      };
    }

    return { success: true };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Get deployment status summary
 */
export async function getDeploymentSummary(): Promise<{
  total: number;
  ready: number;
  error: number;
  building: number;
}> {
  try {
    const { deployments } = await fetchVercelDeployments(50);

    const summary = {
      total: deployments.length,
      ready: deployments.filter(d => d.state === 'READY').length,
      error: deployments.filter(d => d.state === 'ERROR').length,
      building: deployments.filter(d => d.state === 'BUILDING').length,
    };

    return summary;
  } catch (error) {
    console.error('Failed to get deployment summary:', error);
    return {
      total: 0,
      ready: 0,
      error: 0,
      building: 0,
    };
  }
}

```

---
#### `app/api/ai/generate/route.ts`

```
import { createGoogleGenerativeAI } from '@ai-sdk/google';
import { createAnthropic } from '@ai-sdk/anthropic';
import { createOpenAI } from '@ai-sdk/openai';
import { streamObject } from 'ai';
import { z } from 'zod';

// Configuração segura dos provedores
const google = createGoogleGenerativeAI({ apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY });
const anthropic = createAnthropic({ apiKey: process.env.ANTHROPIC_API_KEY });
const openai = createOpenAI({ apiKey: process.env.OPENAI_API_KEY });

export const maxDuration = 60; // Permite gerações longas (Deep Research)

export async function POST(req: Request) {
  try {
    const { model, inputData, stepsData } = await req.json();

    // 1. Validação de Chaves (Para você ver o erro real se houver)
    if (model.includes('claude') && !process.env.ANTHROPIC_API_KEY) {
      throw new Error('ERRO CRÍTICO: Chave da Anthropic (ANTHROPIC_API_KEY) não encontrada no servidor.');
    }

    // 2. Seleção do Modelo Inteligente
    let selectedModel;
    if (model === 'gemini-2.0-flash') selectedModel = google('models/gemini-2.0-flash-exp');
    else if (model === 'gpt-4o') selectedModel = openai('gpt-4o');
    else if (model === 'claude-3-5-sonnet') selectedModel = anthropic('claude-3-5-sonnet-20240620');
    else selectedModel = google('models/gemini-1.5-flash'); // Fallback

    // 3. Montagem do Contexto "Deep Research" (Cruza Dados)
    const contextPrompt = `
      VOCÊ É UM ESTRATEGISTA DE YOUTUBE SÊNIOR E ESPECIALISTA EM DADOS.
      
      *** REGRA SUPREMA: A RESPOSTA DEVE SER 100% EM PORTUGUÊS DO BRASIL (PT-BR) ***
      
      SEU OBJETIVO:
      Realizar uma análise profunda, baseada em evidências, cruzando os dados internos do canal com tendências de mercado.
      
      DADOS DE ENTRADA (Analise tudo):
      - Métricas do Canal (CSV/JSON): ${JSON.stringify(inputData)}
      - Histórico/Steps Anteriores: ${JSON.stringify(stepsData)}
      
      DIRETRIZES DE ANÁLISE (Deep Research):
      1. NÃO seja genérico. Use números exatos dos dados fornecidos.
      2. Cruze a taxa de clique (CTR) com os títulos atuais e sugira melhorias específicas.
      3. Identifique padrões de retenção se houver dados de watchtime.
      4. Compare o desempenho do tema atual com a média do canal.
      
      ESTRUTURA DA RESPOSTA (JSON):
      Retorne um objeto JSON estrito com:
      - analise_interna: { pontos_fortes, pontos_fracos, padroes_ocultos }
      - analise_externa: { oportunidades_mercado, concorrencia, trends_atuais }
      - estrategia_sugerida: { titulo_matador, ideia_thumbnail, gancho_roteiro }
      - justificativa_baseada_em_dados: "Por que escolhi isso?"
    `;

    // 4. Geração com Estrutura Garantida (Zod)
    const result = await streamObject({
      model: selectedModel,
      system: "Você é um consultor expert de YouTube. Fale Português.",
      prompt: contextPrompt,
      schema: z.object({
        analise_interna: z.object({
          pontos_fortes: z.array(z.string()),
          pontos_fracos: z.array(z.string()),
          padroes_ocultos: z.string(),
        }),
        analise_externa: z.object({
          oportunidades_mercado: z.array(z.string()),
          trends_atuais: z.array(z.string()),
        }),
        estrategia: z.object({
          titulo_sugerido: z.string(),
          ideia_thumbnail: z.string(),
          explicacao_tecnica: z.string(),
        }),
      }),
    });

    return result.toTextStreamResponse();

  } catch (error) {
    console.error("ERRO NA GERAÇÃO:", error);
    const message = error instanceof Error ? error.message : 'Unknown error';
    return new Response(JSON.stringify({ error: message }), { status: 500 });
  }
}
```

---
#### `app/api/ai/stream/route.ts`

```
import { NextRequest } from "next/server";
import { streamText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      provider,
      model,
      systemPrompt,
      userPrompt,
      temperature = 0.7,
    } = body as {
      provider: AIProvider;
      model: string;
      systemPrompt: string;
      userPrompt: string;
      temperature?: number;
    };

    if (!provider || !model || !userPrompt) {
      return new Response(
        JSON.stringify({ error: "Missing required fields" }),
        { status: 400, headers: { "Content-Type": "application/json" } }
      );
    }

    // Get the appropriate model based on provider
    let aiModel;
    switch (provider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "OpenAI API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Google API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Anthropic API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = anthropic(model);
        break;
      default:
        return new Response(
          JSON.stringify({ error: `Unknown provider: ${provider}` }),
          { status: 400, headers: { "Content-Type": "application/json" } }
        );
    }

    const result = streamText({
      model: aiModel,
      system: systemPrompt,
      prompt: userPrompt,
      temperature,
    });

    return result.toTextStreamResponse();
  } catch (error) {
    console.error("AI Streaming error:", error);
    return new Response(
      JSON.stringify({ error: error instanceof Error ? error.message : "AI streaming failed" }),
      { status: 500, headers: { "Content-Type": "application/json" } }
    );
  }
}

```

---
#### `app/api/approve/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@/lib/db';
import { inngest } from '@/lib/inngest/client';

/**
 * POST /api/approve
 * Approve a pending script via token
 */
export async function POST(request: NextRequest) {
  try {
    const { token, action, feedback } = await request.json();

    if (!token) {
      return NextResponse.json(
        { error: 'Token is required' },
        { status: 400 }
      );
    }

    // Find workflow state by token
    const workflowState = await prisma.workflowState.findUnique({
      where: { approvalToken: token },
      include: {
        project: {
          include: { script: true },
        },
      },
    });

    if (!workflowState) {
      return NextResponse.json(
        { error: 'Invalid or expired token' },
        { status: 404 }
      );
    }

    if (workflowState.project.status !== 'AWAITING_APPROVAL') {
      return NextResponse.json(
        { error: 'Project is not awaiting approval' },
        { status: 400 }
      );
    }

    if (action === 'approve') {
      // Update project status
      await prisma.project.update({
        where: { id: workflowState.projectId },
        data: { status: 'APPROVED' },
      });

      // Update script as approved
      await prisma.script.update({
        where: { projectId: workflowState.projectId },
        data: {
          approved: true,
          approvedAt: new Date(),
        },
      });

      // Send approval event to Inngest to continue workflow
      await inngest.send({
        name: 'project/approved',
        data: {
          projectId: workflowState.projectId,
          feedback: feedback || undefined,
        },
      });

      return NextResponse.json({
        success: true,
        message: 'Script approved successfully',
        projectId: workflowState.projectId,
      });
    } else if (action === 'request_changes') {
      // Update script with feedback
      await prisma.script.update({
        where: { projectId: workflowState.projectId },
        data: {
          feedback: feedback || 'Changes requested',
        },
      });

      // Update workflow state
      await prisma.workflowState.update({
        where: { projectId: workflowState.projectId },
        data: {
          currentStep: 'script_revision',
        },
      });

      return NextResponse.json({
        success: true,
        message: 'Feedback submitted for revision',
        projectId: workflowState.projectId,
      });
    }

    return NextResponse.json(
      { error: 'Invalid action' },
      { status: 400 }
    );
  } catch (error) {
    console.error('[Approve API] Error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

/**
 * GET /api/approve?token=xxx
 * Get project details for approval page
 */
export async function GET(request: NextRequest) {
  try {
    const token = request.nextUrl.searchParams.get('token');

    if (!token) {
      return NextResponse.json(
        { error: 'Token is required' },
        { status: 400 }
      );
    }

    const workflowState = await prisma.workflowState.findUnique({
      where: { approvalToken: token },
      include: {
        project: {
          include: {
            script: true,
            research: true,
          },
        },
      },
    });

    if (!workflowState) {
      return NextResponse.json(
        { error: 'Invalid or expired token' },
        { status: 404 }
      );
    }

    return NextResponse.json({
      project: {
        id: workflowState.project.id,
        name: workflowState.project.name,
        topic: workflowState.project.topic,
        status: workflowState.project.status,
      },
      script: workflowState.project.script
        ? {
            title: workflowState.project.script.title,
            content: workflowState.project.script.content,
            sections: workflowState.project.script.sections,
          }
        : null,
      research: workflowState.project.research
        ? {
            summary: workflowState.project.research.summary,
          }
        : null,
      workflow: {
        currentStep: workflowState.currentStep,
        approvalSentAt: workflowState.approvalSentAt,
      },
    });
  } catch (error) {
    console.error('[Approve API] Error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/config/keys/route.ts`

```
import { NextResponse } from "next/server";
import { APIKeyStatus } from "@/types";

export async function GET() {
  const status: APIKeyStatus = {
    youtube: !!(process.env.YOUTUBE_API_KEY && process.env.YOUTUBE_CHANNEL_ID),
    openai: !!process.env.OPENAI_API_KEY,
    google: !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    unsplash: !!process.env.UNSPLASH_ACCESS_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    replicate: !!process.env.REPLICATE_API_TOKEN,
    stability: !!process.env.STABILITY_API_KEY,
  };

  return NextResponse.json(status);
}

```

---
#### `app/api/config/test-key/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic'; // Força o Next.js a não cachear esse teste

export async function POST(req: Request) {
  try {
    // 1. Recebe os dados de forma segura
    const body = await req.json();
    
    // Normaliza os nomes dos campos (aceita tanto o formato novo quanto o antigo)
    const provider = body.provider || body.service || body.id; 
    let key = body.key || body.keyValue || body.apiKey;

    // Se a chave não veio no corpo, tenta pegar das variáveis de ambiente (Servidor)
    if (!key && provider) {
       const envKeyName = provider.toUpperCase().includes('KEY') 
         ? provider.toUpperCase() 
         : `${provider.toUpperCase()}_API_KEY`;
       key = process.env[envKeyName];
    }

    // Se ainda não tem chave, erro.
    if (!key) {
      return NextResponse.json(
        { error: 'Nenhuma chave fornecida e nenhuma encontrada no servidor.' },
        { status: 400 }
      );
    }

    console.log(`[Test-Key] Testando conexão para: ${provider}...`);
    let isValid = false;
    let details = "";

    // 2. Lógica de Teste Simplificada (Usa FETCH nativo para não depender de libs)
    switch (provider) {
      case 'openai':
        // Teste leve na API da OpenAI
        const openaiRes = await fetch('https://api.openai.com/v1/models?limit=1', {
          headers: { 'Authorization': `Bearer ${key}` }
        });
        isValid = openaiRes.ok;
        if (!isValid) details = "API recusou a chave (401/403)";
        break;
      
      case 'google':
        // Teste para Google Gemini (Generative Language API)
        // Usa pageSize=1 para ser leve
        const geminiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}&pageSize=1`);
        isValid = geminiRes.ok;
        if (!isValid) {
             const err = await geminiRes.json();
             details = err.error?.message || "Erro na API do Google Gemini";
        }
        break;

      case 'youtube':
        // Teste na API do YouTube otimizado para economizar cota (1 unidade vs 100 unidades do search)
        // chart=mostPopular não requer autenticação de usuário, apenas a chave de API
        const ytRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${key}`);
        isValid = ytRes.ok;
        if (!isValid) {
            const err = await ytRes.json();
            details = err.error?.message || "Erro na API do YouTube";
        }
        break;
      
      case 'anthropic':
        // Teste na API da Anthropic
        const anthropicRes = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
                'x-api-key': key,
                'anthropic-version': '2023-06-01',
                'content-type': 'application/json'
            },
            body: JSON.stringify({
                model: "claude-3-haiku-20240307",
                max_tokens: 1,
                messages: [{ role: "user", content: "Hi" }]
            })
        });
        // Anthropic pode retornar 400 se o corpo for ruim, mas 401 se a chave for ruim.
        // Se passar do 401, a chave existe.
        isValid = anthropicRes.status !== 401 && anthropicRes.status !== 403;
        break;

      case 'pexels':
        const pexelsRes = await fetch('https://api.pexels.com/v1/curated?per_page=1', {
            headers: { 'Authorization': key }
        });
        isValid = pexelsRes.ok;
        break;

      case 'pixabay':
        const pixabayRes = await fetch(`https://pixabay.com/api/?key=${key}&q=test`);
        isValid = pixabayRes.ok;
        break;

      case 'json2video':
        const j2vRes = await fetch('https://api.json2video.com/v2/movie', {
            headers: { 'x-api-key': key }
        });
        // JSON2Video: 401 = Chave inválida. 
        // 405 (Method Not Allowed) ou 200 = Chave válida (passou da autenticação).
        isValid = j2vRes.status !== 401 && j2vRes.status !== 403;
        break;

      case 'elevenlabs':
        const elevenRes = await fetch('https://api.elevenlabs.io/v1/user', {
            headers: { 'xi-api-key': key }
        });
        isValid = elevenRes.ok;
        break;

      case 'tavily':
         // Teste real na API do Tavily (custará 1 crédito, mas garante a conexão)
         const tavilyRes = await fetch('https://api.tavily.com/search', {
             method: 'POST',
             headers: { 'Content-Type': 'application/json' },
             body: JSON.stringify({ api_key: key, query: "test", max_results: 1 })
         });
         isValid = tavilyRes.ok;
         if (!isValid) details = "Erro na API do Tavily (Chave inválida ou sem créditos)";
         break;

      default:
        // Fallback para serviços desconhecidos
        console.warn(`[Test-Key] Serviço desconhecido ${provider}, assumindo válido.`);
        isValid = true;
        details = "Serviço não verificado, formato aceito.";
    }

    // 3. Retorno
    if (isValid) {
      return NextResponse.json({ success: true, message: "Conexão estabelecida com sucesso!", details });
    } else {
      console.error(`[Test-Key] Falha para ${provider}: ${details}`);
      return NextResponse.json({ error: "A chave informada é inválida ou expirou.", details }, { status: 401 });
    }

  } catch (error) {
    console.error("Erro interno no teste de API:", error);
    const message = error instanceof Error ? error.message : "Erro interno no servidor";
    return NextResponse.json({ error: message }, { status: 500 });
  }
}
```

---
#### `app/api/files/download/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import fs from 'fs/promises';
import path from 'path';

export const dynamic = 'force-dynamic';

/**
 * GET /api/files/download?path=relative/path/to/file.json
 * Downloads a file from the data directory
 */
export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams;
    const relativePath = searchParams.get('path');

    if (!relativePath) {
      return NextResponse.json(
        { error: 'Missing path parameter' },
        { status: 400 }
      );
    }

    // Base directory - data folder
    const baseDir = path.join(process.cwd(), 'data');
    const filePath = path.join(baseDir, relativePath);

    // Security: prevent path traversal attacks
    if (!filePath.startsWith(baseDir)) {
      return NextResponse.json(
        { error: 'Invalid path' },
        { status: 403 }
      );
    }

    // Check if file exists
    try {
      const stats = await fs.stat(filePath);
      if (!stats.isFile()) {
        return NextResponse.json(
          { error: 'Path is not a file' },
          { status: 400 }
        );
      }
    } catch {
      return NextResponse.json(
        { error: 'File not found' },
        { status: 404 }
      );
    }

    // Read file
    const fileBuffer = await fs.readFile(filePath);
    const fileName = path.basename(filePath);

    // Determine content type
    const ext = path.extname(filePath).toLowerCase();
    let contentType = 'application/octet-stream';

    const contentTypes: Record<string, string> = {
      '.json': 'application/json',
      '.txt': 'text/plain',
      '.csv': 'text/csv',
      '.xml': 'application/xml',
      '.pdf': 'application/pdf',
      '.png': 'image/png',
      '.jpg': 'image/jpeg',
      '.jpeg': 'image/jpeg',
      '.gif': 'image/gif',
      '.svg': 'image/svg+xml',
      '.mp4': 'video/mp4',
      '.webm': 'video/webm',
      '.mp3': 'audio/mpeg',
      '.wav': 'audio/wav',
      '.zip': 'application/zip',
    };

    if (ext in contentTypes) {
      contentType = contentTypes[ext];
    }

    // Return file with appropriate headers
    return new NextResponse(fileBuffer, {
      headers: {
        'Content-Type': contentType,
        'Content-Disposition': `attachment; filename="${fileName}"`,
        'Content-Length': fileBuffer.length.toString(),
      },
    });
  } catch (error) {
    console.error('Failed to download file:', error);
    return NextResponse.json(
      { error: 'Failed to download file' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/files/list/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { list } from '@vercel/blob';
import type { DirectoryListing, FileEntry } from '@/types';

export const dynamic = 'force-dynamic';

/**
 * GET /api/files/list
 * Lists files from Vercel Blob storage
 */
export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams;
    const prefix = searchParams.get('path') || '';

    // List blobs with optional prefix (folder simulation)
    const { blobs } = await list({
      prefix: prefix ? `${prefix}/` : undefined,
      limit: 1000,
    });

    // Transform blobs into file entries
    const fileEntries: FileEntry[] = blobs.map((blob) => {
      // Extract filename from pathname
      const pathParts = blob.pathname.split('/');
      const name = pathParts[pathParts.length - 1];

      return {
        name,
        path: blob.pathname,
        type: 'file' as const,
        size: blob.size,
        modifiedAt: blob.uploadedAt.toISOString(),
        url: blob.url,
      };
    });

    // Group by folders to simulate directory structure
    const folders = new Set<string>();
    fileEntries.forEach((entry) => {
      const parts = entry.path.split('/');
      if (parts.length > 1) {
        // Add parent folders
        for (let i = 1; i < parts.length; i++) {
          const folderPath = parts.slice(0, i).join('/');
          if (folderPath && !prefix.startsWith(folderPath)) {
            folders.add(folderPath);
          }
        }
      }
    });

    // Filter entries based on current path
    let filteredEntries = fileEntries;
    if (prefix) {
      // Only show files directly in this "folder"
      filteredEntries = fileEntries.filter((entry) => {
        const relativePath = entry.path.replace(`${prefix}/`, '');
        return entry.path.startsWith(`${prefix}/`) && !relativePath.includes('/');
      });
    } else {
      // At root, show only top-level files and folders
      const topLevelFolders = new Set<string>();
      fileEntries.forEach((entry) => {
        const parts = entry.path.split('/');
        if (parts.length > 1) {
          topLevelFolders.add(parts[0]);
        }
      });

      // Add folder entries
      const folderEntries: FileEntry[] = Array.from(topLevelFolders).map((folder) => ({
        name: folder,
        path: folder,
        type: 'directory' as const,
        modifiedAt: new Date().toISOString(),
      }));

      // Keep only top-level files
      filteredEntries = fileEntries.filter((entry) => !entry.path.includes('/'));
      filteredEntries = [...folderEntries, ...filteredEntries];
    }

    // Sort: directories first, then alphabetically
    filteredEntries.sort((a, b) => {
      if (a.type !== b.type) {
        return a.type === 'directory' ? -1 : 1;
      }
      return a.name.localeCompare(b.name);
    });

    const response: DirectoryListing = {
      path: prefix,
      entries: filteredEntries,
      totalSize: blobs.reduce((acc, blob) => acc + blob.size, 0),
      totalFiles: blobs.length,
    };

    return NextResponse.json(response);
  } catch (error) {
    console.error('Failed to list files:', error);

    // If Vercel Blob is not configured, return empty list with message
    if (error instanceof Error && error.message.includes('BLOB_READ_WRITE_TOKEN')) {
      return NextResponse.json({
        path: '',
        entries: [],
        totalSize: 0,
        totalFiles: 0,
        message: 'Vercel Blob not configured. Add BLOB_READ_WRITE_TOKEN to environment variables.',
      });
    }

    return NextResponse.json(
      { error: 'Failed to list files' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/health/route.ts`

```
import { NextResponse } from "next/server";
import { systemBoot } from "@/lib/system/boot";

export async function GET() {
  const report = await systemBoot();
  return NextResponse.json(report);
}

```

---
#### `app/api/images/generate/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ImageProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { prompt, provider } = body as { prompt: string; provider: ImageProvider };

    if (!prompt || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: prompt, provider" },
        { status: 400 }
      );
    }

    let imageUrl: string;

    switch (provider) {
      case "dalle": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/images/generations", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "dall-e-3",
            prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look, 16:9 aspect ratio.`,
            n: 1,
            size: "1792x1024",
            quality: "standard",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "DALL-E generation failed");
        }

        const data = await response.json();
        imageUrl = data.data[0].url;
        break;
      }

      case "stability": {
        const apiKey = process.env.STABILITY_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Stability API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch(
          "https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/text-to-image",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify({
              text_prompts: [
                {
                  text: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
                  weight: 1,
                },
              ],
              cfg_scale: 7,
              width: 1344,
              height: 768,
              samples: 1,
              steps: 30,
            }),
          }
        );

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.message || "Stability generation failed");
        }

        const data = await response.json();
        const base64Image = data.artifacts[0].base64;
        imageUrl = `data:image/png;base64,${base64Image}`;
        break;
      }

      case "replicate": {
        const apiToken = process.env.REPLICATE_API_TOKEN;
        if (!apiToken) {
          return NextResponse.json(
            { error: "Replicate API token not configured" },
            { status: 400 }
          );
        }

        // Create prediction
        const createResponse = await fetch("https://api.replicate.com/v1/predictions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Token ${apiToken}`,
          },
          body: JSON.stringify({
            version: "39ed52f2a78e934b3ba6e2a89f5b1c712de7dfea535525255b1aa35c5565e08b",
            input: {
              prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
              width: 1344,
              height: 768,
              num_outputs: 1,
            },
          }),
        });

        if (!createResponse.ok) {
          throw new Error("Replicate prediction creation failed");
        }

        const prediction = await createResponse.json();
        let result = prediction;

        // Poll for completion
        while (result.status !== "succeeded" && result.status !== "failed") {
          await new Promise((resolve) => setTimeout(resolve, 1000));
          const statusResponse = await fetch(
            `https://api.replicate.com/v1/predictions/${result.id}`,
            {
              headers: {
                Authorization: `Token ${apiToken}`,
              },
            }
          );
          result = await statusResponse.json();
        }

        if (result.status === "failed") {
          throw new Error("Replicate generation failed");
        }

        imageUrl = result.output[0];
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown provider: ${provider}` },
          { status: 400 }
        );
    }

    return NextResponse.json({ imageUrl, provider });
  } catch (error) {
    console.error("Image generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Image generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/inngest/route.ts`

```
import { serve } from 'inngest/next';
import { inngest } from '@/lib/inngest/client';
import { functions } from '@/lib/inngest/functions/video-pipeline';

// Create and export the Inngest handler
export const { GET, POST, PUT } = serve({
  client: inngest,
  functions,
});

```

---
#### `app/api/media/search/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { MediaSource, MediaItem } from "@/types";
import { v4 as uuidv4 } from "uuid";

interface PexelsVideo {
  id: number;
  url: string;
  image: string;
  duration: number;
  video_files: Array<{
    id: number;
    quality: string;
    file_type: string;
    width: number;
    height: number;
    link: string;
  }>;
  user: { name: string };
}

interface PexelsPhoto {
  id: number;
  url: string;
  src: { original: string; medium: string };
  photographer: string;
}

interface PixabayHit {
  id: number;
  pageURL: string;
  webformatURL: string;
  largeImageURL: string;
  duration?: number;
  videos?: {
    medium: { url: string };
  };
  user: string;
}

interface UnsplashResult {
  id: string;
  urls: { regular: string; full: string };
  user: { name: string };
  links: { html: string };
}

async function searchPexelsVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/videos/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.videos?.map((video: PexelsVideo) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: video.id.toString(),
      url: video.video_files.find((f) => f.quality === "hd")?.link || video.video_files[0]?.link || "",
      previewUrl: video.image,
      type: "video" as const,
      duration: video.duration,
      attribution: `Pexels - ${video.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Pexels search error:", error);
    return [];
  }
}

async function searchPexelsPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.photos?.map((photo: PexelsPhoto) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: photo.id.toString(),
      url: photo.src.original,
      previewUrl: photo.src.medium,
      type: "image" as const,
      duration: null,
      attribution: `Pexels - ${photo.photographer}`,
    })) || [];
  } catch (error) {
    console.error("Pexels photos search error:", error);
    return [];
  }
}

async function searchPixabayVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/videos/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.videos?.medium?.url || "",
      previewUrl: hit.webformatURL || `https://i.vimeocdn.com/video/${hit.id}_640x360.jpg`,
      type: "video" as const,
      duration: hit.duration || null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay search error:", error);
    return [];
  }
}

async function searchPixabayPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12&image_type=photo`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.largeImageURL,
      previewUrl: hit.webformatURL,
      type: "image" as const,
      duration: null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay photos search error:", error);
    return [];
  }
}

async function searchUnsplash(query: string): Promise<MediaItem[]> {
  const accessKey = process.env.UNSPLASH_ACCESS_KEY;
  if (!accessKey) return [];

  try {
    const response = await fetch(
      `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: `Client-ID ${accessKey}` },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.results?.map((result: UnsplashResult) => ({
      id: uuidv4(),
      source: "unsplash" as MediaSource,
      sourceId: result.id,
      url: result.urls.full,
      previewUrl: result.urls.regular,
      type: "image" as const,
      duration: null,
      attribution: `Unsplash - ${result.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Unsplash search error:", error);
    return [];
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { query, sources, mediaType } = body as {
      query: string;
      sources?: MediaSource[];
      mediaType?: "video" | "image" | "all";
    };

    if (!query) {
      return NextResponse.json(
        { error: "Missing required field: query" },
        { status: 400 }
      );
    }

    const requestedSources = sources || ["pexels", "pixabay", "unsplash"];
    const type = mediaType || "all";
    const results: MediaItem[] = [];

    // Run searches in parallel
    const searchPromises: Promise<MediaItem[]>[] = [];

    if (requestedSources.includes("pexels")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPexelsVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPexelsPhotos(query));
      }
    }

    if (requestedSources.includes("pixabay")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPixabayVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPixabayPhotos(query));
      }
    }

    if (requestedSources.includes("unsplash")) {
      if (type === "all" || type === "image") {
        searchPromises.push(searchUnsplash(query));
      }
    }

    const searchResults = await Promise.all(searchPromises);
    searchResults.forEach((items) => results.push(...items));

    return NextResponse.json({ results });
  } catch (error) {
    console.error("Media search error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Media search failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/models/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

// Definição dos modelos por provedor
const MODELS_DATABASE = {
  openai: {
    name: 'OpenAI',
    icon: '🤖',
    categories: [
      {
        name: 'Modelos de Vanguarda',
        description: 'Os modelos mais avançados da OpenAI',
        models: [
          { id: 'gpt-4o', name: 'GPT-4o', description: 'Modelo multimodal rápido e inteligente', isNew: false },
          { id: 'gpt-4o-mini', name: 'GPT-4o Mini', description: 'Versão econômica do GPT-4o', isNew: false },
          { id: 'gpt-4-turbo', name: 'GPT-4 Turbo', description: 'Modelo de alta inteligência com contexto de 128k', isNew: false },
          { id: 'gpt-4', name: 'GPT-4', description: 'Modelo GPT de alta inteligência', isNew: false },
          { id: 'gpt-3.5-turbo', name: 'GPT-3.5 Turbo', description: 'Modelo rápido e econômico', isNew: false },
        ]
      },
      {
        name: 'Modelos de Imagem',
        description: 'Para geração de imagens',
        models: [
          { id: 'dall-e-3', name: 'DALL-E 3', description: 'Geração de imagens de última geração', isNew: false },
          { id: 'dall-e-2', name: 'DALL-E 2', description: 'Geração de imagens anterior', isNew: false },
        ]
      },
      {
        name: 'Modelos de Áudio',
        description: 'Para transcrição e texto-para-fala',
        models: [
          { id: 'whisper-1', name: 'Whisper', description: 'Reconhecimento de fala', isNew: false },
          { id: 'tts-1', name: 'TTS-1', description: 'Texto para fala (velocidade)', isNew: false },
          { id: 'tts-1-hd', name: 'TTS-1 HD', description: 'Texto para fala (qualidade)', isNew: false },
        ]
      },
      {
        name: 'Modelos de Embedding',
        description: 'Para representação vetorial de texto',
        models: [
          { id: 'text-embedding-3-large', name: 'Embedding 3 Large', description: 'Maior capacidade de embedding', isNew: false },
          { id: 'text-embedding-3-small', name: 'Embedding 3 Small', description: 'Embedding econômico', isNew: false },
          { id: 'text-embedding-ada-002', name: 'Ada 002', description: 'Modelo de embedding anterior', isNew: false },
        ]
      }
    ]
  },
  anthropic: {
    name: 'Anthropic',
    icon: '🔮',
    categories: [
      {
        name: 'Claude 3.5',
        description: 'A mais nova geração do Claude',
        models: [
          { id: 'claude-3-5-sonnet-20241022', name: 'Claude 3.5 Sonnet', description: 'Melhor equilíbrio entre velocidade e inteligência', isNew: true },
          { id: 'claude-3-5-haiku-20241022', name: 'Claude 3.5 Haiku', description: 'Resposta mais rápida e econômica', isNew: true },
        ]
      },
      {
        name: 'Claude 3',
        description: 'Modelos Claude 3',
        models: [
          { id: 'claude-3-opus-20240229', name: 'Claude 3 Opus', description: 'Modelo mais inteligente para tarefas complexas', isNew: false },
          { id: 'claude-3-sonnet-20240229', name: 'Claude 3 Sonnet', description: 'Equilíbrio entre inteligência e velocidade', isNew: false },
          { id: 'claude-3-haiku-20240307', name: 'Claude 3 Haiku', description: 'Respostas rápidas e econômicas', isNew: false },
        ]
      }
    ]
  },
  gemini: {
    name: 'Google Gemini',
    icon: '🧠',
    categories: [
      {
        name: 'Gemini 2.0',
        description: 'A mais nova geração do Gemini',
        models: [
          { id: 'gemini-2.0-flash-exp', name: 'Gemini 2.0 Flash', description: 'Modelo experimental rápido', isNew: true },
        ]
      },
      {
        name: 'Gemini 1.5',
        description: 'Modelos Gemini 1.5 com contexto longo',
        models: [
          { id: 'gemini-1.5-pro', name: 'Gemini 1.5 Pro', description: 'Melhor desempenho, contexto de 2M tokens', isNew: false },
          { id: 'gemini-1.5-flash', name: 'Gemini 1.5 Flash', description: 'Rápido e eficiente', isNew: false },
          { id: 'gemini-1.5-flash-8b', name: 'Gemini 1.5 Flash 8B', description: 'Versão mais leve e rápida', isNew: false },
        ]
      },
      {
        name: 'Gemini 1.0',
        description: 'Modelos Gemini 1.0',
        models: [
          { id: 'gemini-1.0-pro', name: 'Gemini 1.0 Pro', description: 'Modelo de geração anterior', isNew: false },
        ]
      }
    ]
  },
  elevenlabs: {
    name: 'ElevenLabs',
    icon: '🎤',
    categories: [
      {
        name: 'Modelos de Voz',
        description: 'Síntese de voz de alta qualidade',
        models: [
          { id: 'eleven_multilingual_v2', name: 'Multilingual v2', description: 'Suporte a 29 idiomas incluindo português', isNew: true },
          { id: 'eleven_turbo_v2_5', name: 'Turbo v2.5', description: 'Baixa latência para streaming', isNew: true },
          { id: 'eleven_turbo_v2', name: 'Turbo v2', description: 'Modelo otimizado para velocidade', isNew: false },
          { id: 'eleven_multilingual_v1', name: 'Multilingual v1', description: 'Suporte multilíngue original', isNew: false },
          { id: 'eleven_monolingual_v1', name: 'Monolingual v1', description: 'Otimizado para inglês', isNew: false },
        ]
      }
    ]
  },
  pexels: {
    name: 'Pexels',
    icon: '📷',
    categories: [
      {
        name: 'Recursos',
        description: 'APIs disponíveis',
        models: [
          { id: 'photos', name: 'Fotos', description: 'Banco de fotos gratuitas de alta qualidade', isNew: false },
          { id: 'videos', name: 'Vídeos', description: 'Banco de vídeos gratuitos de alta qualidade', isNew: false },
        ]
      }
    ]
  },
  pixabay: {
    name: 'Pixabay',
    icon: '🖼️',
    categories: [
      {
        name: 'Recursos',
        description: 'APIs disponíveis',
        models: [
          { id: 'images', name: 'Imagens', description: 'Fotos e ilustrações gratuitas', isNew: false },
          { id: 'videos', name: 'Vídeos', description: 'Vídeos gratuitos', isNew: false },
        ]
      }
    ]
  },
  youtube: {
    name: 'YouTube',
    icon: '📺',
    categories: [
      {
        name: 'APIs',
        description: 'APIs do YouTube Data v3',
        models: [
          { id: 'data-v3', name: 'YouTube Data API v3', description: 'Gerenciar vídeos, playlists, canais', isNew: false },
          { id: 'analytics', name: 'YouTube Analytics', description: 'Métricas e estatísticas', isNew: false },
        ]
      }
    ]
  },
  tavily: {
    name: 'Tavily',
    icon: '🔍',
    categories: [
      {
        name: 'APIs de Pesquisa',
        description: 'Pesquisa web com IA',
        models: [
          { id: 'search', name: 'Search API', description: 'Pesquisa web otimizada para IA', isNew: false },
          { id: 'extract', name: 'Extract API', description: 'Extração de conteúdo de URLs', isNew: false },
        ]
      }
    ]
  },
  json2video: {
    name: 'JSON2Video',
    icon: '🎬',
    categories: [
      {
        name: 'Renderização',
        description: 'APIs de renderização de vídeo',
        models: [
          { id: 'movie', name: 'Movie API', description: 'Criar vídeos a partir de JSON', isNew: false },
          { id: 'templates', name: 'Templates', description: 'Templates pré-definidos', isNew: false },
        ]
      }
    ]
  }
};

export async function GET(req: Request) {
  const { searchParams } = new URL(req.url);
  const provider = searchParams.get('provider');

  if (provider) {
    const providerData = MODELS_DATABASE[provider as keyof typeof MODELS_DATABASE];
    if (providerData) {
      return NextResponse.json(providerData);
    }
    return NextResponse.json({ error: 'Provider not found' }, { status: 404 });
  }

  // Retorna todos os providers
  return NextResponse.json(MODELS_DATABASE);
}

// Testar conexão real e listar modelos disponíveis
export async function POST(req: Request) {
  try {
    const { provider, key } = await req.json();

    if (!provider || !key) {
      return NextResponse.json({ error: 'Provider and key are required' }, { status: 400 });
    }

    let availableModels: string[] = [];
    let error = null;

    switch (provider) {
      case 'openai':
        try {
          const res = await fetch('https://api.openai.com/v1/models', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          if (res.ok) {
            const data = await res.json();
            availableModels = data.data.map((m: { id: string }) => m.id);
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      case 'gemini':
      case 'google':
        try {
          const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}`);
          if (res.ok) {
            const data = await res.json();
            availableModels = data.models.map((m: { name: string }) => m.name.replace('models/', ''));
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      case 'anthropic':
        // Anthropic não tem endpoint público para listar modelos, usar os conhecidos
        availableModels = ['claude-3-5-sonnet-20241022', 'claude-3-5-haiku-20241022', 'claude-3-opus-20240229', 'claude-3-sonnet-20240229', 'claude-3-haiku-20240307'];
        break;

      case 'elevenlabs':
        try {
          const res = await fetch('https://api.elevenlabs.io/v1/models', {
            headers: { 'xi-api-key': key }
          });
          if (res.ok) {
            const data = await res.json();
            availableModels = data.map((m: { model_id: string }) => m.model_id);
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      default:
        // Para providers sem lista de modelos, assumir disponível
        availableModels = ['default'];
    }

    return NextResponse.json({
      provider,
      availableModels,
      error,
      staticModels: MODELS_DATABASE[provider as keyof typeof MODELS_DATABASE] || null
    });

  } catch {
    return NextResponse.json({ error: 'Erro interno' }, { status: 500 });
  }
}

```

---
#### `app/api/proposal/description/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Description } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("description"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptSummary = script?.sections?.map((s: { content: string }) => s.content).join("\n").substring(0, 1000) || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are an SEO expert for YouTube video descriptions.
Create a description that:
- Starts with a compelling summary (first 2 lines are crucial for SEO)
- Includes timestamps for main sections
- Has relevant links placeholders
- Uses natural keyword placement
- Is 200-500 words
- Includes a call-to-action

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return ONLY the description text, no JSON wrapper.`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create an SEO-optimized YouTube description for a video about: ${theme}

Script Summary:
${scriptSummary}

Research Insights:
${researchContext}`,
      temperature: 0.7,
    });

    const description: Description = {
      id: uuidv4(),
      status: "ready",
      content: text.trim(),
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(description);
  } catch (error) {
    console.error("Description generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Description generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/rationale/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      channelData,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research ? `
Research Insights: ${research.consolidatedInsights}
Top Performing Topics: ${research.internalAnalysis?.topPerformingTopics?.join(", ") || "N/A"}
Trending Topics: ${research.externalAnalysis?.trendingTopics?.join(", ") || "N/A"}
Market Opportunities: ${research.externalAnalysis?.marketOpportunities?.join(", ") || "N/A"}
` : "";

    const channelContext = channelData ? `
Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Recent Performance: ${channelData.recentVideos?.slice(0, 3).map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ") || "N/A"}
` : "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist.
Write a compelling explanation of why this video proposal will perform well.
Focus on:
- Data-backed insights from research
- Alignment with audience interests
- Market opportunity and timing
- Competitive advantages
- Expected performance indicators

Write in a confident, analytical tone. Be specific with references to data.
Keep it to 2-3 paragraphs.`,
      prompt: `Explain why a video about "${theme}" will perform well.

${researchContext}
${channelContext}`,
      temperature: 0.7,
    });

    return NextResponse.json({ rationale: text.trim() });
  } catch (error) {
    console.error("Rationale generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Rationale generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/script/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { Script, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Verify AI provider is configured
    if (provider === "openai" && !process.env.OPENAI_API_KEY) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !process.env.ANTHROPIC_API_KEY) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    let aiModel;
    switch (provider) {
      case "openai":
        aiModel = openai(model);
        break;
      case "google":
        aiModel = google(model);
        break;
      case "anthropic":
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("script"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const researchContext = research?.consolidatedInsights || "No research data available";

    const systemPrompt = `You are an expert YouTube scriptwriter specializing in retention-focused content.
Your scripts must:
- Be at least 8 minutes long when read at a natural pace (approximately 1200-1500 words)
- Start with a powerful hook in the first 30 seconds
- Use pattern interrupts every 2-3 minutes to maintain engagement
- Include clear value propositions throughout
- End with a strong call-to-action

Return a JSON object with this structure:
{
  "sections": [
    {
      "type": "hook",
      "content": "The hook script text...",
      "duration": 30
    },
    {
      "type": "intro",
      "content": "Introduction text...",
      "duration": 60
    },
    {
      "type": "content",
      "content": "Main content section 1...",
      "duration": 120
    },
    // ... more content sections
    {
      "type": "cta",
      "content": "Call to action...",
      "duration": 30
    },
    {
      "type": "outro",
      "content": "Closing...",
      "duration": 30
    }
  ]
}

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create a retention-focused YouTube script about: ${theme}

Research Insights:
${researchContext}

Generate a complete script with all sections. The total duration should be at least 8 minutes (480 seconds).`,
      temperature: 0.8,
    });

    let scriptData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        scriptData = JSON.parse(match[0]);
      }
    } catch {
      // Fallback structure
      scriptData = {
        sections: [
          { type: "hook", content: "Generated script content", duration: 30 },
          { type: "intro", content: text.substring(0, 500), duration: 60 },
          { type: "content", content: text.substring(500), duration: 390 },
          { type: "cta", content: "Like and subscribe!", duration: 30 },
          { type: "outro", content: "Thanks for watching!", duration: 30 },
        ],
      };
    }

    const sections: ScriptSection[] = scriptData.sections.map((section: { type: string; content: string; duration: number }) => ({
      id: uuidv4(),
      type: section.type as ScriptSection["type"],
      content: section.content,
      duration: section.duration || 60,
    }));

    const totalDuration = sections.reduce((sum, s) => sum + s.duration, 0);

    const script: Script = {
      id: uuidv4(),
      status: "ready",
      sections,
      totalDuration,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
      audioUrl: null,
      ttsProvider: null,
      ttsVoice: null,
    };

    return NextResponse.json(script);
  } catch (error) {
    console.error("Script generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Script generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/soundtrack/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Soundtrack, SoundtrackSuggestion } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      mood,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const { text } = await generateText({
      model: aiModel,
      system: `You are a music supervisor for YouTube content.
Suggest 3 copyright-free music tracks that would fit the video theme and mood.
These should be actual royalty-free music suggestions from platforms like:
- YouTube Audio Library
- Pixabay Music
- Free Music Archive
- Incompetech

Return a JSON object with this structure:
{
  "suggestions": [
    {
      "title": "Track Title",
      "artist": "Artist Name",
      "genre": "Genre",
      "url": "URL or platform reference",
      "duration": 180,
      "license": "CC0 or specific license"
    }
  ]
}`,
      prompt: `Suggest 3 copyright-free music tracks for a video about: ${theme}
Mood: ${mood || "professional, engaging, educational"}`,
      temperature: 0.7,
    });

    let suggestionsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        suggestionsData = JSON.parse(match[0]);
      }
    } catch {
      suggestionsData = {
        suggestions: [
          {
            title: "Corporate Upbeat",
            artist: "Various",
            genre: "Corporate",
            url: "YouTube Audio Library",
            duration: 180,
            license: "Royalty Free",
          },
          {
            title: "Inspiring Background",
            artist: "Various",
            genre: "Inspirational",
            url: "YouTube Audio Library",
            duration: 240,
            license: "Royalty Free",
          },
          {
            title: "Modern Tech",
            artist: "Various",
            genre: "Electronic",
            url: "YouTube Audio Library",
            duration: 200,
            license: "Royalty Free",
          },
        ],
      };
    }

    const suggestions: SoundtrackSuggestion[] = suggestionsData.suggestions.map(
      (s: { title: string; artist: string; genre: string; url: string; duration: number; license: string }) => ({
        id: uuidv4(),
        title: s.title,
        artist: s.artist,
        genre: s.genre,
        url: s.url,
        duration: s.duration || 180,
        license: s.license,
        isUpload: false,
      })
    );

    const soundtrack: Soundtrack = {
      id: uuidv4(),
      status: "ready",
      suggestions,
      selected: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(soundtrack);
  } catch (error) {
    console.error("Soundtrack generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Soundtrack generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/tags/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Tags } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      description,
      research,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research?.externalAnalysis?.trendingTopics?.join(", ") || "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube SEO specialist.
Generate 15-30 relevant tags for a YouTube video.
Tags should include:
- Primary keywords (high search volume)
- Secondary keywords (medium search volume)
- Long-tail keywords
- Related topics
- Trending terms

Return ONLY a JSON array of strings (the tags), no other text.
Example: ["tag1", "tag2", "tag3"]`,
      prompt: `Generate tags for a YouTube video about: ${theme}

Description summary: ${description?.substring(0, 500) || "N/A"}

Trending topics in this niche: ${researchContext}`,
      temperature: 0.7,
    });

    let tagsList: string[] = [];
    try {
      const match = text.match(/\[[\s\S]*\]/);
      if (match) {
        tagsList = JSON.parse(match[0]);
      }
    } catch {
      // Parse as comma-separated if JSON fails
      tagsList = text.split(",").map((t) => t.trim().replace(/["'\[\]]/g, "")).filter(Boolean);
    }

    const tags: Tags = {
      id: uuidv4(),
      status: "ready",
      items: tagsList,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(tags);
  } catch (error) {
    console.error("Tags generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Tags generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/titles/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, TitlesAndThumbs, TitleThumbnailVariation } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("thumbnail"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptHook = script?.sections?.find((s: { type: string }) => s.type === "hook")?.content || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are a YouTube title and thumbnail strategist.
Create 3 variations of titles and thumbnail prompts.

Each title should:
- Be under 60 characters
- Create curiosity or urgency
- Include power words
- Be clear about the value

Each thumbnail prompt should:
- Be detailed for AI image generation
- Describe the visual elements clearly
- Include colors, composition, and mood
- NOT include text (text will be added separately)
- Focus on eye-catching visuals

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return a JSON object with this structure:
{
  "variations": [
    {
      "title": "Title 1",
      "thumbnailPrompt": "Detailed thumbnail prompt 1..."
    },
    {
      "title": "Title 2",
      "thumbnailPrompt": "Detailed thumbnail prompt 2..."
    },
    {
      "title": "Title 3",
      "thumbnailPrompt": "Detailed thumbnail prompt 3..."
    }
  ]
}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create 3 title and thumbnail variations for a video about: ${theme}

Hook from script: ${scriptHook}

Research insights: ${researchContext}`,
      temperature: 0.8,
    });

    let variationsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        variationsData = JSON.parse(match[0]);
      }
    } catch {
      variationsData = {
        variations: [
          { title: theme, thumbnailPrompt: `A professional YouTube thumbnail about ${theme}` },
          { title: `How to ${theme}`, thumbnailPrompt: `Eye-catching visual representation of ${theme}` },
          { title: `${theme} Explained`, thumbnailPrompt: `Educational and engaging thumbnail about ${theme}` },
        ],
      };
    }

    const variations: TitleThumbnailVariation[] = variationsData.variations.map(
      (v: { title: string; thumbnailPrompt: string }) => ({
        id: uuidv4(),
        title: v.title,
        thumbnailPrompt: v.thumbnailPrompt,
        thumbnailUrl: null,
        imageProvider: null,
      })
    );

    const titlesAndThumbs: TitlesAndThumbs = {
      id: uuidv4(),
      status: "ready",
      variations,
      selectedVariation: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(titlesAndThumbs);
  } catch (error) {
    console.error("Titles generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Titles generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/render/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { RenderData, StoryboardScene } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { storyboardId, scenes, soundtrack } = body as {
      storyboardId: string;
      scenes: StoryboardScene[];
      soundtrack?: { url: string };
    };

    if (!storyboardId || !scenes) {
      return NextResponse.json(
        { error: "Missing required fields: storyboardId, scenes" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    // Build JSON2Video project structure
    const project = {
      resolution: "full-hd",
      quality: "high",
      scenes: scenes.map((scene) => ({
        comment: scene.text.substring(0, 50),
        duration: scene.duration,
        elements: [
          // Background media
          scene.media?.url
            ? {
                type: scene.media.type === "video" ? "video" : "image",
                src: scene.media.url,
                duration: scene.duration,
              }
            : {
                type: "color",
                color: "#1a1a1a",
                duration: scene.duration,
              },
          // Text overlay
          {
            type: "text",
            text: scene.text.substring(0, 100),
            duration: scene.duration,
            style: {
              fontSize: 24,
              fontFamily: "Arial",
              color: "#ffffff",
              backgroundColor: "rgba(0,0,0,0.5)",
            },
            position: {
              x: "center",
              y: "bottom",
            },
          },
          // Voiceover
          ...(scene.voiceoverUrl
            ? [
                {
                  type: "audio",
                  src: scene.voiceoverUrl,
                  duration: scene.duration,
                },
              ]
            : []),
        ],
        transition: {
          type: scene.transition,
          duration: 0.5,
        },
      })),
      // Background music
      ...(soundtrack?.url
        ? {
            soundtrack: {
              src: soundtrack.url,
              volume: 0.3,
            },
          }
        : {}),
    };

    // Create render job
    const createResponse = await fetch("https://api.json2video.com/v2/movies", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": apiKey,
      },
      body: JSON.stringify({ project }),
    });

    if (!createResponse.ok) {
      const error = await createResponse.json();
      throw new Error(error.message || "Failed to create render job");
    }

    const jobData = await createResponse.json();

    const renderData: RenderData = {
      id: jobData.project || uuidv4(),
      createdAt: new Date().toISOString(),
      storyboardId,
      status: "rendering",
      progress: 0,
      videoUrl: null,
      error: null,
    };

    return NextResponse.json(renderData);
  } catch (error) {
    console.error("Render error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Render failed" },
      { status: 500 }
    );
  }
}

// Check render status
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const jobId = searchParams.get("jobId");

    if (!jobId) {
      return NextResponse.json(
        { error: "Missing jobId parameter" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    const response = await fetch(`https://api.json2video.com/v2/movies/${jobId}`, {
      headers: {
        "x-api-key": apiKey,
      },
    });

    if (!response.ok) {
      throw new Error("Failed to check render status");
    }

    const data = await response.json();

    let status: RenderData["status"] = "rendering";
    if (data.status === "done") {
      status = "completed";
    } else if (data.status === "failed") {
      status = "error";
    }

    return NextResponse.json({
      id: jobId,
      status,
      progress: data.progress || 0,
      videoUrl: data.movie || null,
      error: data.error || null,
    });
  } catch (error) {
    console.error("Render status check error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Status check failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/research/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { createOpenAI } from "@ai-sdk/openai";
import { createGoogleGenerativeAI } from "@ai-sdk/google";
import { createAnthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, ResearchData, ResearchQuery, ResearchResult } from "@/types";
import {
  getOpenAIKey,
  getGoogleKey,
  getAnthropicKey,
  getTavilyKey,
} from "@/lib/get-api-key";

async function searchWithTavily(query: string, apiKey: string): Promise<ResearchResult[]> {
  if (!apiKey) {
    return [];
  }

  try {
    const response = await fetch("https://api.tavily.com/search", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        api_key: apiKey,
        query,
        search_depth: "advanced",
        max_results: 5,
      }),
    });

    if (!response.ok) {
      throw new Error("Tavily search failed");
    }

    const data = await response.json();
    return data.results?.map((result: { title: string; url: string; content: string; score: number }) => ({
      title: result.title,
      url: result.url,
      snippet: result.content,
      score: result.score,
    })) || [];
  } catch (error) {
    console.error("Tavily search error:", error);
    return [];
  }
}

async function simulateSearchWithLLM(
  query: string,
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
): Promise<ResearchResult[]> {
  const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

  const { text } = await generateText({
    model: aiModel,
    system: `You are a research assistant. Generate realistic search results for the given query.
Return a JSON array with 3-5 results, each having: title, url, snippet, score (0-1).
Make the results relevant and informative for YouTube content creation.
Return ONLY valid JSON, no other text.`,
    prompt: `Generate search results for: "${query}"`,
    temperature: 0.7,
  });

  try {
    // Extract JSON from the response
    const jsonMatch = text.match(/\[[\s\S]*\]/);
    if (jsonMatch) {
      return JSON.parse(jsonMatch[0]);
    }
    return [];
  } catch {
    return [];
  }
}

function getAIModel(
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
) {
  switch (provider) {
    case "openai": {
      const openai = createOpenAI({
        apiKey: openaiKey || process.env.OPENAI_API_KEY,
      });
      return openai(model);
    }
    case "google": {
      const google = createGoogleGenerativeAI({
        apiKey: googleKey || process.env.GOOGLE_GENERATIVE_AI_API_KEY,
      });
      return google(model);
    }
    case "anthropic": {
      const anthropicClient = createAnthropic({
        apiKey: anthropicKey || process.env.ANTHROPIC_API_KEY,
      });
      return anthropicClient(model);
    }
    default:
      throw new Error(`Unknown provider: ${provider}`);
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      contextId,
      theme,
      channelData,
      metrics,
      provider,
      model,
      diretrizes,
    } = body;

    if (!contextId || !theme) {
      return NextResponse.json(
        { error: "Missing required fields: contextId, theme" },
        { status: 400 }
      );
    }

    // Get API keys from headers or env
    const openaiKey = getOpenAIKey(request);
    const googleKey = getGoogleKey(request);
    const anthropicKey = getAnthropicKey(request);
    const tavilyKey = getTavilyKey(request);

    // Verify AI provider is configured
    if (provider === "openai" && !openaiKey) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !googleKey) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !anthropicKey) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

    // Build context for analysis
    const channelContext = channelData
      ? `Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Total Views: ${channelData.viewCount}
Recent Videos: ${channelData.recentVideos?.map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ")}`
      : "No channel data available";

    const metricsContext = metrics?.length
      ? `Performance Metrics:\n${metrics.slice(0, 10).map((m: { title: string; views: number; ctr: number }) =>
          `- ${m.title}: ${m.views} views, ${m.ctr}% CTR`
        ).join("\n")}`
      : "No metrics data available";

    const diretrizesContext = diretrizes?.length
      ? `\n\nDiretrizes to follow:\n${diretrizes.map((d: { title: string; systemPrompt: string }) => `- ${d.title}: ${d.systemPrompt}`).join("\n")}`
      : "";

    // Step 1: Generate research queries
    const { text: queriesText } = await generateText({
      model: aiModel,
      system: `You are a YouTube research analyst. Generate 3-5 research queries to gather external information that will help create a high-performing video.
Return ONLY a JSON array of strings (queries).${diretrizesContext}`,
      prompt: `Theme: ${theme}

${channelContext}

${metricsContext}

Generate search queries to research this topic for a YouTube video.`,
      temperature: 0.7,
    });

    let queries: string[] = [];
    try {
      const match = queriesText.match(/\[[\s\S]*\]/);
      if (match) {
        queries = JSON.parse(match[0]);
      }
    } catch {
      queries = [theme, `${theme} trends 2024`, `${theme} YouTube video ideas`];
    }

    // Step 2: Execute searches
    const hasTavily = !!tavilyKey;
    const researchQueries: ResearchQuery[] = [];

    for (const query of queries.slice(0, 5)) {
      let results: ResearchResult[];
      let source: "tavily" | "llm_simulated";

      if (hasTavily) {
        results = await searchWithTavily(query, tavilyKey!);
        source = "tavily";
      } else {
        results = await simulateSearchWithLLM(query, provider, model, openaiKey, googleKey, anthropicKey);
        source = "llm_simulated";
      }

      researchQueries.push({ query, source, results });
    }

    // Step 3: Analyze and consolidate
    const { text: analysisText } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist. Analyze the provided data and research to generate actionable insights.
Return a JSON object with this structure:
{
  "internalAnalysis": {
    "topPerformingTopics": ["topic1", "topic2"],
    "audienceInsights": ["insight1", "insight2"],
    "contentGaps": ["gap1", "gap2"],
    "recommendations": ["rec1", "rec2"]
  },
  "externalAnalysis": {
    "trendingTopics": ["trend1", "trend2"],
    "competitorInsights": ["comp1", "comp2"],
    "marketOpportunities": ["opp1", "opp2"]
  },
  "consolidatedInsights": "A detailed paragraph summarizing all findings and strategic recommendations"
}${diretrizesContext}`,
      prompt: `Theme: ${theme}

Channel Data:
${channelContext}

Metrics:
${metricsContext}

Research Results:
${researchQueries.map((q) => `Query: ${q.query}\nResults: ${q.results.map((r) => r.snippet).join("\n")}`).join("\n\n")}

Analyze this data and provide strategic insights.`,
      temperature: 0.7,
    });

    let analysis;
    try {
      const match = analysisText.match(/\{[\s\S]*\}/);
      if (match) {
        analysis = JSON.parse(match[0]);
      }
    } catch {
      analysis = {
        internalAnalysis: {
          topPerformingTopics: [],
          audienceInsights: [],
          contentGaps: [],
          recommendations: [],
        },
        externalAnalysis: {
          trendingTopics: [],
          competitorInsights: [],
          marketOpportunities: [],
        },
        consolidatedInsights: "Research analysis completed. Please review the gathered data.",
      };
    }

    const researchData: ResearchData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      contextId,
      internalAnalysis: analysis.internalAnalysis,
      externalAnalysis: analysis.externalAnalysis,
      queries: researchQueries,
      consolidatedInsights: analysis.consolidatedInsights,
    };

    return NextResponse.json(researchData);
  } catch (error) {
    console.error("Research error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Research failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/status/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

export async function GET() {
  return NextResponse.json({
    openai: !!process.env.OPENAI_API_KEY,
    gemini: !!process.env.GEMINI_API_KEY || !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    youtube: !!process.env.YOUTUBEDATA_API_KEY || !!process.env.YOUTUBE_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
    github: !!process.env.GITHUB_TOKEN,
    vercel: !!process.env.VERCEL_TOKEN && !!process.env.VERCEL_PROJECT_ID,
  });
}

```

---
#### `app/api/storyboard/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { StoryboardData, StoryboardScene, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { proposalId, script } = body as {
      proposalId: string;
      script: { sections: ScriptSection[] };
    };

    if (!proposalId || !script?.sections) {
      return NextResponse.json(
        { error: "Missing required fields: proposalId, script" },
        { status: 400 }
      );
    }

    // Split script sections into storyboard scenes
    const scenes: StoryboardScene[] = [];
    let order = 0;

    for (const section of script.sections) {
      // Split content into smaller chunks for scenes
      // Each scene should be roughly 15-30 seconds
      const maxSceneDuration = 30;
      const contentChunks = splitContentIntoChunks(section.content, section.duration, maxSceneDuration);

      for (const chunk of contentChunks) {
        scenes.push({
          id: uuidv4(),
          order: order++,
          scriptSectionId: section.id,
          text: chunk.text,
          voiceoverUrl: null,
          media: null,
          duration: chunk.duration,
          transition: order === contentChunks.length - 1 ? "fade" : "cut",
        });
      }
    }

    const storyboard: StoryboardData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      scenes,
      totalDuration: scenes.reduce((sum, s) => sum + s.duration, 0),
    };

    return NextResponse.json(storyboard);
  } catch (error) {
    console.error("Storyboard generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Storyboard generation failed" },
      { status: 500 }
    );
  }
}

function splitContentIntoChunks(
  content: string,
  totalDuration: number,
  maxDuration: number
): { text: string; duration: number }[] {
  const sentences = content.match(/[^.!?]+[.!?]+/g) || [content];
  const chunks: { text: string; duration: number }[] = [];

  let currentChunk = "";
  let currentDuration = 0;
  const durationPerSentence = totalDuration / sentences.length;

  for (const sentence of sentences) {
    const sentenceDuration = Math.round(durationPerSentence);

    if (currentDuration + sentenceDuration > maxDuration && currentChunk) {
      chunks.push({
        text: currentChunk.trim(),
        duration: currentDuration,
      });
      currentChunk = sentence;
      currentDuration = sentenceDuration;
    } else {
      currentChunk += " " + sentence;
      currentDuration += sentenceDuration;
    }
  }

  if (currentChunk.trim()) {
    chunks.push({
      text: currentChunk.trim(),
      duration: currentDuration || maxDuration,
    });
  }

  // Ensure we have at least one chunk
  if (chunks.length === 0) {
    chunks.push({
      text: content,
      duration: totalDuration,
    });
  }

  return chunks;
}

```

---
#### `app/api/system/health/route.ts`

```
import { NextResponse } from 'next/server';
import type { SystemMonitorData, SystemHealth, APIHealthStatus } from '@/types';

export const dynamic = 'force-dynamic';

/**
 * GET /api/system/health
 * Returns system health metrics and API status
 */
export async function GET() {
  try {
    // System Health Metrics
    const memoryUsage = process.memoryUsage();
    const systemHealth: SystemHealth = {
      memory: {
        rss: memoryUsage.rss,
        heapTotal: memoryUsage.heapTotal,
        heapUsed: memoryUsage.heapUsed,
        external: memoryUsage.external,
      },
      uptime: process.uptime(),
      nodeVersion: process.version,
      platform: process.platform,
      timestamp: new Date().toISOString(),
    };

    // API Health Checks
    const apiStatuses: APIHealthStatus[] = [];

    // Check OpenAI
    apiStatuses.push(await checkOpenAI());

    // Check YouTube
    apiStatuses.push(await checkYouTube());

    // Check Google Gemini
    apiStatuses.push(await checkGoogle());

    // Check Anthropic
    apiStatuses.push(await checkAnthropic());

    // Check Pexels
    apiStatuses.push(await checkPexels());

    // Check Pixabay
    apiStatuses.push(await checkPixabay());

    // Check Unsplash
    apiStatuses.push(await checkUnsplash());

    const response: SystemMonitorData = {
      system: systemHealth,
      apis: apiStatuses,
    };

    return NextResponse.json(response);
  } catch (error) {
    console.error('Health check failed:', error);
    return NextResponse.json(
      { error: 'Failed to retrieve system health' },
      { status: 500 }
    );
  }
}

/**
 * Helper function to check OpenAI API
 */
async function checkOpenAI(): Promise<APIHealthStatus> {
  const apiKey = process.env.OPENAI_API_KEY;

  if (!apiKey) {
    return {
      name: 'OpenAI',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.openai.com/v1/models', {
      method: 'GET',
      headers: {
        Authorization: `Bearer ${apiKey}`,
      },
      signal: AbortSignal.timeout(5000), // 5s timeout
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'OpenAI',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'OpenAI',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'OpenAI',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check YouTube API
 */
async function checkYouTube(): Promise<APIHealthStatus> {
  const apiKey = process.env.YOUTUBE_API_KEY;

  if (!apiKey) {
    return {
      name: 'YouTube',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${apiKey}`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'YouTube',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'YouTube',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'YouTube',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Google Gemini API
 */
async function checkGoogle(): Promise<APIHealthStatus> {
  const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;

  if (!apiKey) {
    return {
      name: 'Google Gemini',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Google Gemini',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Google Gemini',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Google Gemini',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Anthropic API
 */
async function checkAnthropic(): Promise<APIHealthStatus> {
  const apiKey = process.env.ANTHROPIC_API_KEY;

  if (!apiKey) {
    return {
      name: 'Anthropic',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  // Anthropic doesn't have a simple health endpoint, so we just check if key exists
  return {
    name: 'Anthropic',
    status: apiKey ? 'unknown' : 'offline',
    error: apiKey ? undefined : 'API key not configured',
  };
}

/**
 * Helper function to check Pexels API
 */
async function checkPexels(): Promise<APIHealthStatus> {
  const apiKey = process.env.PEXELS_API_KEY;

  if (!apiKey) {
    return {
      name: 'Pexels',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.pexels.com/v1/curated?per_page=1&page=1', {
      method: 'GET',
      headers: {
        Authorization: apiKey,
      },
      signal: AbortSignal.timeout(5000),
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Pexels',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Pexels',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Pexels',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Pixabay API
 */
async function checkPixabay(): Promise<APIHealthStatus> {
  const apiKey = process.env.PIXABAY_API_KEY;

  if (!apiKey) {
    return {
      name: 'Pixabay',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://pixabay.com/api/?key=${apiKey}&q=nature&per_page=3`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Pixabay',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Pixabay',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Pixabay',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Unsplash API
 */
async function checkUnsplash(): Promise<APIHealthStatus> {
  const apiKey = process.env.UNSPLASH_ACCESS_KEY;

  if (!apiKey) {
    return {
      name: 'Unsplash',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.unsplash.com/photos?per_page=1', {
      method: 'GET',
      headers: {
        Authorization: `Client-ID ${apiKey}`,
      },
      signal: AbortSignal.timeout(5000),
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Unsplash',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Unsplash',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Unsplash',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

```

---
#### `app/api/test-connection/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

interface TestResult {
  success: boolean;
  message: string;
  responseTime: number;
  details?: string;
}

export async function POST(req: Request) {
  try {
    const { provider } = await req.json();

    if (!provider) {
      return NextResponse.json({ error: 'Provider is required' }, { status: 400 });
    }

    const startTime = Date.now();
    const result: TestResult = { success: false, message: '', responseTime: 0 };

    // Pegar a chave do ambiente
    const keyMap: Record<string, string | undefined> = {
      openai: process.env.OPENAI_API_KEY,
      gemini: process.env.GEMINI_API_KEY || process.env.GOOGLE_GENERATIVE_AI_API_KEY,
      anthropic: process.env.ANTHROPIC_API_KEY,
      youtube: process.env.YOUTUBEDATA_API_KEY || process.env.YOUTUBE_API_KEY,
      pexels: process.env.PEXELS_API_KEY,
      pixabay: process.env.PIXABAY_API_KEY,
      elevenlabs: process.env.ELEVENLABS_API_KEY,
      tavily: process.env.TAVILY_API_KEY,
      json2video: process.env.JSON2VIDEO_API_KEY,
      github: process.env.GITHUB_TOKEN,
      vercel: process.env.VERCEL_TOKEN,
    };

    const key = keyMap[provider];

    if (!key) {
      return NextResponse.json({
        success: false,
        message: 'API key não configurada no servidor',
        responseTime: Date.now() - startTime
      });
    }

    try {
      switch (provider) {
        case 'openai':
          const openaiRes = await fetch('https://api.openai.com/v1/models?limit=1', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          result.success = openaiRes.ok;
          result.message = openaiRes.ok ? 'OpenAI respondendo! Modelos disponíveis.' : 'Falha na autenticação';
          if (openaiRes.ok) {
            const data = await openaiRes.json();
            result.details = `${data.data?.length || 0} modelos encontrados`;
          }
          break;

        case 'gemini':
          const geminiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}&pageSize=1`);
          result.success = geminiRes.ok;
          result.message = geminiRes.ok ? 'Gemini respondendo!' : 'Falha na autenticação';
          break;

        case 'anthropic':
          // Anthropic: fazer uma mini chamada
          const anthropicRes = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
              'x-api-key': key,
              'anthropic-version': '2023-06-01',
              'content-type': 'application/json'
            },
            body: JSON.stringify({
              model: "claude-3-haiku-20240307",
              max_tokens: 1,
              messages: [{ role: "user", content: "Hi" }]
            })
          });
          result.success = anthropicRes.status !== 401 && anthropicRes.status !== 403;
          result.message = result.success ? 'Anthropic respondendo!' : 'Falha na autenticação';
          break;

        case 'youtube':
          const ytRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${key}`);
          result.success = ytRes.ok;
          result.message = ytRes.ok ? 'YouTube Data API respondendo!' : 'Falha na autenticação';
          break;

        case 'pexels':
          const pexelsRes = await fetch('https://api.pexels.com/v1/curated?per_page=1', {
            headers: { 'Authorization': key }
          });
          result.success = pexelsRes.ok;
          result.message = pexelsRes.ok ? 'Pexels respondendo! Fotos disponíveis.' : 'Falha na autenticação';
          if (pexelsRes.ok) {
            const data = await pexelsRes.json();
            result.details = `${data.total_results?.toLocaleString() || 'Milhões de'} fotos disponíveis`;
          }
          break;

        case 'pixabay':
          const pixabayRes = await fetch(`https://pixabay.com/api/?key=${key}&q=nature&per_page=3`);
          result.success = pixabayRes.ok;
          result.message = pixabayRes.ok ? 'Pixabay respondendo!' : 'Falha na autenticação';
          if (pixabayRes.ok) {
            const data = await pixabayRes.json();
            result.details = `${data.totalHits?.toLocaleString() || 'Muitas'} imagens encontradas`;
          }
          break;

        case 'elevenlabs':
          const elevenRes = await fetch('https://api.elevenlabs.io/v1/voices', {
            headers: { 'xi-api-key': key }
          });
          result.success = elevenRes.ok;
          result.message = elevenRes.ok ? 'ElevenLabs respondendo!' : 'Falha na autenticação';
          if (elevenRes.ok) {
            const data = await elevenRes.json();
            result.details = `${data.voices?.length || 0} vozes disponíveis`;
          }
          break;

        case 'tavily':
          // Tavily - não fazer busca real para não gastar crédito, apenas verificar auth
          const tavilyRes = await fetch('https://api.tavily.com/search', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ api_key: key, query: "test", max_results: 1 })
          });
          result.success = tavilyRes.ok;
          result.message = tavilyRes.ok ? 'Tavily respondendo! Pesquisa IA pronta.' : 'Falha na autenticação';
          break;

        case 'json2video':
          const j2vRes = await fetch('https://api.json2video.com/v2/movie', {
            headers: { 'x-api-key': key }
          });
          result.success = j2vRes.status !== 401 && j2vRes.status !== 403;
          result.message = result.success ? 'JSON2Video respondendo!' : 'Falha na autenticação';
          break;

        case 'github':
          const githubRes = await fetch('https://api.github.com/user', {
            headers: {
              'Authorization': `token ${key}`,
              'Accept': 'application/vnd.github.v3+json'
            }
          });
          result.success = githubRes.ok;
          result.message = githubRes.ok ? 'GitHub conectado!' : 'Falha na autenticação';
          if (githubRes.ok) {
            const data = await githubRes.json();
            result.details = `Usuário: ${data.login}`;
          }
          break;

        case 'vercel':
          const vercelRes = await fetch('https://api.vercel.com/v9/projects', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          result.success = vercelRes.ok;
          result.message = vercelRes.ok ? 'Vercel conectado!' : 'Falha na autenticação';
          if (vercelRes.ok) {
            const data = await vercelRes.json();
            result.details = `${data.projects?.length || 0} projetos encontrados`;
          }
          break;

        default:
          result.message = 'Provider não suportado para teste';
      }
    } catch (fetchError) {
      result.success = false;
      result.message = 'Erro de conexão com a API';
      result.details = fetchError instanceof Error ? fetchError.message : 'Erro desconhecido';
    }

    result.responseTime = Date.now() - startTime;
    return NextResponse.json(result);

  } catch {
    return NextResponse.json({
      success: false,
      message: 'Erro interno no servidor',
      responseTime: 0
    }, { status: 500 });
  }
}

```

---
#### `app/api/tts/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { TTSProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { text, provider, voice } = body as {
      text: string;
      provider: TTSProvider;
      voice: string;
    };

    if (!text || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: text, provider" },
        { status: 400 }
      );
    }

    let audioBuffer: ArrayBuffer;

    switch (provider) {
      case "openai": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/audio/speech", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "tts-1-hd",
            input: text,
            voice: voice || "alloy",
            response_format: "mp3",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "OpenAI TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "elevenlabs": {
        const apiKey = process.env.ELEVENLABS_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "ElevenLabs API key not configured" },
            { status: 400 }
          );
        }

        const voiceId = voice || "21m00Tcm4TlvDq8ikWAM"; // Default to Rachel
        const response = await fetch(
          `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "xi-api-key": apiKey,
            },
            body: JSON.stringify({
              text,
              model_id: "eleven_multilingual_v2",
              voice_settings: {
                stability: 0.5,
                similarity_boost: 0.75,
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("ElevenLabs TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "google": {
        const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Google API key not configured" },
            { status: 400 }
          );
        }

        // Google Cloud TTS requires different authentication
        // For simplicity, we'll use a basic synthesis endpoint
        const response = await fetch(
          `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              input: { text },
              voice: {
                languageCode: "pt-BR",
                name: voice || "pt-BR-Wavenet-A",
              },
              audioConfig: {
                audioEncoding: "MP3",
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("Google TTS failed");
        }

        const data = await response.json();
        const audioContent = data.audioContent;

        // Convert base64 to buffer
        const binaryString = atob(audioContent);
        const bytes = new Uint8Array(binaryString.length);
        for (let i = 0; i < binaryString.length; i++) {
          bytes[i] = binaryString.charCodeAt(i);
        }
        audioBuffer = bytes.buffer;
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown TTS provider: ${provider}` },
          { status: 400 }
        );
    }

    // Convert to base64 for response
    const base64Audio = Buffer.from(audioBuffer).toString("base64");
    const audioUrl = `data:audio/mp3;base64,${base64Audio}`;

    return NextResponse.json({ audioUrl, provider });
  } catch (error) {
    console.error("TTS error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "TTS generation failed" },
      { status: 500 }
    );
  }
}

export async function GET() {
  // Return available voices for each provider
  const voices = {
    openai: [
      { id: "alloy", name: "Alloy" },
      { id: "echo", name: "Echo" },
      { id: "fable", name: "Fable" },
      { id: "onyx", name: "Onyx" },
      { id: "nova", name: "Nova" },
      { id: "shimmer", name: "Shimmer" },
    ],
    elevenlabs: process.env.ELEVENLABS_API_KEY
      ? [
          { id: "21m00Tcm4TlvDq8ikWAM", name: "Rachel" },
          { id: "AZnzlk1XvdvUeBnXmlld", name: "Domi" },
          { id: "EXAVITQu4vr4xnSDxMaL", name: "Bella" },
          { id: "ErXwobaYiN019PkySvjV", name: "Antoni" },
          { id: "MF3mGyEYCl7XYWbV9V6O", name: "Elli" },
          { id: "TxGEqnHWrfWFTfGW9XjX", name: "Josh" },
        ]
      : [],
    google: [
      { id: "pt-BR-Wavenet-A", name: "Brazilian Portuguese - Female" },
      { id: "pt-BR-Wavenet-B", name: "Brazilian Portuguese - Male" },
      { id: "en-US-Wavenet-D", name: "English US - Male" },
      { id: "en-US-Wavenet-F", name: "English US - Female" },
    ],
  };

  return NextResponse.json(voices);
}

```

---
#### `app/api/upload/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { put } from '@vercel/blob';

export const runtime = 'nodejs';

/**
 * POST /api/upload
 * Upload a file to Vercel Blob storage
 */
export async function POST(request: NextRequest) {
  try {
    const formData = await request.formData();
    const file = formData.get('file') as File | null;
    const type = formData.get('type') as string | null;

    if (!file) {
      return NextResponse.json(
        { error: 'No file provided' },
        { status: 400 }
      );
    }

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      return NextResponse.json(
        { error: 'Invalid file type. Allowed: JPEG, PNG, GIF, WebP' },
        { status: 400 }
      );
    }

    // Validate file size (max 5MB)
    const maxSize = 5 * 1024 * 1024; // 5MB
    if (file.size > maxSize) {
      return NextResponse.json(
        { error: 'File too large. Maximum size is 5MB' },
        { status: 400 }
      );
    }

    // Generate unique filename
    const timestamp = Date.now();
    const extension = file.name.split('.').pop() || 'jpg';
    const folder = type === 'avatar' ? 'avatars' : 'uploads';
    const filename = `${folder}/${timestamp}-${Math.random().toString(36).substring(7)}.${extension}`;

    // Upload to Vercel Blob
    const blob = await put(filename, file, {
      access: 'public',
    });

    return NextResponse.json({
      url: blob.url,
      filename: blob.pathname,
      size: file.size,
    });
  } catch (error) {
    console.error('Upload error:', error);
    return NextResponse.json(
      { error: 'Failed to upload file' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/youtube/channel/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ChannelData, RecentVideo } from "@/types";
import { getYouTubeKeys } from "@/lib/get-api-key";

export async function GET(request: NextRequest) {
  const { apiKey, channelId } = getYouTubeKeys(request);

  if (!apiKey || !channelId) {
    return NextResponse.json(
      {
        error: "YouTube API key or Channel ID not configured",
        details: !apiKey
          ? "YOUTUBE_API_KEY missing"
          : "YOUTUBE_CHANNEL_ID missing",
      },
      { status: 400 }
    );
  }

  try {
    // Fetch channel data
    const channelResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`
    );

    if (!channelResponse.ok) {
      const errorData = await channelResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${channelResponse.status}`;
      throw new Error(`YouTube API Error: ${errorMessage}`);
    }

    const channelData = await channelResponse.json();

    if (!channelData.items || channelData.items.length === 0) {
      return NextResponse.json(
        {
          error: "Channel not found",
          details: `No channel found with ID: ${channelId}`,
        },
        { status: 404 }
      );
    }

    const channel = channelData.items[0];

    // Fetch recent videos
    const videosResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&type=video&order=date&maxResults=10&key=${apiKey}`
    );

    if (!videosResponse.ok) {
      const errorData = await videosResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${videosResponse.status}`;
      throw new Error(`Failed to fetch videos: ${errorMessage}`);
    }

    const videosData = await videosResponse.json();
    const videoIds =
      videosData.items
        ?.map((item: { id: { videoId: string } }) => item.id.videoId)
        .join(",") || "";

    // Fetch video statistics
    let recentVideos: RecentVideo[] = [];
    if (videoIds) {
      const statsResponse = await fetch(
        `https://www.googleapis.com/youtube/v3/videos?part=statistics,snippet&id=${videoIds}&key=${apiKey}`
      );

      if (statsResponse.ok) {
        const statsData = await statsResponse.json();
        recentVideos =
          statsData.items?.map(
            (video: {
              id: string;
              snippet: {
                title: string;
                description: string;
                thumbnails: { medium: { url: string } };
                publishedAt: string;
              };
              statistics: {
                viewCount: string;
                likeCount: string;
                commentCount: string;
              };
            }) => ({
              id: video.id,
              title: video.snippet.title,
              description: video.snippet.description,
              thumbnailUrl: video.snippet.thumbnails.medium.url,
              publishedAt: video.snippet.publishedAt,
              viewCount: parseInt(video.statistics.viewCount || "0"),
              likeCount: parseInt(video.statistics.likeCount || "0"),
              commentCount: parseInt(video.statistics.commentCount || "0"),
            })
          ) || [];
      }
    }

    const result: ChannelData = {
      channelId: channel.id,
      title: channel.snippet.title,
      description: channel.snippet.description,
      subscriberCount: parseInt(channel.statistics.subscriberCount || "0"),
      videoCount: parseInt(channel.statistics.videoCount || "0"),
      viewCount: parseInt(channel.statistics.viewCount || "0"),
      recentVideos,
    };

    return NextResponse.json(result);
  } catch (error) {
    console.error("YouTube API error:", error);
    return NextResponse.json(
      {
        error: "Failed to fetch YouTube data",
        details: error instanceof Error ? error.message : "Unknown error",
      },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/youtube/upload/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { UploadData, UploadSetup } from "@/types";

/**
 * ⚠️ STUB IMPLEMENTATION - NOT PRODUCTION READY
 *
 * This endpoint returns simulated upload responses only.
 * Actual YouTube upload requires:
 * 1. OAuth2 authentication flow with youtube.upload scope
 * 2. Resumable upload implementation
 * 3. Video download from videoUrl
 * 4. Proper error handling and retry logic
 *
 * See PRODUCTION_NOTES.md for implementation guide.
 */

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      proposalId,
      renderId,
      videoUrl,
      title,
      description,
      tags,
      uploadSetup,
      accessToken,
    } = body as {
      proposalId: string;
      renderId: string;
      videoUrl: string;
      title: string;
      description: string;
      tags: string[];
      uploadSetup: UploadSetup;
      accessToken: string;
    };

    if (!proposalId || !renderId || !videoUrl || !title || !accessToken) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Prepare metadata
    const metadata = {
      snippet: {
        title,
        description,
        tags,
        categoryId: uploadSetup?.category || "22", // People & Blogs
        defaultLanguage: uploadSetup?.language || "pt",
      },
      status: {
        privacyStatus: "private", // Always upload as private first
        selfDeclaredMadeForKids: uploadSetup?.madeForKids || false,
        license: uploadSetup?.license === "creative_commons" ? "creativeCommon" : "youtube",
        embeddable: uploadSetup?.allowEmbedding !== false,
      },
    };

    // In a real implementation, this would:
    // 1. Download the video from videoUrl
    // 2. Use YouTube Data API v3 to upload the video
    // 3. Set the thumbnail
    //
    // For now, we'll return a simulated upload response
    // The actual implementation would require OAuth2 authentication flow

    // Note: YouTube upload requires OAuth2 with youtube.upload scope
    // This is typically done through a separate auth flow

    const uploadData: UploadData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      renderId,
      status: "pending",
      youtubeVideoId: null,
      youtubeUrl: null,
      error: null,
    };

    // In production, you would implement the actual upload here:
    // 1. Initialize resumable upload
    // 2. Upload video in chunks
    // 3. Set thumbnail
    // 4. Return video ID

    // For now, return pending status
    // The client can poll for status updates

    return NextResponse.json({
      ...uploadData,
      message: "Upload initiated. YouTube OAuth2 authentication required.",
      metadata,
    });
  } catch (error) {
    console.error("Upload error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Upload failed" },
      { status: 500 }
    );
  }
}

// Get YouTube categories
export async function GET() {
  const apiKey = process.env.YOUTUBE_API_KEY;

  if (!apiKey) {
    // Return default categories if no API key
    return NextResponse.json({
      categories: [
        { id: "1", title: "Film & Animation" },
        { id: "2", title: "Autos & Vehicles" },
        { id: "10", title: "Music" },
        { id: "15", title: "Pets & Animals" },
        { id: "17", title: "Sports" },
        { id: "19", title: "Travel & Events" },
        { id: "20", title: "Gaming" },
        { id: "22", title: "People & Blogs" },
        { id: "23", title: "Comedy" },
        { id: "24", title: "Entertainment" },
        { id: "25", title: "News & Politics" },
        { id: "26", title: "Howto & Style" },
        { id: "27", title: "Education" },
        { id: "28", title: "Science & Technology" },
        { id: "29", title: "Nonprofits & Activism" },
      ],
    });
  }

  try {
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/videoCategories?part=snippet&regionCode=BR&key=${apiKey}`
    );

    if (!response.ok) {
      throw new Error("Failed to fetch categories");
    }

    const data = await response.json();
    const categories = data.items
      ?.filter((item: { snippet: { assignable: boolean } }) => item.snippet.assignable)
      .map((item: { id: string; snippet: { title: string } }) => ({
        id: item.id,
        title: item.snippet.title,
      }));

    return NextResponse.json({ categories });
  } catch (error) {
    console.error("Categories fetch error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Failed to fetch categories" },
      { status: 500 }
    );
  }
}

```

---
#### `app/approve/[token]/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { useParams, useRouter } from 'next/navigation';
import {
  CheckCircle2,
  XCircle,
  MessageSquare,
  FileText,
  Clock,
  Loader2,
  AlertTriangle,
  ChevronDown,
  ChevronUp,
} from 'lucide-react';

interface ProjectData {
  project: {
    id: string;
    name: string;
    topic: string;
    status: string;
  };
  script: {
    title: string;
    content: string;
    sections: {
      hook?: string;
      body?: string[];
      cta?: string;
    };
  } | null;
  research: {
    summary: string;
  } | null;
  workflow: {
    currentStep: string;
    approvalSentAt: string;
  };
}

export default function ApprovalPage() {
  const params = useParams();
  const router = useRouter();
  const token = params.token as string;

  const [data, setData] = useState<ProjectData | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [submitting, setSubmitting] = useState(false);
  const [showFeedback, setShowFeedback] = useState(false);
  const [feedback, setFeedback] = useState('');
  const [expandedSections, setExpandedSections] = useState<Record<string, boolean>>({
    script: true,
    research: false,
  });

  useEffect(() => {
    async function fetchData() {
      try {
        const response = await fetch(`/api/approve?token=${token}`);
        if (!response.ok) {
          const err = await response.json();
          throw new Error(err.error || 'Failed to load project');
        }
        const projectData = await response.json();
        setData(projectData);
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Failed to load project');
      } finally {
        setLoading(false);
      }
    }

    if (token) {
      fetchData();
    }
  }, [token]);

  const handleApprove = async () => {
    setSubmitting(true);
    try {
      const response = await fetch('/api/approve', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token, action: 'approve' }),
      });

      if (!response.ok) {
        throw new Error('Failed to approve');
      }

      router.push('/approve/success');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to approve');
    } finally {
      setSubmitting(false);
    }
  };

  const handleRequestChanges = async () => {
    if (!feedback.trim()) {
      setError('Please provide feedback for changes');
      return;
    }

    setSubmitting(true);
    try {
      const response = await fetch('/api/approve', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token, action: 'request_changes', feedback }),
      });

      if (!response.ok) {
        throw new Error('Failed to submit feedback');
      }

      router.push('/approve/feedback-sent');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to submit feedback');
    } finally {
      setSubmitting(false);
    }
  };

  const toggleSection = (section: string) => {
    setExpandedSections(prev => ({ ...prev, [section]: !prev[section] }));
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-zinc-950 flex items-center justify-center">
        <div className="text-center">
          <Loader2 className="w-12 h-12 text-violet-500 animate-spin mx-auto mb-4" />
          <p className="text-zinc-400">Carregando roteiro...</p>
        </div>
      </div>
    );
  }

  if (error && !data) {
    return (
      <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
        <div className="bg-zinc-900 border border-red-500/30 rounded-2xl p-8 max-w-md text-center">
          <AlertTriangle className="w-16 h-16 text-red-500 mx-auto mb-4" />
          <h1 className="text-xl font-bold text-white mb-2">Erro ao carregar</h1>
          <p className="text-zinc-400">{error}</p>
        </div>
      </div>
    );
  }

  if (!data) return null;

  const isAwaitingApproval = data.project.status === 'AWAITING_APPROVAL';

  return (
    <div className="min-h-screen bg-zinc-950 p-4 md:p-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 mb-6">
          <div className="flex items-start justify-between">
            <div>
              <h1 className="text-2xl font-bold text-white mb-2">
                Aprovacao de Roteiro
              </h1>
              <p className="text-zinc-400">{data.project.name}</p>
            </div>
            <div className="flex items-center gap-2 px-3 py-1.5 bg-amber-500/20 rounded-full">
              <Clock className="w-4 h-4 text-amber-500" />
              <span className="text-sm text-amber-500">Aguardando Aprovacao</span>
            </div>
          </div>
        </div>

        {/* Error message */}
        {error && (
          <div className="bg-red-500/20 border border-red-500/30 rounded-xl p-4 mb-6">
            <p className="text-red-400">{error}</p>
          </div>
        )}

        {/* Script Section */}
        <div className="bg-zinc-900 border border-zinc-800 rounded-2xl mb-6 overflow-hidden">
          <button
            onClick={() => toggleSection('script')}
            className="w-full flex items-center justify-between p-6 text-left hover:bg-zinc-800/50 transition-colors"
          >
            <div className="flex items-center gap-3">
              <FileText className="w-5 h-5 text-violet-500" />
              <span className="text-lg font-semibold text-white">Roteiro</span>
            </div>
            {expandedSections.script ? (
              <ChevronUp className="w-5 h-5 text-zinc-400" />
            ) : (
              <ChevronDown className="w-5 h-5 text-zinc-400" />
            )}
          </button>

          {expandedSections.script && data.script && (
            <div className="px-6 pb-6 border-t border-zinc-800 pt-4">
              <h2 className="text-xl font-bold text-white mb-4">
                {data.script.title}
              </h2>

              {data.script.sections?.hook && (
                <div className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">HOOK</h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.sections.hook}
                  </p>
                </div>
              )}

              {data.script.sections?.body?.map((section, index) => (
                <div key={index} className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">
                    SECAO {index + 1}
                  </h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">{section}</p>
                </div>
              ))}

              {data.script.sections?.cta && (
                <div className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">CTA</h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.sections.cta}
                  </p>
                </div>
              )}

              {data.script.content && !data.script.sections?.hook && (
                <div className="prose prose-invert max-w-none">
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.content}
                  </p>
                </div>
              )}
            </div>
          )}
        </div>

        {/* Research Summary */}
        {data.research && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl mb-6 overflow-hidden">
            <button
              onClick={() => toggleSection('research')}
              className="w-full flex items-center justify-between p-6 text-left hover:bg-zinc-800/50 transition-colors"
            >
              <div className="flex items-center gap-3">
                <MessageSquare className="w-5 h-5 text-blue-500" />
                <span className="text-lg font-semibold text-white">
                  Resumo da Pesquisa
                </span>
              </div>
              {expandedSections.research ? (
                <ChevronUp className="w-5 h-5 text-zinc-400" />
              ) : (
                <ChevronDown className="w-5 h-5 text-zinc-400" />
              )}
            </button>

            {expandedSections.research && (
              <div className="px-6 pb-6 border-t border-zinc-800 pt-4">
                <p className="text-zinc-300 whitespace-pre-wrap">
                  {data.research.summary}
                </p>
              </div>
            )}
          </div>
        )}

        {/* Feedback Section */}
        {showFeedback && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 mb-6">
            <h3 className="text-lg font-semibold text-white mb-4">
              Solicitar Alteracoes
            </h3>
            <textarea
              value={feedback}
              onChange={(e) => setFeedback(e.target.value)}
              placeholder="Descreva as alteracoes necessarias..."
              className="w-full h-32 bg-zinc-800 border border-zinc-700 rounded-xl p-4 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-violet-500 resize-none"
            />
          </div>
        )}

        {/* Action Buttons */}
        {isAwaitingApproval && (
          <div className="flex flex-col sm:flex-row gap-4">
            <button
              onClick={handleApprove}
              disabled={submitting}
              className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {submitting ? (
                <Loader2 className="w-5 h-5 animate-spin" />
              ) : (
                <CheckCircle2 className="w-5 h-5" />
              )}
              Aprovar Roteiro
            </button>

            {!showFeedback ? (
              <button
                onClick={() => setShowFeedback(true)}
                className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-semibold rounded-xl transition-all"
              >
                <XCircle className="w-5 h-5" />
                Solicitar Alteracoes
              </button>
            ) : (
              <button
                onClick={handleRequestChanges}
                disabled={submitting || !feedback.trim()}
                className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-amber-600 hover:bg-amber-500 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {submitting ? (
                  <Loader2 className="w-5 h-5 animate-spin" />
                ) : (
                  <MessageSquare className="w-5 h-5" />
                )}
                Enviar Feedback
              </button>
            )}
          </div>
        )}

        {!isAwaitingApproval && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 text-center">
            <p className="text-zinc-400">
              Este roteiro ja foi processado. Status atual:{' '}
              <span className="text-white font-medium">{data.project.status}</span>
            </p>
          </div>
        )}
      </div>
    </div>
  );
}

```

---
#### `app/approve/feedback-sent/page.tsx`

```
"use client";

import { MessageSquare, ArrowRight } from 'lucide-react';
import Link from 'next/link';

export default function FeedbackSentPage() {
  return (
    <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
      <div className="bg-zinc-900 border border-amber-500/30 rounded-2xl p-8 max-w-md text-center">
        <div className="w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
          <MessageSquare className="w-10 h-10 text-amber-500" />
        </div>

        <h1 className="text-2xl font-bold text-white mb-2">
          Feedback Enviado!
        </h1>

        <p className="text-zinc-400 mb-6">
          Seu feedback foi registrado.
          O roteiro sera revisado e voce recebera um novo email para aprovacao.
        </p>

        <Link
          href="/"
          className="inline-flex items-center gap-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white font-semibold rounded-xl transition-all"
        >
          Voltar ao Dashboard
          <ArrowRight className="w-4 h-4" />
        </Link>
      </div>
    </div>
  );
}

```

---
#### `app/approve/success/page.tsx`

```
"use client";

import { CheckCircle2, ArrowRight } from 'lucide-react';
import Link from 'next/link';

export default function ApprovalSuccessPage() {
  return (
    <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
      <div className="bg-zinc-900 border border-green-500/30 rounded-2xl p-8 max-w-md text-center">
        <div className="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
          <CheckCircle2 className="w-10 h-10 text-green-500" />
        </div>

        <h1 className="text-2xl font-bold text-white mb-2">
          Roteiro Aprovado!
        </h1>

        <p className="text-zinc-400 mb-6">
          O workflow continuara automaticamente.
          Voce recebera um email quando o video estiver pronto.
        </p>

        <div className="bg-zinc-800 rounded-xl p-4 mb-6">
          <p className="text-sm text-zinc-400">Proximos passos:</p>
          <ul className="text-left text-sm text-zinc-300 mt-2 space-y-1">
            <li>1. Geracao do storyboard</li>
            <li>2. Renderizacao do video</li>
            <li>3. Upload para YouTube</li>
          </ul>
        </div>

        <Link
          href="/"
          className="inline-flex items-center gap-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white font-semibold rounded-xl transition-all"
        >
          Voltar ao Dashboard
          <ArrowRight className="w-4 h-4" />
        </Link>
      </div>
    </div>
  );
}

```

---
#### `app/documentation/design-system/page.tsx`

```
'use client';

import { useState } from 'react';
import {
  Palette,
  Type,
  Box,
  Layers,
  Sparkles,
  Zap,
  MousePointer2,
  Layout,
  Circle,
  CheckCircle2,
  AlertCircle,
  XCircle,
  Info,
  ChevronRight,
  Loader2,
  ArrowRight,
  Settings,
  Bell,
  Star,
} from 'lucide-react';
import {
  ColorSwatch,
  ColorPalette,
  ColorGrid,
  GradientCard,
  GradientGrid,
  TypographySample,
  TypographyScale,
  FontPreview,
  ComponentPreview,
  ComponentSection,
  PreviewGrid,
  SpacingPreview,
  ShadowPreview,
  RadiusPreview,
} from '@/components/design-system';

// Navegação do Design System
const sections = [
  { id: 'overview', label: 'Visão Geral', icon: Layout },
  { id: 'colors', label: 'Cores', icon: Palette },
  { id: 'gradients', label: 'Gradientes', icon: Sparkles },
  { id: 'typography', label: 'Tipografia', icon: Type },
  { id: 'spacing', label: 'Espaçamento', icon: Box },
  { id: 'components', label: 'Componentes', icon: Layers },
  { id: 'motion', label: 'Motion', icon: Zap },
  { id: 'guidelines', label: 'Guidelines', icon: MousePointer2 },
];

export default function DesignSystemPage() {
  const [activeSection, setActiveSection] = useState('overview');

  const scrollToSection = (id: string) => {
    setActiveSection(id);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  };

  return (
    <div className="min-h-screen bg-layer-0">
      {/* Header Hero */}
      <header className="relative overflow-hidden border-b border-border-subtle">
        {/* Background Effects */}
        <div className="absolute inset-0 bg-gradient-orion-deep opacity-50" />
        <div className="absolute inset-0" style={{ background: 'var(--gradient-mesh)' }} />

        <div className="relative max-w-7xl mx-auto px-6 py-16 sm:py-24">
          <div className="flex items-center gap-3 mb-6">
            <div className="w-12 h-12 rounded-xl bg-gradient-cyan-blue flex items-center justify-center shadow-glow-md">
              <Palette className="w-6 h-6 text-white" />
            </div>
            <span className="badge-info">v1.0</span>
          </div>

          <h1 className="text-4xl sm:text-5xl lg:text-6xl font-bold text-foreground mb-4">
            ORION{' '}
            <span className="text-gradient">Design System</span>
          </h1>

          <p className="text-lg sm:text-xl text-foreground-secondary max-w-2xl mb-8">
            Sistema de design completo para a plataforma ORION. Uma linguagem visual
            unificada que guia todas as experiências do produto.
          </p>

          <div className="flex flex-wrap gap-4">
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Dark-first</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Glassmorphism</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Motion disciplinado</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Acessível</span>
            </div>
          </div>
        </div>
      </header>

      <div className="max-w-7xl mx-auto px-6 py-12">
        <div className="flex flex-col lg:flex-row gap-12">
          {/* Sidebar Navigation */}
          <aside className="lg:w-64 shrink-0">
            <nav className="lg:sticky lg:top-6 space-y-1">
              {sections.map((section) => {
                const Icon = section.icon;
                const isActive = activeSection === section.id;

                return (
                  <button
                    key={section.id}
                    onClick={() => scrollToSection(section.id)}
                    className={`
                      w-full flex items-center gap-3 px-4 py-3 rounded-lg
                      transition-all duration-200 text-left
                      ${isActive
                        ? 'bg-surface-glass border border-border-active text-foreground shadow-glow-sm'
                        : 'text-foreground-muted hover:text-foreground hover:bg-surface-glass-subtle'
                      }
                    `}
                  >
                    <Icon className="w-5 h-5" />
                    <span className="font-medium">{section.label}</span>
                    {isActive && (
                      <ChevronRight className="w-4 h-4 ml-auto" />
                    )}
                  </button>
                );
              })}
            </nav>
          </aside>

          {/* Main Content */}
          <main className="flex-1 space-y-24">
            {/* Overview */}
            <section id="overview" className="scroll-mt-6">
              <SectionHeader
                title="Visão Geral"
                description="Fundamentos e princípios do Design System ORION."
              />

              <div className="grid md:grid-cols-2 gap-6 mt-8">
                <PrincipleCard
                  icon={<Circle className="w-6 h-6" />}
                  title="Dark-First"
                  description="Projetado primariamente para modo escuro. Um centro de comando para produção de vídeos exige foco e redução de fadiga visual."
                />
                <PrincipleCard
                  icon={<Layers className="w-6 h-6" />}
                  title="Profundidade"
                  description="Sistema de camadas (layers) que cria hierarquia visual clara. Do layer-0 mais profundo ao layer-4 mais elevado."
                />
                <PrincipleCard
                  icon={<Sparkles className="w-6 h-6" />}
                  title="Glassmorphism Moderado"
                  description="Efeitos de vidro sutis para criar sofisticação sem comprometer legibilidade ou performance."
                />
                <PrincipleCard
                  icon={<Zap className="w-6 h-6" />}
                  title="Motion Funcional"
                  description="Animações servem a um propósito: feedback, transição de contexto ou indicação de estado. Nunca decorativas."
                />
              </div>

              {/* Color Identity */}
              <div className="mt-12 card-glass p-8 rounded-2xl">
                <h3 className="text-xl font-semibold text-foreground mb-6">Identidade de Cores</h3>
                <div className="grid md:grid-cols-3 gap-8">
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-gradient-cyan-blue shadow-glow-md" />
                    <div>
                      <h4 className="font-semibold text-foreground">Azul ORION + Cyan</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Cor principal. Transmite confiança, tecnologia e profissionalismo.
                        Usado em CTAs primários, estados ativos e elementos de foco.
                      </p>
                    </div>
                  </div>
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-orion-red-600 shadow-lg" />
                    <div>
                      <h4 className="font-semibold text-foreground">Vermelho ORION</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Acento crítico do logo. Estritamente limitado a CTAs críticos,
                        estados de erro ou ações irreversíveis.
                      </p>
                    </div>
                  </div>
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-gradient-orion-deep" />
                    <div>
                      <h4 className="font-semibold text-foreground">Azul Profundo</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Base do sistema. Múltiplas camadas de azul escuro criam
                        profundidade e hierarquia visual.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* Colors */}
            <section id="colors" className="scroll-mt-6">
              <SectionHeader
                title="Cores"
                description="Paleta completa de cores do sistema ORION."
              />

              {/* Background Layers */}
              <ColorGrid
                title="Backgrounds (Layers)"
                description="Sistema de camadas para criar profundidade visual."
                className="mt-8"
              >
                <ColorSwatch name="Layer 0" value="#050A12" cssVariable="--bg-layer-0" />
                <ColorSwatch name="Layer 1" value="#0A1628" cssVariable="--bg-layer-1" />
                <ColorSwatch name="Layer 2" value="#0F2341" cssVariable="--bg-layer-2" />
                <ColorSwatch name="Layer 3" value="#1A3A5C" cssVariable="--bg-layer-3" />
                <ColorSwatch name="Layer 4" value="#245177" cssVariable="--bg-layer-4" />
              </ColorGrid>

              {/* Brand Colors */}
              <div className="mt-12 space-y-8">
                <ColorPalette
                  name="ORION Blue"
                  colors={[
                    { shade: '50', value: '#E8F4FC', cssVar: '--orion-blue-50' },
                    { shade: '100', value: '#C5E4F8', cssVar: '--orion-blue-100' },
                    { shade: '200', value: '#8EC8F2', cssVar: '--orion-blue-200' },
                    { shade: '300', value: '#57ACEB', cssVar: '--orion-blue-300' },
                    { shade: '400', value: '#3B82F6', cssVar: '--orion-blue-400' },
                    { shade: '500', value: '#2563EB', cssVar: '--orion-blue-500' },
                    { shade: '600', value: '#1D4ED8', cssVar: '--orion-blue-600' },
                    { shade: '700', value: '#1E3A5F', cssVar: '--orion-blue-700' },
                    { shade: '800', value: '#0F2341', cssVar: '--orion-blue-800' },
                    { shade: '900', value: '#0A1628', cssVar: '--orion-blue-900' },
                    { shade: '950', value: '#050A12', cssVar: '--orion-blue-950' },
                  ]}
                />

                <ColorPalette
                  name="Cyan (Estados Ativos)"
                  colors={[
                    { shade: '400', value: '#22D3EE', cssVar: '--accent-cyan-400' },
                    { shade: '500', value: '#06B6D4', cssVar: '--accent-cyan-500' },
                    { shade: '600', value: '#0891B2', cssVar: '--accent-cyan-600' },
                  ]}
                />

                <ColorPalette
                  name="Indigo (Estados Secundários)"
                  colors={[
                    { shade: '400', value: '#818CF8', cssVar: '--accent-indigo-400' },
                    { shade: '500', value: '#6366F1', cssVar: '--accent-indigo-500' },
                    { shade: '600', value: '#4F46E5', cssVar: '--accent-indigo-600' },
                  ]}
                />

                <ColorPalette
                  name="Violet (Decorativo)"
                  colors={[
                    { shade: '400', value: '#A78BFA', cssVar: '--accent-violet-400' },
                    { shade: '500', value: '#8B5CF6', cssVar: '--accent-violet-500' },
                    { shade: '600', value: '#7C3AED', cssVar: '--accent-violet-600' },
                  ]}
                />

                <ColorPalette
                  name="ORION Red (Acento Crítico)"
                  colors={[
                    { shade: '400', value: '#F87171', cssVar: '--orion-red-400' },
                    { shade: '500', value: '#EF4444', cssVar: '--orion-red-500' },
                    { shade: '600', value: '#DC2626', cssVar: '--orion-red-600' },
                  ]}
                />
              </div>

              {/* Semantic Colors */}
              <div className="mt-12">
                <h3 className="text-xl font-semibold text-foreground mb-6">Cores Semânticas</h3>
                <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                  <SemanticColorCard
                    name="Success"
                    icon={<CheckCircle2 className="w-5 h-5" />}
                    bgClass="bg-success-bg"
                    borderClass="border-success-border"
                    textClass="text-success-text"
                  />
                  <SemanticColorCard
                    name="Warning"
                    icon={<AlertCircle className="w-5 h-5" />}
                    bgClass="bg-warning-bg"
                    borderClass="border-warning-border"
                    textClass="text-warning-text"
                  />
                  <SemanticColorCard
                    name="Error"
                    icon={<XCircle className="w-5 h-5" />}
                    bgClass="bg-error-bg"
                    borderClass="border-error-border"
                    textClass="text-error-text"
                  />
                  <SemanticColorCard
                    name="Info"
                    icon={<Info className="w-5 h-5" />}
                    bgClass="bg-info-bg"
                    borderClass="border-info-border"
                    textClass="text-info-text"
                  />
                </div>
              </div>

              {/* Text Colors */}
              <div className="mt-12">
                <h3 className="text-xl font-semibold text-foreground mb-6">Cores de Texto</h3>
                <div className="card-glass p-6 rounded-xl space-y-4">
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground">Texto Primário</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-secondary">Texto Secundário</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-secondary</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-muted">Texto Muted</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-muted</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-disabled">Texto Disabled</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-disabled</code>
                  </div>
                </div>
              </div>
            </section>

            {/* Gradients */}
            <section id="gradients" className="scroll-mt-6">
              <SectionHeader
                title="Gradientes"
                description="Gradientes oficiais do sistema ORION."
              />

              <GradientGrid
                title="Gradientes Principais"
                description="Usados em elementos de destaque e CTAs."
                className="mt-8"
              >
                <GradientCard
                  name="Cyan Blue"
                  cssVariable="--gradient-cyan-blue"
                  gradient="linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%)"
                  description="Botões primários, CTAs"
                />
                <GradientCard
                  name="Blue Indigo"
                  cssVariable="--gradient-blue-indigo"
                  gradient="linear-gradient(135deg, #3B82F6 0%, #6366F1 100%)"
                  description="Estados ativos, foco"
                />
                <GradientCard
                  name="Violet Blue"
                  cssVariable="--gradient-violet-blue"
                  gradient="linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%)"
                  description="Elementos decorativos"
                />
              </GradientGrid>

              <GradientGrid
                title="Gradientes de Background"
                description="Usados em fundos e seções."
                className="mt-12"
              >
                <GradientCard
                  name="ORION Primary"
                  cssVariable="--gradient-orion-primary"
                  gradient="linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%)"
                  description="Headers, heroes"
                />
                <GradientCard
                  name="ORION Dark"
                  cssVariable="--gradient-orion-dark"
                  gradient="linear-gradient(180deg, #050A12 0%, #0A1628 100%)"
                  description="Fundos principais"
                />
                <GradientCard
                  name="ORION Deep"
                  cssVariable="--gradient-orion-deep"
                  gradient="linear-gradient(135deg, #050A12 0%, #0F2341 100%)"
                  description="Seções profundas"
                />
              </GradientGrid>

              <GradientGrid
                title="Gradientes de Efeito"
                description="Usados para glow e efeitos visuais."
                className="mt-12"
              >
                <GradientCard
                  name="Cyan Glow"
                  cssVariable="--gradient-cyan-glow"
                  gradient="linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%)"
                  description="Efeito de luz superior"
                />
                <GradientCard
                  name="Blue Glow"
                  cssVariable="--gradient-blue-glow"
                  gradient="linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%)"
                  description="Efeito de luz azul"
                />
                <GradientCard
                  name="Card Gradient"
                  cssVariable="--gradient-card"
                  gradient="linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%)"
                  description="Fundo de cards"
                />
              </GradientGrid>
            </section>

            {/* Typography */}
            <section id="typography" className="scroll-mt-6">
              <SectionHeader
                title="Tipografia"
                description="Sistema tipográfico do ORION."
              />

              <FontPreview />

              <TypographyScale
                title="Escala de Tamanhos"
                description="Tamanhos de fonte padronizados."
                className="mt-12"
              >
                <TypographySample
                  name="Display Large"
                  description="Títulos hero"
                  fontClass="text-5xl font-bold tracking-tight"
                  specs={{ size: '3rem / 48px', weight: '700', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Display Medium"
                  description="Títulos de seção"
                  fontClass="text-4xl font-bold tracking-tight"
                  specs={{ size: '2.25rem / 36px', weight: '700', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Heading 1"
                  description="Títulos principais"
                  fontClass="text-3xl font-semibold"
                  specs={{ size: '1.875rem / 30px', weight: '600', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Heading 2"
                  description="Subtítulos"
                  fontClass="text-2xl font-semibold"
                  specs={{ size: '1.5rem / 24px', weight: '600', lineHeight: '1.33' }}
                />
                <TypographySample
                  name="Heading 3"
                  description="Títulos de card"
                  fontClass="text-xl font-semibold"
                  specs={{ size: '1.25rem / 20px', weight: '600', lineHeight: '1.4' }}
                />
                <TypographySample
                  name="Body Large"
                  description="Texto de destaque"
                  fontClass="text-lg"
                  specs={{ size: '1.125rem / 18px', weight: '400', lineHeight: '1.625' }}
                />
                <TypographySample
                  name="Body"
                  description="Texto padrão"
                  fontClass="text-base"
                  specs={{ size: '1rem / 16px', weight: '400', lineHeight: '1.5' }}
                />
                <TypographySample
                  name="Body Small"
                  description="Texto secundário"
                  fontClass="text-sm"
                  specs={{ size: '0.875rem / 14px', weight: '400', lineHeight: '1.43' }}
                />
                <TypographySample
                  name="Caption"
                  description="Legendas e labels"
                  fontClass="text-xs"
                  specs={{ size: '0.75rem / 12px', weight: '400', lineHeight: '1.33' }}
                />
                <TypographySample
                  name="Code"
                  description="Código e dados"
                  fontClass="text-sm font-mono"
                  sampleText="const orion = 'design-system';"
                  specs={{ size: '0.875rem / 14px', weight: '400' }}
                />
              </TypographyScale>
            </section>

            {/* Spacing */}
            <section id="spacing" className="scroll-mt-6">
              <SectionHeader
                title="Espaçamento"
                description="Sistema de espaçamento baseado em múltiplos de 4px."
              />

              <div className="mt-8 grid md:grid-cols-2 gap-8">
                {/* Spacing Scale */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-6">Escala Base</h3>
                  <div className="space-y-4">
                    <SpacingPreview name="0.5" value="0.125rem" />
                    <SpacingPreview name="1" value="0.25rem" />
                    <SpacingPreview name="2" value="0.5rem" />
                    <SpacingPreview name="3" value="0.75rem" />
                    <SpacingPreview name="4" value="1rem" />
                    <SpacingPreview name="6" value="1.5rem" />
                    <SpacingPreview name="8" value="2rem" />
                    <SpacingPreview name="12" value="3rem" />
                    <SpacingPreview name="16" value="4rem" />
                    <SpacingPreview name="24" value="6rem" />
                  </div>
                </div>

                {/* Border Radius */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-6">Border Radius</h3>
                  <div className="grid grid-cols-4 gap-4">
                    <RadiusPreview name="sm" radius="0.25rem" />
                    <RadiusPreview name="md" radius="0.375rem" />
                    <RadiusPreview name="lg" radius="0.5rem" />
                    <RadiusPreview name="xl" radius="0.75rem" />
                    <RadiusPreview name="2xl" radius="1rem" />
                    <RadiusPreview name="3xl" radius="1.5rem" />
                    <RadiusPreview name="4xl" radius="2rem" />
                    <RadiusPreview name="full" radius="9999px" />
                  </div>
                </div>
              </div>

              {/* Shadows */}
              <div className="mt-8">
                <h3 className="text-xl font-semibold text-foreground mb-6">Sombras</h3>
                <div className="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-8">
                  <ShadowPreview name="Card" shadow="var(--shadow-card)" />
                  <ShadowPreview name="Card Hover" shadow="var(--shadow-card-hover)" />
                  <ShadowPreview name="Elevated" shadow="var(--shadow-card-elevated)" />
                  <ShadowPreview name="Glow Blue" shadow="var(--shadow-glow-blue)" />
                  <ShadowPreview name="Glow Cyan" shadow="var(--shadow-glow-cyan)" />
                  <ShadowPreview name="Glow Violet" shadow="var(--shadow-glow-violet)" />
                </div>
              </div>
            </section>

            {/* Components */}
            <section id="components" className="scroll-mt-6">
              <SectionHeader
                title="Componentes"
                description="Componentes UI do sistema ORION."
              />

              {/* Buttons */}
              <ComponentSection
                title="Botões"
                description="Sistema completo de botões com variantes e estados."
                className="mt-8"
              >
                <ComponentPreview
                  title="Variantes de Botão"
                  description="6 variantes para diferentes contextos."
                >
                  <div className="flex flex-wrap gap-4">
                    <button className="btn-primary">Primary</button>
                    <button className="btn-secondary">Secondary</button>
                    <button className="btn-outline">Outline</button>
                    <button className="btn-ghost">Ghost</button>
                    <button className="btn-success">Success</button>
                    <button className="btn-danger">Danger</button>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Tamanhos"
                  description="3 tamanhos disponíveis."
                >
                  <div className="flex flex-wrap items-center gap-4">
                    <button className="btn-primary btn-sm">Small</button>
                    <button className="btn-primary">Medium</button>
                    <button className="btn-primary btn-lg">Large</button>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Estados"
                  description="Estados de loading e disabled."
                >
                  <div className="flex flex-wrap items-center gap-4">
                    <button className="btn-primary" disabled>
                      Disabled
                    </button>
                    <button className="btn-primary flex items-center gap-2">
                      <Loader2 className="w-4 h-4 animate-spin" />
                      Loading
                    </button>
                    <button className="btn-primary flex items-center gap-2">
                      Continuar
                      <ArrowRight className="w-4 h-4" />
                    </button>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Badges */}
              <ComponentSection
                title="Badges"
                description="Indicadores de status e tags."
                className="mt-12"
              >
                <ComponentPreview
                  title="Variantes Semânticas"
                  description="Badges para diferentes estados."
                >
                  <div className="flex flex-wrap gap-3">
                    <span className="badge-success">Success</span>
                    <span className="badge-warning">Warning</span>
                    <span className="badge-error">Error</span>
                    <span className="badge-info">Info</span>
                    <span className="badge-default">Default</span>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Com Ícones"
                  description="Badges com ícones para mais contexto."
                >
                  <div className="flex flex-wrap gap-3">
                    <span className="badge-success flex items-center gap-1.5">
                      <CheckCircle2 className="w-3.5 h-3.5" />
                      Aprovado
                    </span>
                    <span className="badge-warning flex items-center gap-1.5">
                      <AlertCircle className="w-3.5 h-3.5" />
                      Pendente
                    </span>
                    <span className="badge-error flex items-center gap-1.5">
                      <XCircle className="w-3.5 h-3.5" />
                      Rejeitado
                    </span>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Cards */}
              <ComponentSection
                title="Cards"
                description="Containers com diferentes níveis de elevação."
                className="mt-12"
              >
                <PreviewGrid cols={3}>
                  <div className="card p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Padrão</h4>
                    <p className="text-sm text-foreground-muted">
                      Card básico com background sutil e borda.
                    </p>
                  </div>
                  <div className="card-elevated p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Elevado</h4>
                    <p className="text-sm text-foreground-muted">
                      Card com sombra para maior destaque.
                    </p>
                  </div>
                  <div className="card-glass p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Glass</h4>
                    <p className="text-sm text-foreground-muted">
                      Card com efeito glassmorphism.
                    </p>
                  </div>
                  <div className="card-hover p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Hover</h4>
                    <p className="text-sm text-foreground-muted">
                      Passe o mouse para ver o efeito.
                    </p>
                  </div>
                  <div className="card p-6 glow-hover border border-border-subtle">
                    <h4 className="font-semibold text-foreground mb-2">Card Glow</h4>
                    <p className="text-sm text-foreground-muted">
                      Com efeito de glow no hover.
                    </p>
                  </div>
                </PreviewGrid>
              </ComponentSection>

              {/* Form Elements */}
              <ComponentSection
                title="Formulários"
                description="Inputs, selects e outros elementos de formulário."
                className="mt-12"
              >
                <ComponentPreview
                  title="Inputs"
                  description="Campos de entrada de texto."
                >
                  <div className="space-y-4 max-w-md">
                    <div>
                      <label className="label">Label padrão</label>
                      <input type="text" className="input" placeholder="Digite algo..." />
                    </div>
                    <div>
                      <label className="label">Textarea</label>
                      <textarea className="textarea" placeholder="Descrição..." rows={3} />
                    </div>
                    <div>
                      <label className="label">Select</label>
                      <select className="select">
                        <option>Opção 1</option>
                        <option>Opção 2</option>
                        <option>Opção 3</option>
                      </select>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Step Indicators */}
              <ComponentSection
                title="Step Indicators"
                description="Indicadores de progresso do workflow."
                className="mt-12"
              >
                <ComponentPreview
                  title="Estados de Step"
                  description="Diferentes estados do indicador de step."
                >
                  <div className="flex items-center gap-4">
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-completed">
                        <CheckCircle2 className="w-5 h-5" />
                      </div>
                      <span className="text-xs text-foreground-muted">Completed</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-active">2</div>
                      <span className="text-xs text-foreground-muted">Active</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-pending">3</div>
                      <span className="text-xs text-foreground-muted">Pending</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-locked">4</div>
                      <span className="text-xs text-foreground-muted">Locked</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-error">
                        <XCircle className="w-5 h-5" />
                      </div>
                      <span className="text-xs text-foreground-muted">Error</span>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Status Indicators */}
              <ComponentSection
                title="Status Indicators"
                description="Pontos de status para indicar estados."
                className="mt-12"
              >
                <ComponentPreview
                  title="Status Dots"
                  description="Indicadores visuais de status."
                >
                  <div className="flex items-center gap-6">
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-online" />
                      <span className="text-sm text-foreground-muted">Online</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-offline" />
                      <span className="text-sm text-foreground-muted">Offline</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-warning" />
                      <span className="text-sm text-foreground-muted">Warning</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-error" />
                      <span className="text-sm text-foreground-muted">Error</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot-pulse status-online" />
                      <span className="text-sm text-foreground-muted">Pulse</span>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>
            </section>

            {/* Motion */}
            <section id="motion" className="scroll-mt-6">
              <SectionHeader
                title="Motion"
                description="Sistema de animações e transições."
              />

              <div className="mt-8 space-y-8">
                {/* Duration */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-4">Durações</h3>
                  <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Fast</p>
                      <p className="text-xs text-foreground-muted font-mono">150ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Micro-interações, hovers</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Normal</p>
                      <p className="text-xs text-foreground-muted font-mono">200ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Transições padrão</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Slow</p>
                      <p className="text-xs text-foreground-muted font-mono">300ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Transições de entrada</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Slower</p>
                      <p className="text-xs text-foreground-muted font-mono">500ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Animações complexas</p>
                    </div>
                  </div>
                </div>

                {/* Easings */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-4">Easings</h3>
                  <div className="grid sm:grid-cols-2 gap-4">
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease In Out</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.4, 0, 0.2, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Padrão para a maioria das transições</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease Out</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0, 0, 0.2, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Elementos entrando na tela</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease In</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.4, 0, 1, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Elementos saindo da tela</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Spring</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.175, 0.885, 0.32, 1.275)</p>
                      <p className="text-xs text-foreground-muted mt-2">Animações com bounce sutil</p>
                    </div>
                  </div>
                </div>

                {/* Animation Examples */}
                <ComponentPreview
                  title="Exemplos de Animação"
                  description="Animações disponíveis no sistema."
                >
                  <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <AnimationDemo name="Pulse Glow" className="animate-pulse-glow" />
                    <AnimationDemo name="Float" className="animate-float" />
                    <AnimationDemo name="Shimmer" className="shimmer bg-layer-2" />
                    <AnimationDemo name="Spinner" hasSpinner />
                  </div>
                </ComponentPreview>
              </div>
            </section>

            {/* Guidelines */}
            <section id="guidelines" className="scroll-mt-6">
              <SectionHeader
                title="Guidelines"
                description="Diretrizes de uso do Design System."
              />

              <div className="mt-8 space-y-8">
                {/* Glassmorphism */}
                <GuidelineCard
                  title="Glassmorphism"
                  description="Quando usar e quando evitar efeitos de vidro."
                >
                  <div className="grid md:grid-cols-2 gap-6">
                    <div>
                      <h4 className="text-sm font-semibold text-success-text mb-3 flex items-center gap-2">
                        <CheckCircle2 className="w-4 h-4" />
                        Usar para
                      </h4>
                      <ul className="space-y-2 text-sm text-foreground-muted">
                        <li>Cards sobre backgrounds com gradiente</li>
                        <li>Modais e overlays</li>
                        <li>Navegação flutuante</li>
                        <li>Elementos que precisam de profundidade</li>
                      </ul>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-error-text mb-3 flex items-center gap-2">
                        <XCircle className="w-4 h-4" />
                        Evitar para
                      </h4>
                      <ul className="space-y-2 text-sm text-foreground-muted">
                        <li>Texto pequeno ou crítico</li>
                        <li>Muitos elementos em sequência</li>
                        <li>Dispositivos de baixa performance</li>
                        <li>Elementos com muito conteúdo</li>
                      </ul>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Cor Vermelha */}
                <GuidelineCard
                  title="Uso do Vermelho ORION"
                  description="O vermelho é reservado para situações específicas."
                >
                  <div className="space-y-4">
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Ações destrutivas</p>
                        <p className="text-xs text-foreground-muted">Deletar, cancelar assinatura, remover acesso</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Estados de erro</p>
                        <p className="text-xs text-foreground-muted">Validação de formulário, falhas de sistema</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Alertas críticos</p>
                        <p className="text-xs text-foreground-muted">Downtime, problemas de segurança</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <XCircle className="w-5 h-5 text-error-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Nunca usar para</p>
                        <p className="text-xs text-foreground-muted">CTAs primários, decoração, ênfase geral</p>
                      </div>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Motion */}
                <GuidelineCard
                  title="Disciplina de Motion"
                  description="Animações devem servir a um propósito."
                >
                  <div className="grid md:grid-cols-3 gap-6">
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Zap className="w-4 h-4 text-cyan-400" />
                        Feedback
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Indicar que uma ação foi reconhecida. Hover states, cliques, submits.
                      </p>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Settings className="w-4 h-4 text-cyan-400" />
                        Transição
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Suavizar mudanças de contexto. Página, modal, painel lateral.
                      </p>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Bell className="w-4 h-4 text-cyan-400" />
                        Estado
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Indicar status atual. Loading, processando, aguardando.
                      </p>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Accessibility */}
                <GuidelineCard
                  title="Acessibilidade"
                  description="Garantindo uma experiência inclusiva."
                >
                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Contraste mínimo 4.5:1</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Texto sobre fundos deve ter contraste suficiente para leitura.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Focus visible</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Todos os elementos interativos devem ter estado de foco visível.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Reduzir movimento</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Respeitar prefers-reduced-motion do usuário.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Touch targets</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Mínimo de 44x44px para elementos tocáveis em mobile.
                      </p>
                    </div>
                  </div>
                </GuidelineCard>
              </div>
            </section>
          </main>
        </div>
      </div>

      {/* Footer */}
      <footer className="border-t border-border-subtle mt-24">
        <div className="max-w-7xl mx-auto px-6 py-12">
          <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
            <div className="flex items-center gap-3">
              <div className="w-8 h-8 rounded-lg bg-gradient-cyan-blue flex items-center justify-center">
                <Palette className="w-4 h-4 text-white" />
              </div>
              <span className="font-semibold text-foreground">ORION Design System</span>
            </div>
            <p className="text-sm text-foreground-muted">
              Single Source of Truth para a plataforma ORION
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}

// Helper Components

function SectionHeader({ title, description }: { title: string; description: string }) {
  return (
    <div className="pb-6 border-b border-border-subtle">
      <h2 className="text-3xl font-bold text-foreground">{title}</h2>
      <p className="mt-2 text-foreground-muted">{description}</p>
    </div>
  );
}

function PrincipleCard({
  icon,
  title,
  description,
}: {
  icon: React.ReactNode;
  title: string;
  description: string;
}) {
  return (
    <div className="card-glass p-6 rounded-xl glow-hover border border-border-subtle">
      <div className="w-12 h-12 rounded-xl bg-gradient-cyan-blue flex items-center justify-center text-white mb-4">
        {icon}
      </div>
      <h3 className="text-lg font-semibold text-foreground mb-2">{title}</h3>
      <p className="text-sm text-foreground-muted">{description}</p>
    </div>
  );
}

function SemanticColorCard({
  name,
  icon,
  bgClass,
  borderClass,
  textClass,
}: {
  name: string;
  icon: React.ReactNode;
  bgClass: string;
  borderClass: string;
  textClass: string;
}) {
  return (
    <div className={`p-4 rounded-xl border ${bgClass} ${borderClass}`}>
      <div className={`flex items-center gap-3 ${textClass}`}>
        {icon}
        <span className="font-medium">{name}</span>
      </div>
    </div>
  );
}

function AnimationDemo({
  name,
  className = '',
  hasSpinner = false,
}: {
  name: string;
  className?: string;
  hasSpinner?: boolean;
}) {
  return (
    <div className="text-center">
      <div
        className={`
          w-20 h-20 mx-auto rounded-xl border border-border-active
          flex items-center justify-center
          ${className}
        `}
      >
        {hasSpinner ? (
          <div className="spinner" />
        ) : (
          <div className="w-8 h-8 rounded-lg bg-gradient-cyan-blue" />
        )}
      </div>
      <p className="mt-3 text-sm text-foreground-muted">{name}</p>
    </div>
  );
}

function GuidelineCard({
  title,
  description,
  children,
}: {
  title: string;
  description: string;
  children: React.ReactNode;
}) {
  return (
    <div className="card-glass p-6 rounded-xl">
      <h3 className="text-lg font-semibold text-foreground mb-2">{title}</h3>
      <p className="text-sm text-foreground-muted mb-6">{description}</p>
      {children}
    </div>
  );
}

```

---
#### `app/documentation/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { cn } from "@/lib/utils";
import {
  exportTabAsMarkdown,
  exportAllTabsAsMarkdown,
  exportTabAsPDF,
  DocumentationTab,
} from "@/lib/documentation-export";
import {
  Brain,
  Building2,
  Plug,
  Layers,
  Compass,
  Download,
  FileText,
  FileDown,
  ChevronRight,
  BookOpen,
  Mail,
  Clock,
  Rocket,
  TrendingUp,
  GitBranch,
} from "lucide-react";
import { ShareProvider, useShare } from "@/lib/share-context";
import ShareButtons from "@/components/documentation/ShareButtons";
import Image from "next/image";

// Configuração do projeto
const PROJECT_CONFIG = {
  name: "ORION",
  subtitle: "AI Video Production Workflow - White Label SaaS Platform",
  launchDate: new Date("2025-03-15T00:00:00"),
  lastUpdate: {
    date: "23/01/2026",
    time: "20:10",
    author: "Claude",
    authorType: "ai" as const,
  },
  progress: {
    completed: 82,
    items: [
      { name: "Interface Base", percent: 100, status: "done" },
      { name: "Documentação", percent: 100, status: "done" },
      { name: "AI Agents (Inngest)", percent: 100, status: "done" },
      { name: "Prisma Database", percent: 100, status: "done" },
      { name: "Sistema de Aprovação", percent: 100, status: "done" },
      { name: "Deploy & Testes", percent: 90, status: "progress" },
    ],
  },
};

// Tab Components
import GenesisTab from "@/components/documentation/GenesisTab";
import SystemVisionTab from "@/components/documentation/SystemVisionTab";
import IntegrationsTab from "@/components/documentation/IntegrationsTab";
import TechStackTab from "@/components/documentation/TechStackTab";
import CurrentStateTab from "@/components/documentation/CurrentStateTab";
import DecisionsTab from "@/components/documentation/DecisionsTab";

// Tab content for export
import {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
  decisionsContent,
} from "@/components/documentation/content";

const tabs = [
  {
    id: "genesis",
    label: "Gênese & Intenção",
    icon: Brain,
    description: "Origem e propósito fundamental do sistema",
    component: GenesisTab,
    gradient: "from-purple-500 to-indigo-600",
  },
  {
    id: "system-vision",
    label: "Visão Sistêmica",
    icon: Building2,
    description: "Funcionamento e arquitetura operacional",
    component: SystemVisionTab,
    gradient: "from-blue-500 to-cyan-600",
  },
  {
    id: "integrations",
    label: "Integrações & APIs",
    icon: Plug,
    description: "Conexões externas e fluxo de dados",
    component: IntegrationsTab,
    gradient: "from-green-500 to-emerald-600",
  },
  {
    id: "tech-stack",
    label: "Stack Tecnológica",
    icon: Layers,
    description: "Tecnologias e linguagens utilizadas",
    component: TechStackTab,
    gradient: "from-orange-500 to-amber-600",
  },
  {
    id: "current-state",
    label: "Estado Atual",
    icon: Compass,
    description: "Status do projeto e próximos passos",
    component: CurrentStateTab,
    gradient: "from-rose-500 to-pink-600",
  },
  {
    id: "decisions",
    label: "Decisoes Claude",
    icon: GitBranch,
    description: "Registro de decisoes arquiteturais e debates tecnicas",
    component: DecisionsTab,
    gradient: "from-violet-500 to-purple-600",
  },
];

// Componente de Countdown
function CountdownTimer({ targetDate }: { targetDate: Date }) {
  const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });

  useEffect(() => {
    const calculateTimeLeft = () => {
      const now = new Date();
      const difference = targetDate.getTime() - now.getTime();

      if (difference > 0) {
        setTimeLeft({
          days: Math.floor(difference / (1000 * 60 * 60 * 24)),
          hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
          minutes: Math.floor((difference / 1000 / 60) % 60),
          seconds: Math.floor((difference / 1000) % 60),
        });
      }
    };

    calculateTimeLeft();
    const timer = setInterval(calculateTimeLeft, 1000);
    return () => clearInterval(timer);
  }, [targetDate]);

  return (
    <div className="flex items-center gap-2 text-sm">
      <Rocket className="w-4 h-4 text-amber-400" />
      <span className="text-secondary">Lançamento em:</span>
      <div className="flex gap-1">
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.days}d</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.hours}h</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.minutes}m</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.seconds}s</span>
      </div>
    </div>
  );
}

// Componente de Barra de Progresso
function ProjectProgress() {
  return (
    <div className="bg-layer-1/80 border border-subtle rounded-xl p-4">
      <div className="flex items-center justify-between mb-3">
        <div className="flex items-center gap-2">
          <TrendingUp className="w-5 h-5 text-green-400" />
          <span className="font-semibold text-white">Progresso do Projeto</span>
        </div>
        <span className="text-2xl font-bold text-green-400">{PROJECT_CONFIG.progress.completed}%</span>
      </div>

      {/* Barra principal */}
      <div className="h-3 bg-layer-2 rounded-full overflow-hidden mb-4">
        <div
          className="h-full bg-gradient-to-r from-green-500 to-emerald-400 rounded-full transition-all duration-500"
          style={{ width: `${PROJECT_CONFIG.progress.completed}%` }}
        />
      </div>

      {/* Items detalhados */}
      <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
        {PROJECT_CONFIG.progress.items.map((item) => (
          <div key={item.name} className="bg-layer-2/50 rounded-lg p-2">
            <div className="flex items-center justify-between mb-1">
              <span className="text-xs text-muted truncate">{item.name}</span>
              <span className={cn(
                "text-xs font-medium",
                item.status === "done" ? "text-green-400" : "text-amber-400"
              )}>{item.percent}%</span>
            </div>
            <div className="h-1.5 bg-zinc-700 rounded-full overflow-hidden">
              <div
                className={cn(
                  "h-full rounded-full transition-all",
                  item.status === "done" ? "bg-green-500" : "bg-amber-500"
                )}
                style={{ width: `${item.percent}%` }}
              />
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// Componente Avatar do Kleiton
function KleitonAvatar({ size = 48 }: { size?: number }) {
  const [imageError, setImageError] = useState(false);

  if (imageError) {
    return (
      <div
        className="bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold"
        style={{ width: size, height: size, fontSize: size * 0.4 }}
      >
        KJ
      </div>
    );
  }

  return (
    <Image
      src="/images/kleiton-profile.jpg"
      alt="Kleiton Jatobá"
      width={size}
      height={size}
      className="rounded-full object-cover"
      onError={() => setImageError(true)}
    />
  );
}

// Componente de Última Atualização
function LastUpdateInfo() {
  return (
    <div className="flex flex-wrap items-center gap-3 text-sm bg-layer-2/50 px-3 py-2 rounded-lg">
      <Clock className="w-4 h-4 text-blue-400" />
      <div className="flex flex-wrap items-center gap-2">
        <span className="text-muted">Última atualização:</span>
        <span className="text-white font-medium">{PROJECT_CONFIG.lastUpdate.date}</span>
        <span className="text-muted">às</span>
        <span className="text-white font-medium">{PROJECT_CONFIG.lastUpdate.time}</span>
        <span className="text-muted">por</span>
        <div className="flex items-center gap-1">
          {PROJECT_CONFIG.lastUpdate.authorType === "ai" ? (
            <span className="bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded text-xs font-medium">
              🤖 {PROJECT_CONFIG.lastUpdate.author}
            </span>
          ) : (
            <span className="bg-blue-500/20 text-blue-300 px-2 py-0.5 rounded text-xs font-medium flex items-center gap-1">
              <KleitonAvatar size={16} />
              {PROJECT_CONFIG.lastUpdate.author}
            </span>
          )}
        </div>
      </div>
    </div>
  );
}

function DocumentationContent() {
  const [activeTab, setActiveTab] = useState("genesis");
  const { isSharedView, canCopy } = useShare();

  const activeTabData = tabs.find((t) => t.id === activeTab);
  const ActiveComponent = activeTabData?.component;

  // Prepare documentation tabs for export
  const documentationTabs: DocumentationTab[] = [
    { id: "genesis", title: "Gênese & Intenção do Sistema", icon: "🧠", content: genesisContent },
    { id: "system-vision", title: "Visão Sistêmica & Funcionamento", icon: "🏗️", content: systemVisionContent },
    { id: "integrations", title: "Arquitetura de Integrações & APIs", icon: "🔌", content: integrationsContent },
    { id: "tech-stack", title: "Stack Tecnológica & Linguagens", icon: "🧱", content: techStackContent },
    { id: "current-state", title: "Estado Atual & Próximos Passos", icon: "🧭", content: currentStateContent },
    { id: "decisions", title: "Decisoes Arquiteturais - Claude Code", icon: "🔀", content: decisionsContent },
  ];

  const handleExportMarkdown = () => {
    const tab = documentationTabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsMarkdown(tab);
  };

  const handleExportAllMarkdown = () => {
    exportAllTabsAsMarkdown(documentationTabs);
  };

  const handleExportPDF = () => {
    const tab = tabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsPDF(activeTab, tab.label);
  };

  return (
    <div className="min-h-full">
      {/* Header Principal com Nome do Sistema */}
      <div className="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 px-4 sm:px-8 py-6 sm:py-10">
        <div className="max-w-7xl mx-auto">
          {/* Título do Sistema */}
          <div className="text-center mb-6">
            <h1 className="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-2">
              📺 {PROJECT_CONFIG.name}
            </h1>
            <p className="text-white/90 text-base sm:text-lg">
              {PROJECT_CONFIG.subtitle}
            </p>
            <p className="text-white/70 text-sm mt-1">
              Documentação Técnica Completa
            </p>
          </div>

          {/* Countdown de Lançamento */}
          <div className="flex justify-center mb-6">
            <div className="bg-black/20 backdrop-blur-sm px-4 py-2 rounded-xl">
              <CountdownTimer targetDate={PROJECT_CONFIG.launchDate} />
            </div>
          </div>

          <div className="flex flex-col sm:flex-row sm:items-center gap-4 mb-4">
            <div className="flex items-center gap-3">
              <div className="p-2 sm:p-3 bg-white/10 backdrop-blur-sm rounded-xl">
                <BookOpen className="w-6 h-6 sm:w-8 sm:h-8 text-white" />
              </div>
              <div>
                <h2 className="text-xl sm:text-2xl font-bold text-white">
                  Documentação Viva
                </h2>
                <p className="text-white/80 text-sm sm:text-base">
                  Memória cognitiva e base de auditoria técnica
                </p>
              </div>
            </div>

            {/* Share Button - Only visible for owners */}
            {!isSharedView && (
              <div className="sm:ml-auto">
                <ShareButtons />
              </div>
            )}
          </div>

          {/* Founder Info com Foto */}
          <div className="flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-6 mb-6 p-3 sm:p-4 bg-white/10 backdrop-blur-sm rounded-xl">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full overflow-hidden border-2 border-white/30">
                <KleitonAvatar size={48} />
              </div>
              <div>
                <p className="text-white font-semibold text-sm sm:text-base">Kleiton Jatobá</p>
                <p className="text-white/70 text-xs sm:text-sm">Founder & Creator</p>
              </div>
            </div>
            <div className="flex items-center gap-2 text-white/80 text-xs sm:text-sm">
              <Mail className="w-4 h-4" />
              <a href="mailto:akzdigitalbr@gmail.com" className="hover:text-white transition-colors">
                akzdigitalbr@gmail.com
              </a>
            </div>
          </div>

          {/* Export Buttons - Only visible for owners */}
          {canCopy && (
            <div className="flex flex-wrap gap-2 sm:gap-3">
              <button
                onClick={handleExportMarkdown}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <FileText className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Aba (Markdown)</span>
                <span className="sm:hidden">Aba MD</span>
              </button>
              <button
                onClick={handleExportAllMarkdown}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <FileDown className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Tudo (Markdown)</span>
                <span className="sm:hidden">Tudo MD</span>
              </button>
              <button
                onClick={handleExportPDF}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <Download className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Aba (PDF)</span>
                <span className="sm:hidden">PDF</span>
              </button>
            </div>
          )}

          {/* Shared View Notice */}
          {isSharedView && (
            <div className="p-3 bg-amber-500/20 border border-amber-500/30 rounded-xl">
              <p className="text-amber-200 text-sm">
                Você está visualizando uma versão compartilhada desta documentação.
              </p>
            </div>
          )}
        </div>
      </div>

      {/* Seção de Progresso e Última Atualização */}
      <div className="bg-zinc-950 border-b border-subtle px-4 sm:px-8 py-4">
        <div className="max-w-7xl mx-auto space-y-4">
          {/* Última Atualização */}
          <LastUpdateInfo />

          {/* Barra de Progresso do Projeto */}
          <ProjectProgress />
        </div>
      </div>

        {/* Tab Navigation */}
        <div className="bg-layer-1/50 border-b border-subtle sticky top-0 z-10 backdrop-blur-md">
          <div className="max-w-7xl mx-auto px-4 sm:px-8">
            <div className="flex overflow-x-auto gap-1 py-2 hide-scrollbar">
              {tabs.map((tab) => {
                const Icon = tab.icon;
                const isActive = activeTab === tab.id;

                return (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={cn(
                      "flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-medium whitespace-nowrap transition-all",
                      isActive
                        ? `bg-gradient-to-r ${tab.gradient} text-white shadow-lg`
                        : "text-muted hover:text-white hover:bg-layer-2"
                    )}
                  >
                    <Icon className="w-4 h-4" />
                    <span className="hidden sm:inline">{tab.label}</span>
                    <span className="sm:hidden">{tab.label.split(' ')[0]}</span>
                  </button>
                );
              })}
            </div>
          </div>
        </div>

        {/* Tab Description */}
        {activeTabData && (
          <div className="bg-layer-1/30 border-b border-subtle">
            <div className="max-w-7xl mx-auto px-4 sm:px-8 py-3 sm:py-4">
              <div className="flex items-center gap-2 text-muted text-sm">
                <ChevronRight className="w-4 h-4 flex-shrink-0" />
                <span>{activeTabData.description}</span>
              </div>
            </div>
          </div>
        )}

        {/* Tab Content */}
        <div className="max-w-7xl mx-auto px-4 sm:px-8 py-6 sm:py-8">
          <div id={`tab-content-${activeTab}`}>
            {ActiveComponent && <ActiveComponent />}
          </div>
        </div>

      <style jsx global>{`
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        /* Protection for shared views */
        .shared-view {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }
        .shared-view * {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }
      `}</style>
    </div>
  );
}

export default function DocumentationPage() {
  return (
    <ShareProvider>
      <DocumentationContent />
    </ShareProvider>
  );
}

```

---
#### `app/globals.css`

```
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   ORION Design System - CSS Variables
   ============================================

   Paleta baseada no logo oficial ORION:
   - Azul profundo como cor dominante
   - Vermelho ORION para CTAs críticos
   - Cyan/Indigo para estados ativos

   Dark-first: Sem modo claro.
   ============================================ */

:root {
  /* ========================================
     BACKGROUNDS - Camadas de profundidade
     ======================================== */
  --bg-layer-0: #050A12;   /* Base mais profunda */
  --bg-layer-1: #0A1628;   /* Cards, sidebar */
  --bg-layer-2: #0F2341;   /* Elementos elevados */
  --bg-layer-3: #1A3A5C;   /* Hover states */
  --bg-layer-4: #245177;   /* Elementos em destaque */

  /* Aliases semânticos */
  --background: var(--bg-layer-0);
  --background-secondary: var(--bg-layer-1);
  --background-tertiary: var(--bg-layer-2);
  --background-elevated: var(--bg-layer-3);

  /* ========================================
     SURFACES - Cards e Painéis
     ======================================== */
  --surface-default: rgba(10, 22, 40, 0.8);
  --surface-elevated: rgba(15, 35, 65, 0.9);
  --surface-glass: rgba(26, 58, 92, 0.4);
  --surface-glass-subtle: rgba(10, 22, 40, 0.6);
  --surface-overlay: rgba(5, 10, 18, 0.85);

  /* ========================================
     BORDERS
     ======================================== */
  --border-subtle: rgba(30, 58, 95, 0.3);
  --border-default: rgba(30, 58, 95, 0.5);
  --border-strong: rgba(59, 130, 246, 0.4);
  --border-active: rgba(6, 182, 212, 0.5);
  --border-glow: rgba(59, 130, 246, 0.6);

  /* ========================================
     TEXT
     ======================================== */
  --foreground: #F0F4F8;
  --foreground-secondary: #94A3B8;
  --foreground-muted: #64748B;
  --foreground-disabled: #475569;
  --foreground-inverse: #0A1628;

  /* ========================================
     BRAND COLORS - ORION
     ======================================== */
  /* Azul ORION - cor principal */
  --orion-blue-50: #E8F4FC;
  --orion-blue-100: #C5E4F8;
  --orion-blue-200: #8EC8F2;
  --orion-blue-300: #57ACEB;
  --orion-blue-400: #3B82F6;
  --orion-blue-500: #2563EB;
  --orion-blue-600: #1D4ED8;
  --orion-blue-700: #1E3A5F;
  --orion-blue-800: #0F2341;
  --orion-blue-900: #0A1628;
  --orion-blue-950: #050A12;

  /* Vermelho ORION - acento crítico */
  --orion-red-400: #F87171;
  --orion-red-500: #EF4444;
  --orion-red-600: #DC2626;

  /* ========================================
     ACCENT COLORS
     ======================================== */
  /* Cyan - estados ativos, links, foco */
  --accent-cyan-400: #22D3EE;
  --accent-cyan-500: #06B6D4;
  --accent-cyan-600: #0891B2;

  /* Indigo - estados secundários */
  --accent-indigo-400: #818CF8;
  --accent-indigo-500: #6366F1;
  --accent-indigo-600: #4F46E5;

  /* Violet - elementos decorativos */
  --accent-violet-400: #A78BFA;
  --accent-violet-500: #8B5CF6;
  --accent-violet-600: #7C3AED;

  /* ========================================
     SEMANTIC COLORS
     ======================================== */
  --success: #10B981;
  --success-bg: rgba(16, 185, 129, 0.1);
  --success-border: rgba(16, 185, 129, 0.3);
  --success-text: #34D399;

  --warning: #F59E0B;
  --warning-bg: rgba(245, 158, 11, 0.1);
  --warning-border: rgba(245, 158, 11, 0.3);
  --warning-text: #FBBF24;

  --error: #EF4444;
  --error-bg: rgba(239, 68, 68, 0.1);
  --error-border: rgba(239, 68, 68, 0.3);
  --error-text: #F87171;

  --info: #3B82F6;
  --info-bg: rgba(59, 130, 246, 0.1);
  --info-border: rgba(59, 130, 246, 0.3);
  --info-text: #60A5FA;

  /* ========================================
     EFFECTS - Glow e Highlight
     ======================================== */
  --glow-blue: rgba(59, 130, 246, 0.4);
  --glow-cyan: rgba(6, 182, 212, 0.4);
  --glow-violet: rgba(139, 92, 246, 0.4);
  --glow-red: rgba(239, 68, 68, 0.3);
  --highlight: rgba(6, 182, 212, 0.1);

  /* ========================================
     GRADIENTS
     ======================================== */
  --gradient-orion-primary: linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%);
  --gradient-orion-dark: linear-gradient(180deg, #050A12 0%, #0A1628 100%);
  --gradient-orion-deep: linear-gradient(135deg, #050A12 0%, #0F2341 100%);
  --gradient-cyan-blue: linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%);
  --gradient-blue-indigo: linear-gradient(135deg, #3B82F6 0%, #6366F1 100%);
  --gradient-violet-blue: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%);
  --gradient-cyan-glow: linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%);
  --gradient-blue-glow: linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%);
  --gradient-border: linear-gradient(90deg, #3B82F6, #06B6D4, #8B5CF6, #3B82F6);
  --gradient-card: linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%);
  --gradient-card-hover: linear-gradient(180deg, rgba(26, 58, 92, 0.4) 0%, rgba(15, 35, 65, 0.6) 100%);
  --gradient-mesh: radial-gradient(at 40% 20%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 80% 80%, rgba(6, 182, 212, 0.1) 0px, transparent 50%);

  /* ========================================
     SHADOWS
     ======================================== */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  --shadow-glow-blue: 0 0 20px 0 rgba(59, 130, 246, 0.3);
  --shadow-glow-cyan: 0 0 20px 0 rgba(6, 182, 212, 0.3);
  --shadow-glow-violet: 0 0 20px 0 rgba(139, 92, 246, 0.3);
  --shadow-card: 0 4px 20px 0 rgba(0, 0, 0, 0.3);
  --shadow-card-hover: 0 8px 30px 0 rgba(0, 0, 0, 0.4), 0 0 20px 0 rgba(59, 130, 246, 0.1);
  --shadow-card-elevated: 0 12px 40px 0 rgba(0, 0, 0, 0.5);

  /* ========================================
     MOTION
     ======================================== */
  --duration-instant: 0ms;
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;

  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);

  --transition-fast: 150ms var(--ease-in-out);
  --transition-normal: 200ms var(--ease-in-out);
  --transition-slow: 300ms var(--ease-in-out);
  --transition-spring: 300ms var(--ease-spring);

  /* ========================================
     RADIUS
     ======================================== */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  --radius-3xl: 1.5rem;
  --radius-full: 9999px;

  /* ========================================
     Z-INDEX
     ======================================== */
  --z-base: 0;
  --z-raised: 10;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-overlay: 300;
  --z-modal: 400;
  --z-popover: 500;
  --z-toast: 600;
  --z-tooltip: 700;
}

/* ============================================
   BASE STYLES
   ============================================ */

body {
  color: var(--foreground);
  background: var(--background);
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: -0.01em;
}

/* Mesh background sutil para a página */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--gradient-mesh);
  pointer-events: none;
  z-index: -1;
}

/* Typography refinements */
h1, h2, h3, h4, h5, h6 {
  letter-spacing: -0.025em;
  font-weight: 600;
  color: var(--foreground);
}

/* Monospace for data/numbers */
.font-mono {
  font-family: "JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  font-feature-settings: "liga" 0;
}

/* ============================================
   SCROLLBAR
   ============================================ */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--bg-layer-3);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--bg-layer-4);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--bg-layer-3) transparent;
}

/* ============================================
   FOCUS STATES
   ============================================ */

.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  --tw-ring-color: var(--accent-cyan-500);
  --tw-ring-offset-color: var(--bg-layer-0);
}

/* Focus visible para acessibilidade */
:focus-visible {
  outline: 2px solid var(--accent-cyan-500);
  outline-offset: 2px;
}

/* ============================================
   BUTTONS - Sistema Completo
   ============================================ */

.btn {
  @apply inline-flex items-center justify-center gap-2 font-medium
         transition-all
         active:scale-[0.98]
         disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100;
  border-radius: var(--radius-lg);
  transition: var(--transition-fast);
}

/* Primary - Azul ORION com cyan glow */
.btn-primary {
  @apply btn text-white px-4 py-2.5;
  background: var(--gradient-cyan-blue);
  box-shadow: var(--shadow-glow-cyan);
}

.btn-primary:hover {
  filter: brightness(1.1);
  box-shadow: 0 0 30px 0 rgba(6, 182, 212, 0.4);
}

/* Secondary - Superfície elevada */
.btn-secondary {
  @apply btn text-white px-4 py-2.5;
  background: var(--surface-elevated);
  border: 1px solid var(--border-default);
}

.btn-secondary:hover {
  background: var(--bg-layer-3);
  border-color: var(--border-strong);
}

/* Outline - Borda com transparência */
.btn-outline {
  @apply btn px-4 py-2.5;
  background: transparent;
  border: 1px solid var(--border-default);
  color: var(--foreground-secondary);
}

.btn-outline:hover {
  border-color: var(--accent-cyan-500);
  color: var(--foreground);
  background: rgba(6, 182, 212, 0.1);
}

/* Ghost - Apenas texto */
.btn-ghost {
  @apply btn px-4 py-2.5;
  background: transparent;
  color: var(--foreground-muted);
}

.btn-ghost:hover {
  background: var(--surface-glass);
  color: var(--foreground);
}

/* Danger - Vermelho ORION (CTAs críticos) */
.btn-danger {
  @apply btn text-white px-4 py-2.5;
  background: var(--orion-red-600);
}

.btn-danger:hover {
  background: var(--orion-red-500);
  box-shadow: var(--glow-red);
}

/* Success */
.btn-success {
  @apply btn text-white px-4 py-2.5;
  background: var(--success);
  box-shadow: 0 0 15px 0 rgba(16, 185, 129, 0.3);
}

.btn-success:hover {
  filter: brightness(1.1);
}

/* Warning */
.btn-warning {
  @apply btn text-white px-4 py-2.5;
  background: var(--warning);
}

.btn-warning:hover {
  filter: brightness(1.1);
}

/* Button sizes */
.btn-sm {
  @apply text-sm px-3 py-1.5;
}

.btn-lg {
  @apply text-base px-6 py-3;
}

/* ============================================
   FORM ELEMENTS
   ============================================ */

.input {
  @apply w-full px-4 py-2.5 text-white placeholder-zinc-500;
  background: var(--bg-layer-1);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  transition: var(--transition-fast);
}

.input:hover {
  border-color: var(--border-strong);
}

.input:focus {
  outline: none;
  border-color: var(--accent-cyan-500);
  box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
}

.textarea {
  @apply input resize-none min-h-[100px];
}

.label {
  @apply block text-sm font-medium mb-2 tracking-wide;
  color: var(--foreground-secondary);
}

.select {
  @apply input appearance-none cursor-pointer
         bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%2394A3B8%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E')]
         bg-no-repeat bg-[right_0.75rem_center] bg-[length:1rem] pr-10;
}

/* ============================================
   CARDS - Sistema de Profundidade
   ============================================ */

.card {
  background: var(--surface-default);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  backdrop-filter: blur(12px);
}

.card-elevated {
  @apply card;
  background: var(--surface-elevated);
  box-shadow: var(--shadow-card);
}

/* Card com hover effect */
.card-hover {
  @apply card;
  transition: var(--transition-slow);
}

.card-hover:hover {
  border-color: var(--border-strong);
  box-shadow: var(--shadow-card-hover);
  transform: translateY(-2px);
}

/* Card glassmorphism */
.card-glass {
  background: var(--surface-glass);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  backdrop-filter: blur(20px);
}

.card-glass:hover {
  border-color: var(--border-active);
}

/* Card 3D */
.card-3d {
  @apply card;
  perspective: 1000px;
  transform-style: preserve-3d;
  transition: var(--transition-slow);
}

.card-3d:hover {
  transform: rotateX(2deg) rotateY(2deg) translateY(-5px);
}

/* ============================================
   BADGES - Indicadores de Status
   ============================================ */

.badge {
  @apply inline-flex items-center px-2.5 py-1 text-xs font-medium;
  border-radius: var(--radius-full);
  border: 1px solid transparent;
  transition: var(--transition-fast);
}

.badge-success {
  @apply badge;
  background: var(--success-bg);
  color: var(--success-text);
  border-color: var(--success-border);
}

.badge-warning {
  @apply badge;
  background: var(--warning-bg);
  color: var(--warning-text);
  border-color: var(--warning-border);
}

.badge-error {
  @apply badge;
  background: var(--error-bg);
  color: var(--error-text);
  border-color: var(--error-border);
}

.badge-info {
  @apply badge;
  background: var(--info-bg);
  color: var(--info-text);
  border-color: var(--info-border);
}

.badge-default {
  @apply badge;
  background: var(--surface-glass);
  color: var(--foreground-secondary);
  border-color: var(--border-subtle);
}

/* Badge com glow */
.badge-glow {
  box-shadow: 0 0 10px 0 currentColor;
}

/* ============================================
   STEP INDICATOR - Workflow Progress
   ============================================ */

.step-indicator {
  @apply flex items-center justify-center w-10 h-10 text-sm font-semibold;
  border-radius: var(--radius-full);
  transition: var(--transition-slow);
}

.step-active {
  @apply step-indicator text-white;
  background: var(--gradient-cyan-blue);
  box-shadow: var(--shadow-glow-cyan), 0 0 0 4px rgba(6, 182, 212, 0.15);
}

.step-completed {
  @apply step-indicator text-white;
  background: var(--success);
}

.step-pending {
  @apply step-indicator;
  background: var(--bg-layer-2);
  color: var(--foreground-muted);
  border: 1px solid var(--border-default);
}

.step-locked {
  @apply step-indicator;
  background: var(--bg-layer-1);
  color: var(--foreground-disabled);
  border: 1px solid var(--border-subtle);
}

.step-error {
  @apply step-indicator text-white;
  background: var(--error);
  box-shadow: 0 0 15px 0 rgba(239, 68, 68, 0.3);
}

/* ============================================
   GLASS EFFECTS
   ============================================ */

.glass {
  background: var(--surface-glass);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border-subtle);
}

.glass-subtle {
  background: var(--surface-glass-subtle);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border-subtle);
}

.glass-strong {
  background: var(--surface-elevated);
  backdrop-filter: blur(30px);
  border: 1px solid var(--border-default);
}

/* ============================================
   GRADIENTS - Utilitários
   ============================================ */

.gradient-orion {
  background: var(--gradient-orion-primary);
}

.gradient-orion-dark {
  background: var(--gradient-orion-dark);
}

.gradient-cyan-blue {
  background: var(--gradient-cyan-blue);
}

.gradient-blue-indigo {
  background: var(--gradient-blue-indigo);
}

.gradient-violet-blue {
  background: var(--gradient-violet-blue);
}

/* Text gradient */
.text-gradient {
  @apply bg-clip-text text-transparent;
  background: var(--gradient-cyan-blue);
}

.text-gradient-violet {
  @apply bg-clip-text text-transparent;
  background: var(--gradient-violet-blue);
}

/* ============================================
   STATUS INDICATORS
   ============================================ */

.status-dot {
  @apply w-2 h-2 rounded-full;
}

.status-online {
  background: var(--success);
}

.status-offline {
  background: var(--foreground-disabled);
}

.status-warning {
  background: var(--warning);
}

.status-error {
  background: var(--error);
}

.status-loading {
  background: var(--accent-cyan-500);
}

/* Status dot com pulse */
.status-dot-pulse {
  @apply status-dot relative;
}

.status-dot-pulse::after {
  content: '';
  @apply absolute inset-0 rounded-full;
  background: inherit;
  animation: statusPulse 2s ease-in-out infinite;
}

@keyframes statusPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.5);
  }
}

/* ============================================
   LOADING STATES
   ============================================ */

/* Spinner */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.spinner {
  @apply inline-block w-5 h-5 border-2 rounded-full;
  border-color: var(--accent-cyan-500);
  border-top-color: transparent;
  animation: spin 0.6s linear infinite;
}

.spinner-sm {
  @apply w-4 h-4;
}

.spinner-lg {
  @apply w-8 h-8;
  border-width: 3px;
}

/* Skeleton loader */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  border-radius: var(--radius-md);
  background: linear-gradient(
    90deg,
    var(--bg-layer-2) 0%,
    var(--bg-layer-3) 50%,
    var(--bg-layer-2) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* ============================================
   GLOW EFFECTS
   ============================================ */

.glow-hover {
  transition: var(--transition-slow);
}

.glow-hover:hover {
  box-shadow: var(--shadow-glow-blue);
  border-color: var(--border-glow);
}

.glow-cyan-hover:hover {
  box-shadow: var(--shadow-glow-cyan);
  border-color: var(--border-active);
}

/* Pulse glow para elementos ativos */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 0 0 var(--glow-cyan);
  }
  50% {
    box-shadow: 0 0 20px 4px var(--glow-cyan);
  }
}

.animate-pulse-glow {
  animation: pulseGlow 2s ease-in-out infinite;
}

/* ============================================
   ANIMATIONS - Micro-interações
   ============================================ */

/* Fade in up */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s ease-out forwards;
}

/* Slide in right */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out forwards;
}

/* Scale in */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out forwards;
}

/* Stagger children */
.stagger-children > * {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s var(--ease-in-out);
}

.stagger-children.animate-in > *:nth-child(1) { transition-delay: 0.1s; }
.stagger-children.animate-in > *:nth-child(2) { transition-delay: 0.15s; }
.stagger-children.animate-in > *:nth-child(3) { transition-delay: 0.2s; }
.stagger-children.animate-in > *:nth-child(4) { transition-delay: 0.25s; }
.stagger-children.animate-in > *:nth-child(5) { transition-delay: 0.3s; }
.stagger-children.animate-in > *:nth-child(6) { transition-delay: 0.35s; }

.stagger-children.animate-in > * {
  opacity: 1;
  transform: translateY(0);
}

/* Dropdown animation */
.dropdown-enter {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
}

.dropdown-enter-active {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: opacity 150ms ease-out, transform 150ms ease-out;
}

.dropdown-exit {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.dropdown-exit-active {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
  transition: opacity 100ms ease-in, transform 100ms ease-in;
}

/* Scroll animations */
.scroll-animate {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.6s var(--ease-in-out);
}

.scroll-animate.animate-in {
  opacity: 1;
  transform: translateY(0);
}

.scale-on-scroll {
  opacity: 0;
  transform: scale(0.95);
  transition: all 0.5s var(--ease-in-out);
}

.scale-on-scroll.animate-in {
  opacity: 1;
  transform: scale(1);
}

.slide-left {
  opacity: 0;
  transform: translateX(-40px);
  transition: all 0.6s var(--ease-in-out);
}

.slide-right {
  opacity: 0;
  transform: translateX(40px);
  transition: all 0.6s var(--ease-in-out);
}

.slide-left.animate-in,
.slide-right.animate-in {
  opacity: 1;
  transform: translateX(0);
}

/* Float animation */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Gradient border animation */
@keyframes gradientBorder {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.gradient-border {
  position: relative;
  background: var(--gradient-border);
  background-size: 300% 300%;
  animation: gradientBorder 4s ease infinite;
}

/* Data flow animation */
@keyframes dataFlow {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.data-flow {
  background: linear-gradient(90deg, transparent, var(--glow-cyan), transparent);
  background-size: 200% 100%;
  animation: dataFlow 2s linear infinite;
}

/* Typewriter effect */
@keyframes typewriter {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

.typewriter {
  overflow: hidden;
  white-space: nowrap;
  animation: typewriter 2s steps(40) forwards;
}

/* Progress bar */
@keyframes progressFill {
  from {
    width: 0;
  }
}

.progress-animate {
  animation: progressFill 1s ease-out forwards;
}

/* Pulsing node */
@keyframes pulseNode {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 var(--glow-blue);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 20px 5px var(--glow-blue);
  }
}

.pulse-node {
  animation: pulseNode 2s ease-in-out infinite;
}

/* Line pulse */
@keyframes linePulse {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 1;
  }
}

.line-pulse {
  animation: linePulse 1.5s ease-in-out infinite;
}

/* Flow line */
@keyframes flowLine {
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.flow-line {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: flowLine 2s ease forwards;
}

/* Shimmer overlay */
.shimmer {
  position: relative;
  overflow: hidden;
}

.shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.08),
    transparent
  );
  animation: shimmerMove 2s infinite;
}

@keyframes shimmerMove {
  100% {
    left: 100%;
  }
}

/* ============================================
   PAGE TRANSITIONS
   ============================================ */

.page-transition-enter {
  opacity: 0;
  transform: translateY(10px);
}

.page-transition-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: all 0.3s ease;
}

.page-transition-exit {
  opacity: 1;
}

.page-transition-exit-active {
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* ============================================
   MOBILE RESPONSIVE
   ============================================ */

/* Safe area padding */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Touch-friendly targets */
@media (hover: none) and (pointer: coarse) {
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Better mobile scrolling */
.mobile-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* No select */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* ============================================
   UTILITIES
   ============================================ */

/* Text colors */
.text-primary {
  color: var(--foreground);
}

.text-secondary {
  color: var(--foreground-secondary);
}

.text-muted {
  color: var(--foreground-muted);
}

.text-disabled {
  color: var(--foreground-disabled);
}

/* Background colors */
.bg-layer-0 {
  background: var(--bg-layer-0);
}

.bg-layer-1 {
  background: var(--bg-layer-1);
}

.bg-layer-2 {
  background: var(--bg-layer-2);
}

.bg-layer-3 {
  background: var(--bg-layer-3);
}

.bg-layer-4 {
  background: var(--bg-layer-4);
}

/* Border colors */
.border-subtle {
  border-color: var(--border-subtle);
}

.border-default {
  border-color: var(--border-default);
}

.border-strong {
  border-color: var(--border-strong);
}

.border-active {
  border-color: var(--border-active);
}

/* Parallax helper */
.parallax-slow {
  will-change: transform;
  transform: translateZ(0);
}

```

---
#### `app/layout.tsx`

```
import type { Metadata } from "next";
import "./globals.css";
import Layout from "@/components/Layout";
import { VercelToolbar } from "@/components/VercelToolbar";
import { getBrandingConfig } from "@/lib/branding";
import { Analytics } from "@vercel/analytics/react";
import { SpeedInsights } from "@vercel/speed-insights/next";

export async function generateMetadata(): Promise<Metadata> {
  const branding = await getBrandingConfig();

  return {
    title: branding.systemName,
    description: "AI Video Production Workflow - White Label SaaS Platform",
  };
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="pt-BR" className="dark">
      <body className="font-sans bg-[#09090b] text-white">
        {/* O Layout aqui garante que o Menu Lateral apareça sempre */}
        <Layout>
          {children}
        </Layout>
        {/* Vercel Toolbar - habilitado em TODOS os ambientes (dev, preview, production) */}
        {/* Permite menções @Claude e comentários visuais em produção */}
        <VercelToolbar />
        {/* Vercel Analytics & Speed Insights - Monitoramento profissional */}
        <Analytics />
        <SpeedInsights />
      </body>
    </html>
  );
}

```

---
#### `app/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { motion, AnimatePresence } from 'framer-motion';
import {
  Activity,
  ArrowRight,
  CheckCircle2,
  Clock,
  Film,
  Loader2,
  Play,
  Rocket,
  Settings,
  Sparkles,
  TrendingUp,
  Video,
  Wifi,
  WifiOff,
  Zap,
  Eye,
  BarChart3,
  Code2,
  Server,
  Brain,
} from 'lucide-react';
import {
  AreaChart,
  Area,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
  RadialBarChart,
  RadialBar,
  PolarAngleAxis,
} from 'recharts';
import { useUIStore, useBrandingStore } from '@/lib/store';

interface APIStatus {
  name: string;
  key: string;
  status: 'checking' | 'online' | 'offline' | 'error';
  icon: string;
  category: 'ai' | 'media' | 'output' | 'infra';
}

interface SystemHealth {
  overall: 'healthy' | 'degraded' | 'critical';
  onlineAPIs: number;
  totalAPIs: number;
  lastCheck: Date;
}

const API_LIST: Omit<APIStatus, 'status'>[] = [
  { name: 'Gemini', key: 'gemini', icon: '🧠', category: 'ai' },
  { name: 'OpenAI', key: 'openai', icon: '🤖', category: 'ai' },
  { name: 'Anthropic', key: 'anthropic', icon: '🔮', category: 'ai' },
  { name: 'YouTube', key: 'youtube', icon: '📺', category: 'output' },
  { name: 'Pexels', key: 'pexels', icon: '📷', category: 'media' },
  { name: 'Pixabay', key: 'pixabay', icon: '🖼️', category: 'media' },
  { name: 'ElevenLabs', key: 'elevenlabs', icon: '🎤', category: 'media' },
  { name: 'Tavily', key: 'tavily', icon: '🔍', category: 'ai' },
  { name: 'JSON2Video', key: 'json2video', icon: '🎬', category: 'output' },
  { name: 'GitHub', key: 'github', icon: '🐙', category: 'infra' },
  { name: 'Vercel', key: 'vercel', icon: '▲', category: 'infra' },
];

// Mock chart data for API availability trends (last 7 checks)
const generateChartData = (currentPercentage: number) => {
  const data = [];
  const now = new Date();

  for (let i = 6; i >= 0; i--) {
    const time = new Date(now.getTime() - i * 10 * 60 * 1000); // 10 min intervals
    const variance = Math.random() * 20 - 10; // ±10%
    const availability = Math.max(60, Math.min(100, currentPercentage + variance));

    data.push({
      time: time.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),
      availability: Math.round(availability),
    });
  }

  return data;
};

export default function DashboardPage() {
  const router = useRouter();
  const { openApiKeyModal } = useUIStore();
  const { systemName } = useBrandingStore();

  const [isLoading, setIsLoading] = useState(true);
  const [apiStatuses, setApiStatuses] = useState<APIStatus[]>([]);
  const [systemHealth, setSystemHealth] = useState<SystemHealth>({
    overall: 'healthy',
    onlineAPIs: 0,
    totalAPIs: API_LIST.length,
    lastCheck: new Date(),
  });
  const [chartData, setChartData] = useState<Array<{ time: string; availability: number }>>([]);

  useEffect(() => {
    checkSystemStatus();
  }, []);

  const checkSystemStatus = async () => {
    setIsLoading(true);

    const statuses: APIStatus[] = API_LIST.map(api => ({
      ...api,
      status: 'checking' as const,
    }));
    setApiStatuses(statuses);

    try {
      const response = await fetch('/api/status');
      const data = await response.json();

      const updatedStatuses: APIStatus[] = API_LIST.map((api) => ({
        ...api,
        status: data[api.key] === true ? 'online' : 'offline',
      }));

      setApiStatuses(updatedStatuses);

      const onlineCount = updatedStatuses.filter(s => s.status === 'online').length;
      const healthStatus: 'healthy' | 'degraded' | 'critical' =
        onlineCount === API_LIST.length ? 'healthy' :
        onlineCount >= API_LIST.length * 0.5 ? 'degraded' : 'critical';

      setSystemHealth({
        overall: healthStatus,
        onlineAPIs: onlineCount,
        totalAPIs: API_LIST.length,
        lastCheck: new Date(),
      });

      // Generate chart data based on current availability
      const currentAvailability = Math.round((onlineCount / API_LIST.length) * 100);
      setChartData(generateChartData(currentAvailability));
    } catch {
      const errorStatuses: APIStatus[] = API_LIST.map(api => ({
        ...api,
        status: 'error' as const,
      }));
      setApiStatuses(errorStatuses);
      setSystemHealth({
        overall: 'critical',
        onlineAPIs: 0,
        totalAPIs: API_LIST.length,
        lastCheck: new Date(),
      });
    } finally {
      setIsLoading(false);
    }
  };

  const categorizedAPIs = {
    ai: apiStatuses.filter(a => a.category === 'ai'),
    media: apiStatuses.filter(a => a.category === 'media'),
    output: apiStatuses.filter(a => a.category === 'output'),
    infra: apiStatuses.filter(a => a.category === 'infra'),
  };

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.1,
      },
    },
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: {
      opacity: 1,
      y: 0,
      transition: {
        type: "spring",
        stiffness: 100,
      },
    },
  };

  return (
    <div className="min-h-full pb-8">
      {/* Hero Section */}
      <motion.div
        initial={{ opacity: 0, y: -20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
        className="mb-8"
      >
        <div className="flex items-center justify-between">
          <div>
            <div className="flex items-center gap-4 mb-3">
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                transition={{ type: "spring", stiffness: 200, delay: 0.2 }}
                className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-500 flex items-center justify-center shadow-lg shadow-cyan-500/30"
              >
                <Sparkles className="w-7 h-7 text-white" />
              </motion.div>
              <div>
                <h1 className="text-4xl font-bold text-white mb-1">
                  {systemName}
                </h1>
                <p className="text-foreground-muted flex items-center gap-2">
                  <span>Mission Control</span>
                  <span className="text-foreground-muted/50">•</span>
                  <span className="text-cyan-400 font-medium">AI-Powered Production</span>
                </p>
              </div>
            </div>
          </div>

          <motion.button
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.95 }}
            onClick={() => router.push('/workflow')}
            className="relative px-8 py-3.5 rounded-xl bg-gradient-to-r from-cyan-500 via-blue-500 to-blue-600 text-white font-semibold shadow-glow-lg shadow-cyan-500/50 hover:shadow-glow-lg hover:shadow-cyan-400/70 transition-all duration-300 overflow-hidden group active:scale-95 border border-cyan-400/30 hover:border-cyan-300/60"
          >
            {/* Animated shine effect */}
            <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000" />

            <span className="relative z-10 flex items-center gap-2">
              <Rocket className="w-5 h-5 drop-shadow-glow" />
              Nova Produção
              <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform drop-shadow-glow" />
            </span>

            {/* Pulsing glow background */}
            <div className="absolute inset-0 bg-gradient-to-r from-cyan-400 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity animate-pulse-slow" />
          </motion.button>
        </div>
      </motion.div>

      {/* Bento Grid */}
      <motion.div
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        className="grid grid-cols-12 gap-4"
      >
        {/* System Health - Large Card (Spans 8 cols) */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-8"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-cyan-950/40 via-blue-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-cyan-500/20 p-6 h-full group hover:border-cyan-400/60 hover:shadow-glow-lg hover:shadow-cyan-500/50 transition-all duration-300">
            {/* Animated gradient mesh background */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay on hover */}
            <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-blue-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500/30 to-blue-500/30 border border-cyan-400/50 flex items-center justify-center shadow-glow-sm shadow-cyan-500/50 group-hover:shadow-glow-md group-hover:shadow-cyan-400/70 transition-shadow duration-300">
                    <Activity className="w-5 h-5 text-cyan-300 group-hover:text-cyan-200 transition-colors" />
                  </div>
                  <div>
                    <h2 className="text-lg font-semibold text-white">Status do Sistema</h2>
                    <p className="text-sm text-foreground-muted">Monitoramento em tempo real</p>
                  </div>
                </div>

                {/* Status Badge */}
                <div className={`flex items-center gap-2 px-4 py-2 rounded-full ${
                  systemHealth.overall === 'healthy'
                    ? 'bg-success/10 border border-success/20'
                    : systemHealth.overall === 'degraded'
                    ? 'bg-warning/10 border border-warning/20'
                    : 'bg-error/10 border border-error/20'
                }`}>
                  <div className="relative w-2 h-2">
                    <div className={`absolute inset-0 rounded-full animate-ping opacity-75 ${
                      systemHealth.overall === 'healthy' ? 'bg-success' :
                      systemHealth.overall === 'degraded' ? 'bg-warning' : 'bg-error'
                    }`} />
                    <div className={`relative w-2 h-2 rounded-full ${
                      systemHealth.overall === 'healthy' ? 'bg-success' :
                      systemHealth.overall === 'degraded' ? 'bg-warning' : 'bg-error'
                    }`} />
                  </div>
                  <span className={`text-sm font-medium ${
                    systemHealth.overall === 'healthy' ? 'text-success' :
                    systemHealth.overall === 'degraded' ? 'text-warning' : 'text-error'
                  }`}>
                    {systemHealth.overall === 'healthy' ? 'Operacional' :
                     systemHealth.overall === 'degraded' ? 'Degradado' : 'Crítico'}
                  </span>
                </div>
              </div>

              {isLoading ? (
                <div className="flex items-center justify-center py-12">
                  <Loader2 className="w-8 h-8 text-cyan-500 animate-spin" />
                </div>
              ) : (
                <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                  <StatCard
                    label="APIs Online"
                    value={systemHealth.onlineAPIs}
                    icon={<Wifi className="w-5 h-5" />}
                    color="cyan"
                  />
                  <StatCard
                    label="APIs Offline"
                    value={systemHealth.totalAPIs - systemHealth.onlineAPIs}
                    icon={<WifiOff className="w-5 h-5" />}
                    color="rose"
                  />
                  <StatCard
                    label="Disponibilidade"
                    value={`${Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%`}
                    icon={<TrendingUp className="w-5 h-5" />}
                    color="emerald"
                  />
                  <StatCard
                    label="Última Check"
                    value={systemHealth.lastCheck.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}
                    icon={<Clock className="w-5 h-5" />}
                    color="violet"
                  />
                </div>
              )}
            </div>
          </div>
        </motion.div>

        {/* Quick Actions - Vertical Card (Spans 4 cols) */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-4"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-950/40 via-violet-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-purple-500/20 p-6 h-full group hover:border-purple-400/60 hover:shadow-glow-lg hover:shadow-purple-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-purple-500/20 via-violet-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-purple-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 border border-purple-400/50 flex items-center justify-center shadow-glow-sm shadow-purple-500/50 group-hover:shadow-glow-md group-hover:shadow-purple-400/70 transition-shadow duration-300">
                  <Zap className="w-5 h-5 text-purple-300 group-hover:text-purple-200 transition-colors" />
                </div>
                <h2 className="text-lg font-semibold text-white">Ações Rápidas</h2>
              </div>

              <div className="space-y-3">
                <ActionButton
                  icon={<Play className="w-4 h-4" />}
                  label="Iniciar Produção"
                  description="Novo workflow de vídeo"
                  onClick={() => router.push('/workflow')}
                  gradient="from-cyan-500 to-blue-500"
                />
                <ActionButton
                  icon={<Settings className="w-4 h-4" />}
                  label="Configurar APIs"
                  description="Gerenciar integrações"
                  onClick={openApiKeyModal}
                  gradient="from-violet-500 to-purple-500"
                />
                <ActionButton
                  icon={<Eye className="w-4 h-4" />}
                  label="Documentação"
                  description="Guias e referências"
                  onClick={() => router.push('/documentation')}
                  gradient="from-emerald-500 to-green-500"
                />
              </div>
            </div>
          </div>
        </motion.div>

        {/* AI Providers */}
        <APICard
          title="Provedores IA"
          icon={<Brain className="w-5 h-5 text-violet-400" />}
          apis={categorizedAPIs.ai}
          onConfigure={openApiKeyModal}
          color="violet"
        />

        {/* Media APIs */}
        <APICard
          title="Mídia"
          icon={<Film className="w-5 h-5 text-cyan-400" />}
          apis={categorizedAPIs.media}
          onConfigure={openApiKeyModal}
          color="cyan"
        />

        {/* Output */}
        <APICard
          title="Output"
          icon={<Video className="w-5 h-5 text-rose-400" />}
          apis={categorizedAPIs.output}
          onConfigure={openApiKeyModal}
          color="rose"
        />

        {/* Infrastructure */}
        <APICard
          title="Infraestrutura"
          icon={<Server className="w-5 h-5 text-amber-400" />}
          apis={categorizedAPIs.infra}
          onConfigure={openApiKeyModal}
          color="amber"
        />

        {/* Statistics with Chart - Wide Card */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-6"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-950/40 via-green-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-emerald-500/20 p-6 h-full group hover:border-emerald-400/60 hover:shadow-glow-lg hover:shadow-emerald-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-emerald-500/20 via-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-emerald-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500/30 to-green-500/30 border border-emerald-400/50 flex items-center justify-center shadow-glow-sm shadow-emerald-500/50 group-hover:shadow-glow-md group-hover:shadow-emerald-400/70 transition-shadow duration-300">
                    <BarChart3 className="w-5 h-5 text-emerald-300 group-hover:text-emerald-200 transition-colors" />
                  </div>
                  <div>
                    <h2 className="text-lg font-semibold text-white">Disponibilidade</h2>
                    <p className="text-xs text-foreground-muted">Últimos 60 minutos</p>
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-2xl font-bold text-emerald-400">
                    {Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%
                  </div>
                  <div className="text-xs text-foreground-muted">Uptime</div>
                </div>
              </div>

              <AnimatePresence mode="wait">
                {isLoading ? (
                  <motion.div
                    key="loading"
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="flex items-center justify-center h-48"
                  >
                    <Loader2 className="w-8 h-8 text-emerald-500 animate-spin" />
                  </motion.div>
                ) : (
                  <motion.div
                    key="chart"
                    initial={{ opacity: 0, scale: 0.95 }}
                    animate={{ opacity: 1, scale: 1 }}
                    exit={{ opacity: 0, scale: 0.95 }}
                    transition={{ duration: 0.3 }}
                    className="h-48"
                  >
                    <ResponsiveContainer width="100%" height="100%">
                      <AreaChart data={chartData}>
                        <defs>
                          <linearGradient id="availabilityGradient" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stopColor="#10b981" stopOpacity={0.4} />
                            <stop offset="100%" stopColor="#10b981" stopOpacity={0.0} />
                          </linearGradient>
                        </defs>
                        <CartesianGrid strokeDasharray="3 3" stroke="#334155" opacity={0.3} />
                        <XAxis
                          dataKey="time"
                          stroke="#64748b"
                          fontSize={11}
                          tickLine={false}
                          axisLine={{ stroke: '#334155' }}
                        />
                        <YAxis
                          stroke="#64748b"
                          fontSize={11}
                          tickLine={false}
                          axisLine={{ stroke: '#334155' }}
                          domain={[0, 100]}
                          ticks={[0, 25, 50, 75, 100]}
                        />
                        <Tooltip
                          contentStyle={{
                            backgroundColor: '#0f172a',
                            border: '1px solid #334155',
                            borderRadius: '8px',
                            fontSize: '12px',
                          }}
                          labelStyle={{ color: '#94a3b8' }}
                          itemStyle={{ color: '#10b981' }}
                        />
                        <Area
                          type="monotone"
                          dataKey="availability"
                          stroke="#10b981"
                          strokeWidth={2}
                          fill="url(#availabilityGradient)"
                        />
                      </AreaChart>
                    </ResponsiveContainer>
                  </motion.div>
                )}
              </AnimatePresence>
            </div>
          </div>
        </motion.div>

        {/* System Health with Radial Chart */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-6"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-950/40 via-indigo-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-blue-500/20 p-6 h-full group hover:border-blue-400/60 hover:shadow-glow-lg hover:shadow-blue-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-blue-500/20 via-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-blue-400/50 flex items-center justify-center shadow-glow-sm shadow-blue-500/50 group-hover:shadow-glow-md group-hover:shadow-blue-400/70 transition-shadow duration-300">
                  <Code2 className="w-5 h-5 text-blue-300 group-hover:text-blue-200 transition-colors" />
                </div>
                <div>
                  <h2 className="text-lg font-semibold text-white">Saúde do Sistema</h2>
                  <p className="text-xs text-foreground-muted">Status atual das APIs</p>
                </div>
              </div>

              <AnimatePresence mode="wait">
                {isLoading ? (
                  <motion.div
                    key="loading"
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="flex items-center justify-center h-48"
                  >
                    <Loader2 className="w-8 h-8 text-cyan-500 animate-spin" />
                  </motion.div>
                ) : (
                  <motion.div
                    key="radial"
                    initial={{ opacity: 0, scale: 0.95 }}
                    animate={{ opacity: 1, scale: 1 }}
                    exit={{ opacity: 0, scale: 0.95 }}
                    transition={{ duration: 0.3 }}
                    className="h-48 flex items-center"
                  >
                    <ResponsiveContainer width="100%" height="100%">
                      <RadialBarChart
                        cx="50%"
                        cy="50%"
                        innerRadius="60%"
                        outerRadius="100%"
                        data={[
                          {
                            name: 'Disponibilidade',
                            value: Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100),
                            fill: systemHealth.overall === 'healthy' ? '#10b981' :
                                  systemHealth.overall === 'degraded' ? '#f59e0b' : '#ef4444',
                          },
                        ]}
                        startAngle={90}
                        endAngle={-270}
                      >
                        <PolarAngleAxis type="number" domain={[0, 100]} tick={false} />
                        <RadialBar
                          background={{ fill: '#1e293b' }}
                          dataKey="value"
                          cornerRadius={10}
                        />
                        <text
                          x="50%"
                          y="50%"
                          textAnchor="middle"
                          dominantBaseline="middle"
                          className="fill-white text-4xl font-bold"
                        >
                          {Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%
                        </text>
                      </RadialBarChart>
                    </ResponsiveContainer>
                  </motion.div>
                )}
              </AnimatePresence>

              <div className="grid grid-cols-2 gap-3 mt-4">
                <InfoRow label="Online" value={`${systemHealth.onlineAPIs}/${systemHealth.totalAPIs}`} />
                <InfoRow label="Status" value={systemHealth.overall === 'healthy' ? '✅ OK' : systemHealth.overall === 'degraded' ? '⚠️ Degradado' : '❌ Crítico'} />
              </div>
            </div>
          </div>
        </motion.div>

        {/* CTA Banner */}
        {systemHealth.overall === 'healthy' && !isLoading && (
          <motion.div
            variants={itemVariants}
            className="col-span-12"
          >
            <div className="relative overflow-hidden rounded-2xl bg-gradient-to-r from-cyan-500/10 via-blue-500/10 to-purple-500/10 backdrop-blur-xl border border-cyan-500/20 p-6">
              <div className="absolute inset-0 bg-[linear-gradient(to_right,#0891b2_1px,transparent_1px),linear-gradient(to_bottom,#0891b2_1px,transparent_1px)] bg-[size:14px_24px] opacity-5" />

              <div className="relative z-10 flex flex-col sm:flex-row items-center justify-between gap-4">
                <div className="flex items-center gap-4">
                  <motion.div
                    animate={{ rotate: 360 }}
                    transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
                    className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/30"
                  >
                    <CheckCircle2 className="w-7 h-7 text-white" />
                  </motion.div>
                  <div>
                    <h3 className="text-lg font-semibold text-white mb-1">
                      Sistema 100% Operacional
                    </h3>
                    <p className="text-sm text-foreground-muted">
                      Todas as APIs conectadas. Pronto para produção de vídeos.
                    </p>
                  </div>
                </div>
                <motion.button
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={() => router.push('/workflow')}
                  className="px-6 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 transition-shadow flex items-center gap-2 active:scale-95"
                >
                  <Rocket className="w-5 h-5" />
                  Iniciar Produção
                  <ArrowRight className="w-5 h-5" />
                </motion.button>
              </div>
            </div>
          </motion.div>
        )}
      </motion.div>
    </div>
  );
}

// Helper Components
function StatCard({ label, value, icon, color }: { label: string; value: string | number; icon: React.ReactNode; color: string }) {
  const colorClasses = {
    cyan: 'from-cyan-500/20 to-blue-500/20 border-cyan-500/30 text-cyan-400',
    rose: 'from-rose-500/20 to-red-500/20 border-rose-500/30 text-rose-400',
    emerald: 'from-emerald-500/20 to-green-500/20 border-emerald-500/30 text-emerald-400',
    violet: 'from-violet-500/20 to-purple-500/20 border-violet-500/30 text-violet-400',
  };

  return (
    <motion.div
      whileHover={{ scale: 1.05, y: -2 }}
      className="relative overflow-hidden rounded-xl bg-layer-2/50 border border-border-subtle p-4 group cursor-default"
    >
      <div className={`absolute inset-0 bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} opacity-0 group-hover:opacity-100 transition-opacity`} />

      <div className="relative z-10">
        <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} border ${colorClasses[color as keyof typeof colorClasses].split(' ')[2]} flex items-center justify-center mb-3`}>
          <div className={colorClasses[color as keyof typeof colorClasses].split(' ')[3]}>
            {icon}
          </div>
        </div>
        <div className="text-2xl font-bold text-white mb-1">{value}</div>
        <div className="text-xs text-foreground-muted">{label}</div>
      </div>
    </motion.div>
  );
}

function ActionButton({ icon, label, description, onClick, gradient }: {
  icon: React.ReactNode;
  label: string;
  description: string;
  onClick: () => void;
  gradient: string;
}) {
  return (
    <motion.button
      whileHover={{ x: 4 }}
      whileTap={{ scale: 0.98 }}
      onClick={onClick}
      className="w-full flex items-center gap-3 p-3 rounded-xl bg-layer-2/50 border border-border-subtle hover:border-cyan-500/30 transition-all duration-200 group text-left active:scale-95"
    >
      <div className={`w-10 h-10 rounded-lg bg-gradient-to-br ${gradient} flex items-center justify-center flex-shrink-0 shadow-lg`}>
        <div className="text-white">{icon}</div>
      </div>
      <div className="flex-1 min-w-0">
        <div className="text-sm font-medium text-white group-hover:text-cyan-400 transition-colors">{label}</div>
        <div className="text-xs text-foreground-muted truncate">{description}</div>
      </div>
      <ArrowRight className="w-4 h-4 text-foreground-muted group-hover:text-cyan-400 group-hover:translate-x-1 transition-all flex-shrink-0" />
    </motion.button>
  );
}

function APICard({ title, icon, apis, onConfigure, color }: {
  title: string;
  icon: React.ReactNode;
  apis: APIStatus[];
  onConfigure: () => void;
  color: string;
}) {
  const colorClasses = {
    violet: 'from-violet-500/20 to-purple-500/20 border-violet-500/30 violet-500/5',
    cyan: 'from-cyan-500/20 to-blue-500/20 border-cyan-500/30 cyan-500/5',
    rose: 'from-rose-500/20 to-red-500/20 border-rose-500/30 rose-500/5',
    amber: 'from-amber-500/20 to-orange-500/20 border-amber-500/30 amber-500/5',
  };

  return (
    <motion.div
      variants={{
        hidden: { opacity: 0, y: 20 },
        visible: {
          opacity: 1,
          y: 0,
          transition: {
            type: "spring",
            stiffness: 100,
          },
        },
      }}
      className="col-span-12 sm:col-span-6 lg:col-span-3"
    >
      <div className={`relative overflow-hidden rounded-2xl bg-gradient-to-br from-layer-1/80 to-layer-2/50 backdrop-blur-xl border border-border-subtle p-5 h-full group hover:border-${color}-500/30 transition-all duration-300`}>
        <div className={`absolute inset-0 bg-gradient-to-br from-${color}-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300`} />

        <div className="relative z-10">
          <div className="flex items-center gap-2 mb-4">
            <div className={`w-9 h-9 rounded-lg bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} border ${colorClasses[color as keyof typeof colorClasses].split(' ')[2]} flex items-center justify-center`}>
              {icon}
            </div>
            <h3 className="font-medium text-white text-sm">{title}</h3>
          </div>

          <div className="space-y-2">
            {apis.map(api => (
              <APIRow key={api.key} api={api} onConfigure={onConfigure} />
            ))}
          </div>
        </div>
      </div>
    </motion.div>
  );
}

function APIRow({ api, onConfigure }: { api: APIStatus; onConfigure: () => void }) {
  return (
    <div className="flex items-center justify-between p-2 rounded-lg hover:bg-layer-2/50 transition-colors group/row">
      <div className="flex items-center gap-2 min-w-0">
        <span className="text-sm">{api.icon}</span>
        <span className="text-xs text-foreground truncate">{api.name}</span>
      </div>
      {api.status === 'checking' ? (
        <Loader2 className="w-3.5 h-3.5 text-cyan-400 animate-spin flex-shrink-0" />
      ) : api.status === 'online' ? (
        <div className="flex items-center gap-1 flex-shrink-0">
          <div className="w-1.5 h-1.5 rounded-full bg-success" />
          <span className="text-xs text-success">On</span>
        </div>
      ) : (
        <button
          onClick={onConfigure}
          className="text-xs text-error hover:text-error/80 transition-colors flex-shrink-0"
        >
          Off
        </button>
      )}
    </div>
  );
}

function InfoRow({ label, value }: { label: string; value: string }) {
  return (
    <div className="flex items-center justify-between p-3 rounded-lg bg-layer-2/30 border border-border-subtle">
      <span className="text-sm text-foreground-muted">{label}</span>
      <span className="text-sm font-medium text-white">{value}</span>
    </div>
  );
}

```

---
#### `app/settings/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { User, FileText, Globe, Terminal, Settings, Palette, Activity, HardDrive } from 'lucide-react';
import { ProfileTab } from '@/components/settings/ProfileTab';
import { DocsManagerTab } from '@/components/settings/DocsManagerTab';
import { IntegrationsTab } from '@/components/settings/IntegrationsTab';
import { LogsTab } from '@/components/settings/LogsTab';
import { AppearanceTab } from '@/components/settings/AppearanceTab';
import { SystemMonitorTab } from '@/components/settings/SystemMonitorTab';
import { FilesTab } from '@/components/settings/FilesTab';
import { getProfile, getDocs, getTokens } from '@/app/actions/settings';
import type { UserProfile, DocsData, IntegrationTokens, SettingsTab as TabType } from '@/types';

export default function SettingsPage() {
  const [activeTab, setActiveTab] = useState<TabType>('profile');
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [docs, setDocs] = useState<DocsData>({ pages: [], updatedAt: new Date().toISOString() });
  const [tokens, setTokens] = useState<IntegrationTokens | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadInitialData();
  }, []);

  const loadInitialData = async () => {
    setLoading(true);
    try {
      const [profileData, docsData, tokensData] = await Promise.all([
        getProfile(),
        getDocs(),
        getTokens(),
      ]);

      setProfile(profileData);
      setDocs(docsData);
      setTokens(tokensData);
    } catch (error) {
      console.error('Failed to load settings data:', error);
      alert('Erro ao carregar configurações');
    } finally {
      setLoading(false);
    }
  };

  const handleDocsUpdate = async () => {
    try {
      const docsData = await getDocs();
      setDocs(docsData);
    } catch (error) {
      console.error('Failed to reload docs:', error);
    }
  };

  const handleTokensUpdate = async () => {
    try {
      const tokensData = await getTokens();
      setTokens(tokensData);
    } catch (error) {
      console.error('Failed to reload tokens:', error);
    }
  };

  const tabs = [
    {
      id: 'profile' as TabType,
      label: 'Perfil',
      icon: User,
      color: 'indigo',
    },
    {
      id: 'appearance' as TabType,
      label: 'Aparência',
      icon: Palette,
      color: 'purple',
    },
    {
      id: 'monitor' as TabType,
      label: 'Monitor',
      icon: Activity,
      color: 'cyan',
    },
    {
      id: 'files' as TabType,
      label: 'Arquivos',
      icon: HardDrive,
      color: 'orange',
    },
    {
      id: 'docs' as TabType,
      label: 'Documentação',
      icon: FileText,
      color: 'amber',
    },
    {
      id: 'integrations' as TabType,
      label: 'Integrações',
      icon: Globe,
      color: 'blue',
    },
    {
      id: 'logs' as TabType,
      label: 'Logs',
      icon: Terminal,
      color: 'emerald',
    },
  ];

  const getTabColorClasses = (color: string) => {
    const colors = {
      indigo: {
        active: 'text-indigo-400 bg-indigo-500/10 border-2 border-indigo-500/30 shadow-glow-md shadow-indigo-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-indigo-500/20',
        indicator: 'bg-indigo-500 shadow-glow-sm shadow-indigo-500/50',
      },
      purple: {
        active: 'text-purple-400 bg-purple-500/10 border-2 border-purple-500/30 shadow-glow-md shadow-purple-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-purple-500/20',
        indicator: 'bg-purple-500 shadow-glow-sm shadow-purple-500/50',
      },
      cyan: {
        active: 'text-cyan-400 bg-cyan-500/10 border-2 border-cyan-500/30 shadow-glow-md shadow-cyan-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-cyan-500/20',
        indicator: 'bg-cyan-500 shadow-glow-sm shadow-cyan-500/50',
      },
      orange: {
        active: 'text-orange-400 bg-orange-500/10 border-2 border-orange-500/30 shadow-glow-md shadow-orange-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-orange-500/20',
        indicator: 'bg-orange-500 shadow-glow-sm shadow-orange-500/50',
      },
      amber: {
        active: 'text-amber-400 bg-amber-500/10 border-2 border-amber-500/30 shadow-glow-md shadow-amber-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-amber-500/20',
        indicator: 'bg-amber-500 shadow-glow-sm shadow-amber-500/50',
      },
      blue: {
        active: 'text-blue-400 bg-blue-500/10 border-2 border-blue-500/30 shadow-glow-md shadow-blue-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-blue-500/20',
        indicator: 'bg-blue-500 shadow-glow-sm shadow-blue-500/50',
      },
      emerald: {
        active: 'text-emerald-400 bg-emerald-500/10 border-2 border-emerald-500/30 shadow-glow-md shadow-emerald-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-emerald-500/20',
        indicator: 'bg-emerald-500 shadow-glow-sm shadow-emerald-500/50',
      },
    };

    return colors[color as keyof typeof colors] || colors.indigo;
  };

  if (loading) {
    return (
      <div className="min-h-full flex items-center justify-center">
        <div className="text-center">
          <div className="relative inline-block">
            <Settings className="w-12 h-12 text-cyan-500 mx-auto mb-4 animate-spin" />
            <div className="absolute inset-0 w-12 h-12 bg-cyan-500/20 blur-xl animate-pulse" />
          </div>
          <p className="text-muted">Carregando configurações...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-full">
      {/* Header */}
      <div className="border-b border-subtle bg-gradient-to-br from-layer-1/80 via-indigo-950/20 to-layer-1/80 backdrop-blur-sm sticky top-0 z-10 shadow-lg shadow-indigo-500/5">
        <div className="max-w-7xl mx-auto px-6 py-6">
          <div className="flex items-center gap-3">
            <div className="relative p-2.5 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-glow-md shadow-indigo-500/50 group hover:shadow-glow-lg hover:shadow-indigo-400/70 transition-all duration-300">
              <Settings className="w-6 h-6 text-white relative z-10" />
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-blue-500/20 to-purple-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
            </div>
            <div>
              <h1 className="text-2xl font-bold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent">Configurações</h1>
              <p className="text-sm text-muted">Gerencie perfil, documentação e integrações</p>
            </div>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-6 py-8">
        <div className="grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6">
          {/* Sidebar Tabs */}
          <div className="space-y-2">
            {tabs.map((tab) => {
              const Icon = tab.icon;
              const isActive = activeTab === tab.id;
              const colorClasses = getTabColorClasses(tab.color);

              return (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`w-full px-4 py-3.5 rounded-xl flex items-center gap-3 transition-all text-left relative group ${
                    isActive
                      ? colorClasses.active
                      : colorClasses.inactive
                  }`}
                >
                  <div className={`p-2 rounded-lg transition-all ${
                    isActive
                      ? 'bg-white/10 shadow-glow-sm'
                      : 'bg-layer-2 group-hover:bg-layer-3'
                  }`}>
                    <Icon className="w-4 h-4" />
                  </div>
                  <span className="font-medium">{tab.label}</span>
                  {isActive && (
                    <div className={`absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 ${colorClasses.indicator} rounded-r`} />
                  )}
                </button>
              );
            })}
          </div>

          {/* Tab Content */}
          <div className="min-h-[600px]">
            <div className="relative overflow-hidden bg-gradient-to-br from-layer-1/80 via-indigo-950/10 to-layer-2/50 backdrop-blur-xl border-2 border-subtle rounded-2xl p-8 shadow-xl hover:border-active/30 transition-all duration-300 group">
              {/* Animated gradient mesh background */}
              <div className="absolute inset-0 bg-gradient-mesh opacity-10" />

              {/* Glow overlay on hover */}
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

              {/* Shimmer effect */}
              <div className="absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-700">
                <div className="absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/10 to-transparent animate-shimmer" />
              </div>

              {/* Content */}
              <div className="relative z-10">
                {activeTab === 'profile' && profile && (
                  <div className="animate-fade-in">
                    <ProfileTab initialProfile={profile} />
                  </div>
                )}

                {activeTab === 'appearance' && (
                  <div className="animate-fade-in">
                    <AppearanceTab />
                  </div>
                )}

                {activeTab === 'monitor' && (
                  <div className="animate-fade-in">
                    <SystemMonitorTab />
                  </div>
                )}

                {activeTab === 'files' && (
                  <div className="animate-fade-in">
                    <FilesTab />
                  </div>
                )}

                {activeTab === 'docs' && (
                  <div className="animate-fade-in">
                    <DocsManagerTab initialDocs={docs.pages} onUpdate={handleDocsUpdate} />
                  </div>
                )}

                {activeTab === 'integrations' && tokens && (
                  <div className="animate-fade-in">
                    <IntegrationsTab initialTokens={tokens} onUpdate={handleTokensUpdate} />
                  </div>
                )}

                {activeTab === 'logs' && (
                  <div className="animate-fade-in">
                    <LogsTab />
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Add custom animation styles */}
      <style jsx>{`
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fade-in {
          animation: fade-in 0.3s ease-out;
        }
      `}</style>
    </div>
  );
}

```

---
#### `app/step/1-input/page.tsx`

```
"use client";

import { useState, useEffect, useRef, useCallback } from 'react';
import { Upload, Youtube, Wifi, FileText, Sparkles, CheckCircle2, RefreshCw, ArrowRight, Users, Video, Eye, X, AlertCircle, Link2, MessageSquare, Table, Tag } from "lucide-react";
import { useAPIKeysStore } from '@/lib/api-keys-store';
import { useUIStore, useWorkflowStore } from '@/lib/store';
import { useRouter } from 'next/navigation';
import { WorkflowMode } from '@/types';
import ModeSelector from '@/components/workflow/ModeSelector';

interface ServerStatus {
  openai?: boolean;
  gemini?: boolean;
  anthropic?: boolean;
  youtube?: boolean;
  pexels?: boolean;
  pixabay?: boolean;
  elevenlabs?: boolean;
  tavily?: boolean;
  json2video?: boolean;
}

interface ChannelInfo {
  name: string;
  subscribers: string;
  videos: string;
  views: string;
  thumbnail?: string;
  channelId?: string;
  channelUrl?: string;
}

export default function InputPage() {
  const router = useRouter();
  const [serverStatus, setServerStatus] = useState<ServerStatus>({});
  const [loading, setLoading] = useState(true);
  const [mounted, setMounted] = useState(false);
  const [uploadedFile, setUploadedFile] = useState<File | null>(null);
  const [isDragging, setIsDragging] = useState(false);
  const [theme, setTheme] = useState("");
  const [channelInfo, setChannelInfo] = useState<ChannelInfo | null>(null);
  const [loadingChannel, setLoadingChannel] = useState(false);
  const [hasFetchedChannel, setHasFetchedChannel] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);

  // Novos campos do Pack #1
  const [selectedMode, setSelectedMode] = useState<WorkflowMode>("FAST");
  const [tagsFoco, setTagsFoco] = useState<string>("");
  const [linkConcorrente, setLinkConcorrente] = useState<string>("");
  const [transcricao, setTranscricao] = useState<string>("");
  const [youtubeSpreadsheet, setYoutubeSpreadsheet] = useState<File | null>(null);
  const [isDraggingSpreadsheet, setIsDraggingSpreadsheet] = useState(false);
  const spreadsheetInputRef = useRef<HTMLInputElement>(null);

  // Pega as chaves que você salvou no navegador
  const { keys: localKeys } = useAPIKeysStore();
  const { openApiKeyModal } = useUIStore();
  const { setContext, setStep } = useWorkflowStore();

  useEffect(() => {
    setMounted(true);
    checkServerStatus();
  }, []);

  const checkServerStatus = async () => {
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerStatus(data);
    } catch (error) {
      console.error("Erro ao verificar status:", error);
    } finally {
      setLoading(false);
    }
  };

  // LÓGICA DE CONEXÃO HÍBRIDA (O SEGREDO ESTÁ AQUI)
  // Verifica se a chave existe no Servidor Vercel OU no seu Navegador
  const isYoutubeConnected = serverStatus.youtube || (mounted && !!localKeys.youtube_api_key && localKeys.youtube_api_key.length > 5);

  const isAIConnected =
    serverStatus.openai || (mounted && !!localKeys.openai_api_key) ||
    serverStatus.gemini || (mounted && !!localKeys.google_api_key) ||
    serverStatus.anthropic || (mounted && !!localKeys.anthropic_api_key);

  // Carregar informações do canal
  const fetchChannelInfo = useCallback(async () => {
    if (hasFetchedChannel) return; // Evita chamadas duplicadas

    setLoadingChannel(true);
    setHasFetchedChannel(true);
    try {
      // Buscar dados reais da API do YouTube
      const headers: HeadersInit = {};
      if (localKeys.youtube_api_key) {
        headers['x-youtube-api-key'] = localKeys.youtube_api_key;
      }
      if (localKeys.youtube_channel_id) {
        headers['x-youtube-channel-id'] = localKeys.youtube_channel_id;
      }

      const response = await fetch('/api/youtube/channel', { headers });

      if (!response.ok) {
        throw new Error(`Erro ao buscar dados do canal: ${response.status}`);
      }

      const data = await response.json();

      // Formatar números para exibição amigável
      const formatNumber = (num: number): string => {
        if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;
        if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;
        return num.toString();
      };

      // Buscar thumbnail do canal
      const channelResponse = await fetch(
        `https://www.googleapis.com/youtube/v3/channels?part=snippet&id=${data.channelId}&key=${localKeys.youtube_api_key}`
      );

      let thumbnailUrl = undefined;
      if (channelResponse.ok) {
        const channelData = await channelResponse.json();
        if (channelData.items && channelData.items.length > 0) {
          thumbnailUrl = channelData.items[0].snippet.thumbnails.default.url;
        }
      }

      setChannelInfo({
        name: data.title,
        subscribers: formatNumber(data.subscriberCount),
        videos: formatNumber(data.videoCount),
        views: formatNumber(data.viewCount),
        thumbnail: thumbnailUrl,
        channelId: data.channelId,
        channelUrl: `https://www.youtube.com/channel/${data.channelId}`
      });
    } catch (error) {
      console.error("Erro ao buscar info do canal:", error);
      setHasFetchedChannel(false); // Permite tentar novamente em caso de erro
    } finally {
      setLoadingChannel(false);
    }
  }, [localKeys.youtube_api_key, localKeys.youtube_channel_id, hasFetchedChannel]);

  // Carregar informações do canal quando conectado
  useEffect(() => {
    if (isYoutubeConnected && !channelInfo && !loadingChannel && !hasFetchedChannel) {
      fetchChannelInfo();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [isYoutubeConnected]);

  // Upload de arquivo
  const handleFileSelect = useCallback((file: File) => {
    if (file && (file.type === 'text/csv' || file.name.endsWith('.csv'))) {
      setUploadedFile(file);
    } else {
      alert('Por favor, selecione um arquivo CSV válido.');
    }
  }, []);

  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
  }, []);

  const handleDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
    const file = e.dataTransfer.files[0];
    if (file) handleFileSelect(file);
  }, [handleFileSelect]);

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) handleFileSelect(file);
  };

  const handleClickUpload = () => {
    fileInputRef.current?.click();
  };

  const removeFile = () => {
    setUploadedFile(null);
    if (fileInputRef.current) {
      fileInputRef.current.value = '';
    }
  };

  // Funções para planilha do YouTube Studio
  const handleSpreadsheetSelect = useCallback((file: File) => {
    const validExtensions = ['.xlsx', '.xls', '.csv'];
    const isValid = validExtensions.some(ext => file.name.toLowerCase().endsWith(ext));

    if (file && isValid) {
      setYoutubeSpreadsheet(file);
    } else {
      alert('Por favor, selecione um arquivo válido (.xlsx, .xls ou .csv).');
    }
  }, []);

  const handleSpreadsheetDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(true);
  }, []);

  const handleSpreadsheetDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(false);
  }, []);

  const handleSpreadsheetDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(false);
    const file = e.dataTransfer.files[0];
    if (file) handleSpreadsheetSelect(file);
  }, [handleSpreadsheetSelect]);

  const handleSpreadsheetInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) handleSpreadsheetSelect(file);
  };

  const handleClickSpreadsheetUpload = () => {
    spreadsheetInputRef.current?.click();
  };

  const removeSpreadsheet = () => {
    setYoutubeSpreadsheet(null);
    if (spreadsheetInputRef.current) {
      spreadsheetInputRef.current.value = '';
    }
  };

  // Avançar para próxima etapa
  // Validação: pelo menos um campo deve estar preenchido além do modo
  const hasAnyInput =
    theme.trim().length > 0 ||
    linkConcorrente.trim().length > 0 ||
    transcricao.trim().length > 0 ||
    youtubeSpreadsheet !== null;

  const canAdvance = hasAnyInput && isAIConnected;

  const handleAdvance = () => {
    if (canAdvance) {
      const now = new Date().toISOString();

      // Processar tags de foco (separar por vírgula)
      const tagsArray = tagsFoco
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);

      setContext({
        id: crypto.randomUUID(),
        createdAt: now,
        updatedAt: now,
        theme: theme.trim() || null,
        autoMode: false,
        mode: selectedMode,
        tagsFoco: tagsArray,
        linkConcorrente: linkConcorrente.trim() || null,
        dadosConcorrente: null, // Será preenchido na próxima etapa se houver link
        transcricao: transcricao.trim() || null,
        planilhaYouTubeStudio: null, // Será processado na próxima etapa se houver arquivo
        metrics: [],
        channelData: channelInfo ? {
          channelId: "user-channel",
          title: channelInfo.name,
          description: "",
          subscriberCount: parseInt(channelInfo.subscribers.replace(/[^0-9]/g, "")) || 0,
          videoCount: parseInt(channelInfo.videos.replace(/[^0-9]/g, "")) || 0,
          viewCount: parseInt(channelInfo.views.replace(/[^0-9]/g, "")) || 0,
          recentVideos: [],
        } : null,
      });
      setStep(2);
      router.push('/step/2-research');
    }
  };

  return (
    <div className="w-full space-y-6 md:space-y-8 animate-in fade-in duration-500">

      {/* Cabeçalho */}
      <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-subtle pb-6">
        <div>
          <h1 className="text-2xl sm:text-3xl font-bold text-white tracking-tight">Menu de Entrada</h1>
          <p className="text-muted mt-1 text-sm sm:text-base">Configure o contexto inicial para a produção do seu vídeo.</p>
        </div>

        <button
          onClick={() => openApiKeyModal()}
          className={`px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg font-semibold shadow-lg flex items-center gap-2 transition-all active:scale-95 whitespace-nowrap cursor-pointer hover:ring-2 text-sm sm:text-base ${
            isYoutubeConnected && isAIConnected
              ? "bg-green-600 hover:bg-green-500 text-white shadow-green-500/20 hover:ring-green-500/50"
              : "bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/20 hover:ring-indigo-500/50"
          }`}
        >
          {loading ? <RefreshCw className="w-4 h-4 animate-spin" /> : <Wifi className="w-4 h-4" />}
          {isYoutubeConnected && isAIConnected ? "Conexões Ativas" : "Conectar APIs"}
        </button>
      </div>

      {/* Seletor de Modo de Workflow */}
      <ModeSelector
        selectedMode={selectedMode}
        onSelect={setSelectedMode}
      />

      {/* Planilha do YouTube Studio */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-green-500/10 rounded-lg">
            <Table className="w-4 h-4 sm:w-5 sm:h-5 text-green-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Planilha do YouTube Studio</h3>
            <p className="text-xs text-muted">Analise dados de performance dos seus vídeos (opcional)</p>
          </div>
        </div>

        <input
          ref={spreadsheetInputRef}
          type="file"
          accept=".xlsx,.xls,.csv"
          onChange={handleSpreadsheetInputChange}
          className="hidden"
        />

        {youtubeSpreadsheet ? (
          <div className="border-2 border-green-500/30 bg-green-500/5 rounded-xl p-4 sm:p-6">
            <div className="flex items-center justify-between gap-3">
              <div className="flex items-center gap-3 min-w-0">
                <div className="p-2 sm:p-3 bg-green-500/10 rounded-full flex-shrink-0">
                  <CheckCircle2 className="w-5 h-5 sm:w-6 sm:h-6 text-green-500" />
                </div>
                <div className="min-w-0">
                  <p className="font-medium text-green-400 text-sm sm:text-base truncate">{youtubeSpreadsheet.name}</p>
                  <p className="text-muted text-xs">{(youtubeSpreadsheet.size / 1024).toFixed(1)} KB</p>
                </div>
              </div>
              <button
                onClick={removeSpreadsheet}
                className="p-2 hover:bg-red-500/10 rounded-lg transition-colors flex-shrink-0"
              >
                <X className="w-4 h-4 text-red-400" />
              </button>
            </div>
          </div>
        ) : (
          <div
            onClick={handleClickSpreadsheetUpload}
            onDragOver={handleSpreadsheetDragOver}
            onDragLeave={handleSpreadsheetDragLeave}
            onDrop={handleSpreadsheetDrop}
            className={`border-2 border-dashed rounded-xl h-32 sm:h-40 flex flex-col items-center justify-center text-muted transition-all cursor-pointer ${
              isDraggingSpreadsheet
                ? 'border-green-500 bg-green-500/10'
                : 'border-subtle hover:bg-layer-2/50 hover:border-zinc-600'
            }`}
          >
            <div className={`p-2 sm:p-3 rounded-full mb-2 sm:mb-3 shadow-inner transition-colors ${isDraggingSpreadsheet ? 'bg-green-500/20' : 'bg-layer-2'}`}>
              <Table className={`w-5 h-5 sm:w-6 sm:h-6 ${isDraggingSpreadsheet ? 'text-green-400' : 'text-muted'}`} />
            </div>
            <p className="font-medium text-foreground-secondary text-sm sm:text-base">
              {isDraggingSpreadsheet ? 'Solte a planilha aqui' : 'Clique ou arraste a planilha'}
            </p>
            <p className="text-xs text-muted mt-1">XLSX, XLS ou CSV exportado do YouTube Studio</p>
          </div>
        )}
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">

        {/* Card Upload - AGORA FUNCIONAL */}
        <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6 hover:border-default transition-all group">
          <div className="flex items-center gap-3 mb-4 sm:mb-6">
            <div className="p-2 sm:p-2.5 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors">
              <Upload className="w-4 h-4 sm:w-5 sm:h-5 text-blue-500" />
            </div>
            <div>
              <h3 className="font-semibold text-white text-base sm:text-lg">Upload de Métricas</h3>
              <p className="text-xs text-muted">Dados históricos do canal (CSV)</p>
            </div>
          </div>

          <input
            ref={fileInputRef}
            type="file"
            accept=".csv"
            onChange={handleInputChange}
            className="hidden"
          />

          {uploadedFile ? (
            <div className="border-2 border-green-500/30 bg-green-500/5 rounded-xl p-4 sm:p-6">
              <div className="flex items-center justify-between gap-3">
                <div className="flex items-center gap-3 min-w-0">
                  <div className="p-2 sm:p-3 bg-green-500/10 rounded-full flex-shrink-0">
                    <CheckCircle2 className="w-5 h-5 sm:w-6 sm:h-6 text-green-500" />
                  </div>
                  <div className="min-w-0">
                    <p className="font-medium text-green-400 text-sm sm:text-base truncate">{uploadedFile.name}</p>
                    <p className="text-muted text-xs">{(uploadedFile.size / 1024).toFixed(1)} KB</p>
                  </div>
                </div>
                <button
                  onClick={removeFile}
                  className="p-2 hover:bg-red-500/10 rounded-lg transition-colors flex-shrink-0"
                >
                  <X className="w-4 h-4 text-red-400" />
                </button>
              </div>
            </div>
          ) : (
            <div
              onClick={handleClickUpload}
              onDragOver={handleDragOver}
              onDragLeave={handleDragLeave}
              onDrop={handleDrop}
              className={`border-2 border-dashed rounded-xl h-32 sm:h-40 flex flex-col items-center justify-center text-muted transition-all cursor-pointer ${
                isDragging
                  ? 'border-blue-500 bg-blue-500/10'
                  : 'border-subtle hover:bg-layer-2/50 hover:border-zinc-600'
              }`}
            >
              <div className={`p-2 sm:p-3 rounded-full mb-2 sm:mb-3 shadow-inner transition-colors ${isDragging ? 'bg-blue-500/20' : 'bg-layer-2'}`}>
                <FileText className={`w-5 h-5 sm:w-6 sm:h-6 ${isDragging ? 'text-blue-400' : 'text-muted'}`} />
              </div>
              <p className="font-medium text-foreground-secondary text-sm sm:text-base">
                {isDragging ? 'Solte o arquivo aqui' : 'Clique ou arraste o arquivo'}
              </p>
              <p className="text-xs text-muted mt-1">Apenas arquivos CSV</p>
            </div>
          )}
        </div>

        {/* Card YouTube Sync - COM INFO DO CANAL */}
        <div className={`border rounded-xl p-4 sm:p-6 transition-all group ${isYoutubeConnected ? 'bg-green-900/10 border-green-900/30' : 'bg-layer-1 border-subtle hover:border-default'}`}>
          <div className="flex items-center gap-3 mb-4 sm:mb-6">
            <div className={`p-2 sm:p-2.5 rounded-lg transition-colors ${isYoutubeConnected ? 'bg-green-500/20' : 'bg-red-500/10'}`}>
              <Youtube className={`w-4 h-4 sm:w-5 sm:h-5 ${isYoutubeConnected ? 'text-green-500' : 'text-red-500'}`} />
            </div>
            <div>
              <h3 className="font-semibold text-white text-base sm:text-lg">Sincronização</h3>
              <p className="text-xs text-muted">Conexão em tempo real</p>
            </div>
            {isYoutubeConnected && (
               <span className="ml-auto bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1 animate-in fade-in zoom-in">
                 <CheckCircle2 className="w-3 h-3" /> ATIVO
               </span>
            )}
          </div>

          <div className="bg-gradient-to-br from-zinc-900 to-zinc-950 border border-subtle rounded-xl min-h-[128px] sm:min-h-[160px] flex flex-col items-center justify-center p-4 sm:p-6 text-center relative overflow-hidden">
            {isYoutubeConnected ? (
              loadingChannel ? (
                <div className="z-10 flex flex-col items-center gap-3">
                  <RefreshCw className="w-6 h-6 sm:w-8 sm:h-8 text-green-500 animate-spin" />
                  <p className="text-muted text-sm">Carregando dados do canal...</p>
                </div>
              ) : channelInfo ? (
                <div className="z-10 w-full animate-in slide-in-from-bottom-2">
                  <div className="flex items-center gap-3 mb-3 sm:mb-4">
                    {channelInfo.thumbnail ? (
                      <img
                        src={channelInfo.thumbnail}
                        alt={channelInfo.name}
                        className="w-10 h-10 sm:w-12 sm:h-12 rounded-full flex-shrink-0 object-cover"
                      />
                    ) : (
                      <div className="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center text-white font-bold text-base sm:text-lg flex-shrink-0">
                        {channelInfo.name.charAt(0)}
                      </div>
                    )}
                    <div className="text-left min-w-0">
                      <p className="font-semibold text-white text-sm sm:text-base truncate">{channelInfo.name}</p>
                      <p className="text-green-400 text-xs">Canal Conectado</p>
                    </div>
                  </div>
                  <div className="grid grid-cols-3 gap-2 sm:gap-3">
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Users className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.subscribers}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Inscritos</p>
                    </div>
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Video className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.videos}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Vídeos</p>
                    </div>
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Eye className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.views}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Views</p>
                    </div>
                  </div>
                  {channelInfo.channelUrl && (
                    <div className="mt-3 pt-3 border-t border-subtle">
                      <p className="text-muted text-[10px] sm:text-xs mb-1">Canal no YouTube:</p>
                      <a
                        href={channelInfo.channelUrl}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="text-blue-400 hover:text-blue-300 text-xs sm:text-sm break-all transition-colors"
                      >
                        {channelInfo.channelUrl}
                      </a>
                      <p className="text-zinc-600 text-[10px] mt-1">ID: {channelInfo.channelId}</p>
                    </div>
                  )}
                </div>
              ) : (
                <div className="z-10 flex flex-col items-center gap-3 animate-in slide-in-from-bottom-2">
                   <div className="p-2 sm:p-3 bg-green-500/10 rounded-full mb-1 border border-green-500/20">
                      <CheckCircle2 className="w-6 h-6 sm:w-8 sm:h-8 text-green-500" />
                   </div>
                   <p className="text-green-400 font-medium text-sm sm:text-base">Canal Sincronizado</p>
                   <p className="text-muted text-xs">Pronto para gerar conteúdo</p>
                </div>
              )
            ) : (
              <div className="z-10 flex flex-col items-center gap-3">
                <div className="flex items-center gap-2 text-foreground-secondary">
                  <div className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                  <span className="text-xs sm:text-sm font-medium">API Necessária</span>
                </div>
                <button
                  onClick={() => openApiKeyModal()}
                  className="text-xs bg-layer-2 hover:bg-zinc-700 text-white px-3 sm:px-4 py-2 rounded-md border border-zinc-700 transition-colors cursor-pointer"
                >
                  Configurar Acesso
                </button>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Definição de Tema */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-amber-500/10 rounded-lg">
            <Sparkles className="w-4 h-4 sm:w-5 sm:h-5 text-amber-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Definição de Tema</h3>
            <p className="text-xs text-muted">O que vamos criar hoje? (opcional se houver outras fontes)</p>
          </div>
        </div>

        <input
          type="text"
          value={theme}
          onChange={(e) => setTheme(e.target.value)}
          placeholder="Ex: Oração da Manhã, Notícias sobre IA, Review de Tech..."
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Tags de Foco */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-purple-500/10 rounded-lg">
            <Tag className="w-4 h-4 sm:w-5 sm:h-5 text-purple-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Tags de Foco</h3>
            <p className="text-xs text-muted">Palavras-chave para direcionar o conteúdo (opcional)</p>
          </div>
        </div>

        <input
          type="text"
          value={tagsFoco}
          onChange={(e) => setTagsFoco(e.target.value)}
          placeholder="Ex: motivação, empreendedorismo, sucesso (separe por vírgula)"
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Link de Vídeo Concorrente */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-cyan-500/10 rounded-lg">
            <Link2 className="w-4 h-4 sm:w-5 sm:h-5 text-cyan-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Vídeo de Referência</h3>
            <p className="text-xs text-muted">Link de um vídeo para análise e inspiração (opcional)</p>
          </div>
        </div>

        <input
          type="url"
          value={linkConcorrente}
          onChange={(e) => setLinkConcorrente(e.target.value)}
          placeholder="https://www.youtube.com/watch?v=..."
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Transcrição de Vídeo */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-pink-500/10 rounded-lg">
            <MessageSquare className="w-4 h-4 sm:w-5 sm:h-5 text-pink-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Transcrição de Vídeo</h3>
            <p className="text-xs text-muted">Cole a transcrição de um vídeo para análise (opcional)</p>
          </div>
        </div>

        <textarea
          value={transcricao}
          onChange={(e) => setTranscricao(e.target.value)}
          placeholder="Cole aqui a transcrição completa de um vídeo..."
          rows={6}
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all text-sm sm:text-base resize-y"
        />
      </div>

      {/* Botão de Avançar */}
      <div className="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4 pt-4 border-t border-subtle">
        {!canAdvance && (
          <div className="flex items-center gap-2 text-amber-400 bg-amber-500/10 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm order-2 sm:order-1">
            <AlertCircle className="w-4 h-4 flex-shrink-0" />
            <span>
              {!hasAnyInput
                ? 'Preencha pelo menos um campo de input (tema, link, transcrição ou planilha)'
                : !isAIConnected
                ? 'Conecte pelo menos uma API de IA'
                : ''}
            </span>
          </div>
        )}

        <button
          onClick={handleAdvance}
          disabled={!canAdvance}
          className={`px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center gap-2 transition-all text-sm sm:text-base order-1 sm:order-2 ${
            canAdvance
              ? 'bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white shadow-indigo-500/20 hover:shadow-indigo-500/40 cursor-pointer active:scale-95'
              : 'bg-layer-2 text-muted cursor-not-allowed'
          }`}
        >
          Avançar para Pesquisa
          <ArrowRight className="w-4 h-4 sm:w-5 sm:h-5" />
        </button>
      </div>
    </div>
  );
}

```

---
#### `app/step/2-research/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { useAPIKeysStore, getAPIKeyHeaders } from "@/lib/api-keys-store";
import { AIProvider, APIKeyStatus, ResearchData } from "@/types";
import {
  Brain,
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Search,
  TrendingUp,
  Users,
  Lightbulb,
  Globe,
} from "lucide-react";

export default function Step2Research() {
  const router = useRouter();
  const { context, research, setResearch, setStep } = useWorkflowStore();
  const { getActiveDiretrizes } = useGuidelinesStore();
  const { keys } = useAPIKeysStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [isLoadingKeys, setIsLoadingKeys] = useState(true);
  const [isGenerating, setIsGenerating] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select first available provider
      if (status.openai) {
        setSelectedProvider("openai");
        setSelectedModel("gpt-4o");
      } else if (status.google) {
        setSelectedProvider("google");
        setSelectedModel("gemini-1.5-pro");
      } else if (status.anthropic) {
        setSelectedProvider("anthropic");
        setSelectedModel("claude-3-5-sonnet-latest");
      }
    });
  }, []);

  // Redirect if no context
  useEffect(() => {
    if (!context) {
      router.push("/step/1-input");
    }
  }, [context, router]);

  const handleGenerate = async () => {
    if (!selectedProvider || !selectedModel || !context) {
      setError("Selecione um provedor e modelo de IA.");
      return;
    }

    setIsGenerating(true);
    setError(null);

    try {
      const activeDiretrizes = getActiveDiretrizes();
      const apiKeyHeaders = getAPIKeyHeaders(keys);

      const response = await fetch("/api/research", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          ...apiKeyHeaders,
        },
        body: JSON.stringify({
          contextId: context.id,
          theme: context.theme,
          channelData: context.channelData,
          metrics: context.metrics,
          provider: selectedProvider,
          model: selectedModel,
          diretrizes: activeDiretrizes,
        }),
      });

      if (!response.ok) {
        const data = await response.json();
        throw new Error(data.error || "Falha na pesquisa");
      }

      const researchData: ResearchData = await response.json();
      setResearch(researchData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na pesquisa");
    } finally {
      setIsGenerating(false);
    }
  };

  const handleProceed = () => {
    if (research) {
      setStep(4);
      router.push("/step/4-proposal");
    }
  };

  if (!context) {
    return null;
  }

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Inteligência - Deep Research Agent
        </h1>
        <p className="text-muted">
          Análise profunda de dados e pesquisa de tendências para o tema:{" "}
          <span className="text-white font-medium">{context.theme}</span>
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
          </div>
        )}

        {/* AI Selection & Generate */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Brain className="w-5 h-5 text-purple-500" />
              Configuração do Agente
            </CardTitle>
            <CardDescription>
              Selecione o modelo de IA para executar a pesquisa profunda.
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            {isLoadingKeys ? (
              <div className="flex items-center justify-center py-8">
                <Loader2 className="w-6 h-6 animate-spin text-muted" />
              </div>
            ) : (
              <AIModelSelector
                selectedProvider={selectedProvider}
                selectedModel={selectedModel}
                onProviderChange={setSelectedProvider}
                onModelChange={setSelectedModel}
                apiKeyStatus={apiKeyStatus!}
                label="Selecione o modelo para pesquisa"
              />
            )}

            {apiKeyStatus?.tavily && (
              <div className="p-3 bg-green-500/10 border border-green-500/20 rounded-lg flex items-center gap-2">
                <Check className="w-4 h-4 text-green-400" />
                <span className="text-green-300 text-sm">
                  Tavily API detectada - pesquisa real habilitada
                </span>
              </div>
            )}

            {!apiKeyStatus?.tavily && (
              <div className="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg flex items-center gap-2">
                <AlertCircle className="w-4 h-4 text-yellow-400" />
                <span className="text-yellow-300 text-sm">
                  Tavily não configurado - pesquisa será simulada via LLM
                </span>
              </div>
            )}
          </CardContent>
          <CardFooter>
            <Button
              onClick={handleGenerate}
              isLoading={isGenerating}
              disabled={!selectedProvider || !selectedModel}
              leftIcon={<Search className="w-4 h-4" />}
            >
              {research ? "Regenerar Pesquisa" : "Executar Pesquisa"}
            </Button>
          </CardFooter>
        </Card>

        {/* Research Results */}
        {research && (
          <div className="space-y-6">
            {/* Internal Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <TrendingUp className="w-5 h-5 text-blue-500" />
                  Análise Interna (Canal)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <TrendingUp className="w-4 h-4" />
                      Tópicos de Alta Performance
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.internalAnalysis.topPerformingTopics.map((topic, i) => (
                        <Badge key={i} variant="success">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Users className="w-4 h-4" />
                      Insights da Audiência
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.audienceInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Lightbulb className="w-4 h-4" />
                      Lacunas de Conteúdo
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.contentGaps.map((gap, i) => (
                        <li key={i}>• {gap}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Check className="w-4 h-4" />
                      Recomendações
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.recommendations.map((rec, i) => (
                        <li key={i}>• {rec}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* External Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Globe className="w-5 h-5 text-green-500" />
                  Análise Externa (Mercado)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Tópicos em Alta
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.externalAnalysis.trendingTopics.map((topic, i) => (
                        <Badge key={i} variant="info">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Insights de Competidores
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.externalAnalysis.competitorInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Oportunidades de Mercado
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.externalAnalysis.marketOpportunities.map((opp, i) => (
                        <li key={i}>• {opp}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Consolidated Insights */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Brain className="w-5 h-5 text-purple-500" />
                  Síntese Estratégica
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-foreground-secondary leading-relaxed">
                  {research.consolidatedInsights}
                </p>
              </CardContent>
            </Card>

            {/* Research Queries */}
            <Card>
              <CardHeader>
                <CardTitle>Queries Executadas</CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  {research.queries.map((query, i) => (
                    <div
                      key={i}
                      className="p-3 bg-layer-3 rounded-lg border border-subtle"
                    >
                      <div className="flex items-center justify-between mb-2">
                        <span className="font-medium text-white">
                          {query.query}
                        </span>
                        <Badge variant={query.source === "tavily" ? "success" : "warning"}>
                          {query.source === "tavily" ? "Tavily" : "Simulado"}
                        </Badge>
                      </div>
                      <p className="text-sm text-muted">
                        {query.results.length} resultados encontrados
                      </p>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </div>
        )}

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/1-input")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={!research}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Proposta
        </Button>
      </div>
    </div>
  );
}

```

---
#### `app/step/4-proposal/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Textarea from "@/components/ui/Textarea";
import Select from "@/components/ui/Select";
import Toggle from "@/components/ui/Toggle";
import AssetCard from "@/components/AssetCard";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import {
  AIProvider,
  APIKeyStatus,
  ProposalData,
  Script,
  Soundtrack,
  Description,
  Tags,
  TitlesAndThumbs,
  UploadSetup,
  ImageProvider,
  TTSProvider,
} from "@/types";
import { v4 as uuidv4 } from "uuid";
import { formatDuration } from "@/lib/utils";
import {
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Sparkles,
  Image,
  Settings,
  Volume2,
} from "lucide-react";

export default function Step4Proposal() {
  const router = useRouter();
  const { context, research, proposal, setProposal, updateProposal, setStep } = useWorkflowStore();
  const { getDiretrizesForScope } = useGuidelinesStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Individual generation states
  const [generatingScript, setGeneratingScript] = useState(false);
  const [generatingSoundtrack, setGeneratingSoundtrack] = useState(false);
  const [generatingDescription, setGeneratingDescription] = useState(false);
  const [generatingTags, setGeneratingTags] = useState(false);
  const [generatingTitles, setGeneratingTitles] = useState(false);
  const [generatingImage, setGeneratingImage] = useState<string | null>(null);
  const [generatingAudio, setGeneratingAudio] = useState(false);

  // Edit states
  const [editingScript, setEditingScript] = useState(false);
  const [editingDescription, setEditingDescription] = useState(false);
  const [editingTags, setEditingTags] = useState(false);
  const [editContent, setEditContent] = useState("");

  // Default upload setup
  const defaultUploadSetup: UploadSetup = {
    category: "22",
    language: "pt",
    license: "youtube",
    madeForKids: false,
    ageRestricted: false,
    paidPromotion: false,
    allowComments: true,
    allowEmbedding: true,
  };

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no research
  useEffect(() => {
    if (!context || !research) {
      router.push("/step/1-input");
    }
  }, [context, research, router]);

  // Initialize proposal if not exists
  useEffect(() => {
    if (context && research && !proposal) {
      const initialProposal: ProposalData = {
        id: uuidv4(),
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
        contextId: context.id,
        researchId: research.id,
        rationale: "",
        script: {
          id: uuidv4(),
          status: "pending",
          sections: [],
          totalDuration: 0,
          generatedAt: "",
          approvedAt: null,
          audioUrl: null,
          ttsProvider: null,
          ttsVoice: null,
        },
        soundtrack: {
          id: uuidv4(),
          status: "pending",
          suggestions: [],
          selected: null,
          generatedAt: "",
          approvedAt: null,
        },
        description: {
          id: uuidv4(),
          status: "pending",
          content: "",
          generatedAt: "",
          approvedAt: null,
        },
        tags: {
          id: uuidv4(),
          status: "pending",
          items: [],
          generatedAt: "",
          approvedAt: null,
        },
        uploadSetup: defaultUploadSetup,
        titlesAndThumbs: {
          id: uuidv4(),
          status: "pending",
          variations: [],
          selectedVariation: null,
          generatedAt: "",
          approvedAt: null,
        },
        allApproved: false,
      };
      setProposal(initialProposal);
    }
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [context, research, proposal, setProposal]);

  const generateScript = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingScript(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("script");
      const response = await fetch("/api/proposal/script", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const script: Script = await response.json();
      updateProposal({ script, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar roteiro");
    } finally {
      setGeneratingScript(false);
    }
  };

  const generateSoundtrack = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingSoundtrack(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/soundtrack", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          mood: "professional, engaging",
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const soundtrack: Soundtrack = await response.json();
      updateProposal({ soundtrack, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar trilha");
    } finally {
      setGeneratingSoundtrack(false);
    }
  };

  const generateDescription = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingDescription(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("description");
      const response = await fetch("/api/proposal/description", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const description: Description = await response.json();
      updateProposal({ description, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar descrição");
    } finally {
      setGeneratingDescription(false);
    }
  };

  const generateTags = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTags(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/tags", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          description: proposal.description.content,
          research,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const tags: Tags = await response.json();
      updateProposal({ tags, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar tags");
    } finally {
      setGeneratingTags(false);
    }
  };

  const generateTitles = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTitles(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("thumbnail");
      const response = await fetch("/api/proposal/titles", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const titlesAndThumbs: TitlesAndThumbs = await response.json();
      updateProposal({ titlesAndThumbs, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar títulos");
    } finally {
      setGeneratingTitles(false);
    }
  };

  const generateThumbnailImage = async (variationId: string, provider: ImageProvider) => {
    if (!proposal) return;
    setGeneratingImage(variationId);
    setError(null);

    try {
      const variation = proposal.titlesAndThumbs.variations.find((v) => v.id === variationId);
      if (!variation) throw new Error("Variação não encontrada");

      const response = await fetch("/api/images/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          prompt: variation.thumbnailPrompt,
          provider,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { imageUrl } = await response.json();

      const updatedVariations = proposal.titlesAndThumbs.variations.map((v) =>
        v.id === variationId ? { ...v, thumbnailUrl: imageUrl, imageProvider: provider } : v
      );

      updateProposal({
        titlesAndThumbs: {
          ...proposal.titlesAndThumbs,
          variations: updatedVariations,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar imagem");
    } finally {
      setGeneratingImage(null);
    }
  };

  const generateAudio = async (ttsProvider: TTSProvider, voice: string) => {
    if (!proposal?.script) return;
    setGeneratingAudio(true);
    setError(null);

    try {
      const fullText = proposal.script.sections.map((s) => s.content).join("\n\n");
      const response = await fetch("/api/tts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          text: fullText,
          provider: ttsProvider,
          voice,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { audioUrl } = await response.json();

      updateProposal({
        script: {
          ...proposal.script,
          audioUrl,
          ttsProvider,
          ttsVoice: voice,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar áudio");
    } finally {
      setGeneratingAudio(false);
    }
  };

  const approveAsset = (asset: "script" | "soundtrack" | "description" | "tags" | "titlesAndThumbs") => {
    if (!proposal) return;

    const now = new Date().toISOString();
    const updates: Partial<ProposalData> = { updatedAt: now };

    switch (asset) {
      case "script":
        updates.script = { ...proposal.script, status: "approved", approvedAt: now };
        break;
      case "soundtrack":
        updates.soundtrack = { ...proposal.soundtrack, status: "approved", approvedAt: now };
        break;
      case "description":
        updates.description = { ...proposal.description, status: "approved", approvedAt: now };
        break;
      case "tags":
        updates.tags = { ...proposal.tags, status: "approved", approvedAt: now };
        break;
      case "titlesAndThumbs":
        updates.titlesAndThumbs = { ...proposal.titlesAndThumbs, status: "approved", approvedAt: now };
        break;
    }

    updateProposal(updates);

    // Check if all approved
    const updatedProposal = { ...proposal, ...updates };
    const allApproved =
      updatedProposal.script.status === "approved" &&
      updatedProposal.soundtrack.status === "approved" &&
      updatedProposal.description.status === "approved" &&
      updatedProposal.tags.status === "approved" &&
      updatedProposal.titlesAndThumbs.status === "approved";

    if (allApproved) {
      updateProposal({ allApproved: true });
    }
  };

  const handleProceed = () => {
    if (proposal?.allApproved) {
      setStep(5);
      router.push("/step/5-studio");
    }
  };

  if (!context || !research || !proposal) {
    return null;
  }

  const canProceed = proposal.allApproved;

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Proposta de Vídeo - Mesa de Decisão
        </h1>
        <p className="text-muted">
          Todos os assets são gerados aqui. Nada avança sem sua aprovação.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Rationale */}
        {proposal.rationale && (
          <Card className="bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/20">
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Sparkles className="w-5 h-5 text-yellow-500" />
                Por que esta proposta vai performar bem
              </CardTitle>
            </CardHeader>
            <CardContent>
              <p className="text-foreground-secondary leading-relaxed">{proposal.rationale}</p>
            </CardContent>
          </Card>
        )}

        {/* Script */}
        <AssetCard
          title="Roteiro"
          status={proposal.script.status}
          isGenerating={generatingScript}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.script.sections.map((s) => s.content).join("\n\n---\n\n"));
            setEditingScript(true);
          }}
          onRegenerate={generateScript}
          onApprove={() => approveAsset("script")}
          isEditing={editingScript}
          onCancelEdit={() => setEditingScript(false)}
          onSaveEdit={() => {
            // Parse edited content back to sections (simplified)
            setEditingScript(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={20}
              className="font-mono text-sm"
            />
          }
        >
          {proposal.script.sections.length > 0 ? (
            <div className="space-y-4">
              <div className="flex items-center gap-4 text-sm text-muted">
                <span>Duração: {formatDuration(proposal.script.totalDuration)}</span>
                <span>Seções: {proposal.script.sections.length}</span>
              </div>
              <div className="space-y-3 max-h-96 overflow-auto">
                {proposal.script.sections.map((section) => (
                  <div key={section.id} className="p-3 bg-layer-2 rounded-lg">
                    <div className="flex items-center gap-2 mb-2">
                      <Badge variant="info">{section.type}</Badge>
                      <span className="text-xs text-muted">
                        {formatDuration(section.duration)}
                      </span>
                    </div>
                    <p className="text-foreground-secondary text-sm whitespace-pre-wrap">
                      {section.content}
                    </p>
                  </div>
                ))}
              </div>

              {/* TTS Section */}
              <div className="pt-4 border-t border-gray-800">
                <h4 className="text-sm font-medium text-muted mb-3 flex items-center gap-2">
                  <Volume2 className="w-4 h-4" />
                  Gerar Áudio (TTS)
                </h4>
                {proposal.script.audioUrl ? (
                  <div className="flex items-center gap-3">
                    <audio controls src={proposal.script.audioUrl} className="flex-1" />
                    <Badge variant="success">Gerado</Badge>
                  </div>
                ) : (
                  <div className="flex items-center gap-3">
                    <Select
                      options={[
                        { value: "openai:alloy", label: "OpenAI - Alloy" },
                        { value: "openai:nova", label: "OpenAI - Nova" },
                        { value: "google:pt-BR-Wavenet-A", label: "Google - PT-BR Female" },
                      ]}
                      placeholder="Selecione voz..."
                      className="w-48"
                      onChange={(value) => {
                        const [provider, voice] = value.split(":") as [TTSProvider, string];
                        generateAudio(provider, voice);
                      }}
                    />
                    {generatingAudio && <Loader2 className="w-4 h-4 animate-spin" />}
                  </div>
                )}
              </div>
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar o roteiro
            </p>
          )}
        </AssetCard>

        {/* Soundtrack */}
        <AssetCard
          title="Trilha Sonora"
          status={proposal.soundtrack.status}
          isGenerating={generatingSoundtrack}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateSoundtrack}
          onApprove={() => approveAsset("soundtrack")}
        >
          {proposal.soundtrack.suggestions.length > 0 ? (
            <div className="space-y-3">
              {proposal.soundtrack.suggestions.map((track) => (
                <div
                  key={track.id}
                  className={`p-3 rounded-lg border transition-all cursor-pointer ${
                    proposal.soundtrack.selected === track.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-layer-2 border-subtle hover:border-gray-600"
                  }`}
                  onClick={() =>
                    updateProposal({
                      soundtrack: { ...proposal.soundtrack, selected: track.id },
                    })
                  }
                >
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="font-medium text-white">{track.title}</p>
                      <p className="text-sm text-muted">
                        {track.artist} • {track.genre}
                      </p>
                    </div>
                    <Badge variant="default">{track.license}</Badge>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para sugerir trilhas
            </p>
          )}
        </AssetCard>

        {/* Description */}
        <AssetCard
          title="Descrição"
          status={proposal.description.status}
          isGenerating={generatingDescription}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.description.content);
            setEditingDescription(true);
          }}
          onRegenerate={generateDescription}
          onApprove={() => approveAsset("description")}
          isEditing={editingDescription}
          onCancelEdit={() => setEditingDescription(false)}
          onSaveEdit={() => {
            updateProposal({
              description: { ...proposal.description, content: editContent },
            });
            setEditingDescription(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={10}
            />
          }
        >
          {proposal.description.content ? (
            <div className="prose prose-invert max-w-none">
              <pre className="whitespace-pre-wrap text-sm text-foreground-secondary font-sans">
                {proposal.description.content}
              </pre>
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar a descrição
            </p>
          )}
        </AssetCard>

        {/* Tags */}
        <AssetCard
          title="Tags"
          status={proposal.tags.status}
          isGenerating={generatingTags}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.tags.items.join(", "));
            setEditingTags(true);
          }}
          onRegenerate={generateTags}
          onApprove={() => approveAsset("tags")}
          isEditing={editingTags}
          onCancelEdit={() => setEditingTags(false)}
          onSaveEdit={() => {
            updateProposal({
              tags: {
                ...proposal.tags,
                items: editContent.split(",").map((t) => t.trim()).filter(Boolean),
              },
            });
            setEditingTags(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={4}
              helperText="Separe as tags por vírgula"
            />
          }
        >
          {proposal.tags.items.length > 0 ? (
            <div className="flex flex-wrap gap-2">
              {proposal.tags.items.map((tag, i) => (
                <Badge key={i} variant="default">
                  {tag}
                </Badge>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar as tags
            </p>
          )}
        </AssetCard>

        {/* Upload Setup */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Settings className="w-5 h-5 text-muted" />
              Setup de Upload
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <Select
                label="Categoria"
                value={proposal.uploadSetup.category}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, category: value },
                  })
                }
                options={[
                  { value: "22", label: "People & Blogs" },
                  { value: "27", label: "Education" },
                  { value: "28", label: "Science & Technology" },
                  { value: "24", label: "Entertainment" },
                  { value: "26", label: "Howto & Style" },
                ]}
              />
              <Select
                label="Idioma"
                value={proposal.uploadSetup.language}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, language: value },
                  })
                }
                options={[
                  { value: "pt", label: "Português" },
                  { value: "en", label: "English" },
                  { value: "es", label: "Español" },
                ]}
              />
              <Select
                label="Licença"
                value={proposal.uploadSetup.license}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: {
                      ...proposal.uploadSetup,
                      license: value as "youtube" | "creative_commons",
                    },
                  })
                }
                options={[
                  { value: "youtube", label: "YouTube Standard" },
                  { value: "creative_commons", label: "Creative Commons" },
                ]}
              />
            </div>
            <div className="mt-4 space-y-3">
              <Toggle
                checked={proposal.uploadSetup.madeForKids}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, madeForKids: checked },
                  })
                }
                label="Feito para crianças"
              />
              <Toggle
                checked={proposal.uploadSetup.allowComments}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowComments: checked },
                  })
                }
                label="Permitir comentários"
              />
              <Toggle
                checked={proposal.uploadSetup.allowEmbedding}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowEmbedding: checked },
                  })
                }
                label="Permitir incorporação"
              />
            </div>
          </CardContent>
        </Card>

        {/* Titles & Thumbnails */}
        <AssetCard
          title="Títulos e Thumbnails"
          status={proposal.titlesAndThumbs.status}
          isGenerating={generatingTitles}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateTitles}
          onApprove={() => approveAsset("titlesAndThumbs")}
        >
          {proposal.titlesAndThumbs.variations.length > 0 ? (
            <div className="space-y-4">
              {proposal.titlesAndThumbs.variations.map((variation) => (
                <div
                  key={variation.id}
                  className={`p-4 rounded-lg border transition-all ${
                    proposal.titlesAndThumbs.selectedVariation === variation.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-layer-2 border-subtle"
                  }`}
                >
                  <div className="flex items-start gap-4">
                    {/* Thumbnail */}
                    <div className="w-48 h-27 bg-layer-2 rounded-lg overflow-hidden flex-shrink-0">
                      {variation.thumbnailUrl ? (
                        <img
                          src={variation.thumbnailUrl}
                          alt={variation.title}
                          className="w-full h-full object-cover"
                        />
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-8 h-8 text-muted" />
                        </div>
                      )}
                    </div>

                    <div className="flex-1">
                      <h4 className="font-medium text-white mb-2">{variation.title}</h4>
                      <p className="text-sm text-muted mb-3">{variation.thumbnailPrompt}</p>

                      <div className="flex flex-wrap gap-2">
                        <Button
                          size="sm"
                          variant={
                            proposal.titlesAndThumbs.selectedVariation === variation.id
                              ? "success"
                              : "outline"
                          }
                          onClick={() =>
                            updateProposal({
                              titlesAndThumbs: {
                                ...proposal.titlesAndThumbs,
                                selectedVariation: variation.id,
                              },
                            })
                          }
                        >
                          {proposal.titlesAndThumbs.selectedVariation === variation.id
                            ? "Selecionado"
                            : "Selecionar"}
                        </Button>

                        {/* Image Generation Buttons */}
                        {apiKeyStatus?.openai && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "dalle")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            DALL·E
                          </Button>
                        )}
                        {apiKeyStatus?.stability && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "stability")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Stability
                          </Button>
                        )}
                        {apiKeyStatus?.replicate && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "replicate")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Replicate
                          </Button>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar títulos e prompts de thumbnail
            </p>
          )}
        </AssetCard>

        {/* Approval Status */}
        <Card className={canProceed ? "border-green-500/50" : "border-yellow-500/50"}>
          <CardContent className="py-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-4">
                {canProceed ? (
                  <>
                    <div className="w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center">
                      <Check className="w-5 h-5 text-green-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Todos os assets aprovados!</p>
                      <p className="text-sm text-muted">
                        Você pode prosseguir para o Studio de Criação.
                      </p>
                    </div>
                  </>
                ) : (
                  <>
                    <div className="w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center">
                      <AlertCircle className="w-5 h-5 text-yellow-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Aprovações pendentes</p>
                      <p className="text-sm text-muted">
                        Gere e aprove todos os assets para continuar.
                      </p>
                    </div>
                  </>
                )}
              </div>

              <div className="flex gap-2">
                {[
                  { name: "Roteiro", status: proposal.script.status },
                  { name: "Trilha", status: proposal.soundtrack.status },
                  { name: "Descrição", status: proposal.description.status },
                  { name: "Tags", status: proposal.tags.status },
                  { name: "Títulos", status: proposal.titlesAndThumbs.status },
                ].map((item) => (
                  <Badge
                    key={item.name}
                    variant={item.status === "approved" ? "success" : "warning"}
                    size="sm"
                  >
                    {item.name}
                  </Badge>
                ))}
              </div>
            </div>
          </CardContent>
        </Card>

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/2-research")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={!canProceed}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Studio
        </Button>
      </div>
    </div>
  );
}

```

---
#### `app/step/5-studio/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Input from "@/components/ui/Input";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus, StoryboardData, MediaItem, MediaSource } from "@/types";
import { formatDuration } from "@/lib/utils";
import {
  Film,
  ArrowRight,
  ArrowLeft,
  AlertCircle,
  Play,
  Image,
  Search,
  GripVertical,
  Trash2,
  Plus,
  Video,
} from "lucide-react";

export default function Step5Studio() {
  const router = useRouter();
  const { context, proposal, storyboard, render, setStoryboard, setRender, updateRender, setStep } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isGeneratingStoryboard, setIsGeneratingStoryboard] = useState(false);
  const [isSearchingMedia, setIsSearchingMedia] = useState<string | null>(null);
  const [isRendering, setIsRendering] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Media search state
  const [mediaSearchResults, setMediaSearchResults] = useState<Record<string, MediaItem[]>>({});
  const [selectedSources, setSelectedSources] = useState<MediaSource[]>(["pexels", "pixabay", "unsplash"]);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select available sources
      const sources: MediaSource[] = [];
      if (status.pexels) sources.push("pexels");
      if (status.pixabay) sources.push("pixabay");
      if (status.unsplash) sources.push("unsplash");
      setSelectedSources(sources);
    });
  }, []);

  // Redirect if no proposal
  useEffect(() => {
    if (!context || !proposal || !proposal.allApproved) {
      router.push("/step/4-proposal");
    }
  }, [context, proposal, router]);

  const generateStoryboard = async () => {
    if (!proposal) return;
    setIsGeneratingStoryboard(true);
    setError(null);

    try {
      const response = await fetch("/api/storyboard", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          script: proposal.script,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const storyboardData: StoryboardData = await response.json();
      setStoryboard(storyboardData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar storyboard");
    } finally {
      setIsGeneratingStoryboard(false);
    }
  };

  const searchMediaForScene = async (sceneId: string, query: string) => {
    setIsSearchingMedia(sceneId);
    setError(null);

    try {
      const response = await fetch("/api/media/search", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          query,
          sources: selectedSources,
          mediaType: "all",
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { results } = await response.json();
      setMediaSearchResults((prev) => ({ ...prev, [sceneId]: results }));
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na busca de mídia");
    } finally {
      setIsSearchingMedia(null);
    }
  };

  const selectMediaForScene = (sceneId: string, media: MediaItem) => {
    if (!storyboard) return;

    const updatedScenes = storyboard.scenes.map((scene) =>
      scene.id === sceneId ? { ...scene, media } : scene
    );

    setStoryboard({
      ...storyboard,
      scenes: updatedScenes,
    });

    // Clear search results for this scene
    setMediaSearchResults((prev) => {
      const updated = { ...prev };
      delete updated[sceneId];
      return updated;
    });
  };

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const updateSceneOrder = (fromIndex: number, toIndex: number) => {
    if (!storyboard) return;

    const scenes = [...storyboard.scenes];
    const [movedScene] = scenes.splice(fromIndex, 1);
    scenes.splice(toIndex, 0, movedScene);

    // Update order property
    const reorderedScenes = scenes.map((scene, i) => ({ ...scene, order: i }));

    setStoryboard({
      ...storyboard,
      scenes: reorderedScenes,
    });
  };

  const startRender = async () => {
    if (!storyboard || !proposal) return;
    setIsRendering(true);
    setError(null);

    try {
      const response = await fetch("/api/render", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          storyboardId: storyboard.id,
          scenes: storyboard.scenes,
          soundtrack: proposal.soundtrack.selected
            ? proposal.soundtrack.suggestions.find((s) => s.id === proposal.soundtrack.selected)
            : null,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const renderData = await response.json();
      setRender(renderData);

      // Poll for render status
      pollRenderStatus(renderData.id);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao iniciar renderização");
      setIsRendering(false);
    }
  };

  const pollRenderStatus = async (jobId: string) => {
    try {
      const response = await fetch(`/api/render?jobId=${jobId}`);
      if (!response.ok) throw new Error("Erro ao verificar status");

      const status = await response.json();
      updateRender(status);

      if (status.status === "rendering") {
        setTimeout(() => pollRenderStatus(jobId), 5000);
      } else {
        setIsRendering(false);
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao verificar renderização");
      setIsRendering(false);
    }
  };

  const handleProceed = () => {
    if (render?.status === "completed") {
      setStep(6);
      router.push("/step/6-upload");
    }
  };

  if (!context || !proposal) {
    return null;
  }

  const allScenesHaveMedia = storyboard?.scenes.every((scene) => scene.media !== null) ?? false;
  const canRender = storyboard && allScenesHaveMedia && apiKeyStatus?.json2video;

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Studio de Criação
        </h1>
        <p className="text-muted">
          Popule cada cena com mídia, revise e renderize seu vídeo.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Storyboard Generation */}
        {!storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Film className="w-5 h-5 text-purple-500" />
                Gerar Storyboard
              </CardTitle>
              <CardDescription>
                O storyboard divide o roteiro aprovado em cenas individuais.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <Button
                onClick={generateStoryboard}
                isLoading={isGeneratingStoryboard}
                leftIcon={<Film className="w-4 h-4" />}
              >
                Gerar Storyboard
              </Button>
            </CardContent>
          </Card>
        )}

        {/* Storyboard Scenes */}
        {storyboard && (
          <div className="space-y-6">
            <div className="flex items-center justify-between">
              <div>
                <h2 className="text-xl font-semibold text-white">
                  Storyboard ({storyboard.scenes.length} cenas)
                </h2>
                <p className="text-sm text-muted">
                  Duração total: {formatDuration(storyboard.totalDuration)}
                </p>
              </div>
              <div className="flex gap-2">
                <Badge variant={allScenesHaveMedia ? "success" : "warning"}>
                  {storyboard.scenes.filter((s) => s.media).length}/{storyboard.scenes.length} com mídia
                </Badge>
              </div>
            </div>

            {/* Media Sources Filter */}
            <Card padding="sm">
              <div className="flex items-center gap-4">
                <span className="text-sm text-muted">Fontes de mídia:</span>
                {(["pexels", "pixabay", "unsplash"] as MediaSource[]).map((source) => {
                  const isAvailable = apiKeyStatus?.[source as keyof APIKeyStatus];
                  const isSelected = selectedSources.includes(source);

                  return (
                    <button
                      key={source}
                      onClick={() => {
                        if (isAvailable) {
                          setSelectedSources((prev) =>
                            prev.includes(source)
                              ? prev.filter((s) => s !== source)
                              : [...prev, source]
                          );
                        }
                      }}
                      disabled={!isAvailable}
                      className={`px-3 py-1 rounded-full text-sm transition-all ${
                        !isAvailable
                          ? "bg-layer-2 text-disabled cursor-not-allowed"
                          : isSelected
                          ? "bg-primary-600 text-white"
                          : "bg-layer-2 text-muted hover:bg-layer-3"
                      }`}
                    >
                      {source.charAt(0).toUpperCase() + source.slice(1)}
                    </button>
                  );
                })}
              </div>
            </Card>

            {/* Scenes List */}
            <div className="space-y-4">
              {storyboard.scenes.map((scene, index) => (
                <Card key={scene.id} padding="sm">
                  <div className="flex gap-4">
                    {/* Drag Handle */}
                    <div className="flex items-center">
                      <GripVertical className="w-5 h-5 text-disabled cursor-move" />
                    </div>

                    {/* Scene Number */}
                    <div className="w-12 h-12 bg-layer-2 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span className="text-lg font-bold text-muted">{index + 1}</span>
                    </div>

                    {/* Media Preview */}
                    <div className="w-32 h-20 bg-layer-2 rounded-lg overflow-hidden flex-shrink-0">
                      {scene.media ? (
                        scene.media.type === "video" ? (
                          <video
                            src={scene.media.previewUrl}
                            className="w-full h-full object-cover"
                            muted
                          />
                        ) : (
                          <img
                            src={scene.media.previewUrl}
                            alt=""
                            className="w-full h-full object-cover"
                          />
                        )
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-6 h-6 text-disabled" />
                        </div>
                      )}
                    </div>

                    {/* Scene Content */}
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-1">
                        <Badge variant="info" size="sm">
                          {formatDuration(scene.duration)}
                        </Badge>
                        {scene.media && (
                          <Badge variant="success" size="sm">
                            {scene.media.source}
                          </Badge>
                        )}
                      </div>
                      <p className="text-sm text-secondary line-clamp-2">{scene.text}</p>

                      {/* Media Source Info */}
                      {scene.media && (
                        <p className="text-xs text-muted mt-1">{scene.media.attribution}</p>
                      )}
                    </div>

                    {/* Scene Actions */}
                    <div className="flex flex-col gap-2">
                      <SearchMediaButton
                        sceneText={scene.text}
                        isSearching={isSearchingMedia === scene.id}
                        onSearch={(query) => searchMediaForScene(scene.id, query)}
                      />
                      {scene.media && (
                        <Button
                          size="sm"
                          variant="ghost"
                          onClick={() => {
                            const updatedScenes = storyboard.scenes.map((s) =>
                              s.id === scene.id ? { ...s, media: null } : s
                            );
                            setStoryboard({ ...storyboard, scenes: updatedScenes });
                          }}
                        >
                          <Trash2 className="w-4 h-4" />
                        </Button>
                      )}
                    </div>
                  </div>

                  {/* Media Search Results */}
                  {mediaSearchResults[scene.id] && (
                    <div className="mt-4 pt-4 border-t border-subtle">
                      <div className="flex items-center justify-between mb-3">
                        <span className="text-sm text-muted">
                          {mediaSearchResults[scene.id].length} resultados encontrados
                        </span>
                        <button
                          onClick={() =>
                            setMediaSearchResults((prev) => {
                              const updated = { ...prev };
                              delete updated[scene.id];
                              return updated;
                            })
                          }
                          className="text-sm text-muted hover:text-muted"
                        >
                          Fechar
                        </button>
                      </div>
                      <div className="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2">
                        {mediaSearchResults[scene.id].slice(0, 16).map((media) => (
                          <button
                            key={media.id}
                            onClick={() => selectMediaForScene(scene.id, media)}
                            className="aspect-video bg-layer-2 rounded overflow-hidden hover:ring-2 hover:ring-primary-500 transition-all"
                          >
                            <img
                              src={media.previewUrl}
                              alt=""
                              className="w-full h-full object-cover"
                            />
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                </Card>
              ))}
            </div>
          </div>
        )}

        {/* Render Section */}
        {storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Video className="w-5 h-5 text-green-500" />
                Renderização
              </CardTitle>
              <CardDescription>
                Combine todas as cenas em um vídeo final.
              </CardDescription>
            </CardHeader>
            <CardContent>
              {!apiKeyStatus?.json2video ? (
                <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                  <p className="text-yellow-300 text-sm">
                    JSON2Video API não configurada. Adicione JSON2VIDEO_API_KEY para habilitar a
                    renderização.
                  </p>
                </div>
              ) : render ? (
                <div className="space-y-4">
                  <div className="flex items-center gap-4">
                    <Badge
                      variant={
                        render.status === "completed"
                          ? "success"
                          : render.status === "error"
                          ? "error"
                          : "info"
                      }
                    >
                      {render.status === "rendering"
                        ? `Renderizando... ${render.progress}%`
                        : render.status === "completed"
                        ? "Concluído"
                        : render.status === "error"
                        ? "Erro"
                        : "Pendente"}
                    </Badge>
                    {render.status === "rendering" && (
                      <div className="flex-1 h-2 bg-layer-2 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-primary-500 transition-all"
                          style={{ width: `${render.progress}%` }}
                        />
                      </div>
                    )}
                  </div>

                  {render.videoUrl && (
                    <div className="aspect-video bg-black rounded-lg overflow-hidden">
                      <video src={render.videoUrl} controls className="w-full h-full" />
                    </div>
                  )}

                  {render.error && (
                    <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                      <p className="text-red-300 text-sm">{render.error}</p>
                    </div>
                  )}
                </div>
              ) : (
                <Button
                  onClick={startRender}
                  isLoading={isRendering}
                  disabled={!canRender}
                  leftIcon={<Play className="w-4 h-4" />}
                >
                  Renderizar Vídeo
                </Button>
              )}

              {!allScenesHaveMedia && (
                <p className="text-sm text-yellow-400 mt-3">
                  Todas as cenas precisam ter mídia antes de renderizar.
                </p>
              )}
            </CardContent>
          </Card>
        )}

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/4-proposal")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={render?.status !== "completed"}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Upload
        </Button>
      </div>
    </div>
  );
}

// Search Media Button Component
function SearchMediaButton({
  sceneText,
  isSearching,
  onSearch,
}: {
  sceneText: string;
  isSearching: boolean;
  onSearch: (query: string) => void;
}) {
  const [showInput, setShowInput] = useState(false);
  const [query, setQuery] = useState("");

  const handleSearch = () => {
    if (query.trim()) {
      onSearch(query);
      setShowInput(false);
      setQuery("");
    }
  };

  // Auto-generate search query from scene text
  const autoSearch = () => {
    const keywords = sceneText.split(" ").slice(0, 5).join(" ");
    onSearch(keywords);
  };

  if (showInput) {
    return (
      <div className="flex gap-1">
        <Input
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="Buscar..."
          className="w-32 text-sm py-1"
          onKeyDown={(e) => e.key === "Enter" && handleSearch()}
        />
        <Button size="sm" onClick={handleSearch}>
          <Search className="w-4 h-4" />
        </Button>
      </div>
    );
  }

  return (
    <div className="flex gap-1">
      <Button
        size="sm"
        variant="outline"
        onClick={autoSearch}
        isLoading={isSearching}
      >
        <Search className="w-4 h-4" />
      </Button>
      <Button
        size="sm"
        variant="ghost"
        onClick={() => setShowInput(true)}
        title="Busca personalizada"
      >
        <Plus className="w-4 h-4" />
      </Button>
    </div>
  );
}

```

---
#### `app/step/6-upload/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus } from "@/types";
import { downloadJSON } from "@/lib/utils";
import {
  Upload,
  ArrowLeft,
  AlertCircle,
  Play,
  Youtube,
  FileVideo,
  FileText,
  Tag,
  Image,
  Download,
  ExternalLink,
  RefreshCw,
} from "lucide-react";

export default function Step6Upload() {
  const router = useRouter();
  const { context, proposal, storyboard, render, upload, setUpload, resetWorkflow } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isUploading, setIsUploading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no render
  useEffect(() => {
    if (!context || !proposal || !render?.videoUrl) {
      router.push("/step/5-studio");
    }
  }, [context, proposal, render, router]);

  const handleUpload = async () => {
    if (!proposal || !render) return;
    setIsUploading(true);
    setError(null);

    try {
      // Note: Real YouTube upload requires OAuth2 authentication
      // This is a simulation showing what the upload would do
      const selectedTitle = proposal.titlesAndThumbs.variations.find(
        (v) => v.id === proposal.titlesAndThumbs.selectedVariation
      );

      const response = await fetch("/api/youtube/upload", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          renderId: render.id,
          videoUrl: render.videoUrl,
          title: selectedTitle?.title || context?.theme || "Video",
          description: proposal.description.content,
          tags: proposal.tags.items,
          thumbnailUrl: selectedTitle?.thumbnailUrl,
          uploadSetup: proposal.uploadSetup,
          accessToken: "", // Would come from OAuth2 flow
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const uploadData = await response.json();
      setUpload(uploadData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao fazer upload");
    } finally {
      setIsUploading(false);
    }
  };

  const exportAllData = () => {
    const exportData = {
      context,
      proposal,
      storyboard,
      render,
      upload,
      exportedAt: new Date().toISOString(),
    };
    downloadJSON(exportData, `orion-export-${Date.now()}.json`);
  };

  const handleStartNew = () => {
    if (confirm("Tem certeza que deseja iniciar um novo projeto? Todos os dados serão perdidos.")) {
      resetWorkflow();
      router.push("/step/1-input");
    }
  };

  if (!context || !proposal || !render) {
    return null;
  }

  const selectedTitle = proposal.titlesAndThumbs.variations.find(
    (v) => v.id === proposal.titlesAndThumbs.selectedVariation
  );

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Finalização e Upload
        </h1>
        <p className="text-muted">
          Revise seu vídeo e envie para o YouTube.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Video Preview */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Play className="w-5 h-5 text-green-500" />
              Preview do Vídeo
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="aspect-video bg-black rounded-lg overflow-hidden">
              <video src={render.videoUrl || undefined} controls className="w-full h-full" />
            </div>
          </CardContent>
        </Card>

        {/* Metadata Summary */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Title & Thumbnail */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Image className="w-5 h-5 text-purple-500" />
                Título e Thumbnail
              </CardTitle>
            </CardHeader>
            <CardContent>
              {selectedTitle ? (
                <div className="space-y-4">
                  <div>
                    <p className="text-sm text-muted mb-1">Título</p>
                    <p className="text-lg font-medium text-white">{selectedTitle.title}</p>
                  </div>
                  {selectedTitle.thumbnailUrl && (
                    <div>
                      <p className="text-sm text-muted mb-2">Thumbnail</p>
                      <img
                        src={selectedTitle.thumbnailUrl}
                        alt={selectedTitle.title}
                        className="rounded-lg max-w-xs"
                      />
                    </div>
                  )}
                </div>
              ) : (
                <p className="text-muted">Nenhum título selecionado</p>
              )}
            </CardContent>
          </Card>

          {/* Description */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileText className="w-5 h-5 text-blue-500" />
                Descrição
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="max-h-48 overflow-auto">
                <pre className="text-sm text-secondary whitespace-pre-wrap font-sans">
                  {proposal.description.content}
                </pre>
              </div>
            </CardContent>
          </Card>

          {/* Tags */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Tag className="w-5 h-5 text-yellow-500" />
                Tags ({proposal.tags.items.length})
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="flex flex-wrap gap-2 max-h-32 overflow-auto">
                {proposal.tags.items.map((tag, i) => (
                  <Badge key={i} variant="default">
                    {tag}
                  </Badge>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Upload Settings */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileVideo className="w-5 h-5 text-green-500" />
                Configurações de Upload
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-2 gap-3 text-sm">
                <div>
                  <p className="text-muted">Categoria</p>
                  <p className="text-white">{getCategoryName(proposal.uploadSetup.category)}</p>
                </div>
                <div>
                  <p className="text-muted">Idioma</p>
                  <p className="text-white">{getLanguageName(proposal.uploadSetup.language)}</p>
                </div>
                <div>
                  <p className="text-muted">Licença</p>
                  <p className="text-white">
                    {proposal.uploadSetup.license === "youtube"
                      ? "YouTube Standard"
                      : "Creative Commons"}
                  </p>
                </div>
                <div>
                  <p className="text-muted">Para Crianças</p>
                  <p className="text-white">{proposal.uploadSetup.madeForKids ? "Sim" : "Não"}</p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Upload Section */}
        <Card className={upload?.status === "published" ? "border-green-500/50" : ""}>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Youtube className="w-5 h-5 text-red-500" />
              Upload para YouTube
            </CardTitle>
            <CardDescription>
              Envie seu vídeo diretamente para o YouTube.
            </CardDescription>
          </CardHeader>
          <CardContent>
            {!apiKeyStatus?.youtube ? (
              <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                <p className="text-yellow-300 text-sm">
                  YouTube API não configurada. Adicione as chaves YOUTUBE_API_KEY e
                  YOUTUBE_CLIENT_ID/SECRET para habilitar o upload.
                </p>
              </div>
            ) : upload ? (
              <div className="space-y-4">
                <div className="flex items-center gap-4">
                  <Badge
                    variant={
                      upload.status === "published"
                        ? "success"
                        : upload.status === "error"
                        ? "error"
                        : "info"
                    }
                  >
                    {upload.status === "uploading"
                      ? "Enviando..."
                      : upload.status === "processing"
                      ? "Processando..."
                      : upload.status === "published"
                      ? "Publicado!"
                      : upload.status === "error"
                      ? "Erro"
                      : "Pendente"}
                  </Badge>
                </div>

                {upload.youtubeUrl && (
                  <div className="p-4 bg-green-500/10 border border-green-500/20 rounded-lg">
                    <p className="text-green-300 mb-2">Vídeo publicado com sucesso!</p>
                    <a
                      href={upload.youtubeUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="inline-flex items-center gap-2 text-green-400 hover:text-green-300"
                    >
                      <ExternalLink className="w-4 h-4" />
                      Ver no YouTube
                    </a>
                  </div>
                )}

                {upload.error && (
                  <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                    <p className="text-red-300 text-sm">{upload.error}</p>
                  </div>
                )}
              </div>
            ) : (
              <div className="space-y-4">
                <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
                  <p className="text-blue-300 text-sm">
                    <strong>Nota:</strong> O upload para o YouTube requer autenticação OAuth2.
                    Em produção, você será redirecionado para autorizar o acesso ao seu canal.
                  </p>
                </div>
                <Button
                  onClick={handleUpload}
                  isLoading={isUploading}
                  leftIcon={<Upload className="w-4 h-4" />}
                  size="lg"
                >
                  Confirmar e Enviar para o YouTube
                </Button>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Export & Actions */}
        <Card>
          <CardHeader>
            <CardTitle>Exportar Dados</CardTitle>
            <CardDescription>
              Baixe todos os dados do projeto em formato JSON.
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="flex flex-wrap gap-3">
              <Button variant="outline" onClick={exportAllData} leftIcon={<Download className="w-4 h-4" />}>
                Exportar Projeto Completo
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  downloadJSON(proposal, `proposal-${proposal.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
              >
                Exportar Proposta
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  storyboard && downloadJSON(storyboard, `storyboard-${storyboard.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
                disabled={!storyboard}
              >
                Exportar Storyboard
              </Button>
            </div>
          </CardContent>
        </Card>

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/5-studio")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleStartNew}
          variant="secondary"
          leftIcon={<RefreshCw className="w-4 h-4" />}
        >
          Iniciar Novo Projeto
        </Button>
      </div>
    </div>
  );
}

function getCategoryName(categoryId: string): string {
  const categories: Record<string, string> = {
    "1": "Film & Animation",
    "2": "Autos & Vehicles",
    "10": "Music",
    "15": "Pets & Animals",
    "17": "Sports",
    "19": "Travel & Events",
    "20": "Gaming",
    "22": "People & Blogs",
    "23": "Comedy",
    "24": "Entertainment",
    "25": "News & Politics",
    "26": "Howto & Style",
    "27": "Education",
    "28": "Science & Technology",
  };
  return categories[categoryId] || categoryId;
}

function getLanguageName(languageCode: string): string {
  const languages: Record<string, string> = {
    pt: "Português",
    en: "English",
    es: "Español",
  };
  return languages[languageCode] || languageCode;
}

```

---
#### `app/workflow/page.tsx`

```
"use client";

import { useState, useEffect, Suspense } from 'react';
import { CheckCircle2, Circle, Lock, ArrowRight, FileInput, Brain, FileVideo, Film, Wrench, Upload, AlertCircle } from 'lucide-react';
import { useWorkflowStore } from '@/lib/store';
import { useRouter, useSearchParams } from 'next/navigation';

const workflowSteps = [
  {
    step: 1 as const,
    title: "Entrada",
    description: "Defina o tema e configure o projeto",
    icon: FileInput,
    path: "/step/1-input",
    color: "from-blue-500 to-cyan-500",
  },
  {
    step: 2 as const,
    title: "Inteligência",
    description: "Pesquisa e análise de conteúdo",
    icon: Brain,
    path: "/step/2-research",
    color: "from-purple-500 to-pink-500",
  },
  {
    step: 4 as const,
    title: "Proposta",
    description: "Geração de roteiro e conteúdo",
    icon: FileVideo,
    path: "/step/4-proposal",
    color: "from-green-500 to-emerald-500",
  },
  {
    step: 5 as const,
    title: "Studio",
    description: "Seleção de mídia e storyboard",
    icon: Film,
    path: "/step/5-studio",
    color: "from-orange-500 to-red-500",
  },
  {
    step: 5 as const,
    title: "Render",
    description: "Renderização do vídeo",
    icon: Wrench,
    path: "/step/5-studio",
    color: "from-yellow-500 to-orange-500",
  },
  {
    step: 6 as const,
    title: "Upload",
    description: "Publicação no YouTube",
    icon: Upload,
    path: "/step/6-upload",
    color: "from-indigo-500 to-purple-500",
  },
];

function WorkflowContent() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const {
    currentStep,
    canNavigateToStep,
    resetWorkflow,
    context,
    research,
    proposal,
    storyboard,
    upload
  } = useWorkflowStore();
  const [hoveredStep, setHoveredStep] = useState<number | null>(null);
  const [showResetDialog, setShowResetDialog] = useState(false);

  // Reset workflow state on mount (unless continuing)
  useEffect(() => {
    const continueParam = searchParams.get('continue');
    const hasData = context !== null || research !== null || proposal !== null;

    // Se NÃO está continuando explicitamente E tem dados antigos, mostrar dialog
    if (!continueParam && hasData) {
      setShowResetDialog(true);
    }

    // Se parâmetro continue=false foi passado, resetar imediatamente
    if (continueParam === 'false') {
      resetWorkflow();
      setShowResetDialog(false);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [searchParams]); // Removido resetWorkflow, context, etc pra evitar loops

  // Verifica se um step foi realmente completado baseado nos dados
  const isStepCompleted = (step: 1 | 2 | 4 | 5 | 6): boolean => {
    switch (step) {
      case 1:
        return context !== null;
      case 2:
        return research !== null;
      case 4:
        return proposal !== null && proposal.allApproved === true;
      case 5:
        return storyboard !== null;
      case 6:
        return upload !== null;
      default:
        return false;
    }
  };

  const getStepStatus = (step: 1 | 2 | 4 | 5 | 6) => {
    // Primeiro verifica se o step foi completado com dados reais
    if (isStepCompleted(step) && step < currentStep) return "completed";
    if (step === currentStep) return "current";
    if (canNavigateToStep(step)) return "available";
    return "locked";
  };

  const handleStepClick = (step: 1 | 2 | 4 | 5 | 6, path: string) => {
    const status = getStepStatus(step);
    if (status !== "locked") {
      router.push(path);
    }
  };

  return (
    <div className="w-full">
      {/* Reset Dialog */}
      {showResetDialog && (
        <>
          <div className="fixed inset-0 bg-black/70 backdrop-blur-sm z-50" onClick={() => setShowResetDialog(false)} />
          <div className="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md p-6 bg-layer-2 border border-warning/30 rounded-2xl shadow-2xl">
            <div className="flex items-start gap-4 mb-6">
              <div className="w-12 h-12 rounded-xl bg-warning/10 border border-warning/20 flex items-center justify-center flex-shrink-0">
                <AlertCircle className="w-6 h-6 text-warning" />
              </div>
              <div>
                <h3 className="text-lg font-semibold text-white mb-2">Workflow em Andamento</h3>
                <p className="text-sm text-muted">
                  Detectamos um workflow anterior. Deseja continuar de onde parou ou iniciar um novo?
                </p>
              </div>
            </div>
            <div className="flex gap-3">
              <button
                onClick={() => {
                  setShowResetDialog(false);
                }}
                className="flex-1 px-4 py-2.5 rounded-lg bg-layer-1 border border-default hover:bg-surface-elevated text-text-primary transition-all"
              >
                Continuar
              </button>
              <button
                onClick={() => {
                  resetWorkflow();
                  setShowResetDialog(false);
                  router.push('/workflow?continue=false');
                }}
                className="flex-1 px-4 py-2.5 rounded-lg bg-warning/10 border border-warning/30 hover:bg-warning/20 text-warning transition-all"
              >
                Iniciar Novo
              </button>
            </div>
          </div>
        </>
      )}

      {/* Header */}
      <div className="mb-12">
        <h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
          WorkFlow de Produção
        </h1>
        <p className="text-muted">Siga as etapas para criar seu vídeo automaticamente</p>
      </div>

      {/* Timeline Horizontal */}
      <div className="relative mb-12">
        {/* Progress Bar */}
        <div className="absolute top-[52px] left-0 right-0 h-1 bg-layer-2 rounded-full">
          <div
            className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500"
            style={{
              width: `${(workflowSteps.findIndex(s => s.step === currentStep) / (workflowSteps.length - 1)) * 100}%`
            }}
          />
        </div>

        {/* Steps */}
        <div className="grid grid-cols-6 gap-4">
          {workflowSteps.map((stepData, index) => {
            const status = getStepStatus(stepData.step);
            const isCompleted = status === "completed";
            const isCurrent = status === "current";
            const isLocked = status === "locked";
            const Icon = stepData.icon;

            return (
              <div key={index} className="relative">
                <button
                  onClick={() => handleStepClick(stepData.step, stepData.path)}
                  onMouseEnter={() => setHoveredStep(index)}
                  onMouseLeave={() => setHoveredStep(null)}
                  disabled={isLocked}
                  className={`
                    relative w-full flex flex-col items-center cursor-pointer disabled:cursor-not-allowed
                    transition-all duration-300
                    ${hoveredStep === index && !isLocked ? 'scale-110' : ''}
                  `}
                >
                  {/* Circle */}
                  <div
                    className={`
                      relative z-10 w-[104px] h-[104px] rounded-full flex items-center justify-center
                      transition-all duration-300 border-4
                      ${isCompleted
                        ? 'bg-gradient-to-br from-green-500 to-emerald-500 border-green-400 shadow-lg shadow-green-500/50'
                        : isCurrent
                        ? `bg-gradient-to-br ${stepData.color} border-white shadow-lg shadow-purple-500/50 animate-pulse`
                        : isLocked
                        ? 'bg-layer-2 border-subtle'
                        : 'bg-layer-1 border-default hover:border-active'
                      }
                    `}
                  >
                    {isCompleted ? (
                      <CheckCircle2 className="w-12 h-12 text-white" />
                    ) : isCurrent ? (
                      <Icon className="w-12 h-12 text-white" />
                    ) : isLocked ? (
                      <Lock className="w-12 h-12 text-disabled" />
                    ) : (
                      <Icon className="w-12 h-12 text-muted" />
                    )}
                  </div>

                  {/* Label */}
                  <div className="mt-4 text-center">
                    <h3
                      className={`
                        text-sm font-bold mb-1 transition-colors
                        ${isCompleted
                          ? 'text-green-400'
                          : isCurrent
                          ? 'text-white'
                          : isLocked
                          ? 'text-disabled'
                          : 'text-muted'
                        }
                      `}
                    >
                      {stepData.title}
                    </h3>
                    <p className="text-xs text-muted max-w-[120px]">
                      {stepData.description}
                    </p>
                  </div>

                  {/* Step Number Badge */}
                  <div
                    className={`
                      absolute -top-2 -right-2 z-20 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                      ${isCompleted
                        ? 'bg-green-500 text-white'
                        : isCurrent
                        ? 'bg-indigo-500 text-white'
                        : 'bg-layer-2 text-muted'
                      }
                    `}
                  >
                    {index + 1}
                  </div>
                </button>
              </div>
            );
          })}
        </div>
      </div>

      {/* Current Step Info */}
      <div className="bg-gradient-to-br from-indigo-900/20 to-purple-900/20 border border-indigo-500/30 rounded-xl p-6">
        <div className="flex items-start gap-4">
          <div className="p-3 bg-indigo-500/10 rounded-lg">
            {workflowSteps.find(s => s.step === currentStep)?.icon ? (
              <div className="w-8 h-8 text-indigo-400">
                {(() => {
                  const StepIcon = workflowSteps.find(s => s.step === currentStep)?.icon;
                  return StepIcon ? <StepIcon className="w-full h-full" /> : null;
                })()}
              </div>
            ) : null}
          </div>
          <div className="flex-1">
            <h3 className="text-lg font-bold text-white mb-2">
              Etapa Atual: {workflowSteps.find(s => s.step === currentStep)?.title}
            </h3>
            <p className="text-sm text-muted mb-4">
              {workflowSteps.find(s => s.step === currentStep)?.description}
            </p>
            <button
              onClick={() => {
                const currentStepData = workflowSteps.find(s => s.step === currentStep);
                if (currentStepData) {
                  router.push(currentStepData.path);
                }
              }}
              className="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium rounded-lg transition-colors inline-flex items-center gap-2"
            >
              Continuar
              <ArrowRight className="w-4 h-4" />
            </button>
          </div>
        </div>
      </div>

      {/* Instructions */}
      <div className="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center mb-3">
            <CheckCircle2 className="w-6 h-6 text-green-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Completadas</h4>
          <p className="text-sm text-muted">Marcadas em verde. Você pode revisitar a qualquer momento.</p>
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-indigo-500/10 rounded-lg flex items-center justify-center mb-3">
            <Circle className="w-6 h-6 text-indigo-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapa Atual</h4>
          <p className="text-sm text-muted">Destacada e pulsando. Clique para continuar o workflow.</p>
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-layer-3/50 rounded-lg flex items-center justify-center mb-3">
            <Lock className="w-6 h-6 text-muted" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Bloqueadas</h4>
          <p className="text-sm text-muted">Complete as etapas anteriores para desbloquear.</p>
        </div>
      </div>
    </div>
  );
}

export default function WorkflowPage() {
  return (
    <Suspense fallback={
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <div className="w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4" />
          <p className="text-foreground-muted">Carregando workflow...</p>
        </div>
      </div>
    }>
      <WorkflowContent />
    </Suspense>
  );
}

```

---
#### `components/AIModelSelector.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Select from "@/components/ui/Select";
import { AIProvider, AIModelOption, APIKeyStatus } from "@/types";
import { getModelsForProvider, getProviderName } from "@/lib/ai";
import { AlertCircle } from "lucide-react";

interface AIModelSelectorProps {
  selectedProvider: AIProvider | null;
  selectedModel: string | null;
  onProviderChange: (provider: AIProvider) => void;
  onModelChange: (model: string) => void;
  apiKeyStatus?: APIKeyStatus;
  label?: string;
  compact?: boolean;
}

export default function AIModelSelector({
  selectedProvider,
  selectedModel,
  onProviderChange,
  onModelChange,
  apiKeyStatus,
  label = "AI Model",
  compact = false,
}: AIModelSelectorProps) {
  const [models, setModels] = useState<AIModelOption[]>([]);

  const providers: { value: AIProvider; label: string; available: boolean }[] = [
    {
      value: "openai",
      label: getProviderName("openai"),
      available: apiKeyStatus?.openai ?? true,
    },
    {
      value: "google",
      label: getProviderName("google"),
      available: apiKeyStatus?.google ?? true,
    },
    {
      value: "anthropic",
      label: getProviderName("anthropic"),
      available: apiKeyStatus?.anthropic ?? true,
    },
  ];

  useEffect(() => {
    if (selectedProvider) {
      const providerModels = getModelsForProvider(selectedProvider);
      setModels(providerModels);

      // Auto-select first model if none selected
      if (!selectedModel && providerModels.length > 0) {
        onModelChange(providerModels[0].id);
      }
    }
  }, [selectedProvider, selectedModel, onModelChange]);

  const availableProviders = providers.filter((p) => p.available);
  const hasAnyProvider = availableProviders.length > 0;

  if (!hasAnyProvider) {
    return (
      <div className="flex items-center gap-2 text-yellow-500 text-sm">
        <AlertCircle className="w-4 h-4" />
        <span>No AI provider configured. Please add API keys.</span>
      </div>
    );
  }

  if (compact) {
    return (
      <div className="flex items-center gap-2">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.label,
            disabled: !p.available,
          }))}
          placeholder="Provider"
          className="w-36"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Model"
            className="w-40"
          />
        )}
      </div>
    );
  }

  return (
    <div className="space-y-3">
      {label && (
        <label className="block text-sm font-medium text-gray-300">
          {label}
        </label>
      )}
      <div className="flex flex-wrap gap-3">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.available ? p.label : `${p.label} (not configured)`,
            disabled: !p.available,
          }))}
          placeholder="Select provider..."
          className="w-48"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Select model..."
            className="w-48"
          />
        )}
      </div>
      {selectedProvider && !providers.find((p) => p.value === selectedProvider)?.available && (
        <p className="text-sm text-yellow-500 flex items-center gap-1">
          <AlertCircle className="w-4 h-4" />
          This provider is not configured. Add the API key in settings.
        </p>
      )}
    </div>
  );
}

```

---
#### `components/ApiKeysModal.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Modal from "@/components/ui/Modal";
import Button from "@/components/ui/Button";
import Input from "@/components/ui/Input";
import Badge from "@/components/ui/Badge";
import { useUIStore } from "@/lib/store";
import { useAPIKeysStore, StoredAPIKeys } from "@/lib/api-keys-store";
import { APIKeyStatus } from "@/types";
import { checkAPIKeys } from "@/lib/api-keys";
import ModelsExplorer from "@/components/ModelsExplorer";
import {
  Check,
  X,
  Loader2,
  ExternalLink,
  Eye,
  EyeOff,
  Save,
  TestTube,
  Trash2,
  Key,
  Cpu,
  ChevronRight,
} from "lucide-react";

interface KeyConfig {
  key: keyof StoredAPIKeys;
  name: string;
  envVar: string;
  docsUrl: string;
  placeholder: string;
  required: boolean;
  dependsOn?: keyof StoredAPIKeys;
}

const API_KEYS_CONFIG: KeyConfig[] = [
  {
    key: "youtube_api_key",
    name: "YouTube Data API Key",
    envVar: "YOUTUBE_API_KEY",
    docsUrl: "https://console.cloud.google.com/apis/credentials",
    placeholder: "AIza...",
    required: true,
  },
  {
    key: "youtube_channel_id",
    name: "YouTube Channel ID",
    envVar: "YOUTUBE_CHANNEL_ID",
    docsUrl: "https://www.youtube.com/account_advanced",
    placeholder: "UC...",
    required: true,
    dependsOn: "youtube_api_key",
  },
  {
    key: "openai_api_key",
    name: "OpenAI",
    envVar: "OPENAI_API_KEY",
    docsUrl: "https://platform.openai.com/api-keys",
    placeholder: "sk-...",
    required: false,
  },
  {
    key: "google_api_key",
    name: "Google Gemini",
    envVar: "GOOGLE_GENERATIVE_AI_API_KEY",
    docsUrl: "https://aistudio.google.com/apikey",
    placeholder: "AIza...",
    required: false,
  },
  {
    key: "anthropic_api_key",
    name: "Anthropic Claude",
    envVar: "ANTHROPIC_API_KEY",
    docsUrl: "https://console.anthropic.com/settings/keys",
    placeholder: "sk-ant-...",
    required: false,
  },
  {
    key: "pexels_api_key",
    name: "Pexels",
    envVar: "PEXELS_API_KEY",
    docsUrl: "https://www.pexels.com/api/",
    placeholder: "...",
    required: false,
  },
  {
    key: "pixabay_api_key",
    name: "Pixabay",
    envVar: "PIXABAY_API_KEY",
    docsUrl: "https://pixabay.com/api/docs/",
    placeholder: "...",
    required: false,
  },
  {
    key: "unsplash_api_key",
    name: "Unsplash",
    envVar: "UNSPLASH_ACCESS_KEY",
    docsUrl: "https://unsplash.com/developers",
    placeholder: "...",
    required: false,
  },
  {
    key: "json2video_api_key",
    name: "JSON2Video",
    envVar: "JSON2VIDEO_API_KEY",
    docsUrl: "https://json2video.com/",
    placeholder: "...",
    required: false,
  },
  {
    key: "elevenlabs_api_key",
    name: "ElevenLabs",
    envVar: "ELEVENLABS_API_KEY",
    docsUrl: "https://elevenlabs.io/",
    placeholder: "...",
    required: false,
  },
  {
    key: "tavily_api_key",
    name: "Tavily (Pesquisa)",
    envVar: "TAVILY_API_KEY",
    docsUrl: "https://tavily.com/",
    placeholder: "tvly-...",
    required: false,
  },
  {
    key: "replicate_api_key",
    name: "Replicate",
    envVar: "REPLICATE_API_TOKEN",
    docsUrl: "https://replicate.com/account/api-tokens",
    placeholder: "r8_...",
    required: false,
  },
  {
    key: "stability_api_key",
    name: "Stability AI",
    envVar: "STABILITY_API_KEY",
    docsUrl: "https://platform.stability.ai/",
    placeholder: "sk-...",
    required: false,
  },
];

export default function ApiKeysModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const { keys, testedKeys, setKey, markKeyTested, clearKey, clearAllKeys } =
    useAPIKeysStore();

  const [serverStatus, setServerStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingServer] = useState(true);
  const [testingKey, setTestingKey] = useState<string | null>(null);
  const [testingAll, setTestingAll] = useState(false);
  const [showPassword, setShowPassword] = useState<Record<string, boolean>>({});
  const [testResults, setTestResults] = useState<Record<string, { success: boolean; message: string }>>({});

  // Carregar status das chaves do servidor
  useEffect(() => {
    if (isApiKeyModalOpen) {
      setIsLoadingServer(true);
      checkAPIKeys().then((status) => {
        setServerStatus(status);
        setIsLoadingServer(false);
      });
    }
  }, [isApiKeyModalOpen]);

  const testSingleKey = async (config: KeyConfig) => {
    const value = keys[config.key];
    if (!value) {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Chave não preenchida" },
      }));
      return;
    }

    setTestingKey(config.key);
    try {
      const response = await fetch("/api/config/test-key", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          keyType: config.key,
          keyValue: value,
          channelId: config.key === "youtube_api_key" ? keys.youtube_channel_id : undefined,
        }),
      });

      const result = await response.json();
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: result.success, message: result.message },
      }));
      markKeyTested(config.key, result.success);
    } catch {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Erro ao testar" },
      }));
      markKeyTested(config.key, false);
    } finally {
      setTestingKey(null);
    }
  };

  const testAllKeys = async () => {
    setTestingAll(true);
    const keysToTest = API_KEYS_CONFIG.filter((config) => keys[config.key]);

    for (const config of keysToTest) {
      await testSingleKey(config);
    }
    setTestingAll(false);
  };

  const toggleShowPassword = (key: string) => {
    setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));
  };

  const getKeyStatus = (config: KeyConfig) => {
    const hasLocalKey = !!keys[config.key];
    const localKeyTested = testedKeys[config.key];
    const serverKey = config.key.replace("_api_key", "").replace("_", "") as keyof APIKeyStatus;
    const hasServerKey = serverStatus?.[serverKey] ?? false;

    if (hasLocalKey && localKeyTested) {
      return "valid";
    } else if (hasLocalKey) {
      return "pending";
    } else if (hasServerKey) {
      return "server";
    }
    return "missing";
  };

  const configuredCount = API_KEYS_CONFIG.filter((config) => {
    const status = getKeyStatus(config);
    return status === "valid" || status === "server";
  }).length;

  const [activeTab, setActiveTab] = useState<'keys' | 'models'>('keys');
  const [selectedProvider, setSelectedProvider] = useState<string | null>(null);

  // Provedores de IA para explorar modelos
  const AI_PROVIDERS = [
    { key: 'openai', name: 'OpenAI', icon: '🤖', apiKeyField: 'openai_api_key' },
    { key: 'anthropic', name: 'Anthropic', icon: '🔮', apiKeyField: 'anthropic_api_key' },
    { key: 'gemini', name: 'Google Gemini', icon: '🧠', apiKeyField: 'google_api_key' },
    { key: 'elevenlabs', name: 'ElevenLabs', icon: '🎤', apiKeyField: 'elevenlabs_api_key' },
    { key: 'pexels', name: 'Pexels', icon: '📷', apiKeyField: 'pexels_api_key' },
    { key: 'pixabay', name: 'Pixabay', icon: '🖼️', apiKeyField: 'pixabay_api_key' },
    { key: 'youtube', name: 'YouTube', icon: '📺', apiKeyField: 'youtube_api_key' },
    { key: 'tavily', name: 'Tavily', icon: '🔍', apiKeyField: 'tavily_api_key' },
    { key: 'json2video', name: 'JSON2Video', icon: '🎬', apiKeyField: 'json2video_api_key' },
  ];

  const isProviderConnected = (apiKeyField: string) => {
    const hasLocalKey = !!keys[apiKeyField as keyof StoredAPIKeys];
    const serverKey = apiKeyField.replace("_api_key", "").replace("_", "") as keyof APIKeyStatus;
    const hasServerKey = serverStatus?.[serverKey] ?? false;
    return hasLocalKey || hasServerKey;
  };

  return (
    <Modal
      isOpen={isApiKeyModalOpen}
      onClose={closeApiKeyModal}
      title="Configurar API Keys"
      size="xl"
    >
      <div className="space-y-6">
        {/* Tabs */}
        <div className="flex border-b border-subtle">
          <button
            onClick={() => { setActiveTab('keys'); setSelectedProvider(null); }}
            className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${
              activeTab === 'keys'
                ? 'text-indigo-400 border-b-2 border-indigo-400'
                : 'text-muted hover:text-gray-200'
            }`}
          >
            <Key className="w-4 h-4" />
            API Keys
          </button>
          <button
            onClick={() => setActiveTab('models')}
            className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${
              activeTab === 'models'
                ? 'text-indigo-400 border-b-2 border-indigo-400'
                : 'text-muted hover:text-gray-200'
            }`}
          >
            <Cpu className="w-4 h-4" />
            Modelos Disponíveis
          </button>
        </div>

        {/* Tab: Modelos */}
        {activeTab === 'models' && (
          <div className="space-y-4">
            {!selectedProvider ? (
              <>
                <p className="text-sm text-muted">
                  Selecione um provedor para explorar os modelos disponíveis:
                </p>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                  {AI_PROVIDERS.map(provider => {
                    const connected = isProviderConnected(provider.apiKeyField);
                    return (
                      <button
                        key={provider.key}
                        onClick={() => setSelectedProvider(provider.key)}
                        className={`p-4 rounded-lg border transition-all flex items-center gap-3 hover:bg-layer-2/50 ${
                          connected
                            ? 'border-green-500/30 bg-green-900/10'
                            : 'border-subtle bg-layer-2/30'
                        }`}
                      >
                        <span className="text-2xl">{provider.icon}</span>
                        <div className="text-left flex-1">
                          <p className="font-medium text-white text-sm">{provider.name}</p>
                          <p className={`text-xs ${connected ? 'text-green-400' : 'text-muted'}`}>
                            {connected ? 'Conectado' : 'Não configurado'}
                          </p>
                        </div>
                        <ChevronRight className="w-4 h-4 text-muted" />
                      </button>
                    );
                  })}
                </div>
              </>
            ) : (
              <>
                <button
                  onClick={() => setSelectedProvider(null)}
                  className="text-sm text-indigo-400 hover:text-indigo-300 flex items-center gap-1"
                >
                  ← Voltar para lista
                </button>
                <ModelsExplorer
                  provider={selectedProvider}
                  apiKey={keys[AI_PROVIDERS.find(p => p.key === selectedProvider)?.apiKeyField as keyof StoredAPIKeys]}
                  isConnected={isProviderConnected(AI_PROVIDERS.find(p => p.key === selectedProvider)?.apiKeyField || '')}
                />
              </>
            )}
          </div>
        )}

        {/* Tab: API Keys */}
        {activeTab === 'keys' && (
          <>
        {/* Resumo */}
        <div className="flex items-center justify-between p-4 bg-layer-2/50 rounded-lg">
          <div>
            <p className="text-sm text-muted">APIs Configuradas</p>
            <p className="text-2xl font-bold text-white">
              {configuredCount} / {API_KEYS_CONFIG.length}
            </p>
          </div>
          <div className="flex gap-2">
            <Button
              variant="outline"
              size="sm"
              onClick={testAllKeys}
              isLoading={testingAll}
              leftIcon={<TestTube className="w-4 h-4" />}
            >
              Testar Todas
            </Button>
            <Button
              variant="ghost"
              size="sm"
              onClick={clearAllKeys}
              leftIcon={<Trash2 className="w-4 h-4" />}
            >
              Limpar
            </Button>
          </div>
        </div>

        {/* Instruções */}
        <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
          <p className="text-sm text-blue-300">
            <strong>Como funciona:</strong> Insira suas API keys abaixo. Elas serão salvas
            na sua sessão do navegador (sessionStorage) e usadas enquanto você estiver
            usando o sistema. As chaves do servidor (.env) têm prioridade.
          </p>
        </div>

        {/* Lista de APIs */}
        <div className="space-y-3 max-h-[50vh] overflow-auto pr-2">
          {API_KEYS_CONFIG.map((config) => {
            const status = getKeyStatus(config);
            const isTestingThis = testingKey === config.key;
            const testResult = testResults[config.key];

            return (
              <div
                key={config.key}
                className="p-4 bg-layer-2/30 rounded-lg border border-subtle"
              >
                <div className="flex items-center justify-between mb-2">
                  <div className="flex items-center gap-2">
                    <span className="font-medium text-white">{config.name}</span>
                    {config.required && (
                      <Badge variant="warning" size="sm">
                        Requerido
                      </Badge>
                    )}
                    {status === "valid" && (
                      <Badge variant="success" size="sm">
                        <Check className="w-3 h-3 mr-1" />
                        Validado
                      </Badge>
                    )}
                    {status === "server" && (
                      <Badge variant="info" size="sm">
                        Servidor
                      </Badge>
                    )}
                    {status === "pending" && (
                      <Badge variant="warning" size="sm">
                        Não testada
                      </Badge>
                    )}
                  </div>
                  <a
                    href={config.docsUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-sm text-primary-400 hover:text-primary-300 flex items-center gap-1"
                  >
                    Obter
                    <ExternalLink className="w-3 h-3" />
                  </a>
                </div>

                <div className="flex gap-2">
                  <div className="flex-1 relative">
                    <Input
                      type={showPassword[config.key] ? "text" : "password"}
                      value={keys[config.key]}
                      onChange={(e) => setKey(config.key, e.target.value)}
                      placeholder={config.placeholder}
                      className="pr-10 font-mono text-sm"
                    />
                    <button
                      type="button"
                      onClick={() => toggleShowPassword(config.key)}
                      className="absolute right-3 top-1/2 -translate-y-1/2 text-muted hover:text-gray-300"
                    >
                      {showPassword[config.key] ? (
                        <EyeOff className="w-4 h-4" />
                      ) : (
                        <Eye className="w-4 h-4" />
                      )}
                    </button>
                  </div>
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => testSingleKey(config)}
                    isLoading={isTestingThis}
                    disabled={!keys[config.key] || testingAll}
                    className="w-24"
                  >
                    {isTestingThis ? (
                      <Loader2 className="w-4 h-4 animate-spin" />
                    ) : (
                      <>
                        <TestTube className="w-4 h-4 mr-1" />
                        Testar
                      </>
                    )}
                  </Button>
                  {keys[config.key] && (
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => clearKey(config.key)}
                      className="px-2"
                    >
                      <X className="w-4 h-4" />
                    </Button>
                  )}
                </div>

                {/* Resultado do teste */}
                {testResult && (
                  <div
                    className={`mt-2 text-sm flex items-center gap-1 ${
                      testResult.success ? "text-green-400" : "text-red-400"
                    }`}
                  >
                    {testResult.success ? (
                      <Check className="w-4 h-4" />
                    ) : (
                      <X className="w-4 h-4" />
                    )}
                    {testResult.message}
                  </div>
                )}

                {/* Info do env var */}
                <p className="text-xs text-muted mt-2 font-mono">
                  ENV: {config.envVar}
                </p>
              </div>
            );
          })}
        </div>

        {/* Requisitos Mínimos */}
        <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
          <p className="text-sm text-yellow-300">
            <strong>Requisitos mínimos para funcionar:</strong>
          </p>
          <ul className="text-sm text-yellow-300/80 mt-2 list-disc list-inside space-y-1">
            <li>YouTube Data API Key + Channel ID (para sincronização)</li>
            <li>Pelo menos 1 provedor de AI (OpenAI, Google, ou Anthropic)</li>
            <li>Pelo menos 1 provedor de mídia (Pexels, Pixabay, ou Unsplash)</li>
          </ul>
        </div>
          </>
        )}

        {/* Botões de ação */}
        <div className="flex justify-end gap-2 pt-4 border-t border-subtle">
          <Button variant="ghost" onClick={closeApiKeyModal}>
            Fechar
          </Button>
          <Button
            variant="primary"
            onClick={closeApiKeyModal}
            leftIcon={<Save className="w-4 h-4" />}
          >
            Salvar e Fechar
          </Button>
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/AssetCard.tsx`

```
"use client";

import { useState } from "react";
import Card from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { AssetStatus, AIProvider, APIKeyStatus } from "@/types";
import { Check, RefreshCw, Pencil, Loader2, AlertCircle } from "lucide-react";

interface AssetCardProps {
  title: string;
  status: AssetStatus;
  children: React.ReactNode;
  isEditing?: boolean;
  onEdit?: () => void;
  onRegenerate?: (provider: AIProvider, model: string) => void;
  onApprove?: () => void;
  onCancelEdit?: () => void;
  onSaveEdit?: () => void;
  editContent?: React.ReactNode;
  apiKeyStatus?: APIKeyStatus;
  error?: string;
  isGenerating?: boolean;
}

export default function AssetCard({
  title,
  status,
  children,
  isEditing = false,
  onEdit,
  onRegenerate,
  onApprove,
  onCancelEdit,
  onSaveEdit,
  editContent,
  apiKeyStatus,
  error,
  isGenerating = false,
}: AssetCardProps) {
  const [showRegenerate, setShowRegenerate] = useState(false);
  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  const getStatusBadge = () => {
    switch (status) {
      case "pending":
        return <Badge variant="default">Pendente</Badge>;
      case "generating":
        return <Badge variant="info">Gerando...</Badge>;
      case "ready":
        return <Badge variant="warning">Aguardando Aprovação</Badge>;
      case "approved":
        return <Badge variant="success">Aprovado</Badge>;
      case "error":
        return <Badge variant="error">Erro</Badge>;
      default:
        return null;
    }
  };

  const handleRegenerate = () => {
    if (selectedProvider && selectedModel && onRegenerate) {
      onRegenerate(selectedProvider, selectedModel);
      setShowRegenerate(false);
    }
  };

  return (
    <Card className="relative">
      {/* Header */}
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-3">
          <h3 className="text-lg font-semibold text-white">{title}</h3>
          {getStatusBadge()}
        </div>
      </div>

      {/* Error message */}
      {error && (
        <div className="mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span className="text-sm">{error}</span>
        </div>
      )}

      {/* Content */}
      <div className="mb-4">
        {isGenerating ? (
          <div className="flex items-center justify-center py-8">
            <Loader2 className="w-8 h-8 animate-spin text-primary-500" />
          </div>
        ) : isEditing ? (
          editContent
        ) : (
          children
        )}
      </div>

      {/* Regenerate AI Selector */}
      {showRegenerate && (
        <div className="mb-4 p-4 bg-layer-2/50 rounded-lg space-y-3">
          <AIModelSelector
            selectedProvider={selectedProvider}
            selectedModel={selectedModel}
            onProviderChange={setSelectedProvider}
            onModelChange={setSelectedModel}
            apiKeyStatus={apiKeyStatus}
            label="Selecione o modelo para regenerar"
          />
          <div className="flex gap-2">
            <Button
              size="sm"
              variant="primary"
              onClick={handleRegenerate}
              disabled={!selectedProvider || !selectedModel}
            >
              Regenerar
            </Button>
            <Button
              size="sm"
              variant="ghost"
              onClick={() => setShowRegenerate(false)}
            >
              Cancelar
            </Button>
          </div>
        </div>
      )}

      {/* Actions */}
      <div className="flex flex-wrap gap-2">
        {isEditing ? (
          <>
            <Button size="sm" variant="success" onClick={onSaveEdit}>
              Salvar
            </Button>
            <Button size="sm" variant="ghost" onClick={onCancelEdit}>
              Cancelar
            </Button>
          </>
        ) : (
          <>
            {status !== "approved" && status !== "generating" && onEdit && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<Pencil className="w-4 h-4" />}
                onClick={onEdit}
              >
                Editar
              </Button>
            )}
            {status !== "approved" && status !== "generating" && onRegenerate && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<RefreshCw className="w-4 h-4" />}
                onClick={() => setShowRegenerate(true)}
              >
                Regerar
              </Button>
            )}
            {status === "ready" && onApprove && (
              <Button
                size="sm"
                variant="success"
                leftIcon={<Check className="w-4 h-4" />}
                onClick={onApprove}
              >
                Aprovar
              </Button>
            )}
            {status === "approved" && (
              <span className="flex items-center gap-1 text-green-400 text-sm">
                <Check className="w-4 h-4" />
                Aprovado
              </span>
            )}
          </>
        )}
      </div>
    </Card>
  );
}

```

---
#### `components/ConnectApisModal.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { X, Check, AlertCircle, RefreshCw, Key, Save, Server, Monitor, Trash2 } from 'lucide-react';
import { useAPIKeysStore, StoredAPIKeys } from '@/lib/api-keys-store';
import { useUIStore } from '@/lib/store';

// Mapeamento EXATO com lib/api-keys-store.ts
const KEY_MAP: Record<string, keyof StoredAPIKeys> = {
  openai: "openai_api_key",
  gemini: "google_api_key",
  anthropic: "anthropic_api_key",
  youtube: "youtube_api_key",
  pexels: "pexels_api_key",
  pixabay: "pixabay_api_key",
  elevenlabs: "elevenlabs_api_key",
  tavily: "tavily_api_key",
  json2video: "json2video_api_key"
};

const API_NAMES: Record<string, string> = {
  openai: "OpenAI (GPT-4)",
  gemini: "Google Gemini",
  anthropic: "Anthropic Claude",
  youtube: "YouTube Data API",
  pexels: "Pexels Media",
  pixabay: "Pixabay Media",
  elevenlabs: "ElevenLabs Voice",
  tavily: "Tavily Search",
  json2video: "JSON2Video"
};

export default function ConnectApisModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const isOpen = isApiKeyModalOpen;
  const onClose = closeApiKeyModal;
  const [loading, setLoading] = useState(true);
  const [serverKeys, setServerKeys] = useState<Record<string, boolean>>({});
  const [showEdit, setShowEdit] = useState<string | null>(null);
  const [manualInput, setManualInput] = useState("");
  const [mounted, setMounted] = useState(false);
  
  const { keys: localKeys, setKey, clearKey } = useAPIKeysStore();

  useEffect(() => {
    setMounted(true);
  }, []);

  useEffect(() => {
    if (isOpen) {
      checkServerKeys();
    }
  }, [isOpen]);

  const checkServerKeys = async () => {
    setLoading(true);
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerKeys(data);
    } catch (e) {
      console.error(e);
    } finally {
      setLoading(false);
    }
  };

  const handleSaveKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      setKey(storeKeyName, manualInput);
      setShowEdit(null);
      setManualInput("");
    }
  };

  const handleClearKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      clearKey(storeKeyName);
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-[99999] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-200">
      <div className="w-full max-w-3xl bg-[#09090b] border border-subtle rounded-xl text-white shadow-2xl flex flex-col max-h-[85vh]">
        
        <div className="flex items-center justify-between p-6 border-b border-subtle bg-layer-1/50 rounded-t-xl">
          <div>
            <h2 className="text-xl font-bold flex items-center gap-2">
              <Key className="w-5 h-5 text-indigo-500" />
              Central de Conexões
            </h2>
            <p className="text-muted text-sm">Gerencie chaves do Servidor (.env) ou Locais (Navegador).</p>
          </div>
          <button onClick={onClose} className="p-2 hover:bg-layer-2 rounded-full transition-colors cursor-pointer">
            <X className="w-6 h-6 text-muted hover:text-white" />
          </button>
        </div>

        <div className="p-6 overflow-y-auto custom-scrollbar space-y-4">
          {loading ? (
             <div className="flex flex-col items-center justify-center py-12 text-zinc-500 gap-3">
               <RefreshCw className="animate-spin w-8 h-8 text-indigo-500" />
               <p>Verificando status...</p>
             </div>
          ) : (
            Object.keys(API_NAMES).map((key) => {
              const storeKeyName = KEY_MAP[key];
              const isServerConnected = serverKeys[key];
              const hasLocalKey = mounted && !!localKeys[storeKeyName];
              const isLocalConnected = hasLocalKey;
              const isConnected = isServerConnected || isLocalConnected;
              const isEditing = showEdit === key;

              return (
                <div key={key} className={`border rounded-lg transition-all ${isConnected ? 'border-green-900/30 bg-green-900/5' : 'border-subtle bg-layer-1/30'}`}>
                  <div className="flex items-center justify-between p-4">
                    <div className="flex items-center gap-3">
                      <div className={`p-2 rounded-lg ${isConnected ? 'bg-green-500/10' : 'bg-layer-2'}`}>
                        {isConnected ? <Check className="w-5 h-5 text-green-500" /> : <AlertCircle className="w-5 h-5 text-zinc-500" />}
                      </div>
                      <div>
                        <h3 className="font-semibold text-zinc-200">{API_NAMES[key]}</h3>
                        <div className="flex items-center gap-2 mt-1">
                          {isServerConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-layer-2 px-2 py-0.5 rounded text-zinc-300 border border-subtle">
                              <Server className="w-3 h-3" /> Servidor
                            </span>
                          )}
                          {isLocalConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-indigo-900/30 px-2 py-0.5 rounded text-indigo-300 border border-indigo-500/20">
                              <Monitor className="w-3 h-3" /> Local
                            </span>
                          )}
                          {!isConnected && <span className="text-[10px] text-red-400 font-medium">Chave ausente</span>}
                        </div>
                      </div>
                    </div>

                    <div className="flex items-center gap-2">
                      {isLocalConnected && !isServerConnected && (
                         <button onClick={() => handleClearKey(key)} className="p-2 text-zinc-500 hover:text-red-400 transition-colors" title="Remover">
                           <Trash2 className="w-4 h-4" />
                         </button>
                      )}
                      {!isServerConnected && (
                        <button
                          onClick={() => {
                            setShowEdit(isEditing ? null : key);
                            setManualInput(localKeys[storeKeyName] || "");
                          }}
                          className={`px-3 py-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer border ${isEditing ? 'bg-zinc-700 border-zinc-600 text-white' : 'bg-layer-1 border-subtle text-zinc-300 hover:bg-layer-2'}`}
                        >
                          {isEditing ? 'Cancelar' : (isLocalConnected ? 'Editar' : 'Adicionar')}
                        </button>
                      )}
                    </div>
                  </div>

                  {isEditing && (
                    <div className="p-4 border-t border-subtle bg-black/20 animate-in slide-in-from-top-2 duration-200">
                      <label className="text-xs text-muted mb-1.5 block">Cole sua chave API aqui:</label>
                      <div className="flex gap-2">
                        <input 
                          type="password"
                          placeholder="sk-..."
                          className="flex-1 bg-zinc-950 border border-subtle rounded-md py-2 px-3 text-sm text-white focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                          value={manualInput}
                          onChange={(e) => setManualInput(e.target.value)}
                        />
                        <button 
                          onClick={() => handleSaveKey(key)}
                          disabled={!manualInput}
                          className="bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 cursor-pointer shadow-lg shadow-indigo-500/20"
                        >
                          <Save className="w-4 h-4" /> Salvar
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              );
            })
          )}
        </div>
        
        <div className="p-6 border-t border-subtle bg-layer-1/50 rounded-b-xl flex justify-between items-center">
          <button onClick={checkServerKeys} className="text-muted hover:text-white text-sm flex items-center gap-2 transition-colors cursor-pointer">
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} /> Verificar
          </button>
          <button onClick={onClose} className="px-6 py-2.5 bg-white hover:bg-zinc-200 text-black font-bold rounded-lg transition-colors cursor-pointer shadow-lg shadow-white/5">
            Concluir
          </button>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/FileDropzone.tsx`

```
"use client";

import { useCallback } from "react";
import { useDropzone } from "react-dropzone";
import { cn } from "@/lib/utils";
import { Upload, File, X } from "lucide-react";

interface FileDropzoneProps {
  onFileAccepted: (file: File) => void;
  accept?: Record<string, string[]>;
  maxSize?: number;
  currentFile?: File | null;
  onRemove?: () => void;
  label?: string;
  description?: string;
}

export default function FileDropzone({
  onFileAccepted,
  accept = { "text/csv": [".csv"] },
  maxSize = 10 * 1024 * 1024, // 10MB
  currentFile,
  onRemove,
  label = "Upload de Arquivo",
  description = "Arraste e solte ou clique para selecionar",
}: FileDropzoneProps) {
  const onDrop = useCallback(
    (acceptedFiles: File[]) => {
      if (acceptedFiles.length > 0) {
        onFileAccepted(acceptedFiles[0]);
      }
    },
    [onFileAccepted]
  );

  const { getRootProps, getInputProps, isDragActive, fileRejections } =
    useDropzone({
      onDrop,
      accept,
      maxSize,
      multiple: false,
    });

  const formatFileSize = (bytes: number) => {
    if (bytes < 1024) return bytes + " B";
    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + " KB";
    return (bytes / (1024 * 1024)).toFixed(1) + " MB";
  };

  if (currentFile) {
    return (
      <div className="border border-subtle rounded-lg p-4 bg-layer-2/50">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="p-2 bg-primary-500/10 rounded-lg">
              <File className="w-5 h-5 text-primary-500" />
            </div>
            <div>
              <p className="text-sm font-medium text-white">{currentFile.name}</p>
              <p className="text-xs text-muted">
                {formatFileSize(currentFile.size)}
              </p>
            </div>
          </div>
          {onRemove && (
            <button
              onClick={onRemove}
              className="p-1 hover:bg-gray-700 rounded-lg transition-colors"
            >
              <X className="w-4 h-4 text-muted" />
            </button>
          )}
        </div>
      </div>
    );
  }

  return (
    <div>
      <div
        {...getRootProps()}
        className={cn(
          "border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200",
          isDragActive
            ? "border-primary-500 bg-primary-500/10"
            : "border-subtle hover:border-gray-600 bg-layer-2/30"
        )}
      >
        <input {...getInputProps()} />
        <Upload
          className={cn(
            "w-10 h-10 mx-auto mb-3",
            isDragActive ? "text-primary-500" : "text-muted"
          )}
        />
        <p className="text-sm font-medium text-white mb-1">{label}</p>
        <p className="text-xs text-muted">{description}</p>
        <p className="text-xs text-muted mt-2">
          Tamanho máximo: {formatFileSize(maxSize)}
        </p>
      </div>

      {fileRejections.length > 0 && (
        <div className="mt-2 text-sm text-red-400">
          {fileRejections[0].errors.map((error) => (
            <p key={error.code}>{error.message}</p>
          ))}
        </div>
      )}
    </div>
  );
}

```

---
#### `components/GuidelinesModal.tsx`

```
"use client";

import { useState } from "react";
import Modal from "@/components/ui/Modal";
import Toggle from "@/components/ui/Toggle";
import { useGuidelinesStore, useUIStore } from "@/lib/store";
import { Diretriz, DiretrizScope } from "@/types";
import {
  Plus,
  Pencil,
  Trash2,
  Check,
  FileText,
  Image,
  Volume2,
  AlignLeft,
  Film,
  Zap,
  Settings2,
  Sparkles,
  BookOpen
} from "lucide-react";
import { cn } from "@/lib/utils";

const SCOPE_OPTIONS: { value: DiretrizScope; label: string; icon: React.ElementType; color: string; bgColor: string }[] = [
  { value: "script", label: "Roteiro", icon: FileText, color: "text-blue-400", bgColor: "bg-blue-500/10 border-blue-500/30 hover:bg-blue-500/20" },
  { value: "thumbnail", label: "Thumbnail", icon: Image, color: "text-purple-400", bgColor: "bg-purple-500/10 border-purple-500/30 hover:bg-purple-500/20" },
  { value: "audio", label: "Áudio", icon: Volume2, color: "text-green-400", bgColor: "bg-green-500/10 border-green-500/30 hover:bg-green-500/20" },
  { value: "description", label: "Descrição", icon: AlignLeft, color: "text-amber-400", bgColor: "bg-amber-500/10 border-amber-500/30 hover:bg-amber-500/20" },
  { value: "video", label: "Vídeo", icon: Film, color: "text-red-400", bgColor: "bg-red-500/10 border-red-500/30 hover:bg-red-500/20" },
];

export default function GuidelinesModal() {
  const { isGuidelinesModalOpen, closeGuidelinesModal } = useUIStore();
  const {
    guidelines,
    addDiretriz,
    updateDiretriz,
    deleteDiretriz,
    toggleDiretriz,
  } = useGuidelinesStore();

  const [isCreating, setIsCreating] = useState(false);
  const [editingId, setEditingId] = useState<string | null>(null);
  const [formData, setFormData] = useState<{
    title: string;
    description: string;
    systemPrompt: string;
    appliesTo: DiretrizScope[];
  }>({
    title: "",
    description: "",
    systemPrompt: "",
    appliesTo: [],
  });

  const resetForm = () => {
    setFormData({
      title: "",
      description: "",
      systemPrompt: "",
      appliesTo: [],
    });
    setIsCreating(false);
    setEditingId(null);
  };

  const handleCreate = () => {
    if (!formData.title || !formData.systemPrompt || formData.appliesTo.length === 0) {
      return;
    }

    addDiretriz({
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
      active: true,
    });

    resetForm();
  };

  const handleEdit = (diretriz: Diretriz) => {
    setEditingId(diretriz.id);
    setFormData({
      title: diretriz.title,
      description: diretriz.description,
      systemPrompt: diretriz.systemPrompt,
      appliesTo: diretriz.appliesTo,
    });
  };

  const handleSaveEdit = () => {
    if (!editingId || !formData.title || !formData.systemPrompt) return;

    updateDiretriz(editingId, {
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
    });

    resetForm();
  };

  const handleDelete = (id: string) => {
    if (confirm("Tem certeza que deseja excluir esta diretriz?")) {
      deleteDiretriz(id);
    }
  };

  const toggleScope = (scope: DiretrizScope) => {
    setFormData((prev) => ({
      ...prev,
      appliesTo: prev.appliesTo.includes(scope)
        ? prev.appliesTo.filter((s) => s !== scope)
        : [...prev.appliesTo, scope],
    }));
  };

  return (
    <Modal
      isOpen={isGuidelinesModalOpen}
      onClose={closeGuidelinesModal}
      title=""
      size="xl"
    >
      <div className="space-y-6">
        {/* Header Customizado */}
        <div className="flex items-center gap-4 pb-4 border-b border-subtle">
          <div className="p-3 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 rounded-xl border border-indigo-500/30">
            <Settings2 className="w-6 h-6 text-indigo-400" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white flex items-center gap-2">
              Engine de Diretrizes
              <Sparkles className="w-5 h-5 text-amber-400" />
            </h2>
            <p className="text-muted text-sm">Configure comportamentos globais do sistema de IA</p>
          </div>
        </div>

        {/* Description */}
        <div className="p-4 bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10 border border-indigo-500/20 rounded-xl">
          <div className="flex items-start gap-3">
            <BookOpen className="w-5 h-5 text-indigo-400 mt-0.5 flex-shrink-0" />
            <p className="text-sm text-secondary">
              As diretrizes são <strong className="text-indigo-400">globais e transversais</strong>. Elas são
              aplicadas automaticamente em todas as gerações de conteúdo conforme
              o escopo selecionado. As diretrizes <strong className="text-green-400">ADICIONAM</strong> contexto à análise,
              nunca substituem.
            </p>
          </div>
        </div>

        {/* Create New Button */}
        {!isCreating && !editingId && (
          <button
            onClick={() => setIsCreating(true)}
            className="w-full p-4 border-2 border-dashed border-subtle hover:border-indigo-500/50 rounded-xl transition-all group hover:bg-indigo-500/5"
          >
            <div className="flex items-center justify-center gap-2 text-muted group-hover:text-indigo-400">
              <Plus className="w-5 h-5" />
              <span className="font-medium">Criar Nova Diretriz</span>
            </div>
          </button>
        )}

        {/* Create/Edit Form */}
        {(isCreating || editingId) && (
          <div className="bg-gradient-to-br from-zinc-900 to-zinc-950 border border-indigo-500/30 rounded-xl p-5 space-y-5">
            <div className="flex items-center gap-3 pb-3 border-b border-subtle">
              <div className={`p-2 rounded-lg ${editingId ? 'bg-amber-500/10' : 'bg-green-500/10'}`}>
                {editingId ? <Pencil className="w-4 h-4 text-amber-400" /> : <Zap className="w-4 h-4 text-green-400" />}
              </div>
              <h3 className="text-lg font-semibold text-white">
                {editingId ? "Editar Diretriz" : "Nova Diretriz"}
              </h3>
            </div>

            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-secondary mb-2">Título</label>
                <input
                  value={formData.title}
                  onChange={(e) => setFormData((prev) => ({ ...prev, title: e.target.value }))}
                  placeholder="Ex: Tom de voz formal"
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-2">Descrição (opcional)</label>
                <input
                  value={formData.description}
                  onChange={(e) => setFormData((prev) => ({ ...prev, description: e.target.value }))}
                  placeholder="Breve descrição da diretriz"
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-2">System Prompt</label>
                <textarea
                  value={formData.systemPrompt}
                  onChange={(e) => setFormData((prev) => ({ ...prev, systemPrompt: e.target.value }))}
                  placeholder="Instruções que serão adicionadas ao prompt do AI..."
                  rows={4}
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all resize-none"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-3">
                  Aplicar em:
                </label>
                <div className="flex flex-wrap gap-2">
                  {SCOPE_OPTIONS.map((option) => {
                    const Icon = option.icon;
                    const isSelected = formData.appliesTo.includes(option.value);
                    return (
                      <button
                        key={option.value}
                        onClick={() => toggleScope(option.value)}
                        className={cn(
                          "px-4 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 border",
                          isSelected
                            ? `${option.bgColor} ${option.color} border-current`
                            : "bg-layer-2 text-muted border-subtle hover:bg-zinc-700"
                        )}
                      >
                        <Icon className="w-4 h-4" />
                        {option.label}
                      </button>
                    );
                  })}
                </div>
              </div>

              <div className="flex gap-3 pt-3 border-t border-subtle">
                <button
                  onClick={editingId ? handleSaveEdit : handleCreate}
                  disabled={!formData.title || !formData.systemPrompt || formData.appliesTo.length === 0}
                  className={cn(
                    "flex-1 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",
                    formData.title && formData.systemPrompt && formData.appliesTo.length > 0
                      ? "bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-500 hover:to-purple-500"
                      : "bg-layer-2 text-muted cursor-not-allowed"
                  )}
                >
                  <Check className="w-4 h-4" />
                  {editingId ? "Salvar Alterações" : "Criar Diretriz"}
                </button>
                <button
                  onClick={resetForm}
                  className="px-6 py-3 rounded-lg font-medium bg-layer-2 text-secondary hover:bg-zinc-700 transition-colors"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        )}

        {/* Existing Guidelines */}
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <h3 className="text-sm font-semibold text-muted uppercase tracking-wider flex items-center gap-2">
              <BookOpen className="w-4 h-4" />
              Diretrizes Existentes
            </h3>
            <span className="px-2 py-1 bg-layer-2 rounded-full text-xs text-muted">
              {guidelines.diretrizes.length} {guidelines.diretrizes.length === 1 ? 'diretriz' : 'diretrizes'}
            </span>
          </div>

          {guidelines.diretrizes.length === 0 ? (
            <div className="text-center py-12 bg-layer-1/50 rounded-xl border border-subtle">
              <div className="w-16 h-16 bg-layer-2 rounded-full flex items-center justify-center mx-auto mb-4">
                <FileText className="w-8 h-8 text-disabled" />
              </div>
              <p className="text-muted mb-2">Nenhuma diretriz criada ainda</p>
              <p className="text-disabled text-sm">Crie sua primeira diretriz para personalizar o comportamento da IA</p>
            </div>
          ) : (
            <div className="space-y-3">
              {guidelines.diretrizes.map((diretriz) => (
                <div
                  key={diretriz.id}
                  className={cn(
                    "bg-layer-1 border rounded-xl p-4 transition-all group hover:shadow-lg",
                    diretriz.active ? "border-green-500/30 hover:border-green-500/50" : "border-subtle hover:border-subtle"
                  )}
                >
                  <div className="flex items-start justify-between gap-4">
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-2 flex-wrap">
                        <h4 className="font-semibold text-white">{diretriz.title}</h4>
                        <span className={cn(
                          "px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1",
                          diretriz.active
                            ? "bg-green-500/20 text-green-400"
                            : "bg-zinc-700 text-muted"
                        )}>
                          {diretriz.active ? (
                            <>
                              <span className="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></span>
                              Ativa
                            </>
                          ) : (
                            "Inativa"
                          )}
                        </span>
                      </div>
                      {diretriz.description && (
                        <p className="text-sm text-muted mb-3">
                          {diretriz.description}
                        </p>
                      )}
                      <div className="flex flex-wrap gap-2">
                        {diretriz.appliesTo.map((scope) => {
                          const scopeData = SCOPE_OPTIONS.find((o) => o.value === scope);
                          const Icon = scopeData?.icon || FileText;
                          return (
                            <span
                              key={scope}
                              className={cn(
                                "px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1.5 border",
                                scopeData?.bgColor || "bg-layer-2",
                                scopeData?.color || "text-muted"
                              )}
                            >
                              <Icon className="w-3 h-3" />
                              {scopeData?.label}
                            </span>
                          );
                        })}
                      </div>
                    </div>

                    <div className="flex items-center gap-2 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0">
                      <Toggle
                        checked={diretriz.active}
                        onChange={() => toggleDiretriz(diretriz.id)}
                      />
                      <button
                        onClick={() => handleEdit(diretriz)}
                        className="p-2 hover:bg-amber-500/10 rounded-lg transition-colors"
                        title="Editar"
                      >
                        <Pencil className="w-4 h-4 text-amber-400" />
                      </button>
                      <button
                        onClick={() => handleDelete(diretriz.id)}
                        className="p-2 hover:bg-red-500/10 rounded-lg transition-colors"
                        title="Excluir"
                      >
                        <Trash2 className="w-4 h-4 text-red-400" />
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/Layout.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { cn } from "@/lib/utils";
import { useUIStore, useBrandingStore } from "@/lib/store";
import {
  Menu,
  X,
  Home,
  Workflow,
  BookOpen,
  Key,
  ChevronRight,
  FileText,
  Settings,
  ChevronLeft,
  LogOut,
  Palette,
} from "lucide-react";
import GuidelinesModal from "./GuidelinesModal";
import ConnectApisModal from "./ConnectApisModal";
import { getProfile } from "@/app/actions/settings";
import type { UserProfile } from "@/types";

interface LayoutProps {
  children: React.ReactNode;
}

export default function Layout({ children }: LayoutProps) {
  const pathname = usePathname();
  const { isSidebarOpen, toggleSidebar, openGuidelinesModal, openApiKeyModal } = useUIStore();
  const { systemName, logoUrl } = useBrandingStore();
  const [isMobile, setIsMobile] = useState(false);
  const [isCollapsed, setIsCollapsed] = useState(false);
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [showUserMenu, setShowUserMenu] = useState(false);

  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 1024);
    };
    checkMobile();
    window.addEventListener("resize", checkMobile);
    return () => window.removeEventListener("resize", checkMobile);
  }, []);

  useEffect(() => {
    const loadProfile = async () => {
      try {
        const userProfile = await getProfile();
        setProfile(userProfile);
      } catch (error) {
        console.error('Failed to load profile:', error);
      }
    };
    loadProfile();
  }, []);

  const menuItems = [
    {
      label: "Home",
      icon: <Home className="w-5 h-5" />,
      path: "/",
      type: "link" as const,
    },
    {
      label: "WorkFlow",
      icon: <Workflow className="w-5 h-5" />,
      path: "/workflow",
      type: "link" as const,
    },
    {
      label: "Documentação",
      icon: <FileText className="w-5 h-5" />,
      path: "/documentation",
      type: "link" as const,
    },
    {
      label: "Design System",
      icon: <Palette className="w-5 h-5" />,
      path: "/documentation/design-system",
      type: "link" as const,
    },
    {
      label: "Diretrizes",
      icon: <BookOpen className="w-5 h-5" />,
      type: "button" as const,
      onClick: openGuidelinesModal,
    },
    {
      label: "API Keys",
      icon: <Key className="w-5 h-5" />,
      type: "button" as const,
      onClick: openApiKeyModal,
    },
  ];

  const settingsItem = {
    label: "Settings",
    icon: <Settings className="w-5 h-5" />,
    path: "/settings",
    type: "link" as const,
  };

  return (
    <div className="min-h-screen bg-layer-0 flex">
      {/* Mobile Menu Button */}
      <button
        onClick={toggleSidebar}
        className="lg:hidden fixed top-4 left-4 z-50 p-2 bg-layer-1 rounded-lg border border-default"
      >
        {isSidebarOpen ? (
          <X className="w-5 h-5 text-white" />
        ) : (
          <Menu className="w-5 h-5 text-white" />
        )}
      </button>

      {/* Sidebar */}
      <aside
        className={cn(
          "fixed lg:sticky top-0 left-0 z-40 h-screen bg-layer-1 border-r border-default transition-all duration-300",
          isSidebarOpen ? "translate-x-0" : "-translate-x-full lg:translate-x-0",
          isCollapsed && !isMobile ? "w-20" : "w-64"
        )}
      >
        <div className="flex flex-col h-full">
          {/* Logo */}
          <div className="p-6 border-b border-default">
            <Link href="/" className="flex items-center gap-3 group">
              <div className="w-10 h-10 flex items-center justify-center flex-shrink-0 relative">
                {logoUrl ? (
                  <img
                    src={logoUrl}
                    alt="ORION"
                    className="w-full h-full object-contain drop-shadow-glow"
                    onError={(e) => {
                      e.currentTarget.style.display = 'none';
                    }}
                  />
                ) : (
                  /* Fallback: Logo SVG ORION */
                  <div className="relative w-full h-full bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-glow-md shadow-cyan-500/50 group-hover:shadow-glow-lg group-hover:shadow-cyan-400/70 transition-all duration-300">
                    <div className="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-xl" />
                    <span className="relative text-white font-black text-lg tracking-tighter drop-shadow-lg">
                      OR
                    </span>
                  </div>
                )}
              </div>
              {(!isCollapsed || isMobile) && (
                <div className="flex flex-col">
                  <span className="text-xl font-bold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent whitespace-nowrap group-hover:from-cyan-300 group-hover:via-blue-300 group-hover:to-cyan-300 transition-all duration-300">
                    {systemName}
                  </span>
                  <span className="text-xs text-cyan-400 font-medium">
                    AI-Powered Production
                  </span>
                </div>
              )}
            </Link>
          </div>

          {/* Navigation */}
          <nav className="flex-1 p-4 space-y-1 overflow-auto">
            {menuItems.map((item, index) => {
              if (item.type === "link") {
                const isActive = pathname === item.path ||
                    (item.path === "/workflow" && pathname.startsWith("/step/")) ||
                    (item.path === "/documentation" && pathname.startsWith("/documentation"));

                return (
                  <Link
                    key={index}
                    href={item.path}
                    onClick={() => {
                      if (isMobile) toggleSidebar();
                    }}
                    className={cn(
                      "flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",
                      isActive
                        ? "bg-cyan-500/15 text-cyan-400 border border-cyan-500/30"
                        : "text-text-secondary hover:bg-surface-elevated hover:text-text-primary",
                      isCollapsed && !isMobile && "justify-center"
                    )}
                    title={isCollapsed && !isMobile ? item.label : undefined}
                  >
                    <span
                      className={cn(
                        "flex items-center justify-center w-8 h-8 rounded-lg flex-shrink-0",
                        isActive
                          ? "bg-cyan-500/25"
                          : "bg-surface-default"
                      )}
                    >
                      {item.icon}
                    </span>
                    {(!isCollapsed || isMobile) && (
                      <span className="font-medium">{item.label}</span>
                    )}
                  </Link>
                );
              } else {
                return (
                  <button
                    key={index}
                    onClick={() => {
                      item.onClick?.();
                      if (isMobile) toggleSidebar();
                    }}
                    className={cn(
                      "w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-text-secondary hover:bg-surface-elevated hover:text-text-primary transition-all duration-200",
                      isCollapsed && !isMobile && "justify-center"
                    )}
                    title={isCollapsed && !isMobile ? item.label : undefined}
                  >
                    <span className="flex items-center justify-center w-8 h-8 rounded-lg bg-surface-default flex-shrink-0">
                      {item.icon}
                    </span>
                    {(!isCollapsed || isMobile) && (
                      <>
                        <span className="font-medium">{item.label}</span>
                        <ChevronRight className="w-4 h-4 ml-auto" />
                      </>
                    )}
                  </button>
                );
              }
            })}
          </nav>

          {/* Footer */}
          <div className="p-4 border-t border-default space-y-3">
            {/* Settings Link */}
            <Link
              href={settingsItem.path}
              onClick={() => {
                if (isMobile) toggleSidebar();
              }}
              className={cn(
                "flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",
                pathname === settingsItem.path
                  ? "bg-emerald-500/15 text-emerald-400 border border-emerald-500/30"
                  : "text-text-secondary hover:bg-surface-elevated hover:text-text-primary",
                isCollapsed && !isMobile && "justify-center"
              )}
              title={isCollapsed && !isMobile ? settingsItem.label : undefined}
            >
              <span
                className={cn(
                  "flex items-center justify-center w-8 h-8 rounded-lg flex-shrink-0",
                  pathname === settingsItem.path
                    ? "bg-emerald-500/25"
                    : "bg-surface-default"
                )}
              >
                {settingsItem.icon}
              </span>
              {(!isCollapsed || isMobile) && (
                <span className="font-medium">{settingsItem.label}</span>
              )}
            </Link>

            {/* Collapse Button (desktop only) */}
            {!isMobile && (
              <button
                onClick={() => setIsCollapsed(!isCollapsed)}
                className="w-full flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg text-text-muted hover:bg-surface-elevated hover:text-text-primary transition-all duration-200 group border border-transparent hover:border-border-subtle"
                title={isCollapsed ? "Expandir sidebar" : "Recolher sidebar"}
              >
                <div className="flex items-center justify-center w-8 h-8 rounded-lg bg-surface-default group-hover:bg-cyan-500/10 transition-colors">
                  <ChevronLeft className={cn(
                    "w-4 h-4 transition-all duration-300 group-hover:text-cyan-400",
                    isCollapsed && "rotate-180"
                  )} />
                </div>
                {!isCollapsed && (
                  <span className="text-sm font-medium flex-1 text-left">Recolher</span>
                )}
              </button>
            )}

            {/* Version */}
            {(!isCollapsed || isMobile) && (
              <p className="text-xs text-text-muted text-center">
                {systemName} v1.0.0
              </p>
            )}
          </div>
        </div>
      </aside>

      {/* Overlay for mobile */}
      {isSidebarOpen && isMobile && (
        <div
          className="fixed inset-0 bg-black/50 z-30 lg:hidden"
          onClick={toggleSidebar}
        />
      )}

      {/* Main Content */}
      <main className="flex-1 min-h-screen flex flex-col">
        {/* Header with User Avatar */}
        <header className="sticky top-0 z-30 bg-layer-1/95 backdrop-blur-sm border-b border-default">
          <div className="flex items-center justify-end px-6 py-3 gap-4">
            {/* System Status Indicator */}
            <div className="hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-success/10 border border-success/20">
              <div className="relative w-2 h-2">
                <div className="absolute inset-0 bg-success rounded-full animate-ping opacity-75" />
                <div className="relative w-2 h-2 bg-success rounded-full" />
              </div>
              <span className="text-xs font-medium text-success">Sistema Operacional</span>
            </div>

            {profile && (
              <div className="relative">
                <button
                  onClick={() => setShowUserMenu(!showUserMenu)}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-surface-elevated transition-all"
                >
                  <div className="text-right hidden sm:block">
                    <p className="text-sm font-medium text-text-primary">{profile.name}</p>
                    <p className="text-xs text-text-secondary">{profile.role}</p>
                  </div>
                  <div className="relative">
                    <img
                      src={profile.avatarUrl}
                      alt={profile.name}
                      className="w-9 h-9 rounded-full border-2 border-subtle"
                    />
                    <div className="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-success rounded-full border-2 border-layer-1" />
                  </div>
                </button>

                {/* Dropdown Menu */}
                {showUserMenu && (
                  <>
                    <div
                      className="fixed inset-0 z-40"
                      onClick={() => setShowUserMenu(false)}
                    />
                    <div className="absolute right-0 mt-2 w-48 bg-layer-2 border border-default rounded-lg shadow-xl z-50 overflow-hidden">
                      <Link
                        href="/settings"
                        onClick={() => setShowUserMenu(false)}
                        className="flex items-center gap-2 px-4 py-3 hover:bg-surface-elevated transition-colors text-text-secondary hover:text-text-primary"
                      >
                        <Settings className="w-4 h-4" />
                        <span className="text-sm">Configurações</span>
                      </Link>
                      <div className="border-t border-default" />
                      <button
                        onClick={() => {
                          setShowUserMenu(false);
                          window.location.reload();
                        }}
                        className="w-full flex items-center gap-2 px-4 py-3 hover:bg-surface-elevated transition-colors text-red-400 hover:text-red-300"
                      >
                        <LogOut className="w-4 h-4" />
                        <span className="text-sm">Sair</span>
                      </button>
                    </div>
                  </>
                )}
              </div>
            )}
          </div>
        </header>

        {/* Page Content */}
        <div className="flex-1 overflow-y-auto p-6">
          <div className="max-w-7xl mx-auto">
            {children}
          </div>
        </div>
      </main>

      {/* Modals */}
      <GuidelinesModal />
      <ConnectApisModal />
    </div>
  );
}

```

---
#### `components/ModelsExplorer.tsx`

```
"use client";

import { useState, useEffect, useMemo } from "react";
import {
  Search,
  ChevronDown,
  ChevronUp,
  Sparkles,
  Check,
  Loader2,
  AlertCircle,
  Cpu,
} from "lucide-react";

interface Model {
  id: string;
  name: string;
  description: string;
  isNew?: boolean;
}

interface ModelCategory {
  name: string;
  description: string;
  models: Model[];
}

interface ProviderModels {
  name: string;
  icon: string;
  categories: ModelCategory[];
}

interface ModelsExplorerProps {
  provider: string;
  apiKey?: string;
  isConnected: boolean;
}

export default function ModelsExplorer({ provider, apiKey, isConnected }: ModelsExplorerProps) {
  const [models, setModels] = useState<ProviderModels | null>(null);
  const [availableModels, setAvailableModels] = useState<string[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchQuery, setSearchQuery] = useState("");
  const [expandedCategories, setExpandedCategories] = useState<Record<string, boolean>>({});
  const [loadingAvailable, setLoadingAvailable] = useState(false);

  // Carregar modelos estáticos
  useEffect(() => {
    const fetchModels = async () => {
      setLoading(true);
      try {
        const res = await fetch(`/api/models?provider=${provider}`);
        if (res.ok) {
          const data = await res.json();
          setModels(data);
          // Expandir primeira categoria por padrão
          if (data.categories?.length > 0) {
            setExpandedCategories({ [data.categories[0].name]: true });
          }
        }
      } catch (error) {
        console.error('Error fetching models:', error);
      } finally {
        setLoading(false);
      }
    };

    fetchModels();
  }, [provider]);

  // Carregar modelos disponíveis se conectado
  useEffect(() => {
    const fetchAvailableModels = async () => {
      if (!isConnected || !apiKey) return;

      setLoadingAvailable(true);
      try {
        const res = await fetch('/api/models', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ provider, key: apiKey })
        });
        if (res.ok) {
          const data = await res.json();
          setAvailableModels(data.availableModels || []);
        }
      } catch (error) {
        console.error('Error fetching available models:', error);
      } finally {
        setLoadingAvailable(false);
      }
    };

    fetchAvailableModels();
  }, [provider, apiKey, isConnected]);

  // Filtrar modelos por pesquisa
  const filteredCategories = useMemo(() => {
    if (!models?.categories) return [];
    if (!searchQuery.trim()) return models.categories;

    const query = searchQuery.toLowerCase();
    return models.categories
      .map(category => ({
        ...category,
        models: category.models.filter(
          model =>
            model.id.toLowerCase().includes(query) ||
            model.name.toLowerCase().includes(query) ||
            model.description.toLowerCase().includes(query)
        )
      }))
      .filter(category => category.models.length > 0);
  }, [models, searchQuery]);

  const toggleCategory = (categoryName: string) => {
    setExpandedCategories(prev => ({
      ...prev,
      [categoryName]: !prev[categoryName]
    }));
  };

  const isModelAvailable = (modelId: string) => {
    if (availableModels.length === 0) return null; // Não verificado
    return availableModels.some(m => m.includes(modelId) || modelId.includes(m));
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center p-8">
        <Loader2 className="w-6 h-6 text-indigo-400 animate-spin" />
      </div>
    );
  }

  if (!models) {
    return (
      <div className="p-4 text-center text-muted">
        <AlertCircle className="w-8 h-8 mx-auto mb-2 text-disabled" />
        <p>Modelos não disponíveis para este provedor</p>
      </div>
    );
  }

  return (
    <div className="space-y-4">
      {/* Header com pesquisa */}
      <div className="flex items-center gap-3">
        <span className="text-2xl">{models.icon}</span>
        <div className="flex-1">
          <h3 className="font-semibold text-white">{models.name}</h3>
          <p className="text-xs text-muted">
            {loadingAvailable ? (
              <span className="flex items-center gap-1">
                <Loader2 className="w-3 h-3 animate-spin" />
                Verificando disponibilidade...
              </span>
            ) : isConnected ? (
              <span className="text-green-400">API conectada - modelos verificados</span>
            ) : (
              <span className="text-yellow-400">Configure a API para ver disponibilidade</span>
            )}
          </p>
        </div>
      </div>

      {/* Campo de pesquisa */}
      <div className="relative">
        <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted" />
        <input
          type="text"
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder="Pesquisar modelos..."
          className="w-full pl-10 pr-4 py-2 bg-layer-2/50 border border-subtle rounded-lg text-sm text-white placeholder-zinc-500 focus:outline-none focus:border-indigo-500 transition-colors"
        />
      </div>

      {/* Lista de categorias e modelos */}
      <div className="space-y-2 max-h-[400px] overflow-y-auto pr-2">
        {filteredCategories.map((category) => (
          <div
            key={category.name}
            className="border border-subtle rounded-lg overflow-hidden"
          >
            {/* Cabeçalho da categoria */}
            <button
              onClick={() => toggleCategory(category.name)}
              className="w-full px-4 py-3 bg-layer-2/50 hover:bg-layer-2 flex items-center justify-between transition-colors"
            >
              <div className="text-left">
                <h4 className="font-medium text-white text-sm">{category.name}</h4>
                <p className="text-xs text-muted">{category.description}</p>
              </div>
              <div className="flex items-center gap-2">
                <span className="text-xs text-muted bg-zinc-700 px-2 py-0.5 rounded">
                  {category.models.length} modelos
                </span>
                {expandedCategories[category.name] ? (
                  <ChevronUp className="w-4 h-4 text-muted" />
                ) : (
                  <ChevronDown className="w-4 h-4 text-muted" />
                )}
              </div>
            </button>

            {/* Lista de modelos */}
            {expandedCategories[category.name] && (
              <div className="divide-y divide-zinc-800">
                {category.models.map((model) => {
                  const availability = isModelAvailable(model.id);
                  return (
                    <div
                      key={model.id}
                      className="px-4 py-3 bg-layer-1/50 hover:bg-layer-2/30 transition-colors"
                    >
                      <div className="flex items-start justify-between gap-2">
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 flex-wrap">
                            <span className="font-mono text-sm text-indigo-300">
                              {model.id}
                            </span>
                            {model.isNew && (
                              <span className="px-1.5 py-0.5 bg-green-500/20 text-green-400 text-[10px] font-medium rounded flex items-center gap-1">
                                <Sparkles className="w-2.5 h-2.5" />
                                NOVO
                              </span>
                            )}
                          </div>
                          <p className="text-sm text-white mt-0.5">{model.name}</p>
                          <p className="text-xs text-muted mt-0.5">{model.description}</p>
                        </div>

                        {/* Status de disponibilidade */}
                        <div className="flex-shrink-0">
                          {availability === true && (
                            <div className="flex items-center gap-1 text-green-400 bg-green-500/10 px-2 py-1 rounded">
                              <Check className="w-3 h-3" />
                              <span className="text-[10px] font-medium">Disponível</span>
                            </div>
                          )}
                          {availability === false && (
                            <div className="flex items-center gap-1 text-muted bg-zinc-700/30 px-2 py-1 rounded">
                              <Cpu className="w-3 h-3" />
                              <span className="text-[10px]">Indisponível</span>
                            </div>
                          )}
                          {availability === null && isConnected && (
                            <div className="flex items-center gap-1 text-yellow-400 bg-yellow-500/10 px-2 py-1 rounded">
                              <AlertCircle className="w-3 h-3" />
                              <span className="text-[10px]">Verificar</span>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}
          </div>
        ))}

        {filteredCategories.length === 0 && (
          <div className="p-8 text-center text-muted">
            <Search className="w-8 h-8 mx-auto mb-2 opacity-50" />
            <p>Nenhum modelo encontrado para &quot;{searchQuery}&quot;</p>
          </div>
        )}
      </div>
    </div>
  );
}

```

---
#### `components/VercelToolbar.tsx`

```
'use client';

import { VercelToolbar as Toolbar } from '@vercel/toolbar/next';

/**
 * Componente que integra o Vercel Toolbar em todos os ambientes.
 *
 * O Vercel Toolbar permite:
 * - Adicionar comentários visuais nas páginas usando @menções
 * - Mencionar @Claude para direcionar comentários para a IA
 * - Colaboração em tempo real com a equipe
 * - Funciona em desenvolvimento, preview E produção
 *
 * Configuração:
 * - Habilitado em todos os ambientes (dev, preview, production)
 * - Requer VERCEL_TOKEN e VERCEL_PROJECT_ID configurados
 * - Menções são extraídas via CLI: npm run vercel:comments
 */
export function VercelToolbar() {
  // Habilitar em TODOS os ambientes (dev, preview, production)
  // Para garantir que menções @Claude funcionem em produção
  const shouldInject = true;

  if (!shouldInject) {
    return null;
  }

  return <Toolbar />;
}

```

---
#### `components/design-system/ColorSwatch.tsx`

```
'use client';

import { useState } from 'react';
import { Check, Copy } from 'lucide-react';

interface ColorSwatchProps {
  name: string;
  value: string;
  cssVariable?: string;
  showHex?: boolean;
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

export function ColorSwatch({
  name,
  value,
  cssVariable,
  showHex = true,
  size = 'md',
  className = '',
}: ColorSwatchProps) {
  const [copied, setCopied] = useState(false);

  const sizes = {
    sm: 'w-12 h-12',
    md: 'w-16 h-16',
    lg: 'w-24 h-24',
  };

  const copyToClipboard = async () => {
    const textToCopy = cssVariable || value;
    await navigator.clipboard.writeText(textToCopy);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className={`group ${className}`}>
      <button
        onClick={copyToClipboard}
        className={`
          ${sizes[size]}
          rounded-xl border border-border-subtle
          transition-all duration-200
          hover:scale-105 hover:border-border-active
          hover:shadow-glow-md
          relative overflow-hidden
          focus:outline-none focus:ring-2 focus:ring-cyan-500/50
        `}
        style={{ backgroundColor: value }}
        title={`Copiar: ${cssVariable || value}`}
      >
        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 backdrop-blur-sm">
          {copied ? (
            <Check className="w-5 h-5 text-success" />
          ) : (
            <Copy className="w-4 h-4 text-white" />
          )}
        </div>
      </button>

      <div className="mt-2 space-y-0.5">
        <p className="text-sm font-medium text-foreground truncate">{name}</p>
        {showHex && (
          <p className="text-xs text-foreground-muted font-mono">
            {value.startsWith('var(') ? cssVariable : value}
          </p>
        )}
      </div>
    </div>
  );
}

interface ColorPaletteProps {
  name: string;
  colors: { shade: string; value: string; cssVar?: string }[];
  className?: string;
}

export function ColorPalette({ name, colors, className = '' }: ColorPaletteProps) {
  return (
    <div className={`space-y-3 ${className}`}>
      <h4 className="text-sm font-semibold text-foreground uppercase tracking-wider">
        {name}
      </h4>
      <div className="flex flex-wrap gap-3">
        {colors.map((color) => (
          <ColorSwatch
            key={color.shade}
            name={color.shade}
            value={color.value}
            cssVariable={color.cssVar}
            size="md"
          />
        ))}
      </div>
    </div>
  );
}

interface ColorGridProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function ColorGrid({ title, description, children, className = '' }: ColorGridProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4">
        {children}
      </div>
    </div>
  );
}

```

---
#### `components/design-system/ComponentPreview.tsx`

```
'use client';

import { useState } from 'react';
import { Code, Eye } from 'lucide-react';

interface ComponentPreviewProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  code?: string;
  className?: string;
}

export function ComponentPreview({
  title,
  description,
  children,
  code,
  className = '',
}: ComponentPreviewProps) {
  const [showCode, setShowCode] = useState(false);

  return (
    <div className={`card-glass overflow-hidden ${className}`}>
      {/* Header */}
      <div className="flex items-center justify-between px-6 py-4 border-b border-border-subtle">
        <div>
          <h4 className="text-lg font-semibold text-foreground">{title}</h4>
          {description && (
            <p className="text-sm text-foreground-muted mt-0.5">{description}</p>
          )}
        </div>
        {code && (
          <button
            onClick={() => setShowCode(!showCode)}
            className={`
              btn-ghost btn-sm gap-2
              ${showCode ? 'text-cyan-400' : ''}
            `}
          >
            {showCode ? (
              <>
                <Eye className="w-4 h-4" />
                Preview
              </>
            ) : (
              <>
                <Code className="w-4 h-4" />
                Código
              </>
            )}
          </button>
        )}
      </div>

      {/* Content */}
      {showCode && code ? (
        <div className="p-6 bg-layer-1">
          <pre className="text-sm font-mono text-foreground-secondary overflow-x-auto">
            <code>{code}</code>
          </pre>
        </div>
      ) : (
        <div className="p-6 bg-layer-0/50">
          {children}
        </div>
      )}
    </div>
  );
}

interface ComponentSectionProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function ComponentSection({ title, description, children, className = '' }: ComponentSectionProps) {
  return (
    <section className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-2xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-2 text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="space-y-6">
        {children}
      </div>
    </section>
  );
}

interface PreviewGridProps {
  children: React.ReactNode;
  cols?: 1 | 2 | 3 | 4;
  className?: string;
}

export function PreviewGrid({ children, cols = 2, className = '' }: PreviewGridProps) {
  const gridCols = {
    1: 'grid-cols-1',
    2: 'grid-cols-1 md:grid-cols-2',
    3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
    4: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-4',
  };

  return (
    <div className={`grid ${gridCols[cols]} gap-6 ${className}`}>
      {children}
    </div>
  );
}

interface SpacingPreviewProps {
  name: string;
  value: string;
  className?: string;
}

export function SpacingPreview({ name, value, className = '' }: SpacingPreviewProps) {
  return (
    <div className={`flex items-center gap-4 ${className}`}>
      <div
        className="bg-cyan-500/30 border border-cyan-500/50 rounded"
        style={{ width: value, height: value, minWidth: '4px', minHeight: '4px' }}
      />
      <div className="flex-1">
        <p className="text-sm font-medium text-foreground">{name}</p>
        <p className="text-xs text-foreground-muted font-mono">{value}</p>
      </div>
    </div>
  );
}

interface ShadowPreviewProps {
  name: string;
  shadow: string;
  className?: string;
}

export function ShadowPreview({ name, shadow, className = '' }: ShadowPreviewProps) {
  return (
    <div className={`flex flex-col items-center ${className}`}>
      <div
        className="w-24 h-24 bg-layer-2 rounded-xl mb-3"
        style={{ boxShadow: shadow }}
      />
      <p className="text-sm font-medium text-foreground text-center">{name}</p>
    </div>
  );
}

interface RadiusPreviewProps {
  name: string;
  radius: string;
  className?: string;
}

export function RadiusPreview({ name, radius, className = '' }: RadiusPreviewProps) {
  return (
    <div className={`flex flex-col items-center ${className}`}>
      <div
        className="w-20 h-20 bg-gradient-cyan-blue mb-3"
        style={{ borderRadius: radius }}
      />
      <p className="text-sm font-medium text-foreground">{name}</p>
      <p className="text-xs text-foreground-muted font-mono">{radius}</p>
    </div>
  );
}

```

---
#### `components/design-system/GradientCard.tsx`

```
'use client';

import { useState } from 'react';
import { Check, Copy } from 'lucide-react';

interface GradientCardProps {
  name: string;
  cssVariable: string;
  gradient: string;
  description?: string;
  className?: string;
}

export function GradientCard({
  name,
  cssVariable,
  gradient,
  description,
  className = '',
}: GradientCardProps) {
  const [copied, setCopied] = useState(false);

  const copyToClipboard = async () => {
    await navigator.clipboard.writeText(cssVariable);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className={`group ${className}`}>
      <button
        onClick={copyToClipboard}
        className="
          w-full h-32 rounded-xl border border-border-subtle
          transition-all duration-300
          hover:scale-[1.02] hover:border-border-active
          hover:shadow-card-hover
          relative overflow-hidden
          focus:outline-none focus:ring-2 focus:ring-cyan-500/50
        "
        style={{ background: gradient }}
        title={`Copiar: ${cssVariable}`}
      >
        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 backdrop-blur-sm">
          {copied ? (
            <div className="flex items-center gap-2 text-success">
              <Check className="w-5 h-5" />
              <span className="text-sm font-medium">Copiado!</span>
            </div>
          ) : (
            <div className="flex items-center gap-2 text-white">
              <Copy className="w-4 h-4" />
              <span className="text-sm">Copiar CSS</span>
            </div>
          )}
        </div>
      </button>

      <div className="mt-3 space-y-1">
        <p className="text-sm font-medium text-foreground">{name}</p>
        <p className="text-xs text-foreground-muted font-mono truncate">{cssVariable}</p>
        {description && (
          <p className="text-xs text-foreground-muted">{description}</p>
        )}
      </div>
    </div>
  );
}

interface GradientGridProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function GradientGrid({ title, description, children, className = '' }: GradientGridProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {children}
      </div>
    </div>
  );
}

```

---
#### `components/design-system/TypographySample.tsx`

```
'use client';

interface TypographySampleProps {
  name: string;
  description?: string;
  className?: string;
  fontClass?: string;
  sampleText?: string;
  specs?: {
    size?: string;
    weight?: string;
    lineHeight?: string;
    letterSpacing?: string;
  };
}

export function TypographySample({
  name,
  description,
  className = '',
  fontClass = '',
  sampleText = 'O rápido rato roeu a roupa do rei de Roma.',
  specs,
}: TypographySampleProps) {
  return (
    <div className={`card-glass p-6 rounded-xl ${className}`}>
      <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4">
        <div>
          <h4 className="text-lg font-semibold text-foreground">{name}</h4>
          {description && (
            <p className="text-sm text-foreground-muted mt-1">{description}</p>
          )}
        </div>
        {specs && (
          <div className="flex flex-wrap gap-2">
            {specs.size && (
              <span className="badge-default text-2xs">
                {specs.size}
              </span>
            )}
            {specs.weight && (
              <span className="badge-default text-2xs">
                {specs.weight}
              </span>
            )}
            {specs.lineHeight && (
              <span className="badge-default text-2xs">
                LH: {specs.lineHeight}
              </span>
            )}
            {specs.letterSpacing && (
              <span className="badge-default text-2xs">
                LS: {specs.letterSpacing}
              </span>
            )}
          </div>
        )}
      </div>
      <p className={`text-foreground ${fontClass}`}>{sampleText}</p>
    </div>
  );
}

interface TypographyScaleProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function TypographyScale({ title, description, children, className = '' }: TypographyScaleProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="space-y-4">
        {children}
      </div>
    </div>
  );
}

export function FontPreview() {
  return (
    <div className="grid md:grid-cols-2 gap-6">
      {/* Sans */}
      <div className="card-glass p-6 rounded-xl">
        <div className="flex items-center justify-between mb-4">
          <h4 className="text-lg font-semibold text-foreground">Inter</h4>
          <span className="badge-info">Sans-serif</span>
        </div>
        <p className="text-foreground mb-4">
          Fonte principal para UI, textos e títulos. Moderna, legível e com
          ótimo suporte a múltiplos pesos.
        </p>
        <div className="space-y-2 border-t border-border-subtle pt-4">
          <p className="font-normal text-foreground-muted">Regular 400</p>
          <p className="font-medium text-foreground-muted">Medium 500</p>
          <p className="font-semibold text-foreground-muted">Semibold 600</p>
          <p className="font-bold text-foreground-muted">Bold 700</p>
        </div>
      </div>

      {/* Mono */}
      <div className="card-glass p-6 rounded-xl">
        <div className="flex items-center justify-between mb-4">
          <h4 className="text-lg font-semibold text-foreground">JetBrains Mono</h4>
          <span className="badge-default">Monospace</span>
        </div>
        <p className="text-foreground mb-4">
          Fonte monospace para código, dados numéricos e elementos técnicos.
          Excelente legibilidade em tamanhos pequenos.
        </p>
        <div className="space-y-2 border-t border-border-subtle pt-4 font-mono">
          <p className="text-foreground-muted">const hello = &apos;world&apos;;</p>
          <p className="text-foreground-muted">1234567890</p>
          <p className="text-foreground-muted">@#$%^&*()_+=</p>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/design-system/index.ts`

```
/**
 * ORION Design System - Component Exports
 */

export { ColorSwatch, ColorPalette, ColorGrid } from './ColorSwatch';
export { GradientCard, GradientGrid } from './GradientCard';
export { TypographySample, TypographyScale, FontPreview } from './TypographySample';
export {
  ComponentPreview,
  ComponentSection,
  PreviewGrid,
  SpacingPreview,
  ShadowPreview,
  RadiusPreview,
} from './ComponentPreview';

```

---
#### `components/documentation/AnimatedSection.tsx`

```
"use client";

import { ReactNode, useRef, useEffect, useState } from "react";

interface AnimatedSectionProps {
  children: ReactNode;
  className?: string;
  delay?: number;
  animation?: "fade-up" | "fade-left" | "fade-right" | "scale" | "none";
}

export function AnimatedSection({
  children,
  className = "",
  delay = 0,
  animation = "fade-up",
}: AnimatedSectionProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setTimeout(() => setIsVisible(true), delay);
          observer.unobserve(element);
        }
      },
      { threshold: 0.1, rootMargin: "50px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, [delay]);

  const getAnimationStyles = () => {
    if (animation === "none") return {};

    const baseStyles = {
      transition: "all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",
    };

    if (!isVisible) {
      switch (animation) {
        case "fade-up":
          return { ...baseStyles, opacity: 0, transform: "translateY(30px)" };
        case "fade-left":
          return { ...baseStyles, opacity: 0, transform: "translateX(-30px)" };
        case "fade-right":
          return { ...baseStyles, opacity: 0, transform: "translateX(30px)" };
        case "scale":
          return { ...baseStyles, opacity: 0, transform: "scale(0.95)" };
        default:
          return { ...baseStyles, opacity: 0 };
      }
    }

    return { ...baseStyles, opacity: 1, transform: "translateY(0) translateX(0) scale(1)" };
  };

  return (
    <div ref={ref} className={className} style={getAnimationStyles()}>
      {children}
    </div>
  );
}

interface AnimatedCardProps {
  children: ReactNode;
  className?: string;
  delay?: number;
  hoverEffect?: boolean;
}

export function AnimatedCard({
  children,
  className = "",
  delay = 0,
  hoverEffect = true,
}: AnimatedCardProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setTimeout(() => setIsVisible(true), delay);
          observer.unobserve(element);
        }
      },
      { threshold: 0.1, rootMargin: "30px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, [delay]);

  return (
    <div
      ref={ref}
      className={`transition-all duration-500 ${hoverEffect ? "glow-hover" : ""} ${className}`}
      style={{
        opacity: isVisible ? 1 : 0,
        transform: isVisible ? "translateY(0) scale(1)" : "translateY(20px) scale(0.98)",
      }}
    >
      {children}
    </div>
  );
}

interface AnimatedGridProps {
  children: ReactNode;
  className?: string;
  staggerDelay?: number;
}

export function AnimatedGrid({ children, className = "", staggerDelay = 100 }: AnimatedGridProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.unobserve(element);
        }
      },
      { threshold: 0.05, rootMargin: "50px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, []);

  return (
    <div ref={ref} className={className}>
      {Array.isArray(children)
        ? children.map((child, index) => (
            <div
              key={index}
              style={{
                opacity: isVisible ? 1 : 0,
                transform: isVisible ? "translateY(0)" : "translateY(20px)",
                transition: `all 0.5s cubic-bezier(0.4, 0, 0.2, 1) ${index * staggerDelay}ms`,
              }}
            >
              {child}
            </div>
          ))
        : children}
    </div>
  );
}

export default AnimatedSection;

```

---
#### `components/documentation/CopyButton.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { Copy, Check, FileCode } from "lucide-react";

// Check if we're in a shared view context
function useCanCopy() {
  const [canCopy, setCanCopy] = useState(true);

  useEffect(() => {
    // Check URL for share token
    const params = new URLSearchParams(window.location.search);
    const token = params.get("s");

    if (token) {
      // Check if this token belongs to the owner
      try {
        const tokens = localStorage.getItem("ey_owner_tokens");
        const ownerTokens = tokens ? JSON.parse(tokens) : [];
        if (!ownerTokens.includes(token)) {
          setCanCopy(false);
        }
      } catch {
        setCanCopy(false);
      }
    }
  }, []);

  return canCopy;
}

interface CopyButtonProps {
  content: string;
  className?: string;
}

export function CopyButton({ content, className = "" }: CopyButtonProps) {
  const [copied, setCopied] = useState(false);
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  const handleCopy = async () => {
    try {
      await navigator.clipboard.writeText(content);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Failed to copy:", err);
    }
  };

  return (
    <button
      onClick={handleCopy}
      className={`p-1.5 rounded-lg transition-all ${
        copied
          ? "bg-green-500/20 text-green-400"
          : "bg-layer-2/50 text-muted hover:bg-zinc-700 hover:text-white"
      } ${className}`}
      title={copied ? "Copiado!" : "Copiar"}
    >
      {copied ? <Check className="w-3.5 h-3.5" /> : <Copy className="w-3.5 h-3.5" />}
    </button>
  );
}

interface MarkdownButtonProps {
  content: string;
  filename?: string;
  className?: string;
}

export function MarkdownButton({ content, filename = "content.md", className = "" }: MarkdownButtonProps) {
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  const handleDownload = () => {
    const blob = new Blob([content], { type: "text/markdown" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };

  return (
    <button
      onClick={handleDownload}
      className={`p-1.5 rounded-lg transition-all bg-layer-2/50 text-muted hover:bg-indigo-500/20 hover:text-indigo-400 ${className}`}
      title="Exportar como Markdown"
    >
      <FileCode className="w-3.5 h-3.5" />
    </button>
  );
}

interface CopyMdButtonsProps {
  content: string;
  markdownContent?: string;
  filename?: string;
  className?: string;
}

export function CopyMdButtons({ content, markdownContent, filename, className = "" }: CopyMdButtonsProps) {
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  return (
    <div className={`flex items-center gap-1 ${className}`}>
      <CopyButton content={content} />
      <MarkdownButton content={markdownContent || content} filename={filename} />
    </div>
  );
}

export default CopyMdButtons;

```

---
#### `components/documentation/CurrentStateTab.tsx`

```
"use client";

import {
  Compass,
  CheckCircle2,
  Clock,
  AlertTriangle,
  XCircle,
  ArrowRight,
  Target,
  Zap,
  Shield,
  TrendingUp,
  Calendar,
  Gauge,
} from "lucide-react";

export default function CurrentStateTab() {
  const completedFeatures = [
    { name: "Dashboard com Boot Sequence", priority: "Alta", impact: "Alto" },
    { name: "Workflow de 6 etapas", priority: "Crítica", impact: "Crítico" },
    { name: "Input de tema e configuração", priority: "Crítica", impact: "Alto" },
    { name: "Pesquisa com IA", priority: "Alta", impact: "Alto" },
    { name: "Geração de roteiro", priority: "Crítica", impact: "Crítico" },
    { name: "Geração de títulos/thumbnails", priority: "Alta", impact: "Alto" },
    { name: "Geração de descrição e tags", priority: "Alta", impact: "Alto" },
    { name: "Seleção de trilha sonora", priority: "Média", impact: "Médio" },
    { name: "Sistema de diretrizes", priority: "Média", impact: "Alto" },
    { name: "Configuração de API Keys", priority: "Crítica", impact: "Crítico" },
    { name: "Persistência de estado", priority: "Alta", impact: "Alto" },
    { name: "Prisma Schema + Database", priority: "Crítica", impact: "Crítico" },
    { name: "Inngest Video Pipeline", priority: "Crítica", impact: "Crítico" },
    { name: "AI Agents (Research + Script)", priority: "Alta", impact: "Alto" },
    { name: "Sistema de Aprovação Humana", priority: "Alta", impact: "Alto" },
    { name: "Notificações por Email (Resend)", priority: "Média", impact: "Alto" },
  ];

  const partialFeatures = [
    { name: "Upload YouTube", progress: 85, blocker: "OAuth final config", priority: "Alta" },
    { name: "Render de vídeo (JSON2VIDEO)", progress: 75, blocker: "Integração API", priority: "Alta" },
    { name: "TTS (ElevenLabs)", progress: 60, blocker: "API quota", priority: "Média" },
    { name: "Storyboard editor", progress: 50, blocker: "UX refinement", priority: "Média" },
    { name: "Migração localStorage → Prisma", progress: 40, blocker: "Refatoração frontend", priority: "Alta" },
  ];

  const notStartedFeatures = [
    { name: "Multi-idioma interface", complexity: "Média", priority: "Baixa", impact: "Médio" },
    { name: "Histórico de vídeos", complexity: "Baixa", priority: "Média", impact: "Alto" },
    { name: "Templates de vídeo", complexity: "Média", priority: "Média", impact: "Alto" },
    { name: "Batch processing", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Analytics dashboard", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Colaboração multi-usuário", complexity: "Alta", priority: "Baixa", impact: "Baixo" },
  ];

  const technicalDebt = {
    high: [
      { name: "Error boundaries", description: "Implementar em todas as páginas", impact: "Estabilidade", effort: "Baixo" },
      { name: "Loading states", description: "Padronizar em todas as operações", impact: "UX", effort: "Médio" },
      { name: "Testes E2E", description: "Adicionar testes com Playwright", impact: "Qualidade", effort: "Alto" },
    ],
    medium: [
      { name: "Code splitting", description: "Otimizar bundle com lazy loading", impact: "Performance", effort: "Médio" },
      { name: "API rate limiting", description: "Implementar no frontend", impact: "Custo", effort: "Médio" },
      { name: "Retry logic", description: "Melhorar para falhas de API", impact: "Resiliência", effort: "Médio" },
    ],
    low: [
      { name: "CSS cleanup", description: "Remover estilos não utilizados", impact: "Manutenção", effort: "Baixo" },
      { name: "Type coverage", description: "Aumentar coverage de tipos", impact: "DX", effort: "Médio" },
      { name: "Documentation", description: "Documentar funções complexas", impact: "Manutenção", effort: "Médio" },
    ],
  };

  const risks = {
    technical: [
      { risk: "API rate limits", probability: "Média", impact: "Alto", mitigation: "Cache, retry, fallbacks" },
      { risk: "Custo de APIs", probability: "Alta", impact: "Médio", mitigation: "Monitoramento, alertas" },
      { risk: "Mudanças em APIs externas", probability: "Média", impact: "Alto", mitigation: "Versionamento, abstrações" },
      { risk: "Performance em mobile", probability: "Baixa", impact: "Médio", mitigation: "Testing, otimização" },
    ],
    business: [
      { risk: "Políticas YouTube", probability: "Média", impact: "Crítico", mitigation: "Compliance, guidelines" },
      { risk: "Competição", probability: "Alta", impact: "Médio", mitigation: "Inovação, UX" },
      { risk: "Dependência de IAs", probability: "Média", impact: "Alto", mitigation: "Multi-provider" },
    ],
  };

  const getPriorityColor = (priority: string) => {
    switch (priority.toLowerCase()) {
      case "crítica":
        return "bg-red-500/20 text-red-400";
      case "alta":
        return "bg-orange-500/20 text-orange-400";
      case "média":
        return "bg-yellow-500/20 text-yellow-400";
      case "baixa":
        return "bg-green-500/20 text-green-400";
      default:
        return "bg-zinc-500/20 text-muted";
    }
  };

  const getImpactColor = (impact: string) => {
    switch (impact.toLowerCase()) {
      case "crítico":
        return "bg-red-500/20 text-red-400";
      case "alto":
        return "bg-purple-500/20 text-purple-400";
      case "médio":
        return "bg-blue-500/20 text-blue-400";
      case "baixo":
        return "bg-zinc-500/20 text-muted";
      default:
        return "bg-zinc-500/20 text-muted";
    }
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-900/50 via-pink-900/50 to-rose-900/50 border border-rose-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-rose-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-rose-500/20 rounded-xl">
              <Compass className="w-8 h-8 text-rose-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Status Geral do Projeto
              </h2>
              <p className="text-rose-300">Estado atual e roadmap</p>
            </div>
          </div>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
            {[
              { label: "Versão", value: "2.0.0", icon: Target },
              { label: "Status", value: "Em Produção", icon: CheckCircle2 },
              { label: "Última Atualização", value: "Janeiro 2026", icon: Calendar },
              { label: "Uptime", value: "99.9%", icon: Gauge },
            ].map((stat, i) => (
              <div
                key={i}
                className="bg-layer-1/50 rounded-lg p-4 border border-subtle"
              >
                <stat.icon className="w-5 h-5 text-rose-400 mb-2" />
                <p className="text-xs text-muted">{stat.label}</p>
                <p className="text-lg font-bold text-white">{stat.value}</p>
              </div>
            ))}
          </div>

          <div className="mt-4">
            <p className="text-sm text-muted">
              URL de Produção:{" "}
              <a
                href="https://emergecy-youtube.vercel.app"
                target="_blank"
                rel="noopener noreferrer"
                className="text-rose-400 hover:text-rose-300 underline"
              >
                https://emergecy-youtube.vercel.app
              </a>
            </p>
          </div>
        </div>
      </section>

      {/* Completed Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <CheckCircle2 className="w-6 h-6 text-green-400" />
          Funcionalidades Concluídas
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <div className="bg-green-500/10 border-b border-subtle px-4 py-3 flex items-center justify-between">
            <span className="font-medium text-green-400">Core Features</span>
            <span className="text-sm text-muted">
              {completedFeatures.length} funcionalidades
            </span>
          </div>
          <div className="p-4 max-h-96 overflow-y-auto">
            <table className="w-full text-sm">
              <thead>
                <tr className="text-muted text-xs uppercase">
                  <th className="text-left pb-3">Funcionalidade</th>
                  <th className="text-left pb-3">Prioridade</th>
                  <th className="text-left pb-3">Impacto</th>
                  <th className="text-left pb-3">Status</th>
                </tr>
              </thead>
              <tbody>
                {completedFeatures.map((feature, i) => (
                  <tr key={i} className="border-t border-subtle">
                    <td className="py-3 text-white">{feature.name}</td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                        {feature.priority}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                        {feature.impact}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className="flex items-center gap-1 text-green-400">
                        <CheckCircle2 className="w-4 h-4" />
                        Concluído
                      </span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </section>

      {/* Partial Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Clock className="w-6 h-6 text-yellow-400" />
          Funcionalidades Parciais
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {partialFeatures.map((feature, i) => (
            <div
              key={i}
              className="bg-layer-1 border border-subtle rounded-xl p-5"
            >
              <div className="flex items-center justify-between mb-3">
                <h4 className="font-semibold text-white">{feature.name}</h4>
                <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                  {feature.priority}
                </span>
              </div>

              <div className="mb-3">
                <div className="flex items-center justify-between text-sm mb-1">
                  <span className="text-muted">Progresso</span>
                  <span className="text-white font-medium">{feature.progress}%</span>
                </div>
                <div className="w-full h-2 bg-layer-2 rounded-full overflow-hidden">
                  <div
                    className="h-full bg-gradient-to-r from-yellow-500 to-amber-500 rounded-full"
                    style={{ width: `${feature.progress}%` }}
                  />
                </div>
              </div>

              <div className="flex items-center gap-2 text-sm">
                <AlertTriangle className="w-4 h-4 text-yellow-400" />
                <span className="text-muted">Bloqueio:</span>
                <span className="text-yellow-400">{feature.blocker}</span>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Not Started Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <XCircle className="w-6 h-6 text-muted" />
          Funcionalidades Não Iniciadas
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <table className="w-full text-sm">
            <thead className="bg-layer-2/50">
              <tr className="text-muted text-xs uppercase">
                <th className="text-left p-4">Funcionalidade</th>
                <th className="text-left p-4">Complexidade</th>
                <th className="text-left p-4">Prioridade</th>
                <th className="text-left p-4">Impacto</th>
              </tr>
            </thead>
            <tbody>
              {notStartedFeatures.map((feature, i) => (
                <tr key={i} className="border-t border-subtle hover:bg-layer-2/30">
                  <td className="p-4 text-secondary">{feature.name}</td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${
                      feature.complexity === "Alta" ? "bg-red-500/20 text-red-400" :
                      feature.complexity === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                      "bg-green-500/20 text-green-400"
                    }`}>
                      {feature.complexity}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                      {feature.priority}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                      {feature.impact}
                    </span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </section>

      {/* Technical Debt */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <AlertTriangle className="w-6 h-6 text-amber-400" />
          Dívidas Técnicas
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* High Priority */}
          <div className="bg-red-500/5 border border-red-500/20 rounded-xl overflow-hidden">
            <div className="bg-red-500/10 px-4 py-3 border-b border-red-500/20">
              <h4 className="font-semibold text-red-400">Alta Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.high.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Medium Priority */}
          <div className="bg-yellow-500/5 border border-yellow-500/20 rounded-xl overflow-hidden">
            <div className="bg-yellow-500/10 px-4 py-3 border-b border-yellow-500/20">
              <h4 className="font-semibold text-yellow-400">Média Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.medium.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Low Priority */}
          <div className="bg-green-500/5 border border-green-500/20 rounded-xl overflow-hidden">
            <div className="bg-green-500/10 px-4 py-3 border-b border-green-500/20">
              <h4 className="font-semibold text-green-400">Baixa Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.low.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Risks */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Riscos Conhecidos
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Technical Risks */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-violet-500/10 px-4 py-3 border-b border-subtle">
              <h4 className="font-semibold text-violet-400">Riscos Técnicos</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.technical.map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-muted">
                    <span className="text-muted">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Business Risks */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-rose-500/10 px-4 py-3 border-b border-subtle">
              <h4 className="font-semibold text-rose-400">Riscos de Negócio</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.business.map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-muted">
                    <span className="text-muted">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Future Evolution */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <TrendingUp className="w-6 h-6 text-cyan-400" />
          Sugestões de Evolução Futura
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Short Term */}
          <div className="bg-gradient-to-b from-cyan-900/30 to-zinc-900 border border-cyan-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-cyan-500/20 rounded-lg flex items-center justify-center">
                <Zap className="w-4 h-4 text-cyan-400" />
              </div>
              <div>
                <h4 className="font-semibold text-cyan-400">Curto Prazo</h4>
                <p className="text-xs text-muted">1-3 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                { name: "Completar Upload YouTube", priority: "Crítica" },
                { name: "Implementar Render Local", priority: "Alta" },
                { name: "Adicionar Testes", priority: "Alta" },
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-cyan-400 mt-0.5" />
                  <div>
                    <p className="text-sm text-white">{item.name}</p>
                    <span className={`text-xs ${getPriorityColor(item.priority)}`}>
                      {item.priority}
                    </span>
                  </div>
                </li>
              ))}
            </ul>
          </div>

          {/* Medium Term */}
          <div className="bg-gradient-to-b from-purple-900/30 to-zinc-900 border border-purple-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center">
                <Target className="w-4 h-4 text-purple-400" />
              </div>
              <div>
                <h4 className="font-semibold text-purple-400">Médio Prazo</h4>
                <p className="text-xs text-muted">3-6 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "Templates de Vídeo",
                "Histórico e Analytics",
                "Melhorias de UX",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-purple-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>

          {/* Long Term */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center">
                <TrendingUp className="w-4 h-4 text-amber-400" />
              </div>
              <div>
                <h4 className="font-semibold text-amber-400">Longo Prazo</h4>
                <p className="text-xs text-muted">6-12 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "API Pública",
                "Marketplace de Assets",
                "Versão Enterprise",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-amber-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Conclusion */}
      <section className="bg-gradient-to-r from-indigo-900/30 via-purple-900/30 to-pink-900/30 border border-purple-500/20 rounded-xl p-6">
        <h3 className="text-xl font-bold text-white mb-4">Conclusão</h3>
        <p className="text-secondary mb-4">
          O ORION está em estágio de{" "}
          <span className="text-green-400 font-semibold">produção funcional</span> com
          as principais features de geração de conteúdo operacionais. Os próximos
          passos críticos são:
        </p>
        <ol className="space-y-2 text-secondary">
          {[
            "Completar a integração de upload YouTube",
            "Implementar render de vídeo completo",
            "Adicionar cobertura de testes",
            "Resolver dívidas técnicas de alta prioridade",
          ].map((item, i) => (
            <li key={i} className="flex items-center gap-3">
              <span className="w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-400 text-sm font-bold">
                {i + 1}
              </span>
              {item}
            </li>
          ))}
        </ol>
        <p className="text-muted mt-4 text-sm">
          O sistema está preparado para escalar e evoluir conforme as necessidades
          dos usuários.
        </p>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-rose-900/20 border border-rose-500/20 rounded-xl">
        <p className="text-sm text-rose-300 italic text-center">
          Este documento reflete o estado atual do ORION e serve como
          roadmap para decisões de desenvolvimento futuro.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/DecisionsTab.tsx`

```
"use client";

import AnimatedSection from "./AnimatedSection";
import {
  Brain,
  GitBranch,
  CheckCircle2,
  AlertTriangle,
  Lightbulb,
  Server,
  Database,
  Mail,
  Workflow,
  Zap,
} from "lucide-react";

export default function DecisionsTab() {
  return (
    <div className="space-y-8">
      {/* Header */}
      <AnimatedSection delay={0}>
        <div className="bg-gradient-to-r from-violet-600/20 to-purple-600/20 border border-violet-500/30 rounded-2xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <GitBranch className="w-8 h-8 text-violet-400" />
            <h2 className="text-2xl font-bold text-white">
              Decisoes Arquiteturais - Claude Code
            </h2>
          </div>
          <p className="text-secondary">
            Registro historico de todas as decisoes arquiteturais, debates e consensos
            alcancados durante o desenvolvimento do ORION. Este documento serve como
            auditoria tecnica e memoria do projeto.
          </p>
        </div>
      </AnimatedSection>

      {/* Sessao 1: O Grande Debate - Janeiro 2026 */}
      <AnimatedSection delay={0.1}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Brain className="w-6 h-6 text-amber-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessao 1: O Grande Debate Arquitetural (Janeiro 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Necessidade de migrar de localStorage para persistencia real em banco de dados,
              implementar workflows duraveis para processos longos (renderizacao de video,
              deep research), e criar sistema de aprovacao humana (human-in-the-loop).
            </p>
          </div>

          {/* Participantes */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Participantes do Debate</h4>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">🤖</span>
                  <span className="font-medium text-white">Claude (Anthropic)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Conservadora e battle-tested. Priorizou estabilidade com Inngest.
                </p>
              </div>
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">🌟</span>
                  <span className="font-medium text-white">Gemini (Google)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Bleeding edge. Descobriu ToolLoopAgent no AI SDK 6.
                </p>
              </div>
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">💬</span>
                  <span className="font-medium text-white">ChatGPT (OpenAI)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Validador critico. Confirmou existencia do SDK 6 e cautela com beta.
                </p>
              </div>
            </div>
          </div>

          {/* Pontos Criticos Identificados */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-red-400 mb-3 flex items-center gap-2">
              <AlertTriangle className="w-5 h-5" />
              Pontos Criticos Identificados
            </h4>
            <div className="space-y-3">
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">1. Vercel Functions Timeout</p>
                <p className="text-muted text-sm">
                  Limite de 300s (5 min) no Vercel Pro. Processos como renderizacao podem levar
                  minutos/horas. Solucao: workflows duraveis externos.
                </p>
              </div>
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">2. Vercel Workflow DevKit em Beta</p>
                <p className="text-muted text-sm">
                  Embora exista, ainda esta em Public Beta. Risco de bugs criticos em producao.
                </p>
              </div>
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">3. AI SDK Versao Atual</p>
                <p className="text-muted text-sm">
                  Projeto usa AI SDK 4.3.19. Para usar ToolLoopAgent, precisa migrar para v6.
                </p>
              </div>
            </div>
          </div>

          {/* Consenso Alcancado */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-green-400 mb-3 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              Consenso Unanime: OPCAO B - Arquitetura Hibrida
            </h4>
            <div className="bg-green-950/30 border border-green-800/50 rounded-lg p-4">
              <p className="text-secondary mb-4">
                Apos debate intenso, as tres IAs chegaram a um consenso:
              </p>
              <ul className="space-y-2 text-sm">
                <li className="flex items-start gap-2">
                  <Zap className="w-4 h-4 text-yellow-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Cerebro (AI SDK 6 + ToolLoopAgent):</strong> Inteligencia
                    de ultima geracao para agentes autonomos.
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Server className="w-4 h-4 text-blue-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Corpo Blindado (Inngest):</strong> Durabilidade,
                    retries automaticos, sleep nativo, battle-tested (100M+ execucoes/dia).
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Database className="w-4 h-4 text-green-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Persistencia (Vercel Postgres + Prisma):</strong> Estado
                    persistente cross-device, relacional, migracao controlada.
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Mail className="w-4 h-4 text-purple-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Notificacao (Resend):</strong> 10K emails/mes gratis
                    para aprovacao humana.
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Stack Final Decidida */}
      <AnimatedSection delay={0.2}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Workflow className="w-6 h-6 text-cyan-400" />
            <h3 className="text-xl font-semibold text-white">
              Stack Tecnica Final Aprovada
            </h3>
          </div>

          <div className="overflow-x-auto">
            <table className="w-full text-sm">
              <thead>
                <tr className="border-b border-subtle">
                  <th className="text-left py-3 px-4 text-muted font-medium">Camada</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Tecnologia</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Justificativa</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Custo</th>
                </tr>
              </thead>
              <tbody>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Intelligence</td>
                  <td className="py-3 px-4 text-cyan-400">AI SDK 6 + ToolLoopAgent</td>
                  <td className="py-3 px-4 text-muted">Agentes autonomos com loop de ferramentas</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Orchestration</td>
                  <td className="py-3 px-4 text-cyan-400">Inngest</td>
                  <td className="py-3 px-4 text-muted">Workflows duraveis, 100K runs/mes free</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Persistence</td>
                  <td className="py-3 px-4 text-cyan-400">Vercel Postgres + Prisma</td>
                  <td className="py-3 px-4 text-muted">256MB incluido no Pro, ORM type-safe</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Storage</td>
                  <td className="py-3 px-4 text-cyan-400">Vercel Blob</td>
                  <td className="py-3 px-4 text-muted">1GB incluido no Pro para videos/audios</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Notifications</td>
                  <td className="py-3 px-4 text-cyan-400">Resend</td>
                  <td className="py-3 px-4 text-muted">10K emails/mes para aprovacao</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr>
                  <td className="py-3 px-4 text-white font-bold">TOTAL</td>
                  <td className="py-3 px-4"></td>
                  <td className="py-3 px-4"></td>
                  <td className="py-3 px-4 text-green-400 font-bold">$20/mes (Vercel Pro)</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </AnimatedSection>

      {/* Arquitetura Visual */}
      <AnimatedSection delay={0.3}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Lightbulb className="w-6 h-6 text-yellow-400" />
            <h3 className="text-xl font-semibold text-white">
              Arquitetura do Pipeline de Video
            </h3>
          </div>

          <div className="bg-zinc-950 rounded-lg p-4 overflow-x-auto">
            <pre className="text-xs sm:text-sm text-secondary whitespace-pre font-mono">
{`┌─────────────────────────────────────────────────────────────────┐
│  AI SDK 6 (ToolLoopAgent)          Inngest                      │
│  ┌─────────────────────┐           ┌─────────────────────┐      │
│  │ Research Agent      │──────────>│ step.run()          │      │
│  │ (Gemini 2.0)        │           │ step.sleep()        │      │
│  └─────────────────────┘           │ step.waitForEvent() │      │
│  ┌─────────────────────┐           │ Retry automatico    │      │
│  │ Script Agent        │──────────>│                     │      │
│  │ (Claude 3.5)        │           └─────────────────────┘      │
│  └─────────────────────┘                    │                   │
│                                             ▼                   │
│                        ┌────────────────────────────────────┐   │
│                        │ Vercel Postgres + Blob             │   │
│                        └────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘

FLUXO DO WORKFLOW:
─────────────────────────────────────────────────────────────────────
1. Deep Research (Gemini)    →  Pesquisa trends e referencias
2. Script Generation (Claude) →  Gera roteiro otimizado
3. AGUARDAR APROVACAO        →  Email + step.waitForEvent('7d')
4. Storyboard Generation     →  Cria cenas com prompts visuais
5. Render (JSON2VIDEO)       →  step.sleep() enquanto renderiza
6. Upload YouTube            →  Com retry automatico`}
            </pre>
          </div>
        </div>
      </AnimatedSection>

      {/* Modelo de Dados */}
      <AnimatedSection delay={0.4}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Database className="w-6 h-6 text-emerald-400" />
            <h3 className="text-xl font-semibold text-white">
              Modelo de Dados (Prisma Schema)
            </h3>
          </div>

          <div className="bg-zinc-950 rounded-lg p-4 overflow-x-auto">
            <pre className="text-xs sm:text-sm text-green-400 whitespace-pre font-mono">
{`model Project {
  id          String         @id @default(cuid())
  name        String
  status      ProjectStatus  @default(DRAFT)
  createdAt   DateTime       @default(now())

  // Relacionamentos
  context     Context?
  research    Research?
  script      Script?
  storyboard  Storyboard?
  render      Render?
  upload      Upload?
  workflow    WorkflowState?
}

enum ProjectStatus {
  DRAFT | RESEARCHING | SCRIPTING | AWAITING_APPROVAL
  APPROVED | RENDERING | UPLOADING | COMPLETED | FAILED
}

model WorkflowState {
  inngestRunId     String?   // ID da execucao no Inngest
  currentStep      String
  awaitingApproval Boolean   @default(false)
  approvalToken    String?   @unique
}`}
            </pre>
          </div>
        </div>
      </AnimatedSection>

      {/* Status de Implementacao */}
      <AnimatedSection delay={0.5}>
        <div className="bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-xl p-6">
          <h3 className="text-xl font-semibold text-white mb-4 flex items-center gap-2">
            <CheckCircle2 className="w-6 h-6 text-green-400" />
            Fases Implementadas
          </h3>
          <div className="space-y-3">
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 1</span>
              <span className="text-green-300 line-through">Setup Prisma + Vercel Postgres + Schema</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 2</span>
              <span className="text-green-300 line-through">Configuracao Inngest + Client + Webhook</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 3</span>
              <span className="text-green-300 line-through">Agentes AI SDK 6 (Research + Script)</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 4</span>
              <span className="text-green-300 line-through">Sistema de Aprovacao + Notificacoes</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 5</span>
              <span className="text-amber-300">Refatoracao Frontend + Migracao localStorage</span>
              <span className="text-amber-400 text-xs">(Em progresso)</span>
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 6</span>
              <span className="text-green-300 line-through">Design System ORION - Tokens, CSS e Documentacao</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
          </div>

          {/* Fase 6 - Design System Details */}
          <div className="mt-6 p-4 bg-cyan-950/30 border border-cyan-800/50 rounded-lg">
            <h4 className="text-sm font-semibold text-cyan-400 mb-3 flex items-center gap-2">
              🎨 Fase 6: Design System ORION (23/01/2026)
            </h4>
            <p className="text-muted text-sm mb-3">
              Sistema de design completo com paleta ORION (azul profundo + vermelho acento),
              glassmorphism, motion funcional e documentacao visual interativa.
            </p>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs font-mono">
              <div className="text-cyan-400">lib/design-tokens.ts</div>
              <div className="text-cyan-400">app/globals.css (atualizado)</div>
              <div className="text-cyan-400">tailwind.config.ts (atualizado)</div>
              <div className="text-cyan-400">components/design-system/ColorSwatch.tsx</div>
              <div className="text-cyan-400">components/design-system/GradientCard.tsx</div>
              <div className="text-cyan-400">components/design-system/TypographySample.tsx</div>
              <div className="text-cyan-400">components/design-system/ComponentPreview.tsx</div>
              <div className="text-cyan-400">app/documentation/design-system/page.tsx</div>
            </div>
          </div>

          <div className="mt-4 p-4 bg-layer-1/50 rounded-lg">
            <h4 className="text-sm font-semibold text-white mb-2">Arquivos Anteriores (Fases 1-4):</h4>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs font-mono">
              <div className="text-muted">prisma/schema.prisma</div>
              <div className="text-muted">lib/db/prisma.ts</div>
              <div className="text-muted">lib/inngest/client.ts</div>
              <div className="text-muted">lib/inngest/functions/video-pipeline.ts</div>
              <div className="text-muted">lib/agents/research-agent.ts</div>
              <div className="text-muted">lib/agents/script-agent.ts</div>
              <div className="text-muted">lib/services/research.service.ts</div>
              <div className="text-muted">lib/services/script.service.ts</div>
              <div className="text-muted">lib/services/notification.service.ts</div>
              <div className="text-muted">app/api/inngest/route.ts</div>
              <div className="text-muted">app/api/approve/route.ts</div>
              <div className="text-muted">app/approve/[token]/page.tsx</div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Sessao 2: Rebranding para ORION - 23/01/2026 */}
      <AnimatedSection delay={0.5}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Zap className="w-6 h-6 text-blue-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessão 2: Rebranding para ORION (23 de Janeiro de 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Decisão de renomear o projeto de &quot;Emergency YouTube&quot; para <strong className="text-white">ORION</strong>,
              visando uma identidade de marca mais profissional, escalável e alinhada com a visão de um sistema
              de automação inteligente de classe enterprise.
            </p>
          </div>

          {/* Data e Motivação */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Motivação</h4>
            <div className="space-y-3">
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">1. Identidade Profissional</p>
<p className="text-muted text-sm">
                  Nome &quot;ORION&quot; transmite inovação, tecnologia e navegação (guia/orientação),
                  alinhado com a proposta de guiar criadores de conteúdo.
                </p>
              </div>
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">2. Escalabilidade de Marca</p>
                <p className="text-muted text-sm">
                  Permite expansão além do YouTube (TikTok, Instagram, podcasts) sem limitação no nome.
                </p>
              </div>
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">3. White Label Implementado</p>
                <p className="text-muted text-sm">
                  Com o Design System ORION já implementado, o rebranding consolida a identidade visual unificada.
                </p>
              </div>
            </div>
          </div>

          {/* Decisao Final */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-green-400 mb-3 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              Decisão Implementada
            </h4>
            <div className="bg-green-950/30 border border-green-800/50 rounded-lg p-4">
              <div className="space-y-2 text-sm">
                <p className="text-secondary">
                  <strong className="text-white">Nome Oficial:</strong> ORION
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Nome Anterior:</strong> Emergency YouTube (mantido em documentação histórica)
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Data:</strong> 23 de Janeiro de 2026
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Logos:</strong> logo-orion-branca-transp-grande.png e pequena.png
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Blob Storage:</strong> orion-storage (criado na Vercel)
                </p>
              </div>
            </div>
          </div>

          {/* Implementacao Tecnica */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Implementação Técnica</h4>
            <div className="space-y-2 text-sm">
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Substituição global: &quot;Emergency YouTube&quot; → &quot;ORION&quot; (17 arquivos)</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">package.json: &quot;emergecy-youtube&quot; → &quot;orion&quot;</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Logos adicionadas em /public/assets/</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Blob Storage &quot;orion-storage&quot; criado na Vercel</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">BLOB_READ_WRITE_TOKEN configurado nas variáveis de ambiente</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Documentação completa atualizada em components/documentation/</span>
              </div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Sessao 3: Visual Upgrade State of the Art - 24/01/2026 */}
      <AnimatedSection delay={0.6}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Zap className="w-6 h-6 text-cyan-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessão 3: Visual Upgrade State of the Art (24 de Janeiro de 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Upgrade visual completo para atingir nível &quot;State of the Art&quot; (Vercel/Linear/Raycast).
              Implementação de visualizações de dados interativas, design tokens forçados, Bento Grid refinado,
              e consistência visual em todas as páginas internas do sistema.
            </p>
          </div>

          {/* PART 1: Analytics Infrastructure */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-cyan-400 mb-3">PART 1: Analytics &amp; Charts Infrastructure</h4>
            <div className="space-y-3">
              <div className="bg-cyan-950/30 border border-cyan-800/50 rounded-lg p-4">
                <p className="text-cyan-300 font-medium mb-2">Instalações</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">recharts (^2.x) - Biblioteca de gráficos React</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">@vercel/analytics - Monitoramento de usuários</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">@vercel/speed-insights - Performance metrics</span>
                  </div>
                </div>
                <p className="text-muted text-xs mt-2">Commit: aac0b1a</p>
              </div>
            </div>
          </div>

          {/* PART 2: Design Tokens Integration */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-blue-400 mb-3">PART 2: Design Tokens Forçados no Tailwind</h4>
            <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
              <p className="text-blue-300 font-medium mb-2">Mudança Crítica: Single Source of Truth</p>
              <p className="text-secondary text-sm mb-3">
                Tailwind config agora importa diretamente de <code className="text-cyan-400">lib/design-tokens.ts</code> ao invés de usar CSS variables.
                Garante consistência absoluta e TypeScript safety.
              </p>
              <div className="space-y-1 text-sm">
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Cores: backgrounds.*, surfaces.*, borders.*, text.*, brand.*, accent.*, semantic.*</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Gradientes: todos os gradients.* mapeados para backgroundImage</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Sombras: designShadows.* com glow variants</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Motion: duration e easing functions do motion.*</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Slate 100-900: Paleta completa com opacidade correta</span>
                </div>
              </div>
              <p className="text-muted text-xs mt-2">Commit: f79f131</p>
            </div>
          </div>

          {/* PART 3: Bento Grid + Recharts */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-emerald-400 mb-3">PART 3: Bento Grid + Recharts + Animations WOW Factor</h4>
            <div className="space-y-3">
              <div className="bg-emerald-950/30 border border-emerald-800/50 rounded-lg p-4">
                <p className="text-emerald-300 font-medium mb-2">Visualizações Interativas (Recharts)</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">AreaChart com gradiente - Disponibilidade API (últimos 60min)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">RadialBarChart - Saúde do Sistema (percentual circular)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Tooltips customizados com tema ORION</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Gradientes dinâmicos nos gráficos (emerald, cyan)</span>
                  </div>
                </div>
              </div>
              <div className="bg-emerald-950/30 border border-emerald-800/50 rounded-lg p-4">
                <p className="text-emerald-300 font-medium mb-2">Micro-interações</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">active:scale-95 em TODOS os botões</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Framer Motion whileHover/whileTap</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">AnimatePresence para transições suaves</span>
                  </div>
                </div>
                <p className="text-muted text-xs mt-2">Commit: bfe7c8d</p>
              </div>
            </div>
          </div>

          {/* PART 4: Design Consistency */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">PART 4: Consistência de Design nas Páginas Internas</h4>
            <div className="bg-violet-950/30 border border-violet-800/50 rounded-lg p-4">
              <p className="text-violet-300 font-medium mb-2">Workflow Page Modernização</p>
              <div className="space-y-1 text-sm mb-3">
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">20+ substituições: zinc-*/gray-* → design tokens (text-muted, bg-layer-*, etc.)</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">100% consistente com ORION design system</span>
                </div>
              </div>
              <p className="text-muted text-sm">
                <strong className="text-white">Próximo:</strong> 13 arquivos restantes identificados para atualização
                (step/1-input, step/2-research, step/4-proposal, settings, approve/*, documentation/*)
              </p>
              <p className="text-muted text-xs mt-2">Commit: 5578edd</p>
            </div>
          </div>

          {/* Status Atual */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-amber-400 mb-3 flex items-center gap-2">
              <AlertTriangle className="w-5 h-5" />
              Status Atual e Próximos Passos
            </h4>
            <div className="bg-amber-950/30 border border-amber-800/50 rounded-lg p-4">
              <p className="text-amber-300 font-medium mb-2">Em Progresso</p>
              <div className="space-y-1 text-sm">
                <div className="text-secondary">✅ Dashboard: State-of-the-art com Recharts</div>
                <div className="text-secondary">✅ Design Tokens: Fully integrated</div>
                <div className="text-secondary">✅ Workflow Page: Modernizado</div>
                <div className="text-amber-300">⏳ Páginas Internas: 13 arquivos pendentes (step/*, settings, approve/*, documentation/*)</div>
                <div className="text-amber-300">⏳ Glow Effects: Aplicar referências visuais (AlphaGPT style)</div>
                <div className="text-amber-300">⏳ Logo ORION: Integrar marca oficial</div>
                <div className="text-amber-300">⏳ YouTube Connection: Corrigir loading infinito</div>
              </div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Footer */}
      <AnimatedSection delay={0.7}>
        <div className="bg-layer-2/30 rounded-xl p-4 text-center">
          <p className="text-muted text-sm">
            Documento atualizado em: 24/01/2026 | Última decisão: Visual Upgrade State of the Art (em progresso)
          </p>
          <p className="text-disabled text-xs mt-1">
            Participantes: Claude (Anthropic), Gemini (Google), ChatGPT (OpenAI) | Deploy: Vercel Pro
          </p>
        </div>
      </AnimatedSection>
    </div>
  );
}

```

---
#### `components/documentation/GenesisTab.tsx`

```
"use client";

import {
  Lightbulb,
  Target,
  Code2,
  CheckCircle2,
  XCircle,
  Puzzle,
  Layers,
  Eye,
  Shield,
  FileText,
  Zap,
  Brain,
  Users,
  Clock,
  DollarSign,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

export default function GenesisTab() {
  return (
    <div className="space-y-12">
      {/* Hero Section */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-900/50 via-indigo-900/50 to-purple-900/50 border border-purple-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-purple-500/20 rounded-xl">
              <Lightbulb className="w-8 h-8 text-purple-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Por Que Este Sistema Foi Criado
              </h2>
              <p className="text-purple-300">A origem e propósito fundamental</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O <strong className="text-white">ORION</strong> (anteriormente ORION) nasceu de uma necessidade
            real e urgente: <span className="text-purple-400 font-semibold">democratizar a produção
            de vídeos profissionais para YouTube</span>, eliminando as barreiras técnicas, financeiras
            e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.
          </p>
        </div>
      </section>

      {/* The Problem */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Target className="w-6 h-6 text-red-400" />
            O Problema Fundamental
          </h3>
          <CopyMdButtons
            content="Barreiras para criar vídeos: 1) Habilidades técnicas (edição, design, áudio), 2) Investimento (equipamentos, software), 3) Tempo extensivo (8-20h por vídeo), 4) Conhecimento SEO"
            markdownContent={`## O Problema Fundamental\n\nCriar vídeos de qualidade para YouTube tradicionalmente exige:\n\n1. **Habilidades Técnicas** - Edição de vídeo, design gráfico e produção de áudio\n2. **Investimento** - Equipamentos, software e possivelmente equipe\n3. **Tempo Extensivo** - Um vídeo de 10 min pode levar 8-20 horas de produção\n4. **Conhecimento SEO** - Otimização e descoberta do conteúdo\n\n> Esta barreira exclui milhões de potenciais criadores que têm conhecimento valioso mas não os recursos para transformá-lo em conteúdo visual.`}
            filename="problema.md"
          />
        </div>
        <p className="text-muted mb-6">
          Criar vídeos de qualidade para YouTube tradicionalmente exige:
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {[
            {
              icon: Code2,
              title: "Habilidades Técnicas",
              description: "Edição de vídeo, design gráfico e produção de áudio",
              color: "text-red-400",
              bg: "bg-red-500/10",
              border: "border-red-500/20",
            },
            {
              icon: DollarSign,
              title: "Investimento",
              description: "Equipamentos, software e possivelmente equipe",
              color: "text-orange-400",
              bg: "bg-orange-500/10",
              border: "border-orange-500/20",
            },
            {
              icon: Clock,
              title: "Tempo Extensivo",
              description: "Um vídeo de 10 min pode levar 8-20 horas de produção",
              color: "text-yellow-400",
              bg: "bg-yellow-500/10",
              border: "border-yellow-500/20",
            },
            {
              icon: Brain,
              title: "Conhecimento SEO",
              description: "Otimização e descoberta do conteúdo",
              color: "text-amber-400",
              bg: "bg-amber-500/10",
              border: "border-amber-500/20",
            },
          ].map((item, index) => (
            <div
              key={index}
              className={`${item.bg} ${item.border} border rounded-xl p-5`}
            >
              <item.icon className={`w-8 h-8 ${item.color} mb-3`} />
              <h4 className="font-semibold text-white mb-2">{item.title}</h4>
              <p className="text-sm text-muted">{item.description}</p>
            </div>
          ))}
        </div>
        <div className="mt-6 p-4 bg-layer-2/50 rounded-xl border border-subtle">
          <p className="text-secondary italic">
            Essa barreira exclui milhões de potenciais criadores que têm conhecimento
            valioso mas não os recursos para transformá-lo em conteúdo visual.
          </p>
        </div>
      </section>

      {/* The Solution */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Zap className="w-6 h-6 text-green-400" />
            A Solução Proposta
          </h3>
          <CopyMdButtons
            content="ORION: 1) Recebe tema, 2) Pesquisa conteúdo, 3) Gera roteiro/trilha/thumbnail/descrição, 4) Cria storyboard, 5) Renderiza vídeo, 6) Publica no YouTube"
            markdownContent={`## A Solução Proposta\n\nO ORION é um sistema de automação inteligente que:\n\n1. Recebe apenas o tema/tópico do vídeo\n2. Pesquisa e estrutura o conteúdo automaticamente\n3. Gera roteiro, trilha sonora, thumbnail e descrição\n4. Cria o storyboard com seleção de mídias\n5. Renderiza o vídeo final\n6. Publica diretamente no YouTube`}
            filename="solucao.md"
          />
        </div>
        <div className="bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/20 rounded-xl p-6">
          <p className="text-secondary mb-6">
            O ORION é um <strong className="text-green-400">sistema de automação inteligente</strong> que:
          </p>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              { num: "1", text: "Recebe apenas o tema/tópico do vídeo" },
              { num: "2", text: "Pesquisa e estrutura o conteúdo automaticamente" },
              { num: "3", text: "Gera roteiro, trilha sonora, thumbnail e descrição" },
              { num: "4", text: "Cria o storyboard com seleção de mídias" },
              { num: "5", text: "Renderiza o vídeo final" },
              { num: "6", text: "Publica diretamente no YouTube" },
            ].map((step, index) => (
              <div
                key={index}
                className="flex items-start gap-3 p-3 bg-layer-1/50 rounded-lg"
              >
                <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
                  <span className="text-white font-bold text-sm">{step.num}</span>
                </div>
                <p className="text-secondary text-sm">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Design Guidelines */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <FileText className="w-6 h-6 text-blue-400" />
            Diretrizes de Design (Prompts Fundacionais)
          </h3>
          <CopyMdButtons
            content="Diretrizes: 1) Automação Máxima com Controle Humano, 2) Qualidade Profissional, 3) Interface Intuitiva, 4) Escalabilidade"
            markdownContent={`## Diretrizes de Design\n\n### 1. Automação Máxima, Controle Humano\n- O sistema automatiza tarefas repetitivas e técnicas\n- O humano mantém controle sobre decisões criativas e editoriais\n- Cada etapa pode ser revisada e modificada antes de avançar\n\n### 2. Qualidade de Produção Profissional\n- Outputs devem ser indistinguíveis de produções manuais\n- Padrões de YouTube Creator Academy são referência\n- SEO e engagement são prioridades arquiteturais\n\n### 3. Interface Intuitiva\n- Zero curva de aprendizado para operações básicas\n- Interface guiada por workflow linear\n- Feedback visual claro em cada etapa\n\n### 4. Escalabilidade\n- Suportar múltiplos vídeos em paralelo\n- Funcionar com diferentes nichos de conteúdo\n- Permitir personalização de diretrizes por projeto`}
            filename="diretrizes-design.md"
          />
        </div>
        <div className="space-y-4">
          {[
            {
              title: "Automação Máxima, Controle Humano",
              points: [
                "O sistema automatiza tarefas repetitivas e técnicas",
                "O humano mantém controle sobre decisões criativas e editoriais",
                "Cada etapa pode ser revisada e modificada antes de avançar",
              ],
              icon: Users,
              color: "indigo",
            },
            {
              title: "Qualidade de Produção Profissional",
              points: [
                "Outputs devem ser indistinguíveis de produções manuais",
                "Padrões de YouTube Creator Academy são referência",
                "SEO e engagement são prioridades arquiteturais",
              ],
              icon: Target,
              color: "purple",
            },
            {
              title: "Interface Intuitiva",
              points: [
                "Zero curva de aprendizado para operações básicas",
                "Interface guiada por workflow linear",
                "Feedback visual claro em cada etapa",
              ],
              icon: Eye,
              color: "cyan",
            },
            {
              title: "Escalabilidade",
              points: [
                "Suportar múltiplos vídeos em paralelo",
                "Funcionar com diferentes nichos de conteúdo",
                "Permitir personalização de diretrizes por projeto",
              ],
              icon: Layers,
              color: "green",
            },
          ].map((guideline, index) => (
            <div
              key={index}
              className={`bg-${guideline.color}-500/5 border border-${guideline.color}-500/20 rounded-xl p-5`}
              style={{
                backgroundColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.05)`,
                borderColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.2)`,
              }}
            >
              <div className="flex items-center gap-3 mb-3">
                <guideline.icon className={`w-6 h-6 text-${guideline.color}-400`} />
                <h4 className="font-semibold text-white">{guideline.title}</h4>
              </div>
              <ul className="space-y-2">
                {guideline.points.map((point, i) => (
                  <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                    {point}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Architectural Decisions */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Puzzle className="w-6 h-6 text-amber-400" />
            Decisões Arquiteturais Derivadas
          </h3>
          <CopyMdButtons
            content="Por que Next.js 15? App Router, Server Components, API Routes, Vercel nativo. Por que Zustand? Simplicidade, persistência localStorage, TypeScript first. Por que 6 Etapas? Espelha produção real, validação humana, rollback."
            markdownContent={`## Decisões Arquiteturais\n\n### Por que Next.js 15?\n- App Router para roteamento moderno\n- Server Components para performance\n- API Routes para backend integrado\n- Vercel como deploy nativo\n\n### Por que Zustand?\n- Simplicidade sobre complexidade\n- Persistência nativa com localStorage\n- TypeScript first\n- Minimal boilerplate\n\n### Por que 6 Etapas?\n- Espelha produção real de vídeo\n- Validação humana em cada transição\n- Rollback para etapas anteriores\n- Clareza sobre status atual`}
            filename="decisoes-arquiteturais.md"
          />
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-zinc-700 to-zinc-800 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">N</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Next.js 15?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>App Router para roteamento moderno</li>
              <li>Server Components para performance</li>
              <li>API Routes para backend integrado</li>
              <li>Vercel como deploy nativo</li>
            </ul>
          </div>
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-amber-600 to-yellow-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">Z</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Zustand?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>Simplicidade sobre complexidade</li>
              <li>Persistência nativa com localStorage</li>
              <li>TypeScript first</li>
              <li>Minimal boilerplate</li>
            </ul>
          </div>
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">6</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que 6 Etapas?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>Espelha produção real de vídeo</li>
              <li>Validação humana em cada transição</li>
              <li>Rollback para etapas anteriores</li>
              <li>Clareza sobre status atual</li>
            </ul>
          </div>
        </div>
      </section>

      {/* What the system does/doesn't do */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Layers className="w-6 h-6 text-cyan-400" />
          Elementos Intencionais
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="bg-green-900/20 border border-green-500/20 rounded-xl p-5">
            <h4 className="font-bold text-green-400 mb-4 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              O que o sistema FAZ:
            </h4>
            <ul className="space-y-3">
              {[
                "Pesquisa profunda sobre qualquer tema",
                "Geração de roteiros otimizados para engagement",
                "Seleção automática de mídia relevante",
                "Composição de vídeo com narração",
                "Upload direto para YouTube",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                  <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
          <div className="bg-red-900/20 border border-red-500/20 rounded-xl p-5">
            <h4 className="font-bold text-red-400 mb-4 flex items-center gap-2">
              <XCircle className="w-5 h-5" />
              O que o sistema NÃO FAZ (exclusões conscientes):
            </h4>
            <ul className="space-y-3">
              {[
                "Não substitui a voz humana",
                "Não gera conteúdo controverso",
                "Não garante viralização",
                "Não armazena vídeos eternamente",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                  <XCircle className="w-4 h-4 text-red-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Design Principles */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Princípios de Design
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {[
            {
              num: "1",
              title: "Transparência sobre Magia",
              description:
                "O sistema mostra claramente o que está fazendo em cada etapa, evitando caixas pretas que frustram usuários.",
            },
            {
              num: "2",
              title: "Falhas Graceful",
              description:
                "Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando completamente.",
            },
            {
              num: "3",
              title: "Dados Locais",
              description:
                "Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.",
            },
            {
              num: "4",
              title: "Documentação Viva",
              description:
                "Este próprio módulo é parte do sistema, não um documento externo que envelhece.",
            },
          ].map((principle, index) => (
            <div
              key={index}
              className="bg-layer-1/50 border border-subtle rounded-xl p-5 flex gap-4"
            >
              <div className="w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                <span className="text-violet-400 font-bold">{principle.num}</span>
              </div>
              <div>
                <h4 className="font-semibold text-white mb-1">{principle.title}</h4>
                <p className="text-sm text-muted">{principle.description}</p>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-purple-900/20 border border-purple-500/20 rounded-xl">
        <p className="text-sm text-purple-300 italic text-center">
          Este documento representa a intenção fundacional do sistema ORION,
          servindo como referência para decisões futuras e transferência de contexto entre IAs.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/IntegrationsTab.tsx`

```
"use client";

import {
  Plug,
  AlertCircle,
  ArrowRight,
  Shield,
  Server,
  Database,
  Key,
  RefreshCw,
  Lock,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

// API/Service logos as simple text badges (would be real logos in production)
const ServiceLogo = ({ name, color }: { name: string; color: string }) => (
  <div
    className={`w-12 h-12 rounded-xl bg-gradient-to-br ${color} flex items-center justify-center text-white font-bold text-lg shadow-lg`}
  >
    {name.charAt(0)}
  </div>
);

export default function IntegrationsTab() {
  const integrations = [
    {
      name: "Inngest",
      logo: "I",
      gradient: "from-emerald-500 to-green-600",
      function: "Orquestração de workflows duráveis e pipelines de vídeo",
      criticality: "Crítica",
      criticalityColor: "bg-red-500/20 text-red-400 font-bold",
      model: "Event-driven Workflow",
      use: "Video pipeline, aprovação humana, retries",
      auth: "API Keys (INNGEST_EVENT_KEY, INNGEST_SIGNING_KEY)",
      endpoints: ["/api/inngest", "step.run()", "step.waitForEvent()"],
    },
    {
      name: "Resend",
      logo: "R",
      gradient: "from-violet-500 to-indigo-600",
      function: "Envio de emails transacionais e notificações",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "REST API",
      use: "Aprovação de roteiros, alertas",
      auth: "API Key (RESEND_API_KEY)",
      endpoints: ["POST /emails"],
    },
    {
      name: "Anthropic Claude",
      logo: "C",
      gradient: "from-amber-500 to-orange-600",
      function: "Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Claude 3.5 Sonnet / Claude 3 Opus",
      use: "Roteiros, análise, estruturação",
      auth: "API Key (ANTHROPIC_API_KEY)",
      endpoints: ["POST /v1/messages"],
    },
    {
      name: "Google Gemini",
      logo: "G",
      gradient: "from-blue-500 to-indigo-600",
      function: "Deep Research e análise de tendências",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Gemini 2.0 Flash",
      use: "Research Agent, análise de canal",
      auth: "API Key (GOOGLE_GENERATIVE_AI_API_KEY)",
      endpoints: [],
    },
    {
      name: "OpenAI",
      logo: "O",
      gradient: "from-green-500 to-emerald-600",
      function: "Geração de imagens e modelos alternativos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "GPT-4o, DALL-E 3",
      use: "Thumbnails, imagens complementares",
      auth: "API Key (OPENAI_API_KEY)",
      endpoints: ["POST /v1/chat/completions", "POST /v1/images/generations"],
    },
    {
      name: "YouTube Data API",
      logo: "Y",
      gradient: "from-red-500 to-red-600",
      function: "Upload de vídeos e gerenciamento de canal",
      criticality: "Crítica",
      criticalityColor: "bg-red-500/20 text-red-400 font-bold",
      model: "v3",
      use: "Upload, metadados, thumbnails",
      auth: "OAuth 2.0",
      endpoints: ["youtube.upload", "youtube.readonly"],
    },
    {
      name: "Pexels",
      logo: "P",
      gradient: "from-teal-500 to-cyan-600",
      function: "Busca de imagens e vídeos stock gratuitos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "REST API",
      use: "B-roll, imagens de cena",
      auth: "API Key (PEXELS_API_KEY)",
      endpoints: ["GET /v1/search", "GET /videos/search"],
    },
    {
      name: "Pixabay",
      logo: "X",
      gradient: "from-lime-500 to-green-600",
      function: "Busca alternativa de mídia stock",
      criticality: "Baixa",
      criticalityColor: "bg-green-500/20 text-green-400",
      model: "REST API",
      use: "Fallback para Pexels",
      auth: "API Key (PIXABAY_API_KEY)",
      endpoints: [],
    },
    {
      name: "ElevenLabs",
      logo: "E",
      gradient: "from-violet-500 to-purple-600",
      function: "Text-to-Speech de alta qualidade",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Multilingual v2",
      use: "Narração do vídeo",
      auth: "API Key (ELEVENLABS_API_KEY)",
      endpoints: ["POST /v1/text-to-speech"],
    },
    {
      name: "Replicate",
      logo: "R",
      gradient: "from-pink-500 to-rose-600",
      function: "Geração de imagens via modelos open-source",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "Flux, SDXL",
      use: "Thumbnails, arte conceitual",
      auth: "API Token (REPLICATE_API_TOKEN)",
      endpoints: ["POST /v1/predictions"],
    },
  ];

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-green-900/50 via-emerald-900/50 to-green-900/50 border border-green-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-green-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-green-500/20 rounded-xl">
              <Plug className="w-8 h-8 text-green-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral das Integrações
              </h2>
              <p className="text-green-300">Arquitetura de conexões externas</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O ORION integra-se com{" "}
            <span className="text-green-400 font-semibold">múltiplos serviços externos</span>{" "}
            para fornecer suas funcionalidades. Cada integração tem um propósito
            específico e nível de criticidade definido.
          </p>
        </div>
      </section>

      {/* Integration Cards */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Server className="w-6 h-6 text-emerald-400" />
            APIs e Serviços Integrados
          </h3>
          <CopyMdButtons
            content={integrations.map(api => `${api.name}: ${api.function}`).join('\n')}
            markdownContent={`## APIs e Serviços Integrados\n\n${integrations.map(api =>
              `### ${api.name}\n- **Função:** ${api.function}\n- **Criticidade:** ${api.criticality}\n- **Modelo:** ${api.model}\n- **Uso:** ${api.use}\n- **Auth:** ${api.auth}`
            ).join('\n\n')}`}
            filename="apis-integradas.md"
          />
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {integrations.map((api, index) => (
            <div
              key={index}
              className="bg-layer-1 border border-subtle rounded-xl p-6 hover:border-subtle transition-colors"
            >
              <div className="flex items-start gap-4 mb-4">
                <ServiceLogo name={api.name} color={api.gradient} />
                <div className="flex-1">
                  <div className="flex items-center gap-2 mb-1">
                    <h4 className="font-bold text-white">{api.name}</h4>
                    <span className={`px-2 py-0.5 rounded text-xs ${api.criticalityColor}`}>
                      {api.criticality}
                    </span>
                  </div>
                  <p className="text-sm text-muted">{api.function}</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <p className="text-xs text-muted uppercase mb-1">Modelo/Versão</p>
                  <p className="text-secondary">{api.model}</p>
                </div>
                <div>
                  <p className="text-xs text-muted uppercase mb-1">Uso Principal</p>
                  <p className="text-secondary">{api.use}</p>
                </div>
              </div>

              <div className="mt-4 pt-4 border-t border-subtle">
                <div className="flex items-center gap-2 text-xs text-muted">
                  <Key className="w-3 h-3" />
                  <span>{api.auth}</span>
                </div>
                {api.endpoints.length > 0 && (
                  <div className="flex flex-wrap gap-1 mt-2">
                    {api.endpoints.map((endpoint, i) => (
                      <code
                        key={i}
                        className="px-2 py-1 bg-layer-2 rounded text-xs text-muted font-mono"
                      >
                        {endpoint}
                      </code>
                    ))}
                  </div>
                )}
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Connection Diagram */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Plug className="w-6 h-6 text-cyan-400" />
            Diagrama de Conexões
          </h3>
          <CopyMdButtons
            content="Diagrama de Conexões: IA Providers (Anthropic, Google Gemini, OpenAI, Replicate), Media Services (Pexels, Pixabay, ElevenLabs, Replicate Video), Video Platform (YouTube Data API)"
            markdownContent={`## Diagrama de Conexões\n\n### IA PROVIDERS\n- Anthropic Claude\n- Google Gemini\n- OpenAI GPT-4\n- Replicate\n\n### MEDIA SERVICES\n- Pexels Images\n- Pixabay Videos\n- ElevenLabs TTS\n- Replicate Video\n\n### VIDEO PLATFORM\n- YouTube Data API v3`}
            filename="diagrama-conexoes.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-8">
          <div className="text-center mb-8">
            <div className="inline-block bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl px-8 py-4">
              <p className="text-white font-bold text-lg">EMERGENCY YOUTUBE</p>
              <p className="text-white/70 text-sm">Next.js App</p>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {/* Orchestration */}
            <div className="bg-emerald-500/5 border border-emerald-500/20 rounded-xl p-5">
              <h4 className="font-bold text-emerald-400 mb-4 text-center">ORCHESTRATION</h4>
              <div className="space-y-3">
                {[
                  { name: "Inngest", color: "from-emerald-500 to-green-600" },
                  { name: "Resend Email", color: "from-violet-500 to-indigo-600" },
                  { name: "Prisma ORM", color: "from-cyan-500 to-blue-600" },
                ].map((service, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${service.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {service.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{service.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* IA Providers */}
            <div className="bg-amber-500/5 border border-amber-500/20 rounded-xl p-5">
              <h4 className="font-bold text-amber-400 mb-4 text-center">IA PROVIDERS</h4>
              <div className="space-y-3">
                {[
                  { name: "Anthropic Claude", color: "from-amber-500 to-orange-600" },
                  { name: "Google Gemini", color: "from-blue-500 to-indigo-600" },
                  { name: "OpenAI GPT-4", color: "from-green-500 to-emerald-600" },
                  { name: "Replicate", color: "from-pink-500 to-rose-600" },
                ].map((provider, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${provider.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {provider.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{provider.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Media Services */}
            <div className="bg-cyan-500/5 border border-cyan-500/20 rounded-xl p-5">
              <h4 className="font-bold text-cyan-400 mb-4 text-center">MEDIA SERVICES</h4>
              <div className="space-y-3">
                {[
                  { name: "Pexels Images", color: "from-teal-500 to-cyan-600" },
                  { name: "Pixabay Videos", color: "from-lime-500 to-green-600" },
                  { name: "ElevenLabs TTS", color: "from-violet-500 to-purple-600" },
                  { name: "JSON2VIDEO", color: "from-pink-500 to-rose-600" },
                ].map((service, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${service.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {service.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{service.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Video Platform */}
            <div className="bg-red-500/5 border border-red-500/20 rounded-xl p-5">
              <h4 className="font-bold text-red-400 mb-4 text-center">VIDEO PLATFORM</h4>
              <div className="flex flex-col items-center justify-center h-[calc(100%-2rem)]">
                <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white text-2xl font-bold mb-3">
                  Y
                </div>
                <span className="text-secondary font-medium">YouTube Data API</span>
                <span className="text-xs text-muted mt-1">v3</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Data Flow */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <ArrowRight className="w-6 h-6 text-blue-400" />
            Fluxo Real de Dados
          </h3>
          <CopyMdButtons
            content="Fluxos: 1) Geração de Roteiro (Usuário → API → Anthropic → Roteiro → UI), 2) Geração de Thumbnail (Roteiro → API → Replicate/DALL-E → Imagem → Preview), 3) Upload YouTube (Vídeo → API → OAuth → YouTube → URL)"
            markdownContent={`## Fluxo Real de Dados\n\n### 1. Geração de Roteiro\nUsuário (Input tema) → API (/proposal/script) → Anthropic (Claude API) → Roteiro (Estruturado) → Frontend (UI)\n\n### 2. Geração de Thumbnail\nRoteiro (Contexto) → API (/images/generate) → Replicate/DALL-E → Imagem (Base64) → Frontend (Preview)\n\n### 3. Upload para YouTube\nVídeo (Renderizado) → API (/youtube/upload) → OAuth 2.0 (Auth) → YouTube (Data API) → Publicado (URL)`}
            filename="fluxo-dados.md"
          />
        </div>

        <div className="space-y-6">
          {/* Script Generation Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">1. Geração de Roteiro</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Usuário", sub: "Input (tema)" },
                { label: "API", sub: "/proposal/script" },
                { label: "Anthropic", sub: "Claude API" },
                { label: "Roteiro", sub: "Estruturado" },
                { label: "Frontend", sub: "UI" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* Thumbnail Generation Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">2. Geração de Thumbnail</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Roteiro", sub: "Contexto" },
                { label: "API", sub: "/images/generate" },
                { label: "Replicate", sub: "ou DALL-E" },
                { label: "Imagem", sub: "Base64" },
                { label: "Frontend", sub: "Preview" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* YouTube Upload Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">3. Upload para YouTube</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Vídeo", sub: "Renderizado" },
                { label: "API", sub: "/youtube/upload" },
                { label: "OAuth 2.0", sub: "Auth" },
                { label: "YouTube", sub: "Data API" },
                { label: "Publicado", sub: "URL" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Security */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Shield className="w-6 h-6 text-violet-400" />
            Observações de Autenticação e Segurança
          </h3>
          <CopyMdButtons
            content="Segurança: API Keys Sistema (Variáveis ambiente Vercel), API Keys Usuário (localStorage criptografado), OAuth Tokens (Cookie httpOnly). Fallbacks: Anthropic→Gemini, Pexels→Pixabay, ElevenLabs→TTS alternativo"
            markdownContent={`## Autenticação e Segurança\n\n### Armazenamento de Credenciais\n- **API Keys (Sistema):** Variáveis de ambiente (Vercel) - Não expostas ao cliente\n- **API Keys (Usuário):** localStorage (browser) - Criptografadas localmente\n- **OAuth Tokens:** Cookie httpOnly - Sessão segura\n\n### Fallback e Redundância\n- Anthropic → Google Gemini\n- Pexels → Pixabay\n- ElevenLabs → TTS alternativo`}
            filename="seguranca.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Credential Storage */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <Database className="w-5 h-5 text-amber-400" />
              Armazenamento de Credenciais
            </h4>
            <div className="space-y-3">
              {[
                { type: "API Keys (Sistema)", local: "Variáveis de ambiente (Vercel)", security: "Não expostas ao cliente" },
                { type: "API Keys (Usuário)", local: "localStorage (browser)", security: "Criptografadas localmente" },
                { type: "OAuth Tokens", local: "Cookie httpOnly", security: "Sessão segura" },
              ].map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.type}</p>
                  <p className="text-xs text-muted">{item.local}</p>
                  <p className="text-xs text-green-400 mt-1 flex items-center gap-1">
                    <Lock className="w-3 h-3" />
                    {item.security}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Fallback & Redundancy */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <RefreshCw className="w-5 h-5 text-cyan-400" />
              Fallback e Redundância
            </h4>
            <div className="space-y-4">
              {[
                {
                  primary: "Anthropic",
                  fallback: "Google Gemini",
                  icon: AlertCircle,
                },
                {
                  primary: "Pexels",
                  fallback: "Pixabay",
                  icon: AlertCircle,
                },
                {
                  primary: "ElevenLabs",
                  fallback: "TTS alternativo",
                  icon: AlertCircle,
                },
              ].map((item, i) => (
                <div key={i} className="flex items-center gap-3">
                  <div className="flex-1 p-2 bg-layer-2 rounded text-center">
                    <p className="text-sm text-white">{item.primary}</p>
                  </div>
                  <item.icon className="w-4 h-4 text-yellow-400" />
                  <div className="flex-1 p-2 bg-layer-2/50 rounded text-center border border-dashed border-subtle">
                    <p className="text-sm text-muted">{item.fallback}</p>
                  </div>
                </div>
              ))}
            </div>
            <p className="text-xs text-muted mt-4">
              Se o serviço primário falhar, o sistema tenta automaticamente o fallback.
            </p>
          </div>
        </div>
      </section>

      {/* OAuth Flow */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Key className="w-6 h-6 text-red-400" />
            Fluxo OAuth (YouTube)
          </h3>
          <CopyMdButtons
            content="Fluxo OAuth: 1) Usuário clica Conectar → 2) Redirect Google OAuth → 3) Autoriza escopos → 4) Callback com código → 5) Tokens armazenados"
            markdownContent={`## Fluxo OAuth (YouTube)\n\n1. Usuário clica em Conectar YouTube\n2. Redirect para Google OAuth\n3. Usuário autoriza escopos\n4. Callback com código\n5. Tokens armazenados`}
            filename="oauth-flow.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
            {[
              { num: "1", text: "Usuário clica em Conectar YouTube" },
              { num: "2", text: "Redirect para Google OAuth" },
              { num: "3", text: "Usuário autoriza escopos" },
              { num: "4", text: "Callback com código" },
              { num: "5", text: "Tokens armazenados" },
            ].map((step, i) => (
              <div key={i} className="text-center">
                <div className="w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-2">
                  <span className="text-red-400 font-bold">{step.num}</span>
                </div>
                <p className="text-xs text-muted">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-green-900/20 border border-green-500/20 rounded-xl">
        <p className="text-sm text-green-300 italic text-center">
          Este documento detalha todas as integrações do ORION, seus fluxos de dados
          e considerações de segurança.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/ShareButtons.tsx`

```
"use client";

import { useState } from "react";
import { Share2, Link2, Check, MessageCircle, Mail, X } from "lucide-react";
import { useShare } from "@/lib/share-context";

export default function ShareButtons() {
  const { canShare, generateShareLink } = useShare();
  const [showModal, setShowModal] = useState(false);
  const [shareUrl, setShareUrl] = useState("");
  const [copied, setCopied] = useState(false);

  if (!canShare) return null;

  const handleShare = () => {
    const url = generateShareLink();
    setShareUrl(url);
    setShowModal(true);
  };

  const copyToClipboard = async () => {
    try {
      await navigator.clipboard.writeText(shareUrl);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Failed to copy:", err);
    }
  };

  const shareViaWhatsApp = () => {
    const text = encodeURIComponent(
      `Confira a documentação do ORION: ${shareUrl}`
    );
    window.open(`https://wa.me/?text=${text}`, "_blank");
  };

  const shareViaEmail = () => {
    const subject = encodeURIComponent("Documentação ORION");
    const body = encodeURIComponent(
      `Olá!\n\nConfira a documentação do ORION:\n${shareUrl}\n\nAtenciosamente.`
    );
    window.open(`mailto:?subject=${subject}&body=${body}`, "_blank");
  };

  return (
    <>
      <button
        onClick={handleShare}
        className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 rounded-lg text-white text-sm font-medium transition-all shadow-lg shadow-green-500/20"
      >
        <Share2 className="w-4 h-4" />
        Compartilhar
      </button>

      {/* Modal de Compartilhamento */}
      {showModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200">
          <div className="bg-layer-1 border border-subtle rounded-2xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-bold text-white flex items-center gap-2">
                <Share2 className="w-5 h-5 text-green-400" />
                Compartilhar Documentação
              </h3>
              <button
                onClick={() => setShowModal(false)}
                className="p-1.5 hover:bg-layer-2 rounded-lg transition-colors"
              >
                <X className="w-5 h-5 text-muted" />
              </button>
            </div>

            <p className="text-muted text-sm mb-4">
              Quem receber este link poderá visualizar a documentação, mas{" "}
              <strong className="text-amber-400">não poderá copiar conteúdos nem compartilhar novamente</strong>.
            </p>

            {/* Link Display */}
            <div className="bg-layer-2/50 border border-subtle rounded-xl p-3 mb-4">
              <p className="text-xs text-muted mb-2">Link de Compartilhamento:</p>
              <div className="flex items-center gap-2">
                <input
                  type="text"
                  value={shareUrl}
                  readOnly
                  className="flex-1 bg-transparent text-secondary text-sm outline-none truncate"
                />
                <button
                  onClick={copyToClipboard}
                  className={`p-2 rounded-lg transition-all ${
                    copied
                      ? "bg-green-500/20 text-green-400"
                      : "bg-zinc-700 text-muted hover:bg-zinc-600 hover:text-white"
                  }`}
                  title={copied ? "Copiado!" : "Copiar link"}
                >
                  {copied ? <Check className="w-4 h-4" /> : <Link2 className="w-4 h-4" />}
                </button>
              </div>
            </div>

            {/* Share Options */}
            <div className="grid grid-cols-2 gap-3">
              <button
                onClick={shareViaWhatsApp}
                className="flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-500 rounded-xl text-white font-medium transition-all"
              >
                <MessageCircle className="w-5 h-5" />
                WhatsApp
              </button>
              <button
                onClick={shareViaEmail}
                className="flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-white font-medium transition-all"
              >
                <Mail className="w-5 h-5" />
                Email
              </button>
            </div>

            {/* Info Box */}
            <div className="mt-4 p-3 bg-amber-500/10 border border-amber-500/20 rounded-xl">
              <p className="text-xs text-amber-300">
                <strong>Proteções ativas:</strong> O link compartilhado terá proteção contra cópia de texto,
                seleção de conteúdo e não mostrará opções de compartilhamento para o visitante.
              </p>
            </div>
          </div>
        </div>
      )}
    </>
  );
}

```

---
#### `components/documentation/SystemVisionTab.tsx`

```
"use client";

import {
  Play,
  Search,
  FileText,
  Film,
  Clapperboard,
  Upload,
  Users,
  Bot,
  ArrowRight,
  CheckCircle2,
  Monitor,
  Server,
  Database,
  Briefcase,
  GraduationCap,
  Building,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

export default function SystemVisionTab() {
  const workflowSteps = [
    {
      num: 1,
      title: "Input",
      subtitle: "Entrada de Dados",
      icon: Play,
      color: "indigo",
      inputs: ["Tema principal", "Configurações de formato", "Público-alvo", "Diretrizes"],
      outputs: ["Objeto de contexto", "Parâmetros validados"],
    },
    {
      num: 2,
      title: "Research",
      subtitle: "Pesquisa",
      icon: Search,
      color: "blue",
      inputs: ["Contexto estruturado"],
      outputs: ["Dados de pesquisa", "Referências", "Sugestões"],
    },
    {
      num: 3,
      title: "Proposal",
      subtitle: "Proposta Criativa",
      icon: FileText,
      color: "purple",
      inputs: ["Pesquisa consolidada"],
      outputs: ["Roteiro", "Títulos", "Descrição", "Tags"],
    },
    {
      num: 4,
      title: "Studio",
      subtitle: "Produção Visual",
      icon: Film,
      color: "pink",
      inputs: ["Roteiro aprovado"],
      outputs: ["Storyboard", "Mídias selecionadas"],
    },
    {
      num: 5,
      title: "Render",
      subtitle: "Composição",
      icon: Clapperboard,
      color: "orange",
      inputs: ["Storyboard completo"],
      outputs: ["Vídeo renderizado", "Preview"],
    },
    {
      num: 6,
      title: "Upload",
      subtitle: "Publicação",
      icon: Upload,
      color: "green",
      inputs: ["Vídeo final"],
      outputs: ["URL do vídeo", "Estatísticas"],
    },
  ];

  const colorMap: Record<string, { bg: string; border: string; text: string; gradient: string }> = {
    indigo: { bg: "bg-indigo-500/10", border: "border-indigo-500/30", text: "text-indigo-400", gradient: "from-indigo-500 to-indigo-600" },
    blue: { bg: "bg-blue-500/10", border: "border-blue-500/30", text: "text-blue-400", gradient: "from-blue-500 to-blue-600" },
    purple: { bg: "bg-purple-500/10", border: "border-purple-500/30", text: "text-purple-400", gradient: "from-purple-500 to-purple-600" },
    pink: { bg: "bg-pink-500/10", border: "border-pink-500/30", text: "text-pink-400", gradient: "from-pink-500 to-pink-600" },
    orange: { bg: "bg-orange-500/10", border: "border-orange-500/30", text: "text-orange-400", gradient: "from-orange-500 to-orange-600" },
    green: { bg: "bg-green-500/10", border: "border-green-500/30", text: "text-green-400", gradient: "from-green-500 to-green-600" },
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-900/50 via-cyan-900/50 to-blue-900/50 border border-blue-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <h2 className="text-2xl font-bold text-white mb-4">O Que o Sistema Faz</h2>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O <strong className="text-white">ORION</strong> é uma plataforma de automação
            de produção de vídeos que transforma um simples tema em um{" "}
            <span className="text-cyan-400 font-semibold">
              vídeo completo publicado no YouTube
            </span>
            . O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.
          </p>
        </div>
      </section>

      {/* Target Audience */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Users className="w-6 h-6 text-cyan-400" />
            Para Quem Foi Projetado
          </h3>
          <CopyMdButtons
            content="Público-alvo: Criadores Solo (empreendedores, educadores), Pequenas Empresas (marketing, comunicação), Agências (produção em escala, prototipagem)"
            markdownContent={`## Para Quem Foi Projetado\n\n### Criadores de Conteúdo Solo\n- Empreendedores digitais\n- Educadores e professores\n- Profissionais liberais\n\n### Pequenas Empresas\n- Marketing digital interno\n- Comunicação institucional\n- Treinamento corporativo\n\n### Agências e Produtoras\n- Produção em escala\n- Prototipagem rápida\n- Testes de conceito`}
            filename="publico-alvo.md"
          />
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {[
            {
              icon: Briefcase,
              title: "Criadores de Conteúdo Solo",
              items: ["Empreendedores digitais", "Educadores e professores", "Profissionais liberais"],
              color: "cyan",
            },
            {
              icon: Building,
              title: "Pequenas Empresas",
              items: ["Marketing digital interno", "Comunicação institucional", "Treinamento corporativo"],
              color: "blue",
            },
            {
              icon: GraduationCap,
              title: "Agências e Produtoras",
              items: ["Produção em escala", "Prototipagem rápida", "Testes de conceito"],
              color: "indigo",
            },
          ].map((profile, index) => (
            <div
              key={index}
              className="bg-layer-1 border border-subtle rounded-xl p-6"
            >
              <profile.icon className={`w-10 h-10 text-${profile.color}-400 mb-4`} />
              <h4 className="font-bold text-white mb-3">{profile.title}</h4>
              <ul className="space-y-2">
                {profile.items.map((item, i) => (
                  <li key={i} className="flex items-center gap-2 text-muted text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400" />
                    {item}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Workflow Steps */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Play className="w-6 h-6 text-green-400" />
            Fluxo Principal de Funcionamento
          </h3>
          <CopyMdButtons
            content="Workflow: 1) Input (Tema, Configurações) → 2) Research (Pesquisa) → 3) Proposal (Roteiro) → 4) Studio (Storyboard) → 5) Render (Vídeo) → 6) Upload (YouTube)"
            markdownContent={`## Fluxo Principal de Funcionamento\n\n### 1. Input - Entrada de Dados\n- **Entradas:** Tema principal, Configurações de formato, Público-alvo, Diretrizes\n- **Saídas:** Objeto de contexto, Parâmetros validados\n\n### 2. Research - Pesquisa\n- **Entradas:** Contexto estruturado\n- **Saídas:** Dados de pesquisa, Referências, Sugestões\n\n### 3. Proposal - Proposta Criativa\n- **Entradas:** Pesquisa consolidada\n- **Saídas:** Roteiro, Títulos, Descrição, Tags\n\n### 4. Studio - Produção Visual\n- **Entradas:** Roteiro aprovado\n- **Saídas:** Storyboard, Mídias selecionadas\n\n### 5. Render - Composição\n- **Entradas:** Storyboard completo\n- **Saídas:** Vídeo renderizado, Preview\n\n### 6. Upload - Publicação\n- **Entradas:** Vídeo final\n- **Saídas:** URL do vídeo, Estatísticas`}
            filename="workflow.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {workflowSteps.map((step) => {
            const colors = colorMap[step.color];
            return (
              <div
                key={step.num}
                className={`${colors.bg} ${colors.border} border rounded-xl p-5 relative overflow-hidden`}
              >
                <div className="absolute top-0 right-0 text-6xl font-bold text-white/5">
                  {step.num}
                </div>
                <div className="relative">
                  <div className="flex items-center gap-3 mb-4">
                    <div className={`w-12 h-12 bg-gradient-to-br ${colors.gradient} rounded-xl flex items-center justify-center`}>
                      <step.icon className="w-6 h-6 text-white" />
                    </div>
                    <div>
                      <h4 className="font-bold text-white">{step.title}</h4>
                      <p className={`text-sm ${colors.text}`}>{step.subtitle}</p>
                    </div>
                  </div>

                  <div className="space-y-3">
                    <div>
                      <p className="text-xs font-medium text-muted uppercase mb-2">Entradas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.inputs.map((input, i) => (
                          <span key={i} className="px-2 py-1 bg-layer-2 rounded text-xs text-secondary">
                            {input}
                          </span>
                        ))}
                      </div>
                    </div>
                    <div>
                      <p className="text-xs font-medium text-muted uppercase mb-2">Saídas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.outputs.map((output, i) => (
                          <span key={i} className={`px-2 py-1 ${colors.bg} rounded text-xs ${colors.text}`}>
                            {output}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </section>

      {/* Human vs Automation */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Users className="w-6 h-6 text-purple-400" />
            Interação entre Automação e Decisão Humana
          </h3>
          <CopyMdButtons
            content="Filosofia: O sistema sugere, o humano decide. Cada etapa gera proposta, usuário pode aceitar/modificar/regenerar, histórico permite rollback."
            markdownContent={`## Interação entre Automação e Decisão Humana\n\n| Etapa | Decisão Humana | Automação |\n|-------|----------------|----------|\n| Input | Define tema e parâmetros | Valida e estrutura |\n| Research | Aprova abordagem | Pesquisa e sintetiza |\n| Proposal | Revisa e edita roteiro | Gera todas as versões |\n| Studio | Ajusta mídias | Seleciona e compõe |\n| Render | Aprova preview | Renderiza vídeo |\n| Upload | Confirma publicação | Executa upload |\n\n### Filosofia de Controle\n**"O sistema sugere, o humano decide"**\n\n- Cada etapa gera uma proposta completa\n- O usuário pode aceitar, modificar ou regenerar\n- Nenhuma ação destrutiva sem confirmação\n- Histórico de versões permite rollback`}
            filename="automacao-humano.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <div className="grid grid-cols-3 gap-0 border-b border-subtle bg-layer-2/50">
            <div className="p-4 font-semibold text-white">Etapa</div>
            <div className="p-4 font-semibold text-purple-400 flex items-center gap-2">
              <Users className="w-4 h-4" /> Decisão Humana
            </div>
            <div className="p-4 font-semibold text-cyan-400 flex items-center gap-2">
              <Bot className="w-4 h-4" /> Automação
            </div>
          </div>
          {[
            { step: "Input", human: "Define tema e parâmetros", auto: "Valida e estrutura" },
            { step: "Research", human: "Aprova abordagem", auto: "Pesquisa e sintetiza" },
            { step: "Proposal", human: "Revisa e edita roteiro", auto: "Gera todas as versões" },
            { step: "Studio", human: "Ajusta mídias", auto: "Seleciona e compõe" },
            { step: "Render", human: "Aprova preview", auto: "Renderiza vídeo" },
            { step: "Upload", human: "Confirma publicação", auto: "Executa upload" },
          ].map((row, index) => (
            <div
              key={index}
              className="grid grid-cols-3 gap-0 border-b border-subtle last:border-0 hover:bg-layer-2/30 transition-colors"
            >
              <div className="p-4 text-secondary font-medium">{row.step}</div>
              <div className="p-4 text-muted text-sm">{row.human}</div>
              <div className="p-4 text-muted text-sm">{row.auto}</div>
            </div>
          ))}
        </div>

        <div className="mt-6 p-5 bg-purple-900/20 border border-purple-500/20 rounded-xl">
          <h4 className="font-bold text-purple-400 mb-2">Filosofia de Controle</h4>
          <p className="text-xl font-semibold text-white mb-4">&quot;O sistema sugere, o humano decide&quot;</p>
          <ul className="grid grid-cols-1 md:grid-cols-2 gap-3">
            {[
              "Cada etapa gera uma proposta completa",
              "O usuário pode aceitar, modificar ou regenerar",
              "Nenhuma ação destrutiva sem confirmação",
              "Histórico de versões permite rollback",
            ].map((item, i) => (
              <li key={i} className="flex items-center gap-2 text-secondary text-sm">
                <CheckCircle2 className="w-4 h-4 text-green-400" />
                {item}
              </li>
            ))}
          </ul>
        </div>
      </section>

      {/* Architecture Components */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Server className="w-6 h-6 text-orange-400" />
            Componentes Principais e Responsabilidades
          </h3>
          <CopyMdButtons
            content="Componentes: Frontend (Next.js, React, Tailwind, Zustand), Backend (API Routes, integração IAs), Estado Global (Zustand Stores com localStorage)"
            markdownContent={`## Componentes Principais\n\n### Frontend (Next.js App Router)\n**Responsabilidades:**\n- Interface de usuário\n- Navegação por workflow\n- Estado local e persistência\n- Comunicação com APIs\n\n**Tecnologias:** React 19, Tailwind, Framer Motion, Zustand\n\n### Backend (API Routes)\n**Responsabilidades:**\n- Integração com IAs\n- Comunicação externa\n- Processamento de dados\n- Validação e segurança\n\n**Endpoints:** /api/proposal/*, /api/images/*, /api/youtube/*\n\n### Estado Global (Zustand Stores)\n**Stores:**\n- WorkflowStore - Dados e navegação\n- GuidelinesStore - Diretrizes\n- UIStore - Estado de interface\n\n**Persistência:** localStorage`}
            filename="componentes.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Frontend */}
          <div className="bg-gradient-to-b from-blue-900/30 to-zinc-900 border border-blue-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Monitor className="w-8 h-8 text-blue-400" />
              <div>
                <h4 className="font-bold text-white">Frontend</h4>
                <p className="text-xs text-blue-400">Next.js App Router</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-muted">
              <li>Interface de usuário</li>
              <li>Navegação por workflow</li>
              <li>Estado local e persistência</li>
              <li>Comunicação com APIs</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Tecnologias</p>
            <div className="flex flex-wrap gap-1">
              {["React 19", "Tailwind", "Framer Motion", "Zustand"].map((tech, i) => (
                <span key={i} className="px-2 py-1 bg-blue-500/10 text-blue-400 rounded text-xs">
                  {tech}
                </span>
              ))}
            </div>
          </div>

          {/* Backend */}
          <div className="bg-gradient-to-b from-green-900/30 to-zinc-900 border border-green-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Server className="w-8 h-8 text-green-400" />
              <div>
                <h4 className="font-bold text-white">Backend</h4>
                <p className="text-xs text-green-400">API Routes</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-muted">
              <li>Integração com IAs</li>
              <li>Comunicação externa</li>
              <li>Processamento de dados</li>
              <li>Validação e segurança</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Endpoints</p>
            <div className="flex flex-wrap gap-1">
              {["/api/proposal/*", "/api/images/*", "/api/youtube/*"].map((endpoint, i) => (
                <span key={i} className="px-2 py-1 bg-green-500/10 text-green-400 rounded text-xs font-mono">
                  {endpoint}
                </span>
              ))}
            </div>
          </div>

          {/* State */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Database className="w-8 h-8 text-amber-400" />
              <div>
                <h4 className="font-bold text-white">Estado Global</h4>
                <p className="text-xs text-amber-400">Zustand Stores</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Stores</p>
            <ul className="space-y-2 text-sm text-muted">
              <li><strong className="text-amber-400">WorkflowStore</strong> - Dados e navegação</li>
              <li><strong className="text-amber-400">GuidelinesStore</strong> - Diretrizes</li>
              <li><strong className="text-amber-400">UIStore</strong> - Estado de interface</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Persistência</p>
            <span className="px-2 py-1 bg-amber-500/10 text-amber-400 rounded text-xs">
              localStorage
            </span>
          </div>
        </div>
      </section>

      {/* Flow Diagram */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <ArrowRight className="w-6 h-6 text-cyan-400" />
          Diagrama de Fluxo Operacional
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px]">
            {/* Top Row */}
            <div className="flex items-center justify-center gap-4 mb-6">
              {[
                { name: "INPUT", sub: "Tema", color: "indigo" },
                { name: "RESEARCH", sub: "Pesquisa", color: "blue" },
                { name: "PROPOSAL", sub: "Roteiro", color: "purple" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-muted">{step.sub}</p>
                  </div>
                  {i < 2 && <ArrowRight className="w-6 h-6 text-disabled" />}
                </div>
              ))}
            </div>

            {/* Arrow Down */}
            <div className="flex justify-end mr-16 mb-6">
              <div className="w-0.5 h-12 bg-zinc-700" />
            </div>

            {/* Bottom Row */}
            <div className="flex items-center justify-center gap-4 flex-row-reverse">
              {[
                { name: "UPLOAD", sub: "YouTube", color: "green" },
                { name: "RENDER", sub: "Vídeo", color: "orange" },
                { name: "STUDIO", sub: "Storyboard", color: "pink" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  {i < 2 && <ArrowRight className="w-6 h-6 text-disabled rotate-180" />}
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-muted">{step.sub}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-blue-900/20 border border-blue-500/20 rounded-xl">
        <p className="text-sm text-blue-300 italic text-center">
          Este documento descreve a visão sistêmica do ORION, detalhando seu
          funcionamento e a interação entre componentes automatizados e decisões humanas.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/TechStackTab.tsx`

```
"use client";

import {
  Layers,
  Code,
  Cpu,
  Cloud,
  Package,
  CheckCircle2,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

// Tech logo component
const TechLogo = ({
  name,
  letter,
  gradient,
}: {
  name: string;
  letter: string;
  gradient: string;
}) => (
  <div className="flex flex-col items-center gap-2">
    <div
      className={`w-14 h-14 rounded-xl bg-gradient-to-br ${gradient} flex items-center justify-center text-white font-bold text-xl shadow-lg`}
    >
      {letter}
    </div>
    <span className="text-xs text-muted">{name}</span>
  </div>
);

export default function TechStackTab() {
  const dependencies = {
    production: [
      { name: "next", version: "15.1.11", function: "Framework" },
      { name: "react", version: "19.0.0", function: "UI Library" },
      { name: "ai", version: "latest", function: "AI SDK 6" },
      { name: "@ai-sdk/anthropic", version: "latest", function: "Claude AI" },
      { name: "@ai-sdk/google", version: "latest", function: "Gemini AI" },
      { name: "@ai-sdk/openai", version: "latest", function: "GPT AI" },
      { name: "inngest", version: "3.49.3", function: "Workflow Orchestration" },
      { name: "prisma", version: "6.x", function: "Database ORM" },
      { name: "@prisma/client", version: "6.x", function: "Prisma Client" },
      { name: "resend", version: "6.8.0", function: "Email Service" },
      { name: "zustand", version: "5.0.3", function: "State Management" },
      { name: "tailwindcss", version: "3.4.17", function: "Styling" },
      { name: "framer-motion", version: "11.15.0", function: "Animations" },
      { name: "lucide-react", version: "0.469.0", function: "Icons" },
      { name: "zod", version: "3.24.1", function: "Validation" },
    ],
    dev: [
      { name: "typescript", version: "5.7.3", function: "Type checking" },
      { name: "eslint", version: "9.x", function: "Linting" },
      { name: "@types/react", version: "19.x", function: "React types" },
      { name: "@types/node", version: "22.x", function: "Node types" },
    ],
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-orange-900/50 via-amber-900/50 to-orange-900/50 border border-orange-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-orange-500/20 rounded-xl">
              <Layers className="w-8 h-8 text-orange-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral da Stack
              </h2>
              <p className="text-orange-300">Tecnologias e arquitetura</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O ORION utiliza uma{" "}
            <span className="text-orange-400 font-semibold">
              stack moderna e otimizada
            </span>{" "}
            para aplicações web de alta performance, com foco em Developer
            Experience (DX) e User Experience (UX).
          </p>
        </div>
      </section>

      {/* Languages */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Code className="w-6 h-6 text-blue-400" />
            Linguagens de Programação
          </h3>
          <CopyMdButtons
            content="TypeScript 5.7: 100% do código frontend e backend. Strict mode, Path aliases, Type inference, Utility types."
            markdownContent={`## Linguagens de Programação\n\n### TypeScript 5.7\n- 100% do código frontend e backend\n- Strict mode habilitado\n- Path aliases (@/components, @/lib)\n- Type inference avançado\n- Utility types (Partial, Pick, Omit)\n\n**Benefícios:**\n- Detecção de erros em desenvolvimento\n- Autocomplete inteligente\n- Refatoração segura\n- Documentação inline via tipos`}
            filename="linguagens.md"
          />
        </div>

        <div className="bg-gradient-to-r from-blue-900/30 to-indigo-900/30 border border-blue-500/20 rounded-xl p-6">
          <div className="flex items-start gap-6">
            <div className="w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg">
              TS
            </div>
            <div className="flex-1">
              <h4 className="text-xl font-bold text-white mb-2">TypeScript 5.7</h4>
              <p className="text-muted mb-4">
                100% do código frontend e backend
              </p>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p className="text-xs font-medium text-muted uppercase mb-2">
                    Características Utilizadas
                  </p>
                  <ul className="space-y-1 text-sm text-secondary">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Strict mode habilitado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Path aliases (@/components, @/lib)
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Type inference avançado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Utility types (Partial, Pick, Omit)
                    </li>
                  </ul>
                </div>
                <div>
                  <p className="text-xs font-medium text-muted uppercase mb-2">
                    Benefícios
                  </p>
                  <ul className="space-y-1 text-sm text-secondary">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Detecção de erros em desenvolvimento
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Autocomplete inteligente
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Refatoração segura
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Documentação inline via tipos
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Frameworks */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Package className="w-6 h-6 text-purple-400" />
            Frameworks e Bibliotecas
          </h3>
          <CopyMdButtons
            content="Next.js 15.1.11, React 19, Tailwind CSS 3.4.17, Zustand 5.0, Framer Motion 11.15, Lucide React 0.469"
            markdownContent={`## Frameworks e Bibliotecas\n\n### Next.js 15.1.11\n- App Router para roteamento\n- Server Components para performance\n- API Routes para backend\n- Image Optimization\n\n### React 19\n- Hooks: useState, useEffect, useCallback, useMemo, useRef\n- Functional Components, Custom Hooks\n\n### Tailwind CSS 3.4.17\n- Framework CSS utility-first\n\n### Zustand 5.0\n- State Management\n- Stores: WorkflowStore, GuidelinesStore, UIStore\n\n### Framer Motion 11.15\n- Animações e transições\n\n### Lucide React 0.469\n- Biblioteca de ícones`}
            filename="frameworks.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {/* Next.js */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-lg border border-zinc-600">
                N
              </div>
              <div>
                <h4 className="font-bold text-white">Next.js 15.1.11</h4>
                <p className="text-xs text-muted">Framework Full-Stack</p>
              </div>
            </div>
            <div className="space-y-2 text-sm">
              {[
                { feature: "App Router", use: "Roteamento e layouts" },
                { feature: "Server Components", use: "Performance e SEO" },
                { feature: "API Routes", use: "Backend integrado" },
                { feature: "Image Optimization", use: "Otimização de mídia" },
              ].map((item, i) => (
                <div key={i} className="flex justify-between text-muted">
                  <span className="text-white">{item.feature}</span>
                  <span>{item.use}</span>
                </div>
              ))}
            </div>
          </div>

          {/* React */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg">
                R
              </div>
              <div>
                <h4 className="font-bold text-white">React 19</h4>
                <p className="text-xs text-muted">UI Library</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Hooks</p>
              <div className="flex flex-wrap gap-1">
                {["useState", "useEffect", "useCallback", "useMemo", "useRef"].map(
                  (hook, i) => (
                    <code
                      key={i}
                      className="px-2 py-1 bg-cyan-500/10 text-cyan-400 rounded text-xs"
                    >
                      {hook}
                    </code>
                  )
                )}
              </div>
              <p className="text-xs font-medium text-muted uppercase mt-3">
                Patterns
              </p>
              <p className="text-sm text-muted">
                Functional Components, Custom Hooks, Composição
              </p>
            </div>
          </div>

          {/* Tailwind */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center text-white font-bold text-lg">
                T
              </div>
              <div>
                <h4 className="font-bold text-white">Tailwind CSS 3.4.17</h4>
                <p className="text-xs text-muted">Framework CSS</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">
                Classes Mais Usadas
              </p>
              <div className="font-mono text-xs space-y-1">
                <div className="text-muted">
                  <span className="text-teal-400">bg-layer-1</span> → Background
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">text-white</span> → Texto
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">border-subtle</span> → Bordas
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">rounded-xl</span> → Cantos
                </div>
              </div>
            </div>
          </div>

          {/* Zustand */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 flex items-center justify-center text-white font-bold text-lg">
                Z
              </div>
              <div>
                <h4 className="font-bold text-white">Zustand 5.0</h4>
                <p className="text-xs text-muted">State Management</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Stores</p>
              <ul className="text-sm space-y-1">
                <li className="text-amber-400">WorkflowStore</li>
                <li className="text-amber-400">GuidelinesStore</li>
                <li className="text-amber-400">UIStore</li>
              </ul>
              <p className="text-xs text-muted mt-2">
                Middleware: persist, devtools
              </p>
            </div>
          </div>

          {/* Framer Motion */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg">
                F
              </div>
              <div>
                <h4 className="font-bold text-white">Framer Motion 11.15</h4>
                <p className="text-xs text-muted">Animations</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Uso</p>
              <ul className="text-sm text-muted space-y-1">
                <li>Transições de página</li>
                <li>Animações de entrada</li>
                <li>Hover effects</li>
                <li>Loading states</li>
              </ul>
            </div>
          </div>

          {/* Lucide */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center text-white font-bold text-lg">
                L
              </div>
              <div>
                <h4 className="font-bold text-white">Lucide React 0.469</h4>
                <p className="text-xs text-muted">Iconography</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">
                Padrão de Uso
              </p>
              <code className="block p-2 bg-layer-2 rounded text-xs text-secondary">
                {`<IconName className="w-5 h-5" />`}
              </code>
            </div>
          </div>
        </div>
      </section>

      {/* Infrastructure */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Cloud className="w-6 h-6 text-green-400" />
            Tecnologias de Infraestrutura
          </h3>
          <CopyMdButtons
            content="Vercel: Deploy automático, Edge Functions, CDN Global. GitHub: Versionamento, CI/CD automático."
            markdownContent={`## Infraestrutura\n\n### Vercel\n- Hospedagem e Deploy\n- Automatic deployments\n- Edge Functions\n- Environment Variables\n- Analytics\n- Preview deployments\n- CDN Global\n\n### GitHub\n- Versionamento\n- CI/CD automático\n- push main → Deploy production\n- push feature/* → Preview deploy\n- pull request → Checks automáticos`}
            filename="infraestrutura.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Vercel */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-600 to-zinc-900 flex items-center justify-center text-white font-bold text-xl border border-zinc-500">
                V
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">Vercel</h4>
                <p className="text-sm text-muted">Hospedagem e Deploy</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">
              Features Utilizadas
            </p>
            <div className="grid grid-cols-2 gap-2">
              {[
                "Automatic deployments",
                "Edge Functions",
                "Environment Variables",
                "Analytics",
                "Preview deployments",
                "CDN Global",
              ].map((feature, i) => (
                <div
                  key={i}
                  className="flex items-center gap-2 text-sm text-secondary"
                >
                  <CheckCircle2 className="w-4 h-4 text-green-400" />
                  {feature}
                </div>
              ))}
            </div>
          </div>

          {/* GitHub */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-xl">
                G
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">GitHub</h4>
                <p className="text-sm text-muted">Versionamento e CI</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">
              Workflows
            </p>
            <ul className="space-y-2 text-sm text-secondary">
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  push main
                </code>
                <span className="text-muted">→</span>
                Deploy production
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  push feature/*
                </code>
                <span className="text-muted">→</span>
                Preview deploy
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  pull request
                </code>
                <span className="text-muted">→</span>
                Checks automáticos
              </li>
            </ul>
          </div>
        </div>
      </section>

      {/* Architecture Diagram */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Cpu className="w-6 h-6 text-violet-400" />
            Diagrama por Camadas
          </h3>
          <CopyMdButtons
            content="Camadas: Frontend (React, Tailwind, Framer, Zustand, Lucide) → Framework (Next.js 15) → Backend (Vercel AI, Zod) → IA (Anthropic, Google, OpenAI) → Infraestrutura (Vercel)"
            markdownContent={`## Arquitetura por Camadas\n\n### FRONTEND\nReact 19, Tailwind, Framer Motion, Zustand, Lucide\n\n### FRAMEWORK\nNext.js 15 (App Router, Server Components, API Routes)\n\n### BACKEND\nVercel AI SDK, Zod, node-fetch\n\n### IA LAYER\nAnthropic Claude, Google AI, OpenAI\n\n### INFRAESTRUTURA\nVercel (Edge Functions, CDN Global, Env Vars)`}
            filename="arquitetura-camadas.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px] space-y-4">
            {/* Frontend Layer */}
            <div className="bg-blue-500/10 border border-blue-500/20 rounded-xl p-4">
              <h4 className="font-bold text-blue-400 mb-3 text-center">FRONTEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="React 19" letter="R" gradient="from-cyan-500 to-blue-600" />
                <TechLogo name="Tailwind" letter="T" gradient="from-teal-500 to-cyan-600" />
                <TechLogo name="Framer" letter="F" gradient="from-pink-500 to-purple-600" />
                <TechLogo name="Zustand" letter="Z" gradient="from-amber-500 to-yellow-600" />
                <TechLogo name="Lucide" letter="L" gradient="from-red-500 to-orange-600" />
              </div>
            </div>

            {/* Framework Layer */}
            <div className="bg-layer-2/50 border border-subtle rounded-xl p-4">
              <h4 className="font-bold text-muted mb-3 text-center">FRAMEWORK</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Next.js 15</p>
                  <div className="flex gap-4 mt-2 text-xs text-muted">
                    <span>App Router</span>
                    <span>Server Components</span>
                    <span>API Routes</span>
                  </div>
                </div>
              </div>
            </div>

            {/* Backend Layer */}
            <div className="bg-green-500/10 border border-green-500/20 rounded-xl p-4">
              <h4 className="font-bold text-green-400 mb-3 text-center">BACKEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Vercel AI" letter="V" gradient="from-green-500 to-emerald-600" />
                <TechLogo name="Zod" letter="Z" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="node-fetch" letter="N" gradient="from-lime-500 to-green-600" />
              </div>
            </div>

            {/* IA Layer */}
            <div className="bg-purple-500/10 border border-purple-500/20 rounded-xl p-4">
              <h4 className="font-bold text-purple-400 mb-3 text-center">IA LAYER</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Anthropic" letter="A" gradient="from-amber-500 to-orange-600" />
                <TechLogo name="Google AI" letter="G" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="OpenAI" letter="O" gradient="from-green-500 to-emerald-600" />
              </div>
            </div>

            {/* Infrastructure Layer */}
            <div className="bg-amber-500/10 border border-amber-500/20 rounded-xl p-4">
              <h4 className="font-bold text-amber-400 mb-3 text-center">INFRAESTRUTURA</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Vercel</p>
                  <div className="flex gap-4 mt-2 text-xs text-muted">
                    <span>Edge Functions</span>
                    <span>CDN Global</span>
                    <span>Env Vars</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Dependencies Table */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Package className="w-6 h-6 text-cyan-400" />
          Dependências
        </h3>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Production */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-green-500/10 border-b border-subtle px-4 py-3">
              <h4 className="font-bold text-green-400">Production Dependencies</h4>
            </div>
            <div className="p-4 max-h-80 overflow-y-auto">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-muted text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-secondary">
                  {dependencies.production.map((dep, i) => (
                    <tr key={i} className="border-t border-subtle">
                      <td className="py-2 font-mono text-cyan-400">{dep.name}</td>
                      <td className="py-2 text-muted">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>

          {/* Dev */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-amber-500/10 border-b border-subtle px-4 py-3">
              <h4 className="font-bold text-amber-400">Dev Dependencies</h4>
            </div>
            <div className="p-4">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-muted text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-secondary">
                  {dependencies.dev.map((dep, i) => (
                    <tr key={i} className="border-t border-subtle">
                      <td className="py-2 font-mono text-amber-400">{dep.name}</td>
                      <td className="py-2 text-muted">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-orange-900/20 border border-orange-500/20 rounded-xl">
        <p className="text-sm text-orange-300 italic text-center">
          Este documento cataloga todas as tecnologias utilizadas no ORION,
          sua função e posição na arquitetura.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/content.ts`

```
// Documentation Content for Export
// This file contains the markdown content for each documentation tab

export const genesisContent = `# Gênese & Intenção do Sistema

## Por Que Este Sistema Foi Criado

O **ORION** nasceu de uma necessidade real e urgente: **democratizar a produção de vídeos profissionais para YouTube**, eliminando as barreiras técnicas, financeiras e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.

### O Problema Fundamental

Criar vídeos de qualidade para YouTube tradicionalmente exige:
- **Habilidades técnicas** em edição de vídeo, design gráfico e produção de áudio
- **Investimento significativo** em equipamentos, software e possivelmente equipe
- **Tempo extensivo** - um vídeo de 10 minutos pode levar 8-20 horas de produção
- **Conhecimento de SEO** para otimização e descoberta do conteúdo

Essa barreira exclui milhões de potenciais criadores que têm conhecimento valioso mas não os recursos para transformá-lo em conteúdo visual.

### A Solução Proposta

O ORION é um **sistema de automação inteligente** que:
1. Recebe apenas o tema/tópico do vídeo
2. Pesquisa e estrutura o conteúdo automaticamente
3. Gera roteiro, trilha sonora, thumbnail e descrição
4. Cria o storyboard com seleção de mídias
5. Renderiza o vídeo final
6. Publica diretamente no YouTube

## Prompts Fundacionais

### Diretrizes de Design

O sistema foi projetado seguindo estas premissas:

1. **Automação Máxima, Controle Humano**
   - O sistema automatiza tarefas repetitivas e técnicas
   - O humano mantém controle sobre decisões criativas e editoriais
   - Cada etapa pode ser revisada e modificada antes de avançar

2. **Qualidade de Produção Profissional**
   - Outputs devem ser indistinguíveis de produções manuais
   - Padrões de YouTube Creator Academy são referência
   - SEO e engagement são prioridades arquiteturais

3. **Interface Intuitiva**
   - Zero curva de aprendizado para operações básicas
   - Interface guiada por workflow linear
   - Feedback visual claro em cada etapa

4. **Escalabilidade**
   - Suportar múltiplos vídeos em paralelo
   - Funcionar com diferentes nichos de conteúdo
   - Permitir personalização de diretrizes por projeto

## Decisões Arquiteturais Derivadas

### Por que Next.js 15?

- **App Router** para roteamento moderno e layouts aninhados
- **Server Components** para performance e SEO
- **API Routes** para backend integrado
- **Vercel** como deploy nativo e otimizado

### Por que Zustand para Estado?

- Simplicidade sobre complexidade (vs Redux)
- Persistência nativa com localStorage
- TypeScript first
- Minimal boilerplate

### Por que Workflow em 6 Etapas?

O workflow espelha o processo real de produção de vídeo:
1. **Input** → Briefing criativo
2. **Research** → Pesquisa e referências
3. **Proposal** → Roteiro e assets
4. **Studio** → Storyboard e composição
5. **Render** → Produção final
6. **Upload** → Publicação

Esta estrutura permite:
- Validação humana em cada transição
- Rollback para etapas anteriores
- Persistência de progresso
- Clareza sobre status atual

## Elementos Intencionais

### O que o sistema FAZ:
- Pesquisa profunda sobre qualquer tema
- Geração de roteiros otimizados para engagement
- Seleção automática de mídia relevante
- Composição de vídeo com narração
- Upload direto para YouTube

### O que o sistema NÃO FAZ (exclusões conscientes):
- **Não substitui a voz humana** - se o criador quiser narrar, deve gravar separadamente
- **Não gera conteúdo controverso** - políticas de content safety são aplicadas
- **Não garante viralização** - o sistema otimiza, mas resultados dependem do conteúdo
- **Não armazena vídeos eternamente** - após upload, o vídeo vive no YouTube

## Princípios de Design

### 1. Transparência sobre Magia
O sistema mostra claramente o que está fazendo em cada etapa, evitando "caixas pretas" que frustram usuários.

### 2. Falhas Graceful
Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando o workflow completamente.

### 3. Dados Locais
Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.

### 4. Documentação Viva
Este próprio módulo é parte do sistema, não um documento externo que envelhece.

---

*Este documento representa a intenção fundacional do sistema ORION, servindo como referência para decisões futuras e transferência de contexto entre IAs.*
`;

export const systemVisionContent = `# Visão Sistêmica & Funcionamento

## O Que o Sistema Faz

O **ORION** é uma plataforma de automação de produção de vídeos que transforma um simples tema em um vídeo completo publicado no YouTube. O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.

## Para Quem Foi Projetado

### Perfis de Usuário Primários

1. **Criadores de Conteúdo Solo**
   - Empreendedores digitais
   - Educadores e professores
   - Profissionais liberais

2. **Pequenas Empresas**
   - Marketing digital interno
   - Comunicação institucional
   - Treinamento corporativo

3. **Agências e Produtoras**
   - Produção em escala
   - Prototipagem rápida
   - Testes de conceito

### Requisitos do Usuário
- Conta Google com canal YouTube ativo
- Acesso às APIs necessárias (fornecidas ou próprias)
- Navegador moderno (Chrome, Firefox, Safari, Edge)

## Fluxo Principal de Funcionamento

### Etapa 1: Input (Entrada de Dados)

**Objetivo:** Capturar a intenção e parâmetros do vídeo

**Entradas:**
- Tema principal do vídeo
- Configurações de formato (duração, estilo)
- Público-alvo e tom de voz
- Diretrizes específicas (opcional)

**Saídas:**
- Objeto de contexto estruturado
- Parâmetros validados para próximas etapas

### Etapa 2: Research (Pesquisa)

**Objetivo:** Coletar informações e referências sobre o tema

**Processo:**
1. Análise semântica do tema
2. Busca em fontes confiáveis
3. Extração de pontos-chave
4. Identificação de ângulos únicos
5. Estruturação de outline inicial

**Saídas:**
- Dados de pesquisa estruturados
- Referências e fontes
- Sugestões de abordagem

### Etapa 3: Proposal (Proposta Criativa)

**Objetivo:** Gerar todos os assets criativos do vídeo

**Componentes Gerados:**
- **Roteiro completo** com marcações de tempo
- **Trilha sonora** sugerida com justificativa
- **Títulos e thumbnails** otimizados para CTR
- **Descrição** com timestamps e links
- **Tags e hashtags** para SEO

**Saídas:**
- Pacote completo de proposta criativa
- Preview de cada componente
- Opções de variação

### Etapa 4: Studio (Produção Visual)

**Objetivo:** Criar o storyboard e selecionar mídias

**Processo:**
1. Divisão do roteiro em cenas
2. Busca de imagens/vídeos por cena
3. Definição de transições
4. Preview do storyboard
5. Ajustes manuais (se necessário)

**Saídas:**
- Storyboard completo com mídias
- Timeline visual do vídeo
- Assets prontos para render

### Etapa 5: Render (Composição)

**Objetivo:** Gerar o vídeo final

**Processo:**
1. Síntese de voz (TTS) do roteiro
2. Composição de vídeo com mídias
3. Sincronização de áudio
4. Aplicação de efeitos e transições
5. Exportação em formato YouTube

**Saídas:**
- Arquivo de vídeo renderizado
- Preview para aprovação
- Metadados de produção

### Etapa 6: Upload (Publicação)

**Objetivo:** Publicar o vídeo no YouTube

**Processo:**
1. Autenticação com YouTube
2. Upload do vídeo
3. Aplicação de metadados
4. Configuração de privacidade
5. Geração de thumbnail
6. Agendamento (opcional)

**Saídas:**
- Vídeo publicado no YouTube
- URL do vídeo
- Estatísticas iniciais

## Interação entre Automação e Decisão Humana

### Pontos de Validação Humana

| Etapa | Decisão Humana | Automação |
|-------|----------------|-----------|
| Input | Define tema e parâmetros | Valida e estrutura |
| Research | Aprova abordagem | Pesquisa e sintetiza |
| Proposal | Revisa e edita roteiro | Gera todas as versões |
| Studio | Ajusta mídias | Seleciona e compõe |
| Render | Aprova preview | Renderiza vídeo |
| Upload | Confirma publicação | Executa upload |

### Filosofia de Controle

**"O sistema sugere, o humano decide"**

- Cada etapa gera uma proposta completa
- O usuário pode aceitar, modificar ou regenerar
- Nenhuma ação destrutiva é executada sem confirmação
- Histórico de versões permite rollback

## Componentes Principais e Responsabilidades

### Frontend (Next.js App Router)

**Responsabilidades:**
- Interface de usuário
- Navegação por workflow
- Estado local e persistência
- Comunicação com APIs

**Tecnologias:**
- React 19 com Server Components
- Tailwind CSS para estilos
- Framer Motion para animações
- Zustand para estado

### Backend (API Routes)

**Responsabilidades:**
- Integração com IAs (Anthropic, OpenAI, Google)
- Comunicação com serviços externos
- Processamento de dados
- Validação e segurança

**Endpoints Principais:**
- /api/proposal/* - Geração de conteúdo
- /api/images/* - Geração de imagens
- /api/media/* - Busca de mídia
- /api/youtube/* - Integração YouTube
- /api/render - Composição de vídeo
- /api/tts - Text-to-Speech

### Estado Global (Zustand Stores)

**WorkflowStore:**
- Dados de cada etapa
- Navegação entre etapas
- Persistência localStorage

**GuidelinesStore:**
- Diretrizes personalizadas
- Configurações de projeto

**UIStore:**
- Estado de modais
- Preferências de interface

---

## Diagrama de Fluxo Operacional

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                     EMERGENCY YOUTUBE                           │
│                    Fluxo de Produção                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  INPUT   │───▶│ RESEARCH │───▶│ PROPOSAL │                  │
│  │  Tema    │    │ Pesquisa │    │ Roteiro  │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │ Contexto │    │  Dados   │    │  Assets  │                  │
│  │   JSON   │    │Pesquisa  │    │Criativos │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                       │                         │
│                                       ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  UPLOAD  │◀───│  RENDER  │◀───│  STUDIO  │                  │
│  │ YouTube  │    │  Vídeo   │    │Storyboard│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  Vídeo   │    │ Arquivo  │    │  Mídias  │                  │
│  │Publicado │    │  .mp4    │    │Selecionad│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

---

*Este documento descreve a visão sistêmica do ORION, detalhando seu funcionamento e a interação entre componentes automatizados e decisões humanas.*
`;

export const integrationsContent = `# Arquitetura de Integrações & APIs

## Visão Geral das Integrações

O ORION integra-se com múltiplos serviços externos para fornecer suas funcionalidades. Cada integração tem um propósito específico e nível de criticidade definido.

## APIs e Serviços Integrados

### 1. Anthropic Claude API

**Função:** Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Modelo | Claude 3.5 Sonnet / Claude 3 Opus |
| Uso Principal | Roteiros, análise, estruturação |
| Autenticação | API Key (ANTHROPIC_API_KEY) |

**Fluxo de Dados:**
- Input: Tema, contexto, diretrizes
- Output: Texto estruturado (roteiro, descrição, tags)

**Endpoints Utilizados:**
- POST /v1/messages

---

### 2. Google Gemini API

**Função:** Geração de conteúdo alternativa e pesquisa

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | Gemini 1.5 Pro |
| Uso Principal | Backup de geração, análise |
| Autenticação | API Key (GOOGLE_GENERATIVE_AI_API_KEY) |

**Fluxo de Dados:**
- Input: Prompts estruturados
- Output: Texto gerado

---

### 3. OpenAI API

**Função:** Geração de imagens e modelos alternativos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | GPT-4o, DALL-E 3 |
| Uso Principal | Thumbnails, imagens complementares |
| Autenticação | API Key (OPENAI_API_KEY) |

**Endpoints Utilizados:**
- POST /v1/chat/completions
- POST /v1/images/generations

---

### 4. YouTube Data API v3

**Função:** Upload de vídeos e gerenciamento de canal

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Crítica |
| Versão | v3 |
| Uso Principal | Upload, metadados, thumbnails |
| Autenticação | OAuth 2.0 |

**Escopos Necessários:**
- youtube.upload
- youtube.readonly
- youtube.force-ssl

**Fluxo de Dados:**
- Input: Arquivo de vídeo, metadados
- Output: ID do vídeo publicado, URL

---

### 5. Pexels API

**Função:** Busca de imagens e vídeos stock gratuitos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Uso Principal | B-roll, imagens de cena |
| Autenticação | API Key (PEXELS_API_KEY) |

**Endpoints Utilizados:**
- GET /v1/search (imagens)
- GET /videos/search (vídeos)

---

### 6. Pixabay API

**Função:** Busca alternativa de mídia stock

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Baixa (backup) |
| Uso Principal | Fallback para Pexels |
| Autenticação | API Key (PIXABAY_API_KEY) |

---

### 7. ElevenLabs API

**Função:** Text-to-Speech de alta qualidade

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Uso Principal | Narração do vídeo |
| Autenticação | API Key (ELEVENLABS_API_KEY) |

**Vozes Disponíveis:**
- Português (múltiplas vozes)
- Inglês (múltiplas vozes)

---

### 8. Replicate API

**Função:** Geração de imagens via modelos open-source

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelos | Flux, SDXL |
| Uso Principal | Thumbnails, arte conceitual |
| Autenticação | API Token (REPLICATE_API_TOKEN) |

---

## Diagrama de Conexões

\`\`\`
                    ┌─────────────────────────────────────┐
                    │         EMERGENCY YOUTUBE           │
                    │          (Next.js App)              │
                    └─────────────────────────────────────┘
                                     │
           ┌─────────────────────────┼─────────────────────────┐
           │                         │                         │
           ▼                         ▼                         ▼
┌─────────────────────┐   ┌─────────────────────┐   ┌─────────────────────┐
│   IA PROVIDERS      │   │   MEDIA SERVICES    │   │   VIDEO PLATFORM    │
├─────────────────────┤   ├─────────────────────┤   ├─────────────────────┤
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Anthropic   │  │   │  │    Pexels    │  │   │  │   YouTube    │  │
│  │   Claude     │  │   │  │   Images     │  │   │  │   Data API   │  │
│  └──────────────┘  │   │  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   └─────────────────────┘
│  │   Google     │  │   │  │   Pixabay    │  │
│  │   Gemini     │  │   │  │   Videos     │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │   OpenAI     │  │   │  │  ElevenLabs  │  │
│  │   GPT-4o     │  │   │  │     TTS      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Replicate   │  │   │  │  Replicate   │  │
│  │   Images     │  │   │  │   Video      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
└─────────────────────┘   └─────────────────────┘
\`\`\`

## Fluxo Real de Dados

### 1. Geração de Roteiro

\`\`\`
Usuário ──▶ Input (tema) ──▶ API /proposal/script
                                    │
                                    ▼
                              Anthropic API
                                    │
                                    ▼
                           Roteiro Estruturado
                                    │
                                    ▼
                              Frontend (UI)
\`\`\`

### 2. Geração de Thumbnail

\`\`\`
Roteiro ──▶ API /images/generate ──▶ Replicate/DALL-E
                                          │
                                          ▼
                                    Imagem Base64
                                          │
                                          ▼
                                    Frontend (Preview)
\`\`\`

### 3. Upload para YouTube

\`\`\`
Vídeo Renderizado ──▶ API /youtube/upload
                            │
                            ▼
                      OAuth 2.0 Auth
                            │
                            ▼
                     YouTube Data API
                            │
                            ▼
                   Vídeo Publicado (URL)
\`\`\`

## Observações de Autenticação

### Armazenamento de Credenciais

| Tipo | Local | Segurança |
|------|-------|-----------|
| API Keys | Variáveis de ambiente (Vercel) | Não expostas ao cliente |
| API Keys do Usuário | localStorage (browser) | Criptografadas localmente |
| OAuth Tokens | Cookie httpOnly | Sessão segura |

### Fluxo OAuth (YouTube)

1. Usuário clica em "Conectar YouTube"
2. Redirect para Google OAuth
3. Usuário autoriza escopos
4. Callback com código de autorização
5. Troca por access_token + refresh_token
6. Tokens armazenados em cookie seguro

### Fallback e Redundância

**Se Anthropic falhar:**
- Tentativa com Google Gemini
- Mensagem de erro amigável se ambos falharem

**Se Pexels falhar:**
- Tentativa com Pixabay
- Permite upload manual de mídia

**Se ElevenLabs falhar:**
- Opção de TTS alternativo
- Permite upload de áudio manual

---

*Este documento detalha todas as integrações do ORION, seus fluxos de dados e considerações de segurança.*
`;

export const techStackContent = `# Stack Tecnológica & Linguagens

## Visão Geral da Stack

O ORION utiliza uma stack moderna e otimizada para aplicações web de alta performance, com foco em Developer Experience (DX) e User Experience (UX).

## Linguagens de Programação

### TypeScript 5.7

**Uso:** 100% do código frontend e backend

**Características Utilizadas:**
- Strict mode habilitado
- Path aliases (@/components, @/lib)
- Type inference avançado
- Utility types (Partial, Pick, Omit)

**Benefícios:**
- Detecção de erros em tempo de desenvolvimento
- Autocomplete inteligente
- Refatoração segura
- Documentação inline via tipos

---

## Frameworks e Bibliotecas

### Next.js 15.1.11

**Categoria:** Framework Full-Stack

| Feature | Uso no Projeto |
|---------|----------------|
| App Router | Roteamento e layouts |
| Server Components | Performance e SEO |
| API Routes | Backend integrado |
| Image Optimization | Otimização de mídia |
| Font Optimization | Fontes otimizadas |

**Configurações Especiais:**
- Output: Standalone (otimizado para containers)
- TypeScript: Strict mode
- ESLint: Integrado

---

### React 19

**Categoria:** UI Library

**Hooks Utilizados:**
- useState, useEffect (padrão)
- useCallback, useMemo (otimização)
- useRef (referências DOM)

**Patterns:**
- Functional Components exclusivamente
- Custom Hooks para lógica reutilizável
- Composição sobre herança

---

### Tailwind CSS 3.4.17

**Categoria:** Framework CSS

**Customizações:**
- Cores: primary (red), accent (yellow)
- Animações customizadas
- Typography plugin
- Forms plugin

**Utilities Mais Usados:**
\`\`\`
bg-zinc-900     → Background escuro
text-white      → Texto principal
border-zinc-800 → Bordas sutis
rounded-xl      → Cantos arredondados
flex/grid       → Layouts
\`\`\`

---

### Zustand 5.0

**Categoria:** State Management

**Stores Implementadas:**
1. WorkflowStore - Estado do workflow
2. GuidelinesStore - Diretrizes
3. UIStore - Estado da interface

**Middleware:**
- persist (localStorage)
- devtools (desenvolvimento)

---

### Framer Motion 11.15

**Categoria:** Animações

**Uso:**
- Transições de página
- Animações de entrada
- Hover effects
- Loading states

---

### Lucide React 0.469

**Categoria:** Iconografia

**Padrão de Uso:**
\`\`\`tsx
import { IconName } from "lucide-react";
<IconName className="w-5 h-5" />
\`\`\`

---

## Tecnologias de Infraestrutura

### Vercel

**Função:** Hospedagem e Deploy

**Features Utilizadas:**
- Automatic deployments (Git push)
- Edge Functions
- Environment Variables
- Analytics
- Preview deployments

**Configuração:**
- Framework preset: Next.js
- Build command: next build
- Output directory: .next

---

### GitHub

**Função:** Versionamento e CI

**Workflows:**
- Push to main → Deploy production
- Push to feature/* → Preview deploy
- Pull requests → Checks automáticos

---

## Diagrama por Camadas

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                         FRONTEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   React 19  │  │  Tailwind   │  │   Framer    │             │
│  │     UI      │  │    CSS      │  │   Motion    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Zustand   │  │   Lucide    │  │    clsx     │             │
│  │    State    │  │   Icons     │  │   + merge   │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         FRAMEWORK                               │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Next.js 15                            │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │   App    │  │  Server  │  │   API    │              │   │
│  │  │  Router  │  │Components│  │  Routes  │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│                          BACKEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Vercel AI  │  │    Zod     │  │  node-fetch │             │
│  │     SDK     │  │ Validation │  │   HTTP      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         IA LAYER                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Anthropic  │  │   Google   │  │   OpenAI    │             │
│  │    SDK      │  │    AI      │  │    SDK      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                       INFRAESTRUTURA                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      Vercel                              │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │  Edge    │  │   CDN    │  │  Env     │              │   │
│  │  │Functions │  │  Global  │  │  Vars    │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

## Dependências Principais

### Production Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| next | 15.1.11 | Framework |
| react | 19.0.0 | UI Library |
| zustand | 5.0.3 | State Management |
| tailwindcss | 3.4.17 | Styling |
| framer-motion | 11.15.0 | Animations |
| lucide-react | 0.469.0 | Icons |
| @ai-sdk/anthropic | latest | Claude AI |
| @ai-sdk/google | latest | Gemini AI |
| @ai-sdk/openai | latest | GPT AI |
| zod | 3.24.1 | Validation |
| clsx | 2.1.1 | Class merging |
| tailwind-merge | 2.6.0 | Tailwind utilities |

### Dev Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| typescript | 5.7.3 | Type checking |
| eslint | 9.x | Linting |
| @types/react | 19.x | React types |
| @types/node | 22.x | Node types |

---

*Este documento cataloga todas as tecnologias utilizadas no ORION, sua função e posição na arquitetura.*
`;

export const currentStateContent = `# Estado Atual & Próximos Passos

## Status Geral do Projeto

**Versão:** 1.0.0
**Status:** Em Produção (Visual Upgrade em Progresso)
**URL:** https://emergecy-youtube.vercel.app
**Última Atualização:** 24 de Janeiro de 2026
**Nome Oficial:** ORION (anteriormente Emergency YouTube)

---

## 🎨 Visual Upgrade State of the Art (Em Progresso - 24/01/2026)

### Objetivo
Elevar o padrão visual do ORION para nível "State of the Art" (Vercel/Linear/Raycast) com glow effects, gradientes vibrantes, visualizações de dados interativas e micro-interações em toda a interface.

### Progresso Atual

#### ✅ COMPLETO
| Componente | Status | Descrição |
|------------|--------|-----------|
| Dashboard | ✅ 100% | Bento Grid + Recharts (AreaChart, RadialBarChart) com gradientes |
| Design Tokens | ✅ 100% | Tailwind importa lib/design-tokens.ts (single source of truth) |
| Analytics | ✅ 100% | Vercel Analytics + Speed Insights integrados |
| Workflow Page | ✅ 100% | Design tokens aplicados, consistência visual |
| Micro-interações | ✅ 100% | active:scale-95, whileHover, AnimatePresence |

#### ⏳ EM PROGRESSO
| Componente | Status | Bloqueio |
|------------|--------|----------|
| Páginas Internas | 🔶 20% | 13 arquivos com design antigo (step/*, settings, approve/*, documentation/*) |
| Glow Effects | 🔶 0% | Precisa implementar referências visuais (AlphaGPT style) |
| Logo Integration | 🔶 0% | Logo ORION oficial não integrada no sistema |
| YouTube OAuth | 🔶 50% | Loading infinito na conexão |

#### 📋 PRÓXIMOS PASSOS CRÍTICOS
1. **Modernizar Páginas Internas** (step/1-input, step/2-research, step/4-proposal, settings)
   - Substituir zinc-*/gray-* por design tokens
   - Aplicar glow effects e gradientes vibrantes
   - Adicionar micro-interações consistentes

2. **Implementar Visual Identity**
   - Integrar logo ORION oficial em header/sidebar
   - Aplicar glow effects tipo AlphaGPT/Gyanaguru
   - Adicionar connection flow animations

3. **Corrigir Funcionalidades**
   - Resolver YouTube OAuth loading infinito
   - Garantir que settings funcionem de fato
   - Testar todas as integrações

---

## Funcionalidades Concluídas

### Core Features

| Funcionalidade | Status | Prioridade | Impacto |
|----------------|--------|------------|---------|
| Dashboard com Boot Sequence | Concluído | Alta | Alto |
| Workflow de 6 etapas | Concluído | Crítica | Crítico |
| Input de tema e configuração | Concluído | Crítica | Alto |
| Pesquisa com IA | Concluído | Alta | Alto |
| Geração de roteiro | Concluído | Crítica | Crítico |
| Geração de títulos/thumbnails | Concluído | Alta | Alto |
| Geração de descrição e tags | Concluído | Alta | Alto |
| Seleção de trilha sonora | Concluído | Média | Médio |
| Sistema de diretrizes | Concluído | Média | Alto |
| Configuração de API Keys | Concluído | Crítica | Crítico |
| Persistência de estado | Concluído | Alta | Alto |

### Integrações Operacionais

| Integração | Status | Testado |
|------------|--------|---------|
| Anthropic Claude | Operacional | Sim |
| Google Gemini | Operacional | Sim |
| OpenAI GPT-4 | Operacional | Sim |
| Pexels | Operacional | Sim |
| Pixabay | Operacional | Sim |

---

## Funcionalidades Parciais

| Funcionalidade | Progresso | Bloqueio | Prioridade |
|----------------|-----------|----------|------------|
| Upload YouTube | 80% | OAuth config | Alta |
| Render de vídeo | 70% | Integração FFmpeg | Alta |
| TTS (ElevenLabs) | 60% | API quota | Média |
| Storyboard editor | 50% | UX refinement | Média |

---

## Funcionalidades Não Iniciadas

| Funcionalidade | Complexidade | Prioridade | Impacto |
|----------------|--------------|------------|---------|
| Multi-idioma interface | Média | Baixa | Médio |
| Histórico de vídeos | Baixa | Média | Alto |
| Templates de vídeo | Média | Média | Alto |
| Batch processing | Alta | Baixa | Médio |
| Analytics dashboard | Alta | Baixa | Médio |
| Colaboração multi-usuário | Alta | Baixa | Baixo |

---

## Dívidas Técnicas

### Alta Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Error boundaries | Implementar error boundaries em todas as páginas | Estabilidade | Baixo |
| Loading states | Padronizar loading states em todas as operações | UX | Médio |
| Testes E2E | Adicionar testes end-to-end com Playwright | Qualidade | Alto |

### Média Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Code splitting | Otimizar bundle size com lazy loading | Performance | Médio |
| API rate limiting | Implementar rate limiting no frontend | Custo | Médio |
| Retry logic | Melhorar retry logic para falhas de API | Resiliência | Médio |

### Baixa Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| CSS cleanup | Remover estilos não utilizados | Manutenção | Baixo |
| Type coverage | Aumentar coverage de tipos | DX | Médio |
| Documentation | Documentar funções complexas | Manutenção | Médio |

---

## Riscos Conhecidos

### Riscos Técnicos

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| API rate limits | Média | Alto | Cache, retry, fallbacks |
| Custo de APIs | Alta | Médio | Monitoramento, alertas |
| Mudanças em APIs externas | Média | Alto | Versionamento, abstrações |
| Performance em mobile | Baixa | Médio | Testing, otimização |

### Riscos de Negócio

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| Políticas YouTube | Média | Crítico | Compliance, guidelines |
| Competição | Alta | Médio | Inovação, UX |
| Dependência de IAs | Média | Alto | Multi-provider |

---

## Sugestões de Evolução Futura

### Curto Prazo (1-3 meses)

1. **Completar Upload YouTube**
   - Prioridade: Crítica
   - Impacto: Crítico
   - Complexidade: Média

2. **Implementar Render Local**
   - Prioridade: Alta
   - Impacto: Alto
   - Complexidade: Alta

3. **Adicionar Testes**
   - Prioridade: Alta
   - Impacto: Médio
   - Complexidade: Média

### Médio Prazo (3-6 meses)

1. **Templates de Vídeo**
   - Criar biblioteca de templates por nicho
   - Permitir customização de templates
   - Sistema de compartilhamento

2. **Histórico e Analytics**
   - Dashboard de vídeos produzidos
   - Métricas de performance
   - Insights de melhoria

3. **Melhorias de UX**
   - Onboarding interativo
   - Tooltips contextuais
   - Keyboard shortcuts

### Longo Prazo (6-12 meses)

1. **API Pública**
   - Expor funcionalidades via API
   - SDK para integrações
   - Documentação completa

2. **Marketplace de Assets**
   - Trilhas sonoras
   - Templates
   - Vozes TTS

3. **Versão Enterprise**
   - Multi-tenant
   - SSO/SAML
   - SLA garantido

---

## Métricas de Qualidade

### Performance

| Métrica | Atual | Meta |
|---------|-------|------|
| LCP (Largest Contentful Paint) | 1.2s | < 2.5s |
| FID (First Input Delay) | 50ms | < 100ms |
| CLS (Cumulative Layout Shift) | 0.05 | < 0.1 |
| Bundle Size | 450KB | < 500KB |

### Code Quality

| Métrica | Atual | Meta |
|---------|-------|------|
| TypeScript Coverage | 100% | 100% |
| ESLint Errors | 0 | 0 |
| Test Coverage | 0% | > 70% |

---

## Conclusão

O ORION está em estágio de **produção funcional** com as principais features de geração de conteúdo operacionais. Os próximos passos críticos são:

1. Completar a integração de upload YouTube
2. Implementar render de vídeo completo
3. Adicionar cobertura de testes
4. Resolver dívidas técnicas de alta prioridade

O sistema está preparado para escalar e evoluir conforme as necessidades dos usuários.

---

*Este documento reflete o estado atual do ORION e serve como roadmap para decisões de desenvolvimento futuro.*
`;

export const decisionsContent = `# Decisoes Arquiteturais - Claude Code

## Registro de Decisoes de Desenvolvimento

Este documento registra todas as decisoes arquiteturais importantes tomadas durante o desenvolvimento do ORION, incluindo debates, consensos e justificativas tecnicas.

---

## Sessao 1: O Grande Debate Arquitetural (Janeiro 2026)

### Contexto

Necessidade de migrar de localStorage para persistencia real em banco de dados, implementar workflows duraveis para processos longos (renderizacao de video, deep research), e criar sistema de aprovacao humana (human-in-the-loop).

### Participantes do Debate

1. **Claude (Anthropic)** - Posicao: Conservadora e battle-tested. Priorizou estabilidade.
2. **Gemini (Google)** - Posicao: Bleeding edge. Descobriu ToolLoopAgent no AI SDK 6.
3. **ChatGPT (OpenAI)** - Posicao: Validador critico. Confirmou existencia do SDK 6.

### Pontos Criticos Identificados

#### 1. Vercel Functions Timeout
- Limite de 300s (5 min) no Vercel Pro
- Processos como renderizacao podem levar minutos/horas
- Solucao: workflows duraveis externos

#### 2. Vercel Workflow DevKit em Beta
- Embora exista, ainda esta em Public Beta
- Risco de bugs criticos em producao

#### 3. AI SDK Versao Atual
- Projeto usa AI SDK 4.3.19
- Para usar ToolLoopAgent, precisa migrar para v6

### Consenso Unanime: OPCAO B - Arquitetura Hibrida

Apos debate intenso, as tres IAs chegaram a um consenso:

| Camada | Tecnologia | Justificativa |
|--------|------------|---------------|
| Intelligence | AI SDK 6 + ToolLoopAgent | Agentes autonomos com loop de ferramentas |
| Orchestration | Inngest | Durabilidade, retries, sleep nativo |
| Persistence | Vercel Postgres + Prisma | Estado persistente cross-device |
| Storage | Vercel Blob | 1GB incluido no Pro |
| Notifications | Resend | 10K emails/mes gratis |

**Custo Total: $20/mes (Vercel Pro)**

---

## Arquitetura do Pipeline de Video

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│  AI SDK 6 (ToolLoopAgent)          Inngest                      │
│  ┌─────────────────────┐           ┌─────────────────────┐      │
│  │ Research Agent      │──────────>│ step.run()          │      │
│  │ (Gemini 2.0)        │           │ step.sleep()        │      │
│  └─────────────────────┘           │ step.waitForEvent() │      │
│  ┌─────────────────────┐           │ Retry automatico    │      │
│  │ Script Agent        │──────────>│                     │      │
│  │ (Claude 3.5)        │           └─────────────────────┘      │
│  └─────────────────────┘                    │                   │
│                                             ▼                   │
│                        ┌────────────────────────────────────┐   │
│                        │ Vercel Postgres + Blob             │   │
│                        └────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

### Fluxo do Workflow

1. **Deep Research (Gemini)** → Pesquisa trends e referencias
2. **Script Generation (Claude)** → Gera roteiro otimizado
3. **AGUARDAR APROVACAO** → Email + step.waitForEvent('7d')
4. **Storyboard Generation** → Cria cenas com prompts visuais
5. **Render (JSON2VIDEO)** → step.sleep() enquanto renderiza
6. **Upload YouTube** → Com retry automatico

---

## Modelo de Dados (Prisma Schema)

\`\`\`prisma
model Project {
  id          String         @id @default(cuid())
  name        String
  status      ProjectStatus  @default(DRAFT)
  createdAt   DateTime       @default(now())

  // Relacionamentos
  context     Context?
  research    Research?
  script      Script?
  storyboard  Storyboard?
  render      Render?
  upload      Upload?
  workflow    WorkflowState?
}

enum ProjectStatus {
  DRAFT
  RESEARCHING
  SCRIPTING
  AWAITING_APPROVAL
  APPROVED
  RENDERING
  UPLOADING
  COMPLETED
  FAILED
}

model WorkflowState {
  inngestRunId     String?
  currentStep      String
  awaitingApproval Boolean   @default(false)
  approvalToken    String?   @unique
}
\`\`\`

---

## Fases de Implementacao (CONCLUÍDO 23/01/2026)

### FASE 1: Setup & Dependencias ✅
- Ajustado package.json para AI SDK 6
- Instalado inngest, prisma, @prisma/client, resend

### FASE 2: Banco de Dados (Prisma) ✅
- Criado prisma/schema.prisma completo
- Models: Project, Research, Script, Storyboard, Render, Upload, WorkflowState

### FASE 3: Configuracao Inngest ✅
- Criado client (lib/inngest/client.ts)
- Criado API route (app/api/inngest/route.ts)
- Implementado video-pipeline.ts com step.waitForEvent()

### FASE 4: Agentes AI SDK 6 ✅
- Implementados em lib/agents/
- research-agent.ts (Gemini 2.0 Flash)
- script-agent.ts (Claude 3.5 Sonnet)

### FASE 5: Sistema de Aprovacao ✅
- Notificacoes por email (Resend)
- Pagina de aprovacao /approve/[token]
- Paginas de success e feedback-sent

### FASE 6: Frontend (EM PROGRESSO)
- Migracao de localStorage para Prisma
- Integracao com Inngest pipeline

---

## Arquivos Criados

\`\`\`
prisma/schema.prisma
lib/db/prisma.ts
lib/inngest/client.ts
lib/inngest/functions/video-pipeline.ts
lib/agents/research-agent.ts
lib/agents/script-agent.ts
lib/services/research.service.ts
lib/services/script.service.ts
lib/services/storyboard.service.ts
lib/services/render.service.ts
lib/services/upload.service.ts
lib/services/notification.service.ts
app/api/inngest/route.ts
app/api/approve/route.ts
app/approve/[token]/page.tsx
app/approve/success/page.tsx
app/approve/feedback-sent/page.tsx
\`\`\`

---

## Referencias e Fontes

- [AI SDK 6](https://ai-sdk.dev)
- [Inngest Vercel Integration](https://inngest.com/docs/guides/vercel)
- [Prisma Documentation](https://www.prisma.io/docs)
- [Resend API](https://resend.com/docs)

---

*Documento gerado em: 23/01/2026*
*Implementacao concluida: 23/01/2026*
*Participantes: Claude (Anthropic), Gemini (Google), ChatGPT (OpenAI)*
*Deploy: Vercel Pro - https://emergecy-youtube.vercel.app*
`;

```

---
#### `components/documentation/index.ts`

```
// Documentation Module Components
export { default as GenesisTab } from "./GenesisTab";
export { default as SystemVisionTab } from "./SystemVisionTab";
export { default as IntegrationsTab } from "./IntegrationsTab";
export { default as TechStackTab } from "./TechStackTab";
export { default as CurrentStateTab } from "./CurrentStateTab";
export { default as DecisionsTab } from "./DecisionsTab";

// Content exports for Markdown generation
export {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
  decisionsContent,
} from "./content";

```

---
#### `components/proposal/ThumbnailEditor.tsx`

```
"use client";

import { useState } from "react";
import { motion } from "framer-motion";
import {
  Upload,
  Copy,
  RefreshCw,
  Sparkles,
  CheckCircle2,
  AlertCircle,
  Image as ImageIcon,
  Loader2,
} from "lucide-react";
import { TitleThumbnailVariation } from "@/types";
import { cn } from "@/lib/utils";
import Button from "@/components/ui/Button";
import Card from "@/components/ui/Card";

interface ThumbnailEditorProps {
  variations: [
    TitleThumbnailVariation,
    TitleThumbnailVariation,
    TitleThumbnailVariation
  ];
  onVariationUpdate: (index: number, updates: Partial<TitleThumbnailVariation>) => void;
  onGenerateThumbnail: (index: number, prompt: string) => Promise<void>;
  className?: string;
}

export default function ThumbnailEditor({
  variations,
  onVariationUpdate,
  onGenerateThumbnail,
  className,
}: ThumbnailEditorProps) {
  const labels = ["A", "B", "C"];
  const allReady = variations.every((v) => v.isReady);

  return (
    <div className={cn("space-y-6", className)}>
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h3 className="text-xl font-bold text-white">
            Teste A/B/C de Thumbnails
          </h3>
          <p className="text-sm text-gray-400 mt-1">
            Todas as 3 versões serão enviadas para teste no YouTube
          </p>
        </div>

        {/* Status Badge */}
        <div
          className={cn(
            "px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2",
            allReady
              ? "bg-green-500/20 text-green-400"
              : "bg-amber-500/20 text-amber-400"
          )}
        >
          {allReady ? (
            <>
              <CheckCircle2 className="w-4 h-4" />
              Todas prontas
            </>
          ) : (
            <>
              <AlertCircle className="w-4 h-4" />
              {variations.filter((v) => v.isReady).length}/3 prontas
            </>
          )}
        </div>
      </div>

      {/* Grid de Variações */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {variations.map((variation, index) => (
          <ThumbnailVariationCard
            key={variation.id}
            variation={variation}
            label={labels[index]}
            index={index}
            onUpdate={(updates) => onVariationUpdate(index, updates)}
            onGenerate={(prompt) => onGenerateThumbnail(index, prompt)}
          />
        ))}
      </div>

      {/* Aviso */}
      {!allReady && (
        <div className="bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3">
          <AlertCircle className="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" />
          <div className="flex-1">
            <p className="text-amber-400 font-semibold text-sm">
              Complete todas as 3 thumbnails para continuar
            </p>
            <p className="text-amber-400/70 text-xs mt-1">
              O YouTube permite testar até 3 thumbnails simultaneamente para
              descobrir qual performa melhor.
            </p>
          </div>
        </div>
      )}
    </div>
  );
}

interface ThumbnailVariationCardProps {
  variation: TitleThumbnailVariation;
  label: string;
  index: number;
  onUpdate: (updates: Partial<TitleThumbnailVariation>) => void;
  onGenerate: (prompt: string) => Promise<void>;
}

function ThumbnailVariationCard({
  variation,
  label,
  index,
  onUpdate,
  onGenerate,
}: ThumbnailVariationCardProps) {
  const [isGenerating, setIsGenerating] = useState(false);
  const [isUploading, setIsUploading] = useState(false);

  const handleGenerate = async () => {
    setIsGenerating(true);
    try {
      await onGenerate(variation.thumbnailPrompt);
    } finally {
      setIsGenerating(false);
    }
  };

  const handleUpload = async (file: File) => {
    setIsUploading(true);
    try {
      // Implementar upload de arquivo
      // Por agora, simular com setTimeout
      await new Promise((resolve) => setTimeout(resolve, 1000));

      const url = URL.createObjectURL(file);
      onUpdate({
        thumbnailUrl: url,
        isReady: true,
      });
    } finally {
      setIsUploading(false);
    }
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file && file.type.startsWith("image/")) {
      handleUpload(file);
    }
  };

  const copyPrompt = () => {
    navigator.clipboard.writeText(variation.thumbnailPrompt);
  };

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: index * 0.1 }}
    >
      <Card className="p-0 overflow-hidden">
        {/* Header */}
        <div className="bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-gray-800 p-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-cyan-500/50">
                {label}
              </div>
              <div>
                <h4 className="font-semibold text-white">Variação {label}</h4>
                <p className="text-xs text-gray-400">
                  {variation.isReady ? "Pronta" : "Pendente"}
                </p>
              </div>
            </div>

            {variation.isReady && (
              <CheckCircle2 className="w-5 h-5 text-green-500" />
            )}
          </div>
        </div>

        <div className="p-4 space-y-4">
          {/* Título */}
          <div>
            <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
              Título
            </label>
            <input
              type="text"
              value={variation.title}
              onChange={(e) => onUpdate({ title: e.target.value })}
              className="mt-1 w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"
              placeholder="Título chamativo para o vídeo"
            />
          </div>

          {/* Prompt */}
          <div>
            <div className="flex items-center justify-between mb-1">
              <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
                Prompt da Thumbnail
              </label>
              <button
                onClick={copyPrompt}
                className="text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-1"
              >
                <Copy className="w-3 h-3" />
                Copiar
              </button>
            </div>
            <textarea
              value={variation.thumbnailPrompt}
              onChange={(e) => onUpdate({ thumbnailPrompt: e.target.value })}
              rows={3}
              className="w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"
              placeholder="Descreva a thumbnail que deseja gerar com IA..."
            />
          </div>

          {/* Preview da Thumbnail */}
          <div>
            <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2 block">
              Preview
            </label>
            {variation.thumbnailUrl ? (
              <div className="relative aspect-video rounded-lg overflow-hidden bg-gray-900 border border-gray-700">
                <img
                  src={variation.thumbnailUrl}
                  alt={`Thumbnail ${label}`}
                  className="w-full h-full object-cover"
                />
                <button
                  onClick={() => onUpdate({ thumbnailUrl: null, isReady: false })}
                  className="absolute top-2 right-2 p-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors"
                >
                  <RefreshCw className="w-4 h-4 text-white" />
                </button>
              </div>
            ) : (
              <div className="aspect-video rounded-lg bg-gray-900 border-2 border-dashed border-gray-700 flex items-center justify-center">
                <div className="text-center">
                  <ImageIcon className="w-12 h-12 text-gray-600 mx-auto mb-2" />
                  <p className="text-sm text-gray-500">Nenhuma thumbnail</p>
                </div>
              </div>
            )}
          </div>

          {/* Ações */}
          <div className="space-y-2">
            <Button
              onClick={handleGenerate}
              disabled={isGenerating || !variation.thumbnailPrompt}
              className="w-full"
              variant="primary"
            >
              {isGenerating ? (
                <>
                  <Loader2 className="w-4 h-4 animate-spin" />
                  Gerando...
                </>
              ) : (
                <>
                  <Sparkles className="w-4 h-4" />
                  Gerar com IA
                </>
              )}
            </Button>

            <div className="relative">
              <input
                type="file"
                accept="image/*"
                onChange={handleFileChange}
                className="hidden"
                id={`upload-${variation.id}`}
                disabled={isUploading}
              />
              <label
                htmlFor={`upload-${variation.id}`}
                className={cn(
                  "w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all cursor-pointer",
                  isUploading
                    ? "bg-gray-800 text-gray-500 cursor-not-allowed"
                    : "bg-gray-800 hover:bg-gray-700 text-white border border-gray-700"
                )}
              >
                {isUploading ? (
                  <>
                    <Loader2 className="w-4 h-4 animate-spin" />
                    Enviando...
                  </>
                ) : (
                  <>
                    <Upload className="w-4 h-4" />
                    Upload Manual
                  </>
                )}
              </label>
            </div>
          </div>
        </div>
      </Card>
    </motion.div>
  );
}

```

---
#### `components/settings/AppearanceTab.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { Palette, Save, RefreshCw, RotateCcw, Upload, Image as ImageIcon } from 'lucide-react';
import { getBranding, updateBranding, resetBranding } from '@/app/actions/settings';
import { useBrandingStore } from '@/lib/store';
import type { BrandingConfig } from '@/types';

export function AppearanceTab() {
  const [config, setConfig] = useState<BrandingConfig>({
    systemName: 'ORION',
    logoUrl: null,
    updatedAt: new Date().toISOString(),
  });
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [loading, setLoading] = useState(true);

  const { setBranding, resetBranding: resetBrandingStore } = useBrandingStore();

  useEffect(() => {
    loadBranding();
  }, []);

  const loadBranding = async () => {
    setLoading(true);
    try {
      const data = await getBranding();
      setConfig(data);
    } catch (error) {
      console.error('Failed to load branding:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSave = async () => {
    setSaving(true);
    setSuccess(false);

    try {
      const updated = await updateBranding({
        systemName: config.systemName,
        logoUrl: config.logoUrl,
      });

      setConfig(updated);

      // Sync with Zustand store (client-side)
      setBranding(updated.systemName, updated.logoUrl);

      setSuccess(true);
      setTimeout(() => setSuccess(false), 3000);
    } catch (error) {
      console.error('Failed to update branding:', error);
      alert('Erro ao atualizar aparência');
    } finally {
      setSaving(false);
    }
  };

  const handleReset = async () => {
    if (!confirm('Tem certeza que deseja resetar para o padrão ORION?')) {
      return;
    }

    setSaving(true);
    try {
      const defaultConfig = await resetBranding();
      setConfig(defaultConfig);

      // Sync with Zustand store
      resetBrandingStore();

      alert('Branding resetado com sucesso!');
    } catch (error) {
      console.error('Failed to reset branding:', error);
      alert('Erro ao resetar branding');
    } finally {
      setSaving(false);
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-purple-500/10 rounded-lg">
            <Palette className="w-5 h-5 text-purple-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Aparência do Sistema</h2>
            <p className="text-sm text-muted">Personalize o nome e logotipo (White Label)</p>
          </div>
        </div>
        <button
          onClick={handleReset}
          disabled={saving}
          className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-secondary rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <RotateCcw className="w-4 h-4" />
          Resetar Padrão
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Logo Preview */}
        <div className="lg:col-span-1">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-4">Preview do Logo</h3>

            <div className="aspect-square bg-black/50 border-2 border-dashed border-subtle rounded-xl flex items-center justify-center overflow-hidden">
              {config.logoUrl ? (
                <img
                  src={config.logoUrl}
                  alt="Logo"
                  className="w-full h-full object-contain p-4"
                  onError={(e) => {
                    e.currentTarget.src = '';
                    e.currentTarget.style.display = 'none';
                  }}
                />
              ) : (
                <div className="text-center">
                  <ImageIcon className="w-12 h-12 text-disabled mx-auto mb-2" />
                  <p className="text-xs text-muted">Sem logo</p>
                </div>
              )}
            </div>

            <div className="mt-4 p-3 bg-layer-1 border border-subtle rounded-lg">
              <p className="text-xs font-semibold text-muted mb-1">Nome do Sistema:</p>
              <p className="text-lg font-bold text-white">{config.systemName}</p>
            </div>
          </div>
        </div>

        {/* Configuration Form */}
        <div className="lg:col-span-2 space-y-4">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
            {/* System Name */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Nome do Sistema
              </label>
              <input
                type="text"
                value={config.systemName}
                onChange={(e) => setConfig({ ...config, systemName: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all"
                placeholder="Ex: ORION, MyApp, Studio..."
              />
              <p className="text-xs text-muted mt-1">
                Este nome aparecerá na barra lateral e no título da página
              </p>
            </div>

            {/* Logo URL */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                URL do Logotipo
              </label>
              <input
                type="url"
                value={config.logoUrl || ''}
                onChange={(e) => setConfig({ ...config, logoUrl: e.target.value || null })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all"
                placeholder="https://exemplo.com/logo.png"
              />
              <p className="text-xs text-muted mt-1">
                Formatos recomendados: PNG, SVG (fundo transparente)
              </p>
            </div>

            {/* Info Box */}
            <div className="bg-purple-500/10 border border-purple-500/30 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <Upload className="w-5 h-5 text-purple-400 flex-shrink-0 mt-0.5" />
                <div>
                  <h4 className="text-sm font-semibold text-purple-300 mb-1">
                    Como fazer upload do logo
                  </h4>
                  <ul className="text-xs text-purple-200/80 space-y-1">
                    <li>• Use um serviço como Imgur, Cloudinary ou GitHub</li>
                    <li>• Para GitHub: suba a imagem e copie o link &quot;raw&quot;</li>
                    <li>• Tamanho recomendado: 512x512px ou maior</li>
                    <li>• Deixe em branco para usar o logo padrão</li>
                  </ul>
                </div>
              </div>
            </div>

            {/* Save Button */}
            <div className="flex items-center justify-between pt-4 border-t border-subtle">
              <div className="text-xs text-muted">
                Última atualização:{' '}
                {new Date(config.updatedAt).toLocaleString('pt-BR')}
              </div>
              <button
                onClick={handleSave}
                disabled={saving}
                className="px-6 py-2.5 bg-purple-600 hover:bg-purple-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {saving ? (
                  <>
                    <RefreshCw className="w-4 h-4 animate-spin" />
                    Salvando...
                  </>
                ) : success ? (
                  <>
                    <Save className="w-4 h-4" />
                    Salvo!
                  </>
                ) : (
                  <>
                    <Save className="w-4 h-4" />
                    Salvar Alterações
                  </>
                )}
              </button>
            </div>
          </div>

          {/* Additional Info */}
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <ImageIcon className="w-4 h-4 text-muted" />
              Sistema White Label
            </h3>
            <p className="text-sm text-muted leading-relaxed">
              Com o sistema White Label, você pode personalizar completamente a identidade visual do ORION.
              Altere o nome do sistema e o logotipo para refletir sua marca. As mudanças são aplicadas
              automaticamente em toda a interface, incluindo a barra lateral, título da página e metadados.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/DocsManagerTab.tsx`

```
"use client";

import { useState } from 'react';
import { FileText, Plus, Edit2, Trash2, Eye, EyeOff, Save, X } from 'lucide-react';
import { createDocPage, updateDocPage, deleteDocPage } from '@/app/actions/settings';
import type { DocPage, DocCategory } from '@/types';

interface DocsManagerTabProps {
  initialDocs: DocPage[];
  onUpdate: () => void;
}

const CATEGORIES: { value: DocCategory; label: string }[] = [
  { value: 'getting-started', label: 'Primeiros Passos' },
  { value: 'features', label: 'Recursos' },
  { value: 'api', label: 'API' },
  { value: 'guides', label: 'Guias' },
  { value: 'changelog', label: 'Changelog' },
];

export function DocsManagerTab({ initialDocs, onUpdate }: DocsManagerTabProps) {
  const [docs, setDocs] = useState(initialDocs);
  const [isCreating, setIsCreating] = useState(false);
  const [editingId, setEditingId] = useState<string | null>(null);
  const [formData, setFormData] = useState<Partial<DocPage>>({
    title: '',
    category: 'getting-started',
    content: '',
    visible: true,
    order: 1,
  });

  const handleCreate = async () => {
    try {
      const newDoc = await createDocPage({
        title: formData.title || 'Sem título',
        category: formData.category as DocCategory,
        content: formData.content || '',
        visible: formData.visible ?? true,
        order: formData.order ?? docs.length + 1,
      });

      setDocs([...docs, newDoc]);
      setIsCreating(false);
      setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
      onUpdate();
    } catch (error) {
      console.error('Failed to create doc:', error);
      alert('Erro ao criar documento');
    }
  };

  const handleUpdate = async (id: string) => {
    try {
      const updated = await updateDocPage(id, formData);
      if (updated) {
        setDocs(docs.map(doc => doc.id === id ? updated : doc));
        setEditingId(null);
        setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to update doc:', error);
      alert('Erro ao atualizar documento');
    }
  };

  const handleDelete = async (id: string) => {
    if (!confirm('Tem certeza que deseja excluir este documento?')) return;

    try {
      const success = await deleteDocPage(id);
      if (success) {
        setDocs(docs.filter(doc => doc.id !== id));
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to delete doc:', error);
      alert('Erro ao excluir documento');
    }
  };

  const handleToggleVisibility = async (doc: DocPage) => {
    try {
      const updated = await updateDocPage(doc.id, { visible: !doc.visible });
      if (updated) {
        setDocs(docs.map(d => d.id === doc.id ? updated : d));
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to toggle visibility:', error);
    }
  };

  const startEdit = (doc: DocPage) => {
    setEditingId(doc.id);
    setFormData({
      title: doc.title,
      category: doc.category,
      content: doc.content,
      visible: doc.visible,
      order: doc.order,
    });
  };

  const cancelEdit = () => {
    setEditingId(null);
    setIsCreating(false);
    setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-amber-500/10 rounded-lg">
            <FileText className="w-5 h-5 text-amber-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Gerenciador de Documentação</h2>
            <p className="text-sm text-muted">Crie e edite páginas de documentação</p>
          </div>
        </div>
        <button
          onClick={() => setIsCreating(true)}
          className="px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95"
        >
          <Plus className="w-4 h-4" />
          Nova Página
        </button>
      </div>

      {/* Create/Edit Form */}
      {(isCreating || editingId) && (
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-white">
              {isCreating ? 'Criar Nova Página' : 'Editar Página'}
            </h3>
            <button
              onClick={cancelEdit}
              className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
            >
              <X className="w-5 h-5 text-muted" />
            </button>
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">Título</label>
              <input
                type="text"
                value={formData.title}
                onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white"
                placeholder="Título da página"
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">Categoria</label>
              <select
                value={formData.category}
                onChange={(e) => setFormData({ ...formData, category: e.target.value as DocCategory })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white"
              >
                {CATEGORIES.map(cat => (
                  <option key={cat.value} value={cat.value}>{cat.label}</option>
                ))}
              </select>
            </div>
          </div>

          <div>
            <label className="block text-sm font-medium text-secondary mb-2">Conteúdo (Markdown)</label>
            <textarea
              value={formData.content}
              onChange={(e) => setFormData({ ...formData, content: e.target.value })}
              rows={10}
              className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white font-mono text-sm resize-none"
              placeholder="# Título\n\nConteúdo em markdown..."
            />
          </div>

          <div className="flex items-center justify-between">
            <label className="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                checked={formData.visible}
                onChange={(e) => setFormData({ ...formData, visible: e.target.checked })}
                className="w-4 h-4 rounded border-subtle text-amber-600 focus:ring-amber-500"
              />
              <span className="text-sm text-secondary">Visível no menu de documentação</span>
            </label>

            <button
              onClick={() => editingId ? handleUpdate(editingId) : handleCreate()}
              className="px-6 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95"
            >
              <Save className="w-4 h-4" />
              {isCreating ? 'Criar' : 'Salvar'}
            </button>
          </div>
        </div>
      )}

      {/* Docs List */}
      <div className="grid grid-cols-1 gap-3">
        {docs.map((doc) => (
          <div
            key={doc.id}
            className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:border-subtle transition-all"
          >
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3 flex-1 min-w-0">
                <div className={`p-2 rounded-lg ${doc.visible ? 'bg-green-500/10' : 'bg-layer-2'}`}>
                  {doc.visible ? (
                    <Eye className="w-4 h-4 text-green-500" />
                  ) : (
                    <EyeOff className="w-4 h-4 text-muted" />
                  )}
                </div>
                <div className="flex-1 min-w-0">
                  <h4 className="font-semibold text-white truncate">{doc.title}</h4>
                  <div className="flex items-center gap-2 text-xs text-muted">
                    <span>{CATEGORIES.find(c => c.value === doc.category)?.label}</span>
                    <span>•</span>
                    <span>Ordem: {doc.order}</span>
                  </div>
                </div>
              </div>
              <div className="flex items-center gap-2">
                <button
                  onClick={() => handleToggleVisibility(doc)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                  title={doc.visible ? 'Ocultar' : 'Mostrar'}
                >
                  {doc.visible ? (
                    <Eye className="w-4 h-4 text-muted" />
                  ) : (
                    <EyeOff className="w-4 h-4 text-muted" />
                  )}
                </button>
                <button
                  onClick={() => startEdit(doc)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                >
                  <Edit2 className="w-4 h-4 text-blue-400" />
                </button>
                <button
                  onClick={() => handleDelete(doc.id)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                >
                  <Trash2 className="w-4 h-4 text-red-400" />
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

```

---
#### `components/settings/FilesTab.tsx`

```
"use client";

import React, { useState, useEffect, useRef } from 'react';
import {
  FolderOpen,
  File,
  RefreshCw,
  ChevronRight,
  FileText,
  FolderClosed,
  Upload,
  Image as ImageIcon,
  Video,
  Music,
  Archive,
  ExternalLink,
  AlertCircle,
  Cloud,
} from 'lucide-react';
import type { DirectoryListing, FileEntry } from '@/types';

export function FilesTab() {
  const [listing, setListing] = useState<DirectoryListing | null>(null);
  const [loading, setLoading] = useState(true);
  const [currentPath, setCurrentPath] = useState('');
  const [uploading, setUploading] = useState(false);
  const [uploadError, setUploadError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    loadDirectory(currentPath);
  }, [currentPath]);

  const loadDirectory = async (path: string) => {
    setLoading(true);
    try {
      const response = await fetch(`/api/files/list?path=${encodeURIComponent(path)}`);
      if (response.ok) {
        const data = await response.json();
        setListing(data);
      } else {
        console.error('Failed to load directory');
      }
    } catch (error) {
      console.error('Error loading directory:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;

    setUploading(true);
    setUploadError(null);

    try {
      const formData = new FormData();
      formData.append('file', file);
      if (currentPath) {
        formData.append('folder', currentPath);
      }

      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error || 'Upload failed');
      }

      // Refresh the listing after upload
      await loadDirectory(currentPath);
    } catch (error) {
      console.error('Upload error:', error);
      setUploadError(error instanceof Error ? error.message : 'Erro ao fazer upload');
    } finally {
      setUploading(false);
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    }
  };

  const handleDownload = (file: FileEntry) => {
    if (file.type === 'directory' || !file.url) return;

    // Open URL directly for Vercel Blob files
    window.open(file.url, '_blank');
  };

  const handleNavigate = (file: FileEntry) => {
    if (file.type === 'directory') {
      setCurrentPath(file.path);
    }
  };

  const handleGoUp = () => {
    const parts = currentPath.split('/').filter(Boolean);
    parts.pop();
    setCurrentPath(parts.join('/'));
  };

  const formatBytes = (bytes?: number): string => {
    if (!bytes) return '—';
    const kb = bytes / 1024;
    if (kb < 1024) return `${kb.toFixed(2)} KB`;
    const mb = kb / 1024;
    if (mb < 1024) return `${mb.toFixed(2)} MB`;
    const gb = mb / 1024;
    return `${gb.toFixed(2)} GB`;
  };

  const formatDate = (dateString?: string): string => {
    if (!dateString) return '—';
    return new Date(dateString).toLocaleString('pt-BR');
  };

  const getFileIcon = (entry: FileEntry) => {
    if (entry.type === 'directory') {
      return <FolderClosed className="w-5 h-5 text-yellow-500" />;
    }

    const ext = entry.name.split('.').pop()?.toLowerCase();
    const iconMap: Record<string, React.ReactElement> = {
      // Documents
      json: <FileText className="w-5 h-5 text-blue-400" />,
      txt: <FileText className="w-5 h-5 text-muted" />,
      csv: <FileText className="w-5 h-5 text-green-400" />,
      xml: <FileText className="w-5 h-5 text-orange-400" />,
      md: <FileText className="w-5 h-5 text-purple-400" />,
      pdf: <FileText className="w-5 h-5 text-red-400" />,
      // Images
      jpg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      jpeg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      png: <ImageIcon className="w-5 h-5 text-pink-400" />,
      gif: <ImageIcon className="w-5 h-5 text-pink-400" />,
      webp: <ImageIcon className="w-5 h-5 text-pink-400" />,
      svg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      // Video
      mp4: <Video className="w-5 h-5 text-cyan-400" />,
      webm: <Video className="w-5 h-5 text-cyan-400" />,
      mov: <Video className="w-5 h-5 text-cyan-400" />,
      // Audio
      mp3: <Music className="w-5 h-5 text-emerald-400" />,
      wav: <Music className="w-5 h-5 text-emerald-400" />,
      ogg: <Music className="w-5 h-5 text-emerald-400" />,
      // Archives
      zip: <Archive className="w-5 h-5 text-amber-400" />,
      tar: <Archive className="w-5 h-5 text-amber-400" />,
      gz: <Archive className="w-5 h-5 text-amber-400" />,
    };

    return iconMap[ext || ''] || <File className="w-5 h-5 text-muted" />;
  };

  if (loading && !listing) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-orange-500/10 rounded-lg">
            <Cloud className="w-5 h-5 text-orange-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Gerenciador de Arquivos</h2>
            <p className="text-sm text-muted">
              Vercel Blob Storage - Arquivos do projeto
            </p>
          </div>
        </div>

        <div className="flex items-center gap-3">
          {/* Upload Button */}
          <button
            onClick={() => fileInputRef.current?.click()}
            disabled={uploading}
            className="px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            {uploading ? (
              <RefreshCw className="w-4 h-4 animate-spin" />
            ) : (
              <Upload className="w-4 h-4" />
            )}
            Upload
          </button>

          <input
            ref={fileInputRef}
            type="file"
            onChange={handleFileUpload}
            className="hidden"
          />

          {/* Refresh Button */}
          <button
            onClick={() => loadDirectory(currentPath)}
            disabled={loading}
            className="px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
        </div>
      </div>

      {/* Upload Error */}
      {uploadError && (
        <div className="p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400 text-sm">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span>{uploadError}</span>
        </div>
      )}

      {/* Status Message */}
      {listing?.message && (
        <div className="p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg flex items-center gap-2 text-amber-400 text-sm">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span>{listing.message}</span>
        </div>
      )}

      {/* Stats */}
      {listing && (
        <div className="grid grid-cols-3 gap-4">
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Total de Arquivos</p>
            <p className="text-2xl font-bold text-white">{listing.totalFiles || 0}</p>
          </div>
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Tamanho Total</p>
            <p className="text-2xl font-bold text-white">{formatBytes(listing.totalSize)}</p>
          </div>
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Nesta Pasta</p>
            <p className="text-2xl font-bold text-white">{listing.entries.length}</p>
          </div>
        </div>
      )}

      {/* Breadcrumb */}
      <div className="flex items-center gap-2 text-sm">
        <FolderOpen className="w-4 h-4 text-muted" />
        <button
          onClick={() => setCurrentPath('')}
          className="text-orange-400 hover:text-orange-300 transition-colors"
        >
          root
        </button>
        {currentPath.split('/').filter(Boolean).map((part, index, arr) => (
          <div key={index} className="flex items-center gap-2">
            <ChevronRight className="w-4 h-4 text-disabled" />
            <button
              onClick={() => {
                const newPath = arr.slice(0, index + 1).join('/');
                setCurrentPath(newPath);
              }}
              className="text-orange-400 hover:text-orange-300 transition-colors"
            >
              {part}
            </button>
          </div>
        ))}
      </div>

      {/* File List */}
      <div className="bg-layer-1/50 border border-subtle rounded-xl overflow-hidden">
        {/* Header */}
        <div className="grid grid-cols-12 gap-4 px-6 py-3 bg-zinc-950/50 border-b border-subtle text-xs font-medium text-muted">
          <div className="col-span-6">Nome</div>
          <div className="col-span-2">Tamanho</div>
          <div className="col-span-3">Modificado</div>
          <div className="col-span-1 text-right">Ação</div>
        </div>

        {/* Entries */}
        <div className="divide-y divide-zinc-800">
          {/* Go Up Button */}
          {currentPath && (
            <button
              onClick={handleGoUp}
              className="w-full grid grid-cols-12 gap-4 px-6 py-3 hover:bg-layer-2/50 transition-colors text-left"
            >
              <div className="col-span-6 flex items-center gap-3">
                <FolderClosed className="w-5 h-5 text-muted" />
                <span className="text-muted">..</span>
              </div>
              <div className="col-span-5 text-sm text-muted">Voltar</div>
            </button>
          )}

          {listing?.entries.map((entry, index) => (
            <div
              key={index}
              className="grid grid-cols-12 gap-4 px-6 py-3 hover:bg-layer-2/50 transition-colors group"
            >
              {/* Name */}
              <button
                onClick={() => entry.type === 'directory' ? handleNavigate(entry) : null}
                className="col-span-6 flex items-center gap-3 text-left"
              >
                {getFileIcon(entry)}
                <span className="text-white font-medium truncate group-hover:text-orange-400 transition-colors">
                  {entry.name}
                </span>
              </button>

              {/* Size */}
              <div className="col-span-2 flex items-center text-sm text-muted">
                {formatBytes(entry.size)}
              </div>

              {/* Modified Date */}
              <div className="col-span-3 flex items-center text-sm text-muted">
                {formatDate(entry.modifiedAt)}
              </div>

              {/* Action */}
              <div className="col-span-1 flex items-center justify-end">
                {entry.type === 'file' && entry.url && (
                  <button
                    onClick={() => handleDownload(entry)}
                    className="p-2 hover:bg-orange-600/20 rounded-lg transition-colors"
                    title="Abrir/Baixar arquivo"
                  >
                    <ExternalLink className="w-4 h-4 text-orange-400" />
                  </button>
                )}
              </div>
            </div>
          ))}

          {listing?.entries.length === 0 && (
            <div className="px-6 py-12 text-center">
              <Cloud className="w-12 h-12 text-disabled mx-auto mb-3" />
              <p className="text-muted">Nenhum arquivo encontrado</p>
              <p className="text-disabled text-sm mt-1">
                Faça upload de arquivos para começar
              </p>
            </div>
          )}
        </div>
      </div>

      {/* Info */}
      <div className="bg-orange-500/10 border border-orange-500/30 rounded-lg p-4">
        <div className="flex items-start gap-3">
          <Cloud className="w-5 h-5 text-orange-400 flex-shrink-0 mt-0.5" />
          <div>
            <h4 className="text-sm font-semibold text-orange-300 mb-1">
              Vercel Blob Storage
            </h4>
            <p className="text-xs text-orange-200/80">
              Os arquivos são armazenados no Vercel Blob, um serviço de armazenamento
              de objetos integrado ao Vercel. Faça upload de imagens, vídeos, documentos
              e outros arquivos para usar em seus projetos.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/IntegrationsTab.tsx`

```
"use client";

import { useState } from 'react';
import { Github, Globe, Save, Trash2, CheckCircle2, XCircle, RefreshCw } from 'lucide-react';
import { saveGitHubTokens, saveVercelTokens, removeGitHubTokensAction, removeVercelTokensAction } from '@/app/actions/settings';
import { testGitHubConnection } from '@/app/actions/github';
import { testVercelConnection } from '@/app/actions/vercel';
import type { IntegrationTokens } from '@/types';

interface IntegrationsTabProps {
  initialTokens: IntegrationTokens;
  onUpdate: () => void;
}

export function IntegrationsTab({ initialTokens, onUpdate }: IntegrationsTabProps) {
  const [tokens, setTokens] = useState(initialTokens);
  const [githubForm, setGithubForm] = useState({
    token: tokens.github?.token || '',
    owner: tokens.github?.owner || '',
    repo: tokens.github?.repo || '',
  });
  const [vercelForm, setVercelForm] = useState({
    token: tokens.vercel?.token || '',
    projectId: tokens.vercel?.projectId || '',
  });
  const [testing, setTesting] = useState<'github' | 'vercel' | null>(null);
  const [testResults, setTestResults] = useState<{
    github?: { success: boolean; error?: string };
    vercel?: { success: boolean; error?: string };
  }>({});

  const handleSaveGitHub = async () => {
    try {
      const updated = await saveGitHubTokens(
        githubForm.token,
        githubForm.owner,
        githubForm.repo
      );
      setTokens(updated);
      onUpdate();
      alert('Integração GitHub salva com sucesso!');
    } catch (error) {
      console.error('Failed to save GitHub tokens:', error);
      alert('Erro ao salvar integração GitHub');
    }
  };

  const handleSaveVercel = async () => {
    try {
      const updated = await saveVercelTokens(
        vercelForm.token,
        vercelForm.projectId
      );
      setTokens(updated);
      onUpdate();
      alert('Integração Vercel salva com sucesso!');
    } catch (error) {
      console.error('Failed to save Vercel tokens:', error);
      alert('Erro ao salvar integração Vercel');
    }
  };

  const handleRemoveGitHub = async () => {
    if (!confirm('Tem certeza que deseja remover a integração GitHub?')) return;

    try {
      const updated = await removeGitHubTokensAction();
      setTokens(updated);
      setGithubForm({ token: '', owner: '', repo: '' });
      setTestResults({ ...testResults, github: undefined });
      onUpdate();
    } catch (error) {
      console.error('Failed to remove GitHub tokens:', error);
      alert('Erro ao remover integração GitHub');
    }
  };

  const handleRemoveVercel = async () => {
    if (!confirm('Tem certeza que deseja remover a integração Vercel?')) return;

    try {
      const updated = await removeVercelTokensAction();
      setTokens(updated);
      setVercelForm({ token: '', projectId: '' });
      setTestResults({ ...testResults, vercel: undefined });
      onUpdate();
    } catch (error) {
      console.error('Failed to remove Vercel tokens:', error);
      alert('Erro ao remover integração Vercel');
    }
  };

  const handleTestGitHub = async () => {
    setTesting('github');
    try {
      const result = await testGitHubConnection();
      setTestResults({ ...testResults, github: result });
    } catch {
      setTestResults({
        ...testResults,
        github: { success: false, error: 'Erro ao testar conexão' },
      });
    } finally {
      setTesting(null);
    }
  };

  const handleTestVercel = async () => {
    setTesting('vercel');
    try {
      const result = await testVercelConnection();
      setTestResults({ ...testResults, vercel: result });
    } catch {
      setTestResults({
        ...testResults,
        vercel: { success: false, error: 'Erro ao testar conexão' },
      });
    } finally {
      setTesting(null);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center gap-3 pb-4 border-b border-subtle">
        <div className="p-2 bg-blue-500/10 rounded-lg">
          <Globe className="w-5 h-5 text-blue-500" />
        </div>
        <div>
          <h2 className="text-xl font-bold text-white">Integrações & Tokens</h2>
          <p className="text-sm text-muted">Configure APIs para logs e automação</p>
        </div>
      </div>

      <div className="space-y-6">
        {/* GitHub Integration */}
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-2 bg-layer-2 rounded-lg">
              <Github className="w-5 h-5 text-white" />
            </div>
            <div className="flex-1">
              <h3 className="font-semibold text-white">GitHub</h3>
              <p className="text-xs text-muted">Para logs de commits e changelog automático</p>
            </div>
            {tokens.github && (
              <span className="px-2 py-1 bg-green-500/10 text-green-400 text-xs rounded-full flex items-center gap-1">
                <CheckCircle2 className="w-3 h-3" />
                Configurado
              </span>
            )}
          </div>

          <div className="space-y-3">
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Token</label>
              <input
                type="password"
                value={githubForm.token}
                onChange={(e) => setGithubForm({ ...githubForm, token: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="ghp_..."
              />
            </div>
            <div className="grid grid-cols-2 gap-3">
              <div>
                <label className="block text-sm font-medium text-secondary mb-1">Owner</label>
                <input
                  type="text"
                  value={githubForm.owner}
                  onChange={(e) => setGithubForm({ ...githubForm, owner: e.target.value })}
                  className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                  placeholder="username"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-secondary mb-1">Repositório</label>
                <input
                  type="text"
                  value={githubForm.repo}
                  onChange={(e) => setGithubForm({ ...githubForm, repo: e.target.value })}
                  className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                  placeholder="repository-name"
                />
              </div>
            </div>

            {testResults.github && (
              <div className={`p-3 rounded-lg flex items-center gap-2 text-sm ${testResults.github.success ? 'bg-green-500/10 text-green-400' : 'bg-red-500/10 text-red-400'}`}>
                {testResults.github.success ? (
                  <><CheckCircle2 className="w-4 h-4" /> Conexão bem-sucedida!</>
                ) : (
                  <><XCircle className="w-4 h-4" /> {testResults.github.error}</>
                )}
              </div>
            )}

            <div className="flex gap-2">
              <button
                onClick={handleTestGitHub}
                disabled={testing === 'github' || !tokens.github}
                className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
              >
                {testing === 'github' ? (
                  <><RefreshCw className="w-4 h-4 animate-spin" /> Testando...</>
                ) : (
                  <>Testar Conexão</>
                )}
              </button>
              <button
                onClick={handleSaveGitHub}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm flex items-center gap-2 transition-all"
              >
                <Save className="w-4 h-4" />
                Salvar
              </button>
              {tokens.github && (
                <button
                  onClick={handleRemoveGitHub}
                  className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
                >
                  <Trash2 className="w-4 h-4" />
                  Remover
                </button>
              )}
            </div>
          </div>
        </div>

        {/* Vercel Integration */}
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-2 bg-layer-2 rounded-lg">
              <svg className="w-5 h-5 text-white" viewBox="0 0 76 76" fill="currentColor">
                <path d="M38 0L76 66H0L38 0z" />
              </svg>
            </div>
            <div className="flex-1">
              <h3 className="font-semibold text-white">Vercel</h3>
              <p className="text-xs text-muted">Para logs de deployments</p>
            </div>
            {tokens.vercel && (
              <span className="px-2 py-1 bg-green-500/10 text-green-400 text-xs rounded-full flex items-center gap-1">
                <CheckCircle2 className="w-3 h-3" />
                Configurado
              </span>
            )}
          </div>

          <div className="space-y-3">
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Token</label>
              <input
                type="password"
                value={vercelForm.token}
                onChange={(e) => setVercelForm({ ...vercelForm, token: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="v1_..."
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Project ID</label>
              <input
                type="text"
                value={vercelForm.projectId}
                onChange={(e) => setVercelForm({ ...vercelForm, projectId: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="prj_..."
              />
            </div>

            {testResults.vercel && (
              <div className={`p-3 rounded-lg flex items-center gap-2 text-sm ${testResults.vercel.success ? 'bg-green-500/10 text-green-400' : 'bg-red-500/10 text-red-400'}`}>
                {testResults.vercel.success ? (
                  <><CheckCircle2 className="w-4 h-4" /> Conexão bem-sucedida!</>
                ) : (
                  <><XCircle className="w-4 h-4" /> {testResults.vercel.error}</>
                )}
              </div>
            )}

            <div className="flex gap-2">
              <button
                onClick={handleTestVercel}
                disabled={testing === 'vercel' || !tokens.vercel}
                className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
              >
                {testing === 'vercel' ? (
                  <><RefreshCw className="w-4 h-4 animate-spin" /> Testando...</>
                ) : (
                  <>Testar Conexão</>
                )}
              </button>
              <button
                onClick={handleSaveVercel}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm flex items-center gap-2 transition-all"
              >
                <Save className="w-4 h-4" />
                Salvar
              </button>
              {tokens.vercel && (
                <button
                  onClick={handleRemoveVercel}
                  className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
                >
                  <Trash2 className="w-4 h-4" />
                  Remover
                </button>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/LogsTab.tsx`

```
"use client";

import { useState, useEffect, useCallback } from 'react';
import { Terminal, GitCommit, Globe, Search, Trash2, RefreshCw, AlertCircle, CheckCircle2, Info, AlertTriangle } from 'lucide-react';
import { getLogs, clearLogs, searchSystemLogs } from '@/app/actions/settings';
import { fetchGitHubCommits } from '@/app/actions/github';
import { fetchVercelDeployments } from '@/app/actions/vercel';
import type { SystemLog, GitHubCommit, VercelDeployment, LogLevel } from '@/types';

type LogsTabView = 'system' | 'git' | 'vercel';

export function LogsTab() {
  const [activeView, setActiveView] = useState<LogsTabView>('system');
  const [systemLogs, setSystemLogs] = useState<SystemLog[]>([]);
  const [gitCommits, setGitCommits] = useState<GitHubCommit[]>([]);
  const [vercelDeployments, setVercelDeployments] = useState<VercelDeployment[]>([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const loadData = useCallback(async () => {
    setLoading(true);
    setError(null);

    try {
      if (activeView === 'system') {
        const logs = await getLogs(100);
        setSystemLogs(logs);
      } else if (activeView === 'git') {
        const { commits, error } = await fetchGitHubCommits(50);
        if (error) {
          setError(error);
        } else {
          setGitCommits(commits);
        }
      } else if (activeView === 'vercel') {
        const { deployments, error } = await fetchVercelDeployments(50);
        if (error) {
          setError(error);
        } else {
          setVercelDeployments(deployments);
        }
      }
    } catch (err) {
      console.error('Failed to load logs:', err);
      setError(err instanceof Error ? err.message : 'Erro ao carregar dados');
    } finally {
      setLoading(false);
    }
  }, [activeView]);

  useEffect(() => {
    loadData();
  }, [loadData]);

  const handleSearch = async () => {
    if (!searchQuery.trim() || activeView !== 'system') return;

    setLoading(true);
    try {
      const results = await searchSystemLogs(searchQuery);
      setSystemLogs(results);
    } catch (err) {
      console.error('Search failed:', err);
    } finally {
      setLoading(false);
    }
  };

  const handleClearLogs = async () => {
    if (!confirm('Tem certeza que deseja limpar todos os logs do sistema?')) return;

    try {
      await clearLogs();
      setSystemLogs([]);
      alert('Logs limpos com sucesso!');
    } catch (err) {
      console.error('Failed to clear logs:', err);
      alert('Erro ao limpar logs');
    }
  };

  const handleClearSearch = () => {
    setSearchQuery('');
    loadData();
  };

  const getLogLevelStyles = (level: LogLevel) => {
    switch (level) {
      case 'error':
        return {
          bg: 'bg-red-500/10',
          text: 'text-red-400',
          border: 'border-red-500/20',
          icon: AlertCircle,
        };
      case 'warning':
        return {
          bg: 'bg-amber-500/10',
          text: 'text-amber-400',
          border: 'border-amber-500/20',
          icon: AlertTriangle,
        };
      case 'success':
        return {
          bg: 'bg-green-500/10',
          text: 'text-green-400',
          border: 'border-green-500/20',
          icon: CheckCircle2,
        };
      default:
        return {
          bg: 'bg-blue-500/10',
          text: 'text-blue-400',
          border: 'border-blue-500/20',
          icon: Info,
        };
    }
  };

  const getDeploymentStateStyles = (state: string) => {
    switch (state) {
      case 'READY':
        return {
          bg: 'bg-green-500/10',
          text: 'text-green-400',
          label: 'Pronto',
        };
      case 'ERROR':
        return {
          bg: 'bg-red-500/10',
          text: 'text-red-400',
          label: 'Erro',
        };
      case 'BUILDING':
        return {
          bg: 'bg-blue-500/10',
          text: 'text-blue-400',
          label: 'Construindo',
        };
      case 'QUEUED':
        return {
          bg: 'bg-amber-500/10',
          text: 'text-amber-400',
          label: 'Na Fila',
        };
      default:
        return {
          bg: 'bg-zinc-500/10',
          text: 'text-muted',
          label: state,
        };
    }
  };

  const formatTimestamp = (timestamp: string | number) => {
    const date = typeof timestamp === 'number' ? new Date(timestamp) : new Date(timestamp);
    return new Intl.DateTimeFormat('pt-BR', {
      day: '2-digit',
      month: 'short',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
    }).format(date);
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-emerald-500/10 rounded-lg">
            <Terminal className="w-5 h-5 text-emerald-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Logs & Atividades</h2>
            <p className="text-sm text-muted">Monitore o sistema, commits e deployments</p>
          </div>
        </div>
        <div className="flex items-center gap-2">
          <button
            onClick={loadData}
            disabled={loading}
            className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
          {activeView === 'system' && systemLogs.length > 0 && (
            <button
              onClick={handleClearLogs}
              className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
            >
              <Trash2 className="w-4 h-4" />
              Limpar Logs
            </button>
          )}
        </div>
      </div>

      {/* Tabs */}
      <div className="flex gap-2 border-b border-subtle">
        <button
          onClick={() => setActiveView('system')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'system'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <Terminal className="w-4 h-4" />
            Logs do Sistema
          </div>
          {activeView === 'system' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
        <button
          onClick={() => setActiveView('git')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'git'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <GitCommit className="w-4 h-4" />
            Commits GitHub
          </div>
          {activeView === 'git' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
        <button
          onClick={() => setActiveView('vercel')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'vercel'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <Globe className="w-4 h-4" />
            Deployments Vercel
          </div>
          {activeView === 'vercel' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
      </div>

      {/* Search Bar (System Logs only) */}
      {activeView === 'system' && (
        <div className="flex gap-2">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted" />
            <input
              type="text"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              onKeyDown={(e) => e.key === 'Enter' && handleSearch()}
              placeholder="Pesquisar nos logs..."
              className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 pl-10 pr-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-emerald-500"
            />
          </div>
          <button
            onClick={handleSearch}
            disabled={!searchQuery.trim() || loading}
            className="px-4 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Buscar
          </button>
          {searchQuery && (
            <button
              onClick={handleClearSearch}
              className="px-4 py-2.5 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg transition-all"
            >
              Limpar
            </button>
          )}
        </div>
      )}

      {/* Error Message */}
      {error && (
        <div className="bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-start gap-3">
          <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0 mt-0.5" />
          <div>
            <h4 className="text-sm font-semibold text-red-400 mb-1">Erro ao carregar dados</h4>
            <p className="text-sm text-red-300">{error}</p>
          </div>
        </div>
      )}

      {/* Loading State */}
      {loading && (
        <div className="flex items-center justify-center py-12">
          <div className="flex items-center gap-3 text-muted">
            <RefreshCw className="w-5 h-5 animate-spin" />
            <span>Carregando...</span>
          </div>
        </div>
      )}

      {/* Content */}
      {!loading && (
        <>
          {/* System Logs View */}
          {activeView === 'system' && (
            <div className="space-y-2">
              {systemLogs.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <Terminal className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum log encontrado</p>
                </div>
              ) : (
                systemLogs.map((log) => {
                  const styles = getLogLevelStyles(log.level);
                  const Icon = styles.icon;

                  return (
                    <div
                      key={log.id}
                      className={`bg-layer-1/50 border ${styles.border} rounded-lg p-4 hover:bg-layer-1 transition-all`}
                    >
                      <div className="flex items-start gap-3">
                        <div className={`p-2 ${styles.bg} rounded-lg flex-shrink-0`}>
                          <Icon className={`w-4 h-4 ${styles.text}`} />
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 mb-1">
                            <span className={`px-2 py-0.5 ${styles.bg} ${styles.text} text-xs font-medium rounded uppercase`}>
                              {log.level}
                            </span>
                            <span className="px-2 py-0.5 bg-layer-2 text-muted text-xs rounded">
                              {log.source}
                            </span>
                            <span className="text-xs text-muted">
                              {formatTimestamp(log.timestamp)}
                            </span>
                          </div>
                          <p className="text-sm text-white">{log.message}</p>
                          {log.details && Object.keys(log.details).length > 0 && (
                            <div className="mt-2 p-2 bg-black/30 rounded border border-subtle">
                              <pre className="text-xs text-muted font-mono overflow-x-auto">
                                {JSON.stringify(log.details, null, 2)}
                              </pre>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })
              )}
            </div>
          )}

          {/* Git Commits View */}
          {activeView === 'git' && (
            <div className="space-y-2">
              {gitCommits.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <GitCommit className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum commit encontrado</p>
                  <p className="text-xs text-muted mt-1">Configure a integração GitHub nas configurações</p>
                </div>
              ) : (
                gitCommits.map((commit) => (
                  <div
                    key={commit.sha}
                    className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:bg-layer-1 transition-all"
                  >
                    <div className="flex items-start gap-3">
                      <div className="p-2 bg-layer-2 rounded-lg flex-shrink-0">
                        <GitCommit className="w-4 h-4 text-muted" />
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 mb-1">
                          <code className="px-2 py-0.5 bg-layer-2 text-secondary text-xs font-mono rounded">
                            {commit.sha}
                          </code>
                          <span className="text-xs text-muted">
                            {formatTimestamp(commit.date)}
                          </span>
                        </div>
                        <p className="text-sm text-white mb-1">{commit.message}</p>
                        <div className="flex items-center gap-2 text-xs text-muted">
                          <span>{commit.author}</span>
                          {commit.url && (
                            <>
                              <span>•</span>
                              <a
                                href={commit.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="text-emerald-400 hover:text-emerald-300 hover:underline"
                              >
                                Ver no GitHub
                              </a>
                            </>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                ))
              )}
            </div>
          )}

          {/* Vercel Deployments View */}
          {activeView === 'vercel' && (
            <div className="space-y-2">
              {vercelDeployments.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <Globe className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum deployment encontrado</p>
                  <p className="text-xs text-muted mt-1">Configure a integração Vercel nas configurações</p>
                </div>
              ) : (
                vercelDeployments.map((deployment) => {
                  const styles = getDeploymentStateStyles(deployment.state);

                  return (
                    <div
                      key={deployment.uid}
                      className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:bg-layer-1 transition-all"
                    >
                      <div className="flex items-start gap-3">
                        <div className={`p-2 ${styles.bg} rounded-lg flex-shrink-0`}>
                          <Globe className={`w-4 h-4 ${styles.text}`} />
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 mb-1">
                            <span className={`px-2 py-0.5 ${styles.bg} ${styles.text} text-xs font-medium rounded`}>
                              {styles.label}
                            </span>
                            <span className="text-xs text-muted">
                              {formatTimestamp(deployment.createdAt)}
                            </span>
                          </div>
                          <p className="text-sm text-white mb-1">{deployment.name}</p>
                          {deployment.url && (
                            <a
                              href={`https://${deployment.url}`}
                              target="_blank"
                              rel="noopener noreferrer"
                              className="text-xs text-emerald-400 hover:text-emerald-300 hover:underline"
                            >
                              {deployment.url}
                            </a>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })
              )}
            </div>
          )}
        </>
      )}
    </div>
  );
}

```

---
#### `components/settings/ProfileTab.tsx`

```
"use client";

import { useState, useRef } from 'react';
import { User, Save, RefreshCw, Upload, Camera, X } from 'lucide-react';
import { updateProfile } from '@/app/actions/settings';
import type { UserProfile } from '@/types';

interface ProfileTabProps {
  initialProfile: UserProfile;
}

export function ProfileTab({ initialProfile }: ProfileTabProps) {
  const [profile, setProfile] = useState(initialProfile);
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [uploadError, setUploadError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);

  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      setUploadError('Tipo de arquivo inválido. Use JPEG, PNG, GIF ou WebP.');
      return;
    }

    // Validate file size (max 5MB)
    const maxSize = 5 * 1024 * 1024;
    if (file.size > maxSize) {
      setUploadError('Arquivo muito grande. Máximo 5MB.');
      return;
    }

    setUploading(true);
    setUploadError(null);

    try {
      const formData = new FormData();
      formData.append('file', file);
      formData.append('type', 'avatar');

      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error || 'Upload failed');
      }

      const result = await response.json();
      setProfile({ ...profile, avatarUrl: result.url });
    } catch (error) {
      console.error('Upload error:', error);
      setUploadError(error instanceof Error ? error.message : 'Erro ao fazer upload');
    } finally {
      setUploading(false);
      // Reset file input
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    }
  };

  const handleSave = async () => {
    setSaving(true);
    setSuccess(false);

    try {
      const updated = await updateProfile({
        name: profile.name,
        role: profile.role,
        avatarUrl: profile.avatarUrl,
        bio: profile.bio,
      });

      setProfile(updated);
      setSuccess(true);

      setTimeout(() => setSuccess(false), 3000);
    } catch (error) {
      console.error('Failed to update profile:', error);
      alert('Erro ao atualizar perfil');
    } finally {
      setSaving(false);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center gap-3 pb-4 border-b border-subtle">
        <div className="p-2 bg-indigo-500/10 rounded-lg">
          <User className="w-5 h-5 text-indigo-500" />
        </div>
        <div>
          <h2 className="text-xl font-bold text-white">Perfil do Usuário</h2>
          <p className="text-sm text-muted">Gerencie suas informações pessoais</p>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Avatar Preview with Upload */}
        <div className="lg:col-span-1">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 text-center">
            <div className="relative w-32 h-32 mx-auto mb-4">
              <div className="w-full h-full rounded-full overflow-hidden border-4 border-subtle">
                <img
                  src={profile.avatarUrl}
                  alt={profile.name}
                  className="w-full h-full object-cover"
                />
              </div>

              {/* Upload Overlay */}
              <button
                onClick={() => fileInputRef.current?.click()}
                disabled={uploading}
                className="absolute inset-0 flex items-center justify-center bg-black/60 rounded-full opacity-0 hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-not-allowed"
              >
                {uploading ? (
                  <RefreshCw className="w-8 h-8 text-white animate-spin" />
                ) : (
                  <Camera className="w-8 h-8 text-white" />
                )}
              </button>

              {/* Hidden file input */}
              <input
                ref={fileInputRef}
                type="file"
                accept="image/jpeg,image/png,image/gif,image/webp"
                onChange={handleFileSelect}
                className="hidden"
              />
            </div>

            <h3 className="text-lg font-semibold text-white">{profile.name}</h3>
            <p className="text-sm text-muted">{profile.role}</p>
            <p className="text-xs text-muted mt-2">ID: {profile.id}</p>

            {/* Upload Button */}
            <button
              onClick={() => fileInputRef.current?.click()}
              disabled={uploading}
              className="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm rounded-lg flex items-center gap-2 mx-auto transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {uploading ? (
                <>
                  <RefreshCw className="w-4 h-4 animate-spin" />
                  Enviando...
                </>
              ) : (
                <>
                  <Upload className="w-4 h-4" />
                  Alterar Foto
                </>
              )}
            </button>

            {/* Upload Error */}
            {uploadError && (
              <div className="mt-3 p-2 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400 text-xs">
                <X className="w-4 h-4 flex-shrink-0" />
                <span>{uploadError}</span>
              </div>
            )}

            <p className="text-xs text-muted mt-3">
              Clique na foto ou no botão para alterar.
              <br />
              Formatos: JPEG, PNG, GIF, WebP (máx. 5MB)
            </p>
          </div>
        </div>

        {/* Profile Form */}
        <div className="lg:col-span-2 space-y-4">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
            {/* Name */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Nome
              </label>
              <input
                type="text"
                value={profile.name}
                onChange={(e) => setProfile({ ...profile, name: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="Seu nome"
              />
            </div>

            {/* Role */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Cargo
              </label>
              <input
                type="text"
                value={profile.role}
                onChange={(e) => setProfile({ ...profile, role: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="Seu cargo"
              />
            </div>

            {/* Avatar URL - Manual input as fallback */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                URL do Avatar (alternativo)
              </label>
              <input
                type="url"
                value={profile.avatarUrl}
                onChange={(e) => setProfile({ ...profile, avatarUrl: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="https://..."
              />
              <p className="text-xs text-muted mt-1">
                Ou use{' '}
                <a
                  href="https://api.dicebear.com/7.x/avataaars/svg?seed=YourName"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-indigo-400 hover:text-indigo-300"
                >
                  DiceBear
                </a>{' '}
                para gerar avatares
              </p>
            </div>

            {/* Bio */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Bio
              </label>
              <textarea
                value={profile.bio}
                onChange={(e) => setProfile({ ...profile, bio: e.target.value })}
                rows={3}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all resize-none"
                placeholder="Escreva uma breve descrição sobre você..."
              />
            </div>

            {/* Save Button */}
            <div className="flex items-center justify-between pt-4 border-t border-subtle">
              <div className="text-xs text-muted">
                Última atualização:{' '}
                {new Date(profile.updatedAt).toLocaleString('pt-BR')}
              </div>
              <button
                onClick={handleSave}
                disabled={saving}
                className="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {saving ? (
                  <>
                    <RefreshCw className="w-4 h-4 animate-spin" />
                    Salvando...
                  </>
                ) : success ? (
                  <>
                    <Save className="w-4 h-4" />
                    Salvo!
                  </>
                ) : (
                  <>
                    <Save className="w-4 h-4" />
                    Salvar Alterações
                  </>
                )}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/SystemMonitorTab.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { Activity, RefreshCw, Cpu, Clock, Server, CheckCircle, XCircle, AlertCircle, Zap } from 'lucide-react';
import type { SystemMonitorData } from '@/types';

export function SystemMonitorTab() {
  const [data, setData] = useState<SystemMonitorData | null>(null);
  const [loading, setLoading] = useState(true);
  const [lastUpdate, setLastUpdate] = useState<Date | null>(null);
  const [autoRefresh, setAutoRefresh] = useState(true);

  useEffect(() => {
    loadHealthData();

    // Auto-refresh every 30 seconds
    if (autoRefresh) {
      const interval = setInterval(() => {
        loadHealthData();
      }, 30000);

      return () => clearInterval(interval);
    }
  }, [autoRefresh]);

  const loadHealthData = async () => {
    setLoading(true);
    try {
      const response = await fetch('/api/system/health');
      if (response.ok) {
        const healthData = await response.json();
        setData(healthData);
        setLastUpdate(new Date());
      } else {
        console.error('Failed to fetch health data');
      }
    } catch (error) {
      console.error('Error fetching health data:', error);
    } finally {
      setLoading(false);
    }
  };

  const formatBytes = (bytes: number): string => {
    const mb = bytes / 1024 / 1024;
    return `${mb.toFixed(2)} MB`;
  };

  const formatUptime = (seconds: number): string => {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    return `${hours}h ${minutes}m ${secs}s`;
  };

  const getStatusIcon = (status: string) => {
    switch (status) {
      case 'online':
        return <CheckCircle className="w-5 h-5 text-green-500" />;
      case 'offline':
        return <XCircle className="w-5 h-5 text-red-500" />;
      default:
        return <AlertCircle className="w-5 h-5 text-yellow-500" />;
    }
  };

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'online':
        return 'bg-green-500/10 border-green-500/30 text-green-400';
      case 'offline':
        return 'bg-red-500/10 border-red-500/30 text-red-400';
      default:
        return 'bg-yellow-500/10 border-yellow-500/30 text-yellow-400';
    }
  };

  if (loading && !data) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-cyan-500/10 rounded-lg">
            <Activity className="w-5 h-5 text-cyan-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Monitor do Sistema</h2>
            <p className="text-sm text-muted">
              Acompanhe a saúde da aplicação e status das APIs
            </p>
          </div>
        </div>

        <div className="flex items-center gap-3">
          <label className="flex items-center gap-2 text-sm text-muted">
            <input
              type="checkbox"
              checked={autoRefresh}
              onChange={(e) => setAutoRefresh(e.target.checked)}
              className="w-4 h-4 rounded border-subtle bg-layer-1 text-cyan-500 focus:ring-2 focus:ring-cyan-500"
            />
            Auto-refresh (30s)
          </label>

          <button
            onClick={loadHealthData}
            disabled={loading}
            className="px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
        </div>
      </div>

      {lastUpdate && (
        <div className="text-xs text-muted">
          Última atualização: {lastUpdate.toLocaleString('pt-BR')}
        </div>
      )}

      {data && (
        <>
          {/* System Metrics */}
          <div>
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <Server className="w-4 h-4 text-muted" />
              Métricas do Sistema
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
              {/* Memory Usage */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Cpu className="w-4 h-4 text-blue-400" />
                  <span className="text-xs font-medium text-muted">Memória RSS</span>
                </div>
                <p className="text-2xl font-bold text-white">
                  {formatBytes(data.system.memory.rss)}
                </p>
                <p className="text-xs text-muted mt-1">
                  Heap: {formatBytes(data.system.memory.heapUsed)} /{' '}
                  {formatBytes(data.system.memory.heapTotal)}
                </p>
              </div>

              {/* Uptime */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Clock className="w-4 h-4 text-green-400" />
                  <span className="text-xs font-medium text-muted">Uptime</span>
                </div>
                <p className="text-2xl font-bold text-white">
                  {formatUptime(data.system.uptime)}
                </p>
                <p className="text-xs text-muted mt-1">Tempo ativo do processo</p>
              </div>

              {/* Node Version */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Zap className="w-4 h-4 text-yellow-400" />
                  <span className="text-xs font-medium text-muted">Node.js</span>
                </div>
                <p className="text-2xl font-bold text-white">{data.system.nodeVersion}</p>
                <p className="text-xs text-muted mt-1">Versão do runtime</p>
              </div>

              {/* Platform */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Server className="w-4 h-4 text-purple-400" />
                  <span className="text-xs font-medium text-muted">Plataforma</span>
                </div>
                <p className="text-2xl font-bold text-white capitalize">
                  {data.system.platform}
                </p>
                <p className="text-xs text-muted mt-1">Sistema operacional</p>
              </div>
            </div>
          </div>

          {/* API Status */}
          <div>
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <Activity className="w-4 h-4 text-muted" />
              Status das APIs
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
              {data.apis.map((api, index) => (
                <div
                  key={index}
                  className={`border rounded-xl p-4 ${getStatusColor(api.status)}`}
                >
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-3">
                      {getStatusIcon(api.status)}
                      <div>
                        <p className="font-semibold">{api.name}</p>
                        {api.responseTime && (
                          <p className="text-xs opacity-80 mt-0.5">
                            {api.responseTime}ms
                          </p>
                        )}
                      </div>
                    </div>

                    <span className="text-xs font-bold uppercase px-2 py-1 rounded bg-black/20">
                      {api.status}
                    </span>
                  </div>

                  {api.error && (
                    <p className="text-xs mt-2 opacity-70">{api.error}</p>
                  )}
                </div>
              ))}
            </div>
          </div>

          {/* System Info */}
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-3">
              Informações Técnicas
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
              <div>
                <span className="text-muted">Memória Externa:</span>
                <span className="text-white ml-2 font-mono">
                  {formatBytes(data.system.memory.external)}
                </span>
              </div>
              <div>
                <span className="text-muted">Timestamp:</span>
                <span className="text-white ml-2 font-mono">
                  {new Date(data.system.timestamp).toLocaleString('pt-BR')}
                </span>
              </div>
            </div>
          </div>
        </>
      )}
    </div>
  );
}

```

---
#### `components/studio/AIMediaGenerator.tsx`

```
"use client";

import { useState } from "react";
import { Sparkles, DollarSign, Image, Video, Loader2, AlertCircle } from "lucide-react";
import { motion } from "framer-motion";
import { cn } from "@/lib/utils";
import Button from "@/components/ui/Button";
import Modal from "@/components/ui/Modal";

interface AIMediaGeneratorProps {
  sceneText: string;
  onGenerate: (prompt: string, type: "image" | "video") => Promise<string>;
  className?: string;
}

export default function AIMediaGenerator({
  sceneText,
  onGenerate,
  className,
}: AIMediaGeneratorProps) {
  const [isOpen, setIsOpen] = useState(false);
  const [prompt, setPrompt] = useState("");
  const [mediaType, setMediaType] = useState<"image" | "video">("image");
  const [isGenerating, setIsGenerating] = useState(false);
  const [generatedUrl, setGeneratedUrl] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  const costs = {
    image: { flux: 0.04, dalle: 0.02, stability: 0.03 },
    video: { runway: 0.50, pika: 0.40 },
  };

  const estimatedCost = mediaType === "image" ? costs.image.flux : costs.video.runway;

  const handleGenerate = async () => {
    if (!prompt.trim()) {
      setError("Por favor, descreva a mídia que deseja gerar");
      return;
    }

    setIsGenerating(true);
    setError(null);
    setGeneratedUrl(null);

    try {
      const url = await onGenerate(prompt, mediaType);
      setGeneratedUrl(url);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar mídia");
    } finally {
      setIsGenerating(false);
    }
  };

  const handleUseMedia = () => {
    // Implementar uso da mídia gerada
    setIsOpen(false);
    setPrompt("");
    setGeneratedUrl(null);
  };

  const handleClose = () => {
    if (!isGenerating) {
      setIsOpen(false);
      setPrompt("");
      setGeneratedUrl(null);
      setError(null);
    }
  };

  return (
    <>
      <button
        onClick={() => setIsOpen(true)}
        className={cn(
          "w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg",
          "bg-gradient-to-r from-purple-600 to-pink-600",
          "hover:from-purple-500 hover:to-pink-500",
          "text-white font-medium transition-all",
          "shadow-lg shadow-purple-500/20",
          className
        )}
      >
        <Sparkles className="w-4 h-4" />
        Gerar com IA
      </button>

      <Modal isOpen={isOpen} onClose={handleClose} title="Gerar Mídia com IA">
        <div className="space-y-6">
          {/* Tipo de Mídia */}
          <div>
            <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-3 block">
              Tipo de Mídia
            </label>
            <div className="grid grid-cols-2 gap-3">
              <button
                onClick={() => setMediaType("image")}
                className={cn(
                  "p-4 rounded-lg border-2 transition-all",
                  mediaType === "image"
                    ? "border-cyan-500 bg-cyan-500/10"
                    : "border-gray-700 hover:border-gray-600"
                )}
              >
                <Image className={cn("w-6 h-6 mx-auto mb-2", mediaType === "image" ? "text-cyan-400" : "text-gray-500")} />
                <p className={cn("text-sm font-medium", mediaType === "image" ? "text-cyan-400" : "text-gray-400")}>
                  Imagem
                </p>
                <p className="text-xs text-gray-600 mt-1">
                  ~${costs.image.flux.toFixed(2)}
                </p>
              </button>

              <button
                onClick={() => setMediaType("video")}
                className={cn(
                  "p-4 rounded-lg border-2 transition-all",
                  mediaType === "video"
                    ? "border-cyan-500 bg-cyan-500/10"
                    : "border-gray-700 hover:border-gray-600"
                )}
              >
                <Video className={cn("w-6 h-6 mx-auto mb-2", mediaType === "video" ? "text-cyan-400" : "text-gray-500")} />
                <p className={cn("text-sm font-medium", mediaType === "video" ? "text-cyan-400" : "text-gray-400")}>
                  Vídeo
                </p>
                <p className="text-xs text-gray-600 mt-1">
                  ~${costs.video.runway.toFixed(2)}
                </p>
              </button>
            </div>
          </div>

          {/* Contexto da Cena */}
          <div className="bg-gray-900 border border-gray-800 rounded-lg p-4">
            <p className="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2">
              Texto da Cena
            </p>
            <p className="text-sm text-gray-300">{sceneText}</p>
          </div>

          {/* Prompt */}
          <div>
            <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-2 block">
              Descreva a {mediaType === "image" ? "imagem" : "vídeo"}
            </label>
            <textarea
              value={prompt}
              onChange={(e) => setPrompt(e.target.value)}
              rows={4}
              placeholder={
                mediaType === "image"
                  ? "Ex: Paisagem montanhosa ao nascer do sol, cores vibrantes, estilo fotorrealista..."
                  : "Ex: Câmera se movendo suavemente sobre uma floresta verde, vista aérea, iluminação natural..."
              }
              className="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"
              disabled={isGenerating}
            />
            <div className="flex items-center justify-between mt-2">
              <p className="text-xs text-gray-600">
                {prompt.length} caracteres
              </p>
              <div className="flex items-center gap-1 text-xs text-amber-400">
                <DollarSign className="w-3 h-3" />
                <span>Custo estimado: ${estimatedCost.toFixed(2)}</span>
              </div>
            </div>
          </div>

          {/* Preview */}
          <AnimatePresence>
            {generatedUrl && (
              <motion.div
                initial={{ opacity: 0, scale: 0.95 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, scale: 0.95 }}
                className="space-y-3"
              >
                <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide block">
                  Preview
                </label>
                <div className="relative aspect-video rounded-lg overflow-hidden bg-gray-900 border border-gray-700">
                  {mediaType === "image" ? (
                    <img
                      src={generatedUrl}
                      alt="Generated"
                      className="w-full h-full object-cover"
                    />
                  ) : (
                    <video
                      src={generatedUrl}
                      controls
                      className="w-full h-full object-cover"
                    />
                  )}
                </div>
              </motion.div>
            )}
          </AnimatePresence>

          {/* Erro */}
          {error && (
            <div className="bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-center gap-2">
              <AlertCircle className="w-4 h-4 text-red-500 flex-shrink-0" />
              <p className="text-sm text-red-400">{error}</p>
            </div>
          )}

          {/* Ações */}
          <div className="flex gap-3">
            {generatedUrl ? (
              <>
                <Button
                  onClick={handleGenerate}
                  variant="secondary"
                  className="flex-1"
                  disabled={isGenerating}
                >
                  Gerar Novamente
                </Button>
                <Button onClick={handleUseMedia} variant="primary" className="flex-1">
                  Usar Esta Mídia
                </Button>
              </>
            ) : (
              <>
                <Button
                  onClick={handleClose}
                  variant="secondary"
                  className="flex-1"
                  disabled={isGenerating}
                >
                  Cancelar
                </Button>
                <Button
                  onClick={handleGenerate}
                  variant="primary"
                  className="flex-1"
                  disabled={isGenerating || !prompt.trim()}
                >
                  {isGenerating ? (
                    <>
                      <Loader2 className="w-4 h-4 animate-spin" />
                      Gerando...
                    </>
                  ) : (
                    <>
                      <Sparkles className="w-4 h-4" />
                      Gerar
                    </>
                  )}
                </Button>
              </>
            )}
          </div>

          {/* Aviso de Custo */}
          <div className="bg-amber-500/10 border border-amber-500/30 rounded-lg p-3">
            <p className="text-xs text-amber-400">
              ⚠️ A geração de mídia com IA consome créditos. O valor será debitado
              após a geração bem-sucedida.
            </p>
          </div>
        </div>
      </Modal>
    </>
  );
}

```

---
#### `components/studio/MediaSearchModal.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { Search, Filter, Grid3x3, PlayCircle, Download, Loader2, X } from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";
import { cn } from "@/lib/utils";
import Modal from "@/components/ui/Modal";
import { MediaItem } from "@/types";

interface MediaSearchModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSelect: (media: MediaItem) => void;
  initialQuery?: string;
  type?: "image" | "video" | "all";
}

export default function MediaSearchModal({
  isOpen,
  onClose,
  onSelect,
  initialQuery = "",
  type = "all",
}: MediaSearchModalProps) {
  const [query, setQuery] = useState(initialQuery);
  const [mediaType, setMediaType] = useState<"image" | "video" | "all">(type);
  const [source, setSource] = useState<"pexels" | "pixabay" | "all">("all");
  const [sortBy, setSortBy] = useState<"relevance" | "popular">("relevance");
  const [results, setResults] = useState<MediaItem[]>([]);
  const [isSearching, setIsSearching] = useState(false);
  const [selectedMedia, setSelectedMedia] = useState<MediaItem | null>(null);

  useEffect(() => {
    if (isOpen && initialQuery) {
      handleSearch();
    }
  }, [isOpen]);

  const handleSearch = async () => {
    if (!query.trim()) return;

    setIsSearching(true);
    try {
      // Implementar busca real nas APIs
      // Por agora, simular com dados mock
      await new Promise((resolve) => setTimeout(resolve, 1000));

      const mockResults: MediaItem[] = Array.from({ length: 12 }, (_, i) => ({
        id: `media-${i}`,
        source: i % 2 === 0 ? "pexels" : "pixabay",
        sourceId: `${i}`,
        url: `https://via.placeholder.com/1920x1080/1a1a2e/16213e?text=Media+${i + 1}`,
        previewUrl: `https://via.placeholder.com/400x300/1a1a2e/16213e?text=Media+${i + 1}`,
        type: mediaType === "all" ? (i % 2 === 0 ? "image" : "video") : mediaType,
        duration: mediaType === "video" || (mediaType === "all" && i % 2 !== 0) ? 15 : null,
        attribution: `Photographer ${i + 1}`,
      }));

      setResults(mockResults);
    } catch (error) {
      console.error("Erro ao buscar mídia:", error);
    } finally {
      setIsSearching(false);
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter") {
      handleSearch();
    }
  };

  const handleSelectMedia = (media: MediaItem) => {
    setSelectedMedia(media);
  };

  const handleConfirmSelection = () => {
    if (selectedMedia) {
      onSelect(selectedMedia);
      onClose();
    }
  };

  return (
    <Modal
      isOpen={isOpen}
      onClose={onClose}
      title="Buscar Mídia"
      size="large"
    >
      <div className="space-y-6">
        {/* Busca */}
        <div className="flex gap-3">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" />
            <input
              type="text"
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Buscar imagens ou vídeos..."
              className="w-full bg-gray-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"
            />
          </div>
          <button
            onClick={handleSearch}
            disabled={isSearching || !query.trim()}
            className={cn(
              "px-6 py-3 rounded-lg font-medium transition-all",
              isSearching || !query.trim()
                ? "bg-gray-800 text-gray-500 cursor-not-allowed"
                : "bg-cyan-600 hover:bg-cyan-500 text-white"
            )}
          >
            {isSearching ? <Loader2 className="w-5 h-5 animate-spin" /> : "Buscar"}
          </button>
        </div>

        {/* Filtros */}
        <div className="flex flex-wrap items-center gap-3">
          <div className="flex items-center gap-2">
            <Filter className="w-4 h-4 text-gray-500" />
            <span className="text-sm text-gray-500">Filtros:</span>
          </div>

          {/* Tipo */}
          <select
            value={mediaType}
            onChange={(e) => setMediaType(e.target.value as "image" | "video" | "all")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="all">Todos</option>
            <option value="image">Imagens</option>
            <option value="video">Vídeos</option>
          </select>

          {/* Fonte */}
          <select
            value={source}
            onChange={(e) => setSource(e.target.value as "pexels" | "pixabay" | "all")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="all">Todas as fontes</option>
            <option value="pexels">Pexels</option>
            <option value="pixabay">Pixabay</option>
          </select>

          {/* Ordenação */}
          <select
            value={sortBy}
            onChange={(e) => setSortBy(e.target.value as "relevance" | "popular")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="relevance">Relevância</option>
            <option value="popular">Popularidade</option>
          </select>
        </div>

        {/* Resultados */}
        <div className="min-h-[400px]">
          {isSearching ? (
            <div className="flex items-center justify-center h-[400px]">
              <div className="text-center">
                <Loader2 className="w-12 h-12 text-cyan-500 animate-spin mx-auto mb-4" />
                <p className="text-gray-400">Buscando mídia...</p>
              </div>
            </div>
          ) : results.length > 0 ? (
            <>
              <div className="flex items-center justify-between mb-4">
                <p className="text-sm text-gray-400">
                  {results.length} resultados encontrados
                </p>
                {selectedMedia && (
                  <div className="flex items-center gap-2 text-sm text-cyan-400">
                    <span>1 selecionado</span>
                    <button
                      onClick={() => setSelectedMedia(null)}
                      className="p-1 hover:bg-cyan-500/20 rounded transition-colors"
                    >
                      <X className="w-4 h-4" />
                    </button>
                  </div>
                )}
              </div>

              <div className="grid grid-cols-3 gap-4 max-h-[500px] overflow-y-auto pr-2">
                {results.map((media) => (
                  <MediaCard
                    key={media.id}
                    media={media}
                    isSelected={selectedMedia?.id === media.id}
                    onClick={() => handleSelectMedia(media)}
                  />
                ))}
              </div>
            </>
          ) : (
            <div className="flex items-center justify-center h-[400px]">
              <div className="text-center">
                <Grid3x3 className="w-16 h-16 text-gray-700 mx-auto mb-4" />
                <p className="text-gray-500">Nenhum resultado encontrado</p>
                <p className="text-sm text-gray-600 mt-2">
                  Tente buscar com outros termos
                </p>
              </div>
            </div>
          )}
        </div>

        {/* Ações */}
        {selectedMedia && (
          <div className="flex gap-3 pt-4 border-t border-gray-800">
            <button
              onClick={onClose}
              className="flex-1 px-4 py-3 rounded-lg font-medium bg-gray-800 hover:bg-gray-700 text-white transition-all"
            >
              Cancelar
            </button>
            <button
              onClick={handleConfirmSelection}
              className="flex-1 px-4 py-3 rounded-lg font-medium bg-cyan-600 hover:bg-cyan-500 text-white transition-all"
            >
              Usar Mídia Selecionada
            </button>
          </div>
        )}
      </div>
    </Modal>
  );
}

interface MediaCardProps {
  media: MediaItem;
  isSelected: boolean;
  onClick: () => void;
}

function MediaCard({ media, isSelected, onClick }: MediaCardProps) {
  return (
    <motion.button
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
      onClick={onClick}
      className={cn(
        "relative aspect-video rounded-lg overflow-hidden bg-gray-900 border-2 transition-all",
        isSelected
          ? "border-cyan-500 ring-2 ring-cyan-500/50"
          : "border-gray-800 hover:border-gray-700"
      )}
    >
      <img
        src={media.previewUrl}
        alt="Media preview"
        className="w-full h-full object-cover"
      />

      {/* Overlay com info */}
      <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 hover:opacity-100 transition-opacity">
        <div className="absolute bottom-2 left-2 right-2">
          <div className="flex items-center justify-between text-white text-xs">
            <span className="truncate">{media.attribution}</span>
            {media.type === "video" && media.duration && (
              <div className="flex items-center gap-1 bg-black/50 rounded px-1.5 py-0.5">
                <PlayCircle className="w-3 h-3" />
                <span>{media.duration}s</span>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Indicador de tipo */}
      <div className="absolute top-2 right-2">
        <div className="bg-black/70 backdrop-blur-sm rounded-full p-1.5">
          {media.type === "video" ? (
            <PlayCircle className="w-4 h-4 text-white" />
          ) : (
            <Download className="w-4 h-4 text-white" />
          )}
        </div>
      </div>

      {/* Check de seleção */}
      <AnimatePresence>
        {isSelected && (
          <motion.div
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            exit={{ scale: 0 }}
            className="absolute top-2 left-2 bg-cyan-500 rounded-full p-1"
          >
            <svg
              className="w-4 h-4 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={3}
                d="M5 13l4 4L19 7"
              />
            </svg>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.button>
  );
}

```

---
#### `components/studio/MediaUploader.tsx`

```
"use client";

import { useState, useCallback } from "react";
import { Upload, X, FileVideo, FileImage, AlertCircle } from "lucide-react";
import { cn } from "@/lib/utils";
import { motion } from "framer-motion";

interface MediaUploaderProps {
  sceneId: string;
  onUploadComplete: (url: string, type: "image" | "video") => void;
  className?: string;
}

export default function MediaUploader({
  sceneId,
  onUploadComplete,
  className,
}: MediaUploaderProps) {
  const [isDragging, setIsDragging] = useState(false);
  const [isUploading, setIsUploading] = useState(false);
  const [uploadProgress, setUploadProgress] = useState(0);
  const [error, setError] = useState<string | null>(null);

  const handleFile = useCallback(
    async (file: File) => {
      setError(null);

      // Validar tipo de arquivo
      const isVideo = file.type.startsWith("video/");
      const isImage = file.type.startsWith("image/");

      if (!isVideo && !isImage) {
        setError("Formato de arquivo não suportado");
        return;
      }

      // Validar tamanho (máximo 100MB)
      const maxSize = 100 * 1024 * 1024;
      if (file.size > maxSize) {
        setError("Arquivo muito grande. Máximo: 100MB");
        return;
      }

      setIsUploading(true);
      setUploadProgress(0);

      try {
        // Simular upload com progresso
        // Em produção, fazer upload real para Vercel Blob ou S3
        const interval = setInterval(() => {
          setUploadProgress((prev) => {
            if (prev >= 90) {
              clearInterval(interval);
              return prev;
            }
            return prev + 10;
          });
        }, 200);

        await new Promise((resolve) => setTimeout(resolve, 2000));

        clearInterval(interval);
        setUploadProgress(100);

        // Criar URL temporário
        const url = URL.createObjectURL(file);
        const type = isVideo ? "video" : "image";

        onUploadComplete(url, type);

        setTimeout(() => {
          setIsUploading(false);
          setUploadProgress(0);
        }, 500);
      } catch {
        setError("Erro ao fazer upload do arquivo");
        setIsUploading(false);
        setUploadProgress(0);
      }
    },
    [onUploadComplete]
  );

  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
  }, []);

  const handleDrop = useCallback(
    (e: React.DragEvent) => {
      e.preventDefault();
      setIsDragging(false);

      const file = e.dataTransfer.files[0];
      if (file) {
        handleFile(file);
      }
    },
    [handleFile]
  );

  const handleFileSelect = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const file = e.target.files?.[0];
      if (file) {
        handleFile(file);
      }
    },
    [handleFile]
  );

  return (
    <div className={cn("space-y-4", className)}>
      <input
        type="file"
        accept="video/*,image/*"
        onChange={handleFileSelect}
        className="hidden"
        id={`media-upload-${sceneId}`}
        disabled={isUploading}
      />

      <label
        htmlFor={`media-upload-${sceneId}`}
        onDragOver={handleDragOver}
        onDragLeave={handleDragLeave}
        onDrop={handleDrop}
        className={cn(
          "block border-2 border-dashed rounded-xl p-8 transition-all cursor-pointer",
          isDragging
            ? "border-cyan-500 bg-cyan-500/10"
            : isUploading
            ? "border-gray-700 bg-gray-900 cursor-not-allowed"
            : "border-gray-700 hover:border-gray-600 hover:bg-gray-900/50"
        )}
      >
        <div className="flex flex-col items-center justify-center text-center">
          {isUploading ? (
            <motion.div
              initial={{ scale: 0.8, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              className="space-y-4 w-full"
            >
              <div className="w-16 h-16 rounded-full bg-cyan-500/20 flex items-center justify-center mx-auto">
                <Upload className="w-8 h-8 text-cyan-500 animate-pulse" />
              </div>
              <div className="space-y-2">
                <p className="text-white font-medium">Enviando arquivo...</p>
                <div className="w-full max-w-xs mx-auto h-2 bg-gray-800 rounded-full overflow-hidden">
                  <motion.div
                    initial={{ width: 0 }}
                    animate={{ width: `${uploadProgress}%` }}
                    transition={{ duration: 0.3 }}
                    className="h-full bg-gradient-to-r from-cyan-500 to-blue-600"
                  />
                </div>
                <p className="text-sm text-gray-400">{uploadProgress}%</p>
              </div>
            </motion.div>
          ) : (
            <>
              <div className="w-16 h-16 rounded-full bg-gray-800 flex items-center justify-center mb-4">
                <Upload className="w-8 h-8 text-gray-500" />
              </div>
              <p className="text-white font-medium mb-2">
                {isDragging ? "Solte o arquivo aqui" : "Clique ou arraste um arquivo"}
              </p>
              <p className="text-sm text-gray-500 mb-4">
                Vídeo ou imagem própria
              </p>
              <div className="flex items-center gap-4 text-xs text-gray-600">
                <div className="flex items-center gap-1">
                  <FileVideo className="w-4 h-4" />
                  <span>MP4, MOV, WEBM</span>
                </div>
                <div className="flex items-center gap-1">
                  <FileImage className="w-4 h-4" />
                  <span>JPG, PNG, WEBP</span>
                </div>
              </div>
            </>
          )}
        </div>
      </label>

      {error && (
        <motion.div
          initial={{ opacity: 0, y: -10 }}
          animate={{ opacity: 1, y: 0 }}
          className="bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-center gap-2"
        >
          <AlertCircle className="w-4 h-4 text-red-500 flex-shrink-0" />
          <p className="text-sm text-red-400">{error}</p>
          <button
            onClick={() => setError(null)}
            className="ml-auto p-1 hover:bg-red-500/20 rounded transition-colors"
          >
            <X className="w-4 h-4 text-red-400" />
          </button>
        </motion.div>
      )}
    </div>
  );
}

```

---
#### `components/system/SystemStatus.tsx`

```
"use client";

import { useEffect, useState } from "react";

type Health = {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, "ONLINE" | "OFFLINE">;
};

export default function SystemStatus() {
  const [data, setData] = useState<Health | null>(null);

  useEffect(() => {
    fetch("/api/health")
      .then(res => res.json())
      .then(setData)
      .catch(() => setData(null));
  }, []);

  if (!data) {
    return <p>Checking system status...</p>;
  }

  return (
    <div style={{ border: "1px solid #333", padding: 16 }}>
      <strong>System Status: {data.status}</strong>
      <ul>
        {Object.entries(data.apis).map(([name, status]) => (
          <li key={name}>
            {name}: {status}
          </li>
        ))}
      </ul>
    </div>
  );
}

```

---
#### `components/ui/ActivityLog.tsx`

```
"use client";

import { useEffect, useRef } from "react";
import { motion } from "framer-motion";
import { CheckCircle2, XCircle, AlertCircle, Info, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";

export type ActivityStatus = "pending" | "running" | "success" | "error" | "warning" | "info";

export interface Activity {
  id: string;
  message: string;
  status: ActivityStatus;
  timestamp: Date;
  details?: string;
}

interface ActivityLogProps {
  activities: Activity[];
  className?: string;
  maxHeight?: string;
  autoScroll?: boolean;
  showTimestamp?: boolean;
}

export default function ActivityLog({
  activities,
  className,
  maxHeight = "400px",
  autoScroll = true,
  showTimestamp = true,
}: ActivityLogProps) {
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (autoScroll && scrollRef.current) {
      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
    }
  }, [activities, autoScroll]);

  return (
    <div
      ref={scrollRef}
      className={cn(
        "bg-gray-950 border border-gray-800 rounded-lg p-4 font-mono text-sm overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",
        className
      )}
      style={{ maxHeight }}
    >
      <AnimatePresence initial={false}>
        {activities.map((activity, index) => (
          <ActivityItem
            key={activity.id}
            activity={activity}
            showTimestamp={showTimestamp}
            isLast={index === activities.length - 1}
          />
        ))}
      </AnimatePresence>
    </div>
  );
}

interface ActivityItemProps {
  activity: Activity;
  showTimestamp: boolean;
  isLast: boolean;
}

function ActivityItem({ activity, showTimestamp, isLast }: ActivityItemProps) {
  const getIcon = () => {
    switch (activity.status) {
      case "success":
        return <CheckCircle2 className="w-4 h-4 text-green-500 flex-shrink-0" />;
      case "error":
        return <XCircle className="w-4 h-4 text-red-500 flex-shrink-0" />;
      case "warning":
        return <AlertCircle className="w-4 h-4 text-amber-500 flex-shrink-0" />;
      case "running":
        return <Loader2 className="w-4 h-4 text-cyan-500 animate-spin flex-shrink-0" />;
      case "info":
        return <Info className="w-4 h-4 text-blue-500 flex-shrink-0" />;
      default:
        return <div className="w-2 h-2 rounded-full bg-gray-600 flex-shrink-0" />;
    }
  };

  const getTextColor = () => {
    switch (activity.status) {
      case "success":
        return "text-green-400";
      case "error":
        return "text-red-400";
      case "warning":
        return "text-amber-400";
      case "running":
        return "text-cyan-400";
      case "info":
        return "text-blue-400";
      default:
        return "text-gray-400";
    }
  };

  const formatTime = (date: Date) => {
    return date.toLocaleTimeString("pt-BR", {
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
    });
  };

  return (
    <motion.div
      initial={{ opacity: 0, x: -10 }}
      animate={{ opacity: 1, x: 0 }}
      exit={{ opacity: 0, x: 10 }}
      transition={{ duration: 0.2 }}
      className={cn("flex items-start gap-3 py-2", !isLast && "border-b border-gray-800/50")}
    >
      {getIcon()}

      <div className="flex-1 min-w-0">
        <div className="flex items-center gap-2 flex-wrap">
          {showTimestamp && (
            <span className="text-xs text-gray-600">[{formatTime(activity.timestamp)}]</span>
          )}
          <span className={cn("font-medium", getTextColor())}>{activity.message}</span>
        </div>

        {activity.details && (
          <div className="mt-1 text-xs text-gray-500 pl-4 border-l-2 border-gray-800">
            {activity.details}
          </div>
        )}
      </div>
    </motion.div>
  );
}

// Hook para gerenciar activities
export function useActivityLog() {
  const [activities, setActivities] = useState<Activity[]>([]);

  const addActivity = (message: string, status: ActivityStatus = "info", details?: string) => {
    const activity: Activity = {
      id: `${Date.now()}-${Math.random()}`,
      message,
      status,
      timestamp: new Date(),
      details,
    };
    setActivities((prev) => [...prev, activity]);
    return activity.id;
  };

  const updateActivity = (id: string, updates: Partial<Activity>) => {
    setActivities((prev) =>
      prev.map((activity) =>
        activity.id === id ? { ...activity, ...updates } : activity
      )
    );
  };

  const clearActivities = () => {
    setActivities([]);
  };

  return {
    activities,
    addActivity,
    updateActivity,
    clearActivities,
  };
}

function useState<T>(initialState: T): [T, React.Dispatch<React.SetStateAction<T>>] {
  const ref = useRef<T>(initialState);
  const [, forceUpdate] = useReducer((x) => x + 1, 0);

  const setState = (value: T | ((prev: T) => T)) => {
    const newValue = typeof value === "function" ? (value as (prev: T) => T)(ref.current) : value;
    ref.current = newValue;
    forceUpdate();
  };

  return [ref.current, setState];
}

function useReducer(reducer: (x: number) => number, initialState: number): [number, () => void] {
  const ref = useRef<number>(initialState);
  const forceUpdateRef = useRef<(() => void) | null>(null);

  if (!forceUpdateRef.current) {
    forceUpdateRef.current = () => {
      ref.current = reducer(ref.current);
    };
  }

  return [ref.current, forceUpdateRef.current];
}

```

---
#### `components/ui/Badge.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface BadgeProps {
  children: React.ReactNode;
  variant?: "default" | "success" | "warning" | "error" | "info";
  size?: "sm" | "md";
  className?: string;
}

export default function Badge({
  children,
  variant = "default",
  size = "sm",
  className,
}: BadgeProps) {
  const variants = {
    default: "bg-gray-700 text-gray-300",
    success: "bg-green-500/10 text-green-400",
    warning: "bg-yellow-500/10 text-yellow-400",
    error: "bg-red-500/10 text-red-400",
    info: "bg-blue-500/10 text-blue-400",
  };

  const sizes = {
    sm: "px-2 py-0.5 text-xs",
    md: "px-3 py-1 text-sm",
  };

  return (
    <span
      className={cn(
        "inline-flex items-center rounded-full font-medium",
        variants[variant],
        sizes[size],
        className
      )}
    >
      {children}
    </span>
  );
}

```

---
#### `components/ui/Button.tsx`

```
"use client";

import { forwardRef, ButtonHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { Loader2 } from "lucide-react";

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: "primary" | "secondary" | "outline" | "success" | "warning" | "danger" | "ghost";
  size?: "sm" | "md" | "lg";
  isLoading?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      className,
      variant = "primary",
      size = "md",
      isLoading = false,
      leftIcon,
      rightIcon,
      children,
      disabled,
      ...props
    },
    ref
  ) => {
    const variants = {
      primary: "bg-primary-600 hover:bg-primary-700 text-white",
      secondary: "bg-gray-700 hover:bg-gray-600 text-white",
      outline: "border border-gray-600 hover:border-gray-500 hover:bg-gray-800 text-gray-300",
      success: "bg-green-600 hover:bg-green-700 text-white",
      warning: "bg-yellow-600 hover:bg-yellow-700 text-white",
      danger: "bg-red-600 hover:bg-red-700 text-white",
      ghost: "hover:bg-gray-800 text-gray-300",
    };

    const sizes = {
      sm: "text-sm px-3 py-1.5",
      md: "px-4 py-2",
      lg: "text-lg px-6 py-3",
    };

    return (
      <button
        ref={ref}
        className={cn(
          "inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200",
          "disabled:opacity-50 disabled:cursor-not-allowed",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          variants[variant],
          sizes[size],
          className
        )}
        disabled={disabled || isLoading}
        {...props}
      >
        {isLoading ? (
          <Loader2 className="w-4 h-4 animate-spin" />
        ) : (
          leftIcon
        )}
        {children}
        {!isLoading && rightIcon}
      </button>
    );
  }
);

Button.displayName = "Button";

export default Button;

```

---
#### `components/ui/Card.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface CardProps {
  children: React.ReactNode;
  className?: string;
  hover?: boolean;
  padding?: "none" | "sm" | "md" | "lg";
}

export default function Card({
  children,
  className,
  hover = false,
  padding = "md",
}: CardProps) {
  const paddings = {
    none: "",
    sm: "p-4",
    md: "p-6",
    lg: "p-8",
  };

  return (
    <div
      className={cn(
        "rounded-xl border border-gray-800 bg-gray-900/50 backdrop-blur-sm",
        paddings[padding],
        hover && "transition-all duration-200 hover:shadow-lg hover:shadow-primary-500/10 hover:-translate-y-0.5",
        className
      )}
    >
      {children}
    </div>
  );
}

interface CardHeaderProps {
  children: React.ReactNode;
  className?: string;
}

export function CardHeader({ children, className }: CardHeaderProps) {
  return (
    <div className={cn("mb-4", className)}>
      {children}
    </div>
  );
}

interface CardTitleProps {
  children: React.ReactNode;
  className?: string;
}

export function CardTitle({ children, className }: CardTitleProps) {
  return (
    <h3 className={cn("text-lg font-semibold text-white", className)}>
      {children}
    </h3>
  );
}

interface CardDescriptionProps {
  children: React.ReactNode;
  className?: string;
}

export function CardDescription({ children, className }: CardDescriptionProps) {
  return (
    <p className={cn("text-sm text-gray-400 mt-1", className)}>
      {children}
    </p>
  );
}

interface CardContentProps {
  children: React.ReactNode;
  className?: string;
}

export function CardContent({ children, className }: CardContentProps) {
  return <div className={cn("", className)}>{children}</div>;
}

interface CardFooterProps {
  children: React.ReactNode;
  className?: string;
}

export function CardFooter({ children, className }: CardFooterProps) {
  return (
    <div className={cn("mt-4 pt-4 border-t border-gray-800", className)}>
      {children}
    </div>
  );
}

```

---
#### `components/ui/Input.tsx`

```
"use client";

import { forwardRef, InputHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Input = forwardRef<HTMLInputElement, InputProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={inputId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <input
          ref={ref}
          id={inputId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Input.displayName = "Input";

export default Input;

```

---
#### `components/ui/Modal.tsx`

```
"use client";

import { useEffect, useCallback } from "react";
import { X } from "lucide-react";
import { cn } from "@/lib/utils";

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  size?: "sm" | "md" | "lg" | "xl" | "full";
  showCloseButton?: boolean;
}

export default function Modal({
  isOpen,
  onClose,
  title,
  children,
  size = "md",
  showCloseButton = true,
}: ModalProps) {
  const handleEscape = useCallback(
    (e: KeyboardEvent) => {
      if (e.key === "Escape") {
        onClose();
      }
    },
    [onClose]
  );

  useEffect(() => {
    if (isOpen) {
      document.addEventListener("keydown", handleEscape);
      document.body.style.overflow = "hidden";
    }

    return () => {
      document.removeEventListener("keydown", handleEscape);
      document.body.style.overflow = "unset";
    };
  }, [isOpen, handleEscape]);

  if (!isOpen) return null;

  const sizes = {
    sm: "max-w-md",
    md: "max-w-lg",
    lg: "max-w-2xl",
    xl: "max-w-4xl",
    full: "max-w-[90vw]",
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center">
      {/* Backdrop */}
      <div
        className="absolute inset-0 bg-black/70 backdrop-blur-sm"
        onClick={onClose}
      />

      {/* Modal */}
      <div
        className={cn(
          "relative w-full mx-4 bg-gradient-to-br from-layer-1/95 via-indigo-950/20 to-layer-2/95 backdrop-blur-xl rounded-2xl shadow-2xl border-2 border-subtle",
          "max-h-[90vh] overflow-hidden flex flex-col",
          "animate-fade-in shadow-glow-lg shadow-indigo-500/20",
          sizes[size]
        )}
      >
        {/* Animated gradient mesh background */}
        <div className="absolute inset-0 bg-gradient-mesh opacity-10 pointer-events-none" />

        {/* Glow overlay */}
        <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-blue-500/5 to-purple-500/5 pointer-events-none rounded-2xl" />

        {/* Header */}
        {(title || showCloseButton) && (
          <div className="relative z-10 flex items-center justify-between px-6 py-4 border-b border-subtle bg-gradient-to-r from-layer-2/50 to-transparent backdrop-blur-sm">
            {title && (
              <h2 className="text-lg font-semibold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent">{title}</h2>
            )}
            {showCloseButton && (
              <button
                onClick={onClose}
                className="p-1 rounded-lg hover:bg-layer-2 text-muted hover:text-white transition-all hover:shadow-glow-sm"
              >
                <X className="w-5 h-5" />
              </button>
            )}
          </div>
        )}

        {/* Content */}
        <div className="relative z-10 flex-1 overflow-auto p-6">{children}</div>
      </div>
    </div>
  );
}

```

---
#### `components/ui/ProgressBar.tsx`

```
"use client";

import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

interface ProgressBarProps {
  progress: number; // 0-100
  label?: string;
  showPercentage?: boolean;
  className?: string;
  variant?: "default" | "success" | "warning" | "error";
  animate?: boolean;
}

export default function ProgressBar({
  progress,
  label,
  showPercentage = true,
  className,
  variant = "default",
  animate = true,
}: ProgressBarProps) {
  const normalizedProgress = Math.min(Math.max(progress, 0), 100);

  const variantStyles = {
    default: "from-cyan-500 to-blue-600",
    success: "from-green-500 to-emerald-600",
    warning: "from-amber-500 to-orange-600",
    error: "from-red-500 to-rose-600",
  };

  const glowColors = {
    default: "shadow-cyan-500/50",
    success: "shadow-green-500/50",
    warning: "shadow-amber-500/50",
    error: "shadow-red-500/50",
  };

  return (
    <div className={cn("space-y-2", className)}>
      {(label || showPercentage) && (
        <div className="flex items-center justify-between text-sm">
          {label && <span className="text-gray-300">{label}</span>}
          {showPercentage && (
            <span className="text-gray-400 font-mono">
              {normalizedProgress.toFixed(0)}%
            </span>
          )}
        </div>
      )}

      <div className="relative w-full h-2 bg-gray-800 rounded-full overflow-hidden">
        {/* Barra de fundo com shimmer */}
        <div className="absolute inset-0 bg-gradient-to-r from-transparent via-gray-700/50 to-transparent animate-shimmer" />

        {/* Barra de progresso */}
        <motion.div
          initial={animate ? { width: 0 } : { width: `${normalizedProgress}%` }}
          animate={{ width: `${normalizedProgress}%` }}
          transition={{
            duration: animate ? 0.5 : 0,
            ease: "easeOut",
          }}
          className={cn(
            "h-full rounded-full bg-gradient-to-r shadow-lg",
            variantStyles[variant],
            glowColors[variant]
          )}
        >
          {/* Efeito de brilho animado */}
          <div className="w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer" />
        </motion.div>
      </div>
    </div>
  );
}

interface MultiProgressBarProps {
  segments: Array<{
    value: number;
    label: string;
    color: string;
  }>;
  className?: string;
}

export function MultiProgressBar({ segments, className }: MultiProgressBarProps) {
  const total = segments.reduce((sum, seg) => sum + seg.value, 0);

  return (
    <div className={cn("space-y-3", className)}>
      <div className="flex items-center h-3 w-full bg-gray-800 rounded-full overflow-hidden">
        {segments.map((segment, index) => {
          const percentage = (segment.value / total) * 100;

          return (
            <motion.div
              key={index}
              initial={{ width: 0 }}
              animate={{ width: `${percentage}%` }}
              transition={{ duration: 0.5, delay: index * 0.1 }}
              className="h-full"
              style={{ backgroundColor: segment.color }}
            />
          );
        })}
      </div>

      <div className="grid grid-cols-2 gap-2">
        {segments.map((segment, index) => {
          const percentage = ((segment.value / total) * 100).toFixed(1);

          return (
            <div key={index} className="flex items-center gap-2">
              <div
                className="w-3 h-3 rounded-full"
                style={{ backgroundColor: segment.color }}
              />
              <span className="text-xs text-gray-400">
                {segment.label} ({percentage}%)
              </span>
            </div>
          );
        })}
      </div>
    </div>
  );
}

```

---
#### `components/ui/Select.tsx`

```
"use client";

import { forwardRef, SelectHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { ChevronDown } from "lucide-react";

interface SelectOption {
  value: string;
  label: string;
  disabled?: boolean;
}

interface SelectProps extends Omit<SelectHTMLAttributes<HTMLSelectElement>, "onChange"> {
  label?: string;
  error?: string;
  options: SelectOption[];
  placeholder?: string;
  onChange?: (value: string) => void;
}

const Select = forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, label, error, options, placeholder, id, onChange, ...props }, ref) => {
    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={selectId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <div className="relative">
          <select
            ref={ref}
            id={selectId}
            className={cn(
              "w-full rounded-lg border bg-gray-800 px-4 py-2 pr-10 text-white appearance-none cursor-pointer",
              "transition-colors duration-200",
              "focus:outline-none focus:ring-1",
              error
                ? "border-red-500 focus:border-red-500 focus:ring-red-500"
                : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
              className
            )}
            onChange={(e) => onChange?.(e.target.value)}
            {...props}
          >
            {placeholder && (
              <option value="" disabled>
                {placeholder}
              </option>
            )}
            {options.map((option) => (
              <option
                key={option.value}
                value={option.value}
                disabled={option.disabled}
              >
                {option.label}
              </option>
            ))}
          </select>
          <ChevronDown className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none" />
        </div>
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
      </div>
    );
  }
);

Select.displayName = "Select";

export default Select;

```

---
#### `components/ui/StepIndicator.tsx`

```
"use client";

import { motion } from "framer-motion";
import { CheckCircle2, Circle, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";

export interface Step {
  id: string;
  title: string;
  description?: string;
  status: "pending" | "active" | "completed" | "error";
}

interface StepIndicatorProps {
  steps: Step[];
  currentStep: number;
  className?: string;
  orientation?: "horizontal" | "vertical";
  showDescription?: boolean;
}

export default function StepIndicator({
  steps,
  currentStep,
  className,
  orientation = "horizontal",
  showDescription = true,
}: StepIndicatorProps) {
  return orientation === "horizontal" ? (
    <HorizontalStepIndicator
      steps={steps}
      currentStep={currentStep}
      className={className}
      showDescription={showDescription}
    />
  ) : (
    <VerticalStepIndicator
      steps={steps}
      currentStep={currentStep}
      className={className}
      showDescription={showDescription}
    />
  );
}

function HorizontalStepIndicator({
  steps,
  currentStep,
  className,
  showDescription,
}: Omit<StepIndicatorProps, "orientation">) {
  return (
    <div className={cn("w-full", className)}>
      <div className="flex items-center justify-between">
        {steps.map((step, index) => {
          const isCompleted = index < currentStep;
          const isActive = index === currentStep;
          const isPending = index > currentStep;

          return (
            <div key={step.id} className="flex items-center flex-1">
              {/* Step Circle */}
              <div className="flex flex-col items-center">
                <div className="relative">
                  {isCompleted ? (
                    <motion.div
                      initial={{ scale: 0 }}
                      animate={{ scale: 1 }}
                      className="w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-green-500/50"
                    >
                      <CheckCircle2 className="w-6 h-6 text-white" />
                    </motion.div>
                  ) : isActive ? (
                    <motion.div
                      animate={{
                        scale: [1, 1.1, 1],
                        boxShadow: [
                          "0 0 0 0 rgba(6, 182, 212, 0.7)",
                          "0 0 0 10px rgba(6, 182, 212, 0)",
                          "0 0 0 0 rgba(6, 182, 212, 0)",
                        ],
                      }}
                      transition={{
                        duration: 2,
                        repeat: Infinity,
                        repeatType: "loop",
                      }}
                      className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/50"
                    >
                      <Loader2 className="w-6 h-6 text-white animate-spin" />
                    </motion.div>
                  ) : (
                    <div className="w-10 h-10 rounded-full bg-gray-800 border-2 border-gray-700 flex items-center justify-center">
                      <Circle className="w-6 h-6 text-gray-600" />
                    </div>
                  )}
                </div>

                {/* Step Info */}
                <div className="mt-3 text-center max-w-[120px]">
                  <p
                    className={cn(
                      "text-sm font-semibold",
                      isCompleted && "text-green-400",
                      isActive && "text-cyan-400",
                      isPending && "text-gray-500"
                    )}
                  >
                    {step.title}
                  </p>
                  {showDescription && step.description && (
                    <p className="text-xs text-gray-600 mt-1">{step.description}</p>
                  )}
                </div>
              </div>

              {/* Connector Line */}
              {index < steps.length - 1 && (
                <div className="flex-1 h-0.5 mx-4 relative">
                  <div className="absolute inset-0 bg-gray-800" />
                  <motion.div
                    initial={{ width: "0%" }}
                    animate={{ width: index < currentStep ? "100%" : "0%" }}
                    transition={{ duration: 0.5 }}
                    className="absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-600"
                  />
                </div>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}

function VerticalStepIndicator({
  steps,
  currentStep,
  className,
  showDescription,
}: Omit<StepIndicatorProps, "orientation">) {
  return (
    <div className={cn("space-y-6", className)}>
      {steps.map((step, index) => {
        const isCompleted = index < currentStep;
        const isActive = index === currentStep;
        const isPending = index > currentStep;

        return (
          <div key={step.id} className="flex items-start gap-4">
            {/* Step Circle and Line */}
            <div className="flex flex-col items-center">
              <div className="relative">
                {isCompleted ? (
                  <motion.div
                    initial={{ scale: 0 }}
                    animate={{ scale: 1 }}
                    className="w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-green-500/50"
                  >
                    <CheckCircle2 className="w-6 h-6 text-white" />
                  </motion.div>
                ) : isActive ? (
                  <motion.div
                    animate={{
                      scale: [1, 1.1, 1],
                      boxShadow: [
                        "0 0 0 0 rgba(6, 182, 212, 0.7)",
                        "0 0 0 10px rgba(6, 182, 212, 0)",
                        "0 0 0 0 rgba(6, 182, 212, 0)",
                      ],
                    }}
                    transition={{
                      duration: 2,
                      repeat: Infinity,
                      repeatType: "loop",
                    }}
                    className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/50"
                  >
                    <Loader2 className="w-6 h-6 text-white animate-spin" />
                  </motion.div>
                ) : (
                  <div className="w-10 h-10 rounded-full bg-gray-800 border-2 border-gray-700 flex items-center justify-center">
                    <Circle className="w-6 h-6 text-gray-600" />
                  </div>
                )}
              </div>

              {/* Connector Line */}
              {index < steps.length - 1 && (
                <div className="w-0.5 h-16 my-2 relative">
                  <div className="absolute inset-0 bg-gray-800" />
                  <motion.div
                    initial={{ height: "0%" }}
                    animate={{ height: index < currentStep ? "100%" : "0%" }}
                    transition={{ duration: 0.5 }}
                    className="absolute inset-0 bg-gradient-to-b from-green-500 to-emerald-600"
                  />
                </div>
              )}
            </div>

            {/* Step Info */}
            <div className="flex-1 pt-2">
              <p
                className={cn(
                  "text-base font-semibold",
                  isCompleted && "text-green-400",
                  isActive && "text-cyan-400",
                  isPending && "text-gray-500"
                )}
              >
                {step.title}
              </p>
              {showDescription && step.description && (
                <p className="text-sm text-gray-600 mt-1">{step.description}</p>
              )}
            </div>
          </div>
        );
      })}
    </div>
  );
}

// Compact version for minimal space
interface CompactStepIndicatorProps {
  totalSteps: number;
  currentStep: number;
  className?: string;
}

export function CompactStepIndicator({
  totalSteps,
  currentStep,
  className,
}: CompactStepIndicatorProps) {
  const progress = ((currentStep + 1) / totalSteps) * 100;

  return (
    <div className={cn("space-y-2", className)}>
      <div className="flex items-center justify-between text-sm">
        <span className="text-gray-400">
          Etapa {currentStep + 1} de {totalSteps}
        </span>
        <span className="text-cyan-400 font-semibold">{progress.toFixed(0)}%</span>
      </div>
      <div className="relative w-full h-2 bg-gray-800 rounded-full overflow-hidden">
        <motion.div
          initial={{ width: 0 }}
          animate={{ width: `${progress}%` }}
          transition={{ duration: 0.5 }}
          className="h-full rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 shadow-lg shadow-cyan-500/50"
        />
      </div>
    </div>
  );
}

```

---
#### `components/ui/StreamingText.tsx`

```
"use client";

import { useState, useEffect, useRef } from "react";
import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

interface StreamingTextProps {
  text: string;
  speed?: number; // caracteres por segundo
  className?: string;
  onComplete?: () => void;
  showCursor?: boolean;
  skipAnimation?: boolean;
}

export default function StreamingText({
  text,
  speed = 50,
  className,
  onComplete,
  showCursor = true,
  skipAnimation = false,
}: StreamingTextProps) {
  const [displayedText, setDisplayedText] = useState("");
  const [isComplete, setIsComplete] = useState(false);
  const indexRef = useRef(0);

  useEffect(() => {
    if (skipAnimation) {
      setDisplayedText(text);
      setIsComplete(true);
      onComplete?.();
      return;
    }

    indexRef.current = 0;
    setDisplayedText("");
    setIsComplete(false);

    const interval = setInterval(() => {
      if (indexRef.current < text.length) {
        setDisplayedText(text.slice(0, indexRef.current + 1));
        indexRef.current++;
      } else {
        clearInterval(interval);
        setIsComplete(true);
        onComplete?.();
      }
    }, 1000 / speed);

    return () => clearInterval(interval);
  }, [text, speed, onComplete, skipAnimation]);

  return (
    <div className={cn("relative", className)}>
      <span className="whitespace-pre-wrap">{displayedText}</span>
      {showCursor && !isComplete && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          className="inline-block w-0.5 h-4 bg-cyan-400 ml-1"
        />
      )}
    </div>
  );
}

interface StreamingMarkdownProps {
  markdown: string;
  speed?: number;
  className?: string;
  onComplete?: () => void;
}

export function StreamingMarkdown({
  markdown,
  speed = 50,
  className,
  onComplete,
}: StreamingMarkdownProps) {
  const [displayedText, setDisplayedText] = useState("");
  const [isComplete, setIsComplete] = useState(false);
  const indexRef = useRef(0);

  useEffect(() => {
    indexRef.current = 0;
    setDisplayedText("");
    setIsComplete(false);

    const interval = setInterval(() => {
      if (indexRef.current < markdown.length) {
        setDisplayedText(markdown.slice(0, indexRef.current + 1));
        indexRef.current++;
      } else {
        clearInterval(interval);
        setIsComplete(true);
        onComplete?.();
      }
    }, 1000 / speed);

    return () => clearInterval(interval);
  }, [markdown, speed, onComplete]);

  // Renderizar markdown básico
  const renderMarkdown = (text: string) => {
    const lines = text.split("\n");
    return lines.map((line, index) => {
      // Headers
      if (line.startsWith("### ")) {
        return (
          <h3 key={index} className="text-lg font-semibold text-white mt-4 mb-2">
            {line.replace("### ", "")}
          </h3>
        );
      }
      if (line.startsWith("## ")) {
        return (
          <h2 key={index} className="text-xl font-bold text-white mt-4 mb-2">
            {line.replace("## ", "")}
          </h2>
        );
      }
      if (line.startsWith("# ")) {
        return (
          <h1 key={index} className="text-2xl font-bold text-white mt-4 mb-3">
            {line.replace("# ", "")}
          </h1>
        );
      }

      // Lista
      if (line.startsWith("- ") || line.startsWith("* ")) {
        return (
          <li key={index} className="text-gray-300 ml-4">
            • {line.replace(/^[-*] /, "")}
          </li>
        );
      }

      // Parágrafo vazio
      if (line.trim() === "") {
        return <div key={index} className="h-2" />;
      }

      // Parágrafo normal
      return (
        <p key={index} className="text-gray-300 mb-2">
          {line}
        </p>
      );
    });
  };

  return (
    <div className={cn("space-y-1", className)}>
      {renderMarkdown(displayedText)}
      {!isComplete && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          className="inline-block w-0.5 h-4 bg-cyan-400 ml-1"
        />
      )}
    </div>
  );
}

interface TypewriterProps {
  words: string[];
  loop?: boolean;
  delayBetweenWords?: number;
  className?: string;
}

export function Typewriter({
  words,
  loop = true,
  delayBetweenWords = 2000,
  className,
}: TypewriterProps) {
  const [currentWordIndex, setCurrentWordIndex] = useState(0);
  const [displayedText, setDisplayedText] = useState("");
  const [isDeleting, setIsDeleting] = useState(false);

  useEffect(() => {
    const currentWord = words[currentWordIndex];

    const timeout = setTimeout(
      () => {
        if (!isDeleting) {
          if (displayedText.length < currentWord.length) {
            setDisplayedText(currentWord.slice(0, displayedText.length + 1));
          } else {
            setTimeout(() => setIsDeleting(true), delayBetweenWords);
          }
        } else {
          if (displayedText.length > 0) {
            setDisplayedText(displayedText.slice(0, -1));
          } else {
            setIsDeleting(false);
            if (loop || currentWordIndex < words.length - 1) {
              setCurrentWordIndex((prev) => (prev + 1) % words.length);
            }
          }
        }
      },
      isDeleting ? 50 : 100
    );

    return () => clearTimeout(timeout);
  }, [displayedText, isDeleting, currentWordIndex, words, loop, delayBetweenWords]);

  return (
    <span className={cn("inline-flex items-center", className)}>
      <span>{displayedText}</span>
      <motion.span
        animate={{ opacity: [1, 0] }}
        transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
        className="inline-block w-0.5 h-5 bg-cyan-400 ml-1"
      />
    </span>
  );
}

```

---
#### `components/ui/Textarea.tsx`

```
"use client";

import { forwardRef, TextareaHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface TextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Textarea = forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const textareaId = id || `textarea-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={textareaId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <textarea
          ref={ref}
          id={textareaId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200 resize-none",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Textarea.displayName = "Textarea";

export default Textarea;

```

---
#### `components/ui/Toggle.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface ToggleProps {
  checked: boolean;
  onChange: (checked: boolean) => void;
  label?: string;
  description?: string;
  disabled?: boolean;
}

export default function Toggle({
  checked,
  onChange,
  label,
  description,
  disabled = false,
}: ToggleProps) {
  return (
    <div className="flex items-start gap-3">
      <button
        type="button"
        role="switch"
        aria-checked={checked}
        disabled={disabled}
        onClick={() => !disabled && onChange(!checked)}
        className={cn(
          "relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          checked ? "bg-primary-600" : "bg-gray-700",
          disabled && "opacity-50 cursor-not-allowed"
        )}
      >
        <span
          className={cn(
            "pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",
            checked ? "translate-x-5" : "translate-x-0"
          )}
        />
      </button>
      {(label || description) && (
        <div className="flex flex-col">
          {label && (
            <span className={cn("text-sm font-medium text-white", disabled && "opacity-50")}>
              {label}
            </span>
          )}
          {description && (
            <span className={cn("text-sm text-gray-400", disabled && "opacity-50")}>
              {description}
            </span>
          )}
        </div>
      )}
    </div>
  );
}

```

---
#### `components/workflow/ModeSelector.tsx`

```
"use client";

import { motion } from "framer-motion";
import { Zap, Settings, Crown, CheckCircle2, Lock } from "lucide-react";
import { WorkflowMode } from "@/types";
import { WORKFLOW_MODES, WorkflowModeConfig } from "@/lib/workflow-modes";
import { cn } from "@/lib/utils";
import Badge from "@/components/ui/Badge";

interface ModeSelectorProps {
  selectedMode: WorkflowMode;
  onSelect: (mode: WorkflowMode) => void;
  className?: string;
}

const iconMap = {
  Zap: Zap,
  Settings: Settings,
  Crown: Crown,
};

export default function ModeSelector({
  selectedMode,
  onSelect,
  className,
}: ModeSelectorProps) {
  const modes = Object.values(WORKFLOW_MODES);

  return (
    <div className={cn("space-y-4", className)}>
      <div>
        <h3 className="text-lg font-semibold text-white mb-2">
          Escolha o Modo de Operação
        </h3>
        <p className="text-sm text-gray-400">
          Selecione como você deseja criar seu vídeo
        </p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {modes.map((mode) => (
          <ModeCard
            key={mode.id}
            mode={mode}
            isSelected={selectedMode === mode.id}
            onSelect={() => onSelect(mode.id)}
          />
        ))}
      </div>
    </div>
  );
}

interface ModeCardProps {
  mode: WorkflowModeConfig;
  isSelected: boolean;
  onSelect: () => void;
}

function ModeCard({ mode, isSelected, onSelect }: ModeCardProps) {
  const Icon = iconMap[mode.icone as keyof typeof iconMap] || Zap;

  return (
    <motion.button
      onClick={mode.ativo ? onSelect : undefined}
      disabled={!mode.ativo}
      whileHover={mode.ativo ? { scale: 1.02 } : undefined}
      whileTap={mode.ativo ? { scale: 0.98 } : undefined}
      className={cn(
        "relative p-6 rounded-xl border text-left transition-all duration-200",
        "bg-gradient-to-br backdrop-blur-sm",
        mode.ativo
          ? isSelected
            ? "border-cyan-500 bg-cyan-500/10 shadow-lg shadow-cyan-500/20"
            : "border-gray-800 bg-gray-900/50 hover:border-gray-700"
          : "border-gray-800 bg-gray-900/30 cursor-not-allowed opacity-60"
      )}
    >
      {/* Badge de destaque */}
      {mode.badge && (
        <div className="absolute top-4 right-4">
          <Badge variant={mode.ativo ? "primary" : "secondary"}>
            {mode.badge}
          </Badge>
        </div>
      )}

      {/* Ícone do modo */}
      <div
        className={cn(
          "mb-4 p-3 rounded-lg inline-flex",
          mode.ativo
            ? `bg-gradient-to-br ${mode.cor}`
            : "bg-gray-800"
        )}
      >
        {mode.ativo ? (
          <Icon className="w-6 h-6 text-white" />
        ) : (
          <Lock className="w-6 h-6 text-gray-500" />
        )}
      </div>

      {/* Nome e descrição */}
      <div className="mb-4">
        <h4 className="text-lg font-semibold text-white mb-1 flex items-center gap-2">
          {mode.nome}
          {isSelected && mode.ativo && (
            <CheckCircle2 className="w-5 h-5 text-cyan-400" />
          )}
        </h4>
        <p className="text-sm text-gray-400">{mode.descricao}</p>
      </div>

      {/* Tempo estimado */}
      {mode.ativo && (
        <div className="mb-4 text-xs text-gray-500">
          ⏱️ Tempo estimado: {mode.tempoEstimado}
        </div>
      )}

      {/* Lista de recursos */}
      {mode.ativo && (
        <div className="space-y-2">
          <p className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
            Recursos incluídos:
          </p>
          <ul className="space-y-1">
            {mode.recursos.slice(0, 3).map((recurso, index) => (
              <li key={index} className="text-xs text-gray-500 flex items-start gap-2">
                <span className="text-cyan-500 mt-0.5">•</span>
                <span>{recurso}</span>
              </li>
            ))}
            {mode.recursos.length > 3 && (
              <li className="text-xs text-gray-500 italic">
                + {mode.recursos.length - 3} mais recursos
              </li>
            )}
          </ul>
        </div>
      )}

      {!mode.ativo && (
        <div className="mt-4">
          <p className="text-sm text-gray-500 italic">
            Este modo estará disponível em breve
          </p>
        </div>
      )}

      {/* Indicador de seleção */}
      {isSelected && mode.ativo && (
        <div className="absolute inset-0 rounded-xl border-2 border-cyan-500 pointer-events-none" />
      )}
    </motion.button>
  );
}

```

---
#### `lib/agents/adaptive-analysis-agent.ts`

```
/**
 * ============================================
 * ORION - Agente de Análise Adaptativa
 * ============================================
 *
 * Agente de IA que se adapta aos inputs disponíveis para
 * gerar análises e insights relevantes.
 */

import { ContextData, YouTubeStudioData, CompetitorData } from '@/types';
import { extractInsightsFromSpreadsheet } from '@/lib/services/spreadsheet.service';

export interface AdaptiveAnalysisResult {
  summary: string;
  insights: string[];
  suggestions: string[];
  topics: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  } | null;
}

/**
 * Analisa o contexto de forma adaptativa baseado nos inputs disponíveis
 */
export async function analyzeContext(context: ContextData): Promise<AdaptiveAnalysisResult> {
  const insights: string[] = [];
  const suggestions: string[] = [];
  const topics: string[] = [];
  const hooks: string[] = [];
  let structure = null;

  // Análise da planilha do YouTube Studio
  if (context.planilhaYouTubeStudio) {
    const spreadsheetInsights = analyzeSpreadsheetData(context.planilhaYouTubeStudio);
    insights.push(...spreadsheetInsights.insights);
    suggestions.push(...spreadsheetInsights.suggestions);
  }

  // Análise do tema fornecido
  if (context.theme) {
    const themeAnalysis = analyzeTheme(context.theme, context.tagsFoco);
    insights.push(...themeAnalysis.insights);
    topics.push(...themeAnalysis.topics);
    suggestions.push(...themeAnalysis.suggestions);
  }

  // Análise do concorrente
  if (context.dadosConcorrente) {
    const competitorAnalysis = analyzeCompetitor(context.dadosConcorrente);
    insights.push(...competitorAnalysis.insights);
    hooks.push(...competitorAnalysis.hooks);
    structure = competitorAnalysis.structure;
  }

  // Análise de transcrição
  if (context.transcricao) {
    const transcriptAnalysis = analyzeTranscript(context.transcricao);
    insights.push(...transcriptAnalysis.insights);
    hooks.push(...transcriptAnalysis.hooks);
    if (!structure) {
      structure = transcriptAnalysis.structure;
    }
  }

  // Cruzamento de dados
  const crossAnalysis = performCrossAnalysis(context);
  suggestions.push(...crossAnalysis);

  // Gerar resumo
  const summary = generateSummary(context, insights);

  return {
    summary,
    insights: [...new Set(insights)], // Remover duplicatas
    suggestions: [...new Set(suggestions)],
    topics: [...new Set(topics)],
    hooks: [...new Set(hooks)],
    structure
  };
}

/**
 * Analisa dados da planilha do YouTube Studio
 */
function analyzeSpreadsheetData(data: YouTubeStudioData): {
  insights: string[];
  suggestions: string[];
} {
  const insights = extractInsightsFromSpreadsheet(data);
  const suggestions: string[] = [];

  // Sugestões baseadas em performance
  if (data.avgCTR && data.avgCTR < 5) {
    suggestions.push('Teste thumbnails mais chamativas com cores vibrantes e rostos expressivos');
    suggestions.push('Use títulos que despertem curiosidade sem revelar tudo');
  }

  if (data.avgWatchTime && data.avgWatchTime < 180) {
    suggestions.push('Comece com um gancho forte nos primeiros 5 segundos');
    suggestions.push('Mantenha o ritmo dinâmico com cortes rápidos');
  }

  // Identificar padrões de sucesso
  if (data.topPerformingVideos && data.topPerformingVideos.length > 0) {
    const topTitles = data.topPerformingVideos.slice(0, 3).map(v => v.title);
    suggestions.push(`Padrões de sucesso identificados nos seus melhores vídeos: ${topTitles.join(', ')}`);
  }

  return { insights, suggestions };
}

/**
 * Analisa tema e tags de foco
 */
function analyzeTheme(theme: string, tagsFoco: string[]): {
  insights: string[];
  topics: string[];
  suggestions: string[];
} {
  const insights: string[] = [];
  const topics: string[] = [];
  const suggestions: string[] = [];

  // Expandir tema em subtópicos
  insights.push(`Tema principal: ${theme}`);

  // Processar tema para identificar subtópicos
  const themeWords = theme.toLowerCase().split(/\s+/);
  if (themeWords.length > 2) {
    topics.push(theme);
    // Sugerir variações
    suggestions.push(`Considere abordar diferentes ângulos: "Como", "Por que", "O que"`);
  }

  // Análise de tags de foco
  if (tagsFoco.length > 0) {
    insights.push(`Tags de foco: ${tagsFoco.join(', ')}`);
    topics.push(...tagsFoco);
    suggestions.push('Use as tags de foco como palavras-chave no título e descrição');
  }

  return { insights, topics, suggestions };
}

/**
 * Analisa vídeo concorrente
 */
function analyzeCompetitor(competitor: CompetitorData): {
  insights: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  };
} {
  const insights: string[] = [];
  const hooks: string[] = [];

  insights.push(`Vídeo de referência: "${competitor.videoTitle || 'Título não disponível'}"`);

  if (competitor.viewCount) {
    insights.push(`Performance: ${competitor.viewCount.toLocaleString()} visualizações`);
  }

  // Analisar tags do concorrente
  if (competitor.videoTags && competitor.videoTags.length > 0) {
    insights.push(`Tags usadas: ${competitor.videoTags.slice(0, 5).join(', ')}`);
  }

  // Extrair possíveis ganchos do título
  if (competitor.videoTitle) {
    const title = competitor.videoTitle;
    if (title.includes('?')) {
      hooks.push('Usar formato de pergunta no gancho');
    }
    if (/\d+/.test(title)) {
      hooks.push('Incluir números específicos para gerar curiosidade');
    }
    if (title.includes('!')) {
      hooks.push('Usar tom exclamativo para criar urgência');
    }
  }

  // Estrutura básica inferida
  const structure = {
    intro: competitor.videoTitle || 'Título chamativo',
    mainPoints: competitor.videoTags.slice(0, 3) || ['Ponto principal 1', 'Ponto principal 2', 'Ponto principal 3'],
    cta: 'Call-to-action forte'
  };

  return { insights, hooks, structure };
}

/**
 * Analisa transcrição de vídeo
 */
function analyzeTranscript(transcript: string): {
  insights: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  };
} {
  const insights: string[] = [];
  const hooks: string[] = [];

  // Analisar comprimento
  const wordCount = transcript.split(/\s+/).length;
  insights.push(`Transcrição com aproximadamente ${wordCount} palavras`);

  // Identificar possíveis ganchos (primeiras frases)
  const sentences = transcript.split(/[.!?]+/).filter(s => s.trim().length > 0);
  if (sentences.length > 0) {
    const firstSentence = sentences[0].trim();
    hooks.push(`Possível gancho: "${firstSentence}"`);
  }

  // Identificar CTAs
  const lowerTranscript = transcript.toLowerCase();
  if (lowerTranscript.includes('inscreva') || lowerTranscript.includes('subscribe')) {
    insights.push('CTA de inscrição identificado no vídeo');
  }
  if (lowerTranscript.includes('like') || lowerTranscript.includes('curtir')) {
    insights.push('CTA de curtida identificado no vídeo');
  }
  if (lowerTranscript.includes('comentário') || lowerTranscript.includes('comment')) {
    insights.push('CTA de comentário identificado no vídeo');
  }

  // Estrutura básica
  const structure = {
    intro: sentences[0] || 'Introdução forte',
    mainPoints: sentences.slice(1, 4).filter(s => s.length > 20) || ['Ponto 1', 'Ponto 2', 'Ponto 3'],
    cta: 'Inscreva-se para mais conteúdo'
  };

  return { insights, hooks, structure };
}

/**
 * Realiza análise cruzada de múltiplas fontes
 */
function performCrossAnalysis(context: ContextData): string[] {
  const suggestions: string[] = [];

  // Cruzar dados de planilha com tema
  if (context.planilhaYouTubeStudio && context.theme) {
    suggestions.push(
      'Cruzando dados: Use insights de performance dos seus vídeos anteriores para guiar o novo conteúdo sobre este tema'
    );
  }

  // Cruzar concorrente com suas métricas
  if (context.dadosConcorrente && context.planilhaYouTubeStudio) {
    suggestions.push(
      'Análise competitiva: Compare as estratégias do concorrente com o que funciona no seu canal'
    );
  }

  // Cruzar transcrição com tema
  if (context.transcricao && context.theme) {
    suggestions.push(
      'Adapte a estrutura da transcrição fornecida para se adequar ao tema escolhido'
    );
  }

  return suggestions;
}

/**
 * Gera resumo da análise
 */
function generateSummary(context: ContextData, insights: string[]): string {
  const sources: string[] = [];

  if (context.planilhaYouTubeStudio) sources.push('análise de performance histórica');
  if (context.theme) sources.push('tema definido');
  if (context.dadosConcorrente) sources.push('análise de concorrente');
  if (context.transcricao) sources.push('transcrição de referência');

  const summary = `Análise completa realizada com base em: ${sources.join(', ')}.
    ${insights.length} insights identificados.
    ${context.tagsFoco.length > 0 ? `Foco em: ${context.tagsFoco.join(', ')}.` : ''}
    Modo de operação: ${context.mode}.`;

  return summary;
}

```

---
#### `lib/agents/index.ts`

```
export { runResearchAgent, type ResearchAgentResult } from './research-agent';
export { runScriptAgent, type ScriptAgentResult, type ResearchContext } from './script-agent';

```

---
#### `lib/agents/research-agent.ts`

```
import { google } from '@ai-sdk/google';
import { generateText } from 'ai';

/**
 * Research Agent using Gemini 2.0
 *
 * This agent performs deep research on YouTube trends,
 * channel analytics, and content opportunities.
 */

export interface ResearchAgentResult {
  summary: string;
  topPerformingTopics: string[];
  audienceInsights: string[];
  contentGaps: string[];
  trends: string[];
  competitors: string[];
}

export async function runResearchAgent(
  topic: string,
  channelContext?: string
): Promise<ResearchAgentResult> {
  const { text } = await generateText({
    model: google('gemini-2.0-flash-exp'),
    system: `You are an expert YouTube content research agent for the Brazilian market.
Your job is to analyze trends, audience behavior, and content opportunities.
Always provide actionable insights based on data patterns.
Respond in valid JSON format.`,
    prompt: `Research topic: "${topic}"
${channelContext ? `Channel context: ${channelContext}` : ''}

Analyze and return JSON with:
{
  "summary": "Brief research summary",
  "topPerformingTopics": ["topic1", "topic2", ...],
  "audienceInsights": ["insight1", "insight2", ...],
  "contentGaps": ["gap1", "gap2", ...],
  "trends": ["trend1", "trend2", ...],
  "competitors": ["competitor insight 1", ...]
}`,
  });

  const jsonMatch = text.match(/\{[\s\S]*\}/);
  if (jsonMatch) {
    return JSON.parse(jsonMatch[0]);
  }

  return {
    summary: text,
    topPerformingTopics: [],
    audienceInsights: [],
    contentGaps: [],
    trends: [],
    competitors: [],
  };
}

```

---
#### `lib/agents/script-agent.ts`

```
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

/**
 * Script Agent using Claude
 *
 * This agent creates engaging YouTube scripts with:
 * - Strong hooks
 * - Value-packed content
 * - Clear CTAs
 * - SEO-optimized titles
 */

export interface ScriptAgentResult {
  title: string;
  hook: string;
  sections: {
    title: string;
    content: string;
  }[];
  cta: string;
  fullScript: string;
  metadata: {
    wordCount: number;
    estimatedDuration: string;
    tone: string;
  };
}

export interface ResearchContext {
  summary?: string;
  topPerformingTopics?: string[];
  audienceInsights?: string[];
  trends?: string[];
}

export async function runScriptAgent(
  topic: string,
  research: ResearchContext
): Promise<ScriptAgentResult> {
  const { text } = await generateText({
    model: anthropic('claude-sonnet-4-20250514'),
    system: `You are an expert YouTube scriptwriter for the Brazilian market.
Create engaging, retention-optimized scripts that hook viewers in the first 30 seconds.
Always respond in valid JSON format.`,
    prompt: `Create a YouTube script for: "${topic}"

Research insights:
- Top topics: ${research.topPerformingTopics?.join(', ') || 'N/A'}
- Audience insights: ${research.audienceInsights?.join(', ') || 'N/A'}
- Trends: ${research.trends?.join(', ') || 'N/A'}
- Summary: ${research.summary || 'N/A'}

Create a complete script with:
1. Attention-grabbing hook (first 30 seconds)
2. 3-5 main content sections
3. Strong call-to-action

Return JSON:
{
  "title": "SEO-optimized title",
  "hook": "Opening hook text",
  "sections": [
    {"title": "Section 1", "content": "Section content..."},
    {"title": "Section 2", "content": "Section content..."}
  ],
  "cta": "Call to action text",
  "fullScript": "Complete script text",
  "metadata": {
    "wordCount": 1500,
    "estimatedDuration": "10-12 minutes",
    "tone": "engaging and educational"
  }
}`,
  });

  const jsonMatch = text.match(/\{[\s\S]*\}/);
  if (jsonMatch) {
    return JSON.parse(jsonMatch[0]);
  }

  return {
    title: topic,
    hook: '',
    sections: [],
    cta: '',
    fullScript: text,
    metadata: {
      wordCount: text.split(' ').length,
      estimatedDuration: 'unknown',
      tone: 'neutral',
    },
  };
}

```

---
#### `lib/ai.ts`

```
import { AIProvider, AIModelOption, Diretriz } from "@/types";

export const AI_MODELS: Record<AIProvider, AIModelOption[]> = {
  openai: [
    { id: "gpt-4o", name: "GPT-4o", provider: "openai" },
    { id: "gpt-4o-mini", name: "GPT-4o Mini", provider: "openai" },
    { id: "gpt-4-turbo", name: "GPT-4 Turbo", provider: "openai" },
  ],
  google: [
    { id: "gemini-1.5-pro", name: "Gemini 1.5 Pro", provider: "google" },
    { id: "gemini-1.5-flash", name: "Gemini 1.5 Flash", provider: "google" },
    { id: "gemini-2.0-flash-exp", name: "Gemini 2.0 Flash", provider: "google" },
  ],
  anthropic: [
    { id: "claude-3-5-sonnet-latest", name: "Claude 3.5 Sonnet", provider: "anthropic" },
    { id: "claude-3-5-haiku-latest", name: "Claude 3.5 Haiku", provider: "anthropic" },
  ],
};

export function getModelsForProvider(provider: AIProvider): AIModelOption[] {
  return AI_MODELS[provider] || [];
}

export function getProviderName(provider: AIProvider): string {
  const names: Record<AIProvider, string> = {
    openai: "OpenAI",
    google: "Google Gemini",
    anthropic: "Anthropic Claude",
  };
  return names[provider];
}

export function buildSystemPromptWithDiretrizes(
  basePrompt: string,
  diretrizes: Diretriz[],
  scope: Diretriz["appliesTo"][number]
): string {
  const applicableDiretrizes = diretrizes.filter(
    (d) => d.active && d.appliesTo.includes(scope)
  );

  if (applicableDiretrizes.length === 0) {
    return basePrompt;
  }

  const diretrizesText = applicableDiretrizes
    .map((d) => `### ${d.title}\n${d.systemPrompt}`)
    .join("\n\n");

  return `${basePrompt}

## Diretrizes Adicionais (MUST FOLLOW):
${diretrizesText}`;
}

export interface GenerationRequest {
  provider: AIProvider;
  model: string;
  systemPrompt: string;
  userPrompt: string;
  temperature?: number;
}

export async function generateWithAI(request: GenerationRequest): Promise<string> {
  const response = await fetch("/api/ai/generate", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI generation failed");
  }

  const data = await response.json();
  return data.text;
}

export async function streamWithAI(
  request: GenerationRequest,
  onChunk: (chunk: string) => void
): Promise<void> {
  const response = await fetch("/api/ai/stream", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI streaming failed");
  }

  const reader = response.body?.getReader();
  if (!reader) throw new Error("No response body");

  const decoder = new TextDecoder();
  while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    const chunk = decoder.decode(value);
    onChunk(chunk);
  }
}

```

---
#### `lib/api-keys-store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";

export interface StoredAPIKeys {
  youtube_api_key: string;
  youtube_channel_id: string;
  openai_api_key: string;
  google_api_key: string;
  anthropic_api_key: string;
  pexels_api_key: string;
  pixabay_api_key: string;
  unsplash_api_key: string;
  json2video_api_key: string;
  elevenlabs_api_key: string;
  tavily_api_key: string;
  replicate_api_key: string;
  stability_api_key: string;
}

export interface APIKeyTestResult {
  key: keyof StoredAPIKeys;
  success: boolean;
  message: string;
}

interface APIKeysStore {
  keys: StoredAPIKeys;
  testedKeys: Record<keyof StoredAPIKeys, boolean>;

  setKey: (key: keyof StoredAPIKeys, value: string) => void;
  setKeys: (keys: Partial<StoredAPIKeys>) => void;
  markKeyTested: (key: keyof StoredAPIKeys, success: boolean) => void;
  clearKey: (key: keyof StoredAPIKeys) => void;
  clearAllKeys: () => void;
  getKey: (key: keyof StoredAPIKeys) => string;
  hasKey: (key: keyof StoredAPIKeys) => boolean;
}

const defaultKeys: StoredAPIKeys = {
  youtube_api_key: "",
  youtube_channel_id: "",
  openai_api_key: "",
  google_api_key: "",
  anthropic_api_key: "",
  pexels_api_key: "",
  pixabay_api_key: "",
  unsplash_api_key: "",
  json2video_api_key: "",
  elevenlabs_api_key: "",
  tavily_api_key: "",
  replicate_api_key: "",
  stability_api_key: "",
};

const defaultTestedKeys: Record<keyof StoredAPIKeys, boolean> = {
  youtube_api_key: false,
  youtube_channel_id: false,
  openai_api_key: false,
  google_api_key: false,
  anthropic_api_key: false,
  pexels_api_key: false,
  pixabay_api_key: false,
  unsplash_api_key: false,
  json2video_api_key: false,
  elevenlabs_api_key: false,
  tavily_api_key: false,
  replicate_api_key: false,
  stability_api_key: false,
};

export const useAPIKeysStore = create<APIKeysStore>()(
  persist(
    (set, get) => ({
      keys: defaultKeys,
      testedKeys: defaultTestedKeys,

      setKey: (key, value) =>
        set((state) => ({
          keys: { ...state.keys, [key]: value },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      setKeys: (keys) =>
        set((state) => ({
          keys: { ...state.keys, ...keys },
        })),

      markKeyTested: (key, success) =>
        set((state) => ({
          testedKeys: { ...state.testedKeys, [key]: success },
        })),

      clearKey: (key) =>
        set((state) => ({
          keys: { ...state.keys, [key]: "" },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      clearAllKeys: () =>
        set({
          keys: defaultKeys,
          testedKeys: defaultTestedKeys,
        }),

      getKey: (key) => get().keys[key],

      hasKey: (key) => !!get().keys[key],
    }),
    {
      name: "orion-api-keys",
      storage: createJSONStorage(() => sessionStorage), // Usar sessionStorage para segurança
    }
  )
);

// Helper para obter headers com as chaves da sessão
export function getAPIKeyHeaders(keys: StoredAPIKeys): Record<string, string> {
  const headers: Record<string, string> = {};

  if (keys.youtube_api_key) headers["x-youtube-api-key"] = keys.youtube_api_key;
  if (keys.youtube_channel_id) headers["x-youtube-channel-id"] = keys.youtube_channel_id;
  if (keys.openai_api_key) headers["x-openai-api-key"] = keys.openai_api_key;
  if (keys.google_api_key) headers["x-google-api-key"] = keys.google_api_key;
  if (keys.anthropic_api_key) headers["x-anthropic-api-key"] = keys.anthropic_api_key;
  if (keys.pexels_api_key) headers["x-pexels-api-key"] = keys.pexels_api_key;
  if (keys.pixabay_api_key) headers["x-pixabay-api-key"] = keys.pixabay_api_key;
  if (keys.unsplash_api_key) headers["x-unsplash-api-key"] = keys.unsplash_api_key;
  if (keys.json2video_api_key) headers["x-json2video-api-key"] = keys.json2video_api_key;
  if (keys.elevenlabs_api_key) headers["x-elevenlabs-api-key"] = keys.elevenlabs_api_key;
  if (keys.tavily_api_key) headers["x-tavily-api-key"] = keys.tavily_api_key;
  if (keys.replicate_api_key) headers["x-replicate-api-key"] = keys.replicate_api_key;
  if (keys.stability_api_key) headers["x-stability-api-key"] = keys.stability_api_key;

  return headers;
}

```

---
#### `lib/api-keys.ts`

```
import { APIKeyStatus } from "@/types";
import { StoredAPIKeys } from "./api-keys-store";

// Check API keys from server (env vars)
export async function checkServerAPIKeys(): Promise<APIKeyStatus> {
  try {
    const response = await fetch("/api/config/keys");
    if (!response.ok) {
      throw new Error("Failed to fetch API key status");
    }
    return await response.json();
  } catch (error) {
    console.error("Error checking API keys:", error);
    return getEmptyStatus();
  }
}

// Get empty status
function getEmptyStatus(): APIKeyStatus {
  return {
    youtube: false,
    openai: false,
    google: false,
    anthropic: false,
    pexels: false,
    pixabay: false,
    unsplash: false,
    json2video: false,
    elevenlabs: false,
    tavily: false,
    replicate: false,
    stability: false,
  };
}

// Check API keys from client storage
export function checkClientAPIKeys(keys: StoredAPIKeys): APIKeyStatus {
  return {
    youtube: !!(keys.youtube_api_key && keys.youtube_channel_id),
    openai: !!keys.openai_api_key,
    google: !!keys.google_api_key,
    anthropic: !!keys.anthropic_api_key,
    pexels: !!keys.pexels_api_key,
    pixabay: !!keys.pixabay_api_key,
    unsplash: !!keys.unsplash_api_key,
    json2video: !!keys.json2video_api_key,
    elevenlabs: !!keys.elevenlabs_api_key,
    tavily: !!keys.tavily_api_key,
    replicate: !!keys.replicate_api_key,
    stability: !!keys.stability_api_key,
  };
}

// Merge server and client status (client takes precedence if key exists)
export function mergeAPIKeyStatus(server: APIKeyStatus, client: APIKeyStatus): APIKeyStatus {
  return {
    youtube: server.youtube || client.youtube,
    openai: server.openai || client.openai,
    google: server.google || client.google,
    anthropic: server.anthropic || client.anthropic,
    pexels: server.pexels || client.pexels,
    pixabay: server.pixabay || client.pixabay,
    unsplash: server.unsplash || client.unsplash,
    json2video: server.json2video || client.json2video,
    elevenlabs: server.elevenlabs || client.elevenlabs,
    tavily: server.tavily || client.tavily,
    replicate: server.replicate || client.replicate,
    stability: server.stability || client.stability,
  };
}

// Combined check - gets status from both server and client
export async function checkAPIKeys(): Promise<APIKeyStatus> {
  // Get server status
  const serverStatus = await checkServerAPIKeys();

  // Get client keys from store (need to access outside React)
  let clientStatus = getEmptyStatus();

  if (typeof window !== "undefined") {
    try {
      const stored = sessionStorage.getItem("orion-api-keys");
      if (stored) {
        const parsed = JSON.parse(stored);
        if (parsed.state?.keys) {
          clientStatus = checkClientAPIKeys(parsed.state.keys);
        }
      }
    } catch (e) {
      console.error("Error reading client keys:", e);
    }
  }

  // Merge both
  return mergeAPIKeyStatus(serverStatus, clientStatus);
}

export function getRequiredKeysForStep(step: number): (keyof APIKeyStatus)[] {
  switch (step) {
    case 1:
      return ["youtube"];
    case 2:
      return ["openai", "google", "anthropic"]; // At least one AI provider
    case 4:
      return ["openai", "google", "anthropic"]; // AI for generation
    case 5:
      return ["pexels", "pixabay", "unsplash", "json2video"];
    case 6:
      return ["youtube"];
    default:
      return [];
  }
}

export function hasRequiredKeys(
  status: APIKeyStatus,
  step: number
): { hasAll: boolean; missing: string[] } {
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const _required = getRequiredKeysForStep(step);
  const missing: string[] = [];

  // For AI providers, we need at least one
  if (step === 2 || step === 4) {
    const aiProviders = ["openai", "google", "anthropic"] as const;
    const hasAnyAI = aiProviders.some((provider) => status[provider]);
    if (!hasAnyAI) {
      missing.push("At least one AI provider (OpenAI, Google, or Anthropic)");
    }
  }

  // For media, we need at least one
  if (step === 5) {
    const mediaProviders = ["pexels", "pixabay", "unsplash"] as const;
    const hasAnyMedia = mediaProviders.some((provider) => status[provider]);
    if (!hasAnyMedia) {
      missing.push("At least one media provider (Pexels, Pixabay, or Unsplash)");
    }
    if (!status.json2video) {
      missing.push("JSON2Video");
    }
  }

  // YouTube is always required for steps 1 and 6
  if ((step === 1 || step === 6) && !status.youtube) {
    missing.push("YouTube API");
  }

  return {
    hasAll: missing.length === 0,
    missing,
  };
}

```

---
#### `lib/branding.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { BrandingConfig } from '@/types';

const BRANDING_FILE = path.join(process.cwd(), 'data', 'branding.json');

/**
 * Get branding configuration
 */
export async function getBrandingConfig(): Promise<BrandingConfig> {
  try {
    const fileContent = await fs.readFile(BRANDING_FILE, 'utf-8');
    return JSON.parse(fileContent) as BrandingConfig;
  } catch (error) {
    console.error('Failed to read branding config:', error);
    // Return default branding if file doesn't exist
    return {
      systemName: 'ORION',
      logoUrl: null,
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update branding configuration
 */
export async function updateBrandingConfig(
  updates: Partial<Omit<BrandingConfig, 'updatedAt'>>
): Promise<BrandingConfig> {
  try {
    const currentConfig = await getBrandingConfig();

    const updatedConfig: BrandingConfig = {
      ...currentConfig,
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(BRANDING_FILE, JSON.stringify(updatedConfig, null, 2), 'utf-8');

    return updatedConfig;
  } catch (error) {
    console.error('Failed to update branding config:', error);
    throw error;
  }
}

/**
 * Reset branding to default (ORION)
 */
export async function resetBrandingConfig(): Promise<BrandingConfig> {
  const defaultConfig: BrandingConfig = {
    systemName: 'ORION',
    logoUrl: null,
    updatedAt: new Date().toISOString(),
  };

  try {
    await fs.writeFile(BRANDING_FILE, JSON.stringify(defaultConfig, null, 2), 'utf-8');
    return defaultConfig;
  } catch (error) {
    console.error('Failed to reset branding config:', error);
    throw error;
  }
}

```

---
#### `lib/db/index.ts`

```
export { prisma, default as db } from './prisma';

```

---
#### `lib/db/prisma.ts`

```
import { PrismaClient } from '@prisma/client';

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
  });

if (process.env.NODE_ENV !== 'production') {
  globalForPrisma.prisma = prisma;
}

export default prisma;

```

---
#### `lib/design-tokens.ts`

```
/**
 * ============================================
 * ORION Design System - Design Tokens
 * ============================================
 *
 * Single Source of Truth para cores, tipografia,
 * espaçamentos e motion do sistema ORION.
 *
 * Paleta baseada no logo oficial:
 * - Azul profundo como base
 * - Vermelho ORION como acento crítico
 * - Cyan/Indigo para estados ativos
 */

// ============================================
// CORES - PALETA ORION
// ============================================

/**
 * Cores de fundo em camadas (layers)
 * Do mais profundo ao mais elevado
 */
export const backgrounds = {
  layer0: '#050A12',  // Base mais profunda - fundo principal
  layer1: '#0A1628',  // Cards, sidebar - azul muito escuro
  layer2: '#0F2341',  // Elementos elevados
  layer3: '#1A3A5C',  // Hover states, menus
  layer4: '#245177',  // Elementos em destaque
} as const;

/**
 * Cores de superfície (para cards e painéis)
 */
export const surfaces = {
  default: 'rgba(10, 22, 40, 0.8)',    // Card padrão com transparência
  elevated: 'rgba(15, 35, 65, 0.9)',   // Card elevado
  glass: 'rgba(26, 58, 92, 0.4)',      // Glassmorphism
  glassSubtle: 'rgba(10, 22, 40, 0.6)', // Glass mais sutil
  overlay: 'rgba(5, 10, 18, 0.8)',     // Overlay para modais
} as const;

/**
 * Cores de borda
 */
export const borders = {
  subtle: 'rgba(30, 58, 95, 0.3)',      // Borda sutil
  default: 'rgba(30, 58, 95, 0.5)',     // Borda padrão
  strong: 'rgba(59, 130, 246, 0.4)',    // Borda com destaque
  active: 'rgba(6, 182, 212, 0.5)',     // Borda ativa (cyan)
  glow: 'rgba(59, 130, 246, 0.6)',      // Borda com glow
} as const;

/**
 * Cores de texto
 */
export const text = {
  primary: '#F0F4F8',     // Texto principal - quase branco
  secondary: '#94A3B8',   // Texto secundário - slate-400
  muted: '#64748B',       // Texto muted - slate-500
  disabled: '#475569',    // Texto desabilitado - slate-600
  inverse: '#0A1628',     // Texto em fundos claros
} as const;

/**
 * Cores da marca ORION
 */
export const brand = {
  // Azul ORION - cor principal
  blue: {
    50: '#E8F4FC',
    100: '#C5E4F8',
    200: '#8EC8F2',
    300: '#57ACEB',
    400: '#3B82F6',   // Azul principal
    500: '#2563EB',
    600: '#1D4ED8',
    700: '#1E3A5F',   // Azul profundo (do logo)
    800: '#0F2341',
    900: '#0A1628',   // Azul mais escuro
    950: '#050A12',
  },
  // Vermelho ORION - acento crítico (do logo YouTube)
  red: {
    50: '#FEF2F2',
    100: '#FEE2E2',
    200: '#FECACA',
    300: '#FCA5A5',
    400: '#F87171',
    500: '#EF4444',   // Vermelho principal
    600: '#DC2626',
    700: '#B91C1C',
    800: '#991B1B',
    900: '#7F1D1D',
    950: '#450A0A',
  },
} as const;

/**
 * Cores de acento
 */
export const accent = {
  // Cyan - estados ativos, links, foco
  cyan: {
    50: '#ECFEFF',
    100: '#CFFAFE',
    200: '#A5F3FC',
    300: '#67E8F9',
    400: '#22D3EE',
    500: '#06B6D4',   // Cyan principal
    600: '#0891B2',
    700: '#0E7490',
    800: '#155E75',
    900: '#164E63',
    950: '#083344',
  },
  // Indigo - estados secundários
  indigo: {
    50: '#EEF2FF',
    100: '#E0E7FF',
    200: '#C7D2FE',
    300: '#A5B4FC',
    400: '#818CF8',
    500: '#6366F1',   // Indigo principal
    600: '#4F46E5',
    700: '#4338CA',
    800: '#3730A3',
    900: '#312E81',
    950: '#1E1B4B',
  },
  // Violet - elementos decorativos
  violet: {
    50: '#F5F3FF',
    100: '#EDE9FE',
    200: '#DDD6FE',
    300: '#C4B5FD',
    400: '#A78BFA',
    500: '#8B5CF6',   // Violet principal
    600: '#7C3AED',
    700: '#6D28D9',
    800: '#5B21B6',
    900: '#4C1D95',
    950: '#2E1065',
  },
} as const;

/**
 * Cores semânticas (feedback)
 */
export const semantic = {
  success: {
    bg: 'rgba(16, 185, 129, 0.1)',      // Fundo verde
    border: 'rgba(16, 185, 129, 0.3)',  // Borda verde
    text: '#34D399',                     // Texto verde claro
    solid: '#10B981',                    // Solid verde
  },
  warning: {
    bg: 'rgba(245, 158, 11, 0.1)',
    border: 'rgba(245, 158, 11, 0.3)',
    text: '#FBBF24',
    solid: '#F59E0B',
  },
  error: {
    bg: 'rgba(239, 68, 68, 0.1)',
    border: 'rgba(239, 68, 68, 0.3)',
    text: '#F87171',
    solid: '#EF4444',
  },
  info: {
    bg: 'rgba(59, 130, 246, 0.1)',
    border: 'rgba(59, 130, 246, 0.3)',
    text: '#60A5FA',
    solid: '#3B82F6',
  },
} as const;

/**
 * Cores de glow e highlight
 */
export const effects = {
  glowBlue: 'rgba(59, 130, 246, 0.4)',
  glowCyan: 'rgba(6, 182, 212, 0.4)',
  glowViolet: 'rgba(139, 92, 246, 0.4)',
  glowRed: 'rgba(239, 68, 68, 0.3)',
  highlight: 'rgba(6, 182, 212, 0.1)',
} as const;

// ============================================
// GRADIENTES
// ============================================

export const gradients = {
  // Gradientes principais ORION
  orionPrimary: 'linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%)',
  orionDark: 'linear-gradient(180deg, #050A12 0%, #0A1628 100%)',
  orionDeep: 'linear-gradient(135deg, #050A12 0%, #0F2341 100%)',

  // Gradientes de acento
  cyanBlue: 'linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%)',
  blueIndigo: 'linear-gradient(135deg, #3B82F6 0%, #6366F1 100%)',
  violetBlue: 'linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%)',

  // Gradientes de destaque
  cyanGlow: 'linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%)',
  blueGlow: 'linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%)',

  // Gradiente de borda animada
  borderGradient: 'linear-gradient(90deg, #3B82F6, #06B6D4, #8B5CF6, #3B82F6)',

  // Gradientes sutis para cards
  cardSubtle: 'linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%)',
  cardHover: 'linear-gradient(180deg, rgba(26, 58, 92, 0.4) 0%, rgba(15, 35, 65, 0.6) 100%)',

  // Mesh gradients para fundos
  meshBackground: 'radial-gradient(at 40% 20%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 80% 80%, rgba(6, 182, 212, 0.1) 0px, transparent 50%)',
} as const;

// ============================================
// TIPOGRAFIA
// ============================================

export const typography = {
  fonts: {
    sans: '"Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
    mono: '"JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, monospace',
  },

  // Tamanhos de fonte (em rem)
  sizes: {
    xs: '0.75rem',      // 12px
    sm: '0.875rem',     // 14px
    base: '1rem',       // 16px
    lg: '1.125rem',     // 18px
    xl: '1.25rem',      // 20px
    '2xl': '1.5rem',    // 24px
    '3xl': '1.875rem',  // 30px
    '4xl': '2.25rem',   // 36px
    '5xl': '3rem',      // 48px
    '6xl': '3.75rem',   // 60px
  },

  // Line heights
  lineHeights: {
    none: '1',
    tight: '1.25',
    snug: '1.375',
    normal: '1.5',
    relaxed: '1.625',
    loose: '2',
  },

  // Font weights
  weights: {
    normal: '400',
    medium: '500',
    semibold: '600',
    bold: '700',
  },

  // Letter spacing
  tracking: {
    tighter: '-0.05em',
    tight: '-0.025em',
    normal: '0',
    wide: '0.025em',
    wider: '0.05em',
  },
} as const;

// Presets de tipografia para uso rápido
export const textStyles = {
  // Display - títulos grandes
  displayLg: {
    fontSize: typography.sizes['5xl'],
    fontWeight: typography.weights.bold,
    lineHeight: typography.lineHeights.tight,
    letterSpacing: typography.tracking.tight,
  },
  displayMd: {
    fontSize: typography.sizes['4xl'],
    fontWeight: typography.weights.bold,
    lineHeight: typography.lineHeights.tight,
    letterSpacing: typography.tracking.tight,
  },

  // Headings
  h1: {
    fontSize: typography.sizes['3xl'],
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.tight,
  },
  h2: {
    fontSize: typography.sizes['2xl'],
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.tight,
  },
  h3: {
    fontSize: typography.sizes.xl,
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.snug,
  },
  h4: {
    fontSize: typography.sizes.lg,
    fontWeight: typography.weights.medium,
    lineHeight: typography.lineHeights.snug,
  },

  // Body text
  bodyLg: {
    fontSize: typography.sizes.lg,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.relaxed,
  },
  bodyMd: {
    fontSize: typography.sizes.base,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },
  bodySm: {
    fontSize: typography.sizes.sm,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },

  // Labels e captions
  label: {
    fontSize: typography.sizes.sm,
    fontWeight: typography.weights.medium,
    letterSpacing: typography.tracking.wide,
  },
  caption: {
    fontSize: typography.sizes.xs,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },

  // Code
  code: {
    fontFamily: typography.fonts.mono,
    fontSize: typography.sizes.sm,
  },
} as const;

// ============================================
// ESPAÇAMENTO
// ============================================

// Base: 4px
export const spacing = {
  px: '1px',
  0: '0',
  0.5: '0.125rem',  // 2px
  1: '0.25rem',     // 4px
  1.5: '0.375rem',  // 6px
  2: '0.5rem',      // 8px
  2.5: '0.625rem',  // 10px
  3: '0.75rem',     // 12px
  3.5: '0.875rem',  // 14px
  4: '1rem',        // 16px
  5: '1.25rem',     // 20px
  6: '1.5rem',      // 24px
  7: '1.75rem',     // 28px
  8: '2rem',        // 32px
  9: '2.25rem',     // 36px
  10: '2.5rem',     // 40px
  11: '2.75rem',    // 44px
  12: '3rem',       // 48px
  14: '3.5rem',     // 56px
  16: '4rem',       // 64px
  20: '5rem',       // 80px
  24: '6rem',       // 96px
  28: '7rem',       // 112px
  32: '8rem',       // 128px
} as const;

// Espaçamentos semânticos
export const componentSpacing = {
  // Padding interno de componentes
  cardPadding: spacing[6],         // 24px
  cardPaddingSm: spacing[4],       // 16px
  cardPaddingLg: spacing[8],       // 32px

  buttonPadding: spacing[4],       // 16px horizontal
  buttonPaddingY: spacing[2.5],    // 10px vertical

  inputPadding: spacing[4],        // 16px
  inputPaddingY: spacing[3],       // 12px

  // Gaps
  gridGap: spacing[6],             // 24px
  gridGapSm: spacing[4],           // 16px
  stackGap: spacing[4],            // 16px
  inlineGap: spacing[2],           // 8px

  // Section spacing
  sectionGap: spacing[16],         // 64px
  sectionGapSm: spacing[10],       // 40px

  // Page margins
  pageMargin: spacing[8],          // 32px
  pageMarginMobile: spacing[4],    // 16px
} as const;

// ============================================
// BORDER RADIUS
// ============================================

export const radius = {
  none: '0',
  sm: '0.25rem',    // 4px
  md: '0.375rem',   // 6px
  lg: '0.5rem',     // 8px
  xl: '0.75rem',    // 12px
  '2xl': '1rem',    // 16px
  '3xl': '1.5rem',  // 24px
  full: '9999px',
} as const;

// ============================================
// SOMBRAS
// ============================================

export const shadows = {
  none: 'none',
  sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
  md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)',
  lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1)',
  xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)',
  '2xl': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
  inner: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.05)',

  // Shadows com cor
  glowBlue: '0 0 20px 0 rgba(59, 130, 246, 0.3)',
  glowCyan: '0 0 20px 0 rgba(6, 182, 212, 0.3)',
  glowViolet: '0 0 20px 0 rgba(139, 92, 246, 0.3)',

  // Card shadows
  card: '0 4px 20px 0 rgba(0, 0, 0, 0.3)',
  cardHover: '0 8px 30px 0 rgba(0, 0, 0, 0.4), 0 0 20px 0 rgba(59, 130, 246, 0.1)',
  cardElevated: '0 12px 40px 0 rgba(0, 0, 0, 0.5)',
} as const;

// ============================================
// MOTION / ANIMAÇÃO
// ============================================

export const motion = {
  // Durations
  duration: {
    instant: '0ms',
    fast: '150ms',
    normal: '200ms',
    slow: '300ms',
    slower: '500ms',
  },

  // Easings
  easing: {
    linear: 'linear',
    easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
    easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
    easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    spring: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
  },

  // Transitions pré-definidos
  transitions: {
    fast: '150ms cubic-bezier(0.4, 0, 0.2, 1)',
    normal: '200ms cubic-bezier(0.4, 0, 0.2, 1)',
    slow: '300ms cubic-bezier(0.4, 0, 0.2, 1)',
    spring: '300ms cubic-bezier(0.175, 0.885, 0.32, 1.275)',
  },
} as const;

// Presets de animação para Framer Motion
export const motionPresets = {
  fadeIn: {
    initial: { opacity: 0 },
    animate: { opacity: 1 },
    exit: { opacity: 0 },
    transition: { duration: 0.2 },
  },
  fadeInUp: {
    initial: { opacity: 0, y: 10 },
    animate: { opacity: 1, y: 0 },
    exit: { opacity: 0, y: 10 },
    transition: { duration: 0.3 },
  },
  fadeInDown: {
    initial: { opacity: 0, y: -10 },
    animate: { opacity: 1, y: 0 },
    exit: { opacity: 0, y: -10 },
    transition: { duration: 0.3 },
  },
  scaleIn: {
    initial: { opacity: 0, scale: 0.95 },
    animate: { opacity: 1, scale: 1 },
    exit: { opacity: 0, scale: 0.95 },
    transition: { duration: 0.2 },
  },
  slideInLeft: {
    initial: { opacity: 0, x: -20 },
    animate: { opacity: 1, x: 0 },
    exit: { opacity: 0, x: -20 },
    transition: { duration: 0.3 },
  },
  slideInRight: {
    initial: { opacity: 0, x: 20 },
    animate: { opacity: 1, x: 0 },
    exit: { opacity: 0, x: 20 },
    transition: { duration: 0.3 },
  },
  staggerChildren: {
    animate: {
      transition: {
        staggerChildren: 0.1,
      },
    },
  },
} as const;

// ============================================
// Z-INDEX
// ============================================

export const zIndex = {
  hide: -1,
  base: 0,
  raised: 10,
  dropdown: 100,
  sticky: 200,
  overlay: 300,
  modal: 400,
  popover: 500,
  toast: 600,
  tooltip: 700,
  max: 9999,
} as const;

// ============================================
// BREAKPOINTS
// ============================================

export const breakpoints = {
  sm: '640px',
  md: '768px',
  lg: '1024px',
  xl: '1280px',
  '2xl': '1536px',
} as const;

// ============================================
// COMPONENTES - CONFIGURAÇÕES PADRÃO
// ============================================

export const components = {
  button: {
    height: {
      sm: '32px',
      md: '40px',
      lg: '48px',
    },
    radius: radius.lg,
  },
  input: {
    height: {
      sm: '32px',
      md: '40px',
      lg: '48px',
    },
    radius: radius.lg,
  },
  card: {
    radius: radius.xl,
    padding: componentSpacing.cardPadding,
  },
  badge: {
    radius: radius.full,
    height: '24px',
  },
  modal: {
    radius: radius['2xl'],
    maxWidth: '500px',
  },
} as const;

// ============================================
// EXPORTS CONSOLIDADOS
// ============================================

export const tokens = {
  colors: {
    backgrounds,
    surfaces,
    borders,
    text,
    brand,
    accent,
    semantic,
    effects,
  },
  gradients,
  typography,
  textStyles,
  spacing,
  componentSpacing,
  radius,
  shadows,
  motion,
  motionPresets,
  zIndex,
  breakpoints,
  components,
} as const;

export default tokens;

```

---
#### `lib/docs-manager.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { DocPage, DocsData, DocCategory } from '@/types';

const DOCS_FILE = path.join(process.cwd(), 'data', 'docs-content.json');

/**
 * Get all documentation pages
 */
export async function getAllDocs(): Promise<DocsData> {
  try {
    const fileContent = await fs.readFile(DOCS_FILE, 'utf-8');
    return JSON.parse(fileContent) as DocsData;
  } catch (error) {
    console.error('Failed to read docs:', error);
    return {
      pages: [],
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Get a specific doc page by ID
 */
export async function getDocById(id: string): Promise<DocPage | null> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages.find(page => page.id === id) || null;
  } catch (error) {
    console.error('Failed to get doc by ID:', error);
    return null;
  }
}

/**
 * Get docs by category
 */
export async function getDocsByCategory(category: DocCategory): Promise<DocPage[]> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages
      .filter(page => page.category === category)
      .sort((a, b) => a.order - b.order);
  } catch (error) {
    console.error('Failed to get docs by category:', error);
    return [];
  }
}

/**
 * Get visible docs only
 */
export async function getVisibleDocs(): Promise<DocPage[]> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages.filter(page => page.visible);
  } catch (error) {
    console.error('Failed to get visible docs:', error);
    return [];
  }
}

/**
 * Create a new doc page
 */
export async function createDoc(
  doc: Omit<DocPage, 'id' | 'createdAt' | 'updatedAt'>
): Promise<DocPage> {
  try {
    const docsData = await getAllDocs();

    const newDoc: DocPage = {
      ...doc,
      id: `doc-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    };

    docsData.pages.push(newDoc);
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return newDoc;
  } catch (error) {
    console.error('Failed to create doc:', error);
    throw error;
  }
}

/**
 * Update an existing doc page
 */
export async function updateDoc(
  id: string,
  updates: Partial<Omit<DocPage, 'id' | 'createdAt'>>
): Promise<DocPage | null> {
  try {
    const docsData = await getAllDocs();
    const docIndex = docsData.pages.findIndex(page => page.id === id);

    if (docIndex === -1) {
      return null;
    }

    const updatedDoc: DocPage = {
      ...docsData.pages[docIndex],
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    docsData.pages[docIndex] = updatedDoc;
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return updatedDoc;
  } catch (error) {
    console.error('Failed to update doc:', error);
    throw error;
  }
}

/**
 * Delete a doc page
 */
export async function deleteDoc(id: string): Promise<boolean> {
  try {
    const docsData = await getAllDocs();
    const filteredPages = docsData.pages.filter(page => page.id !== id);

    if (filteredPages.length === docsData.pages.length) {
      return false; // Doc not found
    }

    docsData.pages = filteredPages;
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return true;
  } catch (error) {
    console.error('Failed to delete doc:', error);
    throw error;
  }
}

/**
 * Reorder docs
 */
export async function reorderDocs(docIds: string[]): Promise<void> {
  try {
    const docsData = await getAllDocs();

    // Update order for each doc
    docIds.forEach((id, index) => {
      const doc = docsData.pages.find(page => page.id === id);
      if (doc) {
        doc.order = index + 1;
        doc.updatedAt = new Date().toISOString();
      }
    });

    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to reorder docs:', error);
    throw error;
  }
}

```

---
#### `lib/documentation-export.ts`

```
// Documentation Export Utilities
// Handles PDF and Markdown exports for the Living Documentation module

export interface DocumentationTab {
  id: string;
  title: string;
  icon: string;
  content: string;
}

// Convert HTML content to clean Markdown
export function htmlToMarkdown(html: string, title: string): string {
  // Remove HTML tags and convert to markdown structure
  let markdown = `# ${title}\n\n`;
  markdown += `*Exportado em: ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}*\n\n---\n\n`;

  // Basic HTML to Markdown conversion
  const content = html
    // Headers
    .replace(/<h1[^>]*>(.*?)<\/h1>/gi, '# $1\n\n')
    .replace(/<h2[^>]*>(.*?)<\/h2>/gi, '## $1\n\n')
    .replace(/<h3[^>]*>(.*?)<\/h3>/gi, '### $1\n\n')
    .replace(/<h4[^>]*>(.*?)<\/h4>/gi, '#### $1\n\n')
    // Paragraphs and breaks
    .replace(/<p[^>]*>(.*?)<\/p>/gi, '$1\n\n')
    .replace(/<br\s*\/?>/gi, '\n')
    // Lists
    .replace(/<ul[^>]*>/gi, '\n')
    .replace(/<\/ul>/gi, '\n')
    .replace(/<ol[^>]*>/gi, '\n')
    .replace(/<\/ol>/gi, '\n')
    .replace(/<li[^>]*>(.*?)<\/li>/gi, '- $1\n')
    // Bold and italic
    .replace(/<strong[^>]*>(.*?)<\/strong>/gi, '**$1**')
    .replace(/<b[^>]*>(.*?)<\/b>/gi, '**$1**')
    .replace(/<em[^>]*>(.*?)<\/em>/gi, '*$1*')
    .replace(/<i[^>]*>(.*?)<\/i>/gi, '*$1*')
    // Code
    .replace(/<code[^>]*>(.*?)<\/code>/gi, '`$1`')
    .replace(/<pre[^>]*>(.*?)<\/pre>/gi, '```\n$1\n```\n')
    // Links
    .replace(/<a[^>]*href="([^"]*)"[^>]*>(.*?)<\/a>/gi, '[$2]($1)')
    // Tables
    .replace(/<table[^>]*>/gi, '\n')
    .replace(/<\/table>/gi, '\n')
    .replace(/<thead[^>]*>/gi, '')
    .replace(/<\/thead>/gi, '')
    .replace(/<tbody[^>]*>/gi, '')
    .replace(/<\/tbody>/gi, '')
    .replace(/<tr[^>]*>/gi, '|')
    .replace(/<\/tr>/gi, '|\n')
    .replace(/<th[^>]*>(.*?)<\/th>/gi, ' $1 |')
    .replace(/<td[^>]*>(.*?)<\/td>/gi, ' $1 |')
    // Divs and spans
    .replace(/<div[^>]*>/gi, '\n')
    .replace(/<\/div>/gi, '\n')
    .replace(/<span[^>]*>(.*?)<\/span>/gi, '$1')
    // Remove remaining HTML tags
    .replace(/<[^>]+>/g, '')
    // Clean up whitespace
    .replace(/\n{3,}/g, '\n\n')
    .replace(/&nbsp;/g, ' ')
    .replace(/&amp;/g, '&')
    .replace(/&lt;/g, '<')
    .replace(/&gt;/g, '>')
    .replace(/&quot;/g, '"')
    .trim();

  return markdown + content;
}

// Download file helper
export function downloadFile(content: string, filename: string, mimeType: string): void {
  const blob = new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// Export single tab as Markdown
export function exportTabAsMarkdown(tab: DocumentationTab): void {
  const markdown = tab.content;
  const filename = `documentacao-${tab.id}-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(markdown, filename, 'text/markdown;charset=utf-8');
}

// Export all tabs as consolidated Markdown
export function exportAllTabsAsMarkdown(tabs: DocumentationTab[]): void {
  let consolidatedMarkdown = `# Documentação Viva do Sistema - ORION

*Sistema de Automação de Produção de Vídeos para YouTube*

**Exportado em:** ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}

---

## Índice

${tabs.map((tab, index) => `${index + 1}. [${tab.title}](#${tab.id})`).join('\n')}

---

`;

  tabs.forEach((tab, index) => {
    consolidatedMarkdown += `\n\n${'='.repeat(80)}\n`;
    consolidatedMarkdown += `# ${index + 1}. ${tab.title}\n`;
    consolidatedMarkdown += `${'='.repeat(80)}\n\n`;
    consolidatedMarkdown += tab.content;
    consolidatedMarkdown += '\n\n';
  });

  consolidatedMarkdown += `\n---\n\n*Documento gerado automaticamente pelo módulo de Documentação Viva do ORION*`;

  const filename = `documentacao-completa-orion-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(consolidatedMarkdown, filename, 'text/markdown;charset=utf-8');
}

// Generate PDF using browser print
export function exportTabAsPDF(tabId: string, tabTitle: string): void {
  const printWindow = window.open('', '_blank');
  if (!printWindow) {
    alert('Por favor, permita pop-ups para exportar PDF');
    return;
  }

  const content = document.getElementById(`tab-content-${tabId}`);
  if (!content) return;

  printWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${tabTitle} - Documentação ORION</title>
      <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          line-height: 1.6;
          color: #1a1a1a;
          padding: 40px;
          max-width: 800px;
          margin: 0 auto;
        }

        h1 {
          font-size: 28px;
          font-weight: 700;
          margin-bottom: 24px;
          color: #111;
          border-bottom: 3px solid #6366f1;
          padding-bottom: 12px;
        }

        h2 {
          font-size: 22px;
          font-weight: 600;
          margin: 32px 0 16px 0;
          color: #222;
        }

        h3 {
          font-size: 18px;
          font-weight: 600;
          margin: 24px 0 12px 0;
          color: #333;
        }

        h4 {
          font-size: 16px;
          font-weight: 600;
          margin: 20px 0 10px 0;
          color: #444;
        }

        p {
          margin-bottom: 12px;
          color: #333;
        }

        ul, ol {
          margin: 12px 0 12px 24px;
        }

        li {
          margin-bottom: 6px;
        }

        table {
          width: 100%;
          border-collapse: collapse;
          margin: 16px 0;
        }

        th, td {
          border: 1px solid #ddd;
          padding: 10px;
          text-align: left;
        }

        th {
          background: #f5f5f5;
          font-weight: 600;
        }

        code {
          background: #f5f5f5;
          padding: 2px 6px;
          border-radius: 4px;
          font-family: 'Monaco', 'Consolas', monospace;
          font-size: 14px;
        }

        pre {
          background: #1a1a1a;
          color: #f0f0f0;
          padding: 16px;
          border-radius: 8px;
          overflow-x: auto;
          margin: 16px 0;
        }

        .badge {
          display: inline-block;
          padding: 4px 10px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 500;
        }

        .badge-green { background: #dcfce7; color: #166534; }
        .badge-yellow { background: #fef9c3; color: #854d0e; }
        .badge-red { background: #fee2e2; color: #991b1b; }
        .badge-blue { background: #dbeafe; color: #1e40af; }

        .diagram {
          background: #fafafa;
          border: 1px solid #e5e5e5;
          border-radius: 8px;
          padding: 20px;
          margin: 16px 0;
        }

        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 1px solid #e5e5e5;
          font-size: 12px;
          color: #666;
          text-align: center;
        }

        @media print {
          body { padding: 20px; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <h1>${tabTitle}</h1>
      <p style="color: #666; font-size: 14px; margin-bottom: 24px;">
        ORION - Documentação Viva do Sistema<br>
        Exportado em: ${new Date().toLocaleDateString('pt-BR', {
          day: '2-digit',
          month: 'long',
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        })}
      </p>
      ${content.innerHTML}
      <div class="footer">
        Documento gerado pelo módulo de Documentação Viva - ORION
      </div>
    </body>
    </html>
  `);

  printWindow.document.close();
  printWindow.focus();

  setTimeout(() => {
    printWindow.print();
  }, 500);
}

```

---
#### `lib/get-api-key.ts`

```
import { NextRequest } from "next/server";

// Mapeamento de headers para variáveis de ambiente
const KEY_MAPPING: Record<string, string> = {
  "x-youtube-api-key": "YOUTUBE_API_KEY",
  "x-youtube-channel-id": "YOUTUBE_CHANNEL_ID",
  "x-openai-api-key": "OPENAI_API_KEY",
  "x-google-api-key": "GOOGLE_GENERATIVE_AI_API_KEY",
  "x-anthropic-api-key": "ANTHROPIC_API_KEY",
  "x-pexels-api-key": "PEXELS_API_KEY",
  "x-pixabay-api-key": "PIXABAY_API_KEY",
  "x-unsplash-api-key": "UNSPLASH_ACCESS_KEY",
  "x-json2video-api-key": "JSON2VIDEO_API_KEY",
  "x-elevenlabs-api-key": "ELEVENLABS_API_KEY",
  "x-tavily-api-key": "TAVILY_API_KEY",
  "x-replicate-api-key": "REPLICATE_API_TOKEN",
  "x-stability-api-key": "STABILITY_API_KEY",
};

/**
 * Obtém uma API key, priorizando:
 * 1. Header da requisição (chave da sessão do usuário)
 * 2. Variável de ambiente do servidor
 */
export function getAPIKey(
  request: NextRequest,
  headerName: string
): string | undefined {
  // Primeiro, tentar obter do header
  const headerValue = request.headers.get(headerName);
  if (headerValue) {
    return headerValue;
  }

  // Segundo, tentar obter da variável de ambiente
  const envVar = KEY_MAPPING[headerName];
  if (envVar) {
    return process.env[envVar];
  }

  return undefined;
}

/**
 * Obtém múltiplas API keys de uma vez
 */
export function getAPIKeys(
  request: NextRequest,
  keys: string[]
): Record<string, string | undefined> {
  const result: Record<string, string | undefined> = {};
  for (const key of keys) {
    result[key] = getAPIKey(request, key);
  }
  return result;
}

// Helpers específicos para cada serviço
export function getYouTubeKeys(request: NextRequest) {
  return {
    apiKey: getAPIKey(request, "x-youtube-api-key"),
    channelId: getAPIKey(request, "x-youtube-channel-id"),
  };
}

export function getOpenAIKey(request: NextRequest) {
  return getAPIKey(request, "x-openai-api-key");
}

export function getGoogleKey(request: NextRequest) {
  return getAPIKey(request, "x-google-api-key");
}

export function getAnthropicKey(request: NextRequest) {
  return getAPIKey(request, "x-anthropic-api-key");
}

export function getPexelsKey(request: NextRequest) {
  return getAPIKey(request, "x-pexels-api-key");
}

export function getPixabayKey(request: NextRequest) {
  return getAPIKey(request, "x-pixabay-api-key");
}

export function getUnsplashKey(request: NextRequest) {
  return getAPIKey(request, "x-unsplash-api-key");
}

export function getJSON2VideoKey(request: NextRequest) {
  return getAPIKey(request, "x-json2video-api-key");
}

export function getElevenLabsKey(request: NextRequest) {
  return getAPIKey(request, "x-elevenlabs-api-key");
}

export function getTavilyKey(request: NextRequest) {
  return getAPIKey(request, "x-tavily-api-key");
}

export function getReplicateKey(request: NextRequest) {
  return getAPIKey(request, "x-replicate-api-key");
}

export function getStabilityKey(request: NextRequest) {
  return getAPIKey(request, "x-stability-api-key");
}

```

---
#### `lib/inngest/client.ts`

```
import { Inngest } from 'inngest';

// Create the Inngest client
export const inngest = new Inngest({
  id: 'orion-video-pipeline',
  name: 'ORION Video Production',
});

// Event types for type safety
export type OrionEvents = {
  'project/start': {
    data: {
      projectId: string;
      topic: string;
      autoMode: boolean;
    };
  };
  'project/approved': {
    data: {
      projectId: string;
      feedback?: string;
    };
  };
  'project/rejected': {
    data: {
      projectId: string;
      feedback: string;
    };
  };
};

```

---
#### `lib/inngest/functions/video-pipeline.ts`

```
import { inngest } from '../client';
import { prisma } from '@/lib/db';
import { researchService } from '@/lib/services/research.service';
import { scriptService } from '@/lib/services/script.service';
import { storyboardService } from '@/lib/services/storyboard.service';
import { renderService } from '@/lib/services/render.service';
import { uploadService } from '@/lib/services/upload.service';
import { notificationService } from '@/lib/services/notification.service';
import crypto from 'crypto';

/**
 * Main Video Production Pipeline
 *
 * This workflow orchestrates the entire video production process:
 * 1. Deep Research (Gemini) - Analyzes trends and channel data
 * 2. Script Generation (Claude) - Creates optimized script
 * 3. Human Approval - Waits for user approval via email
 * 4. Storyboard Generation - Creates visual scene descriptions
 * 5. Video Rendering (JSON2VIDEO) - Renders the final video
 * 6. YouTube Upload - Publishes with automatic retries
 */
export const videoPipeline = inngest.createFunction(
  {
    id: 'video-production-pipeline',
    name: 'Video Production Pipeline',
    retries: 3,
  },
  { event: 'project/start' },
  async ({ event, step }) => {
    const { projectId, topic, autoMode } = event.data;

    // Initialize workflow state
    await step.run('init-workflow', async () => {
      await prisma.workflowState.upsert({
        where: { projectId },
        create: {
          projectId,
          currentStep: 'research',
          approvalToken: crypto.randomBytes(32).toString('hex'),
        },
        update: {
          currentStep: 'research',
          error: null,
        },
      });

      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'RESEARCHING' },
      });
    });

    // Step 1: Deep Research with Gemini
    const researchResult = await step.run('deep-research', async () => {
      await prisma.workflowState.update({
        where: { projectId },
        data: { researchStartedAt: new Date() },
      });

      const result = await researchService.execute(projectId, topic);

      await prisma.workflowState.update({
        where: { projectId },
        data: { researchCompletedAt: new Date() },
      });

      return result;
    });

    // Step 2: Script Generation with Claude
    await step.run('update-status-scripting', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'SCRIPTING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'script',
          scriptStartedAt: new Date(),
        },
      });
    });

    const scriptResult = await step.run('generate-script', async () => {
      const result = await scriptService.generate(projectId, topic, researchResult);

      await prisma.workflowState.update({
        where: { projectId },
        data: { scriptCompletedAt: new Date() },
      });

      return result;
    });

    // Step 3: Human Approval (skip if autoMode)
    if (!autoMode) {
      await step.run('send-approval-request', async () => {
        const workflowState = await prisma.workflowState.findUnique({
          where: { projectId },
        });

        if (workflowState?.approvalToken) {
          const project = await prisma.project.findUnique({
            where: { id: projectId },
          });

          await notificationService.sendApprovalEmail(
            projectId,
            workflowState.approvalToken,
            project?.name || topic
          );

          await prisma.project.update({
            where: { id: projectId },
            data: { status: 'AWAITING_APPROVAL' },
          });

          await prisma.workflowState.update({
            where: { projectId },
            data: {
              currentStep: 'approval',
              approvalSentAt: new Date(),
            },
          });
        }
      });

      // Wait for approval event (max 7 days)
      const approval = await step.waitForEvent('wait-for-approval', {
        event: 'project/approved',
        timeout: '7d',
        match: 'data.projectId',
      });

      if (!approval) {
        throw new Error('Approval timeout - project expired after 7 days');
      }
    }

    // Step 4: Generate Storyboard
    await step.run('update-status-storyboard', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'STORYBOARDING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'storyboard',
          approvedAt: new Date(),
          storyboardStartedAt: new Date(),
        },
      });
    });

    const storyboardResult = await step.run('generate-storyboard', async () => {
      const result = await storyboardService.generate(projectId, scriptResult);

      await prisma.workflowState.update({
        where: { projectId },
        data: { storyboardCompletedAt: new Date() },
      });

      return result;
    });

    // Step 5: Render Video
    await step.run('update-status-rendering', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'RENDERING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'render',
          renderStartedAt: new Date(),
        },
      });
    });

    const renderResult = await step.run('submit-render-job', async () => {
      return await renderService.submit(projectId, storyboardResult);
    });

    // Poll for render completion
    await step.run('wait-for-render', async () => {
      let completed = false;
      let attempts = 0;
      const maxAttempts = 60; // 30 minutes max (30s intervals)

      while (!completed && attempts < maxAttempts) {
        await new Promise((resolve) => setTimeout(resolve, 30000));
        const status = await renderService.checkStatus(projectId, renderResult.externalJobId);

        if (status.completed) {
          completed = true;
          await prisma.workflowState.update({
            where: { projectId },
            data: { renderCompletedAt: new Date() },
          });
        } else if (status.failed) {
          throw new Error(`Render failed: ${status.error}`);
        }

        attempts++;
      }

      if (!completed) {
        throw new Error('Render timeout after 30 minutes');
      }
    });

    // Step 6: Upload to YouTube
    await step.run('update-status-uploading', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'UPLOADING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'upload',
          uploadStartedAt: new Date(),
        },
      });
    });

    const render = await prisma.render.findUnique({ where: { projectId } });

    const uploadResult = await step.run('upload-to-youtube', async () => {
      return await uploadService.upload(projectId, {
        videoUrl: render?.videoUrl || undefined,
        thumbnailUrl: render?.thumbnailUrl || undefined,
        duration: render?.duration || undefined,
      });
    });

    // Final: Mark as completed
    await step.run('complete-workflow', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'COMPLETED' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'completed',
          uploadCompletedAt: new Date(),
        },
      });

      // Send completion notification
      await notificationService.sendCompletionEmail(
        projectId,
        uploadResult.youtubeUrl
      );
    });

    return {
      success: true,
      projectId,
      youtubeUrl: uploadResult.youtubeUrl,
    };
  }
);

// Export all functions
export const functions = [videoPipeline];

```

---
#### `lib/integration-tokens.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { IntegrationTokens } from '@/types';

const TOKENS_FILE = path.join(process.cwd(), 'data', 'integration-tokens.json');

/**
 * Get integration tokens
 */
export async function getIntegrationTokens(): Promise<IntegrationTokens> {
  try {
    const fileContent = await fs.readFile(TOKENS_FILE, 'utf-8');
    return JSON.parse(fileContent) as IntegrationTokens;
  } catch (error) {
    console.error('Failed to read integration tokens:', error);
    return {
      github: null,
      vercel: null,
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update GitHub tokens
 */
export async function updateGitHubTokens(
  token: string,
  owner: string,
  repo: string
): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      github: { token, owner, repo },
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to update GitHub tokens:', error);
    throw error;
  }
}

/**
 * Update Vercel tokens
 */
export async function updateVercelTokens(
  token: string,
  projectId: string
): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      vercel: { token, projectId },
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to update Vercel tokens:', error);
    throw error;
  }
}

/**
 * Remove GitHub tokens
 */
export async function removeGitHubTokens(): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      github: null,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to remove GitHub tokens:', error);
    throw error;
  }
}

/**
 * Remove Vercel tokens
 */
export async function removeVercelTokens(): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      vercel: null,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to remove Vercel tokens:', error);
    throw error;
  }
}

```

---
#### `lib/logger.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { SystemLog, LogLevel, LogSource, LogsData } from '@/types';

const LOGS_FILE = path.join(process.cwd(), 'data', 'system-logs.json');

/**
 * Utility function to log system events
 * This function writes to the system-logs.json file
 */
export async function logSystemEvent(
  level: LogLevel,
  source: LogSource,
  message: string,
  details?: Record<string, unknown>
): Promise<void> {
  try {
    // Read existing logs
    const fileContent = await fs.readFile(LOGS_FILE, 'utf-8');
    const logsData: LogsData = JSON.parse(fileContent);

    // Create new log entry
    const newLog: SystemLog = {
      id: `log-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      timestamp: new Date().toISOString(),
      level,
      source,
      message,
      details,
    };

    // Add to logs array (prepend to show newest first)
    logsData.logs.unshift(newLog);

    // Keep only last 1000 logs to prevent file from growing too large
    if (logsData.logs.length > 1000) {
      logsData.logs = logsData.logs.slice(0, 1000);
    }

    // Write back to file
    await fs.writeFile(LOGS_FILE, JSON.stringify(logsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to write system log:', error);
    // Don't throw - logging should never break the application
  }
}

/**
 * Read all system logs
 */
export async function getSystemLogs(limit?: number): Promise<SystemLog[]> {
  try {
    const fileContent = await fs.readFile(LOGS_FILE, 'utf-8');
    const logsData: LogsData = JSON.parse(fileContent);

    if (limit) {
      return logsData.logs.slice(0, limit);
    }

    return logsData.logs;
  } catch (error) {
    console.error('Failed to read system logs:', error);
    return [];
  }
}

/**
 * Clear all system logs
 */
export async function clearSystemLogs(): Promise<void> {
  try {
    const logsData: LogsData = { logs: [] };
    await fs.writeFile(LOGS_FILE, JSON.stringify(logsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to clear system logs:', error);
    throw error;
  }
}

/**
 * Search logs by text
 */
export async function searchLogs(query: string): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    const lowerQuery = query.toLowerCase();

    return logs.filter(log =>
      log.message.toLowerCase().includes(lowerQuery) ||
      log.source.toLowerCase().includes(lowerQuery) ||
      (log.details && JSON.stringify(log.details).toLowerCase().includes(lowerQuery))
    );
  } catch (error) {
    console.error('Failed to search logs:', error);
    return [];
  }
}

/**
 * Get logs by level
 */
export async function getLogsByLevel(level: LogLevel): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    return logs.filter(log => log.level === level);
  } catch (error) {
    console.error('Failed to get logs by level:', error);
    return [];
  }
}

/**
 * Get logs by source
 */
export async function getLogsBySource(source: LogSource): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    return logs.filter(log => log.source === source);
  } catch (error) {
    console.error('Failed to get logs by source:', error);
    return [];
  }
}

```

---
#### `lib/services/notification.service.ts`

```
import { Resend } from 'resend';
import { prisma } from '@/lib/db';

// Lazy initialization to avoid build-time errors
let resendInstance: Resend | null = null;

function getResend(): Resend {
  if (!resendInstance) {
    resendInstance = new Resend(process.env.RESEND_API_KEY);
  }
  return resendInstance;
}

export const notificationService = {
  /**
   * Send approval request email
   */
  async sendApprovalEmail(
    projectId: string,
    approvalToken: string,
    projectName: string
  ): Promise<void> {
    const baseUrl = process.env.NEXT_PUBLIC_URL || 'http://localhost:3000';
    const approvalUrl = `${baseUrl}/approve/${approvalToken}`;

    const notificationEmail = process.env.NOTIFICATION_EMAIL;

    if (!notificationEmail) {
      console.warn('[Notification] NOTIFICATION_EMAIL not set, skipping email');
      return;
    }

    // Get script details
    const script = await prisma.script.findUnique({
      where: { projectId },
    });

    try {
      await getResend().emails.send({
        from: 'ORION <noreply@orion.video>',
        to: notificationEmail,
        subject: `[Aprovação Necessária] Roteiro: ${projectName}`,
        html: `
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <title>Aprovação de Roteiro</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0a0a0a; color: #fafafa; padding: 40px;">
            <div style="max-width: 600px; margin: 0 auto; background: #18181b; border-radius: 16px; padding: 32px; border: 1px solid #27272a;">
              <h1 style="color: #fafafa; margin-bottom: 8px;">🎬 Novo Roteiro Pronto</h1>
              <h2 style="color: #a1a1aa; font-weight: normal; margin-top: 0;">${projectName}</h2>

              ${script?.title ? `
              <div style="background: #27272a; border-radius: 8px; padding: 16px; margin: 24px 0;">
                <h3 style="color: #fafafa; margin-top: 0;">Título do Vídeo:</h3>
                <p style="color: #e4e4e7; font-size: 18px;">${script.title}</p>
              </div>
              ` : ''}

              <p style="color: #a1a1aa; line-height: 1.6;">
                O roteiro foi gerado e está aguardando sua aprovação.
                Clique no botão abaixo para revisar e aprovar.
              </p>

              <a href="${approvalUrl}"
                 style="display: inline-block; background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
                        color: white; text-decoration: none; padding: 16px 32px; border-radius: 8px;
                        font-weight: 600; margin: 24px 0;">
                Revisar Roteiro →
              </a>

              <p style="color: #71717a; font-size: 12px; margin-top: 32px;">
                Este link expira em 7 dias.<br>
                Se você não solicitou este email, ignore-o.
              </p>
            </div>
          </body>
          </html>
        `,
      });

      console.log(`[Notification] Approval email sent for project ${projectId}`);
    } catch (error) {
      console.error('[Notification] Failed to send approval email:', error);
      throw error;
    }
  },

  /**
   * Send completion notification
   */
  async sendCompletionEmail(projectId: string, youtubeUrl: string): Promise<void> {
    const notificationEmail = process.env.NOTIFICATION_EMAIL;

    if (!notificationEmail) {
      console.warn('[Notification] NOTIFICATION_EMAIL not set, skipping email');
      return;
    }

    const project = await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    try {
      await getResend().emails.send({
        from: 'ORION <noreply@orion.video>',
        to: notificationEmail,
        subject: `✅ Vídeo Publicado: ${project?.name || 'Projeto'}`,
        html: `
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <title>Vídeo Publicado</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0a0a0a; color: #fafafa; padding: 40px;">
            <div style="max-width: 600px; margin: 0 auto; background: #18181b; border-radius: 16px; padding: 32px; border: 1px solid #27272a;">
              <h1 style="color: #22c55e; margin-bottom: 8px;">✅ Vídeo Publicado!</h1>
              <h2 style="color: #fafafa; font-weight: normal; margin-top: 0;">${project?.script?.title || project?.name}</h2>

              <p style="color: #a1a1aa; line-height: 1.6;">
                Seu vídeo foi renderizado e publicado no YouTube com sucesso!
              </p>

              <a href="${youtubeUrl}"
                 style="display: inline-block; background: #ef4444;
                        color: white; text-decoration: none; padding: 16px 32px; border-radius: 8px;
                        font-weight: 600; margin: 24px 0;">
                ▶️ Ver no YouTube
              </a>

              <p style="color: #71717a; font-size: 12px; margin-top: 32px;">
                ORION - Produção Automatizada de Vídeos
              </p>
            </div>
          </body>
          </html>
        `,
      });

      console.log(`[Notification] Completion email sent for project ${projectId}`);
    } catch (error) {
      console.error('[Notification] Failed to send completion email:', error);
      // Don't throw - completion email is not critical
    }
  },
};

```

---
#### `lib/services/render.service.ts`

```
import { prisma } from '@/lib/db';

interface Scene {
  id: number;
  duration: number;
  narration: string;
  visualDescription: string;
  mediaType: 'video' | 'image' | 'animation';
  transition: string;
}

interface StoryboardData {
  scenes: Scene[];
}

interface RenderJobResult {
  externalJobId: string;
  status: string;
}

interface RenderStatusResult {
  completed: boolean;
  failed: boolean;
  videoUrl?: string;
  error?: string;
}

export const renderService = {
  /**
   * Submit render job to JSON2VIDEO
   */
  async submit(projectId: string, storyboard: StoryboardData): Promise<RenderJobResult> {
    // Get project data
    await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    // TODO: Integrate with JSON2VIDEO API using storyboard.scenes
    // For now, we create a mock job
    const sceneCount = storyboard.scenes?.length || 0;
    const externalJobId = `job_${Date.now()}_${projectId.slice(0, 8)}_scenes_${sceneCount}`;

    // Create render record
    await prisma.render.upsert({
      where: { projectId },
      create: {
        projectId,
        externalJobId,
        status: 'processing',
      },
      update: {
        externalJobId,
        status: 'processing',
      },
    });

    return {
      externalJobId,
      status: 'processing',
    };
  },

  /**
   * Check render job status
   */
  async checkStatus(projectId: string, externalJobId: string): Promise<RenderStatusResult> {
    const render = await prisma.render.findUnique({
      where: { projectId },
    });

    if (!render) {
      return { completed: false, failed: true, error: 'Render not found' };
    }

    // Verify job ID matches
    if (render.externalJobId !== externalJobId) {
      return { completed: false, failed: true, error: 'Job ID mismatch' };
    }

    // TODO: Check JSON2VIDEO API for actual status
    // For now, mock as completed after creation
    const mockVideoUrl = `https://storage.example.com/videos/${projectId}.mp4`;

    await prisma.render.update({
      where: { projectId },
      data: {
        status: 'completed',
        videoUrl: mockVideoUrl,
        thumbnailUrl: `https://storage.example.com/thumbnails/${projectId}.jpg`,
        duration: 600, // 10 minutes
      },
    });

    return {
      completed: true,
      failed: false,
      videoUrl: mockVideoUrl,
    };
  },
};

```

---
#### `lib/services/research.service.ts`

```
import { prisma } from '@/lib/db';
import { google } from '@ai-sdk/google';
import { generateText } from 'ai';

interface ResearchResult {
  internalAnalysis: {
    topPerformingTopics: string[];
    audienceInsights: string[];
    contentGaps: string[];
  };
  externalAnalysis: {
    trends: string[];
    competitors: string[];
  };
}

export const researchService = {
  /**
   * Execute deep research using Gemini 2.0
   */
  async execute(projectId: string, topic: string): Promise<ResearchResult> {
    // Update research status
    await prisma.research.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      // Use Gemini 2.0 for deep research
      const { text } = await generateText({
        model: google('gemini-2.0-flash-exp'),
        system: `You are a YouTube content research specialist for the Brazilian market.
Your task is to analyze trends, audience behavior, and content opportunities.
Always respond in valid JSON format.`,
        prompt: `Conduct deep research on the topic: "${topic}"

Analyze:
1. Internal factors: What topics perform well in this niche? What does the audience want?
2. External factors: Current trends, competitor analysis, content gaps

Return a JSON object with this structure:
{
  "internalAnalysis": {
    "topPerformingTopics": ["topic1", "topic2", ...],
    "audienceInsights": ["insight1", "insight2", ...],
    "contentGaps": ["gap1", "gap2", ...]
  },
  "externalAnalysis": {
    "trends": ["trend1", "trend2", ...],
    "competitors": ["competitor insight 1", ...]
  },
  "summary": "Brief summary of findings"
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result = jsonMatch ? JSON.parse(jsonMatch[0]) : {
        internalAnalysis: { topPerformingTopics: [], audienceInsights: [], contentGaps: [] },
        externalAnalysis: { trends: [], competitors: [] },
      };

      // Save research results
      await prisma.research.update({
        where: { projectId },
        data: {
          internalAnalysis: result.internalAnalysis,
          externalAnalysis: result.externalAnalysis,
          summary: result.summary || text,
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.research.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/script.service.ts`

```
import { prisma } from '@/lib/db';
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

interface ScriptResult {
  title: string;
  content: string;
  sections: {
    hook: string;
    body: string[];
    cta: string;
  };
}

interface ResearchData {
  internalAnalysis?: {
    topPerformingTopics: string[];
    audienceInsights: string[];
    contentGaps: string[];
  };
  externalAnalysis?: {
    trends: string[];
    competitors: string[];
  };
}

export const scriptService = {
  /**
   * Generate script using Claude
   */
  async generate(projectId: string, topic: string, research: ResearchData): Promise<ScriptResult> {
    // Update script status
    await prisma.script.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      const { text } = await generateText({
        model: anthropic('claude-sonnet-4-20250514'),
        system: `You are an expert YouTube scriptwriter for the Brazilian market.
Create engaging, value-packed scripts optimized for retention.
Always respond in valid JSON format.`,
        prompt: `Create a YouTube script for: "${topic}"

Research insights:
- Top topics: ${research.internalAnalysis?.topPerformingTopics?.join(', ') || 'N/A'}
- Audience insights: ${research.internalAnalysis?.audienceInsights?.join(', ') || 'N/A'}
- Trends: ${research.externalAnalysis?.trends?.join(', ') || 'N/A'}

Requirements:
1. Hook (first 30 seconds): Grab attention immediately
2. Body: 3-5 main points with value and entertainment
3. CTA: Clear call-to-action

Return JSON:
{
  "title": "Video title (SEO optimized)",
  "content": "Full script text",
  "sections": {
    "hook": "Opening hook text",
    "body": ["Point 1 text", "Point 2 text", ...],
    "cta": "Call to action text"
  },
  "metadata": {
    "wordCount": 1500,
    "estimatedDuration": "10-12 minutes",
    "tone": "engaging and educational"
  }
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result = jsonMatch ? JSON.parse(jsonMatch[0]) : {
        title: topic,
        content: text,
        sections: { hook: '', body: [], cta: '' },
      };

      // Save script
      await prisma.script.update({
        where: { projectId },
        data: {
          title: result.title,
          content: result.content,
          sections: result.sections,
          metadata: result.metadata,
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.script.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/spreadsheet.service.ts`

```
/**
 * ============================================
 * ORION - Serviço de Processamento de Planilhas
 * ============================================
 *
 * Processa planilhas exportadas do YouTube Studio para
 * extrair métricas e insights de performance.
 */

import * as XLSX from 'xlsx';
import { ChannelMetrics, YouTubeStudioData } from '@/types';

interface SpreadsheetRow {
  [key: string]: string | number | undefined;
}

/**
 * Processa um arquivo de planilha (CSV ou XLSX) do YouTube Studio
 */
export async function parseYouTubeStudioSpreadsheet(
  fileBuffer: ArrayBuffer
): Promise<YouTubeStudioData> {
  try {
    // Ler o arquivo com SheetJS
    const workbook = XLSX.read(fileBuffer, { type: 'array' });

    // Pegar a primeira planilha
    const firstSheetName = workbook.SheetNames[0];
    const worksheet = workbook.Sheets[firstSheetName];

    // Converter para JSON
    const rawData = XLSX.utils.sheet_to_json<SpreadsheetRow>(worksheet);

    // Processar os dados
    const metrics = parseMetricsFromSpreadsheet(rawData);

    // Calcular estatísticas agregadas
    const avgCTR = calculateAverageCTR(metrics);
    const avgWatchTime = calculateAverageWatchTime(metrics);
    const topPerformingVideos = getTopPerformingVideos(metrics, 10);

    return {
      id: `yt-studio-${Date.now()}`,
      rawData: rawData as unknown as Record<string, unknown>,
      totalVideos: metrics.length,
      analyzedAt: new Date().toISOString(),
      topPerformingVideos,
      avgCTR,
      avgWatchTime
    };
  } catch (error) {
    console.error('Erro ao processar planilha do YouTube Studio:', error);
    throw new Error(`Falha ao processar planilha: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);
  }
}

/**
 * Converte dados brutos da planilha em objetos ChannelMetrics
 */
function parseMetricsFromSpreadsheet(data: SpreadsheetRow[]): ChannelMetrics[] {
  return data.map((row, index) => {
    // Tentar mapear colunas comuns do YouTube Studio
    // As colunas podem variar dependendo do idioma/formato da exportação
    const videoId = String(row['Video ID'] || row['ID do vídeo'] || `video-${index}`);
    const title = String(row['Video title'] || row['Título do vídeo'] || row['Title'] || row['Título'] || 'Sem título');
    const views = Number(row['Views'] || row['Visualizações'] || row['Visualizacoes'] || 0);
    const likes = Number(row['Likes'] || row['Curtidas'] || 0);
    const comments = Number(row['Comments'] || row['Comentários'] || row['Comentarios'] || 0);
    const watchTime = Number(row['Watch time (hours)'] || row['Tempo de exibição'] || row['Watch time'] || 0);
    const avgViewDuration = Number(row['Average view duration'] || row['Duração média da visualização'] || row['Avg view duration'] || 0);
    const ctr = Number(row['CTR'] || row['Impressions click-through rate'] || row['Taxa de cliques das impressões'] || 0);
    const impressions = Number(row['Impressions'] || row['Impressões'] || row['Impressoes'] || 0);
    const publishedAt = String(row['Published'] || row['Publicado em'] || row['Date'] || new Date().toISOString());

    return {
      videoId,
      title,
      views,
      likes,
      comments,
      watchTime: watchTime * 3600, // Converter horas para segundos
      averageViewDuration: avgViewDuration,
      ctr,
      impressions,
      publishedAt
    };
  }).filter(metric => metric.views > 0); // Filtrar vídeos sem visualizações
}

/**
 * Calcula CTR médio
 */
function calculateAverageCTR(metrics: ChannelMetrics[]): number {
  if (metrics.length === 0) return 0;

  const totalCTR = metrics.reduce((sum, m) => sum + m.ctr, 0);
  return Number((totalCTR / metrics.length).toFixed(2));
}

/**
 * Calcula tempo de exibição médio
 */
function calculateAverageWatchTime(metrics: ChannelMetrics[]): number {
  if (metrics.length === 0) return 0;

  const totalWatchTime = metrics.reduce((sum, m) => sum + m.watchTime, 0);
  return Number((totalWatchTime / metrics.length).toFixed(0));
}

/**
 * Retorna os vídeos com melhor performance
 */
function getTopPerformingVideos(metrics: ChannelMetrics[], limit: number): ChannelMetrics[] {
  // Ordenar por uma combinação de visualizações e CTR
  return [...metrics]
    .sort((a, b) => {
      const scoreA = a.views * (1 + a.ctr / 100);
      const scoreB = b.views * (1 + b.ctr / 100);
      return scoreB - scoreA;
    })
    .slice(0, limit);
}

/**
 * Valida se um arquivo parece ser uma planilha do YouTube Studio
 */
export function validateYouTubeStudioSpreadsheet(fileBuffer: ArrayBuffer): {
  valid: boolean;
  error?: string;
} {
  try {
    const workbook = XLSX.read(fileBuffer, { type: 'array' });

    if (workbook.SheetNames.length === 0) {
      return { valid: false, error: 'Planilha vazia' };
    }

    const worksheet = workbook.Sheets[workbook.SheetNames[0]];
    const data = XLSX.utils.sheet_to_json<SpreadsheetRow>(worksheet);

    if (data.length === 0) {
      return { valid: false, error: 'Nenhum dado encontrado na planilha' };
    }

    // Verificar se tem pelo menos algumas colunas esperadas
    const firstRow = data[0];
    const hasExpectedColumns =
      Object.keys(firstRow).some(key =>
        key.toLowerCase().includes('video') ||
        key.toLowerCase().includes('vídeo') ||
        key.toLowerCase().includes('title') ||
        key.toLowerCase().includes('título')
      );

    if (!hasExpectedColumns) {
      return {
        valid: false,
        error: 'Formato de planilha não reconhecido. Certifique-se de exportar do YouTube Studio.'
      };
    }

    return { valid: true };
  } catch (error) {
    return {
      valid: false,
      error: `Erro ao validar planilha: ${error instanceof Error ? error.message : 'Erro desconhecido'}`
    };
  }
}

/**
 * Extrai insights principais dos dados da planilha
 */
export function extractInsightsFromSpreadsheet(data: YouTubeStudioData): string[] {
  const insights: string[] = [];

  if (!data.topPerformingVideos || data.topPerformingVideos.length === 0) {
    return ['Não foram encontrados dados suficientes para gerar insights'];
  }

  // Insight sobre CTR
  if (data.avgCTR && data.avgCTR > 0) {
    if (data.avgCTR > 10) {
      insights.push(`CTR médio excelente de ${data.avgCTR}% - suas thumbnails e títulos são muito eficazes`);
    } else if (data.avgCTR > 5) {
      insights.push(`CTR médio bom de ${data.avgCTR}% - há espaço para melhorar thumbnails e títulos`);
    } else {
      insights.push(`CTR médio de ${data.avgCTR}% - foque em melhorar suas thumbnails e títulos para aumentar cliques`);
    }
  }

  // Insight sobre tempo de exibição
  if (data.avgWatchTime && data.avgWatchTime > 0) {
    const avgMinutes = Math.floor(data.avgWatchTime / 60);
    insights.push(`Tempo médio de exibição de ${avgMinutes} minutos - ${avgMinutes > 3 ? 'ótima retenção' : 'trabalhe em ganchos mais fortes'}`);
  }

  // Insight sobre vídeos de sucesso
  if (data.topPerformingVideos && data.topPerformingVideos.length > 0) {
    const topVideo = data.topPerformingVideos[0];
    insights.push(`Seu vídeo de maior sucesso "${topVideo.title}" tem ${topVideo.views.toLocaleString()} visualizações`);
  }

  return insights;
}

```

---
#### `lib/services/storyboard.service.ts`

```
import { prisma } from '@/lib/db';
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

interface Scene {
  id: number;
  duration: number;
  narration: string;
  visualDescription: string;
  mediaType: 'video' | 'image' | 'animation';
  transition: string;
}

interface StoryboardResult {
  scenes: Scene[];
}

interface ScriptData {
  title: string;
  content: string;
  sections?: {
    hook: string;
    body: string[];
    cta: string;
  };
}

export const storyboardService = {
  /**
   * Generate storyboard from script
   */
  async generate(projectId: string, script: ScriptData): Promise<StoryboardResult> {
    // Update storyboard status
    await prisma.storyboard.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      const { text } = await generateText({
        model: anthropic('claude-sonnet-4-20250514'),
        system: `You are a video storyboard specialist.
Create detailed scene-by-scene breakdowns for video production.
Always respond in valid JSON format.`,
        prompt: `Create a storyboard for this script:

Title: ${script.title}
Content: ${script.content}

For each scene, specify:
1. Duration (seconds)
2. Narration text
3. Visual description (what should be on screen)
4. Media type (video, image, animation)
5. Transition to next scene

Return JSON:
{
  "scenes": [
    {
      "id": 1,
      "duration": 5,
      "narration": "Text to speak",
      "visualDescription": "What appears on screen",
      "mediaType": "video",
      "transition": "fade"
    }
  ]
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result: StoryboardResult = jsonMatch ? JSON.parse(jsonMatch[0]) : { scenes: [] };

      // Save storyboard
      await prisma.storyboard.update({
        where: { projectId },
        data: {
          scenes: JSON.parse(JSON.stringify(result.scenes)),
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.storyboard.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/upload.service.ts`

```
import { prisma } from '@/lib/db';

interface VideoData {
  videoUrl?: string;
  thumbnailUrl?: string;
  duration?: number;
}

interface UploadResult {
  youtubeVideoId: string;
  youtubeUrl: string;
}

export const uploadService = {
  /**
   * Upload video to YouTube
   */
  async upload(projectId: string, video: VideoData): Promise<UploadResult> {
    // Get project with script for title/description
    const project = await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    if (!project?.script) {
      throw new Error('Script not found');
    }

    // Get or create upload record
    let upload = await prisma.upload.findUnique({
      where: { projectId },
    });

    if (!upload) {
      upload = await prisma.upload.create({
        data: {
          projectId,
          title: project.script.title || project.name,
          status: 'pending',
        },
      });
    }

    // TODO: Integrate with YouTube Data API
    // For now, mock the upload
    const mockVideoId = `YT_${Date.now()}_${projectId.slice(0, 8)}`;
    const mockYoutubeUrl = `https://youtube.com/watch?v=${mockVideoId}`;

    // Log video data for future integration
    console.log('[Upload Service] Video data:', {
      projectId,
      videoUrl: video.videoUrl,
      thumbnailUrl: video.thumbnailUrl,
      duration: video.duration,
    });

    await prisma.upload.update({
      where: { projectId },
      data: {
        youtubeVideoId: mockVideoId,
        youtubeUrl: mockYoutubeUrl,
        title: project.script.title || project.name,
        description: project.script.content?.slice(0, 500) || '',
        publishedAt: new Date(),
        status: 'completed',
      },
    });

    return {
      youtubeVideoId: mockVideoId,
      youtubeUrl: mockYoutubeUrl,
    };
  },
};

```

---
#### `lib/share-context.tsx`

```
"use client";

import { createContext, useContext, useState, useEffect, ReactNode } from "react";

interface ShareContextType {
  isSharedView: boolean;
  shareToken: string | null;
  generateShareLink: () => string;
  canCopy: boolean;
  canShare: boolean;
}

const ShareContext = createContext<ShareContextType | undefined>(undefined);

// Generate a unique share token
function generateToken(): string {
  return btoa(Date.now().toString(36) + Math.random().toString(36).substring(2));
}

// Store owner tokens in localStorage
function getOwnerTokens(): string[] {
  if (typeof window === "undefined") return [];
  try {
    const tokens = localStorage.getItem("ey_owner_tokens");
    return tokens ? JSON.parse(tokens) : [];
  } catch {
    return [];
  }
}

function addOwnerToken(token: string) {
  if (typeof window === "undefined") return;
  const tokens = getOwnerTokens();
  if (!tokens.includes(token)) {
    tokens.push(token);
    localStorage.setItem("ey_owner_tokens", JSON.stringify(tokens));
  }
}

export function ShareProvider({ children }: { children: ReactNode }) {
  const [isSharedView, setIsSharedView] = useState(false);
  const [shareToken, setShareToken] = useState<string | null>(null);

  useEffect(() => {
    // Check if this is a shared view by looking at the URL
    const params = new URLSearchParams(window.location.search);
    const token = params.get("s");

    if (token) {
      // Check if this token belongs to the owner
      const ownerTokens = getOwnerTokens();
      if (!ownerTokens.includes(token)) {
        // This is a viewer (not the owner)
        setIsSharedView(true);
        setShareToken(token);

        // Apply copy protection for shared views
        document.body.classList.add("shared-view");

        // Disable right-click
        const handleContextMenu = (e: MouseEvent) => {
          e.preventDefault();
          return false;
        };

        // Disable copy/cut
        const handleCopy = (e: ClipboardEvent) => {
          e.preventDefault();
          return false;
        };

        // Disable text selection via keyboard
        const handleKeydown = (e: KeyboardEvent) => {
          if (
            (e.ctrlKey || e.metaKey) &&
            (e.key === "c" || e.key === "a" || e.key === "u" || e.key === "s")
          ) {
            e.preventDefault();
            return false;
          }
        };

        document.addEventListener("contextmenu", handleContextMenu);
        document.addEventListener("copy", handleCopy);
        document.addEventListener("cut", handleCopy);
        document.addEventListener("keydown", handleKeydown);

        return () => {
          document.removeEventListener("contextmenu", handleContextMenu);
          document.removeEventListener("copy", handleCopy);
          document.removeEventListener("cut", handleCopy);
          document.removeEventListener("keydown", handleKeydown);
          document.body.classList.remove("shared-view");
        };
      }
    }
  }, []);

  const generateShareLink = (): string => {
    const token = generateToken();
    addOwnerToken(token); // Mark this token as owned by the creator

    const baseUrl = window.location.origin + window.location.pathname;
    return `${baseUrl}?s=${token}`;
  };

  return (
    <ShareContext.Provider
      value={{
        isSharedView,
        shareToken,
        generateShareLink,
        canCopy: !isSharedView,
        canShare: !isSharedView,
      }}
    >
      {children}
    </ShareContext.Provider>
  );
}

export function useShare() {
  const context = useContext(ShareContext);
  if (context === undefined) {
    throw new Error("useShare must be used within a ShareProvider");
  }
  return context;
}

```

---
#### `lib/store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";
import {
  WorkflowStep,
  ContextData,
  ResearchData,
  ProposalData,
  StoryboardData,
  RenderData,
  UploadData,
  GuidelinesData,
  Diretriz,
} from "@/types";
import { v4 as uuidv4 } from "uuid";

// ============================================
// Workflow Store
// ============================================
interface WorkflowStore {
  currentStep: WorkflowStep;
  context: ContextData | null;
  research: ResearchData | null;
  proposal: ProposalData | null;
  storyboard: StoryboardData | null;
  render: RenderData | null;
  upload: UploadData | null;

  // Navigation
  setStep: (step: WorkflowStep) => void;
  canNavigateToStep: (step: WorkflowStep) => boolean;

  // Context (Step 1)
  setContext: (context: ContextData) => void;
  clearContext: () => void;

  // Research (Step 2)
  setResearch: (research: ResearchData) => void;
  clearResearch: () => void;

  // Proposal (Step 4)
  setProposal: (proposal: ProposalData) => void;
  updateProposal: (updates: Partial<ProposalData>) => void;
  clearProposal: () => void;

  // Storyboard (Step 5)
  setStoryboard: (storyboard: StoryboardData) => void;
  updateStoryboard: (updates: Partial<StoryboardData>) => void;
  clearStoryboard: () => void;

  // Render (Step 5)
  setRender: (render: RenderData) => void;
  updateRender: (updates: Partial<RenderData>) => void;
  clearRender: () => void;

  // Upload (Step 6)
  setUpload: (upload: UploadData) => void;
  updateUpload: (updates: Partial<UploadData>) => void;
  clearUpload: () => void;

  // Reset all
  resetWorkflow: () => void;
}

export const useWorkflowStore = create<WorkflowStore>()(
  persist(
    (set, get) => ({
      currentStep: 1,
      context: null,
      research: null,
      proposal: null,
      storyboard: null,
      render: null,
      upload: null,

      setStep: (step) => {
        if (get().canNavigateToStep(step)) {
          set({ currentStep: step });
        }
      },

      canNavigateToStep: (step) => {
        const { context, research, proposal, storyboard } = get();

        switch (step) {
          case 1:
            return true;
          case 2:
            return context !== null;
          case 4:
            return research !== null;
          case 5:
            return proposal !== null && proposal.allApproved;
          case 6:
            return storyboard !== null;
          default:
            return false;
        }
      },

      setContext: (context) => set({ context }),
      clearContext: () => set({ context: null }),

      setResearch: (research) => set({ research }),
      clearResearch: () => set({ research: null }),

      setProposal: (proposal) => set({ proposal }),
      updateProposal: (updates) =>
        set((state) => ({
          proposal: state.proposal ? { ...state.proposal, ...updates } : null,
        })),
      clearProposal: () => set({ proposal: null }),

      setStoryboard: (storyboard) => set({ storyboard }),
      updateStoryboard: (updates) =>
        set((state) => ({
          storyboard: state.storyboard
            ? { ...state.storyboard, ...updates }
            : null,
        })),
      clearStoryboard: () => set({ storyboard: null }),

      setRender: (render) => set({ render }),
      updateRender: (updates) =>
        set((state) => ({
          render: state.render ? { ...state.render, ...updates } : null,
        })),
      clearRender: () => set({ render: null }),

      setUpload: (upload) => set({ upload }),
      updateUpload: (updates) =>
        set((state) => ({
          upload: state.upload ? { ...state.upload, ...updates } : null,
        })),
      clearUpload: () => set({ upload: null }),

      resetWorkflow: () =>
        set({
          currentStep: 1,
          context: null,
          research: null,
          proposal: null,
          storyboard: null,
          render: null,
          upload: null,
        }),
    }),
    {
      name: "orion-workflow",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// Guidelines Store (Global - Not a step)
// ============================================
interface GuidelinesStore {
  guidelines: GuidelinesData;

  // CRUD Operations
  addDiretriz: (diretriz: Omit<Diretriz, "id" | "createdAt" | "updatedAt">) => void;
  updateDiretriz: (id: string, updates: Partial<Diretriz>) => void;
  deleteDiretriz: (id: string) => void;
  toggleDiretriz: (id: string) => void;

  // Getters
  getActiveDiretrizes: () => Diretriz[];
  getDiretrizesForScope: (scope: Diretriz["appliesTo"][number]) => Diretriz[];
}

const defaultGuidelines: GuidelinesData = {
  diretrizes: [],
  updatedAt: new Date().toISOString(),
};

export const useGuidelinesStore = create<GuidelinesStore>()(
  persist(
    (set, get) => ({
      guidelines: defaultGuidelines,

      addDiretriz: (diretriz) => {
        const now = new Date().toISOString();
        const newDiretriz: Diretriz = {
          ...diretriz,
          id: uuidv4(),
          createdAt: now,
          updatedAt: now,
        };
        set((state) => ({
          guidelines: {
            diretrizes: [...state.guidelines.diretrizes, newDiretriz],
            updatedAt: now,
          },
        }));
      },

      updateDiretriz: (id, updates) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, ...updates, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      deleteDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.filter((d) => d.id !== id),
            updatedAt: now,
          },
        }));
      },

      toggleDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, active: !d.active, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      getActiveDiretrizes: () => {
        return get().guidelines.diretrizes.filter((d) => d.active);
      },

      getDiretrizesForScope: (scope) => {
        return get()
          .guidelines.diretrizes.filter((d) => d.active && d.appliesTo.includes(scope));
      },
    }),
    {
      name: "orion-guidelines",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// UI Store (Non-persistent)
// ============================================
interface UIStore {
  isSidebarOpen: boolean;
  isGuidelinesModalOpen: boolean;
  isApiKeyModalOpen: boolean;
  isConnectApisModalOpen: boolean;
  activeModal: string | null;

  toggleSidebar: () => void;
  setSidebarOpen: (open: boolean) => void;
  openGuidelinesModal: () => void;
  closeGuidelinesModal: () => void;
  openApiKeyModal: () => void;
  closeApiKeyModal: () => void;
  setConnectApisModalOpen: (open: boolean) => void;
  setActiveModal: (modal: string | null) => void;
}

export const useUIStore = create<UIStore>()((set) => ({
  isSidebarOpen: true,
  isGuidelinesModalOpen: false,
  isApiKeyModalOpen: false,
  isConnectApisModalOpen: false,
  activeModal: null,

  toggleSidebar: () => set((state) => ({ isSidebarOpen: !state.isSidebarOpen })),
  setSidebarOpen: (open) => set({ isSidebarOpen: open }),
  openGuidelinesModal: () => set({ isGuidelinesModalOpen: true }),
  closeGuidelinesModal: () => set({ isGuidelinesModalOpen: false }),
  openApiKeyModal: () => set({ isApiKeyModalOpen: true }),
  closeApiKeyModal: () => set({ isApiKeyModalOpen: false }),
  setConnectApisModalOpen: (open) => set({ isConnectApisModalOpen: open }),
  setActiveModal: (modal) => set({ activeModal: modal }),
}));

// ============================================
// Branding Store (White Label System)
// ============================================
interface BrandingStore {
  systemName: string;
  logoUrl: string | null;
  setSystemName: (name: string) => void;
  setLogoUrl: (url: string | null) => void;
  setBranding: (systemName: string, logoUrl: string | null) => void;
  resetBranding: () => void;
}

const defaultBranding = {
  systemName: "ORION",
  logoUrl: null,
};

export const useBrandingStore = create<BrandingStore>()(
  persist(
    (set) => ({
      systemName: defaultBranding.systemName,
      logoUrl: defaultBranding.logoUrl,

      setSystemName: (name) => set({ systemName: name }),
      setLogoUrl: (url) => set({ logoUrl: url }),
      setBranding: (systemName, logoUrl) => set({ systemName, logoUrl }),
      resetBranding: () => set(defaultBranding),
    }),
    {
      name: "orion-branding",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

```

---
#### `lib/system/api-registry.ts`

```
export type ApiStatus = "ONLINE" | "OFFLINE";

export interface ApiCheck {
  name: string;
  env: string;
  check: () => Promise<ApiStatus>;
}

export const apiRegistry: ApiCheck[] = [
  {
    name: "GEMINI",
    env: "GOOGLE_GENERATIVE_AI_API_KEY",
    check: async () => {
      return process.env.GOOGLE_GENERATIVE_AI_API_KEY ? "ONLINE" : "OFFLINE";
    }
  }
];

```

---
#### `lib/system/boot.ts`

```
import { apiRegistry, ApiStatus } from "./api-registry";

export interface BootReport {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, ApiStatus>;
}

export async function systemBoot(): Promise<BootReport> {
  const apis: Record<string, ApiStatus> = {};
  let degraded = false;

  for (const api of apiRegistry) {
    const status = await api.check();
    apis[api.name] = status;
    if (status !== "ONLINE") degraded = true;
  }

  return {
    status: degraded ? "DEGRADED" : "ONLINE",
    apis
  };
}

```

---
#### `lib/user-profile.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { UserProfile } from '@/types';

const PROFILE_FILE = path.join(process.cwd(), 'data', 'user-profile.json');

/**
 * Get user profile
 */
export async function getUserProfile(): Promise<UserProfile> {
  try {
    const fileContent = await fs.readFile(PROFILE_FILE, 'utf-8');
    return JSON.parse(fileContent) as UserProfile;
  } catch (error) {
    console.error('Failed to read user profile:', error);
    // Return default profile if file doesn't exist
    return {
      id: 'admin-001',
      name: 'Admin',
      role: 'System Administrator',
      avatarUrl: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Admin',
      bio: 'ORION System Administrator',
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update user profile
 */
export async function updateUserProfile(
  updates: Partial<Omit<UserProfile, 'id' | 'createdAt'>>
): Promise<UserProfile> {
  try {
    const currentProfile = await getUserProfile();

    const updatedProfile: UserProfile = {
      ...currentProfile,
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(PROFILE_FILE, JSON.stringify(updatedProfile, null, 2), 'utf-8');

    return updatedProfile;
  } catch (error) {
    console.error('Failed to update user profile:', error);
    throw error;
  }
}

```

---
#### `lib/utils.ts`

```
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatDuration(seconds: number): string {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = Math.floor(seconds % 60);

  if (hours > 0) {
    return `${hours}:${minutes.toString().padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
  }
  return `${minutes}:${secs.toString().padStart(2, "0")}`;
}

export function formatNumber(num: number): string {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + "M";
  }
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + "K";
  }
  return num.toString();
}

export function formatDate(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
  });
}

export function formatDateTime(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
    hour: "2-digit",
    minute: "2-digit",
  });
}

export function truncateText(text: string, maxLength: number): string {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength - 3) + "...";
}

export function generateId(): string {
  return Math.random().toString(36).substring(2) + Date.now().toString(36);
}

export function debounce<T extends (...args: unknown[]) => unknown>(
  func: T,
  wait: number
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout | null = null;

  return (...args: Parameters<T>) => {
    if (timeout) clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
}

export function parseCSV(csvText: string): Record<string, string>[] {
  const lines = csvText.trim().split("\n");
  if (lines.length < 2) return [];

  const headers = lines[0].split(",").map((h) => h.trim().replace(/"/g, ""));
  const rows: Record<string, string>[] = [];

  for (let i = 1; i < lines.length; i++) {
    const values = parseCSVLine(lines[i]);
    if (values.length === headers.length) {
      const row: Record<string, string> = {};
      headers.forEach((header, index) => {
        row[header] = values[index];
      });
      rows.push(row);
    }
  }

  return rows;
}

function parseCSVLine(line: string): string[] {
  const values: string[] = [];
  let current = "";
  let inQuotes = false;

  for (let i = 0; i < line.length; i++) {
    const char = line[i];

    if (char === '"') {
      inQuotes = !inQuotes;
    } else if (char === "," && !inQuotes) {
      values.push(current.trim());
      current = "";
    } else {
      current += char;
    }
  }

  values.push(current.trim());
  return values;
}

export function downloadJSON(data: object, filename: string): void {
  const blob = new Blob([JSON.stringify(data, null, 2)], {
    type: "application/json",
  });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

export function estimateReadingTime(text: string, wordsPerMinute = 150): number {
  const wordCount = text.split(/\s+/).length;
  return Math.ceil((wordCount / wordsPerMinute) * 60);
}

```

---
#### `lib/workflow-logger.ts`

```
/**
 * Workflow Logger - Integration helper for adding logs to the workflow
 * 
 * This file provides convenient functions to log workflow events
 */

import { addLog } from '@/app/actions/settings';
import type { LogLevel } from '@/types';

export async function logWorkflowStep(step: string, action: string, details?: Record<string, unknown>) {
  try {
    await addLog('info', 'workflow', `${step}: ${action}`, details);
  } catch (error) {
    console.error('Failed to log workflow step:', error);
  }
}

export async function logWorkflowSuccess(step: string, message: string, details?: Record<string, unknown>) {
  try {
    await addLog('success', 'workflow', `${step}: ${message}`, details);
  } catch (error) {
    console.error('Failed to log workflow success:', error);
  }
}

export async function logWorkflowError(step: string, error: string | Error, details?: Record<string, unknown>) {
  try {
    const errorMessage = error instanceof Error ? error.message : error;
    await addLog('error', 'workflow', `${step}: ${errorMessage}`, details);
  } catch (err) {
    console.error('Failed to log workflow error:', err);
  }
}

export async function logAPICall(apiName: string, action: string, success: boolean, details?: Record<string, unknown>) {
  try {
    const level: LogLevel = success ? 'success' : 'error';
    await addLog(level, 'api', `${apiName}: ${action}`, details);
  } catch (error) {
    console.error('Failed to log API call:', error);
  }
}

export async function logUserAction(action: string, details?: Record<string, unknown>) {
  try {
    await addLog('info', 'user', action, details);
  } catch (error) {
    console.error('Failed to log user action:', error);
  }
}

```

---
#### `lib/workflow-modes.ts`

```
/**
 * ============================================
 * ORION - Sistema de Modos de Workflow
 * ============================================
 *
 * Configuração dos diferentes modos de operação do sistema ORION.
 * Cada modo define um conjunto de funcionalidades e fluxo de trabalho.
 */

import { WorkflowMode } from "@/types";

export interface WorkflowModeConfig {
  id: WorkflowMode;
  nome: string;
  descricao: string;
  descricaoDetalhada: string;
  ativo: boolean;
  recursos: string[];
  icone: string; // Lucide icon name
  cor: string; // Cor do gradiente
  tempoEstimado: string;
  badge?: string;
}

/**
 * Configuração completa de todos os modos disponíveis
 */
export const WORKFLOW_MODES: Record<WorkflowMode, WorkflowModeConfig> = {
  FAST: {
    id: "FAST",
    nome: "Modo Rápido",
    descricao: "Mídia stock + opção de geração IA sob demanda",
    descricaoDetalhada: "Crie vídeos rapidamente usando nossa biblioteca de mídia stock. Opcionalmente, gere mídia customizada com IA quando necessário.",
    ativo: true,
    recursos: [
      "Múltiplas fontes de input (planilha, tema, link, transcrição)",
      "Análise adaptativa com IA",
      "Teste A/B/C de thumbnails para YouTube",
      "Biblioteca de mídia stock (Pexels, Pixabay)",
      "Geração de mídia com IA sob demanda",
      "Upload de mídia própria",
      "Preview obrigatório antes do upload",
      "Feedback em tempo real"
    ],
    icone: "Zap",
    cor: "from-cyan-500 to-blue-600",
    tempoEstimado: "15-30 min",
    badge: "Recomendado"
  },
  STANDARD: {
    id: "STANDARD",
    nome: "Modo Padrão",
    descricao: "Em breve - Equilíbrio entre velocidade e personalização",
    descricaoDetalhada: "Modo balanceado com mais opções de customização e controle sobre o processo de criação.",
    ativo: false,
    recursos: [
      "Todas as funcionalidades do Modo Rápido",
      "Editor de roteiro avançado",
      "Timeline de edição",
      "Mais controles de personalização",
      "Aprovações em múltiplas etapas"
    ],
    icone: "Settings",
    cor: "from-blue-500 to-indigo-600",
    tempoEstimado: "45-60 min"
  },
  PREMIUM: {
    id: "PREMIUM",
    nome: "Modo Premium",
    descricao: "Em breve - Máxima personalização e controle",
    descricaoDetalhada: "Controle total sobre cada aspecto da produção do vídeo, com ferramentas profissionais de edição.",
    ativo: false,
    recursos: [
      "Todas as funcionalidades do Modo Padrão",
      "Editor de vídeo profissional integrado",
      "Biblioteca de transições e efeitos",
      "Animações customizadas",
      "Múltiplas revisões",
      "Exportação em múltiplos formatos",
      "Suporte prioritário"
    ],
    icone: "Crown",
    cor: "from-purple-500 to-pink-600",
    tempoEstimado: "90+ min",
    badge: "Em breve"
  }
};

/**
 * Retorna apenas os modos ativos
 */
export function getActiveModes(): WorkflowModeConfig[] {
  return Object.values(WORKFLOW_MODES).filter(mode => mode.ativo);
}

/**
 * Retorna configuração de um modo específico
 */
export function getModeConfig(mode: WorkflowMode): WorkflowModeConfig {
  return WORKFLOW_MODES[mode];
}

/**
 * Verifica se um modo está ativo
 */
export function isModeActive(mode: WorkflowMode): boolean {
  return WORKFLOW_MODES[mode].ativo;
}

/**
 * Retorna o modo padrão
 */
export function getDefaultMode(): WorkflowMode {
  return "FAST";
}

```

---
#### `next.config.ts`

```
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Build will fail on TypeScript/ESLint errors (production-safe)
};

export default nextConfig;

```

---
#### `package.json`

```
{
  "name": "orion",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "jest",
    "vercel:comments": "tsx scripts/get-vercel-comments.ts",
    "vercel:comments:all": "tsx scripts/get-vercel-comments.ts --show-resolved"
  },
  "dependencies": {
    "@ai-sdk/anthropic": "^3.0.23",
    "@ai-sdk/google": "^3.0.13",
    "@ai-sdk/openai": "^3.0.18",
    "@ffmpeg/ffmpeg": "^0.12.15",
    "@ffmpeg/util": "^0.12.2",
    "@google/generative-ai": "^0.24.1",
    "@prisma/client": "^6.19.2",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-progress": "^1.1.8",
    "@radix-ui/react-separator": "^1.1.8",
    "@radix-ui/react-slot": "^1.2.4",
    "@types/xlsx": "^0.0.35",
    "@vercel/analytics": "^1.6.1",
    "@vercel/blob": "^2.0.0",
    "@vercel/speed-insights": "^1.3.1",
    "@vercel/toolbar": "^0.1.32",
    "ai": "^6.0.49",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "framer-motion": "^11.15.0",
    "inngest": "^3.49.3",
    "lucide-react": "^0.469.0",
    "next": "^15.5.9",
    "papaparse": "^5.4.1",
    "prisma": "^6.19.2",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-dropzone": "^14.3.5",
    "recharts": "^3.7.0",
    "resend": "^6.8.0",
    "tailwind-merge": "^2.6.0",
    "uuid": "^11.0.4",
    "xlsx": "^0.18.5",
    "zod": "^3.25.76",
    "zustand": "^5.0.2"
  },
  "devDependencies": {
    "@types/jest": "^30.0.0",
    "@types/node": "^22.10.5",
    "@types/papaparse": "^5.3.15",
    "@types/react": "^19.0.2",
    "@types/react-dom": "^19.0.2",
    "@types/uuid": "^10.0.0",
    "autoprefixer": "^10.4.20",
    "eslint": "^9.17.0",
    "eslint-config-next": "15.1.11",
    "jest": "^30.2.0",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.17",
    "ts-jest": "^29.4.6",
    "tsx": "^4.21.0",
    "typescript": "^5.7.2"
  }
}

```

---
#### `prisma/schema.prisma`

```
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id                   String                @id @default(cuid())
  name                 String
  topic                String
  status               ProjectStatus         @default(PENDING)
  autoMode             Boolean               @default(false)
  mode                 String                @default("FAST")
  tagsFoco             String[]
  linkConcorrente      String?
  transcricao          String?               @db.Text
  createdAt            DateTime              @default(now())
  updatedAt            DateTime              @updatedAt
  render               Render?
  research             Research?
  script               Script?
  storyboard           Storyboard?
  upload               Upload?
  workflowState        WorkflowState?
  youtubeStudioData    YouTubeStudioData?
  competitorAnalysis   CompetitorAnalysis?

  @@index([status])
  @@index([createdAt])
  @@index([mode])
}

model Research {
  id               String   @id @default(cuid())
  projectId        String   @unique
  internalAnalysis Json?
  externalAnalysis Json?
  summary          String?
  status           String   @default("pending")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  project          Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Script {
  id         String    @id @default(cuid())
  projectId  String    @unique
  title      String?
  content    String?
  sections   Json?
  metadata   Json?
  approved   Boolean   @default(false)
  approvedAt DateTime?
  feedback   String?
  status     String    @default("pending")
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  project    Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Storyboard {
  id        String   @id @default(cuid())
  projectId String   @unique
  scenes    Json?
  status    String   @default("pending")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Render {
  id               String    @id @default(cuid())
  projectId        String    @unique
  externalJobId    String?
  videoUrl         String?
  thumbnailUrl     String?
  duration         Int?
  status           String    @default("pending")
  error            String?
  videoPreviewUrl  String?
  previewApproved  Boolean   @default(false)
  previewApprovedAt DateTime?
  previewNotes     String?   @db.Text
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  project          Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Upload {
  id             String    @id @default(cuid())
  projectId      String    @unique
  youtubeVideoId String?
  youtubeUrl     String?
  title          String?
  description    String?
  tags           Json?
  publishedAt    DateTime?
  status         String    @default("pending")
  error          String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  project        Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model WorkflowState {
  id                    String    @id @default(cuid())
  projectId             String    @unique
  currentStep           String    @default("init")
  inngestRunId          String?
  approvalToken         String?   @unique
  researchStartedAt     DateTime?
  researchCompletedAt   DateTime?
  scriptStartedAt       DateTime?
  scriptCompletedAt     DateTime?
  approvalSentAt        DateTime?
  approvedAt            DateTime?
  storyboardStartedAt   DateTime?
  storyboardCompletedAt DateTime?
  renderStartedAt       DateTime?
  renderCompletedAt     DateTime?
  uploadStartedAt       DateTime?
  uploadCompletedAt     DateTime?
  error                 String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  project               Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([approvalToken])
}

model UserSettings {
  id                String   @id @default(cuid())
  email             String   @unique
  notificationEmail String?
  autoApprove       Boolean  @default(false)
  maxRetries        Int      @default(3)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model YouTubeStudioData {
  id          String   @id @default(cuid())
  projectId   String   @unique
  rawData     Json
  totalVideos Int
  analyzedAt  DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model CompetitorAnalysis {
  id               String   @id @default(cuid())
  projectId        String   @unique
  videoUrl         String
  videoTitle       String?
  videoDescription String?  @db.Text
  videoTags        String[]
  analyzedAt       DateTime @default(now())
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  project          Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

enum ProjectStatus {
  PENDING
  RESEARCHING
  SCRIPTING
  AWAITING_APPROVAL
  APPROVED
  STORYBOARDING
  RENDERING
  UPLOADING
  COMPLETED
  FAILED
}

```

---
#### `tailwind.config.ts`

```
import type { Config } from "tailwindcss";
import tokens from "./lib/design-tokens";

/**
 * ============================================
 * ORION Design System - Tailwind Configuration
 * ============================================
 *
 * Configuração estendida do Tailwind CSS
 * sincronizada com o Design System ORION.
 *
 * FONTE PRIMÁRIA: lib/design-tokens.ts
 * Este arquivo força o uso dos design tokens
 * TypeScript como single source of truth.
 */
const config: Config = {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      // ========================================
      // CORES - Paleta ORION (Design Tokens)
      // ========================================
      colors: {
        background: tokens.colors.backgrounds.layer0,
        foreground: tokens.colors.text.primary,
        layer: tokens.colors.backgrounds,
        surface: tokens.colors.surfaces,
        border: tokens.colors.borders,
        text: tokens.colors.text,
        
        // Paletas da marca
        orion: tokens.colors.brand.blue,
        'orion-red': tokens.colors.brand.red,
        
        // Paletas de acento
        cyan: tokens.colors.accent.cyan,
        indigo: tokens.colors.accent.indigo,
        violet: tokens.colors.accent.violet,

        // Cores semânticas
        success: {
          DEFAULT: tokens.colors.semantic.success.solid,
          bg: tokens.colors.semantic.success.bg,
          border: tokens.colors.semantic.success.border,
          text: tokens.colors.semantic.success.text,
        },
        warning: {
          DEFAULT: tokens.colors.semantic.warning.solid,
          bg: tokens.colors.semantic.warning.bg,
          border: tokens.colors.semantic.warning.border,
          text: tokens.colors.semantic.warning.text,
        },
        error: {
          DEFAULT: tokens.colors.semantic.error.solid,
          bg: tokens.colors.semantic.error.bg,
          border: tokens.colors.semantic.error.border,
          text: tokens.colors.semantic.error.text,
        },
        info: {
          DEFAULT: tokens.colors.semantic.info.solid,
          bg: tokens.colors.semantic.info.bg,
          border: tokens.colors.semantic.info.border,
          text: tokens.colors.semantic.info.text,
        },
        
        // Efeitos
        glow: tokens.colors.effects,
        highlight: tokens.colors.effects.highlight,
        
        // Paleta de utilidade (mantida para flexibilidade)
        slate: {
          50: "#F8FAFC",
          100: "#F1F5F9",
          200: "#E2E8F0",
          300: "#CBD5E1",
          400: "#94A3B8",
          500: "#64748B",
          600: "#475569",
          700: "#334155",
          800: "#1E293B",
          900: "#0F172A",
          950: "#020617",
        },
      },
      
      // ========================================
      // TIPOGRAFIA
      // ========================================
      fontFamily: tokens.typography.fonts,
      fontSize: tokens.typography.sizes,

      // ========================================
      // ESPAÇAMENTO
      // ========================================
      spacing: {
        ...tokens.spacing,
        // Mantendo customizações específicas se necessário
        "4.5": "1.125rem",
        "5.5": "1.375rem",
        "18": "4.5rem",
        "22": "5.5rem",
      },

      // ========================================
      // BORDER RADIUS
      // ========================================
      borderRadius: tokens.radius,

      // ========================================
      // SOMBRAS
      // ========================================
      boxShadow: {
        ...tokens.shadows, // sm, md, lg, xl, 2xl, inner, card, etc
        'glow-blue': tokens.shadows.glowBlue,
        'glow-cyan': tokens.shadows.glowCyan,
        'glow-violet': tokens.shadows.glowViolet,
      },

      // ========================================
      // GRADIENTES
      // ========================================
      backgroundImage: tokens.gradients,

      // ========================================
      // ANIMAÇÕES E KEYFRAMES
      // ========================================
      animation: {
        "fade-in": "fadeIn 0.2s ease-out",
        "fade-in-up": "fadeInUp 0.3s ease-out forwards",
        "fade-in-down": "fadeInDown 0.3s ease-out forwards",
        "slide-in-right": "slideInRight 0.3s ease-out forwards",
        "slide-in-left": "slideInLeft 0.3s ease-out forwards",
        "scale-in": "scaleIn 0.2s ease-out forwards",
        "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
        "spin-slow": "spin 3s linear infinite",
        "float": "float 3s ease-in-out infinite",
        "shimmer": "shimmer 2s ease-in-out infinite",
        "gradient-border": "gradientBorder 4s ease infinite",
      },
      keyframes: {
        fadeIn: { from: { opacity: "0" }, to: { opacity: "1" } },
        fadeInUp: { from: { opacity: "0", transform: "translateY(10px)" }, to: { opacity: "1", transform: "translateY(0)" } },
        fadeInDown: { from: { opacity: "0", transform: "translateY(-10px)" }, to: { opacity: "1", transform: "translateY(0)" } },
        slideInRight: { from: { opacity: "0", transform: "translateX(20px)" }, to: { opacity: "1", transform: "translateX(0)" } },
        slideInLeft: { from: { opacity: "0", transform: "translateX(-20px)" }, to: { opacity: "1", transform: "translateX(0)" } },
        scaleIn: { from: { opacity: "0", transform: "scale(0.95)" }, to: { opacity: "1", transform: "scale(1)" } },
        float: { "0%, 100%": { transform: "translateY(0)" }, "50%": { transform: "translateY(-5px)" } },
        shimmer: { "0%": { "background-position": "-200% 0" }, "100%": { "background-position": "200% 0" } },
        gradientBorder: { "0%, 100%": { "background-position": "0% 50%" }, "50%": { "background-position": "100% 50%" } },
      },

      // ========================================
      // TRANSIÇÕES
      // ========================================
      transitionDuration: tokens.motion.duration,
      transitionTimingFunction: tokens.motion.easing,

      // ========================================
      // Z-INDEX
      // ========================================
      zIndex: Object.fromEntries(Object.entries(tokens.zIndex).map(([k, v]) => [k, String(v)])),
      
      // ========================================
      // BLUR
      // ========================================
      backdropBlur: {
        xs: "2px"
      },
    },
  },
  plugins: [],
};

export default config;
```

---
#### `tsconfig.json`

```
{
  "compilerOptions": {
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "target": "ES2017"
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}

```

====================================================================
## Branch: remotes/origin/claude/live-documentation-module-5nJSU
====================================================================

### File Structure
```
.env.example
app/api/ai/generate/route.ts
app/api/ai/stream/route.ts
app/api/config/keys/route.ts
app/api/config/test-key/route.ts
app/api/health/route.ts
app/api/images/generate/route.ts
app/api/media/search/route.ts
app/api/proposal/description/route.ts
app/api/proposal/rationale/route.ts
app/api/proposal/script/route.ts
app/api/proposal/soundtrack/route.ts
app/api/proposal/tags/route.ts
app/api/proposal/titles/route.ts
app/api/render/route.ts
app/api/research/route.ts
app/api/status/route.ts
app/api/storyboard/route.ts
app/api/tts/route.ts
app/api/youtube/channel/route.ts
app/api/youtube/upload/route.ts
app/documentation/page.tsx
app/globals.css
app/layout.tsx
app/page.tsx
app/step/1-input/page.tsx
app/step/2-research/page.tsx
app/step/4-proposal/page.tsx
app/step/5-studio/page.tsx
app/step/6-upload/page.tsx
app/workflow/page.tsx
components/AIModelSelector.tsx
components/ApiKeysModal.tsx
components/AssetCard.tsx
components/ConnectApisModal.tsx
components/FileDropzone.tsx
components/GuidelinesModal.tsx
components/Layout.tsx
components/documentation/CurrentStateTab.tsx
components/documentation/GenesisTab.tsx
components/documentation/IntegrationsTab.tsx
components/documentation/SystemVisionTab.tsx
components/documentation/TechStackTab.tsx
components/documentation/content.ts
components/documentation/index.ts
components/system/SystemStatus.tsx
components/ui/Badge.tsx
components/ui/Button.tsx
components/ui/Card.tsx
components/ui/Input.tsx
components/ui/Modal.tsx
components/ui/Select.tsx
components/ui/Textarea.tsx
components/ui/Toggle.tsx
lib/ai.ts
lib/api-keys-store.ts
lib/api-keys.ts
lib/documentation-export.ts
lib/get-api-key.ts
lib/store.ts
lib/system/api-registry.ts
lib/system/boot.ts
lib/utils.ts
next.config.ts
package.json
tailwind.config.ts
tsconfig.json
```

### File Content
---
#### `.env.example`

```
# YouTube API
YOUTUBE_API_KEY=
YOUTUBE_CHANNEL_ID=
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=

# AI Providers
OPENAI_API_KEY=
GOOGLE_GENERATIVE_AI_API_KEY=
ANTHROPIC_API_KEY=

# Media APIs
PEXELS_API_KEY=
PIXABAY_API_KEY=
UNSPLASH_ACCESS_KEY=

# Video Rendering
JSON2VIDEO_API_KEY=

# Optional: Text-to-Speech
ELEVENLABS_API_KEY=

# Optional: Research
TAVILY_API_KEY=

# Optional: Image Generation
REPLICATE_API_TOKEN=
STABILITY_API_KEY=

```

---
#### `app/api/ai/generate/route.ts`

```
import { createGoogleGenerativeAI } from '@ai-sdk/google';
import { createAnthropic } from '@ai-sdk/anthropic';
import { createOpenAI } from '@ai-sdk/openai';
import { streamObject } from 'ai';
import { z } from 'zod';

// Configuração segura dos provedores
const google = createGoogleGenerativeAI({ apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY });
const anthropic = createAnthropic({ apiKey: process.env.ANTHROPIC_API_KEY });
const openai = createOpenAI({ apiKey: process.env.OPENAI_API_KEY });

export const maxDuration = 60; // Permite gerações longas (Deep Research)

export async function POST(req: Request) {
  try {
    const { model, inputData, stepsData } = await req.json();

    // 1. Validação de Chaves (Para você ver o erro real se houver)
    if (model.includes('claude') && !process.env.ANTHROPIC_API_KEY) {
      throw new Error('ERRO CRÍTICO: Chave da Anthropic (ANTHROPIC_API_KEY) não encontrada no servidor.');
    }

    // 2. Seleção do Modelo Inteligente
    let selectedModel;
    if (model === 'gemini-2.0-flash') selectedModel = google('models/gemini-2.0-flash-exp');
    else if (model === 'gpt-4o') selectedModel = openai('gpt-4o');
    else if (model === 'claude-3-5-sonnet') selectedModel = anthropic('claude-3-5-sonnet-20240620');
    else selectedModel = google('models/gemini-1.5-flash'); // Fallback

    // 3. Montagem do Contexto "Deep Research" (Cruza Dados)
    const contextPrompt = `
      VOCÊ É UM ESTRATEGISTA DE YOUTUBE SÊNIOR E ESPECIALISTA EM DADOS.
      
      *** REGRA SUPREMA: A RESPOSTA DEVE SER 100% EM PORTUGUÊS DO BRASIL (PT-BR) ***
      
      SEU OBJETIVO:
      Realizar uma análise profunda, baseada em evidências, cruzando os dados internos do canal com tendências de mercado.
      
      DADOS DE ENTRADA (Analise tudo):
      - Métricas do Canal (CSV/JSON): ${JSON.stringify(inputData)}
      - Histórico/Steps Anteriores: ${JSON.stringify(stepsData)}
      
      DIRETRIZES DE ANÁLISE (Deep Research):
      1. NÃO seja genérico. Use números exatos dos dados fornecidos.
      2. Cruze a taxa de clique (CTR) com os títulos atuais e sugira melhorias específicas.
      3. Identifique padrões de retenção se houver dados de watchtime.
      4. Compare o desempenho do tema atual com a média do canal.
      
      ESTRUTURA DA RESPOSTA (JSON):
      Retorne um objeto JSON estrito com:
      - analise_interna: { pontos_fortes, pontos_fracos, padroes_ocultos }
      - analise_externa: { oportunidades_mercado, concorrencia, trends_atuais }
      - estrategia_sugerida: { titulo_matador, ideia_thumbnail, gancho_roteiro }
      - justificativa_baseada_em_dados: "Por que escolhi isso?"
    `;

    // 4. Geração com Estrutura Garantida (Zod)
    const result = await streamObject({
      model: selectedModel,
      system: "Você é um consultor expert de YouTube. Fale Português.",
      prompt: contextPrompt,
      schema: z.object({
        analise_interna: z.object({
          pontos_fortes: z.array(z.string()),
          pontos_fracos: z.array(z.string()),
          padroes_ocultos: z.string(),
        }),
        analise_externa: z.object({
          oportunidades_mercado: z.array(z.string()),
          trends_atuais: z.array(z.string()),
        }),
        estrategia: z.object({
          titulo_sugerido: z.string(),
          ideia_thumbnail: z.string(),
          explicacao_tecnica: z.string(),
        }),
      }),
    });

    return result.toTextStreamResponse();

  } catch (error) {
    console.error("ERRO NA GERAÇÃO:", error);
    const message = error instanceof Error ? error.message : 'Unknown error';
    return new Response(JSON.stringify({ error: message }), { status: 500 });
  }
}
```

---
#### `app/api/ai/stream/route.ts`

```
import { NextRequest } from "next/server";
import { streamText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      provider,
      model,
      systemPrompt,
      userPrompt,
      temperature = 0.7,
      maxTokens = 4096,
    } = body as {
      provider: AIProvider;
      model: string;
      systemPrompt: string;
      userPrompt: string;
      temperature?: number;
      maxTokens?: number;
    };

    if (!provider || !model || !userPrompt) {
      return new Response(
        JSON.stringify({ error: "Missing required fields" }),
        { status: 400, headers: { "Content-Type": "application/json" } }
      );
    }

    // Get the appropriate model based on provider
    let aiModel;
    switch (provider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "OpenAI API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Google API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Anthropic API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = anthropic(model);
        break;
      default:
        return new Response(
          JSON.stringify({ error: `Unknown provider: ${provider}` }),
          { status: 400, headers: { "Content-Type": "application/json" } }
        );
    }

    const result = streamText({
      model: aiModel,
      system: systemPrompt,
      prompt: userPrompt,
      temperature,
      maxTokens,
    });

    return result.toDataStreamResponse();
  } catch (error) {
    console.error("AI Streaming error:", error);
    return new Response(
      JSON.stringify({ error: error instanceof Error ? error.message : "AI streaming failed" }),
      { status: 500, headers: { "Content-Type": "application/json" } }
    );
  }
}

```

---
#### `app/api/config/keys/route.ts`

```
import { NextResponse } from "next/server";
import { APIKeyStatus } from "@/types";

export async function GET() {
  const status: APIKeyStatus = {
    youtube: !!(process.env.YOUTUBE_API_KEY && process.env.YOUTUBE_CHANNEL_ID),
    openai: !!process.env.OPENAI_API_KEY,
    google: !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    unsplash: !!process.env.UNSPLASH_ACCESS_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    replicate: !!process.env.REPLICATE_API_TOKEN,
    stability: !!process.env.STABILITY_API_KEY,
  };

  return NextResponse.json(status);
}

```

---
#### `app/api/config/test-key/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic'; // Força o Next.js a não cachear esse teste

export async function POST(req: Request) {
  try {
    // 1. Recebe os dados de forma segura
    const body = await req.json();
    
    // Normaliza os nomes dos campos (aceita tanto o formato novo quanto o antigo)
    const provider = body.provider || body.service || body.id; 
    let key = body.key || body.keyValue || body.apiKey;

    // Se a chave não veio no corpo, tenta pegar das variáveis de ambiente (Servidor)
    if (!key && provider) {
       const envKeyName = provider.toUpperCase().includes('KEY') 
         ? provider.toUpperCase() 
         : `${provider.toUpperCase()}_API_KEY`;
       key = process.env[envKeyName];
    }

    // Se ainda não tem chave, erro.
    if (!key) {
      return NextResponse.json(
        { error: 'Nenhuma chave fornecida e nenhuma encontrada no servidor.' },
        { status: 400 }
      );
    }

    console.log(`[Test-Key] Testando conexão para: ${provider}...`);
    let isValid = false;
    let details = "";

    // 2. Lógica de Teste Simplificada (Usa FETCH nativo para não depender de libs)
    switch (provider) {
      case 'openai':
        // Teste leve na API da OpenAI
        const openaiRes = await fetch('https://api.openai.com/v1/models?limit=1', {
          headers: { 'Authorization': `Bearer ${key}` }
        });
        isValid = openaiRes.ok;
        if (!isValid) details = "API recusou a chave (401/403)";
        break;
      
      case 'google':
        // Teste para Google Gemini (Generative Language API)
        // Usa pageSize=1 para ser leve
        const geminiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}&pageSize=1`);
        isValid = geminiRes.ok;
        if (!isValid) {
             const err = await geminiRes.json();
             details = err.error?.message || "Erro na API do Google Gemini";
        }
        break;

      case 'youtube':
        // Teste na API do YouTube otimizado para economizar cota (1 unidade vs 100 unidades do search)
        // chart=mostPopular não requer autenticação de usuário, apenas a chave de API
        const ytRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${key}`);
        isValid = ytRes.ok;
        if (!isValid) {
            const err = await ytRes.json();
            details = err.error?.message || "Erro na API do YouTube";
        }
        break;
      
      case 'anthropic':
        // Teste na API da Anthropic
        const anthropicRes = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
                'x-api-key': key,
                'anthropic-version': '2023-06-01',
                'content-type': 'application/json'
            },
            body: JSON.stringify({
                model: "claude-3-haiku-20240307",
                max_tokens: 1,
                messages: [{ role: "user", content: "Hi" }]
            })
        });
        // Anthropic pode retornar 400 se o corpo for ruim, mas 401 se a chave for ruim.
        // Se passar do 401, a chave existe.
        isValid = anthropicRes.status !== 401 && anthropicRes.status !== 403;
        break;

      case 'pexels':
        const pexelsRes = await fetch('https://api.pexels.com/v1/curated?per_page=1', {
            headers: { 'Authorization': key }
        });
        isValid = pexelsRes.ok;
        break;

      case 'pixabay':
        const pixabayRes = await fetch(`https://pixabay.com/api/?key=${key}&q=test`);
        isValid = pixabayRes.ok;
        break;

      case 'json2video':
        const j2vRes = await fetch('https://api.json2video.com/v2/movie', {
            headers: { 'x-api-key': key }
        });
        // JSON2Video: 401 = Chave inválida. 
        // 405 (Method Not Allowed) ou 200 = Chave válida (passou da autenticação).
        isValid = j2vRes.status !== 401 && j2vRes.status !== 403;
        break;

      case 'elevenlabs':
        const elevenRes = await fetch('https://api.elevenlabs.io/v1/user', {
            headers: { 'xi-api-key': key }
        });
        isValid = elevenRes.ok;
        break;

      case 'tavily':
         // Teste real na API do Tavily (custará 1 crédito, mas garante a conexão)
         const tavilyRes = await fetch('https://api.tavily.com/search', {
             method: 'POST',
             headers: { 'Content-Type': 'application/json' },
             body: JSON.stringify({ api_key: key, query: "test", max_results: 1 })
         });
         isValid = tavilyRes.ok;
         if (!isValid) details = "Erro na API do Tavily (Chave inválida ou sem créditos)";
         break;

      default:
        // Fallback para serviços desconhecidos
        console.warn(`[Test-Key] Serviço desconhecido ${provider}, assumindo válido.`);
        isValid = true;
        details = "Serviço não verificado, formato aceito.";
    }

    // 3. Retorno
    if (isValid) {
      return NextResponse.json({ success: true, message: "Conexão estabelecida com sucesso!", details });
    } else {
      console.error(`[Test-Key] Falha para ${provider}: ${details}`);
      return NextResponse.json({ error: "A chave informada é inválida ou expirou.", details }, { status: 401 });
    }

  } catch (error) {
    console.error("Erro interno no teste de API:", error);
    const message = error instanceof Error ? error.message : "Erro interno no servidor";
    return NextResponse.json({ error: message }, { status: 500 });
  }
}
```

---
#### `app/api/health/route.ts`

```
import { NextResponse } from "next/server";
import { systemBoot } from "@/lib/system/boot";

export async function GET() {
  const report = await systemBoot();
  return NextResponse.json(report);
}

```

---
#### `app/api/images/generate/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ImageProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { prompt, provider } = body as { prompt: string; provider: ImageProvider };

    if (!prompt || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: prompt, provider" },
        { status: 400 }
      );
    }

    let imageUrl: string;

    switch (provider) {
      case "dalle": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/images/generations", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "dall-e-3",
            prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look, 16:9 aspect ratio.`,
            n: 1,
            size: "1792x1024",
            quality: "standard",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "DALL-E generation failed");
        }

        const data = await response.json();
        imageUrl = data.data[0].url;
        break;
      }

      case "stability": {
        const apiKey = process.env.STABILITY_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Stability API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch(
          "https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/text-to-image",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify({
              text_prompts: [
                {
                  text: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
                  weight: 1,
                },
              ],
              cfg_scale: 7,
              width: 1344,
              height: 768,
              samples: 1,
              steps: 30,
            }),
          }
        );

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.message || "Stability generation failed");
        }

        const data = await response.json();
        const base64Image = data.artifacts[0].base64;
        imageUrl = `data:image/png;base64,${base64Image}`;
        break;
      }

      case "replicate": {
        const apiToken = process.env.REPLICATE_API_TOKEN;
        if (!apiToken) {
          return NextResponse.json(
            { error: "Replicate API token not configured" },
            { status: 400 }
          );
        }

        // Create prediction
        const createResponse = await fetch("https://api.replicate.com/v1/predictions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Token ${apiToken}`,
          },
          body: JSON.stringify({
            version: "39ed52f2a78e934b3ba6e2a89f5b1c712de7dfea535525255b1aa35c5565e08b",
            input: {
              prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
              width: 1344,
              height: 768,
              num_outputs: 1,
            },
          }),
        });

        if (!createResponse.ok) {
          throw new Error("Replicate prediction creation failed");
        }

        const prediction = await createResponse.json();
        let result = prediction;

        // Poll for completion
        while (result.status !== "succeeded" && result.status !== "failed") {
          await new Promise((resolve) => setTimeout(resolve, 1000));
          const statusResponse = await fetch(
            `https://api.replicate.com/v1/predictions/${result.id}`,
            {
              headers: {
                Authorization: `Token ${apiToken}`,
              },
            }
          );
          result = await statusResponse.json();
        }

        if (result.status === "failed") {
          throw new Error("Replicate generation failed");
        }

        imageUrl = result.output[0];
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown provider: ${provider}` },
          { status: 400 }
        );
    }

    return NextResponse.json({ imageUrl, provider });
  } catch (error) {
    console.error("Image generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Image generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/media/search/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { MediaSource, MediaItem } from "@/types";
import { v4 as uuidv4 } from "uuid";

interface PexelsVideo {
  id: number;
  url: string;
  image: string;
  duration: number;
  video_files: Array<{
    id: number;
    quality: string;
    file_type: string;
    width: number;
    height: number;
    link: string;
  }>;
  user: { name: string };
}

interface PexelsPhoto {
  id: number;
  url: string;
  src: { original: string; medium: string };
  photographer: string;
}

interface PixabayHit {
  id: number;
  pageURL: string;
  webformatURL: string;
  largeImageURL: string;
  duration?: number;
  videos?: {
    medium: { url: string };
  };
  user: string;
}

interface UnsplashResult {
  id: string;
  urls: { regular: string; full: string };
  user: { name: string };
  links: { html: string };
}

async function searchPexelsVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/videos/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.videos?.map((video: PexelsVideo) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: video.id.toString(),
      url: video.video_files.find((f) => f.quality === "hd")?.link || video.video_files[0]?.link || "",
      previewUrl: video.image,
      type: "video" as const,
      duration: video.duration,
      attribution: `Pexels - ${video.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Pexels search error:", error);
    return [];
  }
}

async function searchPexelsPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.photos?.map((photo: PexelsPhoto) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: photo.id.toString(),
      url: photo.src.original,
      previewUrl: photo.src.medium,
      type: "image" as const,
      duration: null,
      attribution: `Pexels - ${photo.photographer}`,
    })) || [];
  } catch (error) {
    console.error("Pexels photos search error:", error);
    return [];
  }
}

async function searchPixabayVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/videos/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.videos?.medium?.url || "",
      previewUrl: hit.webformatURL || `https://i.vimeocdn.com/video/${hit.id}_640x360.jpg`,
      type: "video" as const,
      duration: hit.duration || null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay search error:", error);
    return [];
  }
}

async function searchPixabayPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12&image_type=photo`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.largeImageURL,
      previewUrl: hit.webformatURL,
      type: "image" as const,
      duration: null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay photos search error:", error);
    return [];
  }
}

async function searchUnsplash(query: string): Promise<MediaItem[]> {
  const accessKey = process.env.UNSPLASH_ACCESS_KEY;
  if (!accessKey) return [];

  try {
    const response = await fetch(
      `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: `Client-ID ${accessKey}` },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.results?.map((result: UnsplashResult) => ({
      id: uuidv4(),
      source: "unsplash" as MediaSource,
      sourceId: result.id,
      url: result.urls.full,
      previewUrl: result.urls.regular,
      type: "image" as const,
      duration: null,
      attribution: `Unsplash - ${result.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Unsplash search error:", error);
    return [];
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { query, sources, mediaType } = body as {
      query: string;
      sources?: MediaSource[];
      mediaType?: "video" | "image" | "all";
    };

    if (!query) {
      return NextResponse.json(
        { error: "Missing required field: query" },
        { status: 400 }
      );
    }

    const requestedSources = sources || ["pexels", "pixabay", "unsplash"];
    const type = mediaType || "all";
    const results: MediaItem[] = [];

    // Run searches in parallel
    const searchPromises: Promise<MediaItem[]>[] = [];

    if (requestedSources.includes("pexels")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPexelsVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPexelsPhotos(query));
      }
    }

    if (requestedSources.includes("pixabay")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPixabayVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPixabayPhotos(query));
      }
    }

    if (requestedSources.includes("unsplash")) {
      if (type === "all" || type === "image") {
        searchPromises.push(searchUnsplash(query));
      }
    }

    const searchResults = await Promise.all(searchPromises);
    searchResults.forEach((items) => results.push(...items));

    return NextResponse.json({ results });
  } catch (error) {
    console.error("Media search error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Media search failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/description/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Description } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("description"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptSummary = script?.sections?.map((s: { content: string }) => s.content).join("\n").substring(0, 1000) || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are an SEO expert for YouTube video descriptions.
Create a description that:
- Starts with a compelling summary (first 2 lines are crucial for SEO)
- Includes timestamps for main sections
- Has relevant links placeholders
- Uses natural keyword placement
- Is 200-500 words
- Includes a call-to-action

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return ONLY the description text, no JSON wrapper.`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create an SEO-optimized YouTube description for a video about: ${theme}

Script Summary:
${scriptSummary}

Research Insights:
${researchContext}`,
      temperature: 0.7,
      maxTokens: 2000,
    });

    const description: Description = {
      id: uuidv4(),
      status: "ready",
      content: text.trim(),
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(description);
  } catch (error) {
    console.error("Description generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Description generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/rationale/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      channelData,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research ? `
Research Insights: ${research.consolidatedInsights}
Top Performing Topics: ${research.internalAnalysis?.topPerformingTopics?.join(", ") || "N/A"}
Trending Topics: ${research.externalAnalysis?.trendingTopics?.join(", ") || "N/A"}
Market Opportunities: ${research.externalAnalysis?.marketOpportunities?.join(", ") || "N/A"}
` : "";

    const channelContext = channelData ? `
Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Recent Performance: ${channelData.recentVideos?.slice(0, 3).map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ") || "N/A"}
` : "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist.
Write a compelling explanation of why this video proposal will perform well.
Focus on:
- Data-backed insights from research
- Alignment with audience interests
- Market opportunity and timing
- Competitive advantages
- Expected performance indicators

Write in a confident, analytical tone. Be specific with references to data.
Keep it to 2-3 paragraphs.`,
      prompt: `Explain why a video about "${theme}" will perform well.

${researchContext}
${channelContext}`,
      temperature: 0.7,
      maxTokens: 1000,
    });

    return NextResponse.json({ rationale: text.trim() });
  } catch (error) {
    console.error("Rationale generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Rationale generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/script/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { Script, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Verify AI provider is configured
    if (provider === "openai" && !process.env.OPENAI_API_KEY) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !process.env.ANTHROPIC_API_KEY) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    let aiModel;
    switch (provider) {
      case "openai":
        aiModel = openai(model);
        break;
      case "google":
        aiModel = google(model);
        break;
      case "anthropic":
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("script"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const researchContext = research?.consolidatedInsights || "No research data available";

    const systemPrompt = `You are an expert YouTube scriptwriter specializing in retention-focused content.
Your scripts must:
- Be at least 8 minutes long when read at a natural pace (approximately 1200-1500 words)
- Start with a powerful hook in the first 30 seconds
- Use pattern interrupts every 2-3 minutes to maintain engagement
- Include clear value propositions throughout
- End with a strong call-to-action

Return a JSON object with this structure:
{
  "sections": [
    {
      "type": "hook",
      "content": "The hook script text...",
      "duration": 30
    },
    {
      "type": "intro",
      "content": "Introduction text...",
      "duration": 60
    },
    {
      "type": "content",
      "content": "Main content section 1...",
      "duration": 120
    },
    // ... more content sections
    {
      "type": "cta",
      "content": "Call to action...",
      "duration": 30
    },
    {
      "type": "outro",
      "content": "Closing...",
      "duration": 30
    }
  ]
}

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create a retention-focused YouTube script about: ${theme}

Research Insights:
${researchContext}

Generate a complete script with all sections. The total duration should be at least 8 minutes (480 seconds).`,
      temperature: 0.8,
      maxTokens: 8000,
    });

    let scriptData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        scriptData = JSON.parse(match[0]);
      }
    } catch {
      // Fallback structure
      scriptData = {
        sections: [
          { type: "hook", content: "Generated script content", duration: 30 },
          { type: "intro", content: text.substring(0, 500), duration: 60 },
          { type: "content", content: text.substring(500), duration: 390 },
          { type: "cta", content: "Like and subscribe!", duration: 30 },
          { type: "outro", content: "Thanks for watching!", duration: 30 },
        ],
      };
    }

    const sections: ScriptSection[] = scriptData.sections.map((section: { type: string; content: string; duration: number }) => ({
      id: uuidv4(),
      type: section.type as ScriptSection["type"],
      content: section.content,
      duration: section.duration || 60,
    }));

    const totalDuration = sections.reduce((sum, s) => sum + s.duration, 0);

    const script: Script = {
      id: uuidv4(),
      status: "ready",
      sections,
      totalDuration,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
      audioUrl: null,
      ttsProvider: null,
      ttsVoice: null,
    };

    return NextResponse.json(script);
  } catch (error) {
    console.error("Script generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Script generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/soundtrack/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Soundtrack, SoundtrackSuggestion } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      mood,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const { text } = await generateText({
      model: aiModel,
      system: `You are a music supervisor for YouTube content.
Suggest 3 copyright-free music tracks that would fit the video theme and mood.
These should be actual royalty-free music suggestions from platforms like:
- YouTube Audio Library
- Pixabay Music
- Free Music Archive
- Incompetech

Return a JSON object with this structure:
{
  "suggestions": [
    {
      "title": "Track Title",
      "artist": "Artist Name",
      "genre": "Genre",
      "url": "URL or platform reference",
      "duration": 180,
      "license": "CC0 or specific license"
    }
  ]
}`,
      prompt: `Suggest 3 copyright-free music tracks for a video about: ${theme}
Mood: ${mood || "professional, engaging, educational"}`,
      temperature: 0.7,
      maxTokens: 1000,
    });

    let suggestionsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        suggestionsData = JSON.parse(match[0]);
      }
    } catch {
      suggestionsData = {
        suggestions: [
          {
            title: "Corporate Upbeat",
            artist: "Various",
            genre: "Corporate",
            url: "YouTube Audio Library",
            duration: 180,
            license: "Royalty Free",
          },
          {
            title: "Inspiring Background",
            artist: "Various",
            genre: "Inspirational",
            url: "YouTube Audio Library",
            duration: 240,
            license: "Royalty Free",
          },
          {
            title: "Modern Tech",
            artist: "Various",
            genre: "Electronic",
            url: "YouTube Audio Library",
            duration: 200,
            license: "Royalty Free",
          },
        ],
      };
    }

    const suggestions: SoundtrackSuggestion[] = suggestionsData.suggestions.map(
      (s: { title: string; artist: string; genre: string; url: string; duration: number; license: string }) => ({
        id: uuidv4(),
        title: s.title,
        artist: s.artist,
        genre: s.genre,
        url: s.url,
        duration: s.duration || 180,
        license: s.license,
        isUpload: false,
      })
    );

    const soundtrack: Soundtrack = {
      id: uuidv4(),
      status: "ready",
      suggestions,
      selected: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(soundtrack);
  } catch (error) {
    console.error("Soundtrack generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Soundtrack generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/tags/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Tags } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      description,
      research,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research?.externalAnalysis?.trendingTopics?.join(", ") || "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube SEO specialist.
Generate 15-30 relevant tags for a YouTube video.
Tags should include:
- Primary keywords (high search volume)
- Secondary keywords (medium search volume)
- Long-tail keywords
- Related topics
- Trending terms

Return ONLY a JSON array of strings (the tags), no other text.
Example: ["tag1", "tag2", "tag3"]`,
      prompt: `Generate tags for a YouTube video about: ${theme}

Description summary: ${description?.substring(0, 500) || "N/A"}

Trending topics in this niche: ${researchContext}`,
      temperature: 0.7,
      maxTokens: 1000,
    });

    let tagsList: string[] = [];
    try {
      const match = text.match(/\[[\s\S]*\]/);
      if (match) {
        tagsList = JSON.parse(match[0]);
      }
    } catch {
      // Parse as comma-separated if JSON fails
      tagsList = text.split(",").map((t) => t.trim().replace(/["'\[\]]/g, "")).filter(Boolean);
    }

    const tags: Tags = {
      id: uuidv4(),
      status: "ready",
      items: tagsList,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(tags);
  } catch (error) {
    console.error("Tags generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Tags generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/titles/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, TitlesAndThumbs, TitleThumbnailVariation } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("thumbnail"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptHook = script?.sections?.find((s: { type: string }) => s.type === "hook")?.content || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are a YouTube title and thumbnail strategist.
Create 3 variations of titles and thumbnail prompts.

Each title should:
- Be under 60 characters
- Create curiosity or urgency
- Include power words
- Be clear about the value

Each thumbnail prompt should:
- Be detailed for AI image generation
- Describe the visual elements clearly
- Include colors, composition, and mood
- NOT include text (text will be added separately)
- Focus on eye-catching visuals

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return a JSON object with this structure:
{
  "variations": [
    {
      "title": "Title 1",
      "thumbnailPrompt": "Detailed thumbnail prompt 1..."
    },
    {
      "title": "Title 2",
      "thumbnailPrompt": "Detailed thumbnail prompt 2..."
    },
    {
      "title": "Title 3",
      "thumbnailPrompt": "Detailed thumbnail prompt 3..."
    }
  ]
}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create 3 title and thumbnail variations for a video about: ${theme}

Hook from script: ${scriptHook}

Research insights: ${researchContext}`,
      temperature: 0.8,
      maxTokens: 2000,
    });

    let variationsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        variationsData = JSON.parse(match[0]);
      }
    } catch {
      variationsData = {
        variations: [
          { title: theme, thumbnailPrompt: `A professional YouTube thumbnail about ${theme}` },
          { title: `How to ${theme}`, thumbnailPrompt: `Eye-catching visual representation of ${theme}` },
          { title: `${theme} Explained`, thumbnailPrompt: `Educational and engaging thumbnail about ${theme}` },
        ],
      };
    }

    const variations: TitleThumbnailVariation[] = variationsData.variations.map(
      (v: { title: string; thumbnailPrompt: string }) => ({
        id: uuidv4(),
        title: v.title,
        thumbnailPrompt: v.thumbnailPrompt,
        thumbnailUrl: null,
        imageProvider: null,
      })
    );

    const titlesAndThumbs: TitlesAndThumbs = {
      id: uuidv4(),
      status: "ready",
      variations,
      selectedVariation: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(titlesAndThumbs);
  } catch (error) {
    console.error("Titles generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Titles generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/render/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { RenderData, StoryboardScene } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { storyboardId, scenes, soundtrack } = body as {
      storyboardId: string;
      scenes: StoryboardScene[];
      soundtrack?: { url: string };
    };

    if (!storyboardId || !scenes) {
      return NextResponse.json(
        { error: "Missing required fields: storyboardId, scenes" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    // Build JSON2Video project structure
    const project = {
      resolution: "full-hd",
      quality: "high",
      scenes: scenes.map((scene) => ({
        comment: scene.text.substring(0, 50),
        duration: scene.duration,
        elements: [
          // Background media
          scene.media?.url
            ? {
                type: scene.media.type === "video" ? "video" : "image",
                src: scene.media.url,
                duration: scene.duration,
              }
            : {
                type: "color",
                color: "#1a1a1a",
                duration: scene.duration,
              },
          // Text overlay
          {
            type: "text",
            text: scene.text.substring(0, 100),
            duration: scene.duration,
            style: {
              fontSize: 24,
              fontFamily: "Arial",
              color: "#ffffff",
              backgroundColor: "rgba(0,0,0,0.5)",
            },
            position: {
              x: "center",
              y: "bottom",
            },
          },
          // Voiceover
          ...(scene.voiceoverUrl
            ? [
                {
                  type: "audio",
                  src: scene.voiceoverUrl,
                  duration: scene.duration,
                },
              ]
            : []),
        ],
        transition: {
          type: scene.transition,
          duration: 0.5,
        },
      })),
      // Background music
      ...(soundtrack?.url
        ? {
            soundtrack: {
              src: soundtrack.url,
              volume: 0.3,
            },
          }
        : {}),
    };

    // Create render job
    const createResponse = await fetch("https://api.json2video.com/v2/movies", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": apiKey,
      },
      body: JSON.stringify({ project }),
    });

    if (!createResponse.ok) {
      const error = await createResponse.json();
      throw new Error(error.message || "Failed to create render job");
    }

    const jobData = await createResponse.json();

    const renderData: RenderData = {
      id: jobData.project || uuidv4(),
      createdAt: new Date().toISOString(),
      storyboardId,
      status: "rendering",
      progress: 0,
      videoUrl: null,
      error: null,
    };

    return NextResponse.json(renderData);
  } catch (error) {
    console.error("Render error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Render failed" },
      { status: 500 }
    );
  }
}

// Check render status
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const jobId = searchParams.get("jobId");

    if (!jobId) {
      return NextResponse.json(
        { error: "Missing jobId parameter" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    const response = await fetch(`https://api.json2video.com/v2/movies/${jobId}`, {
      headers: {
        "x-api-key": apiKey,
      },
    });

    if (!response.ok) {
      throw new Error("Failed to check render status");
    }

    const data = await response.json();

    let status: RenderData["status"] = "rendering";
    if (data.status === "done") {
      status = "completed";
    } else if (data.status === "failed") {
      status = "error";
    }

    return NextResponse.json({
      id: jobId,
      status,
      progress: data.progress || 0,
      videoUrl: data.movie || null,
      error: data.error || null,
    });
  } catch (error) {
    console.error("Render status check error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Status check failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/research/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { createOpenAI } from "@ai-sdk/openai";
import { createGoogleGenerativeAI } from "@ai-sdk/google";
import { createAnthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, ResearchData, ResearchQuery, ResearchResult } from "@/types";
import {
  getOpenAIKey,
  getGoogleKey,
  getAnthropicKey,
  getTavilyKey,
} from "@/lib/get-api-key";

async function searchWithTavily(query: string, apiKey: string): Promise<ResearchResult[]> {
  if (!apiKey) {
    return [];
  }

  try {
    const response = await fetch("https://api.tavily.com/search", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        api_key: apiKey,
        query,
        search_depth: "advanced",
        max_results: 5,
      }),
    });

    if (!response.ok) {
      throw new Error("Tavily search failed");
    }

    const data = await response.json();
    return data.results?.map((result: { title: string; url: string; content: string; score: number }) => ({
      title: result.title,
      url: result.url,
      snippet: result.content,
      score: result.score,
    })) || [];
  } catch (error) {
    console.error("Tavily search error:", error);
    return [];
  }
}

async function simulateSearchWithLLM(
  query: string,
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
): Promise<ResearchResult[]> {
  const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

  const { text } = await generateText({
    model: aiModel,
    system: `You are a research assistant. Generate realistic search results for the given query.
Return a JSON array with 3-5 results, each having: title, url, snippet, score (0-1).
Make the results relevant and informative for YouTube content creation.
Return ONLY valid JSON, no other text.`,
    prompt: `Generate search results for: "${query}"`,
    temperature: 0.7,
  });

  try {
    // Extract JSON from the response
    const jsonMatch = text.match(/\[[\s\S]*\]/);
    if (jsonMatch) {
      return JSON.parse(jsonMatch[0]);
    }
    return [];
  } catch {
    return [];
  }
}

function getAIModel(
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
) {
  switch (provider) {
    case "openai": {
      const openai = createOpenAI({
        apiKey: openaiKey || process.env.OPENAI_API_KEY,
      });
      return openai(model);
    }
    case "google": {
      const google = createGoogleGenerativeAI({
        apiKey: googleKey || process.env.GOOGLE_GENERATIVE_AI_API_KEY,
      });
      return google(model);
    }
    case "anthropic": {
      const anthropicClient = createAnthropic({
        apiKey: anthropicKey || process.env.ANTHROPIC_API_KEY,
      });
      return anthropicClient(model);
    }
    default:
      throw new Error(`Unknown provider: ${provider}`);
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      contextId,
      theme,
      channelData,
      metrics,
      provider,
      model,
      diretrizes,
    } = body;

    if (!contextId || !theme) {
      return NextResponse.json(
        { error: "Missing required fields: contextId, theme" },
        { status: 400 }
      );
    }

    // Get API keys from headers or env
    const openaiKey = getOpenAIKey(request);
    const googleKey = getGoogleKey(request);
    const anthropicKey = getAnthropicKey(request);
    const tavilyKey = getTavilyKey(request);

    // Verify AI provider is configured
    if (provider === "openai" && !openaiKey) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !googleKey) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !anthropicKey) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

    // Build context for analysis
    const channelContext = channelData
      ? `Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Total Views: ${channelData.viewCount}
Recent Videos: ${channelData.recentVideos?.map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ")}`
      : "No channel data available";

    const metricsContext = metrics?.length
      ? `Performance Metrics:\n${metrics.slice(0, 10).map((m: { title: string; views: number; ctr: number }) =>
          `- ${m.title}: ${m.views} views, ${m.ctr}% CTR`
        ).join("\n")}`
      : "No metrics data available";

    const diretrizesContext = diretrizes?.length
      ? `\n\nDiretrizes to follow:\n${diretrizes.map((d: { title: string; systemPrompt: string }) => `- ${d.title}: ${d.systemPrompt}`).join("\n")}`
      : "";

    // Step 1: Generate research queries
    const { text: queriesText } = await generateText({
      model: aiModel,
      system: `You are a YouTube research analyst. Generate 3-5 research queries to gather external information that will help create a high-performing video.
Return ONLY a JSON array of strings (queries).${diretrizesContext}`,
      prompt: `Theme: ${theme}

${channelContext}

${metricsContext}

Generate search queries to research this topic for a YouTube video.`,
      temperature: 0.7,
    });

    let queries: string[] = [];
    try {
      const match = queriesText.match(/\[[\s\S]*\]/);
      if (match) {
        queries = JSON.parse(match[0]);
      }
    } catch {
      queries = [theme, `${theme} trends 2024`, `${theme} YouTube video ideas`];
    }

    // Step 2: Execute searches
    const hasTavily = !!tavilyKey;
    const researchQueries: ResearchQuery[] = [];

    for (const query of queries.slice(0, 5)) {
      let results: ResearchResult[];
      let source: "tavily" | "llm_simulated";

      if (hasTavily) {
        results = await searchWithTavily(query, tavilyKey!);
        source = "tavily";
      } else {
        results = await simulateSearchWithLLM(query, provider, model, openaiKey, googleKey, anthropicKey);
        source = "llm_simulated";
      }

      researchQueries.push({ query, source, results });
    }

    // Step 3: Analyze and consolidate
    const { text: analysisText } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist. Analyze the provided data and research to generate actionable insights.
Return a JSON object with this structure:
{
  "internalAnalysis": {
    "topPerformingTopics": ["topic1", "topic2"],
    "audienceInsights": ["insight1", "insight2"],
    "contentGaps": ["gap1", "gap2"],
    "recommendations": ["rec1", "rec2"]
  },
  "externalAnalysis": {
    "trendingTopics": ["trend1", "trend2"],
    "competitorInsights": ["comp1", "comp2"],
    "marketOpportunities": ["opp1", "opp2"]
  },
  "consolidatedInsights": "A detailed paragraph summarizing all findings and strategic recommendations"
}${diretrizesContext}`,
      prompt: `Theme: ${theme}

Channel Data:
${channelContext}

Metrics:
${metricsContext}

Research Results:
${researchQueries.map((q) => `Query: ${q.query}\nResults: ${q.results.map((r) => r.snippet).join("\n")}`).join("\n\n")}

Analyze this data and provide strategic insights.`,
      temperature: 0.7,
    });

    let analysis;
    try {
      const match = analysisText.match(/\{[\s\S]*\}/);
      if (match) {
        analysis = JSON.parse(match[0]);
      }
    } catch {
      analysis = {
        internalAnalysis: {
          topPerformingTopics: [],
          audienceInsights: [],
          contentGaps: [],
          recommendations: [],
        },
        externalAnalysis: {
          trendingTopics: [],
          competitorInsights: [],
          marketOpportunities: [],
        },
        consolidatedInsights: "Research analysis completed. Please review the gathered data.",
      };
    }

    const researchData: ResearchData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      contextId,
      internalAnalysis: analysis.internalAnalysis,
      externalAnalysis: analysis.externalAnalysis,
      queries: researchQueries,
      consolidatedInsights: analysis.consolidatedInsights,
    };

    return NextResponse.json(researchData);
  } catch (error) {
    console.error("Research error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Research failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/status/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

export async function GET() {
  return NextResponse.json({
    openai: !!process.env.OPENAI_API_KEY,
    gemini: !!process.env.GEMINI_API_KEY || !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    youtube: !!process.env.YOUTUBEDATA_API_KEY || !!process.env.YOUTUBE_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
  });
}

```

---
#### `app/api/storyboard/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { StoryboardData, StoryboardScene, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { proposalId, script } = body as {
      proposalId: string;
      script: { sections: ScriptSection[] };
    };

    if (!proposalId || !script?.sections) {
      return NextResponse.json(
        { error: "Missing required fields: proposalId, script" },
        { status: 400 }
      );
    }

    // Split script sections into storyboard scenes
    const scenes: StoryboardScene[] = [];
    let order = 0;

    for (const section of script.sections) {
      // Split content into smaller chunks for scenes
      // Each scene should be roughly 15-30 seconds
      const maxSceneDuration = 30;
      const contentChunks = splitContentIntoChunks(section.content, section.duration, maxSceneDuration);

      for (const chunk of contentChunks) {
        scenes.push({
          id: uuidv4(),
          order: order++,
          scriptSectionId: section.id,
          text: chunk.text,
          voiceoverUrl: null,
          media: null,
          duration: chunk.duration,
          transition: order === contentChunks.length - 1 ? "fade" : "cut",
        });
      }
    }

    const storyboard: StoryboardData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      scenes,
      totalDuration: scenes.reduce((sum, s) => sum + s.duration, 0),
    };

    return NextResponse.json(storyboard);
  } catch (error) {
    console.error("Storyboard generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Storyboard generation failed" },
      { status: 500 }
    );
  }
}

function splitContentIntoChunks(
  content: string,
  totalDuration: number,
  maxDuration: number
): { text: string; duration: number }[] {
  const sentences = content.match(/[^.!?]+[.!?]+/g) || [content];
  const chunks: { text: string; duration: number }[] = [];

  let currentChunk = "";
  let currentDuration = 0;
  const durationPerSentence = totalDuration / sentences.length;

  for (const sentence of sentences) {
    const sentenceDuration = Math.round(durationPerSentence);

    if (currentDuration + sentenceDuration > maxDuration && currentChunk) {
      chunks.push({
        text: currentChunk.trim(),
        duration: currentDuration,
      });
      currentChunk = sentence;
      currentDuration = sentenceDuration;
    } else {
      currentChunk += " " + sentence;
      currentDuration += sentenceDuration;
    }
  }

  if (currentChunk.trim()) {
    chunks.push({
      text: currentChunk.trim(),
      duration: currentDuration || maxDuration,
    });
  }

  // Ensure we have at least one chunk
  if (chunks.length === 0) {
    chunks.push({
      text: content,
      duration: totalDuration,
    });
  }

  return chunks;
}

```

---
#### `app/api/tts/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { TTSProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { text, provider, voice } = body as {
      text: string;
      provider: TTSProvider;
      voice: string;
    };

    if (!text || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: text, provider" },
        { status: 400 }
      );
    }

    let audioBuffer: ArrayBuffer;

    switch (provider) {
      case "openai": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/audio/speech", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "tts-1-hd",
            input: text,
            voice: voice || "alloy",
            response_format: "mp3",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "OpenAI TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "elevenlabs": {
        const apiKey = process.env.ELEVENLABS_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "ElevenLabs API key not configured" },
            { status: 400 }
          );
        }

        const voiceId = voice || "21m00Tcm4TlvDq8ikWAM"; // Default to Rachel
        const response = await fetch(
          `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "xi-api-key": apiKey,
            },
            body: JSON.stringify({
              text,
              model_id: "eleven_multilingual_v2",
              voice_settings: {
                stability: 0.5,
                similarity_boost: 0.75,
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("ElevenLabs TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "google": {
        const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Google API key not configured" },
            { status: 400 }
          );
        }

        // Google Cloud TTS requires different authentication
        // For simplicity, we'll use a basic synthesis endpoint
        const response = await fetch(
          `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              input: { text },
              voice: {
                languageCode: "pt-BR",
                name: voice || "pt-BR-Wavenet-A",
              },
              audioConfig: {
                audioEncoding: "MP3",
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("Google TTS failed");
        }

        const data = await response.json();
        const audioContent = data.audioContent;

        // Convert base64 to buffer
        const binaryString = atob(audioContent);
        const bytes = new Uint8Array(binaryString.length);
        for (let i = 0; i < binaryString.length; i++) {
          bytes[i] = binaryString.charCodeAt(i);
        }
        audioBuffer = bytes.buffer;
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown TTS provider: ${provider}` },
          { status: 400 }
        );
    }

    // Convert to base64 for response
    const base64Audio = Buffer.from(audioBuffer).toString("base64");
    const audioUrl = `data:audio/mp3;base64,${base64Audio}`;

    return NextResponse.json({ audioUrl, provider });
  } catch (error) {
    console.error("TTS error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "TTS generation failed" },
      { status: 500 }
    );
  }
}

export async function GET() {
  // Return available voices for each provider
  const voices = {
    openai: [
      { id: "alloy", name: "Alloy" },
      { id: "echo", name: "Echo" },
      { id: "fable", name: "Fable" },
      { id: "onyx", name: "Onyx" },
      { id: "nova", name: "Nova" },
      { id: "shimmer", name: "Shimmer" },
    ],
    elevenlabs: process.env.ELEVENLABS_API_KEY
      ? [
          { id: "21m00Tcm4TlvDq8ikWAM", name: "Rachel" },
          { id: "AZnzlk1XvdvUeBnXmlld", name: "Domi" },
          { id: "EXAVITQu4vr4xnSDxMaL", name: "Bella" },
          { id: "ErXwobaYiN019PkySvjV", name: "Antoni" },
          { id: "MF3mGyEYCl7XYWbV9V6O", name: "Elli" },
          { id: "TxGEqnHWrfWFTfGW9XjX", name: "Josh" },
        ]
      : [],
    google: [
      { id: "pt-BR-Wavenet-A", name: "Brazilian Portuguese - Female" },
      { id: "pt-BR-Wavenet-B", name: "Brazilian Portuguese - Male" },
      { id: "en-US-Wavenet-D", name: "English US - Male" },
      { id: "en-US-Wavenet-F", name: "English US - Female" },
    ],
  };

  return NextResponse.json(voices);
}

```

---
#### `app/api/youtube/channel/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ChannelData, RecentVideo } from "@/types";
import { getYouTubeKeys } from "@/lib/get-api-key";

export async function GET(request: NextRequest) {
  const { apiKey, channelId } = getYouTubeKeys(request);

  if (!apiKey || !channelId) {
    return NextResponse.json(
      {
        error: "YouTube API key or Channel ID not configured",
        details: !apiKey
          ? "YOUTUBE_API_KEY missing"
          : "YOUTUBE_CHANNEL_ID missing",
      },
      { status: 400 }
    );
  }

  try {
    // Fetch channel data
    const channelResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`
    );

    if (!channelResponse.ok) {
      const errorData = await channelResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${channelResponse.status}`;
      throw new Error(`YouTube API Error: ${errorMessage}`);
    }

    const channelData = await channelResponse.json();

    if (!channelData.items || channelData.items.length === 0) {
      return NextResponse.json(
        {
          error: "Channel not found",
          details: `No channel found with ID: ${channelId}`,
        },
        { status: 404 }
      );
    }

    const channel = channelData.items[0];

    // Fetch recent videos
    const videosResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&type=video&order=date&maxResults=10&key=${apiKey}`
    );

    if (!videosResponse.ok) {
      const errorData = await videosResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${videosResponse.status}`;
      throw new Error(`Failed to fetch videos: ${errorMessage}`);
    }

    const videosData = await videosResponse.json();
    const videoIds =
      videosData.items
        ?.map((item: { id: { videoId: string } }) => item.id.videoId)
        .join(",") || "";

    // Fetch video statistics
    let recentVideos: RecentVideo[] = [];
    if (videoIds) {
      const statsResponse = await fetch(
        `https://www.googleapis.com/youtube/v3/videos?part=statistics,snippet&id=${videoIds}&key=${apiKey}`
      );

      if (statsResponse.ok) {
        const statsData = await statsResponse.json();
        recentVideos =
          statsData.items?.map(
            (video: {
              id: string;
              snippet: {
                title: string;
                description: string;
                thumbnails: { medium: { url: string } };
                publishedAt: string;
              };
              statistics: {
                viewCount: string;
                likeCount: string;
                commentCount: string;
              };
            }) => ({
              id: video.id,
              title: video.snippet.title,
              description: video.snippet.description,
              thumbnailUrl: video.snippet.thumbnails.medium.url,
              publishedAt: video.snippet.publishedAt,
              viewCount: parseInt(video.statistics.viewCount || "0"),
              likeCount: parseInt(video.statistics.likeCount || "0"),
              commentCount: parseInt(video.statistics.commentCount || "0"),
            })
          ) || [];
      }
    }

    const result: ChannelData = {
      channelId: channel.id,
      title: channel.snippet.title,
      description: channel.snippet.description,
      subscriberCount: parseInt(channel.statistics.subscriberCount || "0"),
      videoCount: parseInt(channel.statistics.videoCount || "0"),
      viewCount: parseInt(channel.statistics.viewCount || "0"),
      recentVideos,
    };

    return NextResponse.json(result);
  } catch (error) {
    console.error("YouTube API error:", error);
    return NextResponse.json(
      {
        error: "Failed to fetch YouTube data",
        details: error instanceof Error ? error.message : "Unknown error",
      },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/youtube/upload/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { UploadData, UploadSetup } from "@/types";

/**
 * ⚠️ STUB IMPLEMENTATION - NOT PRODUCTION READY
 *
 * This endpoint returns simulated upload responses only.
 * Actual YouTube upload requires:
 * 1. OAuth2 authentication flow with youtube.upload scope
 * 2. Resumable upload implementation
 * 3. Video download from videoUrl
 * 4. Proper error handling and retry logic
 *
 * See PRODUCTION_NOTES.md for implementation guide.
 */

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      proposalId,
      renderId,
      videoUrl,
      title,
      description,
      tags,
      uploadSetup,
      accessToken,
    } = body as {
      proposalId: string;
      renderId: string;
      videoUrl: string;
      title: string;
      description: string;
      tags: string[];
      uploadSetup: UploadSetup;
      accessToken: string;
    };

    if (!proposalId || !renderId || !videoUrl || !title || !accessToken) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Prepare metadata
    const metadata = {
      snippet: {
        title,
        description,
        tags,
        categoryId: uploadSetup?.category || "22", // People & Blogs
        defaultLanguage: uploadSetup?.language || "pt",
      },
      status: {
        privacyStatus: "private", // Always upload as private first
        selfDeclaredMadeForKids: uploadSetup?.madeForKids || false,
        license: uploadSetup?.license === "creative_commons" ? "creativeCommon" : "youtube",
        embeddable: uploadSetup?.allowEmbedding !== false,
      },
    };

    // In a real implementation, this would:
    // 1. Download the video from videoUrl
    // 2. Use YouTube Data API v3 to upload the video
    // 3. Set the thumbnail
    //
    // For now, we'll return a simulated upload response
    // The actual implementation would require OAuth2 authentication flow

    // Note: YouTube upload requires OAuth2 with youtube.upload scope
    // This is typically done through a separate auth flow

    const uploadData: UploadData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      renderId,
      status: "pending",
      youtubeVideoId: null,
      youtubeUrl: null,
      error: null,
    };

    // In production, you would implement the actual upload here:
    // 1. Initialize resumable upload
    // 2. Upload video in chunks
    // 3. Set thumbnail
    // 4. Return video ID

    // For now, return pending status
    // The client can poll for status updates

    return NextResponse.json({
      ...uploadData,
      message: "Upload initiated. YouTube OAuth2 authentication required.",
      metadata,
    });
  } catch (error) {
    console.error("Upload error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Upload failed" },
      { status: 500 }
    );
  }
}

// Get YouTube categories
export async function GET() {
  const apiKey = process.env.YOUTUBE_API_KEY;

  if (!apiKey) {
    // Return default categories if no API key
    return NextResponse.json({
      categories: [
        { id: "1", title: "Film & Animation" },
        { id: "2", title: "Autos & Vehicles" },
        { id: "10", title: "Music" },
        { id: "15", title: "Pets & Animals" },
        { id: "17", title: "Sports" },
        { id: "19", title: "Travel & Events" },
        { id: "20", title: "Gaming" },
        { id: "22", title: "People & Blogs" },
        { id: "23", title: "Comedy" },
        { id: "24", title: "Entertainment" },
        { id: "25", title: "News & Politics" },
        { id: "26", title: "Howto & Style" },
        { id: "27", title: "Education" },
        { id: "28", title: "Science & Technology" },
        { id: "29", title: "Nonprofits & Activism" },
      ],
    });
  }

  try {
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/videoCategories?part=snippet&regionCode=BR&key=${apiKey}`
    );

    if (!response.ok) {
      throw new Error("Failed to fetch categories");
    }

    const data = await response.json();
    const categories = data.items
      ?.filter((item: { snippet: { assignable: boolean } }) => item.snippet.assignable)
      .map((item: { id: string; snippet: { title: string } }) => ({
        id: item.id,
        title: item.snippet.title,
      }));

    return NextResponse.json({ categories });
  } catch (error) {
    console.error("Categories fetch error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Failed to fetch categories" },
      { status: 500 }
    );
  }
}

```

---
#### `app/documentation/page.tsx`

```
"use client";

import { useState } from "react";
import { cn } from "@/lib/utils";
import {
  exportTabAsMarkdown,
  exportAllTabsAsMarkdown,
  exportTabAsPDF,
  DocumentationTab,
} from "@/lib/documentation-export";
import {
  Brain,
  Building2,
  Plug,
  Layers,
  Compass,
  Download,
  FileText,
  FileDown,
  ChevronRight,
  BookOpen,
} from "lucide-react";

// Tab Components
import GenesisTab from "@/components/documentation/GenesisTab";
import SystemVisionTab from "@/components/documentation/SystemVisionTab";
import IntegrationsTab from "@/components/documentation/IntegrationsTab";
import TechStackTab from "@/components/documentation/TechStackTab";
import CurrentStateTab from "@/components/documentation/CurrentStateTab";

// Tab content for export
import {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
} from "@/components/documentation/content";

const tabs = [
  {
    id: "genesis",
    label: "Gênese & Intenção",
    icon: Brain,
    description: "Origem e propósito fundamental do sistema",
    component: GenesisTab,
    gradient: "from-purple-500 to-indigo-600",
  },
  {
    id: "system-vision",
    label: "Visão Sistêmica",
    icon: Building2,
    description: "Funcionamento e arquitetura operacional",
    component: SystemVisionTab,
    gradient: "from-blue-500 to-cyan-600",
  },
  {
    id: "integrations",
    label: "Integrações & APIs",
    icon: Plug,
    description: "Conexões externas e fluxo de dados",
    component: IntegrationsTab,
    gradient: "from-green-500 to-emerald-600",
  },
  {
    id: "tech-stack",
    label: "Stack Tecnológica",
    icon: Layers,
    description: "Tecnologias e linguagens utilizadas",
    component: TechStackTab,
    gradient: "from-orange-500 to-amber-600",
  },
  {
    id: "current-state",
    label: "Estado Atual",
    icon: Compass,
    description: "Status do projeto e próximos passos",
    component: CurrentStateTab,
    gradient: "from-rose-500 to-pink-600",
  },
];

export default function DocumentationPage() {
  const [activeTab, setActiveTab] = useState("genesis");

  const activeTabData = tabs.find((t) => t.id === activeTab);
  const ActiveComponent = activeTabData?.component;

  // Prepare documentation tabs for export
  const documentationTabs: DocumentationTab[] = [
    { id: "genesis", title: "Gênese & Intenção do Sistema", icon: "🧠", content: genesisContent },
    { id: "system-vision", title: "Visão Sistêmica & Funcionamento", icon: "🏗️", content: systemVisionContent },
    { id: "integrations", title: "Arquitetura de Integrações & APIs", icon: "🔌", content: integrationsContent },
    { id: "tech-stack", title: "Stack Tecnológica & Linguagens", icon: "🧱", content: techStackContent },
    { id: "current-state", title: "Estado Atual & Próximos Passos", icon: "🧭", content: currentStateContent },
  ];

  const handleExportMarkdown = () => {
    const tab = documentationTabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsMarkdown(tab);
  };

  const handleExportAllMarkdown = () => {
    exportAllTabsAsMarkdown(documentationTabs);
  };

  const handleExportPDF = () => {
    const tab = tabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsPDF(activeTab, tab.label);
  };

  return (
    <>
      <div className="min-h-full">
        {/* Header */}
        <div className="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 px-8 py-12">
          <div className="max-w-7xl mx-auto">
            <div className="flex items-center gap-3 mb-4">
              <div className="p-3 bg-white/10 backdrop-blur-sm rounded-xl">
                <BookOpen className="w-8 h-8 text-white" />
              </div>
              <div>
                <h1 className="text-3xl font-bold text-white">
                  Documentação Viva
                </h1>
                <p className="text-white/80">
                  Memória cognitiva e base de auditoria técnica do sistema
                </p>
              </div>
            </div>

            {/* Export Buttons */}
            <div className="flex flex-wrap gap-3 mt-6">
              <button
                onClick={handleExportMarkdown}
                className="flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-sm font-medium transition-all"
              >
                <FileText className="w-4 h-4" />
                Exportar Aba (Markdown)
              </button>
              <button
                onClick={handleExportAllMarkdown}
                className="flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-sm font-medium transition-all"
              >
                <FileDown className="w-4 h-4" />
                Exportar Tudo (Markdown)
              </button>
              <button
                onClick={handleExportPDF}
                className="flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-sm font-medium transition-all"
              >
                <Download className="w-4 h-4" />
                Exportar Aba (PDF)
              </button>
            </div>
          </div>
        </div>

        {/* Tab Navigation */}
        <div className="bg-zinc-900/50 border-b border-zinc-800 sticky top-0 z-10 backdrop-blur-md">
          <div className="max-w-7xl mx-auto px-8">
            <div className="flex overflow-x-auto gap-1 py-2 hide-scrollbar">
              {tabs.map((tab) => {
                const Icon = tab.icon;
                const isActive = activeTab === tab.id;

                return (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={cn(
                      "flex items-center gap-2 px-4 py-3 rounded-lg text-sm font-medium whitespace-nowrap transition-all",
                      isActive
                        ? `bg-gradient-to-r ${tab.gradient} text-white shadow-lg`
                        : "text-zinc-400 hover:text-white hover:bg-zinc-800"
                    )}
                  >
                    <Icon className="w-4 h-4" />
                    {tab.label}
                  </button>
                );
              })}
            </div>
          </div>
        </div>

        {/* Tab Description */}
        {activeTabData && (
          <div className="bg-zinc-900/30 border-b border-zinc-800">
            <div className="max-w-7xl mx-auto px-8 py-4">
              <div className="flex items-center gap-2 text-zinc-400">
                <ChevronRight className="w-4 h-4" />
                <span>{activeTabData.description}</span>
              </div>
            </div>
          </div>
        )}

        {/* Tab Content */}
        <div className="max-w-7xl mx-auto px-8 py-8">
          <div id={`tab-content-${activeTab}`}>
            {ActiveComponent && <ActiveComponent />}
          </div>
        </div>
      </div>

      <style jsx global>{`
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `}</style>
    </>
  );
}

```

---
#### `app/globals.css`

```
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Emergency YouTube - Command Center Theme
   ============================================ */

:root {
  --background: #09090b;
  --background-secondary: #18181b;
  --background-tertiary: #27272a;
  --foreground: #fafafa;
  --foreground-muted: #a1a1aa;

  /* Semantic colors */
  --accent-violet: #8b5cf6;
  --accent-blue: #3b82f6;
  --accent-cyan: #06b6d4;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;

  /* Depth layers (zinc scale) */
  --layer-0: #09090b; /* Base background */
  --layer-1: #18181b; /* Cards, sidebar */
  --layer-2: #27272a; /* Elevated elements */
  --layer-3: #3f3f46; /* Hover states */
}

/* Force dark mode - this is a command center, not a light theme app */
body {
  color: var(--foreground);
  background: var(--background);
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: -0.01em;
}

/* Typography refinements */
h1, h2, h3, h4, h5, h6 {
  letter-spacing: -0.025em;
  font-weight: 600;
}

/* Monospace for data/numbers */
.font-mono {
  font-family: "JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  font-feature-settings: "liga" 0;
}

/* ============================================
   Custom Scrollbar - Subtle & Professional
   ============================================ */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #3f3f46;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #52525b;
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: #3f3f46 transparent;
}

/* ============================================
   Focus States - Accessibility + Visual Feedback
   ============================================ */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-violet-500/50 focus:ring-offset-2 focus:ring-offset-zinc-950;
}

/* ============================================
   Interactive Elements - Tactile Feedback
   ============================================ */

/* Card hover with depth */
.card-hover {
  @apply transition-all duration-300 ease-out;
}

.card-hover:hover {
  @apply shadow-xl shadow-violet-500/5 -translate-y-0.5;
  border-color: rgba(139, 92, 246, 0.2);
}

/* Button base with tactile feel */
.btn {
  @apply inline-flex items-center justify-center gap-2 rounded-lg font-medium
         transition-all duration-200 ease-out
         active:scale-[0.98]
         disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100;
}

.btn-primary {
  @apply btn bg-violet-600 hover:bg-violet-500 text-white px-4 py-2
         shadow-lg shadow-violet-600/20 hover:shadow-violet-500/30;
}

.btn-secondary {
  @apply btn bg-zinc-800 hover:bg-zinc-700 text-white px-4 py-2
         border border-zinc-700/50 hover:border-zinc-600/50;
}

.btn-outline {
  @apply btn border border-zinc-700 hover:border-zinc-600 hover:bg-zinc-800/50
         text-zinc-300 hover:text-white px-4 py-2;
}

.btn-ghost {
  @apply btn hover:bg-zinc-800/50 text-zinc-400 hover:text-white px-4 py-2;
}

.btn-success {
  @apply btn bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2
         shadow-lg shadow-emerald-600/20 hover:shadow-emerald-500/30;
}

.btn-warning {
  @apply btn bg-amber-600 hover:bg-amber-500 text-white px-4 py-2;
}

.btn-danger {
  @apply btn bg-red-600 hover:bg-red-500 text-white px-4 py-2;
}

.btn-sm {
  @apply text-sm px-3 py-1.5;
}

.btn-lg {
  @apply text-base px-6 py-3;
}

/* ============================================
   Form Elements - Clean & Focused
   ============================================ */
.input {
  @apply w-full rounded-lg border border-zinc-800 bg-zinc-950
         px-4 py-2.5 text-white placeholder-zinc-600
         transition-all duration-200 ease-out
         focus:border-violet-500/50 focus:outline-none focus:ring-2 focus:ring-violet-500/20
         hover:border-zinc-700;
}

.textarea {
  @apply input resize-none min-h-[100px];
}

.label {
  @apply block text-sm font-medium text-zinc-400 mb-2 tracking-wide;
}

/* Select/Dropdown */
.select {
  @apply input appearance-none cursor-pointer
         bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%2371717a%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E')]
         bg-no-repeat bg-[right_0.75rem_center] bg-[length:1rem] pr-10;
}

/* ============================================
   Cards - Layered Depth System
   ============================================ */
.card {
  @apply rounded-xl border border-zinc-800/50 bg-zinc-900/50 backdrop-blur-sm;
}

.card-elevated {
  @apply card shadow-xl shadow-black/20;
}

/* ============================================
   Badges - Status Indicators
   ============================================ */
.badge {
  @apply inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium
         border transition-colors duration-200;
}

.badge-success {
  @apply badge bg-emerald-500/10 text-emerald-400 border-emerald-500/20;
}

.badge-warning {
  @apply badge bg-amber-500/10 text-amber-400 border-amber-500/20;
}

.badge-error {
  @apply badge bg-red-500/10 text-red-400 border-red-500/20;
}

.badge-info {
  @apply badge bg-blue-500/10 text-blue-400 border-blue-500/20;
}

.badge-default {
  @apply badge bg-zinc-500/10 text-zinc-400 border-zinc-500/20;
}

/* ============================================
   Step Indicator - Progress Visualization
   ============================================ */
.step-indicator {
  @apply flex items-center justify-center w-10 h-10 rounded-full text-sm font-semibold
         transition-all duration-300 ease-out;
}

.step-active {
  @apply step-indicator bg-gradient-to-br from-violet-600 to-blue-600 text-white
         shadow-lg shadow-violet-600/30 ring-4 ring-violet-500/20;
}

.step-completed {
  @apply step-indicator bg-emerald-600 text-white;
}

.step-pending {
  @apply step-indicator bg-zinc-800 text-zinc-500 border border-zinc-700;
}

.step-locked {
  @apply step-indicator bg-zinc-900 text-zinc-600 border border-zinc-800;
}

/* ============================================
   Animations - Smooth Micro-interactions
   ============================================ */

/* Fade in from bottom */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s ease-out forwards;
}

/* Slide in from right */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out forwards;
}

/* Scale in */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out forwards;
}

/* Pulse glow for active elements */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(139, 92, 246, 0);
  }
  50% {
    box-shadow: 0 0 20px 4px rgba(139, 92, 246, 0.15);
  }
}

.animate-pulse-glow {
  animation: pulseGlow 2s ease-in-out infinite;
}

/* Dropdown animation */
.dropdown-enter {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
}

.dropdown-enter-active {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: opacity 150ms ease-out, transform 150ms ease-out;
}

.dropdown-exit {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.dropdown-exit-active {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
  transition: opacity 100ms ease-in, transform 100ms ease-in;
}

/* ============================================
   Loading States - Visual Feedback
   ============================================ */

/* Spinner */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.spinner {
  @apply inline-block w-5 h-5 border-2 border-current border-t-transparent rounded-full;
  animation: spin 0.6s linear infinite;
}

/* Skeleton loader with shimmer */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  @apply rounded bg-zinc-800;
  background: linear-gradient(
    90deg,
    #27272a 0%,
    #3f3f46 50%,
    #27272a 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* Pulse for loading states */
.pulse-loading {
  @apply animate-pulse bg-zinc-800 rounded;
}

/* ============================================
   Glass Effect - Modern Depth
   ============================================ */
.glass {
  @apply bg-zinc-900/80 backdrop-blur-xl border border-zinc-800/50;
}

.glass-subtle {
  @apply bg-zinc-950/50 backdrop-blur-sm border border-zinc-900/50;
}

/* ============================================
   Gradient Utilities
   ============================================ */
.gradient-violet-blue {
  @apply bg-gradient-to-r from-violet-600 to-blue-600;
}

.gradient-violet-blue-hover:hover {
  @apply bg-gradient-to-r from-violet-500 to-blue-500;
}

.text-gradient {
  @apply bg-clip-text text-transparent bg-gradient-to-r from-violet-400 to-blue-400;
}

/* ============================================
   Status Colors
   ============================================ */
.status-online {
  @apply bg-emerald-500;
}

.status-offline {
  @apply bg-zinc-600;
}

.status-warning {
  @apply bg-amber-500;
}

.status-error {
  @apply bg-red-500;
}

/* Status dot with pulse */
.status-dot {
  @apply w-2 h-2 rounded-full;
}

.status-dot-pulse {
  @apply status-dot relative;
}

.status-dot-pulse::after {
  content: '';
  @apply absolute inset-0 rounded-full animate-ping opacity-75;
  background: inherit;
}

```

---
#### `app/layout.tsx`

```
import type { Metadata } from "next";
import "./globals.css";
import Layout from "@/components/Layout";

export const metadata: Metadata = {
  title: "Emergency YouTube",
  description: "AI Video Production Workflow",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="pt-BR" className="dark">
      <body className="font-sans bg-[#09090b] text-white overflow-hidden">
        {/* O Layout aqui garante que o Menu Lateral apareça sempre */}
        <Layout>
          {children}
        </Layout>
      </body>
    </html>
  );
}

```

---
#### `app/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import {
  Rocket,
  Zap,
  CheckCircle2,
  XCircle,
  Loader2,
  AlertTriangle,
  ArrowRight,
  Sparkles,
  Film,
  Brain,
  RefreshCw,
  Settings,
} from 'lucide-react';
import { useUIStore } from '@/lib/store';

interface APIStatus {
  name: string;
  key: string;
  status: 'checking' | 'online' | 'offline' | 'error';
  responseTime?: number;
  error?: string;
}

const API_LIST = [
  { name: 'GEMINI', key: 'gemini', icon: '🧠' },
  { name: 'OPENAI', key: 'openai', icon: '🤖' },
  { name: 'ANTHROPIC', key: 'anthropic', icon: '🔮' },
  { name: 'YOUTUBE', key: 'youtube', icon: '📺' },
  { name: 'PEXELS', key: 'pexels', icon: '📷' },
  { name: 'PIXABAY', key: 'pixabay', icon: '🖼️' },
  { name: 'ELEVENLABS', key: 'elevenlabs', icon: '🎤' },
  { name: 'TAVILY', key: 'tavily', icon: '🔍' },
  { name: 'JSON2VIDEO', key: 'json2video', icon: '🎬' },
];

export default function HomePage() {
  const router = useRouter();
  const { openApiKeyModal } = useUIStore();
  const [bootStage, setBootStage] = useState<'initializing' | 'checking' | 'complete'>('initializing');
  const [apiStatuses, setApiStatuses] = useState<APIStatus[]>([]);
  const [currentCheckingIndex, setCurrentCheckingIndex] = useState(0);
  const [systemReady, setSystemReady] = useState(false);

  useEffect(() => {
    startBootSequence();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  const startBootSequence = async () => {
    // Stage 1: Initializing
    setBootStage('initializing');
    await new Promise(resolve => setTimeout(resolve, 1500));

    // Stage 2: Checking APIs
    setBootStage('checking');
    await checkAPIs();

    // Stage 3: Complete
    setBootStage('complete');
    setSystemReady(true);
  };

  const checkAPIs = async () => {
    const statuses: APIStatus[] = API_LIST.map(api => ({
      name: api.name,
      key: api.key,
      status: 'checking' as const,
    }));
    setApiStatuses(statuses);

    try {
      const startTime = Date.now();
      const response = await fetch('/api/status');
      const data = await response.json();
      const endTime = Date.now();

      const updatedStatuses: APIStatus[] = API_LIST.map((api) => {
        const isOnline = data[api.key] === true;
        const status: 'online' | 'offline' = isOnline ? 'online' : 'offline';
        return {
          name: api.name,
          key: api.key,
          status,
          responseTime: isOnline ? endTime - startTime + Math.random() * 200 : undefined,
        };
      });

      // Animate checking one by one
      for (let i = 0; i < updatedStatuses.length; i++) {
        setCurrentCheckingIndex(i);
        setApiStatuses(prev => {
          const newStatuses = [...prev];
          newStatuses[i] = updatedStatuses[i];
          return newStatuses;
        });
        await new Promise(resolve => setTimeout(resolve, 300));
      }
    } catch {
      const errorStatuses: APIStatus[] = API_LIST.map(api => ({
        name: api.name,
        key: api.key,
        status: 'error' as const,
        error: 'Failed to check API status',
      }));
      setApiStatuses(errorStatuses);
    }
  };

  const recheckAPIs = () => {
    setBootStage('checking');
    setSystemReady(false);
    setCurrentCheckingIndex(0);
    checkAPIs().then(() => {
      setBootStage('complete');
      setSystemReady(true);
    });
  };

  const onlineCount = apiStatuses.filter(api => api.status === 'online').length;
  const offlineCount = apiStatuses.filter(api => api.status === 'offline').length;
  const errorCount = apiStatuses.filter(api => api.status === 'error').length;
  const totalCount = API_LIST.length;

  return (
    <div className="min-h-screen bg-gradient-to-br from-zinc-950 via-zinc-900 to-zinc-950 p-8">
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className="text-center mb-12">
          <div className="inline-flex items-center gap-3 mb-4">
            <div className="w-16 h-16 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center animate-pulse">
              <Rocket className="w-8 h-8 text-white" />
            </div>
          </div>
          <h1 className="text-5xl font-bold mb-3 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
            Emergency YouTube
          </h1>
          <p className="text-xl text-zinc-400">Produção Automática de Vídeos com IA</p>
        </div>

        {/* Boot Sequence */}
        {bootStage === 'initializing' && (
          <div className="bg-zinc-900/50 border border-zinc-800 rounded-2xl p-12 text-center backdrop-blur-sm">
            <Loader2 className="w-16 h-16 text-indigo-500 animate-spin mx-auto mb-6" />
            <h2 className="text-2xl font-bold text-white mb-2">Inicializando Sistemas...</h2>
            <p className="text-zinc-400">Preparando motores para decolagem 🚀</p>
          </div>
        )}

        {/* API Status Grid */}
        {bootStage !== 'initializing' && (
          <div className="space-y-6">
            {/* Status Cards */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
              <div className="bg-gradient-to-br from-green-900/20 to-emerald-900/20 border border-green-500/30 rounded-xl p-6">
                <div className="flex items-center gap-3 mb-2">
                  <CheckCircle2 className="w-6 h-6 text-green-400" />
                  <h3 className="text-sm font-medium text-green-400">ONLINE</h3>
                </div>
                <p className="text-4xl font-bold text-white">{onlineCount}</p>
                <p className="text-sm text-zinc-400 mt-1">APIs conectadas</p>
              </div>

              <div className="bg-gradient-to-br from-red-900/20 to-orange-900/20 border border-red-500/30 rounded-xl p-6">
                <div className="flex items-center gap-3 mb-2">
                  <XCircle className="w-6 h-6 text-red-400" />
                  <h3 className="text-sm font-medium text-red-400">OFFLINE</h3>
                </div>
                <p className="text-4xl font-bold text-white">{offlineCount + errorCount}</p>
                <p className="text-sm text-zinc-400 mt-1">APIs desconectadas</p>
              </div>

              <div className="bg-gradient-to-br from-indigo-900/20 to-purple-900/20 border border-indigo-500/30 rounded-xl p-6">
                <div className="flex items-center gap-3 mb-2">
                  <Zap className="w-6 h-6 text-indigo-400" />
                  <h3 className="text-sm font-medium text-indigo-400">SISTEMA</h3>
                </div>
                <p className="text-4xl font-bold text-white">
                  {Math.round((onlineCount / totalCount) * 100)}%
                </p>
                <p className="text-sm text-zinc-400 mt-1">Operacional</p>
              </div>
            </div>

            {/* API Connection Status */}
            <div className="bg-zinc-900/50 border border-zinc-800 rounded-2xl p-8 backdrop-blur-sm">
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-2xl font-bold text-white flex items-center gap-3">
                  <Rocket className="w-6 h-6 text-indigo-400" />
                  {bootStage === 'checking' ? 'Ligando Turbinas...' : 'Status das Conexões'}
                </h2>
                <button
                  onClick={recheckAPIs}
                  disabled={bootStage === 'checking'}
                  className="px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  <RefreshCw className={`w-4 h-4 ${bootStage === 'checking' ? 'animate-spin' : ''}`} />
                  Verificar Novamente
                </button>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {apiStatuses.map((api, index) => (
                  <div
                    key={api.key}
                    className={`
                      border rounded-xl p-4 transition-all duration-300
                      ${api.status === 'online'
                        ? 'bg-green-900/10 border-green-500/30'
                        : api.status === 'offline'
                        ? 'bg-red-900/10 border-red-500/30'
                        : api.status === 'error'
                        ? 'bg-orange-900/10 border-orange-500/30'
                        : 'bg-zinc-800/50 border-zinc-700'
                      }
                      ${bootStage === 'checking' && index === currentCheckingIndex ? 'ring-2 ring-indigo-500' : ''}
                    `}
                  >
                    <div className="flex items-center justify-between mb-2">
                      <div className="flex items-center gap-2">
                        <span className="text-2xl">{API_LIST[index].icon}</span>
                        <span className="font-medium text-white">{api.name}</span>
                      </div>
                      {api.status === 'checking' && (
                        <Loader2 className="w-4 h-4 text-indigo-400 animate-spin" />
                      )}
                      {api.status === 'online' && (
                        <CheckCircle2 className="w-5 h-5 text-green-400" />
                      )}
                      {api.status === 'offline' && (
                        <XCircle className="w-5 h-5 text-red-400" />
                      )}
                      {api.status === 'error' && (
                        <AlertTriangle className="w-5 h-5 text-orange-400" />
                      )}
                    </div>

                    <div className="flex items-center justify-between text-sm">
                      <span
                        className={`
                          font-medium
                          ${api.status === 'online' ? 'text-green-400' : ''}
                          ${api.status === 'offline' ? 'text-red-400' : ''}
                          ${api.status === 'error' ? 'text-orange-400' : ''}
                          ${api.status === 'checking' ? 'text-zinc-400' : ''}
                        `}
                      >
                        {api.status === 'checking' && 'Verificando...'}
                        {api.status === 'online' && 'Online'}
                        {api.status === 'offline' && 'Offline'}
                        {api.status === 'error' && 'Erro'}
                      </span>
                      {api.responseTime && (
                        <span className="text-xs text-zinc-500">{Math.round(api.responseTime)}ms</span>
                      )}
                    </div>

                    {api.status === 'offline' && (
                      <button
                        onClick={openApiKeyModal}
                        className="mt-3 w-full px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-xs text-zinc-300 rounded transition-colors"
                      >
                        Configurar
                      </button>
                    )}
                  </div>
                ))}
              </div>
            </div>

            {/* Ready State */}
            {systemReady && (
              <div className="bg-gradient-to-br from-indigo-900/30 to-purple-900/30 border-2 border-indigo-500/50 rounded-2xl p-8 text-center animate-in fade-in slide-in-from-bottom-4 duration-500">
                <Sparkles className="w-16 h-16 text-yellow-400 mx-auto mb-4 animate-pulse" />
                <h2 className="text-3xl font-bold text-white mb-3">
                  {onlineCount === totalCount
                    ? '🚀 SISTEMA PRONTO PARA DECOLAGEM!'
                    : '⚠️ SISTEMA OPERACIONAL (MODO DEGRADADO)'}
                </h2>
                <p className="text-zinc-300 mb-6">
                  {onlineCount === totalCount
                    ? 'Todas as turbinas ligadas! Vamos criar conteúdo incrível.'
                    : `${onlineCount} de ${totalCount} APIs conectadas. Configure as APIs offline para ter acesso total.`}
                </p>

                <div className="flex flex-wrap gap-4 justify-center">
                  <button
                    onClick={() => router.push('/workflow')}
                    className="px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all flex items-center gap-3 shadow-lg shadow-indigo-500/50"
                  >
                    <Film className="w-5 h-5" />
                    Iniciar Produção
                    <ArrowRight className="w-5 h-5" />
                  </button>

                  {offlineCount > 0 && (
                    <button
                      onClick={openApiKeyModal}
                      className="px-8 py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl transition-all flex items-center gap-3"
                    >
                      <Settings className="w-5 h-5" />
                      Configurar APIs
                    </button>
                  )}
                </div>
              </div>
            )}

            {/* Features Grid */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8">
              <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
                <Brain className="w-10 h-10 text-purple-400 mb-3" />
                <h3 className="font-bold text-white mb-2">IA Generativa</h3>
                <p className="text-sm text-zinc-400">Roteiros criados automaticamente por múltiplas IAs</p>
              </div>

              <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
                <Film className="w-10 h-10 text-indigo-400 mb-3" />
                <h3 className="font-bold text-white mb-2">Produção Automática</h3>
                <p className="text-sm text-zinc-400">Vídeos prontos em minutos sem edição manual</p>
              </div>

              <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
                <Sparkles className="w-10 h-10 text-yellow-400 mb-3" />
                <h3 className="font-bold text-white mb-2">Otimização SEO</h3>
                <p className="text-sm text-zinc-400">Títulos, tags e descrições otimizadas</p>
              </div>

              <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
                <Zap className="w-10 h-10 text-green-400 mb-3" />
                <h3 className="font-bold text-white mb-2">Modo Rápido</h3>
                <p className="text-sm text-zinc-400">Workflow completo ou modo assistido</p>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

```

---
#### `app/step/1-input/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { Upload, Youtube, Wifi, FileText, Sparkles, CheckCircle2, RefreshCw } from "lucide-react";
import { useAPIKeysStore } from '@/lib/api-keys-store';
import { useUIStore } from '@/lib/store';

interface ServerStatus {
  openai?: boolean;
  gemini?: boolean;
  anthropic?: boolean;
  youtube?: boolean;
  pexels?: boolean;
  pixabay?: boolean;
  elevenlabs?: boolean;
  tavily?: boolean;
  json2video?: boolean;
}

export default function InputPage() {
  const [serverStatus, setServerStatus] = useState<ServerStatus>({});
  const [loading, setLoading] = useState(true);
  const [mounted, setMounted] = useState(false);

  // Pega as chaves que você salvou no navegador
  const { keys: localKeys } = useAPIKeysStore();
  const { openApiKeyModal } = useUIStore();

  useEffect(() => {
    setMounted(true);
    checkServerStatus();
  }, []);

  const checkServerStatus = async () => {
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerStatus(data);
    } catch (error) {
      console.error("Erro ao verificar status:", error);
    } finally {
      setLoading(false);
    }
  };

  // LÓGICA DE CONEXÃO HÍBRIDA (O SEGREDO ESTÁ AQUI)
  // Verifica se a chave existe no Servidor Vercel OU no seu Navegador
  const isYoutubeConnected = serverStatus.youtube || (mounted && !!localKeys.youtube_api_key && localKeys.youtube_api_key.length > 5);
  
  const isAIConnected = 
    serverStatus.openai || (mounted && !!localKeys.openai_api_key) ||
    serverStatus.gemini || (mounted && !!localKeys.google_api_key) ||
    serverStatus.anthropic || (mounted && !!localKeys.anthropic_api_key);

  return (
    <div className="h-full w-full overflow-y-auto p-6 md:p-8 space-y-8 animate-in fade-in duration-500">
      
      {/* Cabeçalho */}
      <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-zinc-800 pb-6">
        <div>
          <h1 className="text-3xl font-bold text-white tracking-tight">Menu de Entrada</h1>
          <p className="text-zinc-400 mt-1">Configure o contexto inicial para a produção do seu vídeo.</p>
        </div>
        
        <button 
          onClick={() => openApiKeyModal()}
          className={`px-5 py-2.5 rounded-lg font-semibold shadow-lg flex items-center gap-2 transition-all active:scale-95 whitespace-nowrap cursor-pointer hover:ring-2 ${
            isYoutubeConnected && isAIConnected 
              ? "bg-green-600 hover:bg-green-500 text-white shadow-green-500/20 hover:ring-green-500/50" 
              : "bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/20 hover:ring-indigo-500/50"
          }`}
        >
          {loading ? <RefreshCw className="w-4 h-4 animate-spin" /> : <Wifi className="w-4 h-4" />}
          {isYoutubeConnected && isAIConnected ? "Conexões Ativas" : "Conectar APIs"}
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        
        {/* Card Upload */}
        <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6 hover:border-zinc-700 transition-all group">
          <div className="flex items-center gap-3 mb-6">
            <div className="p-2.5 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors">
              <Upload className="w-5 h-5 text-blue-500" />
            </div>
            <div>
              <h3 className="font-semibold text-white text-lg">Upload de Métricas</h3>
              <p className="text-xs text-zinc-500">Dados históricos do canal (CSV)</p>
            </div>
          </div>
          
          <div className="border-2 border-dashed border-zinc-800 rounded-xl h-40 flex flex-col items-center justify-center text-zinc-500 hover:bg-zinc-800/50 hover:border-zinc-600 transition-all cursor-pointer">
            <div className="p-3 bg-zinc-800 rounded-full mb-3 shadow-inner">
              <FileText className="w-6 h-6 text-zinc-400" />
            </div>
            <p className="font-medium text-zinc-300">Arraste o arquivo aqui</p>
          </div>
        </div>

        {/* Card YouTube Sync - AGORA REATIVO */}
        <div className={`border rounded-xl p-6 transition-all group ${isYoutubeConnected ? 'bg-green-900/10 border-green-900/30' : 'bg-zinc-900/50 border-zinc-800 hover:border-zinc-700'}`}>
          <div className="flex items-center gap-3 mb-6">
            <div className={`p-2.5 rounded-lg transition-colors ${isYoutubeConnected ? 'bg-green-500/20' : 'bg-red-500/10'}`}>
              <Youtube className={`w-5 h-5 ${isYoutubeConnected ? 'text-green-500' : 'text-red-500'}`} />
            </div>
            <div>
              <h3 className="font-semibold text-white text-lg">Sincronização</h3>
              <p className="text-xs text-zinc-500">Conexão em tempo real</p>
            </div>
            {isYoutubeConnected && (
               <span className="ml-auto bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1 animate-in fade-in zoom-in">
                 <CheckCircle2 className="w-3 h-3" /> ATIVO
               </span>
            )}
          </div>

          <div className="bg-gradient-to-br from-zinc-900 to-zinc-950 border border-zinc-800 rounded-xl h-40 flex flex-col items-center justify-center p-6 text-center relative overflow-hidden">
            {isYoutubeConnected ? (
              <div className="z-10 flex flex-col items-center gap-3 animate-in slide-in-from-bottom-2">
                 <div className="p-3 bg-green-500/10 rounded-full mb-1 border border-green-500/20">
                    <CheckCircle2 className="w-8 h-8 text-green-500" />
                 </div>
                 <p className="text-green-400 font-medium">Canal Sincronizado</p>
                 <p className="text-zinc-500 text-xs">Pronto para gerar conteúdo</p>
              </div>
            ) : (
              <div className="z-10 flex flex-col items-center gap-3">
                <div className="flex items-center gap-2 text-zinc-300">
                  <div className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                  <span className="text-sm font-medium">API Necessária</span>
                </div>
                <button 
                  onClick={() => openApiKeyModal()}
                  className="text-xs bg-zinc-800 hover:bg-zinc-700 text-white px-4 py-2 rounded-md border border-zinc-700 transition-colors cursor-pointer"
                >
                  Configurar Acesso
                </button>
              </div>
            )}
          </div>
        </div>
      </div>

      <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <div className="flex items-center gap-3 mb-6">
          <div className="p-2.5 bg-amber-500/10 rounded-lg">
            <Sparkles className="w-5 h-5 text-amber-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-lg">Definição de Tema</h3>
            <p className="text-xs text-zinc-500">O que vamos criar hoje?</p>
          </div>
        </div>
        
        <input
          type="text"
          placeholder="Ex: Oração da Manhã, Notícias sobre IA, Review de Tech..."
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-4 px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
        />
      </div>
    </div>
  );
}

```

---
#### `app/step/2-research/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Layout from "@/components/Layout";
import GuidelinesModal from "@/components/GuidelinesModal";
import ApiKeysModal from "@/components/ApiKeysModal";
import Card, { CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { useAPIKeysStore, getAPIKeyHeaders } from "@/lib/api-keys-store";
import { AIProvider, APIKeyStatus, ResearchData } from "@/types";
import {
  Brain,
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Search,
  TrendingUp,
  Users,
  Lightbulb,
  Globe,
} from "lucide-react";

export default function Step2Research() {
  const router = useRouter();
  const { context, research, setResearch, setStep } = useWorkflowStore();
  const { getActiveDiretrizes } = useGuidelinesStore();
  const { keys } = useAPIKeysStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [isLoadingKeys, setIsLoadingKeys] = useState(true);
  const [isGenerating, setIsGenerating] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select first available provider
      if (status.openai) {
        setSelectedProvider("openai");
        setSelectedModel("gpt-4o");
      } else if (status.google) {
        setSelectedProvider("google");
        setSelectedModel("gemini-1.5-pro");
      } else if (status.anthropic) {
        setSelectedProvider("anthropic");
        setSelectedModel("claude-3-5-sonnet-latest");
      }
    });
  }, []);

  // Redirect if no context
  useEffect(() => {
    if (!context) {
      router.push("/step/1-input");
    }
  }, [context, router]);

  const handleGenerate = async () => {
    if (!selectedProvider || !selectedModel || !context) {
      setError("Selecione um provedor e modelo de IA.");
      return;
    }

    setIsGenerating(true);
    setError(null);

    try {
      const activeDiretrizes = getActiveDiretrizes();
      const apiKeyHeaders = getAPIKeyHeaders(keys);

      const response = await fetch("/api/research", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          ...apiKeyHeaders,
        },
        body: JSON.stringify({
          contextId: context.id,
          theme: context.theme,
          channelData: context.channelData,
          metrics: context.metrics,
          provider: selectedProvider,
          model: selectedModel,
          diretrizes: activeDiretrizes,
        }),
      });

      if (!response.ok) {
        const data = await response.json();
        throw new Error(data.error || "Falha na pesquisa");
      }

      const researchData: ResearchData = await response.json();
      setResearch(researchData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na pesquisa");
    } finally {
      setIsGenerating(false);
    }
  };

  const handleProceed = () => {
    if (research) {
      setStep(4);
      router.push("/step/4-proposal");
    }
  };

  if (!context) {
    return null;
  }

  return (
    <Layout>
      <div className="space-y-8">
        {/* Header */}
        <div>
          <h1 className="text-3xl font-bold text-white mb-2">
            Inteligência - Deep Research Agent
          </h1>
          <p className="text-gray-400">
            Análise profunda de dados e pesquisa de tendências para o tema:{" "}
            <span className="text-white font-medium">{context.theme}</span>
          </p>
        </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
          </div>
        )}

        {/* AI Selection & Generate */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Brain className="w-5 h-5 text-purple-500" />
              Configuração do Agente
            </CardTitle>
            <CardDescription>
              Selecione o modelo de IA para executar a pesquisa profunda.
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            {isLoadingKeys ? (
              <div className="flex items-center justify-center py-8">
                <Loader2 className="w-6 h-6 animate-spin text-gray-400" />
              </div>
            ) : (
              <AIModelSelector
                selectedProvider={selectedProvider}
                selectedModel={selectedModel}
                onProviderChange={setSelectedProvider}
                onModelChange={setSelectedModel}
                apiKeyStatus={apiKeyStatus!}
                label="Selecione o modelo para pesquisa"
              />
            )}

            {apiKeyStatus?.tavily && (
              <div className="p-3 bg-green-500/10 border border-green-500/20 rounded-lg flex items-center gap-2">
                <Check className="w-4 h-4 text-green-400" />
                <span className="text-green-300 text-sm">
                  Tavily API detectada - pesquisa real habilitada
                </span>
              </div>
            )}

            {!apiKeyStatus?.tavily && (
              <div className="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg flex items-center gap-2">
                <AlertCircle className="w-4 h-4 text-yellow-400" />
                <span className="text-yellow-300 text-sm">
                  Tavily não configurado - pesquisa será simulada via LLM
                </span>
              </div>
            )}
          </CardContent>
          <CardFooter>
            <Button
              onClick={handleGenerate}
              isLoading={isGenerating}
              disabled={!selectedProvider || !selectedModel}
              leftIcon={<Search className="w-4 h-4" />}
            >
              {research ? "Regenerar Pesquisa" : "Executar Pesquisa"}
            </Button>
          </CardFooter>
        </Card>

        {/* Research Results */}
        {research && (
          <div className="space-y-6">
            {/* Internal Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <TrendingUp className="w-5 h-5 text-blue-500" />
                  Análise Interna (Canal)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="p-4 bg-gray-800/50 rounded-lg">
                    <h4 className="text-sm font-medium text-gray-400 mb-2 flex items-center gap-2">
                      <TrendingUp className="w-4 h-4" />
                      Tópicos de Alta Performance
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.internalAnalysis.topPerformingTopics.map((topic, i) => (
                        <Badge key={i} variant="success">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-gray-800/50 rounded-lg">
                    <h4 className="text-sm font-medium text-gray-400 mb-2 flex items-center gap-2">
                      <Users className="w-4 h-4" />
                      Insights da Audiência
                    </h4>
                    <ul className="space-y-1 text-sm text-gray-300">
                      {research.internalAnalysis.audienceInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-gray-800/50 rounded-lg">
                    <h4 className="text-sm font-medium text-gray-400 mb-2 flex items-center gap-2">
                      <Lightbulb className="w-4 h-4" />
                      Lacunas de Conteúdo
                    </h4>
                    <ul className="space-y-1 text-sm text-gray-300">
                      {research.internalAnalysis.contentGaps.map((gap, i) => (
                        <li key={i}>• {gap}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-gray-800/50 rounded-lg">
                    <h4 className="text-sm font-medium text-gray-400 mb-2 flex items-center gap-2">
                      <Check className="w-4 h-4" />
                      Recomendações
                    </h4>
                    <ul className="space-y-1 text-sm text-gray-300">
                      {research.internalAnalysis.recommendations.map((rec, i) => (
                        <li key={i}>• {rec}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* External Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Globe className="w-5 h-5 text-green-500" />
                  Análise Externa (Mercado)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="p-4 bg-gray-800/50 rounded-lg">
                    <h4 className="text-sm font-medium text-gray-400 mb-2">
                      Tópicos em Alta
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.externalAnalysis.trendingTopics.map((topic, i) => (
                        <Badge key={i} variant="info">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-gray-800/50 rounded-lg">
                    <h4 className="text-sm font-medium text-gray-400 mb-2">
                      Insights de Competidores
                    </h4>
                    <ul className="space-y-1 text-sm text-gray-300">
                      {research.externalAnalysis.competitorInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-gray-800/50 rounded-lg">
                    <h4 className="text-sm font-medium text-gray-400 mb-2">
                      Oportunidades de Mercado
                    </h4>
                    <ul className="space-y-1 text-sm text-gray-300">
                      {research.externalAnalysis.marketOpportunities.map((opp, i) => (
                        <li key={i}>• {opp}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Consolidated Insights */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Brain className="w-5 h-5 text-purple-500" />
                  Síntese Estratégica
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-gray-300 leading-relaxed">
                  {research.consolidatedInsights}
                </p>
              </CardContent>
            </Card>

            {/* Research Queries */}
            <Card>
              <CardHeader>
                <CardTitle>Queries Executadas</CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  {research.queries.map((query, i) => (
                    <div
                      key={i}
                      className="p-3 bg-gray-800/30 rounded-lg border border-gray-800"
                    >
                      <div className="flex items-center justify-between mb-2">
                        <span className="font-medium text-white">
                          {query.query}
                        </span>
                        <Badge variant={query.source === "tavily" ? "success" : "warning"}>
                          {query.source === "tavily" ? "Tavily" : "Simulado"}
                        </Badge>
                      </div>
                      <p className="text-sm text-gray-400">
                        {query.results.length} resultados encontrados
                      </p>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </div>
        )}

        {/* Navigation */}
        <div className="flex justify-between">
          <Button
            variant="outline"
            onClick={() => router.push("/step/1-input")}
            leftIcon={<ArrowLeft className="w-4 h-4" />}
          >
            Voltar
          </Button>

          <Button
            onClick={handleProceed}
            disabled={!research}
            rightIcon={<ArrowRight className="w-4 h-4" />}
            size="lg"
          >
            Continuar para Proposta
          </Button>
        </div>
      </div>

      <GuidelinesModal />
      <ApiKeysModal />
    </Layout>
  );
}

```

---
#### `app/step/4-proposal/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Layout from "@/components/Layout";
import GuidelinesModal from "@/components/GuidelinesModal";
import ApiKeysModal from "@/components/ApiKeysModal";
import Card, { CardHeader, CardTitle, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Textarea from "@/components/ui/Textarea";
import Select from "@/components/ui/Select";
import Toggle from "@/components/ui/Toggle";
import AssetCard from "@/components/AssetCard";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import {
  AIProvider,
  APIKeyStatus,
  ProposalData,
  Script,
  Soundtrack,
  Description,
  Tags,
  TitlesAndThumbs,
  UploadSetup,
  ImageProvider,
  TTSProvider,
} from "@/types";
import { v4 as uuidv4 } from "uuid";
import { formatDuration } from "@/lib/utils";
import {
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Sparkles,
  Image,
  Settings,
  Volume2,
} from "lucide-react";

export default function Step4Proposal() {
  const router = useRouter();
  const { context, research, proposal, setProposal, updateProposal, setStep } = useWorkflowStore();
  const { getDiretrizesForScope } = useGuidelinesStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Individual generation states
  const [generatingScript, setGeneratingScript] = useState(false);
  const [generatingSoundtrack, setGeneratingSoundtrack] = useState(false);
  const [generatingDescription, setGeneratingDescription] = useState(false);
  const [generatingTags, setGeneratingTags] = useState(false);
  const [generatingTitles, setGeneratingTitles] = useState(false);
  const [generatingImage, setGeneratingImage] = useState<string | null>(null);
  const [generatingAudio, setGeneratingAudio] = useState(false);

  // Edit states
  const [editingScript, setEditingScript] = useState(false);
  const [editingDescription, setEditingDescription] = useState(false);
  const [editingTags, setEditingTags] = useState(false);
  const [editContent, setEditContent] = useState("");

  // Default upload setup
  const defaultUploadSetup: UploadSetup = {
    category: "22",
    language: "pt",
    license: "youtube",
    madeForKids: false,
    ageRestricted: false,
    paidPromotion: false,
    allowComments: true,
    allowEmbedding: true,
  };

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no research
  useEffect(() => {
    if (!context || !research) {
      router.push("/step/1-input");
    }
  }, [context, research, router]);

  // Initialize proposal if not exists
  useEffect(() => {
    if (context && research && !proposal) {
      const initialProposal: ProposalData = {
        id: uuidv4(),
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
        contextId: context.id,
        researchId: research.id,
        rationale: "",
        script: {
          id: uuidv4(),
          status: "pending",
          sections: [],
          totalDuration: 0,
          generatedAt: "",
          approvedAt: null,
          audioUrl: null,
          ttsProvider: null,
          ttsVoice: null,
        },
        soundtrack: {
          id: uuidv4(),
          status: "pending",
          suggestions: [],
          selected: null,
          generatedAt: "",
          approvedAt: null,
        },
        description: {
          id: uuidv4(),
          status: "pending",
          content: "",
          generatedAt: "",
          approvedAt: null,
        },
        tags: {
          id: uuidv4(),
          status: "pending",
          items: [],
          generatedAt: "",
          approvedAt: null,
        },
        uploadSetup: defaultUploadSetup,
        titlesAndThumbs: {
          id: uuidv4(),
          status: "pending",
          variations: [],
          selectedVariation: null,
          generatedAt: "",
          approvedAt: null,
        },
        allApproved: false,
      };
      setProposal(initialProposal);
    }
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [context, research, proposal, setProposal]);

  const generateScript = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingScript(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("script");
      const response = await fetch("/api/proposal/script", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const script: Script = await response.json();
      updateProposal({ script, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar roteiro");
    } finally {
      setGeneratingScript(false);
    }
  };

  const generateSoundtrack = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingSoundtrack(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/soundtrack", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          mood: "professional, engaging",
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const soundtrack: Soundtrack = await response.json();
      updateProposal({ soundtrack, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar trilha");
    } finally {
      setGeneratingSoundtrack(false);
    }
  };

  const generateDescription = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingDescription(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("description");
      const response = await fetch("/api/proposal/description", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const description: Description = await response.json();
      updateProposal({ description, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar descrição");
    } finally {
      setGeneratingDescription(false);
    }
  };

  const generateTags = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTags(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/tags", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          description: proposal.description.content,
          research,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const tags: Tags = await response.json();
      updateProposal({ tags, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar tags");
    } finally {
      setGeneratingTags(false);
    }
  };

  const generateTitles = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTitles(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("thumbnail");
      const response = await fetch("/api/proposal/titles", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const titlesAndThumbs: TitlesAndThumbs = await response.json();
      updateProposal({ titlesAndThumbs, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar títulos");
    } finally {
      setGeneratingTitles(false);
    }
  };

  const generateThumbnailImage = async (variationId: string, provider: ImageProvider) => {
    if (!proposal) return;
    setGeneratingImage(variationId);
    setError(null);

    try {
      const variation = proposal.titlesAndThumbs.variations.find((v) => v.id === variationId);
      if (!variation) throw new Error("Variação não encontrada");

      const response = await fetch("/api/images/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          prompt: variation.thumbnailPrompt,
          provider,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { imageUrl } = await response.json();

      const updatedVariations = proposal.titlesAndThumbs.variations.map((v) =>
        v.id === variationId ? { ...v, thumbnailUrl: imageUrl, imageProvider: provider } : v
      );

      updateProposal({
        titlesAndThumbs: {
          ...proposal.titlesAndThumbs,
          variations: updatedVariations,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar imagem");
    } finally {
      setGeneratingImage(null);
    }
  };

  const generateAudio = async (ttsProvider: TTSProvider, voice: string) => {
    if (!proposal?.script) return;
    setGeneratingAudio(true);
    setError(null);

    try {
      const fullText = proposal.script.sections.map((s) => s.content).join("\n\n");
      const response = await fetch("/api/tts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          text: fullText,
          provider: ttsProvider,
          voice,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { audioUrl } = await response.json();

      updateProposal({
        script: {
          ...proposal.script,
          audioUrl,
          ttsProvider,
          ttsVoice: voice,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar áudio");
    } finally {
      setGeneratingAudio(false);
    }
  };

  const approveAsset = (asset: "script" | "soundtrack" | "description" | "tags" | "titlesAndThumbs") => {
    if (!proposal) return;

    const now = new Date().toISOString();
    const updates: Partial<ProposalData> = { updatedAt: now };

    switch (asset) {
      case "script":
        updates.script = { ...proposal.script, status: "approved", approvedAt: now };
        break;
      case "soundtrack":
        updates.soundtrack = { ...proposal.soundtrack, status: "approved", approvedAt: now };
        break;
      case "description":
        updates.description = { ...proposal.description, status: "approved", approvedAt: now };
        break;
      case "tags":
        updates.tags = { ...proposal.tags, status: "approved", approvedAt: now };
        break;
      case "titlesAndThumbs":
        updates.titlesAndThumbs = { ...proposal.titlesAndThumbs, status: "approved", approvedAt: now };
        break;
    }

    updateProposal(updates);

    // Check if all approved
    const updatedProposal = { ...proposal, ...updates };
    const allApproved =
      updatedProposal.script.status === "approved" &&
      updatedProposal.soundtrack.status === "approved" &&
      updatedProposal.description.status === "approved" &&
      updatedProposal.tags.status === "approved" &&
      updatedProposal.titlesAndThumbs.status === "approved";

    if (allApproved) {
      updateProposal({ allApproved: true });
    }
  };

  const handleProceed = () => {
    if (proposal?.allApproved) {
      setStep(5);
      router.push("/step/5-studio");
    }
  };

  if (!context || !research || !proposal) {
    return null;
  }

  const canProceed = proposal.allApproved;

  return (
    <Layout>
      <div className="space-y-8">
        {/* Header */}
        <div>
          <h1 className="text-3xl font-bold text-white mb-2">
            Proposta de Vídeo - Mesa de Decisão
          </h1>
          <p className="text-gray-400">
            Todos os assets são gerados aqui. Nada avança sem sua aprovação.
          </p>
        </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Rationale */}
        {proposal.rationale && (
          <Card className="bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/20">
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Sparkles className="w-5 h-5 text-yellow-500" />
                Por que esta proposta vai performar bem
              </CardTitle>
            </CardHeader>
            <CardContent>
              <p className="text-gray-300 leading-relaxed">{proposal.rationale}</p>
            </CardContent>
          </Card>
        )}

        {/* Script */}
        <AssetCard
          title="Roteiro"
          status={proposal.script.status}
          isGenerating={generatingScript}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.script.sections.map((s) => s.content).join("\n\n---\n\n"));
            setEditingScript(true);
          }}
          onRegenerate={generateScript}
          onApprove={() => approveAsset("script")}
          isEditing={editingScript}
          onCancelEdit={() => setEditingScript(false)}
          onSaveEdit={() => {
            // Parse edited content back to sections (simplified)
            setEditingScript(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={20}
              className="font-mono text-sm"
            />
          }
        >
          {proposal.script.sections.length > 0 ? (
            <div className="space-y-4">
              <div className="flex items-center gap-4 text-sm text-gray-400">
                <span>Duração: {formatDuration(proposal.script.totalDuration)}</span>
                <span>Seções: {proposal.script.sections.length}</span>
              </div>
              <div className="space-y-3 max-h-96 overflow-auto">
                {proposal.script.sections.map((section) => (
                  <div key={section.id} className="p-3 bg-gray-800/50 rounded-lg">
                    <div className="flex items-center gap-2 mb-2">
                      <Badge variant="info">{section.type}</Badge>
                      <span className="text-xs text-gray-500">
                        {formatDuration(section.duration)}
                      </span>
                    </div>
                    <p className="text-gray-300 text-sm whitespace-pre-wrap">
                      {section.content}
                    </p>
                  </div>
                ))}
              </div>

              {/* TTS Section */}
              <div className="pt-4 border-t border-gray-800">
                <h4 className="text-sm font-medium text-gray-400 mb-3 flex items-center gap-2">
                  <Volume2 className="w-4 h-4" />
                  Gerar Áudio (TTS)
                </h4>
                {proposal.script.audioUrl ? (
                  <div className="flex items-center gap-3">
                    <audio controls src={proposal.script.audioUrl} className="flex-1" />
                    <Badge variant="success">Gerado</Badge>
                  </div>
                ) : (
                  <div className="flex items-center gap-3">
                    <Select
                      options={[
                        { value: "openai:alloy", label: "OpenAI - Alloy" },
                        { value: "openai:nova", label: "OpenAI - Nova" },
                        { value: "google:pt-BR-Wavenet-A", label: "Google - PT-BR Female" },
                      ]}
                      placeholder="Selecione voz..."
                      className="w-48"
                      onChange={(value) => {
                        const [provider, voice] = value.split(":") as [TTSProvider, string];
                        generateAudio(provider, voice);
                      }}
                    />
                    {generatingAudio && <Loader2 className="w-4 h-4 animate-spin" />}
                  </div>
                )}
              </div>
            </div>
          ) : (
            <p className="text-gray-500 text-center py-8">
              Clique em &quot;Regerar&quot; para gerar o roteiro
            </p>
          )}
        </AssetCard>

        {/* Soundtrack */}
        <AssetCard
          title="Trilha Sonora"
          status={proposal.soundtrack.status}
          isGenerating={generatingSoundtrack}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateSoundtrack}
          onApprove={() => approveAsset("soundtrack")}
        >
          {proposal.soundtrack.suggestions.length > 0 ? (
            <div className="space-y-3">
              {proposal.soundtrack.suggestions.map((track) => (
                <div
                  key={track.id}
                  className={`p-3 rounded-lg border transition-all cursor-pointer ${
                    proposal.soundtrack.selected === track.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-gray-800/50 border-gray-700 hover:border-gray-600"
                  }`}
                  onClick={() =>
                    updateProposal({
                      soundtrack: { ...proposal.soundtrack, selected: track.id },
                    })
                  }
                >
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="font-medium text-white">{track.title}</p>
                      <p className="text-sm text-gray-400">
                        {track.artist} • {track.genre}
                      </p>
                    </div>
                    <Badge variant="default">{track.license}</Badge>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-gray-500 text-center py-8">
              Clique em &quot;Regerar&quot; para sugerir trilhas
            </p>
          )}
        </AssetCard>

        {/* Description */}
        <AssetCard
          title="Descrição"
          status={proposal.description.status}
          isGenerating={generatingDescription}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.description.content);
            setEditingDescription(true);
          }}
          onRegenerate={generateDescription}
          onApprove={() => approveAsset("description")}
          isEditing={editingDescription}
          onCancelEdit={() => setEditingDescription(false)}
          onSaveEdit={() => {
            updateProposal({
              description: { ...proposal.description, content: editContent },
            });
            setEditingDescription(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={10}
            />
          }
        >
          {proposal.description.content ? (
            <div className="prose prose-invert max-w-none">
              <pre className="whitespace-pre-wrap text-sm text-gray-300 font-sans">
                {proposal.description.content}
              </pre>
            </div>
          ) : (
            <p className="text-gray-500 text-center py-8">
              Clique em &quot;Regerar&quot; para gerar a descrição
            </p>
          )}
        </AssetCard>

        {/* Tags */}
        <AssetCard
          title="Tags"
          status={proposal.tags.status}
          isGenerating={generatingTags}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.tags.items.join(", "));
            setEditingTags(true);
          }}
          onRegenerate={generateTags}
          onApprove={() => approveAsset("tags")}
          isEditing={editingTags}
          onCancelEdit={() => setEditingTags(false)}
          onSaveEdit={() => {
            updateProposal({
              tags: {
                ...proposal.tags,
                items: editContent.split(",").map((t) => t.trim()).filter(Boolean),
              },
            });
            setEditingTags(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={4}
              helperText="Separe as tags por vírgula"
            />
          }
        >
          {proposal.tags.items.length > 0 ? (
            <div className="flex flex-wrap gap-2">
              {proposal.tags.items.map((tag, i) => (
                <Badge key={i} variant="default">
                  {tag}
                </Badge>
              ))}
            </div>
          ) : (
            <p className="text-gray-500 text-center py-8">
              Clique em &quot;Regerar&quot; para gerar as tags
            </p>
          )}
        </AssetCard>

        {/* Upload Setup */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Settings className="w-5 h-5 text-gray-500" />
              Setup de Upload
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <Select
                label="Categoria"
                value={proposal.uploadSetup.category}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, category: value },
                  })
                }
                options={[
                  { value: "22", label: "People & Blogs" },
                  { value: "27", label: "Education" },
                  { value: "28", label: "Science & Technology" },
                  { value: "24", label: "Entertainment" },
                  { value: "26", label: "Howto & Style" },
                ]}
              />
              <Select
                label="Idioma"
                value={proposal.uploadSetup.language}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, language: value },
                  })
                }
                options={[
                  { value: "pt", label: "Português" },
                  { value: "en", label: "English" },
                  { value: "es", label: "Español" },
                ]}
              />
              <Select
                label="Licença"
                value={proposal.uploadSetup.license}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: {
                      ...proposal.uploadSetup,
                      license: value as "youtube" | "creative_commons",
                    },
                  })
                }
                options={[
                  { value: "youtube", label: "YouTube Standard" },
                  { value: "creative_commons", label: "Creative Commons" },
                ]}
              />
            </div>
            <div className="mt-4 space-y-3">
              <Toggle
                checked={proposal.uploadSetup.madeForKids}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, madeForKids: checked },
                  })
                }
                label="Feito para crianças"
              />
              <Toggle
                checked={proposal.uploadSetup.allowComments}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowComments: checked },
                  })
                }
                label="Permitir comentários"
              />
              <Toggle
                checked={proposal.uploadSetup.allowEmbedding}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowEmbedding: checked },
                  })
                }
                label="Permitir incorporação"
              />
            </div>
          </CardContent>
        </Card>

        {/* Titles & Thumbnails */}
        <AssetCard
          title="Títulos e Thumbnails"
          status={proposal.titlesAndThumbs.status}
          isGenerating={generatingTitles}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateTitles}
          onApprove={() => approveAsset("titlesAndThumbs")}
        >
          {proposal.titlesAndThumbs.variations.length > 0 ? (
            <div className="space-y-4">
              {proposal.titlesAndThumbs.variations.map((variation) => (
                <div
                  key={variation.id}
                  className={`p-4 rounded-lg border transition-all ${
                    proposal.titlesAndThumbs.selectedVariation === variation.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-gray-800/50 border-gray-700"
                  }`}
                >
                  <div className="flex items-start gap-4">
                    {/* Thumbnail */}
                    <div className="w-48 h-27 bg-gray-700 rounded-lg overflow-hidden flex-shrink-0">
                      {variation.thumbnailUrl ? (
                        <img
                          src={variation.thumbnailUrl}
                          alt={variation.title}
                          className="w-full h-full object-cover"
                        />
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-8 h-8 text-gray-500" />
                        </div>
                      )}
                    </div>

                    <div className="flex-1">
                      <h4 className="font-medium text-white mb-2">{variation.title}</h4>
                      <p className="text-sm text-gray-400 mb-3">{variation.thumbnailPrompt}</p>

                      <div className="flex flex-wrap gap-2">
                        <Button
                          size="sm"
                          variant={
                            proposal.titlesAndThumbs.selectedVariation === variation.id
                              ? "success"
                              : "outline"
                          }
                          onClick={() =>
                            updateProposal({
                              titlesAndThumbs: {
                                ...proposal.titlesAndThumbs,
                                selectedVariation: variation.id,
                              },
                            })
                          }
                        >
                          {proposal.titlesAndThumbs.selectedVariation === variation.id
                            ? "Selecionado"
                            : "Selecionar"}
                        </Button>

                        {/* Image Generation Buttons */}
                        {apiKeyStatus?.openai && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "dalle")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            DALL·E
                          </Button>
                        )}
                        {apiKeyStatus?.stability && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "stability")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Stability
                          </Button>
                        )}
                        {apiKeyStatus?.replicate && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "replicate")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Replicate
                          </Button>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-gray-500 text-center py-8">
              Clique em &quot;Regerar&quot; para gerar títulos e prompts de thumbnail
            </p>
          )}
        </AssetCard>

        {/* Approval Status */}
        <Card className={canProceed ? "border-green-500/50" : "border-yellow-500/50"}>
          <CardContent className="py-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-4">
                {canProceed ? (
                  <>
                    <div className="w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center">
                      <Check className="w-5 h-5 text-green-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Todos os assets aprovados!</p>
                      <p className="text-sm text-gray-400">
                        Você pode prosseguir para o Studio de Criação.
                      </p>
                    </div>
                  </>
                ) : (
                  <>
                    <div className="w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center">
                      <AlertCircle className="w-5 h-5 text-yellow-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Aprovações pendentes</p>
                      <p className="text-sm text-gray-400">
                        Gere e aprove todos os assets para continuar.
                      </p>
                    </div>
                  </>
                )}
              </div>

              <div className="flex gap-2">
                {[
                  { name: "Roteiro", status: proposal.script.status },
                  { name: "Trilha", status: proposal.soundtrack.status },
                  { name: "Descrição", status: proposal.description.status },
                  { name: "Tags", status: proposal.tags.status },
                  { name: "Títulos", status: proposal.titlesAndThumbs.status },
                ].map((item) => (
                  <Badge
                    key={item.name}
                    variant={item.status === "approved" ? "success" : "warning"}
                    size="sm"
                  >
                    {item.name}
                  </Badge>
                ))}
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Navigation */}
        <div className="flex justify-between">
          <Button
            variant="outline"
            onClick={() => router.push("/step/2-research")}
            leftIcon={<ArrowLeft className="w-4 h-4" />}
          >
            Voltar
          </Button>

          <Button
            onClick={handleProceed}
            disabled={!canProceed}
            rightIcon={<ArrowRight className="w-4 h-4" />}
            size="lg"
          >
            Continuar para Studio
          </Button>
        </div>
      </div>

      <GuidelinesModal />
      <ApiKeysModal />
    </Layout>
  );
}

```

---
#### `app/step/5-studio/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Layout from "@/components/Layout";
import GuidelinesModal from "@/components/GuidelinesModal";
import ApiKeysModal from "@/components/ApiKeysModal";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Input from "@/components/ui/Input";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus, StoryboardData, MediaItem, MediaSource } from "@/types";
import { formatDuration } from "@/lib/utils";
import {
  Film,
  ArrowRight,
  ArrowLeft,
  AlertCircle,
  Play,
  Image,
  Search,
  GripVertical,
  Trash2,
  Plus,
  Video,
} from "lucide-react";

export default function Step5Studio() {
  const router = useRouter();
  const { context, proposal, storyboard, render, setStoryboard, setRender, updateRender, setStep } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isGeneratingStoryboard, setIsGeneratingStoryboard] = useState(false);
  const [isSearchingMedia, setIsSearchingMedia] = useState<string | null>(null);
  const [isRendering, setIsRendering] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Media search state
  const [mediaSearchResults, setMediaSearchResults] = useState<Record<string, MediaItem[]>>({});
  const [selectedSources, setSelectedSources] = useState<MediaSource[]>(["pexels", "pixabay", "unsplash"]);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select available sources
      const sources: MediaSource[] = [];
      if (status.pexels) sources.push("pexels");
      if (status.pixabay) sources.push("pixabay");
      if (status.unsplash) sources.push("unsplash");
      setSelectedSources(sources);
    });
  }, []);

  // Redirect if no proposal
  useEffect(() => {
    if (!context || !proposal || !proposal.allApproved) {
      router.push("/step/4-proposal");
    }
  }, [context, proposal, router]);

  const generateStoryboard = async () => {
    if (!proposal) return;
    setIsGeneratingStoryboard(true);
    setError(null);

    try {
      const response = await fetch("/api/storyboard", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          script: proposal.script,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const storyboardData: StoryboardData = await response.json();
      setStoryboard(storyboardData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar storyboard");
    } finally {
      setIsGeneratingStoryboard(false);
    }
  };

  const searchMediaForScene = async (sceneId: string, query: string) => {
    setIsSearchingMedia(sceneId);
    setError(null);

    try {
      const response = await fetch("/api/media/search", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          query,
          sources: selectedSources,
          mediaType: "all",
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { results } = await response.json();
      setMediaSearchResults((prev) => ({ ...prev, [sceneId]: results }));
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na busca de mídia");
    } finally {
      setIsSearchingMedia(null);
    }
  };

  const selectMediaForScene = (sceneId: string, media: MediaItem) => {
    if (!storyboard) return;

    const updatedScenes = storyboard.scenes.map((scene) =>
      scene.id === sceneId ? { ...scene, media } : scene
    );

    setStoryboard({
      ...storyboard,
      scenes: updatedScenes,
    });

    // Clear search results for this scene
    setMediaSearchResults((prev) => {
      const updated = { ...prev };
      delete updated[sceneId];
      return updated;
    });
  };

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const updateSceneOrder = (fromIndex: number, toIndex: number) => {
    if (!storyboard) return;

    const scenes = [...storyboard.scenes];
    const [movedScene] = scenes.splice(fromIndex, 1);
    scenes.splice(toIndex, 0, movedScene);

    // Update order property
    const reorderedScenes = scenes.map((scene, i) => ({ ...scene, order: i }));

    setStoryboard({
      ...storyboard,
      scenes: reorderedScenes,
    });
  };

  const startRender = async () => {
    if (!storyboard || !proposal) return;
    setIsRendering(true);
    setError(null);

    try {
      const response = await fetch("/api/render", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          storyboardId: storyboard.id,
          scenes: storyboard.scenes,
          soundtrack: proposal.soundtrack.selected
            ? proposal.soundtrack.suggestions.find((s) => s.id === proposal.soundtrack.selected)
            : null,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const renderData = await response.json();
      setRender(renderData);

      // Poll for render status
      pollRenderStatus(renderData.id);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao iniciar renderização");
      setIsRendering(false);
    }
  };

  const pollRenderStatus = async (jobId: string) => {
    try {
      const response = await fetch(`/api/render?jobId=${jobId}`);
      if (!response.ok) throw new Error("Erro ao verificar status");

      const status = await response.json();
      updateRender(status);

      if (status.status === "rendering") {
        setTimeout(() => pollRenderStatus(jobId), 5000);
      } else {
        setIsRendering(false);
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao verificar renderização");
      setIsRendering(false);
    }
  };

  const handleProceed = () => {
    if (render?.status === "completed") {
      setStep(6);
      router.push("/step/6-upload");
    }
  };

  if (!context || !proposal) {
    return null;
  }

  const allScenesHaveMedia = storyboard?.scenes.every((scene) => scene.media !== null) ?? false;
  const canRender = storyboard && allScenesHaveMedia && apiKeyStatus?.json2video;

  return (
    <Layout>
      <div className="space-y-8">
        {/* Header */}
        <div>
          <h1 className="text-3xl font-bold text-white mb-2">
            Studio de Criação
          </h1>
          <p className="text-gray-400">
            Popule cada cena com mídia, revise e renderize seu vídeo.
          </p>
        </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Storyboard Generation */}
        {!storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Film className="w-5 h-5 text-purple-500" />
                Gerar Storyboard
              </CardTitle>
              <CardDescription>
                O storyboard divide o roteiro aprovado em cenas individuais.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <Button
                onClick={generateStoryboard}
                isLoading={isGeneratingStoryboard}
                leftIcon={<Film className="w-4 h-4" />}
              >
                Gerar Storyboard
              </Button>
            </CardContent>
          </Card>
        )}

        {/* Storyboard Scenes */}
        {storyboard && (
          <div className="space-y-6">
            <div className="flex items-center justify-between">
              <div>
                <h2 className="text-xl font-semibold text-white">
                  Storyboard ({storyboard.scenes.length} cenas)
                </h2>
                <p className="text-sm text-gray-400">
                  Duração total: {formatDuration(storyboard.totalDuration)}
                </p>
              </div>
              <div className="flex gap-2">
                <Badge variant={allScenesHaveMedia ? "success" : "warning"}>
                  {storyboard.scenes.filter((s) => s.media).length}/{storyboard.scenes.length} com mídia
                </Badge>
              </div>
            </div>

            {/* Media Sources Filter */}
            <Card padding="sm">
              <div className="flex items-center gap-4">
                <span className="text-sm text-gray-400">Fontes de mídia:</span>
                {(["pexels", "pixabay", "unsplash"] as MediaSource[]).map((source) => {
                  const isAvailable = apiKeyStatus?.[source as keyof APIKeyStatus];
                  const isSelected = selectedSources.includes(source);

                  return (
                    <button
                      key={source}
                      onClick={() => {
                        if (isAvailable) {
                          setSelectedSources((prev) =>
                            prev.includes(source)
                              ? prev.filter((s) => s !== source)
                              : [...prev, source]
                          );
                        }
                      }}
                      disabled={!isAvailable}
                      className={`px-3 py-1 rounded-full text-sm transition-all ${
                        !isAvailable
                          ? "bg-gray-800 text-gray-600 cursor-not-allowed"
                          : isSelected
                          ? "bg-primary-600 text-white"
                          : "bg-gray-800 text-gray-400 hover:bg-gray-700"
                      }`}
                    >
                      {source.charAt(0).toUpperCase() + source.slice(1)}
                    </button>
                  );
                })}
              </div>
            </Card>

            {/* Scenes List */}
            <div className="space-y-4">
              {storyboard.scenes.map((scene, index) => (
                <Card key={scene.id} padding="sm">
                  <div className="flex gap-4">
                    {/* Drag Handle */}
                    <div className="flex items-center">
                      <GripVertical className="w-5 h-5 text-gray-600 cursor-move" />
                    </div>

                    {/* Scene Number */}
                    <div className="w-12 h-12 bg-gray-800 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span className="text-lg font-bold text-gray-400">{index + 1}</span>
                    </div>

                    {/* Media Preview */}
                    <div className="w-32 h-20 bg-gray-800 rounded-lg overflow-hidden flex-shrink-0">
                      {scene.media ? (
                        scene.media.type === "video" ? (
                          <video
                            src={scene.media.previewUrl}
                            className="w-full h-full object-cover"
                            muted
                          />
                        ) : (
                          <img
                            src={scene.media.previewUrl}
                            alt=""
                            className="w-full h-full object-cover"
                          />
                        )
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-6 h-6 text-gray-600" />
                        </div>
                      )}
                    </div>

                    {/* Scene Content */}
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-1">
                        <Badge variant="info" size="sm">
                          {formatDuration(scene.duration)}
                        </Badge>
                        {scene.media && (
                          <Badge variant="success" size="sm">
                            {scene.media.source}
                          </Badge>
                        )}
                      </div>
                      <p className="text-sm text-gray-300 line-clamp-2">{scene.text}</p>

                      {/* Media Source Info */}
                      {scene.media && (
                        <p className="text-xs text-gray-500 mt-1">{scene.media.attribution}</p>
                      )}
                    </div>

                    {/* Scene Actions */}
                    <div className="flex flex-col gap-2">
                      <SearchMediaButton
                        sceneText={scene.text}
                        isSearching={isSearchingMedia === scene.id}
                        onSearch={(query) => searchMediaForScene(scene.id, query)}
                      />
                      {scene.media && (
                        <Button
                          size="sm"
                          variant="ghost"
                          onClick={() => {
                            const updatedScenes = storyboard.scenes.map((s) =>
                              s.id === scene.id ? { ...s, media: null } : s
                            );
                            setStoryboard({ ...storyboard, scenes: updatedScenes });
                          }}
                        >
                          <Trash2 className="w-4 h-4" />
                        </Button>
                      )}
                    </div>
                  </div>

                  {/* Media Search Results */}
                  {mediaSearchResults[scene.id] && (
                    <div className="mt-4 pt-4 border-t border-gray-800">
                      <div className="flex items-center justify-between mb-3">
                        <span className="text-sm text-gray-400">
                          {mediaSearchResults[scene.id].length} resultados encontrados
                        </span>
                        <button
                          onClick={() =>
                            setMediaSearchResults((prev) => {
                              const updated = { ...prev };
                              delete updated[scene.id];
                              return updated;
                            })
                          }
                          className="text-sm text-gray-500 hover:text-gray-400"
                        >
                          Fechar
                        </button>
                      </div>
                      <div className="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2">
                        {mediaSearchResults[scene.id].slice(0, 16).map((media) => (
                          <button
                            key={media.id}
                            onClick={() => selectMediaForScene(scene.id, media)}
                            className="aspect-video bg-gray-800 rounded overflow-hidden hover:ring-2 hover:ring-primary-500 transition-all"
                          >
                            <img
                              src={media.previewUrl}
                              alt=""
                              className="w-full h-full object-cover"
                            />
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                </Card>
              ))}
            </div>
          </div>
        )}

        {/* Render Section */}
        {storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Video className="w-5 h-5 text-green-500" />
                Renderização
              </CardTitle>
              <CardDescription>
                Combine todas as cenas em um vídeo final.
              </CardDescription>
            </CardHeader>
            <CardContent>
              {!apiKeyStatus?.json2video ? (
                <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                  <p className="text-yellow-300 text-sm">
                    JSON2Video API não configurada. Adicione JSON2VIDEO_API_KEY para habilitar a
                    renderização.
                  </p>
                </div>
              ) : render ? (
                <div className="space-y-4">
                  <div className="flex items-center gap-4">
                    <Badge
                      variant={
                        render.status === "completed"
                          ? "success"
                          : render.status === "error"
                          ? "error"
                          : "info"
                      }
                    >
                      {render.status === "rendering"
                        ? `Renderizando... ${render.progress}%`
                        : render.status === "completed"
                        ? "Concluído"
                        : render.status === "error"
                        ? "Erro"
                        : "Pendente"}
                    </Badge>
                    {render.status === "rendering" && (
                      <div className="flex-1 h-2 bg-gray-800 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-primary-500 transition-all"
                          style={{ width: `${render.progress}%` }}
                        />
                      </div>
                    )}
                  </div>

                  {render.videoUrl && (
                    <div className="aspect-video bg-black rounded-lg overflow-hidden">
                      <video src={render.videoUrl} controls className="w-full h-full" />
                    </div>
                  )}

                  {render.error && (
                    <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                      <p className="text-red-300 text-sm">{render.error}</p>
                    </div>
                  )}
                </div>
              ) : (
                <Button
                  onClick={startRender}
                  isLoading={isRendering}
                  disabled={!canRender}
                  leftIcon={<Play className="w-4 h-4" />}
                >
                  Renderizar Vídeo
                </Button>
              )}

              {!allScenesHaveMedia && (
                <p className="text-sm text-yellow-400 mt-3">
                  Todas as cenas precisam ter mídia antes de renderizar.
                </p>
              )}
            </CardContent>
          </Card>
        )}

        {/* Navigation */}
        <div className="flex justify-between">
          <Button
            variant="outline"
            onClick={() => router.push("/step/4-proposal")}
            leftIcon={<ArrowLeft className="w-4 h-4" />}
          >
            Voltar
          </Button>

          <Button
            onClick={handleProceed}
            disabled={render?.status !== "completed"}
            rightIcon={<ArrowRight className="w-4 h-4" />}
            size="lg"
          >
            Continuar para Upload
          </Button>
        </div>
      </div>

      <GuidelinesModal />
      <ApiKeysModal />
    </Layout>
  );
}

// Search Media Button Component
function SearchMediaButton({
  sceneText,
  isSearching,
  onSearch,
}: {
  sceneText: string;
  isSearching: boolean;
  onSearch: (query: string) => void;
}) {
  const [showInput, setShowInput] = useState(false);
  const [query, setQuery] = useState("");

  const handleSearch = () => {
    if (query.trim()) {
      onSearch(query);
      setShowInput(false);
      setQuery("");
    }
  };

  // Auto-generate search query from scene text
  const autoSearch = () => {
    const keywords = sceneText.split(" ").slice(0, 5).join(" ");
    onSearch(keywords);
  };

  if (showInput) {
    return (
      <div className="flex gap-1">
        <Input
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="Buscar..."
          className="w-32 text-sm py-1"
          onKeyDown={(e) => e.key === "Enter" && handleSearch()}
        />
        <Button size="sm" onClick={handleSearch}>
          <Search className="w-4 h-4" />
        </Button>
      </div>
    );
  }

  return (
    <div className="flex gap-1">
      <Button
        size="sm"
        variant="outline"
        onClick={autoSearch}
        isLoading={isSearching}
      >
        <Search className="w-4 h-4" />
      </Button>
      <Button
        size="sm"
        variant="ghost"
        onClick={() => setShowInput(true)}
        title="Busca personalizada"
      >
        <Plus className="w-4 h-4" />
      </Button>
    </div>
  );
}

```

---
#### `app/step/6-upload/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Layout from "@/components/Layout";
import GuidelinesModal from "@/components/GuidelinesModal";
import ApiKeysModal from "@/components/ApiKeysModal";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus } from "@/types";
import { downloadJSON } from "@/lib/utils";
import {
  Upload,
  ArrowLeft,
  AlertCircle,
  Play,
  Youtube,
  FileVideo,
  FileText,
  Tag,
  Image,
  Download,
  ExternalLink,
  RefreshCw,
} from "lucide-react";

export default function Step6Upload() {
  const router = useRouter();
  const { context, proposal, storyboard, render, upload, setUpload, resetWorkflow } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isUploading, setIsUploading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no render
  useEffect(() => {
    if (!context || !proposal || !render?.videoUrl) {
      router.push("/step/5-studio");
    }
  }, [context, proposal, render, router]);

  const handleUpload = async () => {
    if (!proposal || !render) return;
    setIsUploading(true);
    setError(null);

    try {
      // Note: Real YouTube upload requires OAuth2 authentication
      // This is a simulation showing what the upload would do
      const selectedTitle = proposal.titlesAndThumbs.variations.find(
        (v) => v.id === proposal.titlesAndThumbs.selectedVariation
      );

      const response = await fetch("/api/youtube/upload", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          renderId: render.id,
          videoUrl: render.videoUrl,
          title: selectedTitle?.title || context?.theme || "Video",
          description: proposal.description.content,
          tags: proposal.tags.items,
          thumbnailUrl: selectedTitle?.thumbnailUrl,
          uploadSetup: proposal.uploadSetup,
          accessToken: "", // Would come from OAuth2 flow
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const uploadData = await response.json();
      setUpload(uploadData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao fazer upload");
    } finally {
      setIsUploading(false);
    }
  };

  const exportAllData = () => {
    const exportData = {
      context,
      proposal,
      storyboard,
      render,
      upload,
      exportedAt: new Date().toISOString(),
    };
    downloadJSON(exportData, `emergency-youtube-export-${Date.now()}.json`);
  };

  const handleStartNew = () => {
    if (confirm("Tem certeza que deseja iniciar um novo projeto? Todos os dados serão perdidos.")) {
      resetWorkflow();
      router.push("/step/1-input");
    }
  };

  if (!context || !proposal || !render) {
    return null;
  }

  const selectedTitle = proposal.titlesAndThumbs.variations.find(
    (v) => v.id === proposal.titlesAndThumbs.selectedVariation
  );

  return (
    <Layout>
      <div className="space-y-8">
        {/* Header */}
        <div>
          <h1 className="text-3xl font-bold text-white mb-2">
            Finalização e Upload
          </h1>
          <p className="text-gray-400">
            Revise seu vídeo e envie para o YouTube.
          </p>
        </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Video Preview */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Play className="w-5 h-5 text-green-500" />
              Preview do Vídeo
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="aspect-video bg-black rounded-lg overflow-hidden">
              <video src={render.videoUrl || undefined} controls className="w-full h-full" />
            </div>
          </CardContent>
        </Card>

        {/* Metadata Summary */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Title & Thumbnail */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Image className="w-5 h-5 text-purple-500" />
                Título e Thumbnail
              </CardTitle>
            </CardHeader>
            <CardContent>
              {selectedTitle ? (
                <div className="space-y-4">
                  <div>
                    <p className="text-sm text-gray-400 mb-1">Título</p>
                    <p className="text-lg font-medium text-white">{selectedTitle.title}</p>
                  </div>
                  {selectedTitle.thumbnailUrl && (
                    <div>
                      <p className="text-sm text-gray-400 mb-2">Thumbnail</p>
                      <img
                        src={selectedTitle.thumbnailUrl}
                        alt={selectedTitle.title}
                        className="rounded-lg max-w-xs"
                      />
                    </div>
                  )}
                </div>
              ) : (
                <p className="text-gray-500">Nenhum título selecionado</p>
              )}
            </CardContent>
          </Card>

          {/* Description */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileText className="w-5 h-5 text-blue-500" />
                Descrição
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="max-h-48 overflow-auto">
                <pre className="text-sm text-gray-300 whitespace-pre-wrap font-sans">
                  {proposal.description.content}
                </pre>
              </div>
            </CardContent>
          </Card>

          {/* Tags */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Tag className="w-5 h-5 text-yellow-500" />
                Tags ({proposal.tags.items.length})
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="flex flex-wrap gap-2 max-h-32 overflow-auto">
                {proposal.tags.items.map((tag, i) => (
                  <Badge key={i} variant="default">
                    {tag}
                  </Badge>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Upload Settings */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileVideo className="w-5 h-5 text-green-500" />
                Configurações de Upload
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-2 gap-3 text-sm">
                <div>
                  <p className="text-gray-400">Categoria</p>
                  <p className="text-white">{getCategoryName(proposal.uploadSetup.category)}</p>
                </div>
                <div>
                  <p className="text-gray-400">Idioma</p>
                  <p className="text-white">{getLanguageName(proposal.uploadSetup.language)}</p>
                </div>
                <div>
                  <p className="text-gray-400">Licença</p>
                  <p className="text-white">
                    {proposal.uploadSetup.license === "youtube"
                      ? "YouTube Standard"
                      : "Creative Commons"}
                  </p>
                </div>
                <div>
                  <p className="text-gray-400">Para Crianças</p>
                  <p className="text-white">{proposal.uploadSetup.madeForKids ? "Sim" : "Não"}</p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Upload Section */}
        <Card className={upload?.status === "published" ? "border-green-500/50" : ""}>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Youtube className="w-5 h-5 text-red-500" />
              Upload para YouTube
            </CardTitle>
            <CardDescription>
              Envie seu vídeo diretamente para o YouTube.
            </CardDescription>
          </CardHeader>
          <CardContent>
            {!apiKeyStatus?.youtube ? (
              <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                <p className="text-yellow-300 text-sm">
                  YouTube API não configurada. Adicione as chaves YOUTUBE_API_KEY e
                  YOUTUBE_CLIENT_ID/SECRET para habilitar o upload.
                </p>
              </div>
            ) : upload ? (
              <div className="space-y-4">
                <div className="flex items-center gap-4">
                  <Badge
                    variant={
                      upload.status === "published"
                        ? "success"
                        : upload.status === "error"
                        ? "error"
                        : "info"
                    }
                  >
                    {upload.status === "uploading"
                      ? "Enviando..."
                      : upload.status === "processing"
                      ? "Processando..."
                      : upload.status === "published"
                      ? "Publicado!"
                      : upload.status === "error"
                      ? "Erro"
                      : "Pendente"}
                  </Badge>
                </div>

                {upload.youtubeUrl && (
                  <div className="p-4 bg-green-500/10 border border-green-500/20 rounded-lg">
                    <p className="text-green-300 mb-2">Vídeo publicado com sucesso!</p>
                    <a
                      href={upload.youtubeUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="inline-flex items-center gap-2 text-green-400 hover:text-green-300"
                    >
                      <ExternalLink className="w-4 h-4" />
                      Ver no YouTube
                    </a>
                  </div>
                )}

                {upload.error && (
                  <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                    <p className="text-red-300 text-sm">{upload.error}</p>
                  </div>
                )}
              </div>
            ) : (
              <div className="space-y-4">
                <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
                  <p className="text-blue-300 text-sm">
                    <strong>Nota:</strong> O upload para o YouTube requer autenticação OAuth2.
                    Em produção, você será redirecionado para autorizar o acesso ao seu canal.
                  </p>
                </div>
                <Button
                  onClick={handleUpload}
                  isLoading={isUploading}
                  leftIcon={<Upload className="w-4 h-4" />}
                  size="lg"
                >
                  Confirmar e Enviar para o YouTube
                </Button>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Export & Actions */}
        <Card>
          <CardHeader>
            <CardTitle>Exportar Dados</CardTitle>
            <CardDescription>
              Baixe todos os dados do projeto em formato JSON.
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="flex flex-wrap gap-3">
              <Button variant="outline" onClick={exportAllData} leftIcon={<Download className="w-4 h-4" />}>
                Exportar Projeto Completo
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  downloadJSON(proposal, `proposal-${proposal.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
              >
                Exportar Proposta
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  storyboard && downloadJSON(storyboard, `storyboard-${storyboard.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
                disabled={!storyboard}
              >
                Exportar Storyboard
              </Button>
            </div>
          </CardContent>
        </Card>

        {/* Navigation */}
        <div className="flex justify-between">
          <Button
            variant="outline"
            onClick={() => router.push("/step/5-studio")}
            leftIcon={<ArrowLeft className="w-4 h-4" />}
          >
            Voltar
          </Button>

          <Button
            onClick={handleStartNew}
            variant="secondary"
            leftIcon={<RefreshCw className="w-4 h-4" />}
          >
            Iniciar Novo Projeto
          </Button>
        </div>
      </div>

      <GuidelinesModal />
      <ApiKeysModal />
    </Layout>
  );
}

function getCategoryName(categoryId: string): string {
  const categories: Record<string, string> = {
    "1": "Film & Animation",
    "2": "Autos & Vehicles",
    "10": "Music",
    "15": "Pets & Animals",
    "17": "Sports",
    "19": "Travel & Events",
    "20": "Gaming",
    "22": "People & Blogs",
    "23": "Comedy",
    "24": "Entertainment",
    "25": "News & Politics",
    "26": "Howto & Style",
    "27": "Education",
    "28": "Science & Technology",
  };
  return categories[categoryId] || categoryId;
}

function getLanguageName(languageCode: string): string {
  const languages: Record<string, string> = {
    pt: "Português",
    en: "English",
    es: "Español",
  };
  return languages[languageCode] || languageCode;
}

```

---
#### `app/workflow/page.tsx`

```
"use client";

import { useState } from 'react';
import { CheckCircle2, Circle, Lock, ArrowRight, FileInput, Brain, FileVideo, Film, Wrench, Upload } from 'lucide-react';
import { useWorkflowStore } from '@/lib/store';
import { useRouter } from 'next/navigation';

const workflowSteps = [
  {
    step: 1 as const,
    title: "Entrada",
    description: "Defina o tema e configure o projeto",
    icon: FileInput,
    path: "/step/1-input",
    color: "from-blue-500 to-cyan-500",
  },
  {
    step: 2 as const,
    title: "Inteligência",
    description: "Pesquisa e análise de conteúdo",
    icon: Brain,
    path: "/step/2-research",
    color: "from-purple-500 to-pink-500",
  },
  {
    step: 4 as const,
    title: "Proposta",
    description: "Geração de roteiro e conteúdo",
    icon: FileVideo,
    path: "/step/4-proposal",
    color: "from-green-500 to-emerald-500",
  },
  {
    step: 5 as const,
    title: "Studio",
    description: "Seleção de mídia e storyboard",
    icon: Film,
    path: "/step/5-studio",
    color: "from-orange-500 to-red-500",
  },
  {
    step: 5 as const,
    title: "Render",
    description: "Renderização do vídeo",
    icon: Wrench,
    path: "/step/5-studio",
    color: "from-yellow-500 to-orange-500",
  },
  {
    step: 6 as const,
    title: "Upload",
    description: "Publicação no YouTube",
    icon: Upload,
    path: "/step/6-upload",
    color: "from-indigo-500 to-purple-500",
  },
];

export default function WorkflowPage() {
  const router = useRouter();
  const { currentStep, canNavigateToStep } = useWorkflowStore();
  const [hoveredStep, setHoveredStep] = useState<number | null>(null);

  const getStepStatus = (step: 1 | 2 | 4 | 5 | 6) => {
    if (step < currentStep) return "completed";
    if (step === currentStep) return "current";
    if (canNavigateToStep(step)) return "available";
    return "locked";
  };

  const handleStepClick = (step: 1 | 2 | 4 | 5 | 6, path: string) => {
    const status = getStepStatus(step);
    if (status !== "locked") {
      router.push(path);
    }
  };

  return (
    <div className="p-8 max-w-7xl mx-auto">
      {/* Header */}
      <div className="mb-12">
        <h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
          WorkFlow de Produção
        </h1>
        <p className="text-zinc-400">Siga as etapas para criar seu vídeo automaticamente</p>
      </div>

      {/* Timeline Horizontal */}
      <div className="relative mb-12">
        {/* Progress Bar */}
        <div className="absolute top-[52px] left-0 right-0 h-1 bg-zinc-800 rounded-full">
          <div
            className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500"
            style={{
              width: `${(workflowSteps.findIndex(s => s.step === currentStep) / (workflowSteps.length - 1)) * 100}%`
            }}
          />
        </div>

        {/* Steps */}
        <div className="grid grid-cols-6 gap-4">
          {workflowSteps.map((stepData, index) => {
            const status = getStepStatus(stepData.step);
            const isCompleted = status === "completed";
            const isCurrent = status === "current";
            const isLocked = status === "locked";
            const Icon = stepData.icon;

            return (
              <div key={index} className="relative">
                <button
                  onClick={() => handleStepClick(stepData.step, stepData.path)}
                  onMouseEnter={() => setHoveredStep(index)}
                  onMouseLeave={() => setHoveredStep(null)}
                  disabled={isLocked}
                  className={`
                    relative w-full flex flex-col items-center cursor-pointer disabled:cursor-not-allowed
                    transition-all duration-300
                    ${hoveredStep === index && !isLocked ? 'scale-110' : ''}
                  `}
                >
                  {/* Circle */}
                  <div
                    className={`
                      relative z-10 w-[104px] h-[104px] rounded-full flex items-center justify-center
                      transition-all duration-300 border-4
                      ${isCompleted
                        ? 'bg-gradient-to-br from-green-500 to-emerald-500 border-green-400 shadow-lg shadow-green-500/50'
                        : isCurrent
                        ? `bg-gradient-to-br ${stepData.color} border-white shadow-lg shadow-purple-500/50 animate-pulse`
                        : isLocked
                        ? 'bg-zinc-800 border-zinc-700'
                        : 'bg-zinc-900 border-zinc-600 hover:border-indigo-500'
                      }
                    `}
                  >
                    {isCompleted ? (
                      <CheckCircle2 className="w-12 h-12 text-white" />
                    ) : isCurrent ? (
                      <Icon className="w-12 h-12 text-white" />
                    ) : isLocked ? (
                      <Lock className="w-12 h-12 text-zinc-600" />
                    ) : (
                      <Icon className="w-12 h-12 text-zinc-400" />
                    )}
                  </div>

                  {/* Label */}
                  <div className="mt-4 text-center">
                    <h3
                      className={`
                        text-sm font-bold mb-1 transition-colors
                        ${isCompleted
                          ? 'text-green-400'
                          : isCurrent
                          ? 'text-white'
                          : isLocked
                          ? 'text-zinc-600'
                          : 'text-zinc-400'
                        }
                      `}
                    >
                      {stepData.title}
                    </h3>
                    <p className="text-xs text-zinc-500 max-w-[120px]">
                      {stepData.description}
                    </p>
                  </div>

                  {/* Step Number Badge */}
                  <div
                    className={`
                      absolute -top-2 -right-2 z-20 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                      ${isCompleted
                        ? 'bg-green-500 text-white'
                        : isCurrent
                        ? 'bg-indigo-500 text-white'
                        : 'bg-zinc-700 text-zinc-400'
                      }
                    `}
                  >
                    {index + 1}
                  </div>
                </button>
              </div>
            );
          })}
        </div>
      </div>

      {/* Current Step Info */}
      <div className="bg-gradient-to-br from-indigo-900/20 to-purple-900/20 border border-indigo-500/30 rounded-xl p-6">
        <div className="flex items-start gap-4">
          <div className="p-3 bg-indigo-500/10 rounded-lg">
            {workflowSteps.find(s => s.step === currentStep)?.icon ? (
              <div className="w-8 h-8 text-indigo-400">
                {(() => {
                  const StepIcon = workflowSteps.find(s => s.step === currentStep)?.icon;
                  return StepIcon ? <StepIcon className="w-full h-full" /> : null;
                })()}
              </div>
            ) : null}
          </div>
          <div className="flex-1">
            <h3 className="text-lg font-bold text-white mb-2">
              Etapa Atual: {workflowSteps.find(s => s.step === currentStep)?.title}
            </h3>
            <p className="text-sm text-zinc-400 mb-4">
              {workflowSteps.find(s => s.step === currentStep)?.description}
            </p>
            <button
              onClick={() => {
                const currentStepData = workflowSteps.find(s => s.step === currentStep);
                if (currentStepData) {
                  router.push(currentStepData.path);
                }
              }}
              className="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium rounded-lg transition-colors inline-flex items-center gap-2"
            >
              Continuar
              <ArrowRight className="w-4 h-4" />
            </button>
          </div>
        </div>
      </div>

      {/* Instructions */}
      <div className="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
          <div className="w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center mb-3">
            <CheckCircle2 className="w-6 h-6 text-green-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Completadas</h4>
          <p className="text-sm text-zinc-500">Marcadas em verde. Você pode revisitar a qualquer momento.</p>
        </div>

        <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
          <div className="w-10 h-10 bg-indigo-500/10 rounded-lg flex items-center justify-center mb-3">
            <Circle className="w-6 h-6 text-indigo-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapa Atual</h4>
          <p className="text-sm text-zinc-500">Destacada e pulsando. Clique para continuar o workflow.</p>
        </div>

        <div className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
          <div className="w-10 h-10 bg-zinc-500/10 rounded-lg flex items-center justify-center mb-3">
            <Lock className="w-6 h-6 text-zinc-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Bloqueadas</h4>
          <p className="text-sm text-zinc-500">Complete as etapas anteriores para desbloquear.</p>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/AIModelSelector.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Select from "@/components/ui/Select";
import { AIProvider, AIModelOption, APIKeyStatus } from "@/types";
import { getModelsForProvider, getProviderName } from "@/lib/ai";
import { AlertCircle } from "lucide-react";

interface AIModelSelectorProps {
  selectedProvider: AIProvider | null;
  selectedModel: string | null;
  onProviderChange: (provider: AIProvider) => void;
  onModelChange: (model: string) => void;
  apiKeyStatus?: APIKeyStatus;
  label?: string;
  compact?: boolean;
}

export default function AIModelSelector({
  selectedProvider,
  selectedModel,
  onProviderChange,
  onModelChange,
  apiKeyStatus,
  label = "AI Model",
  compact = false,
}: AIModelSelectorProps) {
  const [models, setModels] = useState<AIModelOption[]>([]);

  const providers: { value: AIProvider; label: string; available: boolean }[] = [
    {
      value: "openai",
      label: getProviderName("openai"),
      available: apiKeyStatus?.openai ?? true,
    },
    {
      value: "google",
      label: getProviderName("google"),
      available: apiKeyStatus?.google ?? true,
    },
    {
      value: "anthropic",
      label: getProviderName("anthropic"),
      available: apiKeyStatus?.anthropic ?? true,
    },
  ];

  useEffect(() => {
    if (selectedProvider) {
      const providerModels = getModelsForProvider(selectedProvider);
      setModels(providerModels);

      // Auto-select first model if none selected
      if (!selectedModel && providerModels.length > 0) {
        onModelChange(providerModels[0].id);
      }
    }
  }, [selectedProvider, selectedModel, onModelChange]);

  const availableProviders = providers.filter((p) => p.available);
  const hasAnyProvider = availableProviders.length > 0;

  if (!hasAnyProvider) {
    return (
      <div className="flex items-center gap-2 text-yellow-500 text-sm">
        <AlertCircle className="w-4 h-4" />
        <span>No AI provider configured. Please add API keys.</span>
      </div>
    );
  }

  if (compact) {
    return (
      <div className="flex items-center gap-2">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.label,
            disabled: !p.available,
          }))}
          placeholder="Provider"
          className="w-36"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Model"
            className="w-40"
          />
        )}
      </div>
    );
  }

  return (
    <div className="space-y-3">
      {label && (
        <label className="block text-sm font-medium text-gray-300">
          {label}
        </label>
      )}
      <div className="flex flex-wrap gap-3">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.available ? p.label : `${p.label} (not configured)`,
            disabled: !p.available,
          }))}
          placeholder="Select provider..."
          className="w-48"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Select model..."
            className="w-48"
          />
        )}
      </div>
      {selectedProvider && !providers.find((p) => p.value === selectedProvider)?.available && (
        <p className="text-sm text-yellow-500 flex items-center gap-1">
          <AlertCircle className="w-4 h-4" />
          This provider is not configured. Add the API key in settings.
        </p>
      )}
    </div>
  );
}

```

---
#### `components/ApiKeysModal.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Modal from "@/components/ui/Modal";
import Button from "@/components/ui/Button";
import Input from "@/components/ui/Input";
import Badge from "@/components/ui/Badge";
import { useUIStore } from "@/lib/store";
import { useAPIKeysStore, StoredAPIKeys } from "@/lib/api-keys-store";
import { APIKeyStatus } from "@/types";
import { checkAPIKeys } from "@/lib/api-keys";
import {
  Check,
  X,
  Loader2,
  ExternalLink,
  Eye,
  EyeOff,
  Save,
  TestTube,
  Trash2,
} from "lucide-react";

interface KeyConfig {
  key: keyof StoredAPIKeys;
  name: string;
  envVar: string;
  docsUrl: string;
  placeholder: string;
  required: boolean;
  dependsOn?: keyof StoredAPIKeys;
}

const API_KEYS_CONFIG: KeyConfig[] = [
  {
    key: "youtube_api_key",
    name: "YouTube Data API Key",
    envVar: "YOUTUBE_API_KEY",
    docsUrl: "https://console.cloud.google.com/apis/credentials",
    placeholder: "AIza...",
    required: true,
  },
  {
    key: "youtube_channel_id",
    name: "YouTube Channel ID",
    envVar: "YOUTUBE_CHANNEL_ID",
    docsUrl: "https://www.youtube.com/account_advanced",
    placeholder: "UC...",
    required: true,
    dependsOn: "youtube_api_key",
  },
  {
    key: "openai_api_key",
    name: "OpenAI",
    envVar: "OPENAI_API_KEY",
    docsUrl: "https://platform.openai.com/api-keys",
    placeholder: "sk-...",
    required: false,
  },
  {
    key: "google_api_key",
    name: "Google Gemini",
    envVar: "GOOGLE_GENERATIVE_AI_API_KEY",
    docsUrl: "https://aistudio.google.com/apikey",
    placeholder: "AIza...",
    required: false,
  },
  {
    key: "anthropic_api_key",
    name: "Anthropic Claude",
    envVar: "ANTHROPIC_API_KEY",
    docsUrl: "https://console.anthropic.com/settings/keys",
    placeholder: "sk-ant-...",
    required: false,
  },
  {
    key: "pexels_api_key",
    name: "Pexels",
    envVar: "PEXELS_API_KEY",
    docsUrl: "https://www.pexels.com/api/",
    placeholder: "...",
    required: false,
  },
  {
    key: "pixabay_api_key",
    name: "Pixabay",
    envVar: "PIXABAY_API_KEY",
    docsUrl: "https://pixabay.com/api/docs/",
    placeholder: "...",
    required: false,
  },
  {
    key: "unsplash_api_key",
    name: "Unsplash",
    envVar: "UNSPLASH_ACCESS_KEY",
    docsUrl: "https://unsplash.com/developers",
    placeholder: "...",
    required: false,
  },
  {
    key: "json2video_api_key",
    name: "JSON2Video",
    envVar: "JSON2VIDEO_API_KEY",
    docsUrl: "https://json2video.com/",
    placeholder: "...",
    required: false,
  },
  {
    key: "elevenlabs_api_key",
    name: "ElevenLabs",
    envVar: "ELEVENLABS_API_KEY",
    docsUrl: "https://elevenlabs.io/",
    placeholder: "...",
    required: false,
  },
  {
    key: "tavily_api_key",
    name: "Tavily (Pesquisa)",
    envVar: "TAVILY_API_KEY",
    docsUrl: "https://tavily.com/",
    placeholder: "tvly-...",
    required: false,
  },
  {
    key: "replicate_api_key",
    name: "Replicate",
    envVar: "REPLICATE_API_TOKEN",
    docsUrl: "https://replicate.com/account/api-tokens",
    placeholder: "r8_...",
    required: false,
  },
  {
    key: "stability_api_key",
    name: "Stability AI",
    envVar: "STABILITY_API_KEY",
    docsUrl: "https://platform.stability.ai/",
    placeholder: "sk-...",
    required: false,
  },
];

export default function ApiKeysModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const { keys, testedKeys, setKey, markKeyTested, clearKey, clearAllKeys } =
    useAPIKeysStore();

  const [serverStatus, setServerStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingServer] = useState(true);
  const [testingKey, setTestingKey] = useState<string | null>(null);
  const [testingAll, setTestingAll] = useState(false);
  const [showPassword, setShowPassword] = useState<Record<string, boolean>>({});
  const [testResults, setTestResults] = useState<Record<string, { success: boolean; message: string }>>({});

  // Carregar status das chaves do servidor
  useEffect(() => {
    if (isApiKeyModalOpen) {
      setIsLoadingServer(true);
      checkAPIKeys().then((status) => {
        setServerStatus(status);
        setIsLoadingServer(false);
      });
    }
  }, [isApiKeyModalOpen]);

  const testSingleKey = async (config: KeyConfig) => {
    const value = keys[config.key];
    if (!value) {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Chave não preenchida" },
      }));
      return;
    }

    setTestingKey(config.key);
    try {
      const response = await fetch("/api/config/test-key", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          keyType: config.key,
          keyValue: value,
          channelId: config.key === "youtube_api_key" ? keys.youtube_channel_id : undefined,
        }),
      });

      const result = await response.json();
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: result.success, message: result.message },
      }));
      markKeyTested(config.key, result.success);
    } catch {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Erro ao testar" },
      }));
      markKeyTested(config.key, false);
    } finally {
      setTestingKey(null);
    }
  };

  const testAllKeys = async () => {
    setTestingAll(true);
    const keysToTest = API_KEYS_CONFIG.filter((config) => keys[config.key]);

    for (const config of keysToTest) {
      await testSingleKey(config);
    }
    setTestingAll(false);
  };

  const toggleShowPassword = (key: string) => {
    setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));
  };

  const getKeyStatus = (config: KeyConfig) => {
    const hasLocalKey = !!keys[config.key];
    const localKeyTested = testedKeys[config.key];
    const serverKey = config.key.replace("_api_key", "").replace("_", "") as keyof APIKeyStatus;
    const hasServerKey = serverStatus?.[serverKey] ?? false;

    if (hasLocalKey && localKeyTested) {
      return "valid";
    } else if (hasLocalKey) {
      return "pending";
    } else if (hasServerKey) {
      return "server";
    }
    return "missing";
  };

  const configuredCount = API_KEYS_CONFIG.filter((config) => {
    const status = getKeyStatus(config);
    return status === "valid" || status === "server";
  }).length;

  return (
    <Modal
      isOpen={isApiKeyModalOpen}
      onClose={closeApiKeyModal}
      title="Configurar API Keys"
      size="xl"
    >
      <div className="space-y-6">
        {/* Resumo */}
        <div className="flex items-center justify-between p-4 bg-gray-800/50 rounded-lg">
          <div>
            <p className="text-sm text-gray-400">APIs Configuradas</p>
            <p className="text-2xl font-bold text-white">
              {configuredCount} / {API_KEYS_CONFIG.length}
            </p>
          </div>
          <div className="flex gap-2">
            <Button
              variant="outline"
              size="sm"
              onClick={testAllKeys}
              isLoading={testingAll}
              leftIcon={<TestTube className="w-4 h-4" />}
            >
              Testar Todas
            </Button>
            <Button
              variant="ghost"
              size="sm"
              onClick={clearAllKeys}
              leftIcon={<Trash2 className="w-4 h-4" />}
            >
              Limpar
            </Button>
          </div>
        </div>

        {/* Instruções */}
        <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
          <p className="text-sm text-blue-300">
            <strong>Como funciona:</strong> Insira suas API keys abaixo. Elas serão salvas
            na sua sessão do navegador (sessionStorage) e usadas enquanto você estiver
            usando o sistema. As chaves do servidor (.env) têm prioridade.
          </p>
        </div>

        {/* Lista de APIs */}
        <div className="space-y-3 max-h-[50vh] overflow-auto pr-2">
          {API_KEYS_CONFIG.map((config) => {
            const status = getKeyStatus(config);
            const isTestingThis = testingKey === config.key;
            const testResult = testResults[config.key];

            return (
              <div
                key={config.key}
                className="p-4 bg-gray-800/30 rounded-lg border border-gray-800"
              >
                <div className="flex items-center justify-between mb-2">
                  <div className="flex items-center gap-2">
                    <span className="font-medium text-white">{config.name}</span>
                    {config.required && (
                      <Badge variant="warning" size="sm">
                        Requerido
                      </Badge>
                    )}
                    {status === "valid" && (
                      <Badge variant="success" size="sm">
                        <Check className="w-3 h-3 mr-1" />
                        Validado
                      </Badge>
                    )}
                    {status === "server" && (
                      <Badge variant="info" size="sm">
                        Servidor
                      </Badge>
                    )}
                    {status === "pending" && (
                      <Badge variant="warning" size="sm">
                        Não testada
                      </Badge>
                    )}
                  </div>
                  <a
                    href={config.docsUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-sm text-primary-400 hover:text-primary-300 flex items-center gap-1"
                  >
                    Obter
                    <ExternalLink className="w-3 h-3" />
                  </a>
                </div>

                <div className="flex gap-2">
                  <div className="flex-1 relative">
                    <Input
                      type={showPassword[config.key] ? "text" : "password"}
                      value={keys[config.key]}
                      onChange={(e) => setKey(config.key, e.target.value)}
                      placeholder={config.placeholder}
                      className="pr-10 font-mono text-sm"
                    />
                    <button
                      type="button"
                      onClick={() => toggleShowPassword(config.key)}
                      className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300"
                    >
                      {showPassword[config.key] ? (
                        <EyeOff className="w-4 h-4" />
                      ) : (
                        <Eye className="w-4 h-4" />
                      )}
                    </button>
                  </div>
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => testSingleKey(config)}
                    isLoading={isTestingThis}
                    disabled={!keys[config.key] || testingAll}
                    className="w-24"
                  >
                    {isTestingThis ? (
                      <Loader2 className="w-4 h-4 animate-spin" />
                    ) : (
                      <>
                        <TestTube className="w-4 h-4 mr-1" />
                        Testar
                      </>
                    )}
                  </Button>
                  {keys[config.key] && (
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => clearKey(config.key)}
                      className="px-2"
                    >
                      <X className="w-4 h-4" />
                    </Button>
                  )}
                </div>

                {/* Resultado do teste */}
                {testResult && (
                  <div
                    className={`mt-2 text-sm flex items-center gap-1 ${
                      testResult.success ? "text-green-400" : "text-red-400"
                    }`}
                  >
                    {testResult.success ? (
                      <Check className="w-4 h-4" />
                    ) : (
                      <X className="w-4 h-4" />
                    )}
                    {testResult.message}
                  </div>
                )}

                {/* Info do env var */}
                <p className="text-xs text-gray-500 mt-2 font-mono">
                  ENV: {config.envVar}
                </p>
              </div>
            );
          })}
        </div>

        {/* Requisitos Mínimos */}
        <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
          <p className="text-sm text-yellow-300">
            <strong>Requisitos mínimos para funcionar:</strong>
          </p>
          <ul className="text-sm text-yellow-300/80 mt-2 list-disc list-inside space-y-1">
            <li>YouTube Data API Key + Channel ID (para sincronização)</li>
            <li>Pelo menos 1 provedor de AI (OpenAI, Google, ou Anthropic)</li>
            <li>Pelo menos 1 provedor de mídia (Pexels, Pixabay, ou Unsplash)</li>
          </ul>
        </div>

        {/* Botões de ação */}
        <div className="flex justify-end gap-2 pt-4 border-t border-gray-800">
          <Button variant="ghost" onClick={closeApiKeyModal}>
            Fechar
          </Button>
          <Button
            variant="primary"
            onClick={closeApiKeyModal}
            leftIcon={<Save className="w-4 h-4" />}
          >
            Salvar e Fechar
          </Button>
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/AssetCard.tsx`

```
"use client";

import { useState } from "react";
import Card from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { AssetStatus, AIProvider, APIKeyStatus } from "@/types";
import { Check, RefreshCw, Pencil, Loader2, AlertCircle } from "lucide-react";

interface AssetCardProps {
  title: string;
  status: AssetStatus;
  children: React.ReactNode;
  isEditing?: boolean;
  onEdit?: () => void;
  onRegenerate?: (provider: AIProvider, model: string) => void;
  onApprove?: () => void;
  onCancelEdit?: () => void;
  onSaveEdit?: () => void;
  editContent?: React.ReactNode;
  apiKeyStatus?: APIKeyStatus;
  error?: string;
  isGenerating?: boolean;
}

export default function AssetCard({
  title,
  status,
  children,
  isEditing = false,
  onEdit,
  onRegenerate,
  onApprove,
  onCancelEdit,
  onSaveEdit,
  editContent,
  apiKeyStatus,
  error,
  isGenerating = false,
}: AssetCardProps) {
  const [showRegenerate, setShowRegenerate] = useState(false);
  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  const getStatusBadge = () => {
    switch (status) {
      case "pending":
        return <Badge variant="default">Pendente</Badge>;
      case "generating":
        return <Badge variant="info">Gerando...</Badge>;
      case "ready":
        return <Badge variant="warning">Aguardando Aprovação</Badge>;
      case "approved":
        return <Badge variant="success">Aprovado</Badge>;
      case "error":
        return <Badge variant="error">Erro</Badge>;
      default:
        return null;
    }
  };

  const handleRegenerate = () => {
    if (selectedProvider && selectedModel && onRegenerate) {
      onRegenerate(selectedProvider, selectedModel);
      setShowRegenerate(false);
    }
  };

  return (
    <Card className="relative">
      {/* Header */}
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-3">
          <h3 className="text-lg font-semibold text-white">{title}</h3>
          {getStatusBadge()}
        </div>
      </div>

      {/* Error message */}
      {error && (
        <div className="mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span className="text-sm">{error}</span>
        </div>
      )}

      {/* Content */}
      <div className="mb-4">
        {isGenerating ? (
          <div className="flex items-center justify-center py-8">
            <Loader2 className="w-8 h-8 animate-spin text-primary-500" />
          </div>
        ) : isEditing ? (
          editContent
        ) : (
          children
        )}
      </div>

      {/* Regenerate AI Selector */}
      {showRegenerate && (
        <div className="mb-4 p-4 bg-gray-800/50 rounded-lg space-y-3">
          <AIModelSelector
            selectedProvider={selectedProvider}
            selectedModel={selectedModel}
            onProviderChange={setSelectedProvider}
            onModelChange={setSelectedModel}
            apiKeyStatus={apiKeyStatus}
            label="Selecione o modelo para regenerar"
          />
          <div className="flex gap-2">
            <Button
              size="sm"
              variant="primary"
              onClick={handleRegenerate}
              disabled={!selectedProvider || !selectedModel}
            >
              Regenerar
            </Button>
            <Button
              size="sm"
              variant="ghost"
              onClick={() => setShowRegenerate(false)}
            >
              Cancelar
            </Button>
          </div>
        </div>
      )}

      {/* Actions */}
      <div className="flex flex-wrap gap-2">
        {isEditing ? (
          <>
            <Button size="sm" variant="success" onClick={onSaveEdit}>
              Salvar
            </Button>
            <Button size="sm" variant="ghost" onClick={onCancelEdit}>
              Cancelar
            </Button>
          </>
        ) : (
          <>
            {status !== "approved" && status !== "generating" && onEdit && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<Pencil className="w-4 h-4" />}
                onClick={onEdit}
              >
                Editar
              </Button>
            )}
            {status !== "approved" && status !== "generating" && onRegenerate && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<RefreshCw className="w-4 h-4" />}
                onClick={() => setShowRegenerate(true)}
              >
                Regerar
              </Button>
            )}
            {status === "ready" && onApprove && (
              <Button
                size="sm"
                variant="success"
                leftIcon={<Check className="w-4 h-4" />}
                onClick={onApprove}
              >
                Aprovar
              </Button>
            )}
            {status === "approved" && (
              <span className="flex items-center gap-1 text-green-400 text-sm">
                <Check className="w-4 h-4" />
                Aprovado
              </span>
            )}
          </>
        )}
      </div>
    </Card>
  );
}

```

---
#### `components/ConnectApisModal.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { X, Check, AlertCircle, RefreshCw, Key, Save, Server, Monitor, Trash2 } from 'lucide-react';
import { useAPIKeysStore, StoredAPIKeys } from '@/lib/api-keys-store';
import { useUIStore } from '@/lib/store';

// Mapeamento EXATO com lib/api-keys-store.ts
const KEY_MAP: Record<string, keyof StoredAPIKeys> = {
  openai: "openai_api_key",
  gemini: "google_api_key",
  anthropic: "anthropic_api_key",
  youtube: "youtube_api_key",
  pexels: "pexels_api_key",
  pixabay: "pixabay_api_key",
  elevenlabs: "elevenlabs_api_key",
  tavily: "tavily_api_key",
  json2video: "json2video_api_key"
};

const API_NAMES: Record<string, string> = {
  openai: "OpenAI (GPT-4)",
  gemini: "Google Gemini",
  anthropic: "Anthropic Claude",
  youtube: "YouTube Data API",
  pexels: "Pexels Media",
  pixabay: "Pixabay Media",
  elevenlabs: "ElevenLabs Voice",
  tavily: "Tavily Search",
  json2video: "JSON2Video"
};

export default function ConnectApisModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const isOpen = isApiKeyModalOpen;
  const onClose = closeApiKeyModal;
  const [loading, setLoading] = useState(true);
  const [serverKeys, setServerKeys] = useState<Record<string, boolean>>({});
  const [showEdit, setShowEdit] = useState<string | null>(null);
  const [manualInput, setManualInput] = useState("");
  const [mounted, setMounted] = useState(false);
  
  const { keys: localKeys, setKey, clearKey } = useAPIKeysStore();

  useEffect(() => {
    setMounted(true);
  }, []);

  useEffect(() => {
    if (isOpen) {
      checkServerKeys();
    }
  }, [isOpen]);

  const checkServerKeys = async () => {
    setLoading(true);
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerKeys(data);
    } catch (e) {
      console.error(e);
    } finally {
      setLoading(false);
    }
  };

  const handleSaveKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      setKey(storeKeyName, manualInput);
      setShowEdit(null);
      setManualInput("");
    }
  };

  const handleClearKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      clearKey(storeKeyName);
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-[99999] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-200">
      <div className="w-full max-w-3xl bg-[#09090b] border border-zinc-800 rounded-xl text-white shadow-2xl flex flex-col max-h-[85vh]">
        
        <div className="flex items-center justify-between p-6 border-b border-zinc-800 bg-zinc-900/50 rounded-t-xl">
          <div>
            <h2 className="text-xl font-bold flex items-center gap-2">
              <Key className="w-5 h-5 text-indigo-500" />
              Central de Conexões
            </h2>
            <p className="text-zinc-400 text-sm">Gerencie chaves do Servidor (.env) ou Locais (Navegador).</p>
          </div>
          <button onClick={onClose} className="p-2 hover:bg-zinc-800 rounded-full transition-colors cursor-pointer">
            <X className="w-6 h-6 text-zinc-400 hover:text-white" />
          </button>
        </div>

        <div className="p-6 overflow-y-auto custom-scrollbar space-y-4">
          {loading ? (
             <div className="flex flex-col items-center justify-center py-12 text-zinc-500 gap-3">
               <RefreshCw className="animate-spin w-8 h-8 text-indigo-500" />
               <p>Verificando status...</p>
             </div>
          ) : (
            Object.keys(API_NAMES).map((key) => {
              const storeKeyName = KEY_MAP[key];
              const isServerConnected = serverKeys[key];
              const hasLocalKey = mounted && !!localKeys[storeKeyName];
              const isLocalConnected = hasLocalKey;
              const isConnected = isServerConnected || isLocalConnected;
              const isEditing = showEdit === key;

              return (
                <div key={key} className={`border rounded-lg transition-all ${isConnected ? 'border-green-900/30 bg-green-900/5' : 'border-zinc-800 bg-zinc-900/30'}`}>
                  <div className="flex items-center justify-between p-4">
                    <div className="flex items-center gap-3">
                      <div className={`p-2 rounded-lg ${isConnected ? 'bg-green-500/10' : 'bg-zinc-800'}`}>
                        {isConnected ? <Check className="w-5 h-5 text-green-500" /> : <AlertCircle className="w-5 h-5 text-zinc-500" />}
                      </div>
                      <div>
                        <h3 className="font-semibold text-zinc-200">{API_NAMES[key]}</h3>
                        <div className="flex items-center gap-2 mt-1">
                          {isServerConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-zinc-800 px-2 py-0.5 rounded text-zinc-300 border border-zinc-700">
                              <Server className="w-3 h-3" /> Servidor
                            </span>
                          )}
                          {isLocalConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-indigo-900/30 px-2 py-0.5 rounded text-indigo-300 border border-indigo-500/20">
                              <Monitor className="w-3 h-3" /> Local
                            </span>
                          )}
                          {!isConnected && <span className="text-[10px] text-red-400 font-medium">Chave ausente</span>}
                        </div>
                      </div>
                    </div>

                    <div className="flex items-center gap-2">
                      {isLocalConnected && !isServerConnected && (
                         <button onClick={() => handleClearKey(key)} className="p-2 text-zinc-500 hover:text-red-400 transition-colors" title="Remover">
                           <Trash2 className="w-4 h-4" />
                         </button>
                      )}
                      {!isServerConnected && (
                        <button
                          onClick={() => {
                            setShowEdit(isEditing ? null : key);
                            setManualInput(localKeys[storeKeyName] || "");
                          }}
                          className={`px-3 py-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer border ${isEditing ? 'bg-zinc-700 border-zinc-600 text-white' : 'bg-zinc-900 border-zinc-700 text-zinc-300 hover:bg-zinc-800'}`}
                        >
                          {isEditing ? 'Cancelar' : (isLocalConnected ? 'Editar' : 'Adicionar')}
                        </button>
                      )}
                    </div>
                  </div>

                  {isEditing && (
                    <div className="p-4 border-t border-zinc-800 bg-black/20 animate-in slide-in-from-top-2 duration-200">
                      <label className="text-xs text-zinc-400 mb-1.5 block">Cole sua chave API aqui:</label>
                      <div className="flex gap-2">
                        <input 
                          type="password"
                          placeholder="sk-..."
                          className="flex-1 bg-zinc-950 border border-zinc-700 rounded-md py-2 px-3 text-sm text-white focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                          value={manualInput}
                          onChange={(e) => setManualInput(e.target.value)}
                        />
                        <button 
                          onClick={() => handleSaveKey(key)}
                          disabled={!manualInput}
                          className="bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 cursor-pointer shadow-lg shadow-indigo-500/20"
                        >
                          <Save className="w-4 h-4" /> Salvar
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              );
            })
          )}
        </div>
        
        <div className="p-6 border-t border-zinc-800 bg-zinc-900/50 rounded-b-xl flex justify-between items-center">
          <button onClick={checkServerKeys} className="text-zinc-400 hover:text-white text-sm flex items-center gap-2 transition-colors cursor-pointer">
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} /> Verificar
          </button>
          <button onClick={onClose} className="px-6 py-2.5 bg-white hover:bg-zinc-200 text-black font-bold rounded-lg transition-colors cursor-pointer shadow-lg shadow-white/5">
            Concluir
          </button>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/FileDropzone.tsx`

```
"use client";

import { useCallback } from "react";
import { useDropzone } from "react-dropzone";
import { cn } from "@/lib/utils";
import { Upload, File, X } from "lucide-react";

interface FileDropzoneProps {
  onFileAccepted: (file: File) => void;
  accept?: Record<string, string[]>;
  maxSize?: number;
  currentFile?: File | null;
  onRemove?: () => void;
  label?: string;
  description?: string;
}

export default function FileDropzone({
  onFileAccepted,
  accept = { "text/csv": [".csv"] },
  maxSize = 10 * 1024 * 1024, // 10MB
  currentFile,
  onRemove,
  label = "Upload de Arquivo",
  description = "Arraste e solte ou clique para selecionar",
}: FileDropzoneProps) {
  const onDrop = useCallback(
    (acceptedFiles: File[]) => {
      if (acceptedFiles.length > 0) {
        onFileAccepted(acceptedFiles[0]);
      }
    },
    [onFileAccepted]
  );

  const { getRootProps, getInputProps, isDragActive, fileRejections } =
    useDropzone({
      onDrop,
      accept,
      maxSize,
      multiple: false,
    });

  const formatFileSize = (bytes: number) => {
    if (bytes < 1024) return bytes + " B";
    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + " KB";
    return (bytes / (1024 * 1024)).toFixed(1) + " MB";
  };

  if (currentFile) {
    return (
      <div className="border border-gray-700 rounded-lg p-4 bg-gray-800/50">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="p-2 bg-primary-500/10 rounded-lg">
              <File className="w-5 h-5 text-primary-500" />
            </div>
            <div>
              <p className="text-sm font-medium text-white">{currentFile.name}</p>
              <p className="text-xs text-gray-400">
                {formatFileSize(currentFile.size)}
              </p>
            </div>
          </div>
          {onRemove && (
            <button
              onClick={onRemove}
              className="p-1 hover:bg-gray-700 rounded-lg transition-colors"
            >
              <X className="w-4 h-4 text-gray-400" />
            </button>
          )}
        </div>
      </div>
    );
  }

  return (
    <div>
      <div
        {...getRootProps()}
        className={cn(
          "border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200",
          isDragActive
            ? "border-primary-500 bg-primary-500/10"
            : "border-gray-700 hover:border-gray-600 bg-gray-800/30"
        )}
      >
        <input {...getInputProps()} />
        <Upload
          className={cn(
            "w-10 h-10 mx-auto mb-3",
            isDragActive ? "text-primary-500" : "text-gray-500"
          )}
        />
        <p className="text-sm font-medium text-white mb-1">{label}</p>
        <p className="text-xs text-gray-400">{description}</p>
        <p className="text-xs text-gray-500 mt-2">
          Tamanho máximo: {formatFileSize(maxSize)}
        </p>
      </div>

      {fileRejections.length > 0 && (
        <div className="mt-2 text-sm text-red-400">
          {fileRejections[0].errors.map((error) => (
            <p key={error.code}>{error.message}</p>
          ))}
        </div>
      )}
    </div>
  );
}

```

---
#### `components/GuidelinesModal.tsx`

```
"use client";

import { useState } from "react";
import Modal from "@/components/ui/Modal";
import Button from "@/components/ui/Button";
import Input from "@/components/ui/Input";
import Textarea from "@/components/ui/Textarea";
import Toggle from "@/components/ui/Toggle";
import Card from "@/components/ui/Card";
import Badge from "@/components/ui/Badge";
import { useGuidelinesStore, useUIStore } from "@/lib/store";
import { Diretriz, DiretrizScope } from "@/types";
import { Plus, Pencil, Trash2, Check } from "lucide-react";
import { cn } from "@/lib/utils";

const SCOPE_OPTIONS: { value: DiretrizScope; label: string }[] = [
  { value: "script", label: "Roteiro" },
  { value: "thumbnail", label: "Thumbnail" },
  { value: "audio", label: "Áudio" },
  { value: "description", label: "Descrição" },
  { value: "video", label: "Vídeo" },
];

export default function GuidelinesModal() {
  const { isGuidelinesModalOpen, closeGuidelinesModal } = useUIStore();
  const {
    guidelines,
    addDiretriz,
    updateDiretriz,
    deleteDiretriz,
    toggleDiretriz,
  } = useGuidelinesStore();

  const [isCreating, setIsCreating] = useState(false);
  const [editingId, setEditingId] = useState<string | null>(null);
  const [formData, setFormData] = useState<{
    title: string;
    description: string;
    systemPrompt: string;
    appliesTo: DiretrizScope[];
  }>({
    title: "",
    description: "",
    systemPrompt: "",
    appliesTo: [],
  });

  const resetForm = () => {
    setFormData({
      title: "",
      description: "",
      systemPrompt: "",
      appliesTo: [],
    });
    setIsCreating(false);
    setEditingId(null);
  };

  const handleCreate = () => {
    if (!formData.title || !formData.systemPrompt || formData.appliesTo.length === 0) {
      return;
    }

    addDiretriz({
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
      active: true,
    });

    resetForm();
  };

  const handleEdit = (diretriz: Diretriz) => {
    setEditingId(diretriz.id);
    setFormData({
      title: diretriz.title,
      description: diretriz.description,
      systemPrompt: diretriz.systemPrompt,
      appliesTo: diretriz.appliesTo,
    });
  };

  const handleSaveEdit = () => {
    if (!editingId || !formData.title || !formData.systemPrompt) return;

    updateDiretriz(editingId, {
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
    });

    resetForm();
  };

  const handleDelete = (id: string) => {
    if (confirm("Tem certeza que deseja excluir esta diretriz?")) {
      deleteDiretriz(id);
    }
  };

  const toggleScope = (scope: DiretrizScope) => {
    setFormData((prev) => ({
      ...prev,
      appliesTo: prev.appliesTo.includes(scope)
        ? prev.appliesTo.filter((s) => s !== scope)
        : [...prev.appliesTo, scope],
    }));
  };

  return (
    <Modal
      isOpen={isGuidelinesModalOpen}
      onClose={closeGuidelinesModal}
      title="Engine de Diretrizes"
      size="xl"
    >
      <div className="space-y-6">
        {/* Description */}
        <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
          <p className="text-sm text-blue-300">
            As diretrizes são <strong>globais e transversais</strong>. Elas são
            aplicadas automaticamente em todas as gerações de conteúdo conforme
            o escopo selecionado. As diretrizes ADICIONAM contexto à análise,
            nunca substituem.
          </p>
        </div>

        {/* Create New Button */}
        {!isCreating && !editingId && (
          <Button
            onClick={() => setIsCreating(true)}
            leftIcon={<Plus className="w-4 h-4" />}
          >
            Nova Diretriz
          </Button>
        )}

        {/* Create/Edit Form */}
        {(isCreating || editingId) && (
          <Card className="border-primary-500/50">
            <h3 className="text-lg font-semibold text-white mb-4">
              {editingId ? "Editar Diretriz" : "Nova Diretriz"}
            </h3>
            <div className="space-y-4">
              <Input
                label="Título"
                value={formData.title}
                onChange={(e) =>
                  setFormData((prev) => ({ ...prev, title: e.target.value }))
                }
                placeholder="Ex: Tom de voz formal"
              />

              <Input
                label="Descrição (opcional)"
                value={formData.description}
                onChange={(e) =>
                  setFormData((prev) => ({
                    ...prev,
                    description: e.target.value,
                  }))
                }
                placeholder="Breve descrição da diretriz"
              />

              <Textarea
                label="System Prompt"
                value={formData.systemPrompt}
                onChange={(e) =>
                  setFormData((prev) => ({
                    ...prev,
                    systemPrompt: e.target.value,
                  }))
                }
                placeholder="Instruções que serão adicionadas ao prompt do AI..."
                rows={4}
              />

              <div>
                <label className="block text-sm font-medium text-gray-300 mb-2">
                  Aplicar em:
                </label>
                <div className="flex flex-wrap gap-2">
                  {SCOPE_OPTIONS.map((option) => (
                    <button
                      key={option.value}
                      onClick={() => toggleScope(option.value)}
                      className={cn(
                        "px-3 py-1.5 rounded-lg text-sm font-medium transition-all",
                        formData.appliesTo.includes(option.value)
                          ? "bg-primary-600 text-white"
                          : "bg-gray-800 text-gray-400 hover:bg-gray-700"
                      )}
                    >
                      {option.label}
                    </button>
                  ))}
                </div>
              </div>

              <div className="flex gap-2 pt-2">
                <Button
                  onClick={editingId ? handleSaveEdit : handleCreate}
                  disabled={
                    !formData.title ||
                    !formData.systemPrompt ||
                    formData.appliesTo.length === 0
                  }
                  leftIcon={<Check className="w-4 h-4" />}
                >
                  {editingId ? "Salvar" : "Criar"}
                </Button>
                <Button variant="ghost" onClick={resetForm}>
                  Cancelar
                </Button>
              </div>
            </div>
          </Card>
        )}

        {/* Existing Guidelines */}
        <div className="space-y-3">
          <h3 className="text-sm font-semibold text-gray-400 uppercase tracking-wider">
            Diretrizes Existentes ({guidelines.diretrizes.length})
          </h3>

          {guidelines.diretrizes.length === 0 ? (
            <div className="text-center py-8 text-gray-500">
              Nenhuma diretriz criada ainda.
            </div>
          ) : (
            guidelines.diretrizes.map((diretriz) => (
              <Card key={diretriz.id} padding="sm" className="group">
                <div className="flex items-start justify-between gap-4">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-1">
                      <h4 className="font-medium text-white">{diretriz.title}</h4>
                      <Badge variant={diretriz.active ? "success" : "default"}>
                        {diretriz.active ? "Ativa" : "Inativa"}
                      </Badge>
                    </div>
                    {diretriz.description && (
                      <p className="text-sm text-gray-400 mb-2">
                        {diretriz.description}
                      </p>
                    )}
                    <div className="flex flex-wrap gap-1">
                      {diretriz.appliesTo.map((scope) => (
                        <Badge key={scope} variant="info" size="sm">
                          {SCOPE_OPTIONS.find((o) => o.value === scope)?.label}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <Toggle
                      checked={diretriz.active}
                      onChange={() => toggleDiretriz(diretriz.id)}
                    />
                    <button
                      onClick={() => handleEdit(diretriz)}
                      className="p-1.5 hover:bg-gray-700 rounded-lg transition-colors"
                    >
                      <Pencil className="w-4 h-4 text-gray-400" />
                    </button>
                    <button
                      onClick={() => handleDelete(diretriz.id)}
                      className="p-1.5 hover:bg-red-500/20 rounded-lg transition-colors"
                    >
                      <Trash2 className="w-4 h-4 text-red-400" />
                    </button>
                  </div>
                </div>
              </Card>
            ))
          )}
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/Layout.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { cn } from "@/lib/utils";
import { useUIStore } from "@/lib/store";
import {
  Menu,
  X,
  Home,
  Workflow,
  BookOpen,
  Key,
  ChevronRight,
  FileText,
} from "lucide-react";
import GuidelinesModal from "./GuidelinesModal";
import ConnectApisModal from "./ConnectApisModal";

interface LayoutProps {
  children: React.ReactNode;
}

export default function Layout({ children }: LayoutProps) {
  const pathname = usePathname();
  const { isSidebarOpen, toggleSidebar, openGuidelinesModal, openApiKeyModal } = useUIStore();
  const [isMobile, setIsMobile] = useState(false);

  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 1024);
    };
    checkMobile();
    window.addEventListener("resize", checkMobile);
    return () => window.removeEventListener("resize", checkMobile);
  }, []);

  const menuItems = [
    {
      label: "Home",
      icon: <Home className="w-5 h-5" />,
      path: "/",
      type: "link" as const,
    },
    {
      label: "WorkFlow",
      icon: <Workflow className="w-5 h-5" />,
      path: "/workflow",
      type: "link" as const,
    },
    {
      label: "Documentação",
      icon: <FileText className="w-5 h-5" />,
      path: "/documentation",
      type: "link" as const,
    },
    {
      label: "Diretrizes",
      icon: <BookOpen className="w-5 h-5" />,
      type: "button" as const,
      onClick: openGuidelinesModal,
    },
    {
      label: "API Keys",
      icon: <Key className="w-5 h-5" />,
      type: "button" as const,
      onClick: openApiKeyModal,
    },
  ];

  return (
    <div className="min-h-screen bg-[#09090b] flex">
      {/* Mobile Menu Button */}
      <button
        onClick={toggleSidebar}
        className="lg:hidden fixed top-4 left-4 z-50 p-2 bg-zinc-900 rounded-lg border border-zinc-800"
      >
        {isSidebarOpen ? (
          <X className="w-5 h-5 text-white" />
        ) : (
          <Menu className="w-5 h-5 text-white" />
        )}
      </button>

      {/* Sidebar */}
      <aside
        className={cn(
          "fixed lg:sticky top-0 left-0 z-40 h-screen w-64 bg-zinc-900 border-r border-zinc-800 transition-transform duration-300",
          isSidebarOpen ? "translate-x-0" : "-translate-x-full lg:translate-x-0"
        )}
      >
        <div className="flex flex-col h-full">
          {/* Logo */}
          <div className="p-6 border-b border-zinc-800">
            <Link href="/" className="flex items-center gap-2">
              <div className="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                <span className="text-white font-bold text-sm">EY</span>
              </div>
              <span className="text-lg font-bold text-white">Emergency YT</span>
            </Link>
          </div>

          {/* Navigation */}
          <nav className="flex-1 p-4 space-y-1 overflow-auto">
            {menuItems.map((item, index) => {
              if (item.type === "link") {
                const isActive = pathname === item.path ||
                    (item.path === "/workflow" && pathname.startsWith("/step/")) ||
                    (item.path === "/documentation" && pathname.startsWith("/documentation"));

                return (
                  <Link
                    key={index}
                    href={item.path}
                    onClick={() => {
                      if (isMobile) toggleSidebar();
                    }}
                    className={cn(
                      "flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",
                      isActive
                        ? "bg-indigo-600/20 text-indigo-400 border border-indigo-500/30"
                        : "text-zinc-400 hover:bg-zinc-800 hover:text-white"
                    )}
                  >
                    <span
                      className={cn(
                        "flex items-center justify-center w-8 h-8 rounded-lg",
                        isActive
                          ? "bg-indigo-600/30"
                          : "bg-zinc-800"
                      )}
                    >
                      {item.icon}
                    </span>
                    <span className="font-medium">{item.label}</span>
                  </Link>
                );
              } else {
                return (
                  <button
                    key={index}
                    onClick={() => {
                      item.onClick?.();
                      if (isMobile) toggleSidebar();
                    }}
                    className="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-zinc-400 hover:bg-zinc-800 hover:text-white transition-all duration-200"
                  >
                    <span className="flex items-center justify-center w-8 h-8 rounded-lg bg-zinc-800">
                      {item.icon}
                    </span>
                    <span className="font-medium">{item.label}</span>
                    <ChevronRight className="w-4 h-4 ml-auto" />
                  </button>
                );
              }
            })}
          </nav>

          {/* Footer */}
          <div className="p-4 border-t border-zinc-800">
            <p className="text-xs text-zinc-500 text-center">
              Emergency YouTube v1.0.0
            </p>
          </div>
        </div>
      </aside>

      {/* Overlay for mobile */}
      {isSidebarOpen && isMobile && (
        <div
          className="fixed inset-0 bg-black/50 z-30 lg:hidden"
          onClick={toggleSidebar}
        />
      )}

      {/* Main Content */}
      <main className="flex-1 h-screen overflow-y-auto">
        {children}
      </main>

      {/* Modals */}
      <GuidelinesModal />
      <ConnectApisModal />
    </div>
  );
}

```

---
#### `components/documentation/CurrentStateTab.tsx`

```
"use client";

import {
  Compass,
  CheckCircle2,
  Clock,
  AlertTriangle,
  XCircle,
  ArrowRight,
  Target,
  Zap,
  Shield,
  TrendingUp,
  Calendar,
  Gauge,
} from "lucide-react";

export default function CurrentStateTab() {
  const completedFeatures = [
    { name: "Dashboard com Boot Sequence", priority: "Alta", impact: "Alto" },
    { name: "Workflow de 6 etapas", priority: "Crítica", impact: "Crítico" },
    { name: "Input de tema e configuração", priority: "Crítica", impact: "Alto" },
    { name: "Pesquisa com IA", priority: "Alta", impact: "Alto" },
    { name: "Geração de roteiro", priority: "Crítica", impact: "Crítico" },
    { name: "Geração de títulos/thumbnails", priority: "Alta", impact: "Alto" },
    { name: "Geração de descrição e tags", priority: "Alta", impact: "Alto" },
    { name: "Seleção de trilha sonora", priority: "Média", impact: "Médio" },
    { name: "Sistema de diretrizes", priority: "Média", impact: "Alto" },
    { name: "Configuração de API Keys", priority: "Crítica", impact: "Crítico" },
    { name: "Persistência de estado", priority: "Alta", impact: "Alto" },
  ];

  const partialFeatures = [
    { name: "Upload YouTube", progress: 80, blocker: "OAuth config", priority: "Alta" },
    { name: "Render de vídeo", progress: 70, blocker: "Integração FFmpeg", priority: "Alta" },
    { name: "TTS (ElevenLabs)", progress: 60, blocker: "API quota", priority: "Média" },
    { name: "Storyboard editor", progress: 50, blocker: "UX refinement", priority: "Média" },
  ];

  const notStartedFeatures = [
    { name: "Multi-idioma interface", complexity: "Média", priority: "Baixa", impact: "Médio" },
    { name: "Histórico de vídeos", complexity: "Baixa", priority: "Média", impact: "Alto" },
    { name: "Templates de vídeo", complexity: "Média", priority: "Média", impact: "Alto" },
    { name: "Batch processing", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Analytics dashboard", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Colaboração multi-usuário", complexity: "Alta", priority: "Baixa", impact: "Baixo" },
  ];

  const technicalDebt = {
    high: [
      { name: "Error boundaries", description: "Implementar em todas as páginas", impact: "Estabilidade", effort: "Baixo" },
      { name: "Loading states", description: "Padronizar em todas as operações", impact: "UX", effort: "Médio" },
      { name: "Testes E2E", description: "Adicionar testes com Playwright", impact: "Qualidade", effort: "Alto" },
    ],
    medium: [
      { name: "Code splitting", description: "Otimizar bundle com lazy loading", impact: "Performance", effort: "Médio" },
      { name: "API rate limiting", description: "Implementar no frontend", impact: "Custo", effort: "Médio" },
      { name: "Retry logic", description: "Melhorar para falhas de API", impact: "Resiliência", effort: "Médio" },
    ],
    low: [
      { name: "CSS cleanup", description: "Remover estilos não utilizados", impact: "Manutenção", effort: "Baixo" },
      { name: "Type coverage", description: "Aumentar coverage de tipos", impact: "DX", effort: "Médio" },
      { name: "Documentation", description: "Documentar funções complexas", impact: "Manutenção", effort: "Médio" },
    ],
  };

  const risks = {
    technical: [
      { risk: "API rate limits", probability: "Média", impact: "Alto", mitigation: "Cache, retry, fallbacks" },
      { risk: "Custo de APIs", probability: "Alta", impact: "Médio", mitigation: "Monitoramento, alertas" },
      { risk: "Mudanças em APIs externas", probability: "Média", impact: "Alto", mitigation: "Versionamento, abstrações" },
      { risk: "Performance em mobile", probability: "Baixa", impact: "Médio", mitigation: "Testing, otimização" },
    ],
    business: [
      { risk: "Políticas YouTube", probability: "Média", impact: "Crítico", mitigation: "Compliance, guidelines" },
      { risk: "Competição", probability: "Alta", impact: "Médio", mitigation: "Inovação, UX" },
      { risk: "Dependência de IAs", probability: "Média", impact: "Alto", mitigation: "Multi-provider" },
    ],
  };

  const getPriorityColor = (priority: string) => {
    switch (priority.toLowerCase()) {
      case "crítica":
        return "bg-red-500/20 text-red-400";
      case "alta":
        return "bg-orange-500/20 text-orange-400";
      case "média":
        return "bg-yellow-500/20 text-yellow-400";
      case "baixa":
        return "bg-green-500/20 text-green-400";
      default:
        return "bg-zinc-500/20 text-zinc-400";
    }
  };

  const getImpactColor = (impact: string) => {
    switch (impact.toLowerCase()) {
      case "crítico":
        return "bg-red-500/20 text-red-400";
      case "alto":
        return "bg-purple-500/20 text-purple-400";
      case "médio":
        return "bg-blue-500/20 text-blue-400";
      case "baixo":
        return "bg-zinc-500/20 text-zinc-400";
      default:
        return "bg-zinc-500/20 text-zinc-400";
    }
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-900/50 via-pink-900/50 to-rose-900/50 border border-rose-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-rose-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-rose-500/20 rounded-xl">
              <Compass className="w-8 h-8 text-rose-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Status Geral do Projeto
              </h2>
              <p className="text-rose-300">Estado atual e roadmap</p>
            </div>
          </div>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
            {[
              { label: "Versão", value: "1.0.0", icon: Target },
              { label: "Status", value: "Em Produção", icon: CheckCircle2 },
              { label: "Última Atualização", value: "Janeiro 2025", icon: Calendar },
              { label: "Uptime", value: "99.9%", icon: Gauge },
            ].map((stat, i) => (
              <div
                key={i}
                className="bg-zinc-900/50 rounded-lg p-4 border border-zinc-800"
              >
                <stat.icon className="w-5 h-5 text-rose-400 mb-2" />
                <p className="text-xs text-zinc-500">{stat.label}</p>
                <p className="text-lg font-bold text-white">{stat.value}</p>
              </div>
            ))}
          </div>

          <div className="mt-4">
            <p className="text-sm text-zinc-400">
              URL de Produção:{" "}
              <a
                href="https://emergecy-youtube.vercel.app"
                target="_blank"
                rel="noopener noreferrer"
                className="text-rose-400 hover:text-rose-300 underline"
              >
                https://emergecy-youtube.vercel.app
              </a>
            </p>
          </div>
        </div>
      </section>

      {/* Completed Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <CheckCircle2 className="w-6 h-6 text-green-400" />
          Funcionalidades Concluídas
        </h3>

        <div className="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden">
          <div className="bg-green-500/10 border-b border-zinc-800 px-4 py-3 flex items-center justify-between">
            <span className="font-medium text-green-400">Core Features</span>
            <span className="text-sm text-zinc-400">
              {completedFeatures.length} funcionalidades
            </span>
          </div>
          <div className="p-4 max-h-96 overflow-y-auto">
            <table className="w-full text-sm">
              <thead>
                <tr className="text-zinc-500 text-xs uppercase">
                  <th className="text-left pb-3">Funcionalidade</th>
                  <th className="text-left pb-3">Prioridade</th>
                  <th className="text-left pb-3">Impacto</th>
                  <th className="text-left pb-3">Status</th>
                </tr>
              </thead>
              <tbody>
                {completedFeatures.map((feature, i) => (
                  <tr key={i} className="border-t border-zinc-800">
                    <td className="py-3 text-white">{feature.name}</td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                        {feature.priority}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                        {feature.impact}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className="flex items-center gap-1 text-green-400">
                        <CheckCircle2 className="w-4 h-4" />
                        Concluído
                      </span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </section>

      {/* Partial Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Clock className="w-6 h-6 text-yellow-400" />
          Funcionalidades Parciais
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {partialFeatures.map((feature, i) => (
            <div
              key={i}
              className="bg-zinc-900 border border-zinc-800 rounded-xl p-5"
            >
              <div className="flex items-center justify-between mb-3">
                <h4 className="font-semibold text-white">{feature.name}</h4>
                <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                  {feature.priority}
                </span>
              </div>

              <div className="mb-3">
                <div className="flex items-center justify-between text-sm mb-1">
                  <span className="text-zinc-400">Progresso</span>
                  <span className="text-white font-medium">{feature.progress}%</span>
                </div>
                <div className="w-full h-2 bg-zinc-800 rounded-full overflow-hidden">
                  <div
                    className="h-full bg-gradient-to-r from-yellow-500 to-amber-500 rounded-full"
                    style={{ width: `${feature.progress}%` }}
                  />
                </div>
              </div>

              <div className="flex items-center gap-2 text-sm">
                <AlertTriangle className="w-4 h-4 text-yellow-400" />
                <span className="text-zinc-400">Bloqueio:</span>
                <span className="text-yellow-400">{feature.blocker}</span>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Not Started Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <XCircle className="w-6 h-6 text-zinc-400" />
          Funcionalidades Não Iniciadas
        </h3>

        <div className="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden">
          <table className="w-full text-sm">
            <thead className="bg-zinc-800/50">
              <tr className="text-zinc-500 text-xs uppercase">
                <th className="text-left p-4">Funcionalidade</th>
                <th className="text-left p-4">Complexidade</th>
                <th className="text-left p-4">Prioridade</th>
                <th className="text-left p-4">Impacto</th>
              </tr>
            </thead>
            <tbody>
              {notStartedFeatures.map((feature, i) => (
                <tr key={i} className="border-t border-zinc-800 hover:bg-zinc-800/30">
                  <td className="p-4 text-zinc-300">{feature.name}</td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${
                      feature.complexity === "Alta" ? "bg-red-500/20 text-red-400" :
                      feature.complexity === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                      "bg-green-500/20 text-green-400"
                    }`}>
                      {feature.complexity}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                      {feature.priority}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                      {feature.impact}
                    </span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </section>

      {/* Technical Debt */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <AlertTriangle className="w-6 h-6 text-amber-400" />
          Dívidas Técnicas
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* High Priority */}
          <div className="bg-red-500/5 border border-red-500/20 rounded-xl overflow-hidden">
            <div className="bg-red-500/10 px-4 py-3 border-b border-red-500/20">
              <h4 className="font-semibold text-red-400">Alta Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.high.map((item, i) => (
                <div key={i} className="p-3 bg-zinc-900/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-zinc-400 mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-zinc-800 rounded text-xs text-zinc-400">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-zinc-800 rounded text-xs text-zinc-400">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Medium Priority */}
          <div className="bg-yellow-500/5 border border-yellow-500/20 rounded-xl overflow-hidden">
            <div className="bg-yellow-500/10 px-4 py-3 border-b border-yellow-500/20">
              <h4 className="font-semibold text-yellow-400">Média Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.medium.map((item, i) => (
                <div key={i} className="p-3 bg-zinc-900/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-zinc-400 mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-zinc-800 rounded text-xs text-zinc-400">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-zinc-800 rounded text-xs text-zinc-400">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Low Priority */}
          <div className="bg-green-500/5 border border-green-500/20 rounded-xl overflow-hidden">
            <div className="bg-green-500/10 px-4 py-3 border-b border-green-500/20">
              <h4 className="font-semibold text-green-400">Baixa Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.low.map((item, i) => (
                <div key={i} className="p-3 bg-zinc-900/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-zinc-400 mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-zinc-800 rounded text-xs text-zinc-400">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-zinc-800 rounded text-xs text-zinc-400">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Risks */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Riscos Conhecidos
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Technical Risks */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden">
            <div className="bg-violet-500/10 px-4 py-3 border-b border-zinc-800">
              <h4 className="font-semibold text-violet-400">Riscos Técnicos</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.technical.map((item, i) => (
                <div key={i} className="p-3 bg-zinc-800/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-zinc-400">
                    <span className="text-zinc-500">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Business Risks */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden">
            <div className="bg-rose-500/10 px-4 py-3 border-b border-zinc-800">
              <h4 className="font-semibold text-rose-400">Riscos de Negócio</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.business.map((item, i) => (
                <div key={i} className="p-3 bg-zinc-800/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-zinc-400">
                    <span className="text-zinc-500">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Future Evolution */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <TrendingUp className="w-6 h-6 text-cyan-400" />
          Sugestões de Evolução Futura
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Short Term */}
          <div className="bg-gradient-to-b from-cyan-900/30 to-zinc-900 border border-cyan-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-cyan-500/20 rounded-lg flex items-center justify-center">
                <Zap className="w-4 h-4 text-cyan-400" />
              </div>
              <div>
                <h4 className="font-semibold text-cyan-400">Curto Prazo</h4>
                <p className="text-xs text-zinc-500">1-3 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                { name: "Completar Upload YouTube", priority: "Crítica" },
                { name: "Implementar Render Local", priority: "Alta" },
                { name: "Adicionar Testes", priority: "Alta" },
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-cyan-400 mt-0.5" />
                  <div>
                    <p className="text-sm text-white">{item.name}</p>
                    <span className={`text-xs ${getPriorityColor(item.priority)}`}>
                      {item.priority}
                    </span>
                  </div>
                </li>
              ))}
            </ul>
          </div>

          {/* Medium Term */}
          <div className="bg-gradient-to-b from-purple-900/30 to-zinc-900 border border-purple-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center">
                <Target className="w-4 h-4 text-purple-400" />
              </div>
              <div>
                <h4 className="font-semibold text-purple-400">Médio Prazo</h4>
                <p className="text-xs text-zinc-500">3-6 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "Templates de Vídeo",
                "Histórico e Analytics",
                "Melhorias de UX",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-purple-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>

          {/* Long Term */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center">
                <TrendingUp className="w-4 h-4 text-amber-400" />
              </div>
              <div>
                <h4 className="font-semibold text-amber-400">Longo Prazo</h4>
                <p className="text-xs text-zinc-500">6-12 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "API Pública",
                "Marketplace de Assets",
                "Versão Enterprise",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-amber-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Conclusion */}
      <section className="bg-gradient-to-r from-indigo-900/30 via-purple-900/30 to-pink-900/30 border border-purple-500/20 rounded-xl p-6">
        <h3 className="text-xl font-bold text-white mb-4">Conclusão</h3>
        <p className="text-zinc-300 mb-4">
          O Emergency YouTube está em estágio de{" "}
          <span className="text-green-400 font-semibold">produção funcional</span> com
          as principais features de geração de conteúdo operacionais. Os próximos
          passos críticos são:
        </p>
        <ol className="space-y-2 text-zinc-300">
          {[
            "Completar a integração de upload YouTube",
            "Implementar render de vídeo completo",
            "Adicionar cobertura de testes",
            "Resolver dívidas técnicas de alta prioridade",
          ].map((item, i) => (
            <li key={i} className="flex items-center gap-3">
              <span className="w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-400 text-sm font-bold">
                {i + 1}
              </span>
              {item}
            </li>
          ))}
        </ol>
        <p className="text-zinc-400 mt-4 text-sm">
          O sistema está preparado para escalar e evoluir conforme as necessidades
          dos usuários.
        </p>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-rose-900/20 border border-rose-500/20 rounded-xl">
        <p className="text-sm text-rose-300 italic text-center">
          Este documento reflete o estado atual do Emergency YouTube e serve como
          roadmap para decisões de desenvolvimento futuro.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/GenesisTab.tsx`

```
"use client";

import {
  Lightbulb,
  Target,
  Code2,
  CheckCircle2,
  XCircle,
  Puzzle,
  Layers,
  Eye,
  Shield,
  FileText,
  Zap,
  Brain,
  Users,
  Clock,
  DollarSign,
} from "lucide-react";

export default function GenesisTab() {
  return (
    <div className="space-y-12">
      {/* Hero Section */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-900/50 via-indigo-900/50 to-purple-900/50 border border-purple-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-purple-500/20 rounded-xl">
              <Lightbulb className="w-8 h-8 text-purple-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Por Que Este Sistema Foi Criado
              </h2>
              <p className="text-purple-300">A origem e propósito fundamental</p>
            </div>
          </div>
          <p className="text-lg text-zinc-300 leading-relaxed max-w-3xl">
            O <strong className="text-white">Emergency YouTube</strong> nasceu de uma necessidade
            real e urgente: <span className="text-purple-400 font-semibold">democratizar a produção
            de vídeos profissionais para YouTube</span>, eliminando as barreiras técnicas, financeiras
            e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.
          </p>
        </div>
      </section>

      {/* The Problem */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Target className="w-6 h-6 text-red-400" />
          O Problema Fundamental
        </h3>
        <p className="text-zinc-400 mb-6">
          Criar vídeos de qualidade para YouTube tradicionalmente exige:
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {[
            {
              icon: Code2,
              title: "Habilidades Técnicas",
              description: "Edição de vídeo, design gráfico e produção de áudio",
              color: "text-red-400",
              bg: "bg-red-500/10",
              border: "border-red-500/20",
            },
            {
              icon: DollarSign,
              title: "Investimento",
              description: "Equipamentos, software e possivelmente equipe",
              color: "text-orange-400",
              bg: "bg-orange-500/10",
              border: "border-orange-500/20",
            },
            {
              icon: Clock,
              title: "Tempo Extensivo",
              description: "Um vídeo de 10 min pode levar 8-20 horas de produção",
              color: "text-yellow-400",
              bg: "bg-yellow-500/10",
              border: "border-yellow-500/20",
            },
            {
              icon: Brain,
              title: "Conhecimento SEO",
              description: "Otimização e descoberta do conteúdo",
              color: "text-amber-400",
              bg: "bg-amber-500/10",
              border: "border-amber-500/20",
            },
          ].map((item, index) => (
            <div
              key={index}
              className={`${item.bg} ${item.border} border rounded-xl p-5`}
            >
              <item.icon className={`w-8 h-8 ${item.color} mb-3`} />
              <h4 className="font-semibold text-white mb-2">{item.title}</h4>
              <p className="text-sm text-zinc-400">{item.description}</p>
            </div>
          ))}
        </div>
        <div className="mt-6 p-4 bg-zinc-800/50 rounded-xl border border-zinc-700">
          <p className="text-zinc-300 italic">
            Essa barreira exclui milhões de potenciais criadores que têm conhecimento
            valioso mas não os recursos para transformá-lo em conteúdo visual.
          </p>
        </div>
      </section>

      {/* The Solution */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Zap className="w-6 h-6 text-green-400" />
          A Solução Proposta
        </h3>
        <div className="bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/20 rounded-xl p-6">
          <p className="text-zinc-300 mb-6">
            O Emergency YouTube é um <strong className="text-green-400">sistema de automação inteligente</strong> que:
          </p>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              { num: "1", text: "Recebe apenas o tema/tópico do vídeo" },
              { num: "2", text: "Pesquisa e estrutura o conteúdo automaticamente" },
              { num: "3", text: "Gera roteiro, trilha sonora, thumbnail e descrição" },
              { num: "4", text: "Cria o storyboard com seleção de mídias" },
              { num: "5", text: "Renderiza o vídeo final" },
              { num: "6", text: "Publica diretamente no YouTube" },
            ].map((step, index) => (
              <div
                key={index}
                className="flex items-start gap-3 p-3 bg-zinc-900/50 rounded-lg"
              >
                <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
                  <span className="text-white font-bold text-sm">{step.num}</span>
                </div>
                <p className="text-zinc-300 text-sm">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Design Guidelines */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <FileText className="w-6 h-6 text-blue-400" />
          Diretrizes de Design (Prompts Fundacionais)
        </h3>
        <div className="space-y-4">
          {[
            {
              title: "Automação Máxima, Controle Humano",
              points: [
                "O sistema automatiza tarefas repetitivas e técnicas",
                "O humano mantém controle sobre decisões criativas e editoriais",
                "Cada etapa pode ser revisada e modificada antes de avançar",
              ],
              icon: Users,
              color: "indigo",
            },
            {
              title: "Qualidade de Produção Profissional",
              points: [
                "Outputs devem ser indistinguíveis de produções manuais",
                "Padrões de YouTube Creator Academy são referência",
                "SEO e engagement são prioridades arquiteturais",
              ],
              icon: Target,
              color: "purple",
            },
            {
              title: "Interface Intuitiva",
              points: [
                "Zero curva de aprendizado para operações básicas",
                "Interface guiada por workflow linear",
                "Feedback visual claro em cada etapa",
              ],
              icon: Eye,
              color: "cyan",
            },
            {
              title: "Escalabilidade",
              points: [
                "Suportar múltiplos vídeos em paralelo",
                "Funcionar com diferentes nichos de conteúdo",
                "Permitir personalização de diretrizes por projeto",
              ],
              icon: Layers,
              color: "green",
            },
          ].map((guideline, index) => (
            <div
              key={index}
              className={`bg-${guideline.color}-500/5 border border-${guideline.color}-500/20 rounded-xl p-5`}
              style={{
                backgroundColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.05)`,
                borderColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.2)`,
              }}
            >
              <div className="flex items-center gap-3 mb-3">
                <guideline.icon className={`w-6 h-6 text-${guideline.color}-400`} />
                <h4 className="font-semibold text-white">{guideline.title}</h4>
              </div>
              <ul className="space-y-2">
                {guideline.points.map((point, i) => (
                  <li key={i} className="flex items-start gap-2 text-zinc-300 text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                    {point}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Architectural Decisions */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Puzzle className="w-6 h-6 text-amber-400" />
          Decisões Arquiteturais Derivadas
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-zinc-700 to-zinc-800 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">N</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Next.js 15?</h4>
            <ul className="text-sm text-zinc-400 space-y-1">
              <li>App Router para roteamento moderno</li>
              <li>Server Components para performance</li>
              <li>API Routes para backend integrado</li>
              <li>Vercel como deploy nativo</li>
            </ul>
          </div>
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-amber-600 to-yellow-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">Z</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Zustand?</h4>
            <ul className="text-sm text-zinc-400 space-y-1">
              <li>Simplicidade sobre complexidade</li>
              <li>Persistência nativa com localStorage</li>
              <li>TypeScript first</li>
              <li>Minimal boilerplate</li>
            </ul>
          </div>
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">6</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que 6 Etapas?</h4>
            <ul className="text-sm text-zinc-400 space-y-1">
              <li>Espelha produção real de vídeo</li>
              <li>Validação humana em cada transição</li>
              <li>Rollback para etapas anteriores</li>
              <li>Clareza sobre status atual</li>
            </ul>
          </div>
        </div>
      </section>

      {/* What the system does/doesn't do */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Layers className="w-6 h-6 text-cyan-400" />
          Elementos Intencionais
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="bg-green-900/20 border border-green-500/20 rounded-xl p-5">
            <h4 className="font-bold text-green-400 mb-4 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              O que o sistema FAZ:
            </h4>
            <ul className="space-y-3">
              {[
                "Pesquisa profunda sobre qualquer tema",
                "Geração de roteiros otimizados para engagement",
                "Seleção automática de mídia relevante",
                "Composição de vídeo com narração",
                "Upload direto para YouTube",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-zinc-300 text-sm">
                  <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
          <div className="bg-red-900/20 border border-red-500/20 rounded-xl p-5">
            <h4 className="font-bold text-red-400 mb-4 flex items-center gap-2">
              <XCircle className="w-5 h-5" />
              O que o sistema NÃO FAZ (exclusões conscientes):
            </h4>
            <ul className="space-y-3">
              {[
                "Não substitui a voz humana",
                "Não gera conteúdo controverso",
                "Não garante viralização",
                "Não armazena vídeos eternamente",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-zinc-300 text-sm">
                  <XCircle className="w-4 h-4 text-red-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Design Principles */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Princípios de Design
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {[
            {
              num: "1",
              title: "Transparência sobre Magia",
              description:
                "O sistema mostra claramente o que está fazendo em cada etapa, evitando caixas pretas que frustram usuários.",
            },
            {
              num: "2",
              title: "Falhas Graceful",
              description:
                "Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando completamente.",
            },
            {
              num: "3",
              title: "Dados Locais",
              description:
                "Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.",
            },
            {
              num: "4",
              title: "Documentação Viva",
              description:
                "Este próprio módulo é parte do sistema, não um documento externo que envelhece.",
            },
          ].map((principle, index) => (
            <div
              key={index}
              className="bg-zinc-900/50 border border-zinc-800 rounded-xl p-5 flex gap-4"
            >
              <div className="w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                <span className="text-violet-400 font-bold">{principle.num}</span>
              </div>
              <div>
                <h4 className="font-semibold text-white mb-1">{principle.title}</h4>
                <p className="text-sm text-zinc-400">{principle.description}</p>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-purple-900/20 border border-purple-500/20 rounded-xl">
        <p className="text-sm text-purple-300 italic text-center">
          Este documento representa a intenção fundacional do sistema Emergency YouTube,
          servindo como referência para decisões futuras e transferência de contexto entre IAs.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/IntegrationsTab.tsx`

```
"use client";

import {
  Plug,
  AlertCircle,
  ArrowRight,
  Shield,
  Server,
  Database,
  Key,
  RefreshCw,
  Lock,
} from "lucide-react";

// API/Service logos as simple text badges (would be real logos in production)
const ServiceLogo = ({ name, color }: { name: string; color: string }) => (
  <div
    className={`w-12 h-12 rounded-xl bg-gradient-to-br ${color} flex items-center justify-center text-white font-bold text-lg shadow-lg`}
  >
    {name.charAt(0)}
  </div>
);

export default function IntegrationsTab() {
  const integrations = [
    {
      name: "Anthropic Claude",
      logo: "C",
      gradient: "from-amber-500 to-orange-600",
      function: "Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Claude 3.5 Sonnet / Claude 3 Opus",
      use: "Roteiros, análise, estruturação",
      auth: "API Key (ANTHROPIC_API_KEY)",
      endpoints: ["POST /v1/messages"],
    },
    {
      name: "Google Gemini",
      logo: "G",
      gradient: "from-blue-500 to-indigo-600",
      function: "Geração de conteúdo alternativa e pesquisa",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "Gemini 1.5 Pro",
      use: "Backup de geração, análise",
      auth: "API Key (GOOGLE_GENERATIVE_AI_API_KEY)",
      endpoints: [],
    },
    {
      name: "OpenAI",
      logo: "O",
      gradient: "from-green-500 to-emerald-600",
      function: "Geração de imagens e modelos alternativos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "GPT-4o, DALL-E 3",
      use: "Thumbnails, imagens complementares",
      auth: "API Key (OPENAI_API_KEY)",
      endpoints: ["POST /v1/chat/completions", "POST /v1/images/generations"],
    },
    {
      name: "YouTube Data API",
      logo: "Y",
      gradient: "from-red-500 to-red-600",
      function: "Upload de vídeos e gerenciamento de canal",
      criticality: "Crítica",
      criticalityColor: "bg-red-500/20 text-red-400 font-bold",
      model: "v3",
      use: "Upload, metadados, thumbnails",
      auth: "OAuth 2.0",
      endpoints: ["youtube.upload", "youtube.readonly"],
    },
    {
      name: "Pexels",
      logo: "P",
      gradient: "from-teal-500 to-cyan-600",
      function: "Busca de imagens e vídeos stock gratuitos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "REST API",
      use: "B-roll, imagens de cena",
      auth: "API Key (PEXELS_API_KEY)",
      endpoints: ["GET /v1/search", "GET /videos/search"],
    },
    {
      name: "Pixabay",
      logo: "X",
      gradient: "from-lime-500 to-green-600",
      function: "Busca alternativa de mídia stock",
      criticality: "Baixa",
      criticalityColor: "bg-green-500/20 text-green-400",
      model: "REST API",
      use: "Fallback para Pexels",
      auth: "API Key (PIXABAY_API_KEY)",
      endpoints: [],
    },
    {
      name: "ElevenLabs",
      logo: "E",
      gradient: "from-violet-500 to-purple-600",
      function: "Text-to-Speech de alta qualidade",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Multilingual v2",
      use: "Narração do vídeo",
      auth: "API Key (ELEVENLABS_API_KEY)",
      endpoints: ["POST /v1/text-to-speech"],
    },
    {
      name: "Replicate",
      logo: "R",
      gradient: "from-pink-500 to-rose-600",
      function: "Geração de imagens via modelos open-source",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "Flux, SDXL",
      use: "Thumbnails, arte conceitual",
      auth: "API Token (REPLICATE_API_TOKEN)",
      endpoints: ["POST /v1/predictions"],
    },
  ];

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-green-900/50 via-emerald-900/50 to-green-900/50 border border-green-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-green-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-green-500/20 rounded-xl">
              <Plug className="w-8 h-8 text-green-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral das Integrações
              </h2>
              <p className="text-green-300">Arquitetura de conexões externas</p>
            </div>
          </div>
          <p className="text-lg text-zinc-300 leading-relaxed max-w-3xl">
            O Emergency YouTube integra-se com{" "}
            <span className="text-green-400 font-semibold">múltiplos serviços externos</span>{" "}
            para fornecer suas funcionalidades. Cada integração tem um propósito
            específico e nível de criticidade definido.
          </p>
        </div>
      </section>

      {/* Integration Cards */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Server className="w-6 h-6 text-emerald-400" />
          APIs e Serviços Integrados
        </h3>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {integrations.map((api, index) => (
            <div
              key={index}
              className="bg-zinc-900 border border-zinc-800 rounded-xl p-6 hover:border-zinc-700 transition-colors"
            >
              <div className="flex items-start gap-4 mb-4">
                <ServiceLogo name={api.name} color={api.gradient} />
                <div className="flex-1">
                  <div className="flex items-center gap-2 mb-1">
                    <h4 className="font-bold text-white">{api.name}</h4>
                    <span className={`px-2 py-0.5 rounded text-xs ${api.criticalityColor}`}>
                      {api.criticality}
                    </span>
                  </div>
                  <p className="text-sm text-zinc-400">{api.function}</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <p className="text-xs text-zinc-500 uppercase mb-1">Modelo/Versão</p>
                  <p className="text-zinc-300">{api.model}</p>
                </div>
                <div>
                  <p className="text-xs text-zinc-500 uppercase mb-1">Uso Principal</p>
                  <p className="text-zinc-300">{api.use}</p>
                </div>
              </div>

              <div className="mt-4 pt-4 border-t border-zinc-800">
                <div className="flex items-center gap-2 text-xs text-zinc-500">
                  <Key className="w-3 h-3" />
                  <span>{api.auth}</span>
                </div>
                {api.endpoints.length > 0 && (
                  <div className="flex flex-wrap gap-1 mt-2">
                    {api.endpoints.map((endpoint, i) => (
                      <code
                        key={i}
                        className="px-2 py-1 bg-zinc-800 rounded text-xs text-zinc-400 font-mono"
                      >
                        {endpoint}
                      </code>
                    ))}
                  </div>
                )}
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Connection Diagram */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Plug className="w-6 h-6 text-cyan-400" />
          Diagrama de Conexões
        </h3>

        <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-8">
          <div className="text-center mb-8">
            <div className="inline-block bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl px-8 py-4">
              <p className="text-white font-bold text-lg">EMERGENCY YOUTUBE</p>
              <p className="text-white/70 text-sm">Next.js App</p>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {/* IA Providers */}
            <div className="bg-amber-500/5 border border-amber-500/20 rounded-xl p-5">
              <h4 className="font-bold text-amber-400 mb-4 text-center">IA PROVIDERS</h4>
              <div className="space-y-3">
                {[
                  { name: "Anthropic Claude", color: "from-amber-500 to-orange-600" },
                  { name: "Google Gemini", color: "from-blue-500 to-indigo-600" },
                  { name: "OpenAI GPT-4", color: "from-green-500 to-emerald-600" },
                  { name: "Replicate", color: "from-pink-500 to-rose-600" },
                ].map((provider, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${provider.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {provider.name.charAt(0)}
                    </div>
                    <span className="text-sm text-zinc-300">{provider.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Media Services */}
            <div className="bg-cyan-500/5 border border-cyan-500/20 rounded-xl p-5">
              <h4 className="font-bold text-cyan-400 mb-4 text-center">MEDIA SERVICES</h4>
              <div className="space-y-3">
                {[
                  { name: "Pexels Images", color: "from-teal-500 to-cyan-600" },
                  { name: "Pixabay Videos", color: "from-lime-500 to-green-600" },
                  { name: "ElevenLabs TTS", color: "from-violet-500 to-purple-600" },
                  { name: "Replicate Video", color: "from-pink-500 to-rose-600" },
                ].map((service, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${service.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {service.name.charAt(0)}
                    </div>
                    <span className="text-sm text-zinc-300">{service.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Video Platform */}
            <div className="bg-red-500/5 border border-red-500/20 rounded-xl p-5">
              <h4 className="font-bold text-red-400 mb-4 text-center">VIDEO PLATFORM</h4>
              <div className="flex flex-col items-center justify-center h-[calc(100%-2rem)]">
                <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white text-2xl font-bold mb-3">
                  Y
                </div>
                <span className="text-zinc-300 font-medium">YouTube Data API</span>
                <span className="text-xs text-zinc-500 mt-1">v3</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Data Flow */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <ArrowRight className="w-6 h-6 text-blue-400" />
          Fluxo Real de Dados
        </h3>

        <div className="space-y-6">
          {/* Script Generation Flow */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">1. Geração de Roteiro</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Usuário", sub: "Input (tema)" },
                { label: "API", sub: "/proposal/script" },
                { label: "Anthropic", sub: "Claude API" },
                { label: "Roteiro", sub: "Estruturado" },
                { label: "Frontend", sub: "UI" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-zinc-800 border border-zinc-700 rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-zinc-500 text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-zinc-600 flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* Thumbnail Generation Flow */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">2. Geração de Thumbnail</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Roteiro", sub: "Contexto" },
                { label: "API", sub: "/images/generate" },
                { label: "Replicate", sub: "ou DALL-E" },
                { label: "Imagem", sub: "Base64" },
                { label: "Frontend", sub: "Preview" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-zinc-800 border border-zinc-700 rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-zinc-500 text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-zinc-600 flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* YouTube Upload Flow */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">3. Upload para YouTube</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Vídeo", sub: "Renderizado" },
                { label: "API", sub: "/youtube/upload" },
                { label: "OAuth 2.0", sub: "Auth" },
                { label: "YouTube", sub: "Data API" },
                { label: "Publicado", sub: "URL" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-zinc-800 border border-zinc-700 rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-zinc-500 text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-zinc-600 flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Security */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Observações de Autenticação e Segurança
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Credential Storage */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <Database className="w-5 h-5 text-amber-400" />
              Armazenamento de Credenciais
            </h4>
            <div className="space-y-3">
              {[
                { type: "API Keys (Sistema)", local: "Variáveis de ambiente (Vercel)", security: "Não expostas ao cliente" },
                { type: "API Keys (Usuário)", local: "localStorage (browser)", security: "Criptografadas localmente" },
                { type: "OAuth Tokens", local: "Cookie httpOnly", security: "Sessão segura" },
              ].map((item, i) => (
                <div key={i} className="p-3 bg-zinc-800/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.type}</p>
                  <p className="text-xs text-zinc-400">{item.local}</p>
                  <p className="text-xs text-green-400 mt-1 flex items-center gap-1">
                    <Lock className="w-3 h-3" />
                    {item.security}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Fallback & Redundancy */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <RefreshCw className="w-5 h-5 text-cyan-400" />
              Fallback e Redundância
            </h4>
            <div className="space-y-4">
              {[
                {
                  primary: "Anthropic",
                  fallback: "Google Gemini",
                  icon: AlertCircle,
                },
                {
                  primary: "Pexels",
                  fallback: "Pixabay",
                  icon: AlertCircle,
                },
                {
                  primary: "ElevenLabs",
                  fallback: "TTS alternativo",
                  icon: AlertCircle,
                },
              ].map((item, i) => (
                <div key={i} className="flex items-center gap-3">
                  <div className="flex-1 p-2 bg-zinc-800 rounded text-center">
                    <p className="text-sm text-white">{item.primary}</p>
                  </div>
                  <item.icon className="w-4 h-4 text-yellow-400" />
                  <div className="flex-1 p-2 bg-zinc-800/50 rounded text-center border border-dashed border-zinc-700">
                    <p className="text-sm text-zinc-400">{item.fallback}</p>
                  </div>
                </div>
              ))}
            </div>
            <p className="text-xs text-zinc-500 mt-4">
              Se o serviço primário falhar, o sistema tenta automaticamente o fallback.
            </p>
          </div>
        </div>
      </section>

      {/* OAuth Flow */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Key className="w-6 h-6 text-red-400" />
          Fluxo OAuth (YouTube)
        </h3>

        <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
          <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
            {[
              { num: "1", text: "Usuário clica em Conectar YouTube" },
              { num: "2", text: "Redirect para Google OAuth" },
              { num: "3", text: "Usuário autoriza escopos" },
              { num: "4", text: "Callback com código" },
              { num: "5", text: "Tokens armazenados" },
            ].map((step, i) => (
              <div key={i} className="text-center">
                <div className="w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-2">
                  <span className="text-red-400 font-bold">{step.num}</span>
                </div>
                <p className="text-xs text-zinc-400">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-green-900/20 border border-green-500/20 rounded-xl">
        <p className="text-sm text-green-300 italic text-center">
          Este documento detalha todas as integrações do Emergency YouTube, seus fluxos de dados
          e considerações de segurança.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/SystemVisionTab.tsx`

```
"use client";

import {
  Play,
  Search,
  FileText,
  Film,
  Clapperboard,
  Upload,
  Users,
  Bot,
  ArrowRight,
  CheckCircle2,
  Monitor,
  Server,
  Database,
  Briefcase,
  GraduationCap,
  Building,
} from "lucide-react";

export default function SystemVisionTab() {
  const workflowSteps = [
    {
      num: 1,
      title: "Input",
      subtitle: "Entrada de Dados",
      icon: Play,
      color: "indigo",
      inputs: ["Tema principal", "Configurações de formato", "Público-alvo", "Diretrizes"],
      outputs: ["Objeto de contexto", "Parâmetros validados"],
    },
    {
      num: 2,
      title: "Research",
      subtitle: "Pesquisa",
      icon: Search,
      color: "blue",
      inputs: ["Contexto estruturado"],
      outputs: ["Dados de pesquisa", "Referências", "Sugestões"],
    },
    {
      num: 3,
      title: "Proposal",
      subtitle: "Proposta Criativa",
      icon: FileText,
      color: "purple",
      inputs: ["Pesquisa consolidada"],
      outputs: ["Roteiro", "Títulos", "Descrição", "Tags"],
    },
    {
      num: 4,
      title: "Studio",
      subtitle: "Produção Visual",
      icon: Film,
      color: "pink",
      inputs: ["Roteiro aprovado"],
      outputs: ["Storyboard", "Mídias selecionadas"],
    },
    {
      num: 5,
      title: "Render",
      subtitle: "Composição",
      icon: Clapperboard,
      color: "orange",
      inputs: ["Storyboard completo"],
      outputs: ["Vídeo renderizado", "Preview"],
    },
    {
      num: 6,
      title: "Upload",
      subtitle: "Publicação",
      icon: Upload,
      color: "green",
      inputs: ["Vídeo final"],
      outputs: ["URL do vídeo", "Estatísticas"],
    },
  ];

  const colorMap: Record<string, { bg: string; border: string; text: string; gradient: string }> = {
    indigo: { bg: "bg-indigo-500/10", border: "border-indigo-500/30", text: "text-indigo-400", gradient: "from-indigo-500 to-indigo-600" },
    blue: { bg: "bg-blue-500/10", border: "border-blue-500/30", text: "text-blue-400", gradient: "from-blue-500 to-blue-600" },
    purple: { bg: "bg-purple-500/10", border: "border-purple-500/30", text: "text-purple-400", gradient: "from-purple-500 to-purple-600" },
    pink: { bg: "bg-pink-500/10", border: "border-pink-500/30", text: "text-pink-400", gradient: "from-pink-500 to-pink-600" },
    orange: { bg: "bg-orange-500/10", border: "border-orange-500/30", text: "text-orange-400", gradient: "from-orange-500 to-orange-600" },
    green: { bg: "bg-green-500/10", border: "border-green-500/30", text: "text-green-400", gradient: "from-green-500 to-green-600" },
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-900/50 via-cyan-900/50 to-blue-900/50 border border-blue-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <h2 className="text-2xl font-bold text-white mb-4">O Que o Sistema Faz</h2>
          <p className="text-lg text-zinc-300 leading-relaxed max-w-3xl">
            O <strong className="text-white">Emergency YouTube</strong> é uma plataforma de automação
            de produção de vídeos que transforma um simples tema em um{" "}
            <span className="text-cyan-400 font-semibold">
              vídeo completo publicado no YouTube
            </span>
            . O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.
          </p>
        </div>
      </section>

      {/* Target Audience */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Users className="w-6 h-6 text-cyan-400" />
          Para Quem Foi Projetado
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {[
            {
              icon: Briefcase,
              title: "Criadores de Conteúdo Solo",
              items: ["Empreendedores digitais", "Educadores e professores", "Profissionais liberais"],
              color: "cyan",
            },
            {
              icon: Building,
              title: "Pequenas Empresas",
              items: ["Marketing digital interno", "Comunicação institucional", "Treinamento corporativo"],
              color: "blue",
            },
            {
              icon: GraduationCap,
              title: "Agências e Produtoras",
              items: ["Produção em escala", "Prototipagem rápida", "Testes de conceito"],
              color: "indigo",
            },
          ].map((profile, index) => (
            <div
              key={index}
              className="bg-zinc-900 border border-zinc-800 rounded-xl p-6"
            >
              <profile.icon className={`w-10 h-10 text-${profile.color}-400 mb-4`} />
              <h4 className="font-bold text-white mb-3">{profile.title}</h4>
              <ul className="space-y-2">
                {profile.items.map((item, i) => (
                  <li key={i} className="flex items-center gap-2 text-zinc-400 text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400" />
                    {item}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Workflow Steps */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Play className="w-6 h-6 text-green-400" />
          Fluxo Principal de Funcionamento
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {workflowSteps.map((step) => {
            const colors = colorMap[step.color];
            return (
              <div
                key={step.num}
                className={`${colors.bg} ${colors.border} border rounded-xl p-5 relative overflow-hidden`}
              >
                <div className="absolute top-0 right-0 text-6xl font-bold text-white/5">
                  {step.num}
                </div>
                <div className="relative">
                  <div className="flex items-center gap-3 mb-4">
                    <div className={`w-12 h-12 bg-gradient-to-br ${colors.gradient} rounded-xl flex items-center justify-center`}>
                      <step.icon className="w-6 h-6 text-white" />
                    </div>
                    <div>
                      <h4 className="font-bold text-white">{step.title}</h4>
                      <p className={`text-sm ${colors.text}`}>{step.subtitle}</p>
                    </div>
                  </div>

                  <div className="space-y-3">
                    <div>
                      <p className="text-xs font-medium text-zinc-500 uppercase mb-2">Entradas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.inputs.map((input, i) => (
                          <span key={i} className="px-2 py-1 bg-zinc-800 rounded text-xs text-zinc-300">
                            {input}
                          </span>
                        ))}
                      </div>
                    </div>
                    <div>
                      <p className="text-xs font-medium text-zinc-500 uppercase mb-2">Saídas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.outputs.map((output, i) => (
                          <span key={i} className={`px-2 py-1 ${colors.bg} rounded text-xs ${colors.text}`}>
                            {output}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </section>

      {/* Human vs Automation */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Users className="w-6 h-6 text-purple-400" />
          Interação entre Automação e Decisão Humana
        </h3>

        <div className="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden">
          <div className="grid grid-cols-3 gap-0 border-b border-zinc-800 bg-zinc-800/50">
            <div className="p-4 font-semibold text-white">Etapa</div>
            <div className="p-4 font-semibold text-purple-400 flex items-center gap-2">
              <Users className="w-4 h-4" /> Decisão Humana
            </div>
            <div className="p-4 font-semibold text-cyan-400 flex items-center gap-2">
              <Bot className="w-4 h-4" /> Automação
            </div>
          </div>
          {[
            { step: "Input", human: "Define tema e parâmetros", auto: "Valida e estrutura" },
            { step: "Research", human: "Aprova abordagem", auto: "Pesquisa e sintetiza" },
            { step: "Proposal", human: "Revisa e edita roteiro", auto: "Gera todas as versões" },
            { step: "Studio", human: "Ajusta mídias", auto: "Seleciona e compõe" },
            { step: "Render", human: "Aprova preview", auto: "Renderiza vídeo" },
            { step: "Upload", human: "Confirma publicação", auto: "Executa upload" },
          ].map((row, index) => (
            <div
              key={index}
              className="grid grid-cols-3 gap-0 border-b border-zinc-800 last:border-0 hover:bg-zinc-800/30 transition-colors"
            >
              <div className="p-4 text-zinc-300 font-medium">{row.step}</div>
              <div className="p-4 text-zinc-400 text-sm">{row.human}</div>
              <div className="p-4 text-zinc-400 text-sm">{row.auto}</div>
            </div>
          ))}
        </div>

        <div className="mt-6 p-5 bg-purple-900/20 border border-purple-500/20 rounded-xl">
          <h4 className="font-bold text-purple-400 mb-2">Filosofia de Controle</h4>
          <p className="text-xl font-semibold text-white mb-4">&quot;O sistema sugere, o humano decide&quot;</p>
          <ul className="grid grid-cols-1 md:grid-cols-2 gap-3">
            {[
              "Cada etapa gera uma proposta completa",
              "O usuário pode aceitar, modificar ou regenerar",
              "Nenhuma ação destrutiva sem confirmação",
              "Histórico de versões permite rollback",
            ].map((item, i) => (
              <li key={i} className="flex items-center gap-2 text-zinc-300 text-sm">
                <CheckCircle2 className="w-4 h-4 text-green-400" />
                {item}
              </li>
            ))}
          </ul>
        </div>
      </section>

      {/* Architecture Components */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Server className="w-6 h-6 text-orange-400" />
          Componentes Principais e Responsabilidades
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Frontend */}
          <div className="bg-gradient-to-b from-blue-900/30 to-zinc-900 border border-blue-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Monitor className="w-8 h-8 text-blue-400" />
              <div>
                <h4 className="font-bold text-white">Frontend</h4>
                <p className="text-xs text-blue-400">Next.js App Router</p>
              </div>
            </div>
            <p className="text-xs font-medium text-zinc-500 uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-zinc-400">
              <li>Interface de usuário</li>
              <li>Navegação por workflow</li>
              <li>Estado local e persistência</li>
              <li>Comunicação com APIs</li>
            </ul>
            <p className="text-xs font-medium text-zinc-500 uppercase mt-4 mb-2">Tecnologias</p>
            <div className="flex flex-wrap gap-1">
              {["React 19", "Tailwind", "Framer Motion", "Zustand"].map((tech, i) => (
                <span key={i} className="px-2 py-1 bg-blue-500/10 text-blue-400 rounded text-xs">
                  {tech}
                </span>
              ))}
            </div>
          </div>

          {/* Backend */}
          <div className="bg-gradient-to-b from-green-900/30 to-zinc-900 border border-green-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Server className="w-8 h-8 text-green-400" />
              <div>
                <h4 className="font-bold text-white">Backend</h4>
                <p className="text-xs text-green-400">API Routes</p>
              </div>
            </div>
            <p className="text-xs font-medium text-zinc-500 uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-zinc-400">
              <li>Integração com IAs</li>
              <li>Comunicação externa</li>
              <li>Processamento de dados</li>
              <li>Validação e segurança</li>
            </ul>
            <p className="text-xs font-medium text-zinc-500 uppercase mt-4 mb-2">Endpoints</p>
            <div className="flex flex-wrap gap-1">
              {["/api/proposal/*", "/api/images/*", "/api/youtube/*"].map((endpoint, i) => (
                <span key={i} className="px-2 py-1 bg-green-500/10 text-green-400 rounded text-xs font-mono">
                  {endpoint}
                </span>
              ))}
            </div>
          </div>

          {/* State */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Database className="w-8 h-8 text-amber-400" />
              <div>
                <h4 className="font-bold text-white">Estado Global</h4>
                <p className="text-xs text-amber-400">Zustand Stores</p>
              </div>
            </div>
            <p className="text-xs font-medium text-zinc-500 uppercase mb-2">Stores</p>
            <ul className="space-y-2 text-sm text-zinc-400">
              <li><strong className="text-amber-400">WorkflowStore</strong> - Dados e navegação</li>
              <li><strong className="text-amber-400">GuidelinesStore</strong> - Diretrizes</li>
              <li><strong className="text-amber-400">UIStore</strong> - Estado de interface</li>
            </ul>
            <p className="text-xs font-medium text-zinc-500 uppercase mt-4 mb-2">Persistência</p>
            <span className="px-2 py-1 bg-amber-500/10 text-amber-400 rounded text-xs">
              localStorage
            </span>
          </div>
        </div>
      </section>

      {/* Flow Diagram */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <ArrowRight className="w-6 h-6 text-cyan-400" />
          Diagrama de Fluxo Operacional
        </h3>

        <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px]">
            {/* Top Row */}
            <div className="flex items-center justify-center gap-4 mb-6">
              {[
                { name: "INPUT", sub: "Tema", color: "indigo" },
                { name: "RESEARCH", sub: "Pesquisa", color: "blue" },
                { name: "PROPOSAL", sub: "Roteiro", color: "purple" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-zinc-500">{step.sub}</p>
                  </div>
                  {i < 2 && <ArrowRight className="w-6 h-6 text-zinc-600" />}
                </div>
              ))}
            </div>

            {/* Arrow Down */}
            <div className="flex justify-end mr-16 mb-6">
              <div className="w-0.5 h-12 bg-zinc-700" />
            </div>

            {/* Bottom Row */}
            <div className="flex items-center justify-center gap-4 flex-row-reverse">
              {[
                { name: "UPLOAD", sub: "YouTube", color: "green" },
                { name: "RENDER", sub: "Vídeo", color: "orange" },
                { name: "STUDIO", sub: "Storyboard", color: "pink" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  {i < 2 && <ArrowRight className="w-6 h-6 text-zinc-600 rotate-180" />}
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-zinc-500">{step.sub}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-blue-900/20 border border-blue-500/20 rounded-xl">
        <p className="text-sm text-blue-300 italic text-center">
          Este documento descreve a visão sistêmica do Emergency YouTube, detalhando seu
          funcionamento e a interação entre componentes automatizados e decisões humanas.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/TechStackTab.tsx`

```
"use client";

import {
  Layers,
  Code,
  Cpu,
  Cloud,
  Package,
  CheckCircle2,
} from "lucide-react";

// Tech logo component
const TechLogo = ({
  name,
  letter,
  gradient,
}: {
  name: string;
  letter: string;
  gradient: string;
}) => (
  <div className="flex flex-col items-center gap-2">
    <div
      className={`w-14 h-14 rounded-xl bg-gradient-to-br ${gradient} flex items-center justify-center text-white font-bold text-xl shadow-lg`}
    >
      {letter}
    </div>
    <span className="text-xs text-zinc-400">{name}</span>
  </div>
);

export default function TechStackTab() {
  const dependencies = {
    production: [
      { name: "next", version: "15.1.11", function: "Framework" },
      { name: "react", version: "19.0.0", function: "UI Library" },
      { name: "zustand", version: "5.0.3", function: "State Management" },
      { name: "tailwindcss", version: "3.4.17", function: "Styling" },
      { name: "framer-motion", version: "11.15.0", function: "Animations" },
      { name: "lucide-react", version: "0.469.0", function: "Icons" },
      { name: "@ai-sdk/anthropic", version: "latest", function: "Claude AI" },
      { name: "@ai-sdk/google", version: "latest", function: "Gemini AI" },
      { name: "@ai-sdk/openai", version: "latest", function: "GPT AI" },
      { name: "zod", version: "3.24.1", function: "Validation" },
      { name: "clsx", version: "2.1.1", function: "Class merging" },
      { name: "tailwind-merge", version: "2.6.0", function: "Tailwind utilities" },
    ],
    dev: [
      { name: "typescript", version: "5.7.3", function: "Type checking" },
      { name: "eslint", version: "9.x", function: "Linting" },
      { name: "@types/react", version: "19.x", function: "React types" },
      { name: "@types/node", version: "22.x", function: "Node types" },
    ],
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-orange-900/50 via-amber-900/50 to-orange-900/50 border border-orange-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-orange-500/20 rounded-xl">
              <Layers className="w-8 h-8 text-orange-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral da Stack
              </h2>
              <p className="text-orange-300">Tecnologias e arquitetura</p>
            </div>
          </div>
          <p className="text-lg text-zinc-300 leading-relaxed max-w-3xl">
            O Emergency YouTube utiliza uma{" "}
            <span className="text-orange-400 font-semibold">
              stack moderna e otimizada
            </span>{" "}
            para aplicações web de alta performance, com foco em Developer
            Experience (DX) e User Experience (UX).
          </p>
        </div>
      </section>

      {/* Languages */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Code className="w-6 h-6 text-blue-400" />
          Linguagens de Programação
        </h3>

        <div className="bg-gradient-to-r from-blue-900/30 to-indigo-900/30 border border-blue-500/20 rounded-xl p-6">
          <div className="flex items-start gap-6">
            <div className="w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg">
              TS
            </div>
            <div className="flex-1">
              <h4 className="text-xl font-bold text-white mb-2">TypeScript 5.7</h4>
              <p className="text-zinc-400 mb-4">
                100% do código frontend e backend
              </p>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p className="text-xs font-medium text-zinc-500 uppercase mb-2">
                    Características Utilizadas
                  </p>
                  <ul className="space-y-1 text-sm text-zinc-300">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Strict mode habilitado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Path aliases (@/components, @/lib)
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Type inference avançado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Utility types (Partial, Pick, Omit)
                    </li>
                  </ul>
                </div>
                <div>
                  <p className="text-xs font-medium text-zinc-500 uppercase mb-2">
                    Benefícios
                  </p>
                  <ul className="space-y-1 text-sm text-zinc-300">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Detecção de erros em desenvolvimento
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Autocomplete inteligente
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Refatoração segura
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Documentação inline via tipos
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Frameworks */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Package className="w-6 h-6 text-purple-400" />
          Frameworks e Bibliotecas
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {/* Next.js */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-lg border border-zinc-600">
                N
              </div>
              <div>
                <h4 className="font-bold text-white">Next.js 15.1.11</h4>
                <p className="text-xs text-zinc-500">Framework Full-Stack</p>
              </div>
            </div>
            <div className="space-y-2 text-sm">
              {[
                { feature: "App Router", use: "Roteamento e layouts" },
                { feature: "Server Components", use: "Performance e SEO" },
                { feature: "API Routes", use: "Backend integrado" },
                { feature: "Image Optimization", use: "Otimização de mídia" },
              ].map((item, i) => (
                <div key={i} className="flex justify-between text-zinc-400">
                  <span className="text-white">{item.feature}</span>
                  <span>{item.use}</span>
                </div>
              ))}
            </div>
          </div>

          {/* React */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg">
                R
              </div>
              <div>
                <h4 className="font-bold text-white">React 19</h4>
                <p className="text-xs text-zinc-500">UI Library</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-zinc-500 uppercase">Hooks</p>
              <div className="flex flex-wrap gap-1">
                {["useState", "useEffect", "useCallback", "useMemo", "useRef"].map(
                  (hook, i) => (
                    <code
                      key={i}
                      className="px-2 py-1 bg-cyan-500/10 text-cyan-400 rounded text-xs"
                    >
                      {hook}
                    </code>
                  )
                )}
              </div>
              <p className="text-xs font-medium text-zinc-500 uppercase mt-3">
                Patterns
              </p>
              <p className="text-sm text-zinc-400">
                Functional Components, Custom Hooks, Composição
              </p>
            </div>
          </div>

          {/* Tailwind */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center text-white font-bold text-lg">
                T
              </div>
              <div>
                <h4 className="font-bold text-white">Tailwind CSS 3.4.17</h4>
                <p className="text-xs text-zinc-500">Framework CSS</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-zinc-500 uppercase">
                Classes Mais Usadas
              </p>
              <div className="font-mono text-xs space-y-1">
                <div className="text-zinc-400">
                  <span className="text-teal-400">bg-zinc-900</span> → Background
                </div>
                <div className="text-zinc-400">
                  <span className="text-teal-400">text-white</span> → Texto
                </div>
                <div className="text-zinc-400">
                  <span className="text-teal-400">border-zinc-800</span> → Bordas
                </div>
                <div className="text-zinc-400">
                  <span className="text-teal-400">rounded-xl</span> → Cantos
                </div>
              </div>
            </div>
          </div>

          {/* Zustand */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 flex items-center justify-center text-white font-bold text-lg">
                Z
              </div>
              <div>
                <h4 className="font-bold text-white">Zustand 5.0</h4>
                <p className="text-xs text-zinc-500">State Management</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-zinc-500 uppercase">Stores</p>
              <ul className="text-sm space-y-1">
                <li className="text-amber-400">WorkflowStore</li>
                <li className="text-amber-400">GuidelinesStore</li>
                <li className="text-amber-400">UIStore</li>
              </ul>
              <p className="text-xs text-zinc-500 mt-2">
                Middleware: persist, devtools
              </p>
            </div>
          </div>

          {/* Framer Motion */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg">
                F
              </div>
              <div>
                <h4 className="font-bold text-white">Framer Motion 11.15</h4>
                <p className="text-xs text-zinc-500">Animations</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-zinc-500 uppercase">Uso</p>
              <ul className="text-sm text-zinc-400 space-y-1">
                <li>Transições de página</li>
                <li>Animações de entrada</li>
                <li>Hover effects</li>
                <li>Loading states</li>
              </ul>
            </div>
          </div>

          {/* Lucide */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center text-white font-bold text-lg">
                L
              </div>
              <div>
                <h4 className="font-bold text-white">Lucide React 0.469</h4>
                <p className="text-xs text-zinc-500">Iconography</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-zinc-500 uppercase">
                Padrão de Uso
              </p>
              <code className="block p-2 bg-zinc-800 rounded text-xs text-zinc-300">
                {`<IconName className="w-5 h-5" />`}
              </code>
            </div>
          </div>
        </div>
      </section>

      {/* Infrastructure */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Cloud className="w-6 h-6 text-green-400" />
          Tecnologias de Infraestrutura
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Vercel */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-zinc-700 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-600 to-zinc-900 flex items-center justify-center text-white font-bold text-xl border border-zinc-500">
                V
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">Vercel</h4>
                <p className="text-sm text-zinc-500">Hospedagem e Deploy</p>
              </div>
            </div>
            <p className="text-xs font-medium text-zinc-500 uppercase mb-2">
              Features Utilizadas
            </p>
            <div className="grid grid-cols-2 gap-2">
              {[
                "Automatic deployments",
                "Edge Functions",
                "Environment Variables",
                "Analytics",
                "Preview deployments",
                "CDN Global",
              ].map((feature, i) => (
                <div
                  key={i}
                  className="flex items-center gap-2 text-sm text-zinc-300"
                >
                  <CheckCircle2 className="w-4 h-4 text-green-400" />
                  {feature}
                </div>
              ))}
            </div>
          </div>

          {/* GitHub */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-zinc-700 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-xl">
                G
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">GitHub</h4>
                <p className="text-sm text-zinc-500">Versionamento e CI</p>
              </div>
            </div>
            <p className="text-xs font-medium text-zinc-500 uppercase mb-2">
              Workflows
            </p>
            <ul className="space-y-2 text-sm text-zinc-300">
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-zinc-800 rounded text-xs">
                  push main
                </code>
                <span className="text-zinc-500">→</span>
                Deploy production
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-zinc-800 rounded text-xs">
                  push feature/*
                </code>
                <span className="text-zinc-500">→</span>
                Preview deploy
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-zinc-800 rounded text-xs">
                  pull request
                </code>
                <span className="text-zinc-500">→</span>
                Checks automáticos
              </li>
            </ul>
          </div>
        </div>
      </section>

      {/* Architecture Diagram */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Cpu className="w-6 h-6 text-violet-400" />
          Diagrama por Camadas
        </h3>

        <div className="bg-zinc-900 border border-zinc-800 rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px] space-y-4">
            {/* Frontend Layer */}
            <div className="bg-blue-500/10 border border-blue-500/20 rounded-xl p-4">
              <h4 className="font-bold text-blue-400 mb-3 text-center">FRONTEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="React 19" letter="R" gradient="from-cyan-500 to-blue-600" />
                <TechLogo name="Tailwind" letter="T" gradient="from-teal-500 to-cyan-600" />
                <TechLogo name="Framer" letter="F" gradient="from-pink-500 to-purple-600" />
                <TechLogo name="Zustand" letter="Z" gradient="from-amber-500 to-yellow-600" />
                <TechLogo name="Lucide" letter="L" gradient="from-red-500 to-orange-600" />
              </div>
            </div>

            {/* Framework Layer */}
            <div className="bg-zinc-800/50 border border-zinc-700 rounded-xl p-4">
              <h4 className="font-bold text-zinc-400 mb-3 text-center">FRAMEWORK</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Next.js 15</p>
                  <div className="flex gap-4 mt-2 text-xs text-zinc-400">
                    <span>App Router</span>
                    <span>Server Components</span>
                    <span>API Routes</span>
                  </div>
                </div>
              </div>
            </div>

            {/* Backend Layer */}
            <div className="bg-green-500/10 border border-green-500/20 rounded-xl p-4">
              <h4 className="font-bold text-green-400 mb-3 text-center">BACKEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Vercel AI" letter="V" gradient="from-green-500 to-emerald-600" />
                <TechLogo name="Zod" letter="Z" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="node-fetch" letter="N" gradient="from-lime-500 to-green-600" />
              </div>
            </div>

            {/* IA Layer */}
            <div className="bg-purple-500/10 border border-purple-500/20 rounded-xl p-4">
              <h4 className="font-bold text-purple-400 mb-3 text-center">IA LAYER</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Anthropic" letter="A" gradient="from-amber-500 to-orange-600" />
                <TechLogo name="Google AI" letter="G" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="OpenAI" letter="O" gradient="from-green-500 to-emerald-600" />
              </div>
            </div>

            {/* Infrastructure Layer */}
            <div className="bg-amber-500/10 border border-amber-500/20 rounded-xl p-4">
              <h4 className="font-bold text-amber-400 mb-3 text-center">INFRAESTRUTURA</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Vercel</p>
                  <div className="flex gap-4 mt-2 text-xs text-zinc-400">
                    <span>Edge Functions</span>
                    <span>CDN Global</span>
                    <span>Env Vars</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Dependencies Table */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Package className="w-6 h-6 text-cyan-400" />
          Dependências
        </h3>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Production */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden">
            <div className="bg-green-500/10 border-b border-zinc-800 px-4 py-3">
              <h4 className="font-bold text-green-400">Production Dependencies</h4>
            </div>
            <div className="p-4 max-h-80 overflow-y-auto">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-zinc-500 text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-zinc-300">
                  {dependencies.production.map((dep, i) => (
                    <tr key={i} className="border-t border-zinc-800">
                      <td className="py-2 font-mono text-cyan-400">{dep.name}</td>
                      <td className="py-2 text-zinc-500">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>

          {/* Dev */}
          <div className="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden">
            <div className="bg-amber-500/10 border-b border-zinc-800 px-4 py-3">
              <h4 className="font-bold text-amber-400">Dev Dependencies</h4>
            </div>
            <div className="p-4">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-zinc-500 text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-zinc-300">
                  {dependencies.dev.map((dep, i) => (
                    <tr key={i} className="border-t border-zinc-800">
                      <td className="py-2 font-mono text-amber-400">{dep.name}</td>
                      <td className="py-2 text-zinc-500">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-orange-900/20 border border-orange-500/20 rounded-xl">
        <p className="text-sm text-orange-300 italic text-center">
          Este documento cataloga todas as tecnologias utilizadas no Emergency YouTube,
          sua função e posição na arquitetura.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/content.ts`

```
// Documentation Content for Export
// This file contains the markdown content for each documentation tab

export const genesisContent = `# Gênese & Intenção do Sistema

## Por Que Este Sistema Foi Criado

O **Emergency YouTube** nasceu de uma necessidade real e urgente: **democratizar a produção de vídeos profissionais para YouTube**, eliminando as barreiras técnicas, financeiras e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.

### O Problema Fundamental

Criar vídeos de qualidade para YouTube tradicionalmente exige:
- **Habilidades técnicas** em edição de vídeo, design gráfico e produção de áudio
- **Investimento significativo** em equipamentos, software e possivelmente equipe
- **Tempo extensivo** - um vídeo de 10 minutos pode levar 8-20 horas de produção
- **Conhecimento de SEO** para otimização e descoberta do conteúdo

Essa barreira exclui milhões de potenciais criadores que têm conhecimento valioso mas não os recursos para transformá-lo em conteúdo visual.

### A Solução Proposta

O Emergency YouTube é um **sistema de automação inteligente** que:
1. Recebe apenas o tema/tópico do vídeo
2. Pesquisa e estrutura o conteúdo automaticamente
3. Gera roteiro, trilha sonora, thumbnail e descrição
4. Cria o storyboard com seleção de mídias
5. Renderiza o vídeo final
6. Publica diretamente no YouTube

## Prompts Fundacionais

### Diretrizes de Design

O sistema foi projetado seguindo estas premissas:

1. **Automação Máxima, Controle Humano**
   - O sistema automatiza tarefas repetitivas e técnicas
   - O humano mantém controle sobre decisões criativas e editoriais
   - Cada etapa pode ser revisada e modificada antes de avançar

2. **Qualidade de Produção Profissional**
   - Outputs devem ser indistinguíveis de produções manuais
   - Padrões de YouTube Creator Academy são referência
   - SEO e engagement são prioridades arquiteturais

3. **Interface Intuitiva**
   - Zero curva de aprendizado para operações básicas
   - Interface guiada por workflow linear
   - Feedback visual claro em cada etapa

4. **Escalabilidade**
   - Suportar múltiplos vídeos em paralelo
   - Funcionar com diferentes nichos de conteúdo
   - Permitir personalização de diretrizes por projeto

## Decisões Arquiteturais Derivadas

### Por que Next.js 15?

- **App Router** para roteamento moderno e layouts aninhados
- **Server Components** para performance e SEO
- **API Routes** para backend integrado
- **Vercel** como deploy nativo e otimizado

### Por que Zustand para Estado?

- Simplicidade sobre complexidade (vs Redux)
- Persistência nativa com localStorage
- TypeScript first
- Minimal boilerplate

### Por que Workflow em 6 Etapas?

O workflow espelha o processo real de produção de vídeo:
1. **Input** → Briefing criativo
2. **Research** → Pesquisa e referências
3. **Proposal** → Roteiro e assets
4. **Studio** → Storyboard e composição
5. **Render** → Produção final
6. **Upload** → Publicação

Esta estrutura permite:
- Validação humana em cada transição
- Rollback para etapas anteriores
- Persistência de progresso
- Clareza sobre status atual

## Elementos Intencionais

### O que o sistema FAZ:
- Pesquisa profunda sobre qualquer tema
- Geração de roteiros otimizados para engagement
- Seleção automática de mídia relevante
- Composição de vídeo com narração
- Upload direto para YouTube

### O que o sistema NÃO FAZ (exclusões conscientes):
- **Não substitui a voz humana** - se o criador quiser narrar, deve gravar separadamente
- **Não gera conteúdo controverso** - políticas de content safety são aplicadas
- **Não garante viralização** - o sistema otimiza, mas resultados dependem do conteúdo
- **Não armazena vídeos eternamente** - após upload, o vídeo vive no YouTube

## Princípios de Design

### 1. Transparência sobre Magia
O sistema mostra claramente o que está fazendo em cada etapa, evitando "caixas pretas" que frustram usuários.

### 2. Falhas Graceful
Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando o workflow completamente.

### 3. Dados Locais
Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.

### 4. Documentação Viva
Este próprio módulo é parte do sistema, não um documento externo que envelhece.

---

*Este documento representa a intenção fundacional do sistema Emergency YouTube, servindo como referência para decisões futuras e transferência de contexto entre IAs.*
`;

export const systemVisionContent = `# Visão Sistêmica & Funcionamento

## O Que o Sistema Faz

O **Emergency YouTube** é uma plataforma de automação de produção de vídeos que transforma um simples tema em um vídeo completo publicado no YouTube. O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.

## Para Quem Foi Projetado

### Perfis de Usuário Primários

1. **Criadores de Conteúdo Solo**
   - Empreendedores digitais
   - Educadores e professores
   - Profissionais liberais

2. **Pequenas Empresas**
   - Marketing digital interno
   - Comunicação institucional
   - Treinamento corporativo

3. **Agências e Produtoras**
   - Produção em escala
   - Prototipagem rápida
   - Testes de conceito

### Requisitos do Usuário
- Conta Google com canal YouTube ativo
- Acesso às APIs necessárias (fornecidas ou próprias)
- Navegador moderno (Chrome, Firefox, Safari, Edge)

## Fluxo Principal de Funcionamento

### Etapa 1: Input (Entrada de Dados)

**Objetivo:** Capturar a intenção e parâmetros do vídeo

**Entradas:**
- Tema principal do vídeo
- Configurações de formato (duração, estilo)
- Público-alvo e tom de voz
- Diretrizes específicas (opcional)

**Saídas:**
- Objeto de contexto estruturado
- Parâmetros validados para próximas etapas

### Etapa 2: Research (Pesquisa)

**Objetivo:** Coletar informações e referências sobre o tema

**Processo:**
1. Análise semântica do tema
2. Busca em fontes confiáveis
3. Extração de pontos-chave
4. Identificação de ângulos únicos
5. Estruturação de outline inicial

**Saídas:**
- Dados de pesquisa estruturados
- Referências e fontes
- Sugestões de abordagem

### Etapa 3: Proposal (Proposta Criativa)

**Objetivo:** Gerar todos os assets criativos do vídeo

**Componentes Gerados:**
- **Roteiro completo** com marcações de tempo
- **Trilha sonora** sugerida com justificativa
- **Títulos e thumbnails** otimizados para CTR
- **Descrição** com timestamps e links
- **Tags e hashtags** para SEO

**Saídas:**
- Pacote completo de proposta criativa
- Preview de cada componente
- Opções de variação

### Etapa 4: Studio (Produção Visual)

**Objetivo:** Criar o storyboard e selecionar mídias

**Processo:**
1. Divisão do roteiro em cenas
2. Busca de imagens/vídeos por cena
3. Definição de transições
4. Preview do storyboard
5. Ajustes manuais (se necessário)

**Saídas:**
- Storyboard completo com mídias
- Timeline visual do vídeo
- Assets prontos para render

### Etapa 5: Render (Composição)

**Objetivo:** Gerar o vídeo final

**Processo:**
1. Síntese de voz (TTS) do roteiro
2. Composição de vídeo com mídias
3. Sincronização de áudio
4. Aplicação de efeitos e transições
5. Exportação em formato YouTube

**Saídas:**
- Arquivo de vídeo renderizado
- Preview para aprovação
- Metadados de produção

### Etapa 6: Upload (Publicação)

**Objetivo:** Publicar o vídeo no YouTube

**Processo:**
1. Autenticação com YouTube
2. Upload do vídeo
3. Aplicação de metadados
4. Configuração de privacidade
5. Geração de thumbnail
6. Agendamento (opcional)

**Saídas:**
- Vídeo publicado no YouTube
- URL do vídeo
- Estatísticas iniciais

## Interação entre Automação e Decisão Humana

### Pontos de Validação Humana

| Etapa | Decisão Humana | Automação |
|-------|----------------|-----------|
| Input | Define tema e parâmetros | Valida e estrutura |
| Research | Aprova abordagem | Pesquisa e sintetiza |
| Proposal | Revisa e edita roteiro | Gera todas as versões |
| Studio | Ajusta mídias | Seleciona e compõe |
| Render | Aprova preview | Renderiza vídeo |
| Upload | Confirma publicação | Executa upload |

### Filosofia de Controle

**"O sistema sugere, o humano decide"**

- Cada etapa gera uma proposta completa
- O usuário pode aceitar, modificar ou regenerar
- Nenhuma ação destrutiva é executada sem confirmação
- Histórico de versões permite rollback

## Componentes Principais e Responsabilidades

### Frontend (Next.js App Router)

**Responsabilidades:**
- Interface de usuário
- Navegação por workflow
- Estado local e persistência
- Comunicação com APIs

**Tecnologias:**
- React 19 com Server Components
- Tailwind CSS para estilos
- Framer Motion para animações
- Zustand para estado

### Backend (API Routes)

**Responsabilidades:**
- Integração com IAs (Anthropic, OpenAI, Google)
- Comunicação com serviços externos
- Processamento de dados
- Validação e segurança

**Endpoints Principais:**
- /api/proposal/* - Geração de conteúdo
- /api/images/* - Geração de imagens
- /api/media/* - Busca de mídia
- /api/youtube/* - Integração YouTube
- /api/render - Composição de vídeo
- /api/tts - Text-to-Speech

### Estado Global (Zustand Stores)

**WorkflowStore:**
- Dados de cada etapa
- Navegação entre etapas
- Persistência localStorage

**GuidelinesStore:**
- Diretrizes personalizadas
- Configurações de projeto

**UIStore:**
- Estado de modais
- Preferências de interface

---

## Diagrama de Fluxo Operacional

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                     EMERGENCY YOUTUBE                           │
│                    Fluxo de Produção                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  INPUT   │───▶│ RESEARCH │───▶│ PROPOSAL │                  │
│  │  Tema    │    │ Pesquisa │    │ Roteiro  │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │ Contexto │    │  Dados   │    │  Assets  │                  │
│  │   JSON   │    │Pesquisa  │    │Criativos │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                       │                         │
│                                       ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  UPLOAD  │◀───│  RENDER  │◀───│  STUDIO  │                  │
│  │ YouTube  │    │  Vídeo   │    │Storyboard│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  Vídeo   │    │ Arquivo  │    │  Mídias  │                  │
│  │Publicado │    │  .mp4    │    │Selecionad│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

---

*Este documento descreve a visão sistêmica do Emergency YouTube, detalhando seu funcionamento e a interação entre componentes automatizados e decisões humanas.*
`;

export const integrationsContent = `# Arquitetura de Integrações & APIs

## Visão Geral das Integrações

O Emergency YouTube integra-se com múltiplos serviços externos para fornecer suas funcionalidades. Cada integração tem um propósito específico e nível de criticidade definido.

## APIs e Serviços Integrados

### 1. Anthropic Claude API

**Função:** Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Modelo | Claude 3.5 Sonnet / Claude 3 Opus |
| Uso Principal | Roteiros, análise, estruturação |
| Autenticação | API Key (ANTHROPIC_API_KEY) |

**Fluxo de Dados:**
- Input: Tema, contexto, diretrizes
- Output: Texto estruturado (roteiro, descrição, tags)

**Endpoints Utilizados:**
- POST /v1/messages

---

### 2. Google Gemini API

**Função:** Geração de conteúdo alternativa e pesquisa

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | Gemini 1.5 Pro |
| Uso Principal | Backup de geração, análise |
| Autenticação | API Key (GOOGLE_GENERATIVE_AI_API_KEY) |

**Fluxo de Dados:**
- Input: Prompts estruturados
- Output: Texto gerado

---

### 3. OpenAI API

**Função:** Geração de imagens e modelos alternativos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | GPT-4o, DALL-E 3 |
| Uso Principal | Thumbnails, imagens complementares |
| Autenticação | API Key (OPENAI_API_KEY) |

**Endpoints Utilizados:**
- POST /v1/chat/completions
- POST /v1/images/generations

---

### 4. YouTube Data API v3

**Função:** Upload de vídeos e gerenciamento de canal

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Crítica |
| Versão | v3 |
| Uso Principal | Upload, metadados, thumbnails |
| Autenticação | OAuth 2.0 |

**Escopos Necessários:**
- youtube.upload
- youtube.readonly
- youtube.force-ssl

**Fluxo de Dados:**
- Input: Arquivo de vídeo, metadados
- Output: ID do vídeo publicado, URL

---

### 5. Pexels API

**Função:** Busca de imagens e vídeos stock gratuitos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Uso Principal | B-roll, imagens de cena |
| Autenticação | API Key (PEXELS_API_KEY) |

**Endpoints Utilizados:**
- GET /v1/search (imagens)
- GET /videos/search (vídeos)

---

### 6. Pixabay API

**Função:** Busca alternativa de mídia stock

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Baixa (backup) |
| Uso Principal | Fallback para Pexels |
| Autenticação | API Key (PIXABAY_API_KEY) |

---

### 7. ElevenLabs API

**Função:** Text-to-Speech de alta qualidade

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Uso Principal | Narração do vídeo |
| Autenticação | API Key (ELEVENLABS_API_KEY) |

**Vozes Disponíveis:**
- Português (múltiplas vozes)
- Inglês (múltiplas vozes)

---

### 8. Replicate API

**Função:** Geração de imagens via modelos open-source

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelos | Flux, SDXL |
| Uso Principal | Thumbnails, arte conceitual |
| Autenticação | API Token (REPLICATE_API_TOKEN) |

---

## Diagrama de Conexões

\`\`\`
                    ┌─────────────────────────────────────┐
                    │         EMERGENCY YOUTUBE           │
                    │          (Next.js App)              │
                    └─────────────────────────────────────┘
                                     │
           ┌─────────────────────────┼─────────────────────────┐
           │                         │                         │
           ▼                         ▼                         ▼
┌─────────────────────┐   ┌─────────────────────┐   ┌─────────────────────┐
│   IA PROVIDERS      │   │   MEDIA SERVICES    │   │   VIDEO PLATFORM    │
├─────────────────────┤   ├─────────────────────┤   ├─────────────────────┤
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Anthropic   │  │   │  │    Pexels    │  │   │  │   YouTube    │  │
│  │   Claude     │  │   │  │   Images     │  │   │  │   Data API   │  │
│  └──────────────┘  │   │  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   └─────────────────────┘
│  │   Google     │  │   │  │   Pixabay    │  │
│  │   Gemini     │  │   │  │   Videos     │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │   OpenAI     │  │   │  │  ElevenLabs  │  │
│  │   GPT-4o     │  │   │  │     TTS      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Replicate   │  │   │  │  Replicate   │  │
│  │   Images     │  │   │  │   Video      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
└─────────────────────┘   └─────────────────────┘
\`\`\`

## Fluxo Real de Dados

### 1. Geração de Roteiro

\`\`\`
Usuário ──▶ Input (tema) ──▶ API /proposal/script
                                    │
                                    ▼
                              Anthropic API
                                    │
                                    ▼
                           Roteiro Estruturado
                                    │
                                    ▼
                              Frontend (UI)
\`\`\`

### 2. Geração de Thumbnail

\`\`\`
Roteiro ──▶ API /images/generate ──▶ Replicate/DALL-E
                                          │
                                          ▼
                                    Imagem Base64
                                          │
                                          ▼
                                    Frontend (Preview)
\`\`\`

### 3. Upload para YouTube

\`\`\`
Vídeo Renderizado ──▶ API /youtube/upload
                            │
                            ▼
                      OAuth 2.0 Auth
                            │
                            ▼
                     YouTube Data API
                            │
                            ▼
                   Vídeo Publicado (URL)
\`\`\`

## Observações de Autenticação

### Armazenamento de Credenciais

| Tipo | Local | Segurança |
|------|-------|-----------|
| API Keys | Variáveis de ambiente (Vercel) | Não expostas ao cliente |
| API Keys do Usuário | localStorage (browser) | Criptografadas localmente |
| OAuth Tokens | Cookie httpOnly | Sessão segura |

### Fluxo OAuth (YouTube)

1. Usuário clica em "Conectar YouTube"
2. Redirect para Google OAuth
3. Usuário autoriza escopos
4. Callback com código de autorização
5. Troca por access_token + refresh_token
6. Tokens armazenados em cookie seguro

### Fallback e Redundância

**Se Anthropic falhar:**
- Tentativa com Google Gemini
- Mensagem de erro amigável se ambos falharem

**Se Pexels falhar:**
- Tentativa com Pixabay
- Permite upload manual de mídia

**Se ElevenLabs falhar:**
- Opção de TTS alternativo
- Permite upload de áudio manual

---

*Este documento detalha todas as integrações do Emergency YouTube, seus fluxos de dados e considerações de segurança.*
`;

export const techStackContent = `# Stack Tecnológica & Linguagens

## Visão Geral da Stack

O Emergency YouTube utiliza uma stack moderna e otimizada para aplicações web de alta performance, com foco em Developer Experience (DX) e User Experience (UX).

## Linguagens de Programação

### TypeScript 5.7

**Uso:** 100% do código frontend e backend

**Características Utilizadas:**
- Strict mode habilitado
- Path aliases (@/components, @/lib)
- Type inference avançado
- Utility types (Partial, Pick, Omit)

**Benefícios:**
- Detecção de erros em tempo de desenvolvimento
- Autocomplete inteligente
- Refatoração segura
- Documentação inline via tipos

---

## Frameworks e Bibliotecas

### Next.js 15.1.11

**Categoria:** Framework Full-Stack

| Feature | Uso no Projeto |
|---------|----------------|
| App Router | Roteamento e layouts |
| Server Components | Performance e SEO |
| API Routes | Backend integrado |
| Image Optimization | Otimização de mídia |
| Font Optimization | Fontes otimizadas |

**Configurações Especiais:**
- Output: Standalone (otimizado para containers)
- TypeScript: Strict mode
- ESLint: Integrado

---

### React 19

**Categoria:** UI Library

**Hooks Utilizados:**
- useState, useEffect (padrão)
- useCallback, useMemo (otimização)
- useRef (referências DOM)

**Patterns:**
- Functional Components exclusivamente
- Custom Hooks para lógica reutilizável
- Composição sobre herança

---

### Tailwind CSS 3.4.17

**Categoria:** Framework CSS

**Customizações:**
- Cores: primary (red), accent (yellow)
- Animações customizadas
- Typography plugin
- Forms plugin

**Utilities Mais Usados:**
\`\`\`
bg-zinc-900     → Background escuro
text-white      → Texto principal
border-zinc-800 → Bordas sutis
rounded-xl      → Cantos arredondados
flex/grid       → Layouts
\`\`\`

---

### Zustand 5.0

**Categoria:** State Management

**Stores Implementadas:**
1. WorkflowStore - Estado do workflow
2. GuidelinesStore - Diretrizes
3. UIStore - Estado da interface

**Middleware:**
- persist (localStorage)
- devtools (desenvolvimento)

---

### Framer Motion 11.15

**Categoria:** Animações

**Uso:**
- Transições de página
- Animações de entrada
- Hover effects
- Loading states

---

### Lucide React 0.469

**Categoria:** Iconografia

**Padrão de Uso:**
\`\`\`tsx
import { IconName } from "lucide-react";
<IconName className="w-5 h-5" />
\`\`\`

---

## Tecnologias de Infraestrutura

### Vercel

**Função:** Hospedagem e Deploy

**Features Utilizadas:**
- Automatic deployments (Git push)
- Edge Functions
- Environment Variables
- Analytics
- Preview deployments

**Configuração:**
- Framework preset: Next.js
- Build command: next build
- Output directory: .next

---

### GitHub

**Função:** Versionamento e CI

**Workflows:**
- Push to main → Deploy production
- Push to feature/* → Preview deploy
- Pull requests → Checks automáticos

---

## Diagrama por Camadas

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                         FRONTEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   React 19  │  │  Tailwind   │  │   Framer    │             │
│  │     UI      │  │    CSS      │  │   Motion    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Zustand   │  │   Lucide    │  │    clsx     │             │
│  │    State    │  │   Icons     │  │   + merge   │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         FRAMEWORK                               │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Next.js 15                            │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │   App    │  │  Server  │  │   API    │              │   │
│  │  │  Router  │  │Components│  │  Routes  │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│                          BACKEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Vercel AI  │  │    Zod     │  │  node-fetch │             │
│  │     SDK     │  │ Validation │  │   HTTP      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         IA LAYER                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Anthropic  │  │   Google   │  │   OpenAI    │             │
│  │    SDK      │  │    AI      │  │    SDK      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                       INFRAESTRUTURA                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      Vercel                              │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │  Edge    │  │   CDN    │  │  Env     │              │   │
│  │  │Functions │  │  Global  │  │  Vars    │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

## Dependências Principais

### Production Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| next | 15.1.11 | Framework |
| react | 19.0.0 | UI Library |
| zustand | 5.0.3 | State Management |
| tailwindcss | 3.4.17 | Styling |
| framer-motion | 11.15.0 | Animations |
| lucide-react | 0.469.0 | Icons |
| @ai-sdk/anthropic | latest | Claude AI |
| @ai-sdk/google | latest | Gemini AI |
| @ai-sdk/openai | latest | GPT AI |
| zod | 3.24.1 | Validation |
| clsx | 2.1.1 | Class merging |
| tailwind-merge | 2.6.0 | Tailwind utilities |

### Dev Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| typescript | 5.7.3 | Type checking |
| eslint | 9.x | Linting |
| @types/react | 19.x | React types |
| @types/node | 22.x | Node types |

---

*Este documento cataloga todas as tecnologias utilizadas no Emergency YouTube, sua função e posição na arquitetura.*
`;

export const currentStateContent = `# Estado Atual & Próximos Passos

## Status Geral do Projeto

**Versão:** 1.0.0
**Status:** Em Produção
**URL:** https://emergecy-youtube.vercel.app
**Última Atualização:** Janeiro 2025

---

## Funcionalidades Concluídas

### Core Features

| Funcionalidade | Status | Prioridade | Impacto |
|----------------|--------|------------|---------|
| Dashboard com Boot Sequence | Concluído | Alta | Alto |
| Workflow de 6 etapas | Concluído | Crítica | Crítico |
| Input de tema e configuração | Concluído | Crítica | Alto |
| Pesquisa com IA | Concluído | Alta | Alto |
| Geração de roteiro | Concluído | Crítica | Crítico |
| Geração de títulos/thumbnails | Concluído | Alta | Alto |
| Geração de descrição e tags | Concluído | Alta | Alto |
| Seleção de trilha sonora | Concluído | Média | Médio |
| Sistema de diretrizes | Concluído | Média | Alto |
| Configuração de API Keys | Concluído | Crítica | Crítico |
| Persistência de estado | Concluído | Alta | Alto |

### Integrações Operacionais

| Integração | Status | Testado |
|------------|--------|---------|
| Anthropic Claude | Operacional | Sim |
| Google Gemini | Operacional | Sim |
| OpenAI GPT-4 | Operacional | Sim |
| Pexels | Operacional | Sim |
| Pixabay | Operacional | Sim |

---

## Funcionalidades Parciais

| Funcionalidade | Progresso | Bloqueio | Prioridade |
|----------------|-----------|----------|------------|
| Upload YouTube | 80% | OAuth config | Alta |
| Render de vídeo | 70% | Integração FFmpeg | Alta |
| TTS (ElevenLabs) | 60% | API quota | Média |
| Storyboard editor | 50% | UX refinement | Média |

---

## Funcionalidades Não Iniciadas

| Funcionalidade | Complexidade | Prioridade | Impacto |
|----------------|--------------|------------|---------|
| Multi-idioma interface | Média | Baixa | Médio |
| Histórico de vídeos | Baixa | Média | Alto |
| Templates de vídeo | Média | Média | Alto |
| Batch processing | Alta | Baixa | Médio |
| Analytics dashboard | Alta | Baixa | Médio |
| Colaboração multi-usuário | Alta | Baixa | Baixo |

---

## Dívidas Técnicas

### Alta Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Error boundaries | Implementar error boundaries em todas as páginas | Estabilidade | Baixo |
| Loading states | Padronizar loading states em todas as operações | UX | Médio |
| Testes E2E | Adicionar testes end-to-end com Playwright | Qualidade | Alto |

### Média Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Code splitting | Otimizar bundle size com lazy loading | Performance | Médio |
| API rate limiting | Implementar rate limiting no frontend | Custo | Médio |
| Retry logic | Melhorar retry logic para falhas de API | Resiliência | Médio |

### Baixa Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| CSS cleanup | Remover estilos não utilizados | Manutenção | Baixo |
| Type coverage | Aumentar coverage de tipos | DX | Médio |
| Documentation | Documentar funções complexas | Manutenção | Médio |

---

## Riscos Conhecidos

### Riscos Técnicos

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| API rate limits | Média | Alto | Cache, retry, fallbacks |
| Custo de APIs | Alta | Médio | Monitoramento, alertas |
| Mudanças em APIs externas | Média | Alto | Versionamento, abstrações |
| Performance em mobile | Baixa | Médio | Testing, otimização |

### Riscos de Negócio

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| Políticas YouTube | Média | Crítico | Compliance, guidelines |
| Competição | Alta | Médio | Inovação, UX |
| Dependência de IAs | Média | Alto | Multi-provider |

---

## Sugestões de Evolução Futura

### Curto Prazo (1-3 meses)

1. **Completar Upload YouTube**
   - Prioridade: Crítica
   - Impacto: Crítico
   - Complexidade: Média

2. **Implementar Render Local**
   - Prioridade: Alta
   - Impacto: Alto
   - Complexidade: Alta

3. **Adicionar Testes**
   - Prioridade: Alta
   - Impacto: Médio
   - Complexidade: Média

### Médio Prazo (3-6 meses)

1. **Templates de Vídeo**
   - Criar biblioteca de templates por nicho
   - Permitir customização de templates
   - Sistema de compartilhamento

2. **Histórico e Analytics**
   - Dashboard de vídeos produzidos
   - Métricas de performance
   - Insights de melhoria

3. **Melhorias de UX**
   - Onboarding interativo
   - Tooltips contextuais
   - Keyboard shortcuts

### Longo Prazo (6-12 meses)

1. **API Pública**
   - Expor funcionalidades via API
   - SDK para integrações
   - Documentação completa

2. **Marketplace de Assets**
   - Trilhas sonoras
   - Templates
   - Vozes TTS

3. **Versão Enterprise**
   - Multi-tenant
   - SSO/SAML
   - SLA garantido

---

## Métricas de Qualidade

### Performance

| Métrica | Atual | Meta |
|---------|-------|------|
| LCP (Largest Contentful Paint) | 1.2s | < 2.5s |
| FID (First Input Delay) | 50ms | < 100ms |
| CLS (Cumulative Layout Shift) | 0.05 | < 0.1 |
| Bundle Size | 450KB | < 500KB |

### Code Quality

| Métrica | Atual | Meta |
|---------|-------|------|
| TypeScript Coverage | 100% | 100% |
| ESLint Errors | 0 | 0 |
| Test Coverage | 0% | > 70% |

---

## Conclusão

O Emergency YouTube está em estágio de **produção funcional** com as principais features de geração de conteúdo operacionais. Os próximos passos críticos são:

1. Completar a integração de upload YouTube
2. Implementar render de vídeo completo
3. Adicionar cobertura de testes
4. Resolver dívidas técnicas de alta prioridade

O sistema está preparado para escalar e evoluir conforme as necessidades dos usuários.

---

*Este documento reflete o estado atual do Emergency YouTube e serve como roadmap para decisões de desenvolvimento futuro.*
`;

```

---
#### `components/documentation/index.ts`

```
// Documentation Module Components
export { default as GenesisTab } from "./GenesisTab";
export { default as SystemVisionTab } from "./SystemVisionTab";
export { default as IntegrationsTab } from "./IntegrationsTab";
export { default as TechStackTab } from "./TechStackTab";
export { default as CurrentStateTab } from "./CurrentStateTab";

// Content exports for Markdown generation
export {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
} from "./content";

```

---
#### `components/system/SystemStatus.tsx`

```
"use client";

import { useEffect, useState } from "react";

type Health = {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, "ONLINE" | "OFFLINE">;
};

export default function SystemStatus() {
  const [data, setData] = useState<Health | null>(null);

  useEffect(() => {
    fetch("/api/health")
      .then(res => res.json())
      .then(setData)
      .catch(() => setData(null));
  }, []);

  if (!data) {
    return <p>Checking system status...</p>;
  }

  return (
    <div style={{ border: "1px solid #333", padding: 16 }}>
      <strong>System Status: {data.status}</strong>
      <ul>
        {Object.entries(data.apis).map(([name, status]) => (
          <li key={name}>
            {name}: {status}
          </li>
        ))}
      </ul>
    </div>
  );
}

```

---
#### `components/ui/Badge.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface BadgeProps {
  children: React.ReactNode;
  variant?: "default" | "success" | "warning" | "error" | "info";
  size?: "sm" | "md";
  className?: string;
}

export default function Badge({
  children,
  variant = "default",
  size = "sm",
  className,
}: BadgeProps) {
  const variants = {
    default: "bg-gray-700 text-gray-300",
    success: "bg-green-500/10 text-green-400",
    warning: "bg-yellow-500/10 text-yellow-400",
    error: "bg-red-500/10 text-red-400",
    info: "bg-blue-500/10 text-blue-400",
  };

  const sizes = {
    sm: "px-2 py-0.5 text-xs",
    md: "px-3 py-1 text-sm",
  };

  return (
    <span
      className={cn(
        "inline-flex items-center rounded-full font-medium",
        variants[variant],
        sizes[size],
        className
      )}
    >
      {children}
    </span>
  );
}

```

---
#### `components/ui/Button.tsx`

```
"use client";

import { forwardRef, ButtonHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { Loader2 } from "lucide-react";

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: "primary" | "secondary" | "outline" | "success" | "warning" | "danger" | "ghost";
  size?: "sm" | "md" | "lg";
  isLoading?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      className,
      variant = "primary",
      size = "md",
      isLoading = false,
      leftIcon,
      rightIcon,
      children,
      disabled,
      ...props
    },
    ref
  ) => {
    const variants = {
      primary: "bg-primary-600 hover:bg-primary-700 text-white",
      secondary: "bg-gray-700 hover:bg-gray-600 text-white",
      outline: "border border-gray-600 hover:border-gray-500 hover:bg-gray-800 text-gray-300",
      success: "bg-green-600 hover:bg-green-700 text-white",
      warning: "bg-yellow-600 hover:bg-yellow-700 text-white",
      danger: "bg-red-600 hover:bg-red-700 text-white",
      ghost: "hover:bg-gray-800 text-gray-300",
    };

    const sizes = {
      sm: "text-sm px-3 py-1.5",
      md: "px-4 py-2",
      lg: "text-lg px-6 py-3",
    };

    return (
      <button
        ref={ref}
        className={cn(
          "inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200",
          "disabled:opacity-50 disabled:cursor-not-allowed",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          variants[variant],
          sizes[size],
          className
        )}
        disabled={disabled || isLoading}
        {...props}
      >
        {isLoading ? (
          <Loader2 className="w-4 h-4 animate-spin" />
        ) : (
          leftIcon
        )}
        {children}
        {!isLoading && rightIcon}
      </button>
    );
  }
);

Button.displayName = "Button";

export default Button;

```

---
#### `components/ui/Card.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface CardProps {
  children: React.ReactNode;
  className?: string;
  hover?: boolean;
  padding?: "none" | "sm" | "md" | "lg";
}

export default function Card({
  children,
  className,
  hover = false,
  padding = "md",
}: CardProps) {
  const paddings = {
    none: "",
    sm: "p-4",
    md: "p-6",
    lg: "p-8",
  };

  return (
    <div
      className={cn(
        "rounded-xl border border-gray-800 bg-gray-900/50 backdrop-blur-sm",
        paddings[padding],
        hover && "transition-all duration-200 hover:shadow-lg hover:shadow-primary-500/10 hover:-translate-y-0.5",
        className
      )}
    >
      {children}
    </div>
  );
}

interface CardHeaderProps {
  children: React.ReactNode;
  className?: string;
}

export function CardHeader({ children, className }: CardHeaderProps) {
  return (
    <div className={cn("mb-4", className)}>
      {children}
    </div>
  );
}

interface CardTitleProps {
  children: React.ReactNode;
  className?: string;
}

export function CardTitle({ children, className }: CardTitleProps) {
  return (
    <h3 className={cn("text-lg font-semibold text-white", className)}>
      {children}
    </h3>
  );
}

interface CardDescriptionProps {
  children: React.ReactNode;
  className?: string;
}

export function CardDescription({ children, className }: CardDescriptionProps) {
  return (
    <p className={cn("text-sm text-gray-400 mt-1", className)}>
      {children}
    </p>
  );
}

interface CardContentProps {
  children: React.ReactNode;
  className?: string;
}

export function CardContent({ children, className }: CardContentProps) {
  return <div className={cn("", className)}>{children}</div>;
}

interface CardFooterProps {
  children: React.ReactNode;
  className?: string;
}

export function CardFooter({ children, className }: CardFooterProps) {
  return (
    <div className={cn("mt-4 pt-4 border-t border-gray-800", className)}>
      {children}
    </div>
  );
}

```

---
#### `components/ui/Input.tsx`

```
"use client";

import { forwardRef, InputHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Input = forwardRef<HTMLInputElement, InputProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={inputId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <input
          ref={ref}
          id={inputId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Input.displayName = "Input";

export default Input;

```

---
#### `components/ui/Modal.tsx`

```
"use client";

import { useEffect, useCallback } from "react";
import { X } from "lucide-react";
import { cn } from "@/lib/utils";

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  size?: "sm" | "md" | "lg" | "xl" | "full";
  showCloseButton?: boolean;
}

export default function Modal({
  isOpen,
  onClose,
  title,
  children,
  size = "md",
  showCloseButton = true,
}: ModalProps) {
  const handleEscape = useCallback(
    (e: KeyboardEvent) => {
      if (e.key === "Escape") {
        onClose();
      }
    },
    [onClose]
  );

  useEffect(() => {
    if (isOpen) {
      document.addEventListener("keydown", handleEscape);
      document.body.style.overflow = "hidden";
    }

    return () => {
      document.removeEventListener("keydown", handleEscape);
      document.body.style.overflow = "unset";
    };
  }, [isOpen, handleEscape]);

  if (!isOpen) return null;

  const sizes = {
    sm: "max-w-md",
    md: "max-w-lg",
    lg: "max-w-2xl",
    xl: "max-w-4xl",
    full: "max-w-[90vw]",
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center">
      {/* Backdrop */}
      <div
        className="absolute inset-0 bg-black/70 backdrop-blur-sm"
        onClick={onClose}
      />

      {/* Modal */}
      <div
        className={cn(
          "relative w-full mx-4 bg-gray-900 rounded-xl shadow-2xl border border-gray-800",
          "max-h-[90vh] overflow-hidden flex flex-col",
          "animate-fade-in",
          sizes[size]
        )}
      >
        {/* Header */}
        {(title || showCloseButton) && (
          <div className="flex items-center justify-between px-6 py-4 border-b border-gray-800">
            {title && (
              <h2 className="text-lg font-semibold text-white">{title}</h2>
            )}
            {showCloseButton && (
              <button
                onClick={onClose}
                className="p-1 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"
              >
                <X className="w-5 h-5" />
              </button>
            )}
          </div>
        )}

        {/* Content */}
        <div className="flex-1 overflow-auto p-6">{children}</div>
      </div>
    </div>
  );
}

```

---
#### `components/ui/Select.tsx`

```
"use client";

import { forwardRef, SelectHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { ChevronDown } from "lucide-react";

interface SelectOption {
  value: string;
  label: string;
  disabled?: boolean;
}

interface SelectProps extends Omit<SelectHTMLAttributes<HTMLSelectElement>, "onChange"> {
  label?: string;
  error?: string;
  options: SelectOption[];
  placeholder?: string;
  onChange?: (value: string) => void;
}

const Select = forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, label, error, options, placeholder, id, onChange, ...props }, ref) => {
    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={selectId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <div className="relative">
          <select
            ref={ref}
            id={selectId}
            className={cn(
              "w-full rounded-lg border bg-gray-800 px-4 py-2 pr-10 text-white appearance-none cursor-pointer",
              "transition-colors duration-200",
              "focus:outline-none focus:ring-1",
              error
                ? "border-red-500 focus:border-red-500 focus:ring-red-500"
                : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
              className
            )}
            onChange={(e) => onChange?.(e.target.value)}
            {...props}
          >
            {placeholder && (
              <option value="" disabled>
                {placeholder}
              </option>
            )}
            {options.map((option) => (
              <option
                key={option.value}
                value={option.value}
                disabled={option.disabled}
              >
                {option.label}
              </option>
            ))}
          </select>
          <ChevronDown className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none" />
        </div>
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
      </div>
    );
  }
);

Select.displayName = "Select";

export default Select;

```

---
#### `components/ui/Textarea.tsx`

```
"use client";

import { forwardRef, TextareaHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface TextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Textarea = forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const textareaId = id || `textarea-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={textareaId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <textarea
          ref={ref}
          id={textareaId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200 resize-none",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Textarea.displayName = "Textarea";

export default Textarea;

```

---
#### `components/ui/Toggle.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface ToggleProps {
  checked: boolean;
  onChange: (checked: boolean) => void;
  label?: string;
  description?: string;
  disabled?: boolean;
}

export default function Toggle({
  checked,
  onChange,
  label,
  description,
  disabled = false,
}: ToggleProps) {
  return (
    <div className="flex items-start gap-3">
      <button
        type="button"
        role="switch"
        aria-checked={checked}
        disabled={disabled}
        onClick={() => !disabled && onChange(!checked)}
        className={cn(
          "relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          checked ? "bg-primary-600" : "bg-gray-700",
          disabled && "opacity-50 cursor-not-allowed"
        )}
      >
        <span
          className={cn(
            "pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",
            checked ? "translate-x-5" : "translate-x-0"
          )}
        />
      </button>
      {(label || description) && (
        <div className="flex flex-col">
          {label && (
            <span className={cn("text-sm font-medium text-white", disabled && "opacity-50")}>
              {label}
            </span>
          )}
          {description && (
            <span className={cn("text-sm text-gray-400", disabled && "opacity-50")}>
              {description}
            </span>
          )}
        </div>
      )}
    </div>
  );
}

```

---
#### `lib/ai.ts`

```
import { AIProvider, AIModelOption, Diretriz } from "@/types";

export const AI_MODELS: Record<AIProvider, AIModelOption[]> = {
  openai: [
    { id: "gpt-4o", name: "GPT-4o", provider: "openai" },
    { id: "gpt-4o-mini", name: "GPT-4o Mini", provider: "openai" },
    { id: "gpt-4-turbo", name: "GPT-4 Turbo", provider: "openai" },
  ],
  google: [
    { id: "gemini-1.5-pro", name: "Gemini 1.5 Pro", provider: "google" },
    { id: "gemini-1.5-flash", name: "Gemini 1.5 Flash", provider: "google" },
    { id: "gemini-2.0-flash-exp", name: "Gemini 2.0 Flash", provider: "google" },
  ],
  anthropic: [
    { id: "claude-3-5-sonnet-latest", name: "Claude 3.5 Sonnet", provider: "anthropic" },
    { id: "claude-3-5-haiku-latest", name: "Claude 3.5 Haiku", provider: "anthropic" },
  ],
};

export function getModelsForProvider(provider: AIProvider): AIModelOption[] {
  return AI_MODELS[provider] || [];
}

export function getProviderName(provider: AIProvider): string {
  const names: Record<AIProvider, string> = {
    openai: "OpenAI",
    google: "Google Gemini",
    anthropic: "Anthropic Claude",
  };
  return names[provider];
}

export function buildSystemPromptWithDiretrizes(
  basePrompt: string,
  diretrizes: Diretriz[],
  scope: Diretriz["appliesTo"][number]
): string {
  const applicableDiretrizes = diretrizes.filter(
    (d) => d.active && d.appliesTo.includes(scope)
  );

  if (applicableDiretrizes.length === 0) {
    return basePrompt;
  }

  const diretrizesText = applicableDiretrizes
    .map((d) => `### ${d.title}\n${d.systemPrompt}`)
    .join("\n\n");

  return `${basePrompt}

## Diretrizes Adicionais (MUST FOLLOW):
${diretrizesText}`;
}

export interface GenerationRequest {
  provider: AIProvider;
  model: string;
  systemPrompt: string;
  userPrompt: string;
  temperature?: number;
  maxTokens?: number;
}

export async function generateWithAI(request: GenerationRequest): Promise<string> {
  const response = await fetch("/api/ai/generate", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI generation failed");
  }

  const data = await response.json();
  return data.text;
}

export async function streamWithAI(
  request: GenerationRequest,
  onChunk: (chunk: string) => void
): Promise<void> {
  const response = await fetch("/api/ai/stream", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI streaming failed");
  }

  const reader = response.body?.getReader();
  if (!reader) throw new Error("No response body");

  const decoder = new TextDecoder();
  while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    const chunk = decoder.decode(value);
    onChunk(chunk);
  }
}

```

---
#### `lib/api-keys-store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";

export interface StoredAPIKeys {
  youtube_api_key: string;
  youtube_channel_id: string;
  openai_api_key: string;
  google_api_key: string;
  anthropic_api_key: string;
  pexels_api_key: string;
  pixabay_api_key: string;
  unsplash_api_key: string;
  json2video_api_key: string;
  elevenlabs_api_key: string;
  tavily_api_key: string;
  replicate_api_key: string;
  stability_api_key: string;
}

export interface APIKeyTestResult {
  key: keyof StoredAPIKeys;
  success: boolean;
  message: string;
}

interface APIKeysStore {
  keys: StoredAPIKeys;
  testedKeys: Record<keyof StoredAPIKeys, boolean>;

  setKey: (key: keyof StoredAPIKeys, value: string) => void;
  setKeys: (keys: Partial<StoredAPIKeys>) => void;
  markKeyTested: (key: keyof StoredAPIKeys, success: boolean) => void;
  clearKey: (key: keyof StoredAPIKeys) => void;
  clearAllKeys: () => void;
  getKey: (key: keyof StoredAPIKeys) => string;
  hasKey: (key: keyof StoredAPIKeys) => boolean;
}

const defaultKeys: StoredAPIKeys = {
  youtube_api_key: "",
  youtube_channel_id: "",
  openai_api_key: "",
  google_api_key: "",
  anthropic_api_key: "",
  pexels_api_key: "",
  pixabay_api_key: "",
  unsplash_api_key: "",
  json2video_api_key: "",
  elevenlabs_api_key: "",
  tavily_api_key: "",
  replicate_api_key: "",
  stability_api_key: "",
};

const defaultTestedKeys: Record<keyof StoredAPIKeys, boolean> = {
  youtube_api_key: false,
  youtube_channel_id: false,
  openai_api_key: false,
  google_api_key: false,
  anthropic_api_key: false,
  pexels_api_key: false,
  pixabay_api_key: false,
  unsplash_api_key: false,
  json2video_api_key: false,
  elevenlabs_api_key: false,
  tavily_api_key: false,
  replicate_api_key: false,
  stability_api_key: false,
};

export const useAPIKeysStore = create<APIKeysStore>()(
  persist(
    (set, get) => ({
      keys: defaultKeys,
      testedKeys: defaultTestedKeys,

      setKey: (key, value) =>
        set((state) => ({
          keys: { ...state.keys, [key]: value },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      setKeys: (keys) =>
        set((state) => ({
          keys: { ...state.keys, ...keys },
        })),

      markKeyTested: (key, success) =>
        set((state) => ({
          testedKeys: { ...state.testedKeys, [key]: success },
        })),

      clearKey: (key) =>
        set((state) => ({
          keys: { ...state.keys, [key]: "" },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      clearAllKeys: () =>
        set({
          keys: defaultKeys,
          testedKeys: defaultTestedKeys,
        }),

      getKey: (key) => get().keys[key],

      hasKey: (key) => !!get().keys[key],
    }),
    {
      name: "emergency-youtube-api-keys",
      storage: createJSONStorage(() => sessionStorage), // Usar sessionStorage para segurança
    }
  )
);

// Helper para obter headers com as chaves da sessão
export function getAPIKeyHeaders(keys: StoredAPIKeys): Record<string, string> {
  const headers: Record<string, string> = {};

  if (keys.youtube_api_key) headers["x-youtube-api-key"] = keys.youtube_api_key;
  if (keys.youtube_channel_id) headers["x-youtube-channel-id"] = keys.youtube_channel_id;
  if (keys.openai_api_key) headers["x-openai-api-key"] = keys.openai_api_key;
  if (keys.google_api_key) headers["x-google-api-key"] = keys.google_api_key;
  if (keys.anthropic_api_key) headers["x-anthropic-api-key"] = keys.anthropic_api_key;
  if (keys.pexels_api_key) headers["x-pexels-api-key"] = keys.pexels_api_key;
  if (keys.pixabay_api_key) headers["x-pixabay-api-key"] = keys.pixabay_api_key;
  if (keys.unsplash_api_key) headers["x-unsplash-api-key"] = keys.unsplash_api_key;
  if (keys.json2video_api_key) headers["x-json2video-api-key"] = keys.json2video_api_key;
  if (keys.elevenlabs_api_key) headers["x-elevenlabs-api-key"] = keys.elevenlabs_api_key;
  if (keys.tavily_api_key) headers["x-tavily-api-key"] = keys.tavily_api_key;
  if (keys.replicate_api_key) headers["x-replicate-api-key"] = keys.replicate_api_key;
  if (keys.stability_api_key) headers["x-stability-api-key"] = keys.stability_api_key;

  return headers;
}

```

---
#### `lib/api-keys.ts`

```
import { APIKeyStatus } from "@/types";
import { StoredAPIKeys } from "./api-keys-store";

// Check API keys from server (env vars)
export async function checkServerAPIKeys(): Promise<APIKeyStatus> {
  try {
    const response = await fetch("/api/config/keys");
    if (!response.ok) {
      throw new Error("Failed to fetch API key status");
    }
    return await response.json();
  } catch (error) {
    console.error("Error checking API keys:", error);
    return getEmptyStatus();
  }
}

// Get empty status
function getEmptyStatus(): APIKeyStatus {
  return {
    youtube: false,
    openai: false,
    google: false,
    anthropic: false,
    pexels: false,
    pixabay: false,
    unsplash: false,
    json2video: false,
    elevenlabs: false,
    tavily: false,
    replicate: false,
    stability: false,
  };
}

// Check API keys from client storage
export function checkClientAPIKeys(keys: StoredAPIKeys): APIKeyStatus {
  return {
    youtube: !!(keys.youtube_api_key && keys.youtube_channel_id),
    openai: !!keys.openai_api_key,
    google: !!keys.google_api_key,
    anthropic: !!keys.anthropic_api_key,
    pexels: !!keys.pexels_api_key,
    pixabay: !!keys.pixabay_api_key,
    unsplash: !!keys.unsplash_api_key,
    json2video: !!keys.json2video_api_key,
    elevenlabs: !!keys.elevenlabs_api_key,
    tavily: !!keys.tavily_api_key,
    replicate: !!keys.replicate_api_key,
    stability: !!keys.stability_api_key,
  };
}

// Merge server and client status (client takes precedence if key exists)
export function mergeAPIKeyStatus(server: APIKeyStatus, client: APIKeyStatus): APIKeyStatus {
  return {
    youtube: server.youtube || client.youtube,
    openai: server.openai || client.openai,
    google: server.google || client.google,
    anthropic: server.anthropic || client.anthropic,
    pexels: server.pexels || client.pexels,
    pixabay: server.pixabay || client.pixabay,
    unsplash: server.unsplash || client.unsplash,
    json2video: server.json2video || client.json2video,
    elevenlabs: server.elevenlabs || client.elevenlabs,
    tavily: server.tavily || client.tavily,
    replicate: server.replicate || client.replicate,
    stability: server.stability || client.stability,
  };
}

// Combined check - gets status from both server and client
export async function checkAPIKeys(): Promise<APIKeyStatus> {
  // Get server status
  const serverStatus = await checkServerAPIKeys();

  // Get client keys from store (need to access outside React)
  let clientStatus = getEmptyStatus();

  if (typeof window !== "undefined") {
    try {
      const stored = sessionStorage.getItem("emergency-youtube-api-keys");
      if (stored) {
        const parsed = JSON.parse(stored);
        if (parsed.state?.keys) {
          clientStatus = checkClientAPIKeys(parsed.state.keys);
        }
      }
    } catch (e) {
      console.error("Error reading client keys:", e);
    }
  }

  // Merge both
  return mergeAPIKeyStatus(serverStatus, clientStatus);
}

export function getRequiredKeysForStep(step: number): (keyof APIKeyStatus)[] {
  switch (step) {
    case 1:
      return ["youtube"];
    case 2:
      return ["openai", "google", "anthropic"]; // At least one AI provider
    case 4:
      return ["openai", "google", "anthropic"]; // AI for generation
    case 5:
      return ["pexels", "pixabay", "unsplash", "json2video"];
    case 6:
      return ["youtube"];
    default:
      return [];
  }
}

export function hasRequiredKeys(
  status: APIKeyStatus,
  step: number
): { hasAll: boolean; missing: string[] } {
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const _required = getRequiredKeysForStep(step);
  const missing: string[] = [];

  // For AI providers, we need at least one
  if (step === 2 || step === 4) {
    const aiProviders = ["openai", "google", "anthropic"] as const;
    const hasAnyAI = aiProviders.some((provider) => status[provider]);
    if (!hasAnyAI) {
      missing.push("At least one AI provider (OpenAI, Google, or Anthropic)");
    }
  }

  // For media, we need at least one
  if (step === 5) {
    const mediaProviders = ["pexels", "pixabay", "unsplash"] as const;
    const hasAnyMedia = mediaProviders.some((provider) => status[provider]);
    if (!hasAnyMedia) {
      missing.push("At least one media provider (Pexels, Pixabay, or Unsplash)");
    }
    if (!status.json2video) {
      missing.push("JSON2Video");
    }
  }

  // YouTube is always required for steps 1 and 6
  if ((step === 1 || step === 6) && !status.youtube) {
    missing.push("YouTube API");
  }

  return {
    hasAll: missing.length === 0,
    missing,
  };
}

```

---
#### `lib/documentation-export.ts`

```
// Documentation Export Utilities
// Handles PDF and Markdown exports for the Living Documentation module

export interface DocumentationTab {
  id: string;
  title: string;
  icon: string;
  content: string;
}

// Convert HTML content to clean Markdown
export function htmlToMarkdown(html: string, title: string): string {
  // Remove HTML tags and convert to markdown structure
  let markdown = `# ${title}\n\n`;
  markdown += `*Exportado em: ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}*\n\n---\n\n`;

  // Basic HTML to Markdown conversion
  const content = html
    // Headers
    .replace(/<h1[^>]*>(.*?)<\/h1>/gi, '# $1\n\n')
    .replace(/<h2[^>]*>(.*?)<\/h2>/gi, '## $1\n\n')
    .replace(/<h3[^>]*>(.*?)<\/h3>/gi, '### $1\n\n')
    .replace(/<h4[^>]*>(.*?)<\/h4>/gi, '#### $1\n\n')
    // Paragraphs and breaks
    .replace(/<p[^>]*>(.*?)<\/p>/gi, '$1\n\n')
    .replace(/<br\s*\/?>/gi, '\n')
    // Lists
    .replace(/<ul[^>]*>/gi, '\n')
    .replace(/<\/ul>/gi, '\n')
    .replace(/<ol[^>]*>/gi, '\n')
    .replace(/<\/ol>/gi, '\n')
    .replace(/<li[^>]*>(.*?)<\/li>/gi, '- $1\n')
    // Bold and italic
    .replace(/<strong[^>]*>(.*?)<\/strong>/gi, '**$1**')
    .replace(/<b[^>]*>(.*?)<\/b>/gi, '**$1**')
    .replace(/<em[^>]*>(.*?)<\/em>/gi, '*$1*')
    .replace(/<i[^>]*>(.*?)<\/i>/gi, '*$1*')
    // Code
    .replace(/<code[^>]*>(.*?)<\/code>/gi, '`$1`')
    .replace(/<pre[^>]*>(.*?)<\/pre>/gi, '```\n$1\n```\n')
    // Links
    .replace(/<a[^>]*href="([^"]*)"[^>]*>(.*?)<\/a>/gi, '[$2]($1)')
    // Tables
    .replace(/<table[^>]*>/gi, '\n')
    .replace(/<\/table>/gi, '\n')
    .replace(/<thead[^>]*>/gi, '')
    .replace(/<\/thead>/gi, '')
    .replace(/<tbody[^>]*>/gi, '')
    .replace(/<\/tbody>/gi, '')
    .replace(/<tr[^>]*>/gi, '|')
    .replace(/<\/tr>/gi, '|\n')
    .replace(/<th[^>]*>(.*?)<\/th>/gi, ' $1 |')
    .replace(/<td[^>]*>(.*?)<\/td>/gi, ' $1 |')
    // Divs and spans
    .replace(/<div[^>]*>/gi, '\n')
    .replace(/<\/div>/gi, '\n')
    .replace(/<span[^>]*>(.*?)<\/span>/gi, '$1')
    // Remove remaining HTML tags
    .replace(/<[^>]+>/g, '')
    // Clean up whitespace
    .replace(/\n{3,}/g, '\n\n')
    .replace(/&nbsp;/g, ' ')
    .replace(/&amp;/g, '&')
    .replace(/&lt;/g, '<')
    .replace(/&gt;/g, '>')
    .replace(/&quot;/g, '"')
    .trim();

  return markdown + content;
}

// Download file helper
export function downloadFile(content: string, filename: string, mimeType: string): void {
  const blob = new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// Export single tab as Markdown
export function exportTabAsMarkdown(tab: DocumentationTab): void {
  const markdown = tab.content;
  const filename = `documentacao-${tab.id}-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(markdown, filename, 'text/markdown;charset=utf-8');
}

// Export all tabs as consolidated Markdown
export function exportAllTabsAsMarkdown(tabs: DocumentationTab[]): void {
  let consolidatedMarkdown = `# Documentação Viva do Sistema - Emergency YouTube

*Sistema de Automação de Produção de Vídeos para YouTube*

**Exportado em:** ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}

---

## Índice

${tabs.map((tab, index) => `${index + 1}. [${tab.title}](#${tab.id})`).join('\n')}

---

`;

  tabs.forEach((tab, index) => {
    consolidatedMarkdown += `\n\n${'='.repeat(80)}\n`;
    consolidatedMarkdown += `# ${index + 1}. ${tab.title}\n`;
    consolidatedMarkdown += `${'='.repeat(80)}\n\n`;
    consolidatedMarkdown += tab.content;
    consolidatedMarkdown += '\n\n';
  });

  consolidatedMarkdown += `\n---\n\n*Documento gerado automaticamente pelo módulo de Documentação Viva do Emergency YouTube*`;

  const filename = `documentacao-completa-emergency-youtube-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(consolidatedMarkdown, filename, 'text/markdown;charset=utf-8');
}

// Generate PDF using browser print
export function exportTabAsPDF(tabId: string, tabTitle: string): void {
  const printWindow = window.open('', '_blank');
  if (!printWindow) {
    alert('Por favor, permita pop-ups para exportar PDF');
    return;
  }

  const content = document.getElementById(`tab-content-${tabId}`);
  if (!content) return;

  printWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${tabTitle} - Documentação Emergency YouTube</title>
      <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          line-height: 1.6;
          color: #1a1a1a;
          padding: 40px;
          max-width: 800px;
          margin: 0 auto;
        }

        h1 {
          font-size: 28px;
          font-weight: 700;
          margin-bottom: 24px;
          color: #111;
          border-bottom: 3px solid #6366f1;
          padding-bottom: 12px;
        }

        h2 {
          font-size: 22px;
          font-weight: 600;
          margin: 32px 0 16px 0;
          color: #222;
        }

        h3 {
          font-size: 18px;
          font-weight: 600;
          margin: 24px 0 12px 0;
          color: #333;
        }

        h4 {
          font-size: 16px;
          font-weight: 600;
          margin: 20px 0 10px 0;
          color: #444;
        }

        p {
          margin-bottom: 12px;
          color: #333;
        }

        ul, ol {
          margin: 12px 0 12px 24px;
        }

        li {
          margin-bottom: 6px;
        }

        table {
          width: 100%;
          border-collapse: collapse;
          margin: 16px 0;
        }

        th, td {
          border: 1px solid #ddd;
          padding: 10px;
          text-align: left;
        }

        th {
          background: #f5f5f5;
          font-weight: 600;
        }

        code {
          background: #f5f5f5;
          padding: 2px 6px;
          border-radius: 4px;
          font-family: 'Monaco', 'Consolas', monospace;
          font-size: 14px;
        }

        pre {
          background: #1a1a1a;
          color: #f0f0f0;
          padding: 16px;
          border-radius: 8px;
          overflow-x: auto;
          margin: 16px 0;
        }

        .badge {
          display: inline-block;
          padding: 4px 10px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 500;
        }

        .badge-green { background: #dcfce7; color: #166534; }
        .badge-yellow { background: #fef9c3; color: #854d0e; }
        .badge-red { background: #fee2e2; color: #991b1b; }
        .badge-blue { background: #dbeafe; color: #1e40af; }

        .diagram {
          background: #fafafa;
          border: 1px solid #e5e5e5;
          border-radius: 8px;
          padding: 20px;
          margin: 16px 0;
        }

        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 1px solid #e5e5e5;
          font-size: 12px;
          color: #666;
          text-align: center;
        }

        @media print {
          body { padding: 20px; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <h1>${tabTitle}</h1>
      <p style="color: #666; font-size: 14px; margin-bottom: 24px;">
        Emergency YouTube - Documentação Viva do Sistema<br>
        Exportado em: ${new Date().toLocaleDateString('pt-BR', {
          day: '2-digit',
          month: 'long',
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        })}
      </p>
      ${content.innerHTML}
      <div class="footer">
        Documento gerado pelo módulo de Documentação Viva - Emergency YouTube
      </div>
    </body>
    </html>
  `);

  printWindow.document.close();
  printWindow.focus();

  setTimeout(() => {
    printWindow.print();
  }, 500);
}

```

---
#### `lib/get-api-key.ts`

```
import { NextRequest } from "next/server";

// Mapeamento de headers para variáveis de ambiente
const KEY_MAPPING: Record<string, string> = {
  "x-youtube-api-key": "YOUTUBE_API_KEY",
  "x-youtube-channel-id": "YOUTUBE_CHANNEL_ID",
  "x-openai-api-key": "OPENAI_API_KEY",
  "x-google-api-key": "GOOGLE_GENERATIVE_AI_API_KEY",
  "x-anthropic-api-key": "ANTHROPIC_API_KEY",
  "x-pexels-api-key": "PEXELS_API_KEY",
  "x-pixabay-api-key": "PIXABAY_API_KEY",
  "x-unsplash-api-key": "UNSPLASH_ACCESS_KEY",
  "x-json2video-api-key": "JSON2VIDEO_API_KEY",
  "x-elevenlabs-api-key": "ELEVENLABS_API_KEY",
  "x-tavily-api-key": "TAVILY_API_KEY",
  "x-replicate-api-key": "REPLICATE_API_TOKEN",
  "x-stability-api-key": "STABILITY_API_KEY",
};

/**
 * Obtém uma API key, priorizando:
 * 1. Header da requisição (chave da sessão do usuário)
 * 2. Variável de ambiente do servidor
 */
export function getAPIKey(
  request: NextRequest,
  headerName: string
): string | undefined {
  // Primeiro, tentar obter do header
  const headerValue = request.headers.get(headerName);
  if (headerValue) {
    return headerValue;
  }

  // Segundo, tentar obter da variável de ambiente
  const envVar = KEY_MAPPING[headerName];
  if (envVar) {
    return process.env[envVar];
  }

  return undefined;
}

/**
 * Obtém múltiplas API keys de uma vez
 */
export function getAPIKeys(
  request: NextRequest,
  keys: string[]
): Record<string, string | undefined> {
  const result: Record<string, string | undefined> = {};
  for (const key of keys) {
    result[key] = getAPIKey(request, key);
  }
  return result;
}

// Helpers específicos para cada serviço
export function getYouTubeKeys(request: NextRequest) {
  return {
    apiKey: getAPIKey(request, "x-youtube-api-key"),
    channelId: getAPIKey(request, "x-youtube-channel-id"),
  };
}

export function getOpenAIKey(request: NextRequest) {
  return getAPIKey(request, "x-openai-api-key");
}

export function getGoogleKey(request: NextRequest) {
  return getAPIKey(request, "x-google-api-key");
}

export function getAnthropicKey(request: NextRequest) {
  return getAPIKey(request, "x-anthropic-api-key");
}

export function getPexelsKey(request: NextRequest) {
  return getAPIKey(request, "x-pexels-api-key");
}

export function getPixabayKey(request: NextRequest) {
  return getAPIKey(request, "x-pixabay-api-key");
}

export function getUnsplashKey(request: NextRequest) {
  return getAPIKey(request, "x-unsplash-api-key");
}

export function getJSON2VideoKey(request: NextRequest) {
  return getAPIKey(request, "x-json2video-api-key");
}

export function getElevenLabsKey(request: NextRequest) {
  return getAPIKey(request, "x-elevenlabs-api-key");
}

export function getTavilyKey(request: NextRequest) {
  return getAPIKey(request, "x-tavily-api-key");
}

export function getReplicateKey(request: NextRequest) {
  return getAPIKey(request, "x-replicate-api-key");
}

export function getStabilityKey(request: NextRequest) {
  return getAPIKey(request, "x-stability-api-key");
}

```

---
#### `lib/store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";
import {
  WorkflowStep,
  ContextData,
  ResearchData,
  ProposalData,
  StoryboardData,
  RenderData,
  UploadData,
  GuidelinesData,
  Diretriz,
} from "@/types";
import { v4 as uuidv4 } from "uuid";

// ============================================
// Workflow Store
// ============================================
interface WorkflowStore {
  currentStep: WorkflowStep;
  context: ContextData | null;
  research: ResearchData | null;
  proposal: ProposalData | null;
  storyboard: StoryboardData | null;
  render: RenderData | null;
  upload: UploadData | null;

  // Navigation
  setStep: (step: WorkflowStep) => void;
  canNavigateToStep: (step: WorkflowStep) => boolean;

  // Context (Step 1)
  setContext: (context: ContextData) => void;
  clearContext: () => void;

  // Research (Step 2)
  setResearch: (research: ResearchData) => void;
  clearResearch: () => void;

  // Proposal (Step 4)
  setProposal: (proposal: ProposalData) => void;
  updateProposal: (updates: Partial<ProposalData>) => void;
  clearProposal: () => void;

  // Storyboard (Step 5)
  setStoryboard: (storyboard: StoryboardData) => void;
  updateStoryboard: (updates: Partial<StoryboardData>) => void;
  clearStoryboard: () => void;

  // Render (Step 5)
  setRender: (render: RenderData) => void;
  updateRender: (updates: Partial<RenderData>) => void;
  clearRender: () => void;

  // Upload (Step 6)
  setUpload: (upload: UploadData) => void;
  updateUpload: (updates: Partial<UploadData>) => void;
  clearUpload: () => void;

  // Reset all
  resetWorkflow: () => void;
}

export const useWorkflowStore = create<WorkflowStore>()(
  persist(
    (set, get) => ({
      currentStep: 1,
      context: null,
      research: null,
      proposal: null,
      storyboard: null,
      render: null,
      upload: null,

      setStep: (step) => {
        if (get().canNavigateToStep(step)) {
          set({ currentStep: step });
        }
      },

      canNavigateToStep: (step) => {
        const { context, research, proposal, storyboard } = get();

        switch (step) {
          case 1:
            return true;
          case 2:
            return context !== null;
          case 4:
            return research !== null;
          case 5:
            return proposal !== null && proposal.allApproved;
          case 6:
            return storyboard !== null;
          default:
            return false;
        }
      },

      setContext: (context) => set({ context }),
      clearContext: () => set({ context: null }),

      setResearch: (research) => set({ research }),
      clearResearch: () => set({ research: null }),

      setProposal: (proposal) => set({ proposal }),
      updateProposal: (updates) =>
        set((state) => ({
          proposal: state.proposal ? { ...state.proposal, ...updates } : null,
        })),
      clearProposal: () => set({ proposal: null }),

      setStoryboard: (storyboard) => set({ storyboard }),
      updateStoryboard: (updates) =>
        set((state) => ({
          storyboard: state.storyboard
            ? { ...state.storyboard, ...updates }
            : null,
        })),
      clearStoryboard: () => set({ storyboard: null }),

      setRender: (render) => set({ render }),
      updateRender: (updates) =>
        set((state) => ({
          render: state.render ? { ...state.render, ...updates } : null,
        })),
      clearRender: () => set({ render: null }),

      setUpload: (upload) => set({ upload }),
      updateUpload: (updates) =>
        set((state) => ({
          upload: state.upload ? { ...state.upload, ...updates } : null,
        })),
      clearUpload: () => set({ upload: null }),

      resetWorkflow: () =>
        set({
          currentStep: 1,
          context: null,
          research: null,
          proposal: null,
          storyboard: null,
          render: null,
          upload: null,
        }),
    }),
    {
      name: "emergency-youtube-workflow",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// Guidelines Store (Global - Not a step)
// ============================================
interface GuidelinesStore {
  guidelines: GuidelinesData;

  // CRUD Operations
  addDiretriz: (diretriz: Omit<Diretriz, "id" | "createdAt" | "updatedAt">) => void;
  updateDiretriz: (id: string, updates: Partial<Diretriz>) => void;
  deleteDiretriz: (id: string) => void;
  toggleDiretriz: (id: string) => void;

  // Getters
  getActiveDiretrizes: () => Diretriz[];
  getDiretrizesForScope: (scope: Diretriz["appliesTo"][number]) => Diretriz[];
}

const defaultGuidelines: GuidelinesData = {
  diretrizes: [],
  updatedAt: new Date().toISOString(),
};

export const useGuidelinesStore = create<GuidelinesStore>()(
  persist(
    (set, get) => ({
      guidelines: defaultGuidelines,

      addDiretriz: (diretriz) => {
        const now = new Date().toISOString();
        const newDiretriz: Diretriz = {
          ...diretriz,
          id: uuidv4(),
          createdAt: now,
          updatedAt: now,
        };
        set((state) => ({
          guidelines: {
            diretrizes: [...state.guidelines.diretrizes, newDiretriz],
            updatedAt: now,
          },
        }));
      },

      updateDiretriz: (id, updates) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, ...updates, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      deleteDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.filter((d) => d.id !== id),
            updatedAt: now,
          },
        }));
      },

      toggleDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, active: !d.active, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      getActiveDiretrizes: () => {
        return get().guidelines.diretrizes.filter((d) => d.active);
      },

      getDiretrizesForScope: (scope) => {
        return get()
          .guidelines.diretrizes.filter((d) => d.active && d.appliesTo.includes(scope));
      },
    }),
    {
      name: "emergency-youtube-guidelines",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// UI Store (Non-persistent)
// ============================================
interface UIStore {
  isSidebarOpen: boolean;
  isGuidelinesModalOpen: boolean;
  isApiKeyModalOpen: boolean;
  isConnectApisModalOpen: boolean;
  activeModal: string | null;

  toggleSidebar: () => void;
  setSidebarOpen: (open: boolean) => void;
  openGuidelinesModal: () => void;
  closeGuidelinesModal: () => void;
  openApiKeyModal: () => void;
  closeApiKeyModal: () => void;
  setConnectApisModalOpen: (open: boolean) => void;
  setActiveModal: (modal: string | null) => void;
}

export const useUIStore = create<UIStore>()((set) => ({
  isSidebarOpen: true,
  isGuidelinesModalOpen: false,
  isApiKeyModalOpen: false,
  isConnectApisModalOpen: false,
  activeModal: null,

  toggleSidebar: () => set((state) => ({ isSidebarOpen: !state.isSidebarOpen })),
  setSidebarOpen: (open) => set({ isSidebarOpen: open }),
  openGuidelinesModal: () => set({ isGuidelinesModalOpen: true }),
  closeGuidelinesModal: () => set({ isGuidelinesModalOpen: false }),
  openApiKeyModal: () => set({ isApiKeyModalOpen: true }),
  closeApiKeyModal: () => set({ isApiKeyModalOpen: false }),
  setConnectApisModalOpen: (open) => set({ isConnectApisModalOpen: open }),
  setActiveModal: (modal) => set({ activeModal: modal }),
}));

```

---
#### `lib/system/api-registry.ts`

```
export type ApiStatus = "ONLINE" | "OFFLINE";

export interface ApiCheck {
  name: string;
  env: string;
  check: () => Promise<ApiStatus>;
}

export const apiRegistry: ApiCheck[] = [
  {
    name: "GEMINI",
    env: "GOOGLE_GENERATIVE_AI_API_KEY",
    check: async () => {
      return process.env.GOOGLE_GENERATIVE_AI_API_KEY ? "ONLINE" : "OFFLINE";
    }
  }
];

```

---
#### `lib/system/boot.ts`

```
import { apiRegistry, ApiStatus } from "./api-registry";

export interface BootReport {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, ApiStatus>;
}

export async function systemBoot(): Promise<BootReport> {
  const apis: Record<string, ApiStatus> = {};
  let degraded = false;

  for (const api of apiRegistry) {
    const status = await api.check();
    apis[api.name] = status;
    if (status !== "ONLINE") degraded = true;
  }

  return {
    status: degraded ? "DEGRADED" : "ONLINE",
    apis
  };
}

```

---
#### `lib/utils.ts`

```
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatDuration(seconds: number): string {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = Math.floor(seconds % 60);

  if (hours > 0) {
    return `${hours}:${minutes.toString().padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
  }
  return `${minutes}:${secs.toString().padStart(2, "0")}`;
}

export function formatNumber(num: number): string {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + "M";
  }
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + "K";
  }
  return num.toString();
}

export function formatDate(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
  });
}

export function formatDateTime(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
    hour: "2-digit",
    minute: "2-digit",
  });
}

export function truncateText(text: string, maxLength: number): string {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength - 3) + "...";
}

export function generateId(): string {
  return Math.random().toString(36).substring(2) + Date.now().toString(36);
}

export function debounce<T extends (...args: unknown[]) => unknown>(
  func: T,
  wait: number
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout | null = null;

  return (...args: Parameters<T>) => {
    if (timeout) clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
}

export function parseCSV(csvText: string): Record<string, string>[] {
  const lines = csvText.trim().split("\n");
  if (lines.length < 2) return [];

  const headers = lines[0].split(",").map((h) => h.trim().replace(/"/g, ""));
  const rows: Record<string, string>[] = [];

  for (let i = 1; i < lines.length; i++) {
    const values = parseCSVLine(lines[i]);
    if (values.length === headers.length) {
      const row: Record<string, string> = {};
      headers.forEach((header, index) => {
        row[header] = values[index];
      });
      rows.push(row);
    }
  }

  return rows;
}

function parseCSVLine(line: string): string[] {
  const values: string[] = [];
  let current = "";
  let inQuotes = false;

  for (let i = 0; i < line.length; i++) {
    const char = line[i];

    if (char === '"') {
      inQuotes = !inQuotes;
    } else if (char === "," && !inQuotes) {
      values.push(current.trim());
      current = "";
    } else {
      current += char;
    }
  }

  values.push(current.trim());
  return values;
}

export function downloadJSON(data: object, filename: string): void {
  const blob = new Blob([JSON.stringify(data, null, 2)], {
    type: "application/json",
  });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

export function estimateReadingTime(text: string, wordsPerMinute = 150): number {
  const wordCount = text.split(/\s+/).length;
  return Math.ceil((wordCount / wordsPerMinute) * 60);
}

```

---
#### `next.config.ts`

```
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Build will fail on TypeScript/ESLint errors (production-safe)
};

export default nextConfig;

```

---
#### `package.json`

```
{
  "name": "emergecy-youtube",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "@ai-sdk/anthropic": "^1.2.12",
    "@ai-sdk/google": "^1.2.22",
    "@ai-sdk/openai": "^1.3.24",
    "@google/generative-ai": "^0.24.1",
    "ai": "^4.3.19",
    "clsx": "^2.1.1",
    "framer-motion": "^11.15.0",
    "lucide-react": "^0.469.0",
    "next": "15.1.11",
    "papaparse": "^5.4.1",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-dropzone": "^14.3.5",
    "tailwind-merge": "^2.6.0",
    "uuid": "^11.0.4",
    "zod": "^3.25.76",
    "zustand": "^5.0.2"
  },
  "devDependencies": {
    "@types/node": "^22.10.5",
    "@types/papaparse": "^5.3.15",
    "@types/react": "^19.0.2",
    "@types/react-dom": "^19.0.2",
    "@types/uuid": "^10.0.0",
    "autoprefixer": "^10.4.20",
    "eslint": "^9.17.0",
    "eslint-config-next": "15.1.11",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.17",
    "typescript": "^5.7.2"
  }
}

```

---
#### `tailwind.config.ts`

```
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        background: "var(--background)",
        foreground: "var(--foreground)",
        primary: {
          50: "#fef2f2",
          100: "#fee2e2",
          200: "#fecaca",
          300: "#fca5a5",
          400: "#f87171",
          500: "#ef4444",
          600: "#dc2626",
          700: "#b91c1c",
          800: "#991b1b",
          900: "#7f1d1d",
          950: "#450a0a",
        },
        accent: {
          50: "#fefce8",
          100: "#fef9c3",
          200: "#fef08a",
          300: "#fde047",
          400: "#facc15",
          500: "#eab308",
          600: "#ca8a04",
          700: "#a16207",
          800: "#854d0e",
          900: "#713f12",
          950: "#422006",
        },
      },
      animation: {
        "fade-in": "fadeIn 0.3s ease-in-out",
        "slide-up": "slideUp 0.3s ease-out",
        "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
      },
      keyframes: {
        fadeIn: {
          "0%": { opacity: "0" },
          "100%": { opacity: "1" },
        },
        slideUp: {
          "0%": { transform: "translateY(10px)", opacity: "0" },
          "100%": { transform: "translateY(0)", opacity: "1" },
        },
      },
    },
  },
  plugins: [],
};

export default config;

```

---
#### `tsconfig.json`

```
{
  "compilerOptions": {
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "target": "ES2017"
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}

```

====================================================================
## Branch: remotes/origin/gemini/feature-workflow-layout
====================================================================

### File Structure
```
.env.example
app/actions/github.ts
app/actions/settings.ts
app/actions/vercel.ts
app/api/ai/generate/route.ts
app/api/ai/stream/route.ts
app/api/approve/route.ts
app/api/config/keys/route.ts
app/api/config/test-key/route.ts
app/api/files/download/route.ts
app/api/files/list/route.ts
app/api/health/route.ts
app/api/images/generate/route.ts
app/api/inngest/route.ts
app/api/media/search/route.ts
app/api/models/route.ts
app/api/proposal/description/route.ts
app/api/proposal/rationale/route.ts
app/api/proposal/script/route.ts
app/api/proposal/soundtrack/route.ts
app/api/proposal/tags/route.ts
app/api/proposal/titles/route.ts
app/api/render/route.ts
app/api/research/route.ts
app/api/status/route.ts
app/api/storyboard/route.ts
app/api/system/health/route.ts
app/api/test-connection/route.ts
app/api/tts/route.ts
app/api/upload/route.ts
app/api/youtube/channel/route.ts
app/api/youtube/upload/route.ts
app/approve/[token]/page.tsx
app/approve/feedback-sent/page.tsx
app/approve/success/page.tsx
app/documentation/design-system/page.tsx
app/documentation/page.tsx
app/globals.css
app/layout.tsx
app/page.tsx
app/settings/page.tsx
app/step/1-input/page.tsx
app/step/2-research/page.tsx
app/step/4-proposal/page.tsx
app/step/5-studio/page.tsx
app/step/6-upload/page.tsx
app/step/layout.tsx
app/workflow/page.tsx
components/AIModelSelector.tsx
components/ApiKeysModal.tsx
components/AssetCard.tsx
components/ConnectApisModal.tsx
components/FileDropzone.tsx
components/GuidelinesModal.tsx
components/Layout.tsx
components/ModelsExplorer.tsx
components/VercelToolbar.tsx
components/design-system/ColorSwatch.tsx
components/design-system/ComponentPreview.tsx
components/design-system/GradientCard.tsx
components/design-system/TypographySample.tsx
components/design-system/index.ts
components/documentation/AnimatedSection.tsx
components/documentation/CopyButton.tsx
components/documentation/CurrentStateTab.tsx
components/documentation/DecisionsTab.tsx
components/documentation/GenesisTab.tsx
components/documentation/IntegrationsTab.tsx
components/documentation/ShareButtons.tsx
components/documentation/SystemVisionTab.tsx
components/documentation/TechStackTab.tsx
components/documentation/content.ts
components/documentation/index.ts
components/proposal/ThumbnailEditor.tsx
components/settings/AppearanceTab.tsx
components/settings/DocsManagerTab.tsx
components/settings/FilesTab.tsx
components/settings/IntegrationsTab.tsx
components/settings/LogsTab.tsx
components/settings/ProfileTab.tsx
components/settings/SystemMonitorTab.tsx
components/studio/AIMediaGenerator.tsx
components/studio/MediaSearchModal.tsx
components/studio/MediaUploader.tsx
components/system/SystemStatus.tsx
components/ui/ActivityLog.tsx
components/ui/Badge.tsx
components/ui/Button.tsx
components/ui/Card.tsx
components/ui/Input.tsx
components/ui/Modal.tsx
components/ui/ProgressBar.tsx
components/ui/Select.tsx
components/ui/StepIndicator.tsx
components/ui/StreamingText.tsx
components/ui/Textarea.tsx
components/ui/Toggle.tsx
components/workflow/ModeSelector.tsx
components/workflow/WorkflowTracker.tsx
lib/agents/adaptive-analysis-agent.ts
lib/agents/index.ts
lib/agents/research-agent.ts
lib/agents/script-agent.ts
lib/ai.ts
lib/api-keys-store.ts
lib/api-keys.ts
lib/branding.ts
lib/db/index.ts
lib/db/prisma.ts
lib/design-tokens.ts
lib/docs-manager.ts
lib/documentation-export.ts
lib/get-api-key.ts
lib/inngest/client.ts
lib/inngest/functions/video-pipeline.ts
lib/integration-tokens.ts
lib/logger.ts
lib/services/notification.service.ts
lib/services/render.service.ts
lib/services/research.service.ts
lib/services/script.service.ts
lib/services/spreadsheet.service.ts
lib/services/storyboard.service.ts
lib/services/upload.service.ts
lib/share-context.tsx
lib/store.ts
lib/system/api-registry.ts
lib/system/boot.ts
lib/user-profile.ts
lib/utils.ts
lib/workflow-logger.ts
lib/workflow-modes.ts
next.config.js
next.config.ts
package.json
prisma/schema.prisma
tailwind.config.ts
tsconfig.json
```

### File Content
---
#### `.env.example`

```
# YouTube API
YOUTUBE_API_KEY=
YOUTUBE_CHANNEL_ID=
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=

# AI Providers
OPENAI_API_KEY=
GOOGLE_GENERATIVE_AI_API_KEY=
ANTHROPIC_API_KEY=

# Media APIs
PEXELS_API_KEY=
PIXABAY_API_KEY=
UNSPLASH_ACCESS_KEY=

# Video Rendering
JSON2VIDEO_API_KEY=

# Optional: Text-to-Speech
ELEVENLABS_API_KEY=

# Optional: Research
TAVILY_API_KEY=

# Optional: Image Generation
REPLICATE_API_TOKEN=
STABILITY_API_KEY=

# GitHub Integration
GITHUB_TOKEN=

# Vercel Integration (for comments and deployments)
VERCEL_TOKEN=
VERCEL_PROJECT_ID=
VERCEL_TEAM_ID=

# Vercel Blob Storage (upload de arquivos - avatares, thumbnails, etc)
BLOB_READ_WRITE_TOKEN=

# Email Notifications (Resend - sistema de aprovação)
RESEND_API_KEY=
NOTIFICATION_EMAIL=

# Application URL (para links em emails e notificações)
NEXT_PUBLIC_URL=

# Vercel Toolbar - Habilita menções @Claude em produção
# Para funcionar em produção, configure também as variáveis acima
NEXT_PUBLIC_VERCEL_ENV=production

```

---
#### `app/actions/github.ts`

```
'use server';

import { getIntegrationTokens } from '@/lib/integration-tokens';
import type { GitHubCommit, GitHubCommitsResponse } from '@/types';

/**
 * Fetch recent commits from GitHub
 */
export async function fetchGitHubCommits(limit: number = 20): Promise<GitHubCommitsResponse> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.github) {
      return {
        commits: [],
        error: 'GitHub integration not configured',
      };
    }

    const { token, owner, repo } = tokens.github;

    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}/commits?per_page=${limit}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          Accept: 'application/vnd.github.v3+json',
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        commits: [],
        error: `GitHub API error: ${response.status} - ${errorText}`,
      };
    }

    const data = await response.json();

    interface GitHubAPICommit {
      sha: string;
      html_url: string;
      commit: {
        message: string;
        author: {
          name: string;
          date: string;
        };
      };
    }

    const commits: GitHubCommit[] = (data as GitHubAPICommit[]).map((commit) => ({
      sha: commit.sha.substring(0, 7),
      message: commit.commit.message,
      author: commit.commit.author.name,
      date: commit.commit.author.date,
      url: commit.html_url,
    }));

    return { commits };
  } catch (error) {
    console.error('Failed to fetch GitHub commits:', error);
    return {
      commits: [],
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Test GitHub connection
 */
export async function testGitHubConnection(): Promise<{ success: boolean; error?: string }> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.github) {
      return {
        success: false,
        error: 'GitHub integration not configured',
      };
    }

    const { token, owner, repo } = tokens.github;

    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          Accept: 'application/vnd.github.v3+json',
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        success: false,
        error: `GitHub API error: ${response.status} - ${errorText}`,
      };
    }

    return { success: true };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Generate auto-update changelog from recent commits
 */
export async function generateChangelogFromCommits(): Promise<string> {
  try {
    const { commits, error } = await fetchGitHubCommits(10);

    if (error || commits.length === 0) {
      return '# Changelog\n\nNenhum commit encontrado ou erro ao buscar dados.';
    }

    let changelog = '# Changelog Automático\n\n';
    changelog += `*Última atualização: ${new Date().toLocaleString('pt-BR')}*\n\n`;
    changelog += '## Commits Recentes\n\n';

    commits.forEach((commit) => {
      const date = new Date(commit.date).toLocaleDateString('pt-BR');
      changelog += `- **${date}** - ${commit.message} (${commit.author})\n`;
    });

    return changelog;
  } catch (error) {
    console.error('Failed to generate changelog:', error);
    return '# Changelog\n\nErro ao gerar changelog.';
  }
}

```

---
#### `app/actions/settings.ts`

```
'use server';

import {
  getUserProfile,
  updateUserProfile as updateProfileLib,
} from '@/lib/user-profile';
import {
  getAllDocs,
  getDocById,
  getDocsByCategory,
  getVisibleDocs,
  createDoc as createDocLib,
  updateDoc as updateDocLib,
  deleteDoc as deleteDocLib,
  reorderDocs as reorderDocsLib,
} from '@/lib/docs-manager';
import {
  getIntegrationTokens,
  updateGitHubTokens as updateGitHubLib,
  updateVercelTokens as updateVercelLib,
  removeGitHubTokens as removeGitHubLib,
  removeVercelTokens as removeVercelLib,
} from '@/lib/integration-tokens';
import {
  logSystemEvent,
  getSystemLogs,
  clearSystemLogs as clearLogsLib,
  searchLogs as searchLogsLib,
  getLogsByLevel,
  getLogsBySource,
} from '@/lib/logger';
import {
  getBrandingConfig as getBrandingLib,
  updateBrandingConfig as updateBrandingLib,
  resetBrandingConfig as resetBrandingLib,
} from '@/lib/branding';
import type { UserProfile, DocPage, DocCategory, IntegrationTokens, SystemLog, LogLevel, LogSource, BrandingConfig } from '@/types';

// ============================================
// User Profile Actions
// ============================================

export async function getProfile(): Promise<UserProfile> {
  return getUserProfile();
}

export async function updateProfile(
  updates: Partial<Omit<UserProfile, 'id' | 'createdAt'>>
): Promise<UserProfile> {
  const profile = await updateProfileLib(updates);
  await logSystemEvent('info', 'user', 'Perfil atualizado');
  return profile;
}

// ============================================
// Documentation Actions
// ============================================

export async function getDocs() {
  return getAllDocs();
}

export async function getDoc(id: string) {
  return getDocById(id);
}

export async function getDocsByCateg(category: DocCategory) {
  return getDocsByCategory(category);
}

export async function getVisibleDocsAction() {
  return getVisibleDocs();
}

export async function createDocPage(
  doc: Omit<DocPage, 'id' | 'createdAt' | 'updatedAt'>
): Promise<DocPage> {
  const newDoc = await createDocLib(doc);
  await logSystemEvent('success', 'system', `Nova página de documentação criada: ${newDoc.title}`);
  return newDoc;
}

export async function updateDocPage(
  id: string,
  updates: Partial<Omit<DocPage, 'id' | 'createdAt'>>
): Promise<DocPage | null> {
  const updatedDoc = await updateDocLib(id, updates);
  if (updatedDoc) {
    await logSystemEvent('info', 'system', `Página de documentação atualizada: ${updatedDoc.title}`);
  }
  return updatedDoc;
}

export async function deleteDocPage(id: string): Promise<boolean> {
  const success = await deleteDocLib(id);
  if (success) {
    await logSystemEvent('warning', 'system', `Página de documentação removida: ID ${id}`);
  }
  return success;
}

export async function reorderDocPages(docIds: string[]): Promise<void> {
  await reorderDocsLib(docIds);
  await logSystemEvent('info', 'system', 'Ordem das páginas de documentação atualizada');
}

// ============================================
// Integration Tokens Actions
// ============================================

export async function getTokens(): Promise<IntegrationTokens> {
  return getIntegrationTokens();
}

export async function saveGitHubTokens(
  token: string,
  owner: string,
  repo: string
): Promise<IntegrationTokens> {
  const tokens = await updateGitHubLib(token, owner, repo);
  await logSystemEvent('success', 'system', `Integração GitHub configurada: ${owner}/${repo}`);
  return tokens;
}

export async function saveVercelTokens(
  token: string,
  projectId: string
): Promise<IntegrationTokens> {
  const tokens = await updateVercelLib(token, projectId);
  await logSystemEvent('success', 'system', `Integração Vercel configurada: ${projectId}`);
  return tokens;
}

export async function removeGitHubTokensAction(): Promise<IntegrationTokens> {
  const tokens = await removeGitHubLib();
  await logSystemEvent('warning', 'system', 'Integração GitHub removida');
  return tokens;
}

export async function removeVercelTokensAction(): Promise<IntegrationTokens> {
  const tokens = await removeVercelLib();
  await logSystemEvent('warning', 'system', 'Integração Vercel removida');
  return tokens;
}

// ============================================
// Logs Actions
// ============================================

export async function getLogs(limit?: number): Promise<SystemLog[]> {
  return getSystemLogs(limit);
}

export async function clearLogs(): Promise<void> {
  await clearLogsLib();
  await logSystemEvent('warning', 'system', 'Logs do sistema limpos');
}

export async function searchSystemLogs(query: string): Promise<SystemLog[]> {
  return searchLogsLib(query);
}

export async function getLogsByLevelAction(level: LogLevel): Promise<SystemLog[]> {
  return getLogsByLevel(level);
}

export async function getLogsBySourceAction(source: LogSource): Promise<SystemLog[]> {
  return getLogsBySource(source);
}

export async function addLog(
  level: LogLevel,
  source: LogSource,
  message: string,
  details?: Record<string, unknown>
): Promise<void> {
  await logSystemEvent(level, source, message, details);
}

// ============================================
// Branding Actions (White Label)
// ============================================

export async function getBranding(): Promise<BrandingConfig> {
  return getBrandingLib();
}

export async function updateBranding(
  updates: Partial<Omit<BrandingConfig, 'updatedAt'>>
): Promise<BrandingConfig> {
  const config = await updateBrandingLib(updates);
  await logSystemEvent('success', 'system', `Configuração de branding atualizada: ${config.systemName}`);
  return config;
}

export async function resetBranding(): Promise<BrandingConfig> {
  const config = await resetBrandingLib();
  await logSystemEvent('info', 'system', 'Branding resetado para padrão ORION');
  return config;
}

```

---
#### `app/actions/vercel.ts`

```
'use server';

import { getIntegrationTokens } from '@/lib/integration-tokens';
import type { VercelDeployment, VercelDeploymentsResponse, VercelDeploymentState } from '@/types';

/**
 * Fetch recent deployments from Vercel
 */
export async function fetchVercelDeployments(limit: number = 20): Promise<VercelDeploymentsResponse> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.vercel) {
      return {
        deployments: [],
        error: 'Vercel integration not configured',
      };
    }

    const { token, projectId } = tokens.vercel;

    const response = await fetch(
      `https://api.vercel.com/v6/deployments?projectId=${projectId}&limit=${limit}`,
      {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        deployments: [],
        error: `Vercel API error: ${response.status} - ${errorText}`,
      };
    }

    const data = await response.json();

    interface VercelAPIDeployment {
      uid: string;
      name: string;
      url: string;
      state: string;
      createdAt: number;
      readyState: string;
    }

    interface VercelAPIResponse {
      deployments: VercelAPIDeployment[];
    }

    const deployments: VercelDeployment[] = (data as VercelAPIResponse).deployments.map((deployment) => ({
      uid: deployment.uid,
      name: deployment.name,
      url: deployment.url,
      state: deployment.state as VercelDeploymentState,
      createdAt: deployment.createdAt,
      readyState: deployment.readyState,
    }));

    return { deployments };
  } catch (error) {
    console.error('Failed to fetch Vercel deployments:', error);
    return {
      deployments: [],
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Test Vercel connection
 */
export async function testVercelConnection(): Promise<{ success: boolean; error?: string }> {
  try {
    const tokens = await getIntegrationTokens();

    if (!tokens.vercel) {
      return {
        success: false,
        error: 'Vercel integration not configured',
      };
    }

    const { token } = tokens.vercel;

    const response = await fetch(
      'https://api.vercel.com/v2/user',
      {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }
    );

    if (!response.ok) {
      const errorText = await response.text();
      return {
        success: false,
        error: `Vercel API error: ${response.status} - ${errorText}`,
      };
    }

    return { success: true };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Get deployment status summary
 */
export async function getDeploymentSummary(): Promise<{
  total: number;
  ready: number;
  error: number;
  building: number;
}> {
  try {
    const { deployments } = await fetchVercelDeployments(50);

    const summary = {
      total: deployments.length,
      ready: deployments.filter(d => d.state === 'READY').length,
      error: deployments.filter(d => d.state === 'ERROR').length,
      building: deployments.filter(d => d.state === 'BUILDING').length,
    };

    return summary;
  } catch (error) {
    console.error('Failed to get deployment summary:', error);
    return {
      total: 0,
      ready: 0,
      error: 0,
      building: 0,
    };
  }
}

```

---
#### `app/api/ai/generate/route.ts`

```
import { createGoogleGenerativeAI } from '@ai-sdk/google';
import { createAnthropic } from '@ai-sdk/anthropic';
import { createOpenAI } from '@ai-sdk/openai';
import { streamObject } from 'ai';
import { z } from 'zod';

// Configuração segura dos provedores
const google = createGoogleGenerativeAI({ apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY });
const anthropic = createAnthropic({ apiKey: process.env.ANTHROPIC_API_KEY });
const openai = createOpenAI({ apiKey: process.env.OPENAI_API_KEY });

export const maxDuration = 60; // Permite gerações longas (Deep Research)

export async function POST(req: Request) {
  try {
    const { model, inputData, stepsData } = await req.json();

    // 1. Validação de Chaves (Para você ver o erro real se houver)
    if (model.includes('claude') && !process.env.ANTHROPIC_API_KEY) {
      throw new Error('ERRO CRÍTICO: Chave da Anthropic (ANTHROPIC_API_KEY) não encontrada no servidor.');
    }

    // 2. Seleção do Modelo Inteligente
    let selectedModel;
    if (model === 'gemini-2.0-flash') selectedModel = google('models/gemini-2.0-flash-exp');
    else if (model === 'gpt-4o') selectedModel = openai('gpt-4o');
    else if (model === 'claude-3-5-sonnet') selectedModel = anthropic('claude-3-5-sonnet-20240620');
    else selectedModel = google('models/gemini-1.5-flash'); // Fallback

    // 3. Montagem do Contexto "Deep Research" (Cruza Dados)
    const contextPrompt = `
      VOCÊ É UM ESTRATEGISTA DE YOUTUBE SÊNIOR E ESPECIALISTA EM DADOS.
      
      *** REGRA SUPREMA: A RESPOSTA DEVE SER 100% EM PORTUGUÊS DO BRASIL (PT-BR) ***
      
      SEU OBJETIVO:
      Realizar uma análise profunda, baseada em evidências, cruzando os dados internos do canal com tendências de mercado.
      
      DADOS DE ENTRADA (Analise tudo):
      - Métricas do Canal (CSV/JSON): ${JSON.stringify(inputData)}
      - Histórico/Steps Anteriores: ${JSON.stringify(stepsData)}
      
      DIRETRIZES DE ANÁLISE (Deep Research):
      1. NÃO seja genérico. Use números exatos dos dados fornecidos.
      2. Cruze a taxa de clique (CTR) com os títulos atuais e sugira melhorias específicas.
      3. Identifique padrões de retenção se houver dados de watchtime.
      4. Compare o desempenho do tema atual com a média do canal.
      
      ESTRUTURA DA RESPOSTA (JSON):
      Retorne um objeto JSON estrito com:
      - analise_interna: { pontos_fortes, pontos_fracos, padroes_ocultos }
      - analise_externa: { oportunidades_mercado, concorrencia, trends_atuais }
      - estrategia_sugerida: { titulo_matador, ideia_thumbnail, gancho_roteiro }
      - justificativa_baseada_em_dados: "Por que escolhi isso?"
    `;

    // 4. Geração com Estrutura Garantida (Zod)
    const result = await streamObject({
      model: selectedModel,
      system: "Você é um consultor expert de YouTube. Fale Português.",
      prompt: contextPrompt,
      schema: z.object({
        analise_interna: z.object({
          pontos_fortes: z.array(z.string()),
          pontos_fracos: z.array(z.string()),
          padroes_ocultos: z.string(),
        }),
        analise_externa: z.object({
          oportunidades_mercado: z.array(z.string()),
          trends_atuais: z.array(z.string()),
        }),
        estrategia: z.object({
          titulo_sugerido: z.string(),
          ideia_thumbnail: z.string(),
          explicacao_tecnica: z.string(),
        }),
      }),
    });

    return result.toTextStreamResponse();

  } catch (error) {
    console.error("ERRO NA GERAÇÃO:", error);
    const message = error instanceof Error ? error.message : 'Unknown error';
    return new Response(JSON.stringify({ error: message }), { status: 500 });
  }
}
```

---
#### `app/api/ai/stream/route.ts`

```
import { NextRequest } from "next/server";
import { streamText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      provider,
      model,
      systemPrompt,
      userPrompt,
      temperature = 0.7,
    } = body as {
      provider: AIProvider;
      model: string;
      systemPrompt: string;
      userPrompt: string;
      temperature?: number;
    };

    if (!provider || !model || !userPrompt) {
      return new Response(
        JSON.stringify({ error: "Missing required fields" }),
        { status: 400, headers: { "Content-Type": "application/json" } }
      );
    }

    // Get the appropriate model based on provider
    let aiModel;
    switch (provider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "OpenAI API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Google API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return new Response(
            JSON.stringify({ error: "Anthropic API key not configured" }),
            { status: 400, headers: { "Content-Type": "application/json" } }
          );
        }
        aiModel = anthropic(model);
        break;
      default:
        return new Response(
          JSON.stringify({ error: `Unknown provider: ${provider}` }),
          { status: 400, headers: { "Content-Type": "application/json" } }
        );
    }

    const result = streamText({
      model: aiModel,
      system: systemPrompt,
      prompt: userPrompt,
      temperature,
    });

    return result.toTextStreamResponse();
  } catch (error) {
    console.error("AI Streaming error:", error);
    return new Response(
      JSON.stringify({ error: error instanceof Error ? error.message : "AI streaming failed" }),
      { status: 500, headers: { "Content-Type": "application/json" } }
    );
  }
}

```

---
#### `app/api/approve/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@/lib/db';
import { inngest } from '@/lib/inngest/client';

/**
 * POST /api/approve
 * Approve a pending script via token
 */
export async function POST(request: NextRequest) {
  try {
    const { token, action, feedback } = await request.json();

    if (!token) {
      return NextResponse.json(
        { error: 'Token is required' },
        { status: 400 }
      );
    }

    // Find workflow state by token
    const workflowState = await prisma.workflowState.findUnique({
      where: { approvalToken: token },
      include: {
        project: {
          include: { script: true },
        },
      },
    });

    if (!workflowState) {
      return NextResponse.json(
        { error: 'Invalid or expired token' },
        { status: 404 }
      );
    }

    if (workflowState.project.status !== 'AWAITING_APPROVAL') {
      return NextResponse.json(
        { error: 'Project is not awaiting approval' },
        { status: 400 }
      );
    }

    if (action === 'approve') {
      // Update project status
      await prisma.project.update({
        where: { id: workflowState.projectId },
        data: { status: 'APPROVED' },
      });

      // Update script as approved
      await prisma.script.update({
        where: { projectId: workflowState.projectId },
        data: {
          approved: true,
          approvedAt: new Date(),
        },
      });

      // Send approval event to Inngest to continue workflow
      await inngest.send({
        name: 'project/approved',
        data: {
          projectId: workflowState.projectId,
          feedback: feedback || undefined,
        },
      });

      return NextResponse.json({
        success: true,
        message: 'Script approved successfully',
        projectId: workflowState.projectId,
      });
    } else if (action === 'request_changes') {
      // Update script with feedback
      await prisma.script.update({
        where: { projectId: workflowState.projectId },
        data: {
          feedback: feedback || 'Changes requested',
        },
      });

      // Update workflow state
      await prisma.workflowState.update({
        where: { projectId: workflowState.projectId },
        data: {
          currentStep: 'script_revision',
        },
      });

      return NextResponse.json({
        success: true,
        message: 'Feedback submitted for revision',
        projectId: workflowState.projectId,
      });
    }

    return NextResponse.json(
      { error: 'Invalid action' },
      { status: 400 }
    );
  } catch (error) {
    console.error('[Approve API] Error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

/**
 * GET /api/approve?token=xxx
 * Get project details for approval page
 */
export async function GET(request: NextRequest) {
  try {
    const token = request.nextUrl.searchParams.get('token');

    if (!token) {
      return NextResponse.json(
        { error: 'Token is required' },
        { status: 400 }
      );
    }

    const workflowState = await prisma.workflowState.findUnique({
      where: { approvalToken: token },
      include: {
        project: {
          include: {
            script: true,
            research: true,
          },
        },
      },
    });

    if (!workflowState) {
      return NextResponse.json(
        { error: 'Invalid or expired token' },
        { status: 404 }
      );
    }

    return NextResponse.json({
      project: {
        id: workflowState.project.id,
        name: workflowState.project.name,
        topic: workflowState.project.topic,
        status: workflowState.project.status,
      },
      script: workflowState.project.script
        ? {
            title: workflowState.project.script.title,
            content: workflowState.project.script.content,
            sections: workflowState.project.script.sections,
          }
        : null,
      research: workflowState.project.research
        ? {
            summary: workflowState.project.research.summary,
          }
        : null,
      workflow: {
        currentStep: workflowState.currentStep,
        approvalSentAt: workflowState.approvalSentAt,
      },
    });
  } catch (error) {
    console.error('[Approve API] Error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/config/keys/route.ts`

```
import { NextResponse } from "next/server";
import { APIKeyStatus } from "@/types";

export async function GET() {
  const status: APIKeyStatus = {
    youtube: !!(process.env.YOUTUBE_API_KEY && process.env.YOUTUBE_CHANNEL_ID),
    openai: !!process.env.OPENAI_API_KEY,
    google: !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    unsplash: !!process.env.UNSPLASH_ACCESS_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    replicate: !!process.env.REPLICATE_API_TOKEN,
    stability: !!process.env.STABILITY_API_KEY,
  };

  return NextResponse.json(status);
}

```

---
#### `app/api/config/test-key/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic'; // Força o Next.js a não cachear esse teste

export async function POST(req: Request) {
  try {
    // 1. Recebe os dados de forma segura
    const body = await req.json();
    
    // Normaliza os nomes dos campos (aceita tanto o formato novo quanto o antigo)
    const provider = body.provider || body.service || body.id; 
    let key = body.key || body.keyValue || body.apiKey;

    // Se a chave não veio no corpo, tenta pegar das variáveis de ambiente (Servidor)
    if (!key && provider) {
       const envKeyName = provider.toUpperCase().includes('KEY') 
         ? provider.toUpperCase() 
         : `${provider.toUpperCase()}_API_KEY`;
       key = process.env[envKeyName];
    }

    // Se ainda não tem chave, erro.
    if (!key) {
      return NextResponse.json(
        { error: 'Nenhuma chave fornecida e nenhuma encontrada no servidor.' },
        { status: 400 }
      );
    }

    console.log(`[Test-Key] Testando conexão para: ${provider}...`);
    let isValid = false;
    let details = "";

    // 2. Lógica de Teste Simplificada (Usa FETCH nativo para não depender de libs)
    switch (provider) {
      case 'openai':
        // Teste leve na API da OpenAI
        const openaiRes = await fetch('https://api.openai.com/v1/models?limit=1', {
          headers: { 'Authorization': `Bearer ${key}` }
        });
        isValid = openaiRes.ok;
        if (!isValid) details = "API recusou a chave (401/403)";
        break;
      
      case 'google':
        // Teste para Google Gemini (Generative Language API)
        // Usa pageSize=1 para ser leve
        const geminiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}&pageSize=1`);
        isValid = geminiRes.ok;
        if (!isValid) {
             const err = await geminiRes.json();
             details = err.error?.message || "Erro na API do Google Gemini";
        }
        break;

      case 'youtube':
        // Teste na API do YouTube otimizado para economizar cota (1 unidade vs 100 unidades do search)
        // chart=mostPopular não requer autenticação de usuário, apenas a chave de API
        const ytRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${key}`);
        isValid = ytRes.ok;
        if (!isValid) {
            const err = await ytRes.json();
            details = err.error?.message || "Erro na API do YouTube";
        }
        break;
      
      case 'anthropic':
        // Teste na API da Anthropic
        const anthropicRes = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
                'x-api-key': key,
                'anthropic-version': '2023-06-01',
                'content-type': 'application/json'
            },
            body: JSON.stringify({
                model: "claude-3-haiku-20240307",
                max_tokens: 1,
                messages: [{ role: "user", content: "Hi" }]
            })
        });
        // Anthropic pode retornar 400 se o corpo for ruim, mas 401 se a chave for ruim.
        // Se passar do 401, a chave existe.
        isValid = anthropicRes.status !== 401 && anthropicRes.status !== 403;
        break;

      case 'pexels':
        const pexelsRes = await fetch('https://api.pexels.com/v1/curated?per_page=1', {
            headers: { 'Authorization': key }
        });
        isValid = pexelsRes.ok;
        break;

      case 'pixabay':
        const pixabayRes = await fetch(`https://pixabay.com/api/?key=${key}&q=test`);
        isValid = pixabayRes.ok;
        break;

      case 'json2video':
        const j2vRes = await fetch('https://api.json2video.com/v2/movie', {
            headers: { 'x-api-key': key }
        });
        // JSON2Video: 401 = Chave inválida. 
        // 405 (Method Not Allowed) ou 200 = Chave válida (passou da autenticação).
        isValid = j2vRes.status !== 401 && j2vRes.status !== 403;
        break;

      case 'elevenlabs':
        const elevenRes = await fetch('https://api.elevenlabs.io/v1/user', {
            headers: { 'xi-api-key': key }
        });
        isValid = elevenRes.ok;
        break;

      case 'tavily':
         // Teste real na API do Tavily (custará 1 crédito, mas garante a conexão)
         const tavilyRes = await fetch('https://api.tavily.com/search', {
             method: 'POST',
             headers: { 'Content-Type': 'application/json' },
             body: JSON.stringify({ api_key: key, query: "test", max_results: 1 })
         });
         isValid = tavilyRes.ok;
         if (!isValid) details = "Erro na API do Tavily (Chave inválida ou sem créditos)";
         break;

      default:
        // Fallback para serviços desconhecidos
        console.warn(`[Test-Key] Serviço desconhecido ${provider}, assumindo válido.`);
        isValid = true;
        details = "Serviço não verificado, formato aceito.";
    }

    // 3. Retorno
    if (isValid) {
      return NextResponse.json({ success: true, message: "Conexão estabelecida com sucesso!", details });
    } else {
      console.error(`[Test-Key] Falha para ${provider}: ${details}`);
      return NextResponse.json({ error: "A chave informada é inválida ou expirou.", details }, { status: 401 });
    }

  } catch (error) {
    console.error("Erro interno no teste de API:", error);
    const message = error instanceof Error ? error.message : "Erro interno no servidor";
    return NextResponse.json({ error: message }, { status: 500 });
  }
}
```

---
#### `app/api/files/download/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import fs from 'fs/promises';
import path from 'path';

export const dynamic = 'force-dynamic';

/**
 * GET /api/files/download?path=relative/path/to/file.json
 * Downloads a file from the data directory
 */
export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams;
    const relativePath = searchParams.get('path');

    if (!relativePath) {
      return NextResponse.json(
        { error: 'Missing path parameter' },
        { status: 400 }
      );
    }

    // Base directory - data folder
    const baseDir = path.join(process.cwd(), 'data');
    const filePath = path.join(baseDir, relativePath);

    // Security: prevent path traversal attacks
    if (!filePath.startsWith(baseDir)) {
      return NextResponse.json(
        { error: 'Invalid path' },
        { status: 403 }
      );
    }

    // Check if file exists
    try {
      const stats = await fs.stat(filePath);
      if (!stats.isFile()) {
        return NextResponse.json(
          { error: 'Path is not a file' },
          { status: 400 }
        );
      }
    } catch {
      return NextResponse.json(
        { error: 'File not found' },
        { status: 404 }
      );
    }

    // Read file
    const fileBuffer = await fs.readFile(filePath);
    const fileName = path.basename(filePath);

    // Determine content type
    const ext = path.extname(filePath).toLowerCase();
    let contentType = 'application/octet-stream';

    const contentTypes: Record<string, string> = {
      '.json': 'application/json',
      '.txt': 'text/plain',
      '.csv': 'text/csv',
      '.xml': 'application/xml',
      '.pdf': 'application/pdf',
      '.png': 'image/png',
      '.jpg': 'image/jpeg',
      '.jpeg': 'image/jpeg',
      '.gif': 'image/gif',
      '.svg': 'image/svg+xml',
      '.mp4': 'video/mp4',
      '.webm': 'video/webm',
      '.mp3': 'audio/mpeg',
      '.wav': 'audio/wav',
      '.zip': 'application/zip',
    };

    if (ext in contentTypes) {
      contentType = contentTypes[ext];
    }

    // Return file with appropriate headers
    return new NextResponse(fileBuffer, {
      headers: {
        'Content-Type': contentType,
        'Content-Disposition': `attachment; filename="${fileName}"`,
        'Content-Length': fileBuffer.length.toString(),
      },
    });
  } catch (error) {
    console.error('Failed to download file:', error);
    return NextResponse.json(
      { error: 'Failed to download file' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/files/list/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { list } from '@vercel/blob';
import type { DirectoryListing, FileEntry } from '@/types';

export const dynamic = 'force-dynamic';

/**
 * GET /api/files/list
 * Lists files from Vercel Blob storage
 */
export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams;
    const prefix = searchParams.get('path') || '';

    // List blobs with optional prefix (folder simulation)
    const { blobs } = await list({
      prefix: prefix ? `${prefix}/` : undefined,
      limit: 1000,
    });

    // Transform blobs into file entries
    const fileEntries: FileEntry[] = blobs.map((blob) => {
      // Extract filename from pathname
      const pathParts = blob.pathname.split('/');
      const name = pathParts[pathParts.length - 1];

      return {
        name,
        path: blob.pathname,
        type: 'file' as const,
        size: blob.size,
        modifiedAt: blob.uploadedAt.toISOString(),
        url: blob.url,
      };
    });

    // Group by folders to simulate directory structure
    const folders = new Set<string>();
    fileEntries.forEach((entry) => {
      const parts = entry.path.split('/');
      if (parts.length > 1) {
        // Add parent folders
        for (let i = 1; i < parts.length; i++) {
          const folderPath = parts.slice(0, i).join('/');
          if (folderPath && !prefix.startsWith(folderPath)) {
            folders.add(folderPath);
          }
        }
      }
    });

    // Filter entries based on current path
    let filteredEntries = fileEntries;
    if (prefix) {
      // Only show files directly in this "folder"
      filteredEntries = fileEntries.filter((entry) => {
        const relativePath = entry.path.replace(`${prefix}/`, '');
        return entry.path.startsWith(`${prefix}/`) && !relativePath.includes('/');
      });
    } else {
      // At root, show only top-level files and folders
      const topLevelFolders = new Set<string>();
      fileEntries.forEach((entry) => {
        const parts = entry.path.split('/');
        if (parts.length > 1) {
          topLevelFolders.add(parts[0]);
        }
      });

      // Add folder entries
      const folderEntries: FileEntry[] = Array.from(topLevelFolders).map((folder) => ({
        name: folder,
        path: folder,
        type: 'directory' as const,
        modifiedAt: new Date().toISOString(),
      }));

      // Keep only top-level files
      filteredEntries = fileEntries.filter((entry) => !entry.path.includes('/'));
      filteredEntries = [...folderEntries, ...filteredEntries];
    }

    // Sort: directories first, then alphabetically
    filteredEntries.sort((a, b) => {
      if (a.type !== b.type) {
        return a.type === 'directory' ? -1 : 1;
      }
      return a.name.localeCompare(b.name);
    });

    const response: DirectoryListing = {
      path: prefix,
      entries: filteredEntries,
      totalSize: blobs.reduce((acc, blob) => acc + blob.size, 0),
      totalFiles: blobs.length,
    };

    return NextResponse.json(response);
  } catch (error) {
    console.error('Failed to list files:', error);

    // If Vercel Blob is not configured, return empty list with message
    if (error instanceof Error && error.message.includes('BLOB_READ_WRITE_TOKEN')) {
      return NextResponse.json({
        path: '',
        entries: [],
        totalSize: 0,
        totalFiles: 0,
        message: 'Vercel Blob not configured. Add BLOB_READ_WRITE_TOKEN to environment variables.',
      });
    }

    return NextResponse.json(
      { error: 'Failed to list files' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/health/route.ts`

```
import { NextResponse } from "next/server";
import { systemBoot } from "@/lib/system/boot";

export async function GET() {
  const report = await systemBoot();
  return NextResponse.json(report);
}

```

---
#### `app/api/images/generate/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ImageProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { prompt, provider } = body as { prompt: string; provider: ImageProvider };

    if (!prompt || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: prompt, provider" },
        { status: 400 }
      );
    }

    let imageUrl: string;

    switch (provider) {
      case "dalle": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/images/generations", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "dall-e-3",
            prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look, 16:9 aspect ratio.`,
            n: 1,
            size: "1792x1024",
            quality: "standard",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "DALL-E generation failed");
        }

        const data = await response.json();
        imageUrl = data.data[0].url;
        break;
      }

      case "stability": {
        const apiKey = process.env.STABILITY_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Stability API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch(
          "https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/text-to-image",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify({
              text_prompts: [
                {
                  text: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
                  weight: 1,
                },
              ],
              cfg_scale: 7,
              width: 1344,
              height: 768,
              samples: 1,
              steps: 30,
            }),
          }
        );

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.message || "Stability generation failed");
        }

        const data = await response.json();
        const base64Image = data.artifacts[0].base64;
        imageUrl = `data:image/png;base64,${base64Image}`;
        break;
      }

      case "replicate": {
        const apiToken = process.env.REPLICATE_API_TOKEN;
        if (!apiToken) {
          return NextResponse.json(
            { error: "Replicate API token not configured" },
            { status: 400 }
          );
        }

        // Create prediction
        const createResponse = await fetch("https://api.replicate.com/v1/predictions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Token ${apiToken}`,
          },
          body: JSON.stringify({
            version: "39ed52f2a78e934b3ba6e2a89f5b1c712de7dfea535525255b1aa35c5565e08b",
            input: {
              prompt: `YouTube thumbnail: ${prompt}. High quality, vibrant colors, professional look.`,
              width: 1344,
              height: 768,
              num_outputs: 1,
            },
          }),
        });

        if (!createResponse.ok) {
          throw new Error("Replicate prediction creation failed");
        }

        const prediction = await createResponse.json();
        let result = prediction;

        // Poll for completion
        while (result.status !== "succeeded" && result.status !== "failed") {
          await new Promise((resolve) => setTimeout(resolve, 1000));
          const statusResponse = await fetch(
            `https://api.replicate.com/v1/predictions/${result.id}`,
            {
              headers: {
                Authorization: `Token ${apiToken}`,
              },
            }
          );
          result = await statusResponse.json();
        }

        if (result.status === "failed") {
          throw new Error("Replicate generation failed");
        }

        imageUrl = result.output[0];
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown provider: ${provider}` },
          { status: 400 }
        );
    }

    return NextResponse.json({ imageUrl, provider });
  } catch (error) {
    console.error("Image generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Image generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/inngest/route.ts`

```
import { serve } from 'inngest/next';
import { inngest } from '@/lib/inngest/client';
import { functions } from '@/lib/inngest/functions/video-pipeline';

// Create and export the Inngest handler
export const { GET, POST, PUT } = serve({
  client: inngest,
  functions,
});

```

---
#### `app/api/media/search/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { MediaSource, MediaItem } from "@/types";
import { v4 as uuidv4 } from "uuid";

interface PexelsVideo {
  id: number;
  url: string;
  image: string;
  duration: number;
  video_files: Array<{
    id: number;
    quality: string;
    file_type: string;
    width: number;
    height: number;
    link: string;
  }>;
  user: { name: string };
}

interface PexelsPhoto {
  id: number;
  url: string;
  src: { original: string; medium: string };
  photographer: string;
}

interface PixabayHit {
  id: number;
  pageURL: string;
  webformatURL: string;
  largeImageURL: string;
  duration?: number;
  videos?: {
    medium: { url: string };
  };
  user: string;
}

interface UnsplashResult {
  id: string;
  urls: { regular: string; full: string };
  user: { name: string };
  links: { html: string };
}

async function searchPexelsVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/videos/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.videos?.map((video: PexelsVideo) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: video.id.toString(),
      url: video.video_files.find((f) => f.quality === "hd")?.link || video.video_files[0]?.link || "",
      previewUrl: video.image,
      type: "video" as const,
      duration: video.duration,
      attribution: `Pexels - ${video.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Pexels search error:", error);
    return [];
  }
}

async function searchPexelsPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PEXELS_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: apiKey },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.photos?.map((photo: PexelsPhoto) => ({
      id: uuidv4(),
      source: "pexels" as MediaSource,
      sourceId: photo.id.toString(),
      url: photo.src.original,
      previewUrl: photo.src.medium,
      type: "image" as const,
      duration: null,
      attribution: `Pexels - ${photo.photographer}`,
    })) || [];
  } catch (error) {
    console.error("Pexels photos search error:", error);
    return [];
  }
}

async function searchPixabayVideos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/videos/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.videos?.medium?.url || "",
      previewUrl: hit.webformatURL || `https://i.vimeocdn.com/video/${hit.id}_640x360.jpg`,
      type: "video" as const,
      duration: hit.duration || null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay search error:", error);
    return [];
  }
}

async function searchPixabayPhotos(query: string): Promise<MediaItem[]> {
  const apiKey = process.env.PIXABAY_API_KEY;
  if (!apiKey) return [];

  try {
    const response = await fetch(
      `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&per_page=12&image_type=photo`
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.hits?.map((hit: PixabayHit) => ({
      id: uuidv4(),
      source: "pixabay" as MediaSource,
      sourceId: hit.id.toString(),
      url: hit.largeImageURL,
      previewUrl: hit.webformatURL,
      type: "image" as const,
      duration: null,
      attribution: `Pixabay - ${hit.user}`,
    })) || [];
  } catch (error) {
    console.error("Pixabay photos search error:", error);
    return [];
  }
}

async function searchUnsplash(query: string): Promise<MediaItem[]> {
  const accessKey = process.env.UNSPLASH_ACCESS_KEY;
  if (!accessKey) return [];

  try {
    const response = await fetch(
      `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=12`,
      {
        headers: { Authorization: `Client-ID ${accessKey}` },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.results?.map((result: UnsplashResult) => ({
      id: uuidv4(),
      source: "unsplash" as MediaSource,
      sourceId: result.id,
      url: result.urls.full,
      previewUrl: result.urls.regular,
      type: "image" as const,
      duration: null,
      attribution: `Unsplash - ${result.user.name}`,
    })) || [];
  } catch (error) {
    console.error("Unsplash search error:", error);
    return [];
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { query, sources, mediaType } = body as {
      query: string;
      sources?: MediaSource[];
      mediaType?: "video" | "image" | "all";
    };

    if (!query) {
      return NextResponse.json(
        { error: "Missing required field: query" },
        { status: 400 }
      );
    }

    const requestedSources = sources || ["pexels", "pixabay", "unsplash"];
    const type = mediaType || "all";
    const results: MediaItem[] = [];

    // Run searches in parallel
    const searchPromises: Promise<MediaItem[]>[] = [];

    if (requestedSources.includes("pexels")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPexelsVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPexelsPhotos(query));
      }
    }

    if (requestedSources.includes("pixabay")) {
      if (type === "all" || type === "video") {
        searchPromises.push(searchPixabayVideos(query));
      }
      if (type === "all" || type === "image") {
        searchPromises.push(searchPixabayPhotos(query));
      }
    }

    if (requestedSources.includes("unsplash")) {
      if (type === "all" || type === "image") {
        searchPromises.push(searchUnsplash(query));
      }
    }

    const searchResults = await Promise.all(searchPromises);
    searchResults.forEach((items) => results.push(...items));

    return NextResponse.json({ results });
  } catch (error) {
    console.error("Media search error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Media search failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/models/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

// Definição dos modelos por provedor
const MODELS_DATABASE = {
  openai: {
    name: 'OpenAI',
    icon: '🤖',
    categories: [
      {
        name: 'Modelos de Vanguarda',
        description: 'Os modelos mais avançados da OpenAI',
        models: [
          { id: 'gpt-4o', name: 'GPT-4o', description: 'Modelo multimodal rápido e inteligente', isNew: false },
          { id: 'gpt-4o-mini', name: 'GPT-4o Mini', description: 'Versão econômica do GPT-4o', isNew: false },
          { id: 'gpt-4-turbo', name: 'GPT-4 Turbo', description: 'Modelo de alta inteligência com contexto de 128k', isNew: false },
          { id: 'gpt-4', name: 'GPT-4', description: 'Modelo GPT de alta inteligência', isNew: false },
          { id: 'gpt-3.5-turbo', name: 'GPT-3.5 Turbo', description: 'Modelo rápido e econômico', isNew: false },
        ]
      },
      {
        name: 'Modelos de Imagem',
        description: 'Para geração de imagens',
        models: [
          { id: 'dall-e-3', name: 'DALL-E 3', description: 'Geração de imagens de última geração', isNew: false },
          { id: 'dall-e-2', name: 'DALL-E 2', description: 'Geração de imagens anterior', isNew: false },
        ]
      },
      {
        name: 'Modelos de Áudio',
        description: 'Para transcrição e texto-para-fala',
        models: [
          { id: 'whisper-1', name: 'Whisper', description: 'Reconhecimento de fala', isNew: false },
          { id: 'tts-1', name: 'TTS-1', description: 'Texto para fala (velocidade)', isNew: false },
          { id: 'tts-1-hd', name: 'TTS-1 HD', description: 'Texto para fala (qualidade)', isNew: false },
        ]
      },
      {
        name: 'Modelos de Embedding',
        description: 'Para representação vetorial de texto',
        models: [
          { id: 'text-embedding-3-large', name: 'Embedding 3 Large', description: 'Maior capacidade de embedding', isNew: false },
          { id: 'text-embedding-3-small', name: 'Embedding 3 Small', description: 'Embedding econômico', isNew: false },
          { id: 'text-embedding-ada-002', name: 'Ada 002', description: 'Modelo de embedding anterior', isNew: false },
        ]
      }
    ]
  },
  anthropic: {
    name: 'Anthropic',
    icon: '🔮',
    categories: [
      {
        name: 'Claude 3.5',
        description: 'A mais nova geração do Claude',
        models: [
          { id: 'claude-3-5-sonnet-20241022', name: 'Claude 3.5 Sonnet', description: 'Melhor equilíbrio entre velocidade e inteligência', isNew: true },
          { id: 'claude-3-5-haiku-20241022', name: 'Claude 3.5 Haiku', description: 'Resposta mais rápida e econômica', isNew: true },
        ]
      },
      {
        name: 'Claude 3',
        description: 'Modelos Claude 3',
        models: [
          { id: 'claude-3-opus-20240229', name: 'Claude 3 Opus', description: 'Modelo mais inteligente para tarefas complexas', isNew: false },
          { id: 'claude-3-sonnet-20240229', name: 'Claude 3 Sonnet', description: 'Equilíbrio entre inteligência e velocidade', isNew: false },
          { id: 'claude-3-haiku-20240307', name: 'Claude 3 Haiku', description: 'Respostas rápidas e econômicas', isNew: false },
        ]
      }
    ]
  },
  gemini: {
    name: 'Google Gemini',
    icon: '🧠',
    categories: [
      {
        name: 'Gemini 2.0',
        description: 'A mais nova geração do Gemini',
        models: [
          { id: 'gemini-2.0-flash-exp', name: 'Gemini 2.0 Flash', description: 'Modelo experimental rápido', isNew: true },
        ]
      },
      {
        name: 'Gemini 1.5',
        description: 'Modelos Gemini 1.5 com contexto longo',
        models: [
          { id: 'gemini-1.5-pro', name: 'Gemini 1.5 Pro', description: 'Melhor desempenho, contexto de 2M tokens', isNew: false },
          { id: 'gemini-1.5-flash', name: 'Gemini 1.5 Flash', description: 'Rápido e eficiente', isNew: false },
          { id: 'gemini-1.5-flash-8b', name: 'Gemini 1.5 Flash 8B', description: 'Versão mais leve e rápida', isNew: false },
        ]
      },
      {
        name: 'Gemini 1.0',
        description: 'Modelos Gemini 1.0',
        models: [
          { id: 'gemini-1.0-pro', name: 'Gemini 1.0 Pro', description: 'Modelo de geração anterior', isNew: false },
        ]
      }
    ]
  },
  elevenlabs: {
    name: 'ElevenLabs',
    icon: '🎤',
    categories: [
      {
        name: 'Modelos de Voz',
        description: 'Síntese de voz de alta qualidade',
        models: [
          { id: 'eleven_multilingual_v2', name: 'Multilingual v2', description: 'Suporte a 29 idiomas incluindo português', isNew: true },
          { id: 'eleven_turbo_v2_5', name: 'Turbo v2.5', description: 'Baixa latência para streaming', isNew: true },
          { id: 'eleven_turbo_v2', name: 'Turbo v2', description: 'Modelo otimizado para velocidade', isNew: false },
          { id: 'eleven_multilingual_v1', name: 'Multilingual v1', description: 'Suporte multilíngue original', isNew: false },
          { id: 'eleven_monolingual_v1', name: 'Monolingual v1', description: 'Otimizado para inglês', isNew: false },
        ]
      }
    ]
  },
  pexels: {
    name: 'Pexels',
    icon: '📷',
    categories: [
      {
        name: 'Recursos',
        description: 'APIs disponíveis',
        models: [
          { id: 'photos', name: 'Fotos', description: 'Banco de fotos gratuitas de alta qualidade', isNew: false },
          { id: 'videos', name: 'Vídeos', description: 'Banco de vídeos gratuitos de alta qualidade', isNew: false },
        ]
      }
    ]
  },
  pixabay: {
    name: 'Pixabay',
    icon: '🖼️',
    categories: [
      {
        name: 'Recursos',
        description: 'APIs disponíveis',
        models: [
          { id: 'images', name: 'Imagens', description: 'Fotos e ilustrações gratuitas', isNew: false },
          { id: 'videos', name: 'Vídeos', description: 'Vídeos gratuitos', isNew: false },
        ]
      }
    ]
  },
  youtube: {
    name: 'YouTube',
    icon: '📺',
    categories: [
      {
        name: 'APIs',
        description: 'APIs do YouTube Data v3',
        models: [
          { id: 'data-v3', name: 'YouTube Data API v3', description: 'Gerenciar vídeos, playlists, canais', isNew: false },
          { id: 'analytics', name: 'YouTube Analytics', description: 'Métricas e estatísticas', isNew: false },
        ]
      }
    ]
  },
  tavily: {
    name: 'Tavily',
    icon: '🔍',
    categories: [
      {
        name: 'APIs de Pesquisa',
        description: 'Pesquisa web com IA',
        models: [
          { id: 'search', name: 'Search API', description: 'Pesquisa web otimizada para IA', isNew: false },
          { id: 'extract', name: 'Extract API', description: 'Extração de conteúdo de URLs', isNew: false },
        ]
      }
    ]
  },
  json2video: {
    name: 'JSON2Video',
    icon: '🎬',
    categories: [
      {
        name: 'Renderização',
        description: 'APIs de renderização de vídeo',
        models: [
          { id: 'movie', name: 'Movie API', description: 'Criar vídeos a partir de JSON', isNew: false },
          { id: 'templates', name: 'Templates', description: 'Templates pré-definidos', isNew: false },
        ]
      }
    ]
  }
};

export async function GET(req: Request) {
  const { searchParams } = new URL(req.url);
  const provider = searchParams.get('provider');

  if (provider) {
    const providerData = MODELS_DATABASE[provider as keyof typeof MODELS_DATABASE];
    if (providerData) {
      return NextResponse.json(providerData);
    }
    return NextResponse.json({ error: 'Provider not found' }, { status: 404 });
  }

  // Retorna todos os providers
  return NextResponse.json(MODELS_DATABASE);
}

// Testar conexão real e listar modelos disponíveis
export async function POST(req: Request) {
  try {
    const { provider, key } = await req.json();

    if (!provider || !key) {
      return NextResponse.json({ error: 'Provider and key are required' }, { status: 400 });
    }

    let availableModels: string[] = [];
    let error = null;

    switch (provider) {
      case 'openai':
        try {
          const res = await fetch('https://api.openai.com/v1/models', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          if (res.ok) {
            const data = await res.json();
            availableModels = data.data.map((m: { id: string }) => m.id);
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      case 'gemini':
      case 'google':
        try {
          const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}`);
          if (res.ok) {
            const data = await res.json();
            availableModels = data.models.map((m: { name: string }) => m.name.replace('models/', ''));
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      case 'anthropic':
        // Anthropic não tem endpoint público para listar modelos, usar os conhecidos
        availableModels = ['claude-3-5-sonnet-20241022', 'claude-3-5-haiku-20241022', 'claude-3-opus-20240229', 'claude-3-sonnet-20240229', 'claude-3-haiku-20240307'];
        break;

      case 'elevenlabs':
        try {
          const res = await fetch('https://api.elevenlabs.io/v1/models', {
            headers: { 'xi-api-key': key }
          });
          if (res.ok) {
            const data = await res.json();
            availableModels = data.map((m: { model_id: string }) => m.model_id);
          } else {
            error = 'Não foi possível listar modelos';
          }
        } catch {
          error = 'Erro de conexão';
        }
        break;

      default:
        // Para providers sem lista de modelos, assumir disponível
        availableModels = ['default'];
    }

    return NextResponse.json({
      provider,
      availableModels,
      error,
      staticModels: MODELS_DATABASE[provider as keyof typeof MODELS_DATABASE] || null
    });

  } catch {
    return NextResponse.json({ error: 'Erro interno' }, { status: 500 });
  }
}

```

---
#### `app/api/proposal/description/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Description } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("description"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptSummary = script?.sections?.map((s: { content: string }) => s.content).join("\n").substring(0, 1000) || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are an SEO expert for YouTube video descriptions.
Create a description that:
- Starts with a compelling summary (first 2 lines are crucial for SEO)
- Includes timestamps for main sections
- Has relevant links placeholders
- Uses natural keyword placement
- Is 200-500 words
- Includes a call-to-action

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return ONLY the description text, no JSON wrapper.`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create an SEO-optimized YouTube description for a video about: ${theme}

Script Summary:
${scriptSummary}

Research Insights:
${researchContext}`,
      temperature: 0.7,
    });

    const description: Description = {
      id: uuidv4(),
      status: "ready",
      content: text.trim(),
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(description);
  } catch (error) {
    console.error("Description generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Description generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/rationale/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { AIProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      channelData,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research ? `
Research Insights: ${research.consolidatedInsights}
Top Performing Topics: ${research.internalAnalysis?.topPerformingTopics?.join(", ") || "N/A"}
Trending Topics: ${research.externalAnalysis?.trendingTopics?.join(", ") || "N/A"}
Market Opportunities: ${research.externalAnalysis?.marketOpportunities?.join(", ") || "N/A"}
` : "";

    const channelContext = channelData ? `
Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Recent Performance: ${channelData.recentVideos?.slice(0, 3).map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ") || "N/A"}
` : "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist.
Write a compelling explanation of why this video proposal will perform well.
Focus on:
- Data-backed insights from research
- Alignment with audience interests
- Market opportunity and timing
- Competitive advantages
- Expected performance indicators

Write in a confident, analytical tone. Be specific with references to data.
Keep it to 2-3 paragraphs.`,
      prompt: `Explain why a video about "${theme}" will perform well.

${researchContext}
${channelContext}`,
      temperature: 0.7,
    });

    return NextResponse.json({ rationale: text.trim() });
  } catch (error) {
    console.error("Rationale generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Rationale generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/script/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { Script, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Verify AI provider is configured
    if (provider === "openai" && !process.env.OPENAI_API_KEY) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !process.env.ANTHROPIC_API_KEY) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    let aiModel;
    switch (provider) {
      case "openai":
        aiModel = openai(model);
        break;
      case "google":
        aiModel = google(model);
        break;
      case "anthropic":
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("script"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const researchContext = research?.consolidatedInsights || "No research data available";

    const systemPrompt = `You are an expert YouTube scriptwriter specializing in retention-focused content.
Your scripts must:
- Be at least 8 minutes long when read at a natural pace (approximately 1200-1500 words)
- Start with a powerful hook in the first 30 seconds
- Use pattern interrupts every 2-3 minutes to maintain engagement
- Include clear value propositions throughout
- End with a strong call-to-action

Return a JSON object with this structure:
{
  "sections": [
    {
      "type": "hook",
      "content": "The hook script text...",
      "duration": 30
    },
    {
      "type": "intro",
      "content": "Introduction text...",
      "duration": 60
    },
    {
      "type": "content",
      "content": "Main content section 1...",
      "duration": 120
    },
    // ... more content sections
    {
      "type": "cta",
      "content": "Call to action...",
      "duration": 30
    },
    {
      "type": "outro",
      "content": "Closing...",
      "duration": 30
    }
  ]
}

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create a retention-focused YouTube script about: ${theme}

Research Insights:
${researchContext}

Generate a complete script with all sections. The total duration should be at least 8 minutes (480 seconds).`,
      temperature: 0.8,
    });

    let scriptData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        scriptData = JSON.parse(match[0]);
      }
    } catch {
      // Fallback structure
      scriptData = {
        sections: [
          { type: "hook", content: "Generated script content", duration: 30 },
          { type: "intro", content: text.substring(0, 500), duration: 60 },
          { type: "content", content: text.substring(500), duration: 390 },
          { type: "cta", content: "Like and subscribe!", duration: 30 },
          { type: "outro", content: "Thanks for watching!", duration: 30 },
        ],
      };
    }

    const sections: ScriptSection[] = scriptData.sections.map((section: { type: string; content: string; duration: number }) => ({
      id: uuidv4(),
      type: section.type as ScriptSection["type"],
      content: section.content,
      duration: section.duration || 60,
    }));

    const totalDuration = sections.reduce((sum, s) => sum + s.duration, 0);

    const script: Script = {
      id: uuidv4(),
      status: "ready",
      sections,
      totalDuration,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
      audioUrl: null,
      ttsProvider: null,
      ttsVoice: null,
    };

    return NextResponse.json(script);
  } catch (error) {
    console.error("Script generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Script generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/soundtrack/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Soundtrack, SoundtrackSuggestion } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      mood,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const { text } = await generateText({
      model: aiModel,
      system: `You are a music supervisor for YouTube content.
Suggest 3 copyright-free music tracks that would fit the video theme and mood.
These should be actual royalty-free music suggestions from platforms like:
- YouTube Audio Library
- Pixabay Music
- Free Music Archive
- Incompetech

Return a JSON object with this structure:
{
  "suggestions": [
    {
      "title": "Track Title",
      "artist": "Artist Name",
      "genre": "Genre",
      "url": "URL or platform reference",
      "duration": 180,
      "license": "CC0 or specific license"
    }
  ]
}`,
      prompt: `Suggest 3 copyright-free music tracks for a video about: ${theme}
Mood: ${mood || "professional, engaging, educational"}`,
      temperature: 0.7,
    });

    let suggestionsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        suggestionsData = JSON.parse(match[0]);
      }
    } catch {
      suggestionsData = {
        suggestions: [
          {
            title: "Corporate Upbeat",
            artist: "Various",
            genre: "Corporate",
            url: "YouTube Audio Library",
            duration: 180,
            license: "Royalty Free",
          },
          {
            title: "Inspiring Background",
            artist: "Various",
            genre: "Inspirational",
            url: "YouTube Audio Library",
            duration: 240,
            license: "Royalty Free",
          },
          {
            title: "Modern Tech",
            artist: "Various",
            genre: "Electronic",
            url: "YouTube Audio Library",
            duration: 200,
            license: "Royalty Free",
          },
        ],
      };
    }

    const suggestions: SoundtrackSuggestion[] = suggestionsData.suggestions.map(
      (s: { title: string; artist: string; genre: string; url: string; duration: number; license: string }) => ({
        id: uuidv4(),
        title: s.title,
        artist: s.artist,
        genre: s.genre,
        url: s.url,
        duration: s.duration || 180,
        license: s.license,
        isUpload: false,
      })
    );

    const soundtrack: Soundtrack = {
      id: uuidv4(),
      status: "ready",
      suggestions,
      selected: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(soundtrack);
  } catch (error) {
    console.error("Soundtrack generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Soundtrack generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/tags/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, Tags } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      description,
      research,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const researchContext = research?.externalAnalysis?.trendingTopics?.join(", ") || "";

    const { text } = await generateText({
      model: aiModel,
      system: `You are a YouTube SEO specialist.
Generate 15-30 relevant tags for a YouTube video.
Tags should include:
- Primary keywords (high search volume)
- Secondary keywords (medium search volume)
- Long-tail keywords
- Related topics
- Trending terms

Return ONLY a JSON array of strings (the tags), no other text.
Example: ["tag1", "tag2", "tag3"]`,
      prompt: `Generate tags for a YouTube video about: ${theme}

Description summary: ${description?.substring(0, 500) || "N/A"}

Trending topics in this niche: ${researchContext}`,
      temperature: 0.7,
    });

    let tagsList: string[] = [];
    try {
      const match = text.match(/\[[\s\S]*\]/);
      if (match) {
        tagsList = JSON.parse(match[0]);
      }
    } catch {
      // Parse as comma-separated if JSON fails
      tagsList = text.split(",").map((t) => t.trim().replace(/["'\[\]]/g, "")).filter(Boolean);
    }

    const tags: Tags = {
      id: uuidv4(),
      status: "ready",
      items: tagsList,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(tags);
  } catch (error) {
    console.error("Tags generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Tags generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/proposal/titles/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { google } from "@ai-sdk/google";
import { anthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, TitlesAndThumbs, TitleThumbnailVariation } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      theme,
      script,
      research,
      diretrizes,
      provider,
      model,
    } = body;

    if (!theme || !provider || !model) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    let aiModel;
    switch (provider as AIProvider) {
      case "openai":
        if (!process.env.OPENAI_API_KEY) {
          return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
        }
        aiModel = openai(model);
        break;
      case "google":
        if (!process.env.GOOGLE_GENERATIVE_AI_API_KEY) {
          return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
        }
        aiModel = google(model);
        break;
      case "anthropic":
        if (!process.env.ANTHROPIC_API_KEY) {
          return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
        }
        aiModel = anthropic(model);
        break;
      default:
        return NextResponse.json({ error: `Unknown provider: ${provider}` }, { status: 400 });
    }

    const diretrizesContext = diretrizes?.filter((d: { appliesTo: string[] }) => d.appliesTo.includes("thumbnail"))
      .map((d: { title: string; systemPrompt: string }) => `### ${d.title}\n${d.systemPrompt}`)
      .join("\n\n");

    const scriptHook = script?.sections?.find((s: { type: string }) => s.type === "hook")?.content || "";
    const researchContext = research?.consolidatedInsights || "";

    const systemPrompt = `You are a YouTube title and thumbnail strategist.
Create 3 variations of titles and thumbnail prompts.

Each title should:
- Be under 60 characters
- Create curiosity or urgency
- Include power words
- Be clear about the value

Each thumbnail prompt should:
- Be detailed for AI image generation
- Describe the visual elements clearly
- Include colors, composition, and mood
- NOT include text (text will be added separately)
- Focus on eye-catching visuals

${diretrizesContext ? `\n## Diretrizes (MUST FOLLOW):\n${diretrizesContext}` : ""}

Return a JSON object with this structure:
{
  "variations": [
    {
      "title": "Title 1",
      "thumbnailPrompt": "Detailed thumbnail prompt 1..."
    },
    {
      "title": "Title 2",
      "thumbnailPrompt": "Detailed thumbnail prompt 2..."
    },
    {
      "title": "Title 3",
      "thumbnailPrompt": "Detailed thumbnail prompt 3..."
    }
  ]
}`;

    const { text } = await generateText({
      model: aiModel,
      system: systemPrompt,
      prompt: `Create 3 title and thumbnail variations for a video about: ${theme}

Hook from script: ${scriptHook}

Research insights: ${researchContext}`,
      temperature: 0.8,
    });

    let variationsData;
    try {
      const match = text.match(/\{[\s\S]*\}/);
      if (match) {
        variationsData = JSON.parse(match[0]);
      }
    } catch {
      variationsData = {
        variations: [
          { title: theme, thumbnailPrompt: `A professional YouTube thumbnail about ${theme}` },
          { title: `How to ${theme}`, thumbnailPrompt: `Eye-catching visual representation of ${theme}` },
          { title: `${theme} Explained`, thumbnailPrompt: `Educational and engaging thumbnail about ${theme}` },
        ],
      };
    }

    const variations: TitleThumbnailVariation[] = variationsData.variations.map(
      (v: { title: string; thumbnailPrompt: string }) => ({
        id: uuidv4(),
        title: v.title,
        thumbnailPrompt: v.thumbnailPrompt,
        thumbnailUrl: null,
        imageProvider: null,
      })
    );

    const titlesAndThumbs: TitlesAndThumbs = {
      id: uuidv4(),
      status: "ready",
      variations,
      selectedVariation: null,
      generatedAt: new Date().toISOString(),
      approvedAt: null,
    };

    return NextResponse.json(titlesAndThumbs);
  } catch (error) {
    console.error("Titles generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Titles generation failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/render/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { RenderData, StoryboardScene } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { storyboardId, scenes, soundtrack } = body as {
      storyboardId: string;
      scenes: StoryboardScene[];
      soundtrack?: { url: string };
    };

    if (!storyboardId || !scenes) {
      return NextResponse.json(
        { error: "Missing required fields: storyboardId, scenes" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    // Build JSON2Video project structure
    const project = {
      resolution: "full-hd",
      quality: "high",
      scenes: scenes.map((scene) => ({
        comment: scene.text.substring(0, 50),
        duration: scene.duration,
        elements: [
          // Background media
          scene.media?.url
            ? {
                type: scene.media.type === "video" ? "video" : "image",
                src: scene.media.url,
                duration: scene.duration,
              }
            : {
                type: "color",
                color: "#1a1a1a",
                duration: scene.duration,
              },
          // Text overlay
          {
            type: "text",
            text: scene.text.substring(0, 100),
            duration: scene.duration,
            style: {
              fontSize: 24,
              fontFamily: "Arial",
              color: "#ffffff",
              backgroundColor: "rgba(0,0,0,0.5)",
            },
            position: {
              x: "center",
              y: "bottom",
            },
          },
          // Voiceover
          ...(scene.voiceoverUrl
            ? [
                {
                  type: "audio",
                  src: scene.voiceoverUrl,
                  duration: scene.duration,
                },
              ]
            : []),
        ],
        transition: {
          type: scene.transition,
          duration: 0.5,
        },
      })),
      // Background music
      ...(soundtrack?.url
        ? {
            soundtrack: {
              src: soundtrack.url,
              volume: 0.3,
            },
          }
        : {}),
    };

    // Create render job
    const createResponse = await fetch("https://api.json2video.com/v2/movies", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": apiKey,
      },
      body: JSON.stringify({ project }),
    });

    if (!createResponse.ok) {
      const error = await createResponse.json();
      throw new Error(error.message || "Failed to create render job");
    }

    const jobData = await createResponse.json();

    const renderData: RenderData = {
      id: jobData.project || uuidv4(),
      createdAt: new Date().toISOString(),
      storyboardId,
      status: "rendering",
      progress: 0,
      videoUrl: null,
      error: null,
    };

    return NextResponse.json(renderData);
  } catch (error) {
    console.error("Render error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Render failed" },
      { status: 500 }
    );
  }
}

// Check render status
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const jobId = searchParams.get("jobId");

    if (!jobId) {
      return NextResponse.json(
        { error: "Missing jobId parameter" },
        { status: 400 }
      );
    }

    const apiKey = process.env.JSON2VIDEO_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: "JSON2Video API key not configured" },
        { status: 400 }
      );
    }

    const response = await fetch(`https://api.json2video.com/v2/movies/${jobId}`, {
      headers: {
        "x-api-key": apiKey,
      },
    });

    if (!response.ok) {
      throw new Error("Failed to check render status");
    }

    const data = await response.json();

    let status: RenderData["status"] = "rendering";
    if (data.status === "done") {
      status = "completed";
    } else if (data.status === "failed") {
      status = "error";
    }

    return NextResponse.json({
      id: jobId,
      status,
      progress: data.progress || 0,
      videoUrl: data.movie || null,
      error: data.error || null,
    });
  } catch (error) {
    console.error("Render status check error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Status check failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/research/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { generateText } from "ai";
import { createOpenAI } from "@ai-sdk/openai";
import { createGoogleGenerativeAI } from "@ai-sdk/google";
import { createAnthropic } from "@ai-sdk/anthropic";
import { v4 as uuidv4 } from "uuid";
import { AIProvider, ResearchData, ResearchQuery, ResearchResult } from "@/types";
import {
  getOpenAIKey,
  getGoogleKey,
  getAnthropicKey,
  getTavilyKey,
} from "@/lib/get-api-key";

async function searchWithTavily(query: string, apiKey: string): Promise<ResearchResult[]> {
  if (!apiKey) {
    return [];
  }

  try {
    const response = await fetch("https://api.tavily.com/search", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        api_key: apiKey,
        query,
        search_depth: "advanced",
        max_results: 5,
      }),
    });

    if (!response.ok) {
      throw new Error("Tavily search failed");
    }

    const data = await response.json();
    return data.results?.map((result: { title: string; url: string; content: string; score: number }) => ({
      title: result.title,
      url: result.url,
      snippet: result.content,
      score: result.score,
    })) || [];
  } catch (error) {
    console.error("Tavily search error:", error);
    return [];
  }
}

async function simulateSearchWithLLM(
  query: string,
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
): Promise<ResearchResult[]> {
  const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

  const { text } = await generateText({
    model: aiModel,
    system: `You are a research assistant. Generate realistic search results for the given query.
Return a JSON array with 3-5 results, each having: title, url, snippet, score (0-1).
Make the results relevant and informative for YouTube content creation.
Return ONLY valid JSON, no other text.`,
    prompt: `Generate search results for: "${query}"`,
    temperature: 0.7,
  });

  try {
    // Extract JSON from the response
    const jsonMatch = text.match(/\[[\s\S]*\]/);
    if (jsonMatch) {
      return JSON.parse(jsonMatch[0]);
    }
    return [];
  } catch {
    return [];
  }
}

function getAIModel(
  provider: AIProvider,
  model: string,
  openaiKey?: string,
  googleKey?: string,
  anthropicKey?: string
) {
  switch (provider) {
    case "openai": {
      const openai = createOpenAI({
        apiKey: openaiKey || process.env.OPENAI_API_KEY,
      });
      return openai(model);
    }
    case "google": {
      const google = createGoogleGenerativeAI({
        apiKey: googleKey || process.env.GOOGLE_GENERATIVE_AI_API_KEY,
      });
      return google(model);
    }
    case "anthropic": {
      const anthropicClient = createAnthropic({
        apiKey: anthropicKey || process.env.ANTHROPIC_API_KEY,
      });
      return anthropicClient(model);
    }
    default:
      throw new Error(`Unknown provider: ${provider}`);
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      contextId,
      theme,
      channelData,
      metrics,
      provider,
      model,
      diretrizes,
    } = body;

    if (!contextId || !theme) {
      return NextResponse.json(
        { error: "Missing required fields: contextId, theme" },
        { status: 400 }
      );
    }

    // Get API keys from headers or env
    const openaiKey = getOpenAIKey(request);
    const googleKey = getGoogleKey(request);
    const anthropicKey = getAnthropicKey(request);
    const tavilyKey = getTavilyKey(request);

    // Verify AI provider is configured
    if (provider === "openai" && !openaiKey) {
      return NextResponse.json({ error: "OpenAI API key not configured" }, { status: 400 });
    }
    if (provider === "google" && !googleKey) {
      return NextResponse.json({ error: "Google API key not configured" }, { status: 400 });
    }
    if (provider === "anthropic" && !anthropicKey) {
      return NextResponse.json({ error: "Anthropic API key not configured" }, { status: 400 });
    }

    const aiModel = getAIModel(provider, model, openaiKey, googleKey, anthropicKey);

    // Build context for analysis
    const channelContext = channelData
      ? `Channel: ${channelData.title}
Subscribers: ${channelData.subscriberCount}
Total Views: ${channelData.viewCount}
Recent Videos: ${channelData.recentVideos?.map((v: { title: string; viewCount: number }) => `${v.title} (${v.viewCount} views)`).join(", ")}`
      : "No channel data available";

    const metricsContext = metrics?.length
      ? `Performance Metrics:\n${metrics.slice(0, 10).map((m: { title: string; views: number; ctr: number }) =>
          `- ${m.title}: ${m.views} views, ${m.ctr}% CTR`
        ).join("\n")}`
      : "No metrics data available";

    const diretrizesContext = diretrizes?.length
      ? `\n\nDiretrizes to follow:\n${diretrizes.map((d: { title: string; systemPrompt: string }) => `- ${d.title}: ${d.systemPrompt}`).join("\n")}`
      : "";

    // Step 1: Generate research queries
    const { text: queriesText } = await generateText({
      model: aiModel,
      system: `You are a YouTube research analyst. Generate 3-5 research queries to gather external information that will help create a high-performing video.
Return ONLY a JSON array of strings (queries).${diretrizesContext}`,
      prompt: `Theme: ${theme}

${channelContext}

${metricsContext}

Generate search queries to research this topic for a YouTube video.`,
      temperature: 0.7,
    });

    let queries: string[] = [];
    try {
      const match = queriesText.match(/\[[\s\S]*\]/);
      if (match) {
        queries = JSON.parse(match[0]);
      }
    } catch {
      queries = [theme, `${theme} trends 2024`, `${theme} YouTube video ideas`];
    }

    // Step 2: Execute searches
    const hasTavily = !!tavilyKey;
    const researchQueries: ResearchQuery[] = [];

    for (const query of queries.slice(0, 5)) {
      let results: ResearchResult[];
      let source: "tavily" | "llm_simulated";

      if (hasTavily) {
        results = await searchWithTavily(query, tavilyKey!);
        source = "tavily";
      } else {
        results = await simulateSearchWithLLM(query, provider, model, openaiKey, googleKey, anthropicKey);
        source = "llm_simulated";
      }

      researchQueries.push({ query, source, results });
    }

    // Step 3: Analyze and consolidate
    const { text: analysisText } = await generateText({
      model: aiModel,
      system: `You are a YouTube content strategist. Analyze the provided data and research to generate actionable insights.
Return a JSON object with this structure:
{
  "internalAnalysis": {
    "topPerformingTopics": ["topic1", "topic2"],
    "audienceInsights": ["insight1", "insight2"],
    "contentGaps": ["gap1", "gap2"],
    "recommendations": ["rec1", "rec2"]
  },
  "externalAnalysis": {
    "trendingTopics": ["trend1", "trend2"],
    "competitorInsights": ["comp1", "comp2"],
    "marketOpportunities": ["opp1", "opp2"]
  },
  "consolidatedInsights": "A detailed paragraph summarizing all findings and strategic recommendations"
}${diretrizesContext}`,
      prompt: `Theme: ${theme}

Channel Data:
${channelContext}

Metrics:
${metricsContext}

Research Results:
${researchQueries.map((q) => `Query: ${q.query}\nResults: ${q.results.map((r) => r.snippet).join("\n")}`).join("\n\n")}

Analyze this data and provide strategic insights.`,
      temperature: 0.7,
    });

    let analysis;
    try {
      const match = analysisText.match(/\{[\s\S]*\}/);
      if (match) {
        analysis = JSON.parse(match[0]);
      }
    } catch {
      analysis = {
        internalAnalysis: {
          topPerformingTopics: [],
          audienceInsights: [],
          contentGaps: [],
          recommendations: [],
        },
        externalAnalysis: {
          trendingTopics: [],
          competitorInsights: [],
          marketOpportunities: [],
        },
        consolidatedInsights: "Research analysis completed. Please review the gathered data.",
      };
    }

    const researchData: ResearchData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      contextId,
      internalAnalysis: analysis.internalAnalysis,
      externalAnalysis: analysis.externalAnalysis,
      queries: researchQueries,
      consolidatedInsights: analysis.consolidatedInsights,
    };

    return NextResponse.json(researchData);
  } catch (error) {
    console.error("Research error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Research failed" },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/status/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

export async function GET() {
  return NextResponse.json({
    openai: !!process.env.OPENAI_API_KEY,
    gemini: !!process.env.GEMINI_API_KEY || !!process.env.GOOGLE_GENERATIVE_AI_API_KEY,
    anthropic: !!process.env.ANTHROPIC_API_KEY,
    youtube: !!process.env.YOUTUBEDATA_API_KEY || !!process.env.YOUTUBE_API_KEY,
    pexels: !!process.env.PEXELS_API_KEY,
    pixabay: !!process.env.PIXABAY_API_KEY,
    elevenlabs: !!process.env.ELEVENLABS_API_KEY,
    tavily: !!process.env.TAVILY_API_KEY,
    json2video: !!process.env.JSON2VIDEO_API_KEY,
    github: !!process.env.GITHUB_TOKEN,
    vercel: !!process.env.VERCEL_TOKEN && !!process.env.VERCEL_PROJECT_ID,
  });
}

```

---
#### `app/api/storyboard/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { StoryboardData, StoryboardScene, ScriptSection } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { proposalId, script } = body as {
      proposalId: string;
      script: { sections: ScriptSection[] };
    };

    if (!proposalId || !script?.sections) {
      return NextResponse.json(
        { error: "Missing required fields: proposalId, script" },
        { status: 400 }
      );
    }

    // Split script sections into storyboard scenes
    const scenes: StoryboardScene[] = [];
    let order = 0;

    for (const section of script.sections) {
      // Split content into smaller chunks for scenes
      // Each scene should be roughly 15-30 seconds
      const maxSceneDuration = 30;
      const contentChunks = splitContentIntoChunks(section.content, section.duration, maxSceneDuration);

      for (const chunk of contentChunks) {
        scenes.push({
          id: uuidv4(),
          order: order++,
          scriptSectionId: section.id,
          text: chunk.text,
          voiceoverUrl: null,
          media: null,
          duration: chunk.duration,
          transition: order === contentChunks.length - 1 ? "fade" : "cut",
        });
      }
    }

    const storyboard: StoryboardData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      scenes,
      totalDuration: scenes.reduce((sum, s) => sum + s.duration, 0),
    };

    return NextResponse.json(storyboard);
  } catch (error) {
    console.error("Storyboard generation error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Storyboard generation failed" },
      { status: 500 }
    );
  }
}

function splitContentIntoChunks(
  content: string,
  totalDuration: number,
  maxDuration: number
): { text: string; duration: number }[] {
  const sentences = content.match(/[^.!?]+[.!?]+/g) || [content];
  const chunks: { text: string; duration: number }[] = [];

  let currentChunk = "";
  let currentDuration = 0;
  const durationPerSentence = totalDuration / sentences.length;

  for (const sentence of sentences) {
    const sentenceDuration = Math.round(durationPerSentence);

    if (currentDuration + sentenceDuration > maxDuration && currentChunk) {
      chunks.push({
        text: currentChunk.trim(),
        duration: currentDuration,
      });
      currentChunk = sentence;
      currentDuration = sentenceDuration;
    } else {
      currentChunk += " " + sentence;
      currentDuration += sentenceDuration;
    }
  }

  if (currentChunk.trim()) {
    chunks.push({
      text: currentChunk.trim(),
      duration: currentDuration || maxDuration,
    });
  }

  // Ensure we have at least one chunk
  if (chunks.length === 0) {
    chunks.push({
      text: content,
      duration: totalDuration,
    });
  }

  return chunks;
}

```

---
#### `app/api/system/health/route.ts`

```
import { NextResponse } from 'next/server';
import type { SystemMonitorData, SystemHealth, APIHealthStatus } from '@/types';

export const dynamic = 'force-dynamic';

/**
 * GET /api/system/health
 * Returns system health metrics and API status
 */
export async function GET() {
  try {
    // System Health Metrics
    const memoryUsage = process.memoryUsage();
    const systemHealth: SystemHealth = {
      memory: {
        rss: memoryUsage.rss,
        heapTotal: memoryUsage.heapTotal,
        heapUsed: memoryUsage.heapUsed,
        external: memoryUsage.external,
      },
      uptime: process.uptime(),
      nodeVersion: process.version,
      platform: process.platform,
      timestamp: new Date().toISOString(),
    };

    // API Health Checks
    const apiStatuses: APIHealthStatus[] = [];

    // Check OpenAI
    apiStatuses.push(await checkOpenAI());

    // Check YouTube
    apiStatuses.push(await checkYouTube());

    // Check Google Gemini
    apiStatuses.push(await checkGoogle());

    // Check Anthropic
    apiStatuses.push(await checkAnthropic());

    // Check Pexels
    apiStatuses.push(await checkPexels());

    // Check Pixabay
    apiStatuses.push(await checkPixabay());

    // Check Unsplash
    apiStatuses.push(await checkUnsplash());

    const response: SystemMonitorData = {
      system: systemHealth,
      apis: apiStatuses,
    };

    return NextResponse.json(response);
  } catch (error) {
    console.error('Health check failed:', error);
    return NextResponse.json(
      { error: 'Failed to retrieve system health' },
      { status: 500 }
    );
  }
}

/**
 * Helper function to check OpenAI API
 */
async function checkOpenAI(): Promise<APIHealthStatus> {
  const apiKey = process.env.OPENAI_API_KEY;

  if (!apiKey) {
    return {
      name: 'OpenAI',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.openai.com/v1/models', {
      method: 'GET',
      headers: {
        Authorization: `Bearer ${apiKey}`,
      },
      signal: AbortSignal.timeout(5000), // 5s timeout
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'OpenAI',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'OpenAI',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'OpenAI',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check YouTube API
 */
async function checkYouTube(): Promise<APIHealthStatus> {
  const apiKey = process.env.YOUTUBE_API_KEY;

  if (!apiKey) {
    return {
      name: 'YouTube',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${apiKey}`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'YouTube',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'YouTube',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'YouTube',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Google Gemini API
 */
async function checkGoogle(): Promise<APIHealthStatus> {
  const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;

  if (!apiKey) {
    return {
      name: 'Google Gemini',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Google Gemini',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Google Gemini',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Google Gemini',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Anthropic API
 */
async function checkAnthropic(): Promise<APIHealthStatus> {
  const apiKey = process.env.ANTHROPIC_API_KEY;

  if (!apiKey) {
    return {
      name: 'Anthropic',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  // Anthropic doesn't have a simple health endpoint, so we just check if key exists
  return {
    name: 'Anthropic',
    status: apiKey ? 'unknown' : 'offline',
    error: apiKey ? undefined : 'API key not configured',
  };
}

/**
 * Helper function to check Pexels API
 */
async function checkPexels(): Promise<APIHealthStatus> {
  const apiKey = process.env.PEXELS_API_KEY;

  if (!apiKey) {
    return {
      name: 'Pexels',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.pexels.com/v1/curated?per_page=1&page=1', {
      method: 'GET',
      headers: {
        Authorization: apiKey,
      },
      signal: AbortSignal.timeout(5000),
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Pexels',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Pexels',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Pexels',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Pixabay API
 */
async function checkPixabay(): Promise<APIHealthStatus> {
  const apiKey = process.env.PIXABAY_API_KEY;

  if (!apiKey) {
    return {
      name: 'Pixabay',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch(
      `https://pixabay.com/api/?key=${apiKey}&q=nature&per_page=3`,
      {
        method: 'GET',
        signal: AbortSignal.timeout(5000),
      }
    );

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Pixabay',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Pixabay',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Pixabay',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

/**
 * Helper function to check Unsplash API
 */
async function checkUnsplash(): Promise<APIHealthStatus> {
  const apiKey = process.env.UNSPLASH_ACCESS_KEY;

  if (!apiKey) {
    return {
      name: 'Unsplash',
      status: 'offline',
      error: 'API key not configured',
    };
  }

  try {
    const startTime = Date.now();
    const response = await fetch('https://api.unsplash.com/photos?per_page=1', {
      method: 'GET',
      headers: {
        Authorization: `Client-ID ${apiKey}`,
      },
      signal: AbortSignal.timeout(5000),
    });

    const responseTime = Date.now() - startTime;

    if (response.ok) {
      return {
        name: 'Unsplash',
        status: 'online',
        responseTime,
      };
    } else {
      return {
        name: 'Unsplash',
        status: 'offline',
        error: `HTTP ${response.status}`,
      };
    }
  } catch (error) {
    return {
      name: 'Unsplash',
      status: 'offline',
      error: error instanceof Error ? error.message : 'Connection failed',
    };
  }
}

```

---
#### `app/api/test-connection/route.ts`

```
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

interface TestResult {
  success: boolean;
  message: string;
  responseTime: number;
  details?: string;
}

export async function POST(req: Request) {
  try {
    const { provider } = await req.json();

    if (!provider) {
      return NextResponse.json({ error: 'Provider is required' }, { status: 400 });
    }

    const startTime = Date.now();
    const result: TestResult = { success: false, message: '', responseTime: 0 };

    // Pegar a chave do ambiente
    const keyMap: Record<string, string | undefined> = {
      openai: process.env.OPENAI_API_KEY,
      gemini: process.env.GEMINI_API_KEY || process.env.GOOGLE_GENERATIVE_AI_API_KEY,
      anthropic: process.env.ANTHROPIC_API_KEY,
      youtube: process.env.YOUTUBEDATA_API_KEY || process.env.YOUTUBE_API_KEY,
      pexels: process.env.PEXELS_API_KEY,
      pixabay: process.env.PIXABAY_API_KEY,
      elevenlabs: process.env.ELEVENLABS_API_KEY,
      tavily: process.env.TAVILY_API_KEY,
      json2video: process.env.JSON2VIDEO_API_KEY,
      github: process.env.GITHUB_TOKEN,
      vercel: process.env.VERCEL_TOKEN,
    };

    const key = keyMap[provider];

    if (!key) {
      return NextResponse.json({
        success: false,
        message: 'API key não configurada no servidor',
        responseTime: Date.now() - startTime
      });
    }

    try {
      switch (provider) {
        case 'openai':
          const openaiRes = await fetch('https://api.openai.com/v1/models?limit=1', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          result.success = openaiRes.ok;
          result.message = openaiRes.ok ? 'OpenAI respondendo! Modelos disponíveis.' : 'Falha na autenticação';
          if (openaiRes.ok) {
            const data = await openaiRes.json();
            result.details = `${data.data?.length || 0} modelos encontrados`;
          }
          break;

        case 'gemini':
          const geminiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}&pageSize=1`);
          result.success = geminiRes.ok;
          result.message = geminiRes.ok ? 'Gemini respondendo!' : 'Falha na autenticação';
          break;

        case 'anthropic':
          // Anthropic: fazer uma mini chamada
          const anthropicRes = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
              'x-api-key': key,
              'anthropic-version': '2023-06-01',
              'content-type': 'application/json'
            },
            body: JSON.stringify({
              model: "claude-3-haiku-20240307",
              max_tokens: 1,
              messages: [{ role: "user", content: "Hi" }]
            })
          });
          result.success = anthropicRes.status !== 401 && anthropicRes.status !== 403;
          result.message = result.success ? 'Anthropic respondendo!' : 'Falha na autenticação';
          break;

        case 'youtube':
          const ytRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=id&chart=mostPopular&maxResults=1&key=${key}`);
          result.success = ytRes.ok;
          result.message = ytRes.ok ? 'YouTube Data API respondendo!' : 'Falha na autenticação';
          break;

        case 'pexels':
          const pexelsRes = await fetch('https://api.pexels.com/v1/curated?per_page=1', {
            headers: { 'Authorization': key }
          });
          result.success = pexelsRes.ok;
          result.message = pexelsRes.ok ? 'Pexels respondendo! Fotos disponíveis.' : 'Falha na autenticação';
          if (pexelsRes.ok) {
            const data = await pexelsRes.json();
            result.details = `${data.total_results?.toLocaleString() || 'Milhões de'} fotos disponíveis`;
          }
          break;

        case 'pixabay':
          const pixabayRes = await fetch(`https://pixabay.com/api/?key=${key}&q=nature&per_page=3`);
          result.success = pixabayRes.ok;
          result.message = pixabayRes.ok ? 'Pixabay respondendo!' : 'Falha na autenticação';
          if (pixabayRes.ok) {
            const data = await pixabayRes.json();
            result.details = `${data.totalHits?.toLocaleString() || 'Muitas'} imagens encontradas`;
          }
          break;

        case 'elevenlabs':
          const elevenRes = await fetch('https://api.elevenlabs.io/v1/voices', {
            headers: { 'xi-api-key': key }
          });
          result.success = elevenRes.ok;
          result.message = elevenRes.ok ? 'ElevenLabs respondendo!' : 'Falha na autenticação';
          if (elevenRes.ok) {
            const data = await elevenRes.json();
            result.details = `${data.voices?.length || 0} vozes disponíveis`;
          }
          break;

        case 'tavily':
          // Tavily - não fazer busca real para não gastar crédito, apenas verificar auth
          const tavilyRes = await fetch('https://api.tavily.com/search', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ api_key: key, query: "test", max_results: 1 })
          });
          result.success = tavilyRes.ok;
          result.message = tavilyRes.ok ? 'Tavily respondendo! Pesquisa IA pronta.' : 'Falha na autenticação';
          break;

        case 'json2video':
          const j2vRes = await fetch('https://api.json2video.com/v2/movie', {
            headers: { 'x-api-key': key }
          });
          result.success = j2vRes.status !== 401 && j2vRes.status !== 403;
          result.message = result.success ? 'JSON2Video respondendo!' : 'Falha na autenticação';
          break;

        case 'github':
          const githubRes = await fetch('https://api.github.com/user', {
            headers: {
              'Authorization': `token ${key}`,
              'Accept': 'application/vnd.github.v3+json'
            }
          });
          result.success = githubRes.ok;
          result.message = githubRes.ok ? 'GitHub conectado!' : 'Falha na autenticação';
          if (githubRes.ok) {
            const data = await githubRes.json();
            result.details = `Usuário: ${data.login}`;
          }
          break;

        case 'vercel':
          const vercelRes = await fetch('https://api.vercel.com/v9/projects', {
            headers: { 'Authorization': `Bearer ${key}` }
          });
          result.success = vercelRes.ok;
          result.message = vercelRes.ok ? 'Vercel conectado!' : 'Falha na autenticação';
          if (vercelRes.ok) {
            const data = await vercelRes.json();
            result.details = `${data.projects?.length || 0} projetos encontrados`;
          }
          break;

        default:
          result.message = 'Provider não suportado para teste';
      }
    } catch (fetchError) {
      result.success = false;
      result.message = 'Erro de conexão com a API';
      result.details = fetchError instanceof Error ? fetchError.message : 'Erro desconhecido';
    }

    result.responseTime = Date.now() - startTime;
    return NextResponse.json(result);

  } catch {
    return NextResponse.json({
      success: false,
      message: 'Erro interno no servidor',
      responseTime: 0
    }, { status: 500 });
  }
}

```

---
#### `app/api/tts/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { TTSProvider } from "@/types";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { text, provider, voice } = body as {
      text: string;
      provider: TTSProvider;
      voice: string;
    };

    if (!text || !provider) {
      return NextResponse.json(
        { error: "Missing required fields: text, provider" },
        { status: 400 }
      );
    }

    let audioBuffer: ArrayBuffer;

    switch (provider) {
      case "openai": {
        const apiKey = process.env.OPENAI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "OpenAI API key not configured" },
            { status: 400 }
          );
        }

        const response = await fetch("https://api.openai.com/v1/audio/speech", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify({
            model: "tts-1-hd",
            input: text,
            voice: voice || "alloy",
            response_format: "mp3",
          }),
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error?.message || "OpenAI TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "elevenlabs": {
        const apiKey = process.env.ELEVENLABS_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "ElevenLabs API key not configured" },
            { status: 400 }
          );
        }

        const voiceId = voice || "21m00Tcm4TlvDq8ikWAM"; // Default to Rachel
        const response = await fetch(
          `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "xi-api-key": apiKey,
            },
            body: JSON.stringify({
              text,
              model_id: "eleven_multilingual_v2",
              voice_settings: {
                stability: 0.5,
                similarity_boost: 0.75,
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("ElevenLabs TTS failed");
        }

        audioBuffer = await response.arrayBuffer();
        break;
      }

      case "google": {
        const apiKey = process.env.GOOGLE_GENERATIVE_AI_API_KEY;
        if (!apiKey) {
          return NextResponse.json(
            { error: "Google API key not configured" },
            { status: 400 }
          );
        }

        // Google Cloud TTS requires different authentication
        // For simplicity, we'll use a basic synthesis endpoint
        const response = await fetch(
          `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              input: { text },
              voice: {
                languageCode: "pt-BR",
                name: voice || "pt-BR-Wavenet-A",
              },
              audioConfig: {
                audioEncoding: "MP3",
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("Google TTS failed");
        }

        const data = await response.json();
        const audioContent = data.audioContent;

        // Convert base64 to buffer
        const binaryString = atob(audioContent);
        const bytes = new Uint8Array(binaryString.length);
        for (let i = 0; i < binaryString.length; i++) {
          bytes[i] = binaryString.charCodeAt(i);
        }
        audioBuffer = bytes.buffer;
        break;
      }

      default:
        return NextResponse.json(
          { error: `Unknown TTS provider: ${provider}` },
          { status: 400 }
        );
    }

    // Convert to base64 for response
    const base64Audio = Buffer.from(audioBuffer).toString("base64");
    const audioUrl = `data:audio/mp3;base64,${base64Audio}`;

    return NextResponse.json({ audioUrl, provider });
  } catch (error) {
    console.error("TTS error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "TTS generation failed" },
      { status: 500 }
    );
  }
}

export async function GET() {
  // Return available voices for each provider
  const voices = {
    openai: [
      { id: "alloy", name: "Alloy" },
      { id: "echo", name: "Echo" },
      { id: "fable", name: "Fable" },
      { id: "onyx", name: "Onyx" },
      { id: "nova", name: "Nova" },
      { id: "shimmer", name: "Shimmer" },
    ],
    elevenlabs: process.env.ELEVENLABS_API_KEY
      ? [
          { id: "21m00Tcm4TlvDq8ikWAM", name: "Rachel" },
          { id: "AZnzlk1XvdvUeBnXmlld", name: "Domi" },
          { id: "EXAVITQu4vr4xnSDxMaL", name: "Bella" },
          { id: "ErXwobaYiN019PkySvjV", name: "Antoni" },
          { id: "MF3mGyEYCl7XYWbV9V6O", name: "Elli" },
          { id: "TxGEqnHWrfWFTfGW9XjX", name: "Josh" },
        ]
      : [],
    google: [
      { id: "pt-BR-Wavenet-A", name: "Brazilian Portuguese - Female" },
      { id: "pt-BR-Wavenet-B", name: "Brazilian Portuguese - Male" },
      { id: "en-US-Wavenet-D", name: "English US - Male" },
      { id: "en-US-Wavenet-F", name: "English US - Female" },
    ],
  };

  return NextResponse.json(voices);
}

```

---
#### `app/api/upload/route.ts`

```
import { NextRequest, NextResponse } from 'next/server';
import { put } from '@vercel/blob';

export const runtime = 'nodejs';

/**
 * POST /api/upload
 * Upload a file to Vercel Blob storage
 */
export async function POST(request: NextRequest) {
  try {
    const formData = await request.formData();
    const file = formData.get('file') as File | null;
    const type = formData.get('type') as string | null;

    if (!file) {
      return NextResponse.json(
        { error: 'No file provided' },
        { status: 400 }
      );
    }

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      return NextResponse.json(
        { error: 'Invalid file type. Allowed: JPEG, PNG, GIF, WebP' },
        { status: 400 }
      );
    }

    // Validate file size (max 5MB)
    const maxSize = 5 * 1024 * 1024; // 5MB
    if (file.size > maxSize) {
      return NextResponse.json(
        { error: 'File too large. Maximum size is 5MB' },
        { status: 400 }
      );
    }

    // Generate unique filename
    const timestamp = Date.now();
    const extension = file.name.split('.').pop() || 'jpg';
    const folder = type === 'avatar' ? 'avatars' : 'uploads';
    const filename = `${folder}/${timestamp}-${Math.random().toString(36).substring(7)}.${extension}`;

    // Upload to Vercel Blob
    const blob = await put(filename, file, {
      access: 'public',
    });

    return NextResponse.json({
      url: blob.url,
      filename: blob.pathname,
      size: file.size,
    });
  } catch (error) {
    console.error('Upload error:', error);
    return NextResponse.json(
      { error: 'Failed to upload file' },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/youtube/channel/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { ChannelData, RecentVideo } from "@/types";
import { getYouTubeKeys } from "@/lib/get-api-key";

export async function GET(request: NextRequest) {
  const { apiKey, channelId } = getYouTubeKeys(request);

  if (!apiKey || !channelId) {
    return NextResponse.json(
      {
        error: "YouTube API key or Channel ID not configured",
        details: !apiKey
          ? "YOUTUBE_API_KEY missing"
          : "YOUTUBE_CHANNEL_ID missing",
      },
      { status: 400 }
    );
  }

  try {
    // Fetch channel data
    const channelResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`
    );

    if (!channelResponse.ok) {
      const errorData = await channelResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${channelResponse.status}`;
      throw new Error(`YouTube API Error: ${errorMessage}`);
    }

    const channelData = await channelResponse.json();

    if (!channelData.items || channelData.items.length === 0) {
      return NextResponse.json(
        {
          error: "Channel not found",
          details: `No channel found with ID: ${channelId}`,
        },
        { status: 404 }
      );
    }

    const channel = channelData.items[0];

    // Fetch recent videos
    const videosResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&type=video&order=date&maxResults=10&key=${apiKey}`
    );

    if (!videosResponse.ok) {
      const errorData = await videosResponse.json().catch(() => ({}));
      const errorMessage =
        errorData?.error?.message || `HTTP ${videosResponse.status}`;
      throw new Error(`Failed to fetch videos: ${errorMessage}`);
    }

    const videosData = await videosResponse.json();
    const videoIds =
      videosData.items
        ?.map((item: { id: { videoId: string } }) => item.id.videoId)
        .join(",") || "";

    // Fetch video statistics
    let recentVideos: RecentVideo[] = [];
    if (videoIds) {
      const statsResponse = await fetch(
        `https://www.googleapis.com/youtube/v3/videos?part=statistics,snippet&id=${videoIds}&key=${apiKey}`
      );

      if (statsResponse.ok) {
        const statsData = await statsResponse.json();
        recentVideos =
          statsData.items?.map(
            (video: {
              id: string;
              snippet: {
                title: string;
                description: string;
                thumbnails: { medium: { url: string } };
                publishedAt: string;
              };
              statistics: {
                viewCount: string;
                likeCount: string;
                commentCount: string;
              };
            }) => ({
              id: video.id,
              title: video.snippet.title,
              description: video.snippet.description,
              thumbnailUrl: video.snippet.thumbnails.medium.url,
              publishedAt: video.snippet.publishedAt,
              viewCount: parseInt(video.statistics.viewCount || "0"),
              likeCount: parseInt(video.statistics.likeCount || "0"),
              commentCount: parseInt(video.statistics.commentCount || "0"),
            })
          ) || [];
      }
    }

    const result: ChannelData = {
      channelId: channel.id,
      title: channel.snippet.title,
      description: channel.snippet.description,
      subscriberCount: parseInt(channel.statistics.subscriberCount || "0"),
      videoCount: parseInt(channel.statistics.videoCount || "0"),
      viewCount: parseInt(channel.statistics.viewCount || "0"),
      recentVideos,
    };

    return NextResponse.json(result);
  } catch (error) {
    console.error("YouTube API error:", error);
    return NextResponse.json(
      {
        error: "Failed to fetch YouTube data",
        details: error instanceof Error ? error.message : "Unknown error",
      },
      { status: 500 }
    );
  }
}

```

---
#### `app/api/youtube/upload/route.ts`

```
import { NextRequest, NextResponse } from "next/server";
import { v4 as uuidv4 } from "uuid";
import { UploadData, UploadSetup } from "@/types";

/**
 * ⚠️ STUB IMPLEMENTATION - NOT PRODUCTION READY
 *
 * This endpoint returns simulated upload responses only.
 * Actual YouTube upload requires:
 * 1. OAuth2 authentication flow with youtube.upload scope
 * 2. Resumable upload implementation
 * 3. Video download from videoUrl
 * 4. Proper error handling and retry logic
 *
 * See PRODUCTION_NOTES.md for implementation guide.
 */

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const {
      proposalId,
      renderId,
      videoUrl,
      title,
      description,
      tags,
      uploadSetup,
      accessToken,
    } = body as {
      proposalId: string;
      renderId: string;
      videoUrl: string;
      title: string;
      description: string;
      tags: string[];
      uploadSetup: UploadSetup;
      accessToken: string;
    };

    if (!proposalId || !renderId || !videoUrl || !title || !accessToken) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // Prepare metadata
    const metadata = {
      snippet: {
        title,
        description,
        tags,
        categoryId: uploadSetup?.category || "22", // People & Blogs
        defaultLanguage: uploadSetup?.language || "pt",
      },
      status: {
        privacyStatus: "private", // Always upload as private first
        selfDeclaredMadeForKids: uploadSetup?.madeForKids || false,
        license: uploadSetup?.license === "creative_commons" ? "creativeCommon" : "youtube",
        embeddable: uploadSetup?.allowEmbedding !== false,
      },
    };

    // In a real implementation, this would:
    // 1. Download the video from videoUrl
    // 2. Use YouTube Data API v3 to upload the video
    // 3. Set the thumbnail
    //
    // For now, we'll return a simulated upload response
    // The actual implementation would require OAuth2 authentication flow

    // Note: YouTube upload requires OAuth2 with youtube.upload scope
    // This is typically done through a separate auth flow

    const uploadData: UploadData = {
      id: uuidv4(),
      createdAt: new Date().toISOString(),
      proposalId,
      renderId,
      status: "pending",
      youtubeVideoId: null,
      youtubeUrl: null,
      error: null,
    };

    // In production, you would implement the actual upload here:
    // 1. Initialize resumable upload
    // 2. Upload video in chunks
    // 3. Set thumbnail
    // 4. Return video ID

    // For now, return pending status
    // The client can poll for status updates

    return NextResponse.json({
      ...uploadData,
      message: "Upload initiated. YouTube OAuth2 authentication required.",
      metadata,
    });
  } catch (error) {
    console.error("Upload error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Upload failed" },
      { status: 500 }
    );
  }
}

// Get YouTube categories
export async function GET() {
  const apiKey = process.env.YOUTUBE_API_KEY;

  if (!apiKey) {
    // Return default categories if no API key
    return NextResponse.json({
      categories: [
        { id: "1", title: "Film & Animation" },
        { id: "2", title: "Autos & Vehicles" },
        { id: "10", title: "Music" },
        { id: "15", title: "Pets & Animals" },
        { id: "17", title: "Sports" },
        { id: "19", title: "Travel & Events" },
        { id: "20", title: "Gaming" },
        { id: "22", title: "People & Blogs" },
        { id: "23", title: "Comedy" },
        { id: "24", title: "Entertainment" },
        { id: "25", title: "News & Politics" },
        { id: "26", title: "Howto & Style" },
        { id: "27", title: "Education" },
        { id: "28", title: "Science & Technology" },
        { id: "29", title: "Nonprofits & Activism" },
      ],
    });
  }

  try {
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/videoCategories?part=snippet&regionCode=BR&key=${apiKey}`
    );

    if (!response.ok) {
      throw new Error("Failed to fetch categories");
    }

    const data = await response.json();
    const categories = data.items
      ?.filter((item: { snippet: { assignable: boolean } }) => item.snippet.assignable)
      .map((item: { id: string; snippet: { title: string } }) => ({
        id: item.id,
        title: item.snippet.title,
      }));

    return NextResponse.json({ categories });
  } catch (error) {
    console.error("Categories fetch error:", error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : "Failed to fetch categories" },
      { status: 500 }
    );
  }
}

```

---
#### `app/approve/[token]/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { useParams, useRouter } from 'next/navigation';
import {
  CheckCircle2,
  XCircle,
  MessageSquare,
  FileText,
  Clock,
  Loader2,
  AlertTriangle,
  ChevronDown,
  ChevronUp,
} from 'lucide-react';

interface ProjectData {
  project: {
    id: string;
    name: string;
    topic: string;
    status: string;
  };
  script: {
    title: string;
    content: string;
    sections: {
      hook?: string;
      body?: string[];
      cta?: string;
    };
  } | null;
  research: {
    summary: string;
  } | null;
  workflow: {
    currentStep: string;
    approvalSentAt: string;
  };
}

export default function ApprovalPage() {
  const params = useParams();
  const router = useRouter();
  const token = params.token as string;

  const [data, setData] = useState<ProjectData | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [submitting, setSubmitting] = useState(false);
  const [showFeedback, setShowFeedback] = useState(false);
  const [feedback, setFeedback] = useState('');
  const [expandedSections, setExpandedSections] = useState<Record<string, boolean>>({
    script: true,
    research: false,
  });

  useEffect(() => {
    async function fetchData() {
      try {
        const response = await fetch(`/api/approve?token=${token}`);
        if (!response.ok) {
          const err = await response.json();
          throw new Error(err.error || 'Failed to load project');
        }
        const projectData = await response.json();
        setData(projectData);
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Failed to load project');
      } finally {
        setLoading(false);
      }
    }

    if (token) {
      fetchData();
    }
  }, [token]);

  const handleApprove = async () => {
    setSubmitting(true);
    try {
      const response = await fetch('/api/approve', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token, action: 'approve' }),
      });

      if (!response.ok) {
        throw new Error('Failed to approve');
      }

      router.push('/approve/success');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to approve');
    } finally {
      setSubmitting(false);
    }
  };

  const handleRequestChanges = async () => {
    if (!feedback.trim()) {
      setError('Please provide feedback for changes');
      return;
    }

    setSubmitting(true);
    try {
      const response = await fetch('/api/approve', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token, action: 'request_changes', feedback }),
      });

      if (!response.ok) {
        throw new Error('Failed to submit feedback');
      }

      router.push('/approve/feedback-sent');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to submit feedback');
    } finally {
      setSubmitting(false);
    }
  };

  const toggleSection = (section: string) => {
    setExpandedSections(prev => ({ ...prev, [section]: !prev[section] }));
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-zinc-950 flex items-center justify-center">
        <div className="text-center">
          <Loader2 className="w-12 h-12 text-violet-500 animate-spin mx-auto mb-4" />
          <p className="text-zinc-400">Carregando roteiro...</p>
        </div>
      </div>
    );
  }

  if (error && !data) {
    return (
      <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
        <div className="bg-zinc-900 border border-red-500/30 rounded-2xl p-8 max-w-md text-center">
          <AlertTriangle className="w-16 h-16 text-red-500 mx-auto mb-4" />
          <h1 className="text-xl font-bold text-white mb-2">Erro ao carregar</h1>
          <p className="text-zinc-400">{error}</p>
        </div>
      </div>
    );
  }

  if (!data) return null;

  const isAwaitingApproval = data.project.status === 'AWAITING_APPROVAL';

  return (
    <div className="min-h-screen bg-zinc-950 p-4 md:p-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 mb-6">
          <div className="flex items-start justify-between">
            <div>
              <h1 className="text-2xl font-bold text-white mb-2">
                Aprovacao de Roteiro
              </h1>
              <p className="text-zinc-400">{data.project.name}</p>
            </div>
            <div className="flex items-center gap-2 px-3 py-1.5 bg-amber-500/20 rounded-full">
              <Clock className="w-4 h-4 text-amber-500" />
              <span className="text-sm text-amber-500">Aguardando Aprovacao</span>
            </div>
          </div>
        </div>

        {/* Error message */}
        {error && (
          <div className="bg-red-500/20 border border-red-500/30 rounded-xl p-4 mb-6">
            <p className="text-red-400">{error}</p>
          </div>
        )}

        {/* Script Section */}
        <div className="bg-zinc-900 border border-zinc-800 rounded-2xl mb-6 overflow-hidden">
          <button
            onClick={() => toggleSection('script')}
            className="w-full flex items-center justify-between p-6 text-left hover:bg-zinc-800/50 transition-colors"
          >
            <div className="flex items-center gap-3">
              <FileText className="w-5 h-5 text-violet-500" />
              <span className="text-lg font-semibold text-white">Roteiro</span>
            </div>
            {expandedSections.script ? (
              <ChevronUp className="w-5 h-5 text-zinc-400" />
            ) : (
              <ChevronDown className="w-5 h-5 text-zinc-400" />
            )}
          </button>

          {expandedSections.script && data.script && (
            <div className="px-6 pb-6 border-t border-zinc-800 pt-4">
              <h2 className="text-xl font-bold text-white mb-4">
                {data.script.title}
              </h2>

              {data.script.sections?.hook && (
                <div className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">HOOK</h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.sections.hook}
                  </p>
                </div>
              )}

              {data.script.sections?.body?.map((section, index) => (
                <div key={index} className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">
                    SECAO {index + 1}
                  </h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">{section}</p>
                </div>
              ))}

              {data.script.sections?.cta && (
                <div className="mb-6">
                  <h3 className="text-sm font-medium text-violet-400 mb-2">CTA</h3>
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.sections.cta}
                  </p>
                </div>
              )}

              {data.script.content && !data.script.sections?.hook && (
                <div className="prose prose-invert max-w-none">
                  <p className="text-zinc-300 whitespace-pre-wrap">
                    {data.script.content}
                  </p>
                </div>
              )}
            </div>
          )}
        </div>

        {/* Research Summary */}
        {data.research && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl mb-6 overflow-hidden">
            <button
              onClick={() => toggleSection('research')}
              className="w-full flex items-center justify-between p-6 text-left hover:bg-zinc-800/50 transition-colors"
            >
              <div className="flex items-center gap-3">
                <MessageSquare className="w-5 h-5 text-blue-500" />
                <span className="text-lg font-semibold text-white">
                  Resumo da Pesquisa
                </span>
              </div>
              {expandedSections.research ? (
                <ChevronUp className="w-5 h-5 text-zinc-400" />
              ) : (
                <ChevronDown className="w-5 h-5 text-zinc-400" />
              )}
            </button>

            {expandedSections.research && (
              <div className="px-6 pb-6 border-t border-zinc-800 pt-4">
                <p className="text-zinc-300 whitespace-pre-wrap">
                  {data.research.summary}
                </p>
              </div>
            )}
          </div>
        )}

        {/* Feedback Section */}
        {showFeedback && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 mb-6">
            <h3 className="text-lg font-semibold text-white mb-4">
              Solicitar Alteracoes
            </h3>
            <textarea
              value={feedback}
              onChange={(e) => setFeedback(e.target.value)}
              placeholder="Descreva as alteracoes necessarias..."
              className="w-full h-32 bg-zinc-800 border border-zinc-700 rounded-xl p-4 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-violet-500 resize-none"
            />
          </div>
        )}

        {/* Action Buttons */}
        {isAwaitingApproval && (
          <div className="flex flex-col sm:flex-row gap-4">
            <button
              onClick={handleApprove}
              disabled={submitting}
              className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {submitting ? (
                <Loader2 className="w-5 h-5 animate-spin" />
              ) : (
                <CheckCircle2 className="w-5 h-5" />
              )}
              Aprovar Roteiro
            </button>

            {!showFeedback ? (
              <button
                onClick={() => setShowFeedback(true)}
                className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-semibold rounded-xl transition-all"
              >
                <XCircle className="w-5 h-5" />
                Solicitar Alteracoes
              </button>
            ) : (
              <button
                onClick={handleRequestChanges}
                disabled={submitting || !feedback.trim()}
                className="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-amber-600 hover:bg-amber-500 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {submitting ? (
                  <Loader2 className="w-5 h-5 animate-spin" />
                ) : (
                  <MessageSquare className="w-5 h-5" />
                )}
                Enviar Feedback
              </button>
            )}
          </div>
        )}

        {!isAwaitingApproval && (
          <div className="bg-zinc-900 border border-zinc-800 rounded-2xl p-6 text-center">
            <p className="text-zinc-400">
              Este roteiro ja foi processado. Status atual:{' '}
              <span className="text-white font-medium">{data.project.status}</span>
            </p>
          </div>
        )}
      </div>
    </div>
  );
}

```

---
#### `app/approve/feedback-sent/page.tsx`

```
"use client";

import { MessageSquare, ArrowRight } from 'lucide-react';
import Link from 'next/link';

export default function FeedbackSentPage() {
  return (
    <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
      <div className="bg-zinc-900 border border-amber-500/30 rounded-2xl p-8 max-w-md text-center">
        <div className="w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
          <MessageSquare className="w-10 h-10 text-amber-500" />
        </div>

        <h1 className="text-2xl font-bold text-white mb-2">
          Feedback Enviado!
        </h1>

        <p className="text-zinc-400 mb-6">
          Seu feedback foi registrado.
          O roteiro sera revisado e voce recebera um novo email para aprovacao.
        </p>

        <Link
          href="/"
          className="inline-flex items-center gap-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white font-semibold rounded-xl transition-all"
        >
          Voltar ao Dashboard
          <ArrowRight className="w-4 h-4" />
        </Link>
      </div>
    </div>
  );
}

```

---
#### `app/approve/success/page.tsx`

```
"use client";

import { CheckCircle2, ArrowRight } from 'lucide-react';
import Link from 'next/link';

export default function ApprovalSuccessPage() {
  return (
    <div className="min-h-screen bg-zinc-950 flex items-center justify-center p-4">
      <div className="bg-zinc-900 border border-green-500/30 rounded-2xl p-8 max-w-md text-center">
        <div className="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
          <CheckCircle2 className="w-10 h-10 text-green-500" />
        </div>

        <h1 className="text-2xl font-bold text-white mb-2">
          Roteiro Aprovado!
        </h1>

        <p className="text-zinc-400 mb-6">
          O workflow continuara automaticamente.
          Voce recebera um email quando o video estiver pronto.
        </p>

        <div className="bg-zinc-800 rounded-xl p-4 mb-6">
          <p className="text-sm text-zinc-400">Proximos passos:</p>
          <ul className="text-left text-sm text-zinc-300 mt-2 space-y-1">
            <li>1. Geracao do storyboard</li>
            <li>2. Renderizacao do video</li>
            <li>3. Upload para YouTube</li>
          </ul>
        </div>

        <Link
          href="/"
          className="inline-flex items-center gap-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white font-semibold rounded-xl transition-all"
        >
          Voltar ao Dashboard
          <ArrowRight className="w-4 h-4" />
        </Link>
      </div>
    </div>
  );
}

```

---
#### `app/documentation/design-system/page.tsx`

```
'use client';

import { useState } from 'react';
import {
  Palette,
  Type,
  Box,
  Layers,
  Sparkles,
  Zap,
  MousePointer2,
  Layout,
  Circle,
  CheckCircle2,
  AlertCircle,
  XCircle,
  Info,
  ChevronRight,
  Loader2,
  ArrowRight,
  Settings,
  Bell,
  Star,
} from 'lucide-react';
import {
  ColorSwatch,
  ColorPalette,
  ColorGrid,
  GradientCard,
  GradientGrid,
  TypographySample,
  TypographyScale,
  FontPreview,
  ComponentPreview,
  ComponentSection,
  PreviewGrid,
  SpacingPreview,
  ShadowPreview,
  RadiusPreview,
} from '@/components/design-system';

// Navegação do Design System
const sections = [
  { id: 'overview', label: 'Visão Geral', icon: Layout },
  { id: 'colors', label: 'Cores', icon: Palette },
  { id: 'gradients', label: 'Gradientes', icon: Sparkles },
  { id: 'typography', label: 'Tipografia', icon: Type },
  { id: 'spacing', label: 'Espaçamento', icon: Box },
  { id: 'components', label: 'Componentes', icon: Layers },
  { id: 'motion', label: 'Motion', icon: Zap },
  { id: 'guidelines', label: 'Guidelines', icon: MousePointer2 },
];

export default function DesignSystemPage() {
  const [activeSection, setActiveSection] = useState('overview');

  const scrollToSection = (id: string) => {
    setActiveSection(id);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  };

  return (
    <div className="min-h-screen bg-layer-0">
      {/* Header Hero */}
      <header className="relative overflow-hidden border-b border-border-subtle">
        {/* Background Effects */}
        <div className="absolute inset-0 bg-gradient-orion-deep opacity-50" />
        <div className="absolute inset-0" style={{ background: 'var(--gradient-mesh)' }} />

        <div className="relative max-w-7xl mx-auto px-6 py-16 sm:py-24">
          <div className="flex items-center gap-3 mb-6">
            <div className="w-12 h-12 rounded-xl bg-gradient-cyan-blue flex items-center justify-center shadow-glow-md">
              <Palette className="w-6 h-6 text-white" />
            </div>
            <span className="badge-info">v1.0</span>
          </div>

          <h1 className="text-4xl sm:text-5xl lg:text-6xl font-bold text-foreground mb-4">
            ORION{' '}
            <span className="text-gradient">Design System</span>
          </h1>

          <p className="text-lg sm:text-xl text-foreground-secondary max-w-2xl mb-8">
            Sistema de design completo para a plataforma ORION. Uma linguagem visual
            unificada que guia todas as experiências do produto.
          </p>

          <div className="flex flex-wrap gap-4">
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Dark-first</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Glassmorphism</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Motion disciplinado</span>
            </div>
            <div className="flex items-center gap-2 text-sm text-foreground-muted">
              <CheckCircle2 className="w-4 h-4 text-success" />
              <span>Acessível</span>
            </div>
          </div>
        </div>
      </header>

      <div className="max-w-7xl mx-auto px-6 py-12">
        <div className="flex flex-col lg:flex-row gap-12">
          {/* Sidebar Navigation */}
          <aside className="lg:w-64 shrink-0">
            <nav className="lg:sticky lg:top-6 space-y-1">
              {sections.map((section) => {
                const Icon = section.icon;
                const isActive = activeSection === section.id;

                return (
                  <button
                    key={section.id}
                    onClick={() => scrollToSection(section.id)}
                    className={`
                      w-full flex items-center gap-3 px-4 py-3 rounded-lg
                      transition-all duration-200 text-left
                      ${isActive
                        ? 'bg-surface-glass border border-border-active text-foreground shadow-glow-sm'
                        : 'text-foreground-muted hover:text-foreground hover:bg-surface-glass-subtle'
                      }
                    `}
                  >
                    <Icon className="w-5 h-5" />
                    <span className="font-medium">{section.label}</span>
                    {isActive && (
                      <ChevronRight className="w-4 h-4 ml-auto" />
                    )}
                  </button>
                );
              })}
            </nav>
          </aside>

          {/* Main Content */}
          <main className="flex-1 space-y-24">
            {/* Overview */}
            <section id="overview" className="scroll-mt-6">
              <SectionHeader
                title="Visão Geral"
                description="Fundamentos e princípios do Design System ORION."
              />

              <div className="grid md:grid-cols-2 gap-6 mt-8">
                <PrincipleCard
                  icon={<Circle className="w-6 h-6" />}
                  title="Dark-First"
                  description="Projetado primariamente para modo escuro. Um centro de comando para produção de vídeos exige foco e redução de fadiga visual."
                />
                <PrincipleCard
                  icon={<Layers className="w-6 h-6" />}
                  title="Profundidade"
                  description="Sistema de camadas (layers) que cria hierarquia visual clara. Do layer-0 mais profundo ao layer-4 mais elevado."
                />
                <PrincipleCard
                  icon={<Sparkles className="w-6 h-6" />}
                  title="Glassmorphism Moderado"
                  description="Efeitos de vidro sutis para criar sofisticação sem comprometer legibilidade ou performance."
                />
                <PrincipleCard
                  icon={<Zap className="w-6 h-6" />}
                  title="Motion Funcional"
                  description="Animações servem a um propósito: feedback, transição de contexto ou indicação de estado. Nunca decorativas."
                />
              </div>

              {/* Color Identity */}
              <div className="mt-12 card-glass p-8 rounded-2xl">
                <h3 className="text-xl font-semibold text-foreground mb-6">Identidade de Cores</h3>
                <div className="grid md:grid-cols-3 gap-8">
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-gradient-cyan-blue shadow-glow-md" />
                    <div>
                      <h4 className="font-semibold text-foreground">Azul ORION + Cyan</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Cor principal. Transmite confiança, tecnologia e profissionalismo.
                        Usado em CTAs primários, estados ativos e elementos de foco.
                      </p>
                    </div>
                  </div>
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-orion-red-600 shadow-lg" />
                    <div>
                      <h4 className="font-semibold text-foreground">Vermelho ORION</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Acento crítico do logo. Estritamente limitado a CTAs críticos,
                        estados de erro ou ações irreversíveis.
                      </p>
                    </div>
                  </div>
                  <div className="space-y-4">
                    <div className="h-24 rounded-xl bg-gradient-orion-deep" />
                    <div>
                      <h4 className="font-semibold text-foreground">Azul Profundo</h4>
                      <p className="text-sm text-foreground-muted mt-1">
                        Base do sistema. Múltiplas camadas de azul escuro criam
                        profundidade e hierarquia visual.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* Colors */}
            <section id="colors" className="scroll-mt-6">
              <SectionHeader
                title="Cores"
                description="Paleta completa de cores do sistema ORION."
              />

              {/* Background Layers */}
              <ColorGrid
                title="Backgrounds (Layers)"
                description="Sistema de camadas para criar profundidade visual."
                className="mt-8"
              >
                <ColorSwatch name="Layer 0" value="#050A12" cssVariable="--bg-layer-0" />
                <ColorSwatch name="Layer 1" value="#0A1628" cssVariable="--bg-layer-1" />
                <ColorSwatch name="Layer 2" value="#0F2341" cssVariable="--bg-layer-2" />
                <ColorSwatch name="Layer 3" value="#1A3A5C" cssVariable="--bg-layer-3" />
                <ColorSwatch name="Layer 4" value="#245177" cssVariable="--bg-layer-4" />
              </ColorGrid>

              {/* Brand Colors */}
              <div className="mt-12 space-y-8">
                <ColorPalette
                  name="ORION Blue"
                  colors={[
                    { shade: '50', value: '#E8F4FC', cssVar: '--orion-blue-50' },
                    { shade: '100', value: '#C5E4F8', cssVar: '--orion-blue-100' },
                    { shade: '200', value: '#8EC8F2', cssVar: '--orion-blue-200' },
                    { shade: '300', value: '#57ACEB', cssVar: '--orion-blue-300' },
                    { shade: '400', value: '#3B82F6', cssVar: '--orion-blue-400' },
                    { shade: '500', value: '#2563EB', cssVar: '--orion-blue-500' },
                    { shade: '600', value: '#1D4ED8', cssVar: '--orion-blue-600' },
                    { shade: '700', value: '#1E3A5F', cssVar: '--orion-blue-700' },
                    { shade: '800', value: '#0F2341', cssVar: '--orion-blue-800' },
                    { shade: '900', value: '#0A1628', cssVar: '--orion-blue-900' },
                    { shade: '950', value: '#050A12', cssVar: '--orion-blue-950' },
                  ]}
                />

                <ColorPalette
                  name="Cyan (Estados Ativos)"
                  colors={[
                    { shade: '400', value: '#22D3EE', cssVar: '--accent-cyan-400' },
                    { shade: '500', value: '#06B6D4', cssVar: '--accent-cyan-500' },
                    { shade: '600', value: '#0891B2', cssVar: '--accent-cyan-600' },
                  ]}
                />

                <ColorPalette
                  name="Indigo (Estados Secundários)"
                  colors={[
                    { shade: '400', value: '#818CF8', cssVar: '--accent-indigo-400' },
                    { shade: '500', value: '#6366F1', cssVar: '--accent-indigo-500' },
                    { shade: '600', value: '#4F46E5', cssVar: '--accent-indigo-600' },
                  ]}
                />

                <ColorPalette
                  name="Violet (Decorativo)"
                  colors={[
                    { shade: '400', value: '#A78BFA', cssVar: '--accent-violet-400' },
                    { shade: '500', value: '#8B5CF6', cssVar: '--accent-violet-500' },
                    { shade: '600', value: '#7C3AED', cssVar: '--accent-violet-600' },
                  ]}
                />

                <ColorPalette
                  name="ORION Red (Acento Crítico)"
                  colors={[
                    { shade: '400', value: '#F87171', cssVar: '--orion-red-400' },
                    { shade: '500', value: '#EF4444', cssVar: '--orion-red-500' },
                    { shade: '600', value: '#DC2626', cssVar: '--orion-red-600' },
                  ]}
                />
              </div>

              {/* Semantic Colors */}
              <div className="mt-12">
                <h3 className="text-xl font-semibold text-foreground mb-6">Cores Semânticas</h3>
                <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                  <SemanticColorCard
                    name="Success"
                    icon={<CheckCircle2 className="w-5 h-5" />}
                    bgClass="bg-success-bg"
                    borderClass="border-success-border"
                    textClass="text-success-text"
                  />
                  <SemanticColorCard
                    name="Warning"
                    icon={<AlertCircle className="w-5 h-5" />}
                    bgClass="bg-warning-bg"
                    borderClass="border-warning-border"
                    textClass="text-warning-text"
                  />
                  <SemanticColorCard
                    name="Error"
                    icon={<XCircle className="w-5 h-5" />}
                    bgClass="bg-error-bg"
                    borderClass="border-error-border"
                    textClass="text-error-text"
                  />
                  <SemanticColorCard
                    name="Info"
                    icon={<Info className="w-5 h-5" />}
                    bgClass="bg-info-bg"
                    borderClass="border-info-border"
                    textClass="text-info-text"
                  />
                </div>
              </div>

              {/* Text Colors */}
              <div className="mt-12">
                <h3 className="text-xl font-semibold text-foreground mb-6">Cores de Texto</h3>
                <div className="card-glass p-6 rounded-xl space-y-4">
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground">Texto Primário</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-secondary">Texto Secundário</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-secondary</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-muted">Texto Muted</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-muted</code>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-lg text-foreground-disabled">Texto Disabled</span>
                    <code className="text-xs font-mono text-foreground-muted">--foreground-disabled</code>
                  </div>
                </div>
              </div>
            </section>

            {/* Gradients */}
            <section id="gradients" className="scroll-mt-6">
              <SectionHeader
                title="Gradientes"
                description="Gradientes oficiais do sistema ORION."
              />

              <GradientGrid
                title="Gradientes Principais"
                description="Usados em elementos de destaque e CTAs."
                className="mt-8"
              >
                <GradientCard
                  name="Cyan Blue"
                  cssVariable="--gradient-cyan-blue"
                  gradient="linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%)"
                  description="Botões primários, CTAs"
                />
                <GradientCard
                  name="Blue Indigo"
                  cssVariable="--gradient-blue-indigo"
                  gradient="linear-gradient(135deg, #3B82F6 0%, #6366F1 100%)"
                  description="Estados ativos, foco"
                />
                <GradientCard
                  name="Violet Blue"
                  cssVariable="--gradient-violet-blue"
                  gradient="linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%)"
                  description="Elementos decorativos"
                />
              </GradientGrid>

              <GradientGrid
                title="Gradientes de Background"
                description="Usados em fundos e seções."
                className="mt-12"
              >
                <GradientCard
                  name="ORION Primary"
                  cssVariable="--gradient-orion-primary"
                  gradient="linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%)"
                  description="Headers, heroes"
                />
                <GradientCard
                  name="ORION Dark"
                  cssVariable="--gradient-orion-dark"
                  gradient="linear-gradient(180deg, #050A12 0%, #0A1628 100%)"
                  description="Fundos principais"
                />
                <GradientCard
                  name="ORION Deep"
                  cssVariable="--gradient-orion-deep"
                  gradient="linear-gradient(135deg, #050A12 0%, #0F2341 100%)"
                  description="Seções profundas"
                />
              </GradientGrid>

              <GradientGrid
                title="Gradientes de Efeito"
                description="Usados para glow e efeitos visuais."
                className="mt-12"
              >
                <GradientCard
                  name="Cyan Glow"
                  cssVariable="--gradient-cyan-glow"
                  gradient="linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%)"
                  description="Efeito de luz superior"
                />
                <GradientCard
                  name="Blue Glow"
                  cssVariable="--gradient-blue-glow"
                  gradient="linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%)"
                  description="Efeito de luz azul"
                />
                <GradientCard
                  name="Card Gradient"
                  cssVariable="--gradient-card"
                  gradient="linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%)"
                  description="Fundo de cards"
                />
              </GradientGrid>
            </section>

            {/* Typography */}
            <section id="typography" className="scroll-mt-6">
              <SectionHeader
                title="Tipografia"
                description="Sistema tipográfico do ORION."
              />

              <FontPreview />

              <TypographyScale
                title="Escala de Tamanhos"
                description="Tamanhos de fonte padronizados."
                className="mt-12"
              >
                <TypographySample
                  name="Display Large"
                  description="Títulos hero"
                  fontClass="text-5xl font-bold tracking-tight"
                  specs={{ size: '3rem / 48px', weight: '700', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Display Medium"
                  description="Títulos de seção"
                  fontClass="text-4xl font-bold tracking-tight"
                  specs={{ size: '2.25rem / 36px', weight: '700', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Heading 1"
                  description="Títulos principais"
                  fontClass="text-3xl font-semibold"
                  specs={{ size: '1.875rem / 30px', weight: '600', lineHeight: '1.25' }}
                />
                <TypographySample
                  name="Heading 2"
                  description="Subtítulos"
                  fontClass="text-2xl font-semibold"
                  specs={{ size: '1.5rem / 24px', weight: '600', lineHeight: '1.33' }}
                />
                <TypographySample
                  name="Heading 3"
                  description="Títulos de card"
                  fontClass="text-xl font-semibold"
                  specs={{ size: '1.25rem / 20px', weight: '600', lineHeight: '1.4' }}
                />
                <TypographySample
                  name="Body Large"
                  description="Texto de destaque"
                  fontClass="text-lg"
                  specs={{ size: '1.125rem / 18px', weight: '400', lineHeight: '1.625' }}
                />
                <TypographySample
                  name="Body"
                  description="Texto padrão"
                  fontClass="text-base"
                  specs={{ size: '1rem / 16px', weight: '400', lineHeight: '1.5' }}
                />
                <TypographySample
                  name="Body Small"
                  description="Texto secundário"
                  fontClass="text-sm"
                  specs={{ size: '0.875rem / 14px', weight: '400', lineHeight: '1.43' }}
                />
                <TypographySample
                  name="Caption"
                  description="Legendas e labels"
                  fontClass="text-xs"
                  specs={{ size: '0.75rem / 12px', weight: '400', lineHeight: '1.33' }}
                />
                <TypographySample
                  name="Code"
                  description="Código e dados"
                  fontClass="text-sm font-mono"
                  sampleText="const orion = 'design-system';"
                  specs={{ size: '0.875rem / 14px', weight: '400' }}
                />
              </TypographyScale>
            </section>

            {/* Spacing */}
            <section id="spacing" className="scroll-mt-6">
              <SectionHeader
                title="Espaçamento"
                description="Sistema de espaçamento baseado em múltiplos de 4px."
              />

              <div className="mt-8 grid md:grid-cols-2 gap-8">
                {/* Spacing Scale */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-6">Escala Base</h3>
                  <div className="space-y-4">
                    <SpacingPreview name="0.5" value="0.125rem" />
                    <SpacingPreview name="1" value="0.25rem" />
                    <SpacingPreview name="2" value="0.5rem" />
                    <SpacingPreview name="3" value="0.75rem" />
                    <SpacingPreview name="4" value="1rem" />
                    <SpacingPreview name="6" value="1.5rem" />
                    <SpacingPreview name="8" value="2rem" />
                    <SpacingPreview name="12" value="3rem" />
                    <SpacingPreview name="16" value="4rem" />
                    <SpacingPreview name="24" value="6rem" />
                  </div>
                </div>

                {/* Border Radius */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-6">Border Radius</h3>
                  <div className="grid grid-cols-4 gap-4">
                    <RadiusPreview name="sm" radius="0.25rem" />
                    <RadiusPreview name="md" radius="0.375rem" />
                    <RadiusPreview name="lg" radius="0.5rem" />
                    <RadiusPreview name="xl" radius="0.75rem" />
                    <RadiusPreview name="2xl" radius="1rem" />
                    <RadiusPreview name="3xl" radius="1.5rem" />
                    <RadiusPreview name="4xl" radius="2rem" />
                    <RadiusPreview name="full" radius="9999px" />
                  </div>
                </div>
              </div>

              {/* Shadows */}
              <div className="mt-8">
                <h3 className="text-xl font-semibold text-foreground mb-6">Sombras</h3>
                <div className="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-8">
                  <ShadowPreview name="Card" shadow="var(--shadow-card)" />
                  <ShadowPreview name="Card Hover" shadow="var(--shadow-card-hover)" />
                  <ShadowPreview name="Elevated" shadow="var(--shadow-card-elevated)" />
                  <ShadowPreview name="Glow Blue" shadow="var(--shadow-glow-blue)" />
                  <ShadowPreview name="Glow Cyan" shadow="var(--shadow-glow-cyan)" />
                  <ShadowPreview name="Glow Violet" shadow="var(--shadow-glow-violet)" />
                </div>
              </div>
            </section>

            {/* Components */}
            <section id="components" className="scroll-mt-6">
              <SectionHeader
                title="Componentes"
                description="Componentes UI do sistema ORION."
              />

              {/* Buttons */}
              <ComponentSection
                title="Botões"
                description="Sistema completo de botões com variantes e estados."
                className="mt-8"
              >
                <ComponentPreview
                  title="Variantes de Botão"
                  description="6 variantes para diferentes contextos."
                >
                  <div className="flex flex-wrap gap-4">
                    <button className="btn-primary">Primary</button>
                    <button className="btn-secondary">Secondary</button>
                    <button className="btn-outline">Outline</button>
                    <button className="btn-ghost">Ghost</button>
                    <button className="btn-success">Success</button>
                    <button className="btn-danger">Danger</button>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Tamanhos"
                  description="3 tamanhos disponíveis."
                >
                  <div className="flex flex-wrap items-center gap-4">
                    <button className="btn-primary btn-sm">Small</button>
                    <button className="btn-primary">Medium</button>
                    <button className="btn-primary btn-lg">Large</button>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Estados"
                  description="Estados de loading e disabled."
                >
                  <div className="flex flex-wrap items-center gap-4">
                    <button className="btn-primary" disabled>
                      Disabled
                    </button>
                    <button className="btn-primary flex items-center gap-2">
                      <Loader2 className="w-4 h-4 animate-spin" />
                      Loading
                    </button>
                    <button className="btn-primary flex items-center gap-2">
                      Continuar
                      <ArrowRight className="w-4 h-4" />
                    </button>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Badges */}
              <ComponentSection
                title="Badges"
                description="Indicadores de status e tags."
                className="mt-12"
              >
                <ComponentPreview
                  title="Variantes Semânticas"
                  description="Badges para diferentes estados."
                >
                  <div className="flex flex-wrap gap-3">
                    <span className="badge-success">Success</span>
                    <span className="badge-warning">Warning</span>
                    <span className="badge-error">Error</span>
                    <span className="badge-info">Info</span>
                    <span className="badge-default">Default</span>
                  </div>
                </ComponentPreview>

                <ComponentPreview
                  title="Com Ícones"
                  description="Badges com ícones para mais contexto."
                >
                  <div className="flex flex-wrap gap-3">
                    <span className="badge-success flex items-center gap-1.5">
                      <CheckCircle2 className="w-3.5 h-3.5" />
                      Aprovado
                    </span>
                    <span className="badge-warning flex items-center gap-1.5">
                      <AlertCircle className="w-3.5 h-3.5" />
                      Pendente
                    </span>
                    <span className="badge-error flex items-center gap-1.5">
                      <XCircle className="w-3.5 h-3.5" />
                      Rejeitado
                    </span>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Cards */}
              <ComponentSection
                title="Cards"
                description="Containers com diferentes níveis de elevação."
                className="mt-12"
              >
                <PreviewGrid cols={3}>
                  <div className="card p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Padrão</h4>
                    <p className="text-sm text-foreground-muted">
                      Card básico com background sutil e borda.
                    </p>
                  </div>
                  <div className="card-elevated p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Elevado</h4>
                    <p className="text-sm text-foreground-muted">
                      Card com sombra para maior destaque.
                    </p>
                  </div>
                  <div className="card-glass p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Glass</h4>
                    <p className="text-sm text-foreground-muted">
                      Card com efeito glassmorphism.
                    </p>
                  </div>
                  <div className="card-hover p-6">
                    <h4 className="font-semibold text-foreground mb-2">Card Hover</h4>
                    <p className="text-sm text-foreground-muted">
                      Passe o mouse para ver o efeito.
                    </p>
                  </div>
                  <div className="card p-6 glow-hover border border-border-subtle">
                    <h4 className="font-semibold text-foreground mb-2">Card Glow</h4>
                    <p className="text-sm text-foreground-muted">
                      Com efeito de glow no hover.
                    </p>
                  </div>
                </PreviewGrid>
              </ComponentSection>

              {/* Form Elements */}
              <ComponentSection
                title="Formulários"
                description="Inputs, selects e outros elementos de formulário."
                className="mt-12"
              >
                <ComponentPreview
                  title="Inputs"
                  description="Campos de entrada de texto."
                >
                  <div className="space-y-4 max-w-md">
                    <div>
                      <label className="label">Label padrão</label>
                      <input type="text" className="input" placeholder="Digite algo..." />
                    </div>
                    <div>
                      <label className="label">Textarea</label>
                      <textarea className="textarea" placeholder="Descrição..." rows={3} />
                    </div>
                    <div>
                      <label className="label">Select</label>
                      <select className="select">
                        <option>Opção 1</option>
                        <option>Opção 2</option>
                        <option>Opção 3</option>
                      </select>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Step Indicators */}
              <ComponentSection
                title="Step Indicators"
                description="Indicadores de progresso do workflow."
                className="mt-12"
              >
                <ComponentPreview
                  title="Estados de Step"
                  description="Diferentes estados do indicador de step."
                >
                  <div className="flex items-center gap-4">
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-completed">
                        <CheckCircle2 className="w-5 h-5" />
                      </div>
                      <span className="text-xs text-foreground-muted">Completed</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-active">2</div>
                      <span className="text-xs text-foreground-muted">Active</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-pending">3</div>
                      <span className="text-xs text-foreground-muted">Pending</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-locked">4</div>
                      <span className="text-xs text-foreground-muted">Locked</span>
                    </div>
                    <div className="flex flex-col items-center gap-2">
                      <div className="step-error">
                        <XCircle className="w-5 h-5" />
                      </div>
                      <span className="text-xs text-foreground-muted">Error</span>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>

              {/* Status Indicators */}
              <ComponentSection
                title="Status Indicators"
                description="Pontos de status para indicar estados."
                className="mt-12"
              >
                <ComponentPreview
                  title="Status Dots"
                  description="Indicadores visuais de status."
                >
                  <div className="flex items-center gap-6">
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-online" />
                      <span className="text-sm text-foreground-muted">Online</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-offline" />
                      <span className="text-sm text-foreground-muted">Offline</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-warning" />
                      <span className="text-sm text-foreground-muted">Warning</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot status-error" />
                      <span className="text-sm text-foreground-muted">Error</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="status-dot-pulse status-online" />
                      <span className="text-sm text-foreground-muted">Pulse</span>
                    </div>
                  </div>
                </ComponentPreview>
              </ComponentSection>
            </section>

            {/* Motion */}
            <section id="motion" className="scroll-mt-6">
              <SectionHeader
                title="Motion"
                description="Sistema de animações e transições."
              />

              <div className="mt-8 space-y-8">
                {/* Duration */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-4">Durações</h3>
                  <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Fast</p>
                      <p className="text-xs text-foreground-muted font-mono">150ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Micro-interações, hovers</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Normal</p>
                      <p className="text-xs text-foreground-muted font-mono">200ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Transições padrão</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Slow</p>
                      <p className="text-xs text-foreground-muted font-mono">300ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Transições de entrada</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Slower</p>
                      <p className="text-xs text-foreground-muted font-mono">500ms</p>
                      <p className="text-xs text-foreground-muted mt-2">Animações complexas</p>
                    </div>
                  </div>
                </div>

                {/* Easings */}
                <div className="card-glass p-6 rounded-xl">
                  <h3 className="text-lg font-semibold text-foreground mb-4">Easings</h3>
                  <div className="grid sm:grid-cols-2 gap-4">
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease In Out</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.4, 0, 0.2, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Padrão para a maioria das transições</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease Out</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0, 0, 0.2, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Elementos entrando na tela</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Ease In</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.4, 0, 1, 1)</p>
                      <p className="text-xs text-foreground-muted mt-2">Elementos saindo da tela</p>
                    </div>
                    <div className="p-4 bg-layer-1 rounded-lg">
                      <p className="text-sm font-medium text-foreground">Spring</p>
                      <p className="text-xs text-foreground-muted font-mono">cubic-bezier(0.175, 0.885, 0.32, 1.275)</p>
                      <p className="text-xs text-foreground-muted mt-2">Animações com bounce sutil</p>
                    </div>
                  </div>
                </div>

                {/* Animation Examples */}
                <ComponentPreview
                  title="Exemplos de Animação"
                  description="Animações disponíveis no sistema."
                >
                  <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <AnimationDemo name="Pulse Glow" className="animate-pulse-glow" />
                    <AnimationDemo name="Float" className="animate-float" />
                    <AnimationDemo name="Shimmer" className="shimmer bg-layer-2" />
                    <AnimationDemo name="Spinner" hasSpinner />
                  </div>
                </ComponentPreview>
              </div>
            </section>

            {/* Guidelines */}
            <section id="guidelines" className="scroll-mt-6">
              <SectionHeader
                title="Guidelines"
                description="Diretrizes de uso do Design System."
              />

              <div className="mt-8 space-y-8">
                {/* Glassmorphism */}
                <GuidelineCard
                  title="Glassmorphism"
                  description="Quando usar e quando evitar efeitos de vidro."
                >
                  <div className="grid md:grid-cols-2 gap-6">
                    <div>
                      <h4 className="text-sm font-semibold text-success-text mb-3 flex items-center gap-2">
                        <CheckCircle2 className="w-4 h-4" />
                        Usar para
                      </h4>
                      <ul className="space-y-2 text-sm text-foreground-muted">
                        <li>Cards sobre backgrounds com gradiente</li>
                        <li>Modais e overlays</li>
                        <li>Navegação flutuante</li>
                        <li>Elementos que precisam de profundidade</li>
                      </ul>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-error-text mb-3 flex items-center gap-2">
                        <XCircle className="w-4 h-4" />
                        Evitar para
                      </h4>
                      <ul className="space-y-2 text-sm text-foreground-muted">
                        <li>Texto pequeno ou crítico</li>
                        <li>Muitos elementos em sequência</li>
                        <li>Dispositivos de baixa performance</li>
                        <li>Elementos com muito conteúdo</li>
                      </ul>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Cor Vermelha */}
                <GuidelineCard
                  title="Uso do Vermelho ORION"
                  description="O vermelho é reservado para situações específicas."
                >
                  <div className="space-y-4">
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Ações destrutivas</p>
                        <p className="text-xs text-foreground-muted">Deletar, cancelar assinatura, remover acesso</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Estados de erro</p>
                        <p className="text-xs text-foreground-muted">Validação de formulário, falhas de sistema</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <CheckCircle2 className="w-5 h-5 text-success-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Alertas críticos</p>
                        <p className="text-xs text-foreground-muted">Downtime, problemas de segurança</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3">
                      <XCircle className="w-5 h-5 text-error-text shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-foreground">Nunca usar para</p>
                        <p className="text-xs text-foreground-muted">CTAs primários, decoração, ênfase geral</p>
                      </div>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Motion */}
                <GuidelineCard
                  title="Disciplina de Motion"
                  description="Animações devem servir a um propósito."
                >
                  <div className="grid md:grid-cols-3 gap-6">
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Zap className="w-4 h-4 text-cyan-400" />
                        Feedback
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Indicar que uma ação foi reconhecida. Hover states, cliques, submits.
                      </p>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Settings className="w-4 h-4 text-cyan-400" />
                        Transição
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Suavizar mudanças de contexto. Página, modal, painel lateral.
                      </p>
                    </div>
                    <div>
                      <h4 className="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                        <Bell className="w-4 h-4 text-cyan-400" />
                        Estado
                      </h4>
                      <p className="text-sm text-foreground-muted">
                        Indicar status atual. Loading, processando, aguardando.
                      </p>
                    </div>
                  </div>
                </GuidelineCard>

                {/* Accessibility */}
                <GuidelineCard
                  title="Acessibilidade"
                  description="Garantindo uma experiência inclusiva."
                >
                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Contraste mínimo 4.5:1</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Texto sobre fundos deve ter contraste suficiente para leitura.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Focus visible</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Todos os elementos interativos devem ter estado de foco visível.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Reduzir movimento</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Respeitar prefers-reduced-motion do usuário.
                      </p>
                    </div>
                    <div className="space-y-3">
                      <div className="flex items-center gap-2">
                        <Star className="w-4 h-4 text-warning" />
                        <span className="text-sm font-medium text-foreground">Touch targets</span>
                      </div>
                      <p className="text-sm text-foreground-muted">
                        Mínimo de 44x44px para elementos tocáveis em mobile.
                      </p>
                    </div>
                  </div>
                </GuidelineCard>
              </div>
            </section>
          </main>
        </div>
      </div>

      {/* Footer */}
      <footer className="border-t border-border-subtle mt-24">
        <div className="max-w-7xl mx-auto px-6 py-12">
          <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
            <div className="flex items-center gap-3">
              <div className="w-8 h-8 rounded-lg bg-gradient-cyan-blue flex items-center justify-center">
                <Palette className="w-4 h-4 text-white" />
              </div>
              <span className="font-semibold text-foreground">ORION Design System</span>
            </div>
            <p className="text-sm text-foreground-muted">
              Single Source of Truth para a plataforma ORION
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}

// Helper Components

function SectionHeader({ title, description }: { title: string; description: string }) {
  return (
    <div className="pb-6 border-b border-border-subtle">
      <h2 className="text-3xl font-bold text-foreground">{title}</h2>
      <p className="mt-2 text-foreground-muted">{description}</p>
    </div>
  );
}

function PrincipleCard({
  icon,
  title,
  description,
}: {
  icon: React.ReactNode;
  title: string;
  description: string;
}) {
  return (
    <div className="card-glass p-6 rounded-xl glow-hover border border-border-subtle">
      <div className="w-12 h-12 rounded-xl bg-gradient-cyan-blue flex items-center justify-center text-white mb-4">
        {icon}
      </div>
      <h3 className="text-lg font-semibold text-foreground mb-2">{title}</h3>
      <p className="text-sm text-foreground-muted">{description}</p>
    </div>
  );
}

function SemanticColorCard({
  name,
  icon,
  bgClass,
  borderClass,
  textClass,
}: {
  name: string;
  icon: React.ReactNode;
  bgClass: string;
  borderClass: string;
  textClass: string;
}) {
  return (
    <div className={`p-4 rounded-xl border ${bgClass} ${borderClass}`}>
      <div className={`flex items-center gap-3 ${textClass}`}>
        {icon}
        <span className="font-medium">{name}</span>
      </div>
    </div>
  );
}

function AnimationDemo({
  name,
  className = '',
  hasSpinner = false,
}: {
  name: string;
  className?: string;
  hasSpinner?: boolean;
}) {
  return (
    <div className="text-center">
      <div
        className={`
          w-20 h-20 mx-auto rounded-xl border border-border-active
          flex items-center justify-center
          ${className}
        `}
      >
        {hasSpinner ? (
          <div className="spinner" />
        ) : (
          <div className="w-8 h-8 rounded-lg bg-gradient-cyan-blue" />
        )}
      </div>
      <p className="mt-3 text-sm text-foreground-muted">{name}</p>
    </div>
  );
}

function GuidelineCard({
  title,
  description,
  children,
}: {
  title: string;
  description: string;
  children: React.ReactNode;
}) {
  return (
    <div className="card-glass p-6 rounded-xl">
      <h3 className="text-lg font-semibold text-foreground mb-2">{title}</h3>
      <p className="text-sm text-foreground-muted mb-6">{description}</p>
      {children}
    </div>
  );
}

```

---
#### `app/documentation/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { cn } from "@/lib/utils";
import {
  exportTabAsMarkdown,
  exportAllTabsAsMarkdown,
  exportTabAsPDF,
  DocumentationTab,
} from "@/lib/documentation-export";
import {
  Brain,
  Building2,
  Plug,
  Layers,
  Compass,
  Download,
  FileText,
  FileDown,
  ChevronRight,
  BookOpen,
  Mail,
  Clock,
  Rocket,
  TrendingUp,
  GitBranch,
} from "lucide-react";
import { ShareProvider, useShare } from "@/lib/share-context";
import ShareButtons from "@/components/documentation/ShareButtons";
import Image from "next/image";

// Configuração do projeto
const PROJECT_CONFIG = {
  name: "ORION",
  subtitle: "AI Video Production Workflow - White Label SaaS Platform",
  launchDate: new Date("2025-03-15T00:00:00"),
  lastUpdate: {
    date: "23/01/2026",
    time: "20:10",
    author: "Claude",
    authorType: "ai" as const,
  },
  progress: {
    completed: 82,
    items: [
      { name: "Interface Base", percent: 100, status: "done" },
      { name: "Documentação", percent: 100, status: "done" },
      { name: "AI Agents (Inngest)", percent: 100, status: "done" },
      { name: "Prisma Database", percent: 100, status: "done" },
      { name: "Sistema de Aprovação", percent: 100, status: "done" },
      { name: "Deploy & Testes", percent: 90, status: "progress" },
    ],
  },
};

// Tab Components
import GenesisTab from "@/components/documentation/GenesisTab";
import SystemVisionTab from "@/components/documentation/SystemVisionTab";
import IntegrationsTab from "@/components/documentation/IntegrationsTab";
import TechStackTab from "@/components/documentation/TechStackTab";
import CurrentStateTab from "@/components/documentation/CurrentStateTab";
import DecisionsTab from "@/components/documentation/DecisionsTab";

// Tab content for export
import {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
  decisionsContent,
} from "@/components/documentation/content";

const tabs = [
  {
    id: "genesis",
    label: "Gênese & Intenção",
    icon: Brain,
    description: "Origem e propósito fundamental do sistema",
    component: GenesisTab,
    gradient: "from-purple-500 to-indigo-600",
  },
  {
    id: "system-vision",
    label: "Visão Sistêmica",
    icon: Building2,
    description: "Funcionamento e arquitetura operacional",
    component: SystemVisionTab,
    gradient: "from-blue-500 to-cyan-600",
  },
  {
    id: "integrations",
    label: "Integrações & APIs",
    icon: Plug,
    description: "Conexões externas e fluxo de dados",
    component: IntegrationsTab,
    gradient: "from-green-500 to-emerald-600",
  },
  {
    id: "tech-stack",
    label: "Stack Tecnológica",
    icon: Layers,
    description: "Tecnologias e linguagens utilizadas",
    component: TechStackTab,
    gradient: "from-orange-500 to-amber-600",
  },
  {
    id: "current-state",
    label: "Estado Atual",
    icon: Compass,
    description: "Status do projeto e próximos passos",
    component: CurrentStateTab,
    gradient: "from-rose-500 to-pink-600",
  },
  {
    id: "decisions",
    label: "Decisoes Claude",
    icon: GitBranch,
    description: "Registro de decisoes arquiteturais e debates tecnicas",
    component: DecisionsTab,
    gradient: "from-violet-500 to-purple-600",
  },
];

// Componente de Countdown
function CountdownTimer({ targetDate }: { targetDate: Date }) {
  const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });

  useEffect(() => {
    const calculateTimeLeft = () => {
      const now = new Date();
      const difference = targetDate.getTime() - now.getTime();

      if (difference > 0) {
        setTimeLeft({
          days: Math.floor(difference / (1000 * 60 * 60 * 24)),
          hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
          minutes: Math.floor((difference / 1000 / 60) % 60),
          seconds: Math.floor((difference / 1000) % 60),
        });
      }
    };

    calculateTimeLeft();
    const timer = setInterval(calculateTimeLeft, 1000);
    return () => clearInterval(timer);
  }, [targetDate]);

  return (
    <div className="flex items-center gap-2 text-sm">
      <Rocket className="w-4 h-4 text-amber-400" />
      <span className="text-secondary">Lançamento em:</span>
      <div className="flex gap-1">
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.days}d</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.hours}h</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.minutes}m</span>
        <span className="bg-layer-2 px-2 py-1 rounded font-mono text-amber-400">{timeLeft.seconds}s</span>
      </div>
    </div>
  );
}

// Componente de Barra de Progresso
function ProjectProgress() {
  return (
    <div className="bg-layer-1/80 border border-subtle rounded-xl p-4">
      <div className="flex items-center justify-between mb-3">
        <div className="flex items-center gap-2">
          <TrendingUp className="w-5 h-5 text-green-400" />
          <span className="font-semibold text-white">Progresso do Projeto</span>
        </div>
        <span className="text-2xl font-bold text-green-400">{PROJECT_CONFIG.progress.completed}%</span>
      </div>

      {/* Barra principal */}
      <div className="h-3 bg-layer-2 rounded-full overflow-hidden mb-4">
        <div
          className="h-full bg-gradient-to-r from-green-500 to-emerald-400 rounded-full transition-all duration-500"
          style={{ width: `${PROJECT_CONFIG.progress.completed}%` }}
        />
      </div>

      {/* Items detalhados */}
      <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
        {PROJECT_CONFIG.progress.items.map((item) => (
          <div key={item.name} className="bg-layer-2/50 rounded-lg p-2">
            <div className="flex items-center justify-between mb-1">
              <span className="text-xs text-muted truncate">{item.name}</span>
              <span className={cn(
                "text-xs font-medium",
                item.status === "done" ? "text-green-400" : "text-amber-400"
              )}>{item.percent}%</span>
            </div>
            <div className="h-1.5 bg-zinc-700 rounded-full overflow-hidden">
              <div
                className={cn(
                  "h-full rounded-full transition-all",
                  item.status === "done" ? "bg-green-500" : "bg-amber-500"
                )}
                style={{ width: `${item.percent}%` }}
              />
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// Componente Avatar do Kleiton
function KleitonAvatar({ size = 48 }: { size?: number }) {
  const [imageError, setImageError] = useState(false);

  if (imageError) {
    return (
      <div
        className="bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold"
        style={{ width: size, height: size, fontSize: size * 0.4 }}
      >
        KJ
      </div>
    );
  }

  return (
    <Image
      src="/images/kleiton-profile.jpg"
      alt="Kleiton Jatobá"
      width={size}
      height={size}
      className="rounded-full object-cover"
      onError={() => setImageError(true)}
    />
  );
}

// Componente de Última Atualização
function LastUpdateInfo() {
  return (
    <div className="flex flex-wrap items-center gap-3 text-sm bg-layer-2/50 px-3 py-2 rounded-lg">
      <Clock className="w-4 h-4 text-blue-400" />
      <div className="flex flex-wrap items-center gap-2">
        <span className="text-muted">Última atualização:</span>
        <span className="text-white font-medium">{PROJECT_CONFIG.lastUpdate.date}</span>
        <span className="text-muted">às</span>
        <span className="text-white font-medium">{PROJECT_CONFIG.lastUpdate.time}</span>
        <span className="text-muted">por</span>
        <div className="flex items-center gap-1">
          {PROJECT_CONFIG.lastUpdate.authorType === "ai" ? (
            <span className="bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded text-xs font-medium">
              🤖 {PROJECT_CONFIG.lastUpdate.author}
            </span>
          ) : (
            <span className="bg-blue-500/20 text-blue-300 px-2 py-0.5 rounded text-xs font-medium flex items-center gap-1">
              <KleitonAvatar size={16} />
              {PROJECT_CONFIG.lastUpdate.author}
            </span>
          )}
        </div>
      </div>
    </div>
  );
}

function DocumentationContent() {
  const [activeTab, setActiveTab] = useState("genesis");
  const { isSharedView, canCopy } = useShare();

  const activeTabData = tabs.find((t) => t.id === activeTab);
  const ActiveComponent = activeTabData?.component;

  // Prepare documentation tabs for export
  const documentationTabs: DocumentationTab[] = [
    { id: "genesis", title: "Gênese & Intenção do Sistema", icon: "🧠", content: genesisContent },
    { id: "system-vision", title: "Visão Sistêmica & Funcionamento", icon: "🏗️", content: systemVisionContent },
    { id: "integrations", title: "Arquitetura de Integrações & APIs", icon: "🔌", content: integrationsContent },
    { id: "tech-stack", title: "Stack Tecnológica & Linguagens", icon: "🧱", content: techStackContent },
    { id: "current-state", title: "Estado Atual & Próximos Passos", icon: "🧭", content: currentStateContent },
    { id: "decisions", title: "Decisoes Arquiteturais - Claude Code", icon: "🔀", content: decisionsContent },
  ];

  const handleExportMarkdown = () => {
    const tab = documentationTabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsMarkdown(tab);
  };

  const handleExportAllMarkdown = () => {
    exportAllTabsAsMarkdown(documentationTabs);
  };

  const handleExportPDF = () => {
    const tab = tabs.find((t) => t.id === activeTab);
    if (tab) exportTabAsPDF(activeTab, tab.label);
  };

  return (
    <div className="min-h-full">
      {/* Header Principal com Nome do Sistema */}
      <div className="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 px-4 sm:px-8 py-6 sm:py-10">
        <div className="max-w-7xl mx-auto">
          {/* Título do Sistema */}
          <div className="text-center mb-6">
            <h1 className="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-2">
              📺 {PROJECT_CONFIG.name}
            </h1>
            <p className="text-white/90 text-base sm:text-lg">
              {PROJECT_CONFIG.subtitle}
            </p>
            <p className="text-white/70 text-sm mt-1">
              Documentação Técnica Completa
            </p>
          </div>

          {/* Countdown de Lançamento */}
          <div className="flex justify-center mb-6">
            <div className="bg-black/20 backdrop-blur-sm px-4 py-2 rounded-xl">
              <CountdownTimer targetDate={PROJECT_CONFIG.launchDate} />
            </div>
          </div>

          <div className="flex flex-col sm:flex-row sm:items-center gap-4 mb-4">
            <div className="flex items-center gap-3">
              <div className="p-2 sm:p-3 bg-white/10 backdrop-blur-sm rounded-xl">
                <BookOpen className="w-6 h-6 sm:w-8 sm:h-8 text-white" />
              </div>
              <div>
                <h2 className="text-xl sm:text-2xl font-bold text-white">
                  Documentação Viva
                </h2>
                <p className="text-white/80 text-sm sm:text-base">
                  Memória cognitiva e base de auditoria técnica
                </p>
              </div>
            </div>

            {/* Share Button - Only visible for owners */}
            {!isSharedView && (
              <div className="sm:ml-auto">
                <ShareButtons />
              </div>
            )}
          </div>

          {/* Founder Info com Foto */}
          <div className="flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-6 mb-6 p-3 sm:p-4 bg-white/10 backdrop-blur-sm rounded-xl">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full overflow-hidden border-2 border-white/30">
                <KleitonAvatar size={48} />
              </div>
              <div>
                <p className="text-white font-semibold text-sm sm:text-base">Kleiton Jatobá</p>
                <p className="text-white/70 text-xs sm:text-sm">Founder & Creator</p>
              </div>
            </div>
            <div className="flex items-center gap-2 text-white/80 text-xs sm:text-sm">
              <Mail className="w-4 h-4" />
              <a href="mailto:akzdigitalbr@gmail.com" className="hover:text-white transition-colors">
                akzdigitalbr@gmail.com
              </a>
            </div>
          </div>

          {/* Export Buttons - Only visible for owners */}
          {canCopy && (
            <div className="flex flex-wrap gap-2 sm:gap-3">
              <button
                onClick={handleExportMarkdown}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <FileText className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Aba (Markdown)</span>
                <span className="sm:hidden">Aba MD</span>
              </button>
              <button
                onClick={handleExportAllMarkdown}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <FileDown className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Tudo (Markdown)</span>
                <span className="sm:hidden">Tudo MD</span>
              </button>
              <button
                onClick={handleExportPDF}
                className="flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg text-white text-xs sm:text-sm font-medium transition-all"
              >
                <Download className="w-4 h-4" />
                <span className="hidden sm:inline">Exportar Aba (PDF)</span>
                <span className="sm:hidden">PDF</span>
              </button>
            </div>
          )}

          {/* Shared View Notice */}
          {isSharedView && (
            <div className="p-3 bg-amber-500/20 border border-amber-500/30 rounded-xl">
              <p className="text-amber-200 text-sm">
                Você está visualizando uma versão compartilhada desta documentação.
              </p>
            </div>
          )}
        </div>
      </div>

      {/* Seção de Progresso e Última Atualização */}
      <div className="bg-zinc-950 border-b border-subtle px-4 sm:px-8 py-4">
        <div className="max-w-7xl mx-auto space-y-4">
          {/* Última Atualização */}
          <LastUpdateInfo />

          {/* Barra de Progresso do Projeto */}
          <ProjectProgress />
        </div>
      </div>

        {/* Tab Navigation */}
        <div className="bg-layer-1/50 border-b border-subtle sticky top-0 z-10 backdrop-blur-md">
          <div className="max-w-7xl mx-auto px-4 sm:px-8">
            <div className="flex overflow-x-auto gap-1 py-2 hide-scrollbar">
              {tabs.map((tab) => {
                const Icon = tab.icon;
                const isActive = activeTab === tab.id;

                return (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={cn(
                      "flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-medium whitespace-nowrap transition-all",
                      isActive
                        ? `bg-gradient-to-r ${tab.gradient} text-white shadow-lg`
                        : "text-muted hover:text-white hover:bg-layer-2"
                    )}
                  >
                    <Icon className="w-4 h-4" />
                    <span className="hidden sm:inline">{tab.label}</span>
                    <span className="sm:hidden">{tab.label.split(' ')[0]}</span>
                  </button>
                );
              })}
            </div>
          </div>
        </div>

        {/* Tab Description */}
        {activeTabData && (
          <div className="bg-layer-1/30 border-b border-subtle">
            <div className="max-w-7xl mx-auto px-4 sm:px-8 py-3 sm:py-4">
              <div className="flex items-center gap-2 text-muted text-sm">
                <ChevronRight className="w-4 h-4 flex-shrink-0" />
                <span>{activeTabData.description}</span>
              </div>
            </div>
          </div>
        )}

        {/* Tab Content */}
        <div className="max-w-7xl mx-auto px-4 sm:px-8 py-6 sm:py-8">
          <div id={`tab-content-${activeTab}`}>
            {ActiveComponent && <ActiveComponent />}
          </div>
        </div>

      <style jsx global>{`
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        /* Protection for shared views */
        .shared-view {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }
        .shared-view * {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }
      `}</style>
    </div>
  );
}

export default function DocumentationPage() {
  return (
    <ShareProvider>
      <DocumentationContent />
    </ShareProvider>
  );
}

```

---
#### `app/globals.css`

```
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   ORION Design System - CSS Variables
   ============================================

   Paleta baseada no logo oficial ORION:
   - Azul profundo como cor dominante
   - Vermelho ORION para CTAs críticos
   - Cyan/Indigo para estados ativos

   Dark-first: Sem modo claro.
   ============================================ */

:root {
  /* ========================================
     BACKGROUNDS - Camadas de profundidade
     ======================================== */
  --bg-layer-0: #050A12;   /* Base mais profunda */
  --bg-layer-1: #0A1628;   /* Cards, sidebar */
  --bg-layer-2: #0F2341;   /* Elementos elevados */
  --bg-layer-3: #1A3A5C;   /* Hover states */
  --bg-layer-4: #245177;   /* Elementos em destaque */

  /* Aliases semânticos */
  --background: var(--bg-layer-0);
  --background-secondary: var(--bg-layer-1);
  --background-tertiary: var(--bg-layer-2);
  --background-elevated: var(--bg-layer-3);

  /* ========================================
     SURFACES - Cards e Painéis
     ======================================== */
  --surface-default: rgba(10, 22, 40, 0.8);
  --surface-elevated: rgba(15, 35, 65, 0.9);
  --surface-glass: rgba(26, 58, 92, 0.4);
  --surface-glass-subtle: rgba(10, 22, 40, 0.6);
  --surface-overlay: rgba(5, 10, 18, 0.85);

  /* ========================================
     BORDERS
     ======================================== */
  --border-subtle: rgba(30, 58, 95, 0.3);
  --border-default: rgba(30, 58, 95, 0.5);
  --border-strong: rgba(59, 130, 246, 0.4);
  --border-active: rgba(6, 182, 212, 0.5);
  --border-glow: rgba(59, 130, 246, 0.6);

  /* ========================================
     TEXT
     ======================================== */
  --foreground: #F0F4F8;
  --foreground-secondary: #94A3B8;
  --foreground-muted: #64748B;
  --foreground-disabled: #475569;
  --foreground-inverse: #0A1628;

  /* ========================================
     BRAND COLORS - ORION
     ======================================== */
  /* Azul ORION - cor principal */
  --orion-blue-50: #E8F4FC;
  --orion-blue-100: #C5E4F8;
  --orion-blue-200: #8EC8F2;
  --orion-blue-300: #57ACEB;
  --orion-blue-400: #3B82F6;
  --orion-blue-500: #2563EB;
  --orion-blue-600: #1D4ED8;
  --orion-blue-700: #1E3A5F;
  --orion-blue-800: #0F2341;
  --orion-blue-900: #0A1628;
  --orion-blue-950: #050A12;

  /* Vermelho ORION - acento crítico */
  --orion-red-400: #F87171;
  --orion-red-500: #EF4444;
  --orion-red-600: #DC2626;

  /* ========================================
     ACCENT COLORS
     ======================================== */
  /* Cyan - estados ativos, links, foco */
  --accent-cyan-400: #22D3EE;
  --accent-cyan-500: #06B6D4;
  --accent-cyan-600: #0891B2;

  /* Indigo - estados secundários */
  --accent-indigo-400: #818CF8;
  --accent-indigo-500: #6366F1;
  --accent-indigo-600: #4F46E5;

  /* Violet - elementos decorativos */
  --accent-violet-400: #A78BFA;
  --accent-violet-500: #8B5CF6;
  --accent-violet-600: #7C3AED;

  /* ========================================
     SEMANTIC COLORS
     ======================================== */
  --success: #10B981;
  --success-bg: rgba(16, 185, 129, 0.1);
  --success-border: rgba(16, 185, 129, 0.3);
  --success-text: #34D399;

  --warning: #F59E0B;
  --warning-bg: rgba(245, 158, 11, 0.1);
  --warning-border: rgba(245, 158, 11, 0.3);
  --warning-text: #FBBF24;

  --error: #EF4444;
  --error-bg: rgba(239, 68, 68, 0.1);
  --error-border: rgba(239, 68, 68, 0.3);
  --error-text: #F87171;

  --info: #3B82F6;
  --info-bg: rgba(59, 130, 246, 0.1);
  --info-border: rgba(59, 130, 246, 0.3);
  --info-text: #60A5FA;

  /* ========================================
     EFFECTS - Glow e Highlight
     ======================================== */
  --glow-blue: rgba(59, 130, 246, 0.4);
  --glow-cyan: rgba(6, 182, 212, 0.4);
  --glow-violet: rgba(139, 92, 246, 0.4);
  --glow-red: rgba(239, 68, 68, 0.3);
  --highlight: rgba(6, 182, 212, 0.1);

  /* ========================================
     GRADIENTS
     ======================================== */
  --gradient-orion-primary: linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%);
  --gradient-orion-dark: linear-gradient(180deg, #050A12 0%, #0A1628 100%);
  --gradient-orion-deep: linear-gradient(135deg, #050A12 0%, #0F2341 100%);
  --gradient-cyan-blue: linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%);
  --gradient-blue-indigo: linear-gradient(135deg, #3B82F6 0%, #6366F1 100%);
  --gradient-violet-blue: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%);
  --gradient-cyan-glow: linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%);
  --gradient-blue-glow: linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%);
  --gradient-border: linear-gradient(90deg, #3B82F6, #06B6D4, #8B5CF6, #3B82F6);
  --gradient-card: linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%);
  --gradient-card-hover: linear-gradient(180deg, rgba(26, 58, 92, 0.4) 0%, rgba(15, 35, 65, 0.6) 100%);
  --gradient-mesh: radial-gradient(at 40% 20%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 80% 80%, rgba(6, 182, 212, 0.1) 0px, transparent 50%);

  /* ========================================
     SHADOWS
     ======================================== */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  --shadow-glow-blue: 0 0 20px 0 rgba(59, 130, 246, 0.3);
  --shadow-glow-cyan: 0 0 20px 0 rgba(6, 182, 212, 0.3);
  --shadow-glow-violet: 0 0 20px 0 rgba(139, 92, 246, 0.3);
  --shadow-card: 0 4px 20px 0 rgba(0, 0, 0, 0.3);
  --shadow-card-hover: 0 8px 30px 0 rgba(0, 0, 0, 0.4), 0 0 20px 0 rgba(59, 130, 246, 0.1);
  --shadow-card-elevated: 0 12px 40px 0 rgba(0, 0, 0, 0.5);

  /* ========================================
     MOTION
     ======================================== */
  --duration-instant: 0ms;
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;

  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);

  --transition-fast: 150ms var(--ease-in-out);
  --transition-normal: 200ms var(--ease-in-out);
  --transition-slow: 300ms var(--ease-in-out);
  --transition-spring: 300ms var(--ease-spring);

  /* ========================================
     RADIUS
     ======================================== */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  --radius-3xl: 1.5rem;
  --radius-full: 9999px;

  /* ========================================
     Z-INDEX
     ======================================== */
  --z-base: 0;
  --z-raised: 10;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-overlay: 300;
  --z-modal: 400;
  --z-popover: 500;
  --z-toast: 600;
  --z-tooltip: 700;
}

/* ============================================
   BASE STYLES
   ============================================ */

body {
  color: var(--foreground);
  background: var(--background);
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: -0.01em;
}

/* Mesh background sutil para a página */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--gradient-mesh);
  pointer-events: none;
  z-index: -1;
}

/* Typography refinements */
h1, h2, h3, h4, h5, h6 {
  letter-spacing: -0.025em;
  font-weight: 600;
  color: var(--foreground);
}

/* Monospace for data/numbers */
.font-mono {
  font-family: "JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  font-feature-settings: "liga" 0;
}

/* ============================================
   SCROLLBAR
   ============================================ */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--bg-layer-3);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--bg-layer-4);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--bg-layer-3) transparent;
}

/* ============================================
   FOCUS STATES
   ============================================ */

.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  --tw-ring-color: var(--accent-cyan-500);
  --tw-ring-offset-color: var(--bg-layer-0);
}

/* Focus visible para acessibilidade */
:focus-visible {
  outline: 2px solid var(--accent-cyan-500);
  outline-offset: 2px;
}

/* ============================================
   BUTTONS - Sistema Completo
   ============================================ */

.btn {
  @apply inline-flex items-center justify-center gap-2 font-medium
         transition-all
         active:scale-[0.98]
         disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100;
  border-radius: var(--radius-lg);
  transition: var(--transition-fast);
}

/* Primary - Azul ORION com cyan glow */
.btn-primary {
  @apply btn text-white px-4 py-2.5;
  background: var(--gradient-cyan-blue);
  box-shadow: var(--shadow-glow-cyan);
}

.btn-primary:hover {
  filter: brightness(1.1);
  box-shadow: 0 0 30px 0 rgba(6, 182, 212, 0.4);
}

/* Secondary - Superfície elevada */
.btn-secondary {
  @apply btn text-white px-4 py-2.5;
  background: var(--surface-elevated);
  border: 1px solid var(--border-default);
}

.btn-secondary:hover {
  background: var(--bg-layer-3);
  border-color: var(--border-strong);
}

/* Outline - Borda com transparência */
.btn-outline {
  @apply btn px-4 py-2.5;
  background: transparent;
  border: 1px solid var(--border-default);
  color: var(--foreground-secondary);
}

.btn-outline:hover {
  border-color: var(--accent-cyan-500);
  color: var(--foreground);
  background: rgba(6, 182, 212, 0.1);
}

/* Ghost - Apenas texto */
.btn-ghost {
  @apply btn px-4 py-2.5;
  background: transparent;
  color: var(--foreground-muted);
}

.btn-ghost:hover {
  background: var(--surface-glass);
  color: var(--foreground);
}

/* Danger - Vermelho ORION (CTAs críticos) */
.btn-danger {
  @apply btn text-white px-4 py-2.5;
  background: var(--orion-red-600);
}

.btn-danger:hover {
  background: var(--orion-red-500);
  box-shadow: var(--glow-red);
}

/* Success */
.btn-success {
  @apply btn text-white px-4 py-2.5;
  background: var(--success);
  box-shadow: 0 0 15px 0 rgba(16, 185, 129, 0.3);
}

.btn-success:hover {
  filter: brightness(1.1);
}

/* Warning */
.btn-warning {
  @apply btn text-white px-4 py-2.5;
  background: var(--warning);
}

.btn-warning:hover {
  filter: brightness(1.1);
}

/* Button sizes */
.btn-sm {
  @apply text-sm px-3 py-1.5;
}

.btn-lg {
  @apply text-base px-6 py-3;
}

/* ============================================
   FORM ELEMENTS
   ============================================ */

.input {
  @apply w-full px-4 py-2.5 text-white placeholder-zinc-500;
  background: var(--bg-layer-1);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  transition: var(--transition-fast);
}

.input:hover {
  border-color: var(--border-strong);
}

.input:focus {
  outline: none;
  border-color: var(--accent-cyan-500);
  box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
}

.textarea {
  @apply input resize-none min-h-[100px];
}

.label {
  @apply block text-sm font-medium mb-2 tracking-wide;
  color: var(--foreground-secondary);
}

.select {
  @apply input appearance-none cursor-pointer
         bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%2394A3B8%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E')]
         bg-no-repeat bg-[right_0.75rem_center] bg-[length:1rem] pr-10;
}

/* ============================================
   CARDS - Sistema de Profundidade
   ============================================ */

.card {
  background: var(--surface-default);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  backdrop-filter: blur(12px);
}

.card-elevated {
  @apply card;
  background: var(--surface-elevated);
  box-shadow: var(--shadow-card);
}

/* Card com hover effect */
.card-hover {
  @apply card;
  transition: var(--transition-slow);
}

.card-hover:hover {
  border-color: var(--border-strong);
  box-shadow: var(--shadow-card-hover);
  transform: translateY(-2px);
}

/* Card glassmorphism */
.card-glass {
  background: var(--surface-glass);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  backdrop-filter: blur(20px);
}

.card-glass:hover {
  border-color: var(--border-active);
}

/* Card 3D */
.card-3d {
  @apply card;
  perspective: 1000px;
  transform-style: preserve-3d;
  transition: var(--transition-slow);
}

.card-3d:hover {
  transform: rotateX(2deg) rotateY(2deg) translateY(-5px);
}

/* ============================================
   BADGES - Indicadores de Status
   ============================================ */

.badge {
  @apply inline-flex items-center px-2.5 py-1 text-xs font-medium;
  border-radius: var(--radius-full);
  border: 1px solid transparent;
  transition: var(--transition-fast);
}

.badge-success {
  @apply badge;
  background: var(--success-bg);
  color: var(--success-text);
  border-color: var(--success-border);
}

.badge-warning {
  @apply badge;
  background: var(--warning-bg);
  color: var(--warning-text);
  border-color: var(--warning-border);
}

.badge-error {
  @apply badge;
  background: var(--error-bg);
  color: var(--error-text);
  border-color: var(--error-border);
}

.badge-info {
  @apply badge;
  background: var(--info-bg);
  color: var(--info-text);
  border-color: var(--info-border);
}

.badge-default {
  @apply badge;
  background: var(--surface-glass);
  color: var(--foreground-secondary);
  border-color: var(--border-subtle);
}

/* Badge com glow */
.badge-glow {
  box-shadow: 0 0 10px 0 currentColor;
}

/* ============================================
   STEP INDICATOR - Workflow Progress
   ============================================ */

.step-indicator {
  @apply flex items-center justify-center w-10 h-10 text-sm font-semibold;
  border-radius: var(--radius-full);
  transition: var(--transition-slow);
}

.step-active {
  @apply step-indicator text-white;
  background: var(--gradient-cyan-blue);
  box-shadow: var(--shadow-glow-cyan), 0 0 0 4px rgba(6, 182, 212, 0.15);
}

.step-completed {
  @apply step-indicator text-white;
  background: var(--success);
}

.step-pending {
  @apply step-indicator;
  background: var(--bg-layer-2);
  color: var(--foreground-muted);
  border: 1px solid var(--border-default);
}

.step-locked {
  @apply step-indicator;
  background: var(--bg-layer-1);
  color: var(--foreground-disabled);
  border: 1px solid var(--border-subtle);
}

.step-error {
  @apply step-indicator text-white;
  background: var(--error);
  box-shadow: 0 0 15px 0 rgba(239, 68, 68, 0.3);
}

/* ============================================
   GLASS EFFECTS
   ============================================ */

.glass {
  background: var(--surface-glass);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border-subtle);
}

.glass-subtle {
  background: var(--surface-glass-subtle);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border-subtle);
}

.glass-strong {
  background: var(--surface-elevated);
  backdrop-filter: blur(30px);
  border: 1px solid var(--border-default);
}

/* ============================================
   GRADIENTS - Utilitários
   ============================================ */

.gradient-orion {
  background: var(--gradient-orion-primary);
}

.gradient-orion-dark {
  background: var(--gradient-orion-dark);
}

.gradient-cyan-blue {
  background: var(--gradient-cyan-blue);
}

.gradient-blue-indigo {
  background: var(--gradient-blue-indigo);
}

.gradient-violet-blue {
  background: var(--gradient-violet-blue);
}

/* Text gradient */
.text-gradient {
  @apply bg-clip-text text-transparent;
  background: var(--gradient-cyan-blue);
}

.text-gradient-violet {
  @apply bg-clip-text text-transparent;
  background: var(--gradient-violet-blue);
}

/* ============================================
   STATUS INDICATORS
   ============================================ */

.status-dot {
  @apply w-2 h-2 rounded-full;
}

.status-online {
  background: var(--success);
}

.status-offline {
  background: var(--foreground-disabled);
}

.status-warning {
  background: var(--warning);
}

.status-error {
  background: var(--error);
}

.status-loading {
  background: var(--accent-cyan-500);
}

/* Status dot com pulse */
.status-dot-pulse {
  @apply status-dot relative;
}

.status-dot-pulse::after {
  content: '';
  @apply absolute inset-0 rounded-full;
  background: inherit;
  animation: statusPulse 2s ease-in-out infinite;
}

@keyframes statusPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.5);
  }
}

/* ============================================
   LOADING STATES
   ============================================ */

/* Spinner */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.spinner {
  @apply inline-block w-5 h-5 border-2 rounded-full;
  border-color: var(--accent-cyan-500);
  border-top-color: transparent;
  animation: spin 0.6s linear infinite;
}

.spinner-sm {
  @apply w-4 h-4;
}

.spinner-lg {
  @apply w-8 h-8;
  border-width: 3px;
}

/* Skeleton loader */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  border-radius: var(--radius-md);
  background: linear-gradient(
    90deg,
    var(--bg-layer-2) 0%,
    var(--bg-layer-3) 50%,
    var(--bg-layer-2) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* ============================================
   GLOW EFFECTS
   ============================================ */

.glow-hover {
  transition: var(--transition-slow);
}

.glow-hover:hover {
  box-shadow: var(--shadow-glow-blue);
  border-color: var(--border-glow);
}

.glow-cyan-hover:hover {
  box-shadow: var(--shadow-glow-cyan);
  border-color: var(--border-active);
}

/* Pulse glow para elementos ativos */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 0 0 var(--glow-cyan);
  }
  50% {
    box-shadow: 0 0 20px 4px var(--glow-cyan);
  }
}

.animate-pulse-glow {
  animation: pulseGlow 2s ease-in-out infinite;
}

/* ============================================
   ANIMATIONS - Micro-interações
   ============================================ */

/* Fade in up */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s ease-out forwards;
}

/* Slide in right */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out forwards;
}

/* Scale in */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out forwards;
}

/* Stagger children */
.stagger-children > * {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s var(--ease-in-out);
}

.stagger-children.animate-in > *:nth-child(1) { transition-delay: 0.1s; }
.stagger-children.animate-in > *:nth-child(2) { transition-delay: 0.15s; }
.stagger-children.animate-in > *:nth-child(3) { transition-delay: 0.2s; }
.stagger-children.animate-in > *:nth-child(4) { transition-delay: 0.25s; }
.stagger-children.animate-in > *:nth-child(5) { transition-delay: 0.3s; }
.stagger-children.animate-in > *:nth-child(6) { transition-delay: 0.35s; }

.stagger-children.animate-in > * {
  opacity: 1;
  transform: translateY(0);
}

/* Dropdown animation */
.dropdown-enter {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
}

.dropdown-enter-active {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: opacity 150ms ease-out, transform 150ms ease-out;
}

.dropdown-exit {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.dropdown-exit-active {
  opacity: 0;
  transform: translateY(-4px) scale(0.98);
  transition: opacity 100ms ease-in, transform 100ms ease-in;
}

/* Scroll animations */
.scroll-animate {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.6s var(--ease-in-out);
}

.scroll-animate.animate-in {
  opacity: 1;
  transform: translateY(0);
}

.scale-on-scroll {
  opacity: 0;
  transform: scale(0.95);
  transition: all 0.5s var(--ease-in-out);
}

.scale-on-scroll.animate-in {
  opacity: 1;
  transform: scale(1);
}

.slide-left {
  opacity: 0;
  transform: translateX(-40px);
  transition: all 0.6s var(--ease-in-out);
}

.slide-right {
  opacity: 0;
  transform: translateX(40px);
  transition: all 0.6s var(--ease-in-out);
}

.slide-left.animate-in,
.slide-right.animate-in {
  opacity: 1;
  transform: translateX(0);
}

/* Float animation */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Gradient border animation */
@keyframes gradientBorder {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.gradient-border {
  position: relative;
  background: var(--gradient-border);
  background-size: 300% 300%;
  animation: gradientBorder 4s ease infinite;
}

/* Data flow animation */
@keyframes dataFlow {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.data-flow {
  background: linear-gradient(90deg, transparent, var(--glow-cyan), transparent);
  background-size: 200% 100%;
  animation: dataFlow 2s linear infinite;
}

/* Typewriter effect */
@keyframes typewriter {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

.typewriter {
  overflow: hidden;
  white-space: nowrap;
  animation: typewriter 2s steps(40) forwards;
}

/* Progress bar */
@keyframes progressFill {
  from {
    width: 0;
  }
}

.progress-animate {
  animation: progressFill 1s ease-out forwards;
}

/* Pulsing node */
@keyframes pulseNode {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 var(--glow-blue);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 20px 5px var(--glow-blue);
  }
}

.pulse-node {
  animation: pulseNode 2s ease-in-out infinite;
}

/* Line pulse */
@keyframes linePulse {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 1;
  }
}

.line-pulse {
  animation: linePulse 1.5s ease-in-out infinite;
}

/* Flow line */
@keyframes flowLine {
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.flow-line {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: flowLine 2s ease forwards;
}

/* Shimmer overlay */
.shimmer {
  position: relative;
  overflow: hidden;
}

.shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.08),
    transparent
  );
  animation: shimmerMove 2s infinite;
}

@keyframes shimmerMove {
  100% {
    left: 100%;
  }
}

/* ============================================
   PAGE TRANSITIONS
   ============================================ */

.page-transition-enter {
  opacity: 0;
  transform: translateY(10px);
}

.page-transition-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: all 0.3s ease;
}

.page-transition-exit {
  opacity: 1;
}

.page-transition-exit-active {
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* ============================================
   MOBILE RESPONSIVE
   ============================================ */

/* Safe area padding */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Touch-friendly targets */
@media (hover: none) and (pointer: coarse) {
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Better mobile scrolling */
.mobile-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* No select */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* ============================================
   UTILITIES
   ============================================ */

/* Text colors */
.text-primary {
  color: var(--foreground);
}

.text-secondary {
  color: var(--foreground-secondary);
}

.text-muted {
  color: var(--foreground-muted);
}

.text-disabled {
  color: var(--foreground-disabled);
}

/* Background colors */
.bg-layer-0 {
  background: var(--bg-layer-0);
}

.bg-layer-1 {
  background: var(--bg-layer-1);
}

.bg-layer-2 {
  background: var(--bg-layer-2);
}

.bg-layer-3 {
  background: var(--bg-layer-3);
}

.bg-layer-4 {
  background: var(--bg-layer-4);
}

/* Border colors */
.border-subtle {
  border-color: var(--border-subtle);
}

.border-default {
  border-color: var(--border-default);
}

.border-strong {
  border-color: var(--border-strong);
}

.border-active {
  border-color: var(--border-active);
}

/* Parallax helper */
.parallax-slow {
  will-change: transform;
  transform: translateZ(0);
}

```

---
#### `app/layout.tsx`

```
import type { Metadata } from "next";
import "./globals.css";
import Layout from "@/components/Layout";
import { VercelToolbar } from "@/components/VercelToolbar";
import { getBrandingConfig } from "@/lib/branding";
import { Analytics } from "@vercel/analytics/react";
import { SpeedInsights } from "@vercel/speed-insights/next";

export async function generateMetadata(): Promise<Metadata> {
  const branding = await getBrandingConfig();

  return {
    title: branding.systemName,
    description: "AI Video Production Workflow - White Label SaaS Platform",
  };
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="pt-BR" className="dark">
      <body className="font-sans bg-[#09090b] text-white">
        {/* O Layout aqui garante que o Menu Lateral apareça sempre */}
        <Layout>
          {children}
        </Layout>
        {/* Vercel Toolbar - habilitado em TODOS os ambientes (dev, preview, production) */}
        {/* Permite menções @Claude e comentários visuais em produção */}
        <VercelToolbar />
        {/* Vercel Analytics & Speed Insights - Monitoramento profissional */}
        <Analytics />
        <SpeedInsights />
      </body>
    </html>
  );
}

```

---
#### `app/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { motion, AnimatePresence } from 'framer-motion';
import {
  Activity,
  ArrowRight,
  CheckCircle2,
  Clock,
  Film,
  Loader2,
  Play,
  Rocket,
  Settings,
  Sparkles,
  TrendingUp,
  Video,
  Wifi,
  WifiOff,
  Zap,
  Eye,
  BarChart3,
  Code2,
  Server,
  Brain,
} from 'lucide-react';
import {
  AreaChart,
  Area,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
  RadialBarChart,
  RadialBar,
  PolarAngleAxis,
} from 'recharts';
import { useUIStore, useBrandingStore } from '@/lib/store';

interface APIStatus {
  name: string;
  key: string;
  status: 'checking' | 'online' | 'offline' | 'error';
  icon: string;
  category: 'ai' | 'media' | 'output' | 'infra';
}

interface SystemHealth {
  overall: 'healthy' | 'degraded' | 'critical';
  onlineAPIs: number;
  totalAPIs: number;
  lastCheck: Date;
}

const API_LIST: Omit<APIStatus, 'status'>[] = [
  { name: 'Gemini', key: 'gemini', icon: '🧠', category: 'ai' },
  { name: 'OpenAI', key: 'openai', icon: '🤖', category: 'ai' },
  { name: 'Anthropic', key: 'anthropic', icon: '🔮', category: 'ai' },
  { name: 'YouTube', key: 'youtube', icon: '📺', category: 'output' },
  { name: 'Pexels', key: 'pexels', icon: '📷', category: 'media' },
  { name: 'Pixabay', key: 'pixabay', icon: '🖼️', category: 'media' },
  { name: 'ElevenLabs', key: 'elevenlabs', icon: '🎤', category: 'media' },
  { name: 'Tavily', key: 'tavily', icon: '🔍', category: 'ai' },
  { name: 'JSON2Video', key: 'json2video', icon: '🎬', category: 'output' },
  { name: 'GitHub', key: 'github', icon: '🐙', category: 'infra' },
  { name: 'Vercel', key: 'vercel', icon: '▲', category: 'infra' },
];

// Mock chart data for API availability trends (last 7 checks)
const generateChartData = (currentPercentage: number) => {
  const data = [];
  const now = new Date();

  for (let i = 6; i >= 0; i--) {
    const time = new Date(now.getTime() - i * 10 * 60 * 1000); // 10 min intervals
    const variance = Math.random() * 20 - 10; // ±10%
    const availability = Math.max(60, Math.min(100, currentPercentage + variance));

    data.push({
      time: time.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),
      availability: Math.round(availability),
    });
  }

  return data;
};

export default function DashboardPage() {
  const router = useRouter();
  const { openApiKeyModal } = useUIStore();
  const { systemName } = useBrandingStore();

  const [isLoading, setIsLoading] = useState(true);
  const [apiStatuses, setApiStatuses] = useState<APIStatus[]>([]);
  const [systemHealth, setSystemHealth] = useState<SystemHealth>({
    overall: 'healthy',
    onlineAPIs: 0,
    totalAPIs: API_LIST.length,
    lastCheck: new Date(),
  });
  const [chartData, setChartData] = useState<Array<{ time: string; availability: number }>>([]);

  useEffect(() => {
    checkSystemStatus();
  }, []);

  const checkSystemStatus = async () => {
    setIsLoading(true);

    const statuses: APIStatus[] = API_LIST.map(api => ({
      ...api,
      status: 'checking' as const,
    }));
    setApiStatuses(statuses);

    try {
      const response = await fetch('/api/status');
      const data = await response.json();

      const updatedStatuses: APIStatus[] = API_LIST.map((api) => ({
        ...api,
        status: data[api.key] === true ? 'online' : 'offline',
      }));

      setApiStatuses(updatedStatuses);

      const onlineCount = updatedStatuses.filter(s => s.status === 'online').length;
      const healthStatus: 'healthy' | 'degraded' | 'critical' =
        onlineCount === API_LIST.length ? 'healthy' :
        onlineCount >= API_LIST.length * 0.5 ? 'degraded' : 'critical';

      setSystemHealth({
        overall: healthStatus,
        onlineAPIs: onlineCount,
        totalAPIs: API_LIST.length,
        lastCheck: new Date(),
      });

      // Generate chart data based on current availability
      const currentAvailability = Math.round((onlineCount / API_LIST.length) * 100);
      setChartData(generateChartData(currentAvailability));
    } catch {
      const errorStatuses: APIStatus[] = API_LIST.map(api => ({
        ...api,
        status: 'error' as const,
      }));
      setApiStatuses(errorStatuses);
      setSystemHealth({
        overall: 'critical',
        onlineAPIs: 0,
        totalAPIs: API_LIST.length,
        lastCheck: new Date(),
      });
    } finally {
      setIsLoading(false);
    }
  };

  const categorizedAPIs = {
    ai: apiStatuses.filter(a => a.category === 'ai'),
    media: apiStatuses.filter(a => a.category === 'media'),
    output: apiStatuses.filter(a => a.category === 'output'),
    infra: apiStatuses.filter(a => a.category === 'infra'),
  };

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.1,
      },
    },
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: {
      opacity: 1,
      y: 0,
      transition: {
        type: "spring",
        stiffness: 100,
      },
    },
  };

  return (
    <div className="min-h-full pb-8">
      {/* Hero Section */}
      <motion.div
        initial={{ opacity: 0, y: -20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
        className="mb-8"
      >
        <div className="flex items-center justify-between">
          <div>
            <div className="flex items-center gap-4 mb-3">
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                transition={{ type: "spring", stiffness: 200, delay: 0.2 }}
                className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-500 flex items-center justify-center shadow-lg shadow-cyan-500/30"
              >
                <Sparkles className="w-7 h-7 text-white" />
              </motion.div>
              <div>
                <h1 className="text-4xl font-bold text-white mb-1">
                  {systemName}
                </h1>
                <p className="text-foreground-muted flex items-center gap-2">
                  <span>Mission Control</span>
                  <span className="text-foreground-muted/50">•</span>
                  <span className="text-cyan-400 font-medium">AI-Powered Production</span>
                </p>
              </div>
            </div>
          </div>

          <motion.button
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.95 }}
            onClick={() => router.push('/workflow')}
            className="relative px-8 py-3.5 rounded-xl bg-gradient-to-r from-cyan-500 via-blue-500 to-blue-600 text-white font-semibold shadow-glow-lg shadow-cyan-500/50 hover:shadow-glow-lg hover:shadow-cyan-400/70 transition-all duration-300 overflow-hidden group active:scale-95 border border-cyan-400/30 hover:border-cyan-300/60"
          >
            {/* Animated shine effect */}
            <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000" />

            <span className="relative z-10 flex items-center gap-2">
              <Rocket className="w-5 h-5 drop-shadow-glow" />
              Nova Produção
              <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform drop-shadow-glow" />
            </span>

            {/* Pulsing glow background */}
            <div className="absolute inset-0 bg-gradient-to-r from-cyan-400 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity animate-pulse-slow" />
          </motion.button>
        </div>
      </motion.div>

      {/* Bento Grid */}
      <motion.div
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        className="grid grid-cols-12 gap-4"
      >
        {/* System Health - Large Card (Spans 8 cols) */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-8"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-cyan-950/40 via-blue-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-cyan-500/20 p-6 h-full group hover:border-cyan-400/60 hover:shadow-glow-lg hover:shadow-cyan-500/50 transition-all duration-300">
            {/* Animated gradient mesh background */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay on hover */}
            <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-blue-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500/30 to-blue-500/30 border border-cyan-400/50 flex items-center justify-center shadow-glow-sm shadow-cyan-500/50 group-hover:shadow-glow-md group-hover:shadow-cyan-400/70 transition-shadow duration-300">
                    <Activity className="w-5 h-5 text-cyan-300 group-hover:text-cyan-200 transition-colors" />
                  </div>
                  <div>
                    <h2 className="text-lg font-semibold text-white">Status do Sistema</h2>
                    <p className="text-sm text-foreground-muted">Monitoramento em tempo real</p>
                  </div>
                </div>

                {/* Status Badge */}
                <div className={`flex items-center gap-2 px-4 py-2 rounded-full ${
                  systemHealth.overall === 'healthy'
                    ? 'bg-success/10 border border-success/20'
                    : systemHealth.overall === 'degraded'
                    ? 'bg-warning/10 border border-warning/20'
                    : 'bg-error/10 border border-error/20'
                }`}>
                  <div className="relative w-2 h-2">
                    <div className={`absolute inset-0 rounded-full animate-ping opacity-75 ${
                      systemHealth.overall === 'healthy' ? 'bg-success' :
                      systemHealth.overall === 'degraded' ? 'bg-warning' : 'bg-error'
                    }`} />
                    <div className={`relative w-2 h-2 rounded-full ${
                      systemHealth.overall === 'healthy' ? 'bg-success' :
                      systemHealth.overall === 'degraded' ? 'bg-warning' : 'bg-error'
                    }`} />
                  </div>
                  <span className={`text-sm font-medium ${
                    systemHealth.overall === 'healthy' ? 'text-success' :
                    systemHealth.overall === 'degraded' ? 'text-warning' : 'text-error'
                  }`}>
                    {systemHealth.overall === 'healthy' ? 'Operacional' :
                     systemHealth.overall === 'degraded' ? 'Degradado' : 'Crítico'}
                  </span>
                </div>
              </div>

              {isLoading ? (
                <div className="flex items-center justify-center py-12">
                  <Loader2 className="w-8 h-8 text-cyan-500 animate-spin" />
                </div>
              ) : (
                <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                  <StatCard
                    label="APIs Online"
                    value={systemHealth.onlineAPIs}
                    icon={<Wifi className="w-5 h-5" />}
                    color="cyan"
                  />
                  <StatCard
                    label="APIs Offline"
                    value={systemHealth.totalAPIs - systemHealth.onlineAPIs}
                    icon={<WifiOff className="w-5 h-5" />}
                    color="rose"
                  />
                  <StatCard
                    label="Disponibilidade"
                    value={`${Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%`}
                    icon={<TrendingUp className="w-5 h-5" />}
                    color="emerald"
                  />
                  <StatCard
                    label="Última Check"
                    value={systemHealth.lastCheck.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}
                    icon={<Clock className="w-5 h-5" />}
                    color="violet"
                  />
                </div>
              )}
            </div>
          </div>
        </motion.div>

        {/* Quick Actions - Vertical Card (Spans 4 cols) */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-4"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-950/40 via-violet-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-purple-500/20 p-6 h-full group hover:border-purple-400/60 hover:shadow-glow-lg hover:shadow-purple-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-purple-500/20 via-violet-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-purple-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 border border-purple-400/50 flex items-center justify-center shadow-glow-sm shadow-purple-500/50 group-hover:shadow-glow-md group-hover:shadow-purple-400/70 transition-shadow duration-300">
                  <Zap className="w-5 h-5 text-purple-300 group-hover:text-purple-200 transition-colors" />
                </div>
                <h2 className="text-lg font-semibold text-white">Ações Rápidas</h2>
              </div>

              <div className="space-y-3">
                <ActionButton
                  icon={<Play className="w-4 h-4" />}
                  label="Iniciar Produção"
                  description="Novo workflow de vídeo"
                  onClick={() => router.push('/workflow')}
                  gradient="from-cyan-500 to-blue-500"
                />
                <ActionButton
                  icon={<Settings className="w-4 h-4" />}
                  label="Configurar APIs"
                  description="Gerenciar integrações"
                  onClick={openApiKeyModal}
                  gradient="from-violet-500 to-purple-500"
                />
                <ActionButton
                  icon={<Eye className="w-4 h-4" />}
                  label="Documentação"
                  description="Guias e referências"
                  onClick={() => router.push('/documentation')}
                  gradient="from-emerald-500 to-green-500"
                />
              </div>
            </div>
          </div>
        </motion.div>

        {/* AI Providers */}
        <APICard
          title="Provedores IA"
          icon={<Brain className="w-5 h-5 text-violet-400" />}
          apis={categorizedAPIs.ai}
          onConfigure={openApiKeyModal}
          color="violet"
        />

        {/* Media APIs */}
        <APICard
          title="Mídia"
          icon={<Film className="w-5 h-5 text-cyan-400" />}
          apis={categorizedAPIs.media}
          onConfigure={openApiKeyModal}
          color="cyan"
        />

        {/* Output */}
        <APICard
          title="Output"
          icon={<Video className="w-5 h-5 text-rose-400" />}
          apis={categorizedAPIs.output}
          onConfigure={openApiKeyModal}
          color="rose"
        />

        {/* Infrastructure */}
        <APICard
          title="Infraestrutura"
          icon={<Server className="w-5 h-5 text-amber-400" />}
          apis={categorizedAPIs.infra}
          onConfigure={openApiKeyModal}
          color="amber"
        />

        {/* Statistics with Chart - Wide Card */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-6"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-950/40 via-green-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-emerald-500/20 p-6 h-full group hover:border-emerald-400/60 hover:shadow-glow-lg hover:shadow-emerald-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-emerald-500/20 via-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-emerald-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500/30 to-green-500/30 border border-emerald-400/50 flex items-center justify-center shadow-glow-sm shadow-emerald-500/50 group-hover:shadow-glow-md group-hover:shadow-emerald-400/70 transition-shadow duration-300">
                    <BarChart3 className="w-5 h-5 text-emerald-300 group-hover:text-emerald-200 transition-colors" />
                  </div>
                  <div>
                    <h2 className="text-lg font-semibold text-white">Disponibilidade</h2>
                    <p className="text-xs text-foreground-muted">Últimos 60 minutos</p>
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-2xl font-bold text-emerald-400">
                    {Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%
                  </div>
                  <div className="text-xs text-foreground-muted">Uptime</div>
                </div>
              </div>

              <AnimatePresence mode="wait">
                {isLoading ? (
                  <motion.div
                    key="loading"
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="flex items-center justify-center h-48"
                  >
                    <Loader2 className="w-8 h-8 text-emerald-500 animate-spin" />
                  </motion.div>
                ) : (
                  <motion.div
                    key="chart"
                    initial={{ opacity: 0, scale: 0.95 }}
                    animate={{ opacity: 1, scale: 1 }}
                    exit={{ opacity: 0, scale: 0.95 }}
                    transition={{ duration: 0.3 }}
                    className="h-48"
                  >
                    <ResponsiveContainer width="100%" height="100%">
                      <AreaChart data={chartData}>
                        <defs>
                          <linearGradient id="availabilityGradient" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stopColor="#10b981" stopOpacity={0.4} />
                            <stop offset="100%" stopColor="#10b981" stopOpacity={0.0} />
                          </linearGradient>
                        </defs>
                        <CartesianGrid strokeDasharray="3 3" stroke="#334155" opacity={0.3} />
                        <XAxis
                          dataKey="time"
                          stroke="#64748b"
                          fontSize={11}
                          tickLine={false}
                          axisLine={{ stroke: '#334155' }}
                        />
                        <YAxis
                          stroke="#64748b"
                          fontSize={11}
                          tickLine={false}
                          axisLine={{ stroke: '#334155' }}
                          domain={[0, 100]}
                          ticks={[0, 25, 50, 75, 100]}
                        />
                        <Tooltip
                          contentStyle={{
                            backgroundColor: '#0f172a',
                            border: '1px solid #334155',
                            borderRadius: '8px',
                            fontSize: '12px',
                          }}
                          labelStyle={{ color: '#94a3b8' }}
                          itemStyle={{ color: '#10b981' }}
                        />
                        <Area
                          type="monotone"
                          dataKey="availability"
                          stroke="#10b981"
                          strokeWidth={2}
                          fill="url(#availabilityGradient)"
                        />
                      </AreaChart>
                    </ResponsiveContainer>
                  </motion.div>
                )}
              </AnimatePresence>
            </div>
          </div>
        </motion.div>

        {/* System Health with Radial Chart */}
        <motion.div
          variants={itemVariants}
          className="col-span-12 lg:col-span-6"
        >
          <div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-950/40 via-indigo-950/30 to-layer-2/50 backdrop-blur-xl border-2 border-blue-500/20 p-6 h-full group hover:border-blue-400/60 hover:shadow-glow-lg hover:shadow-blue-500/50 transition-all duration-300">
            {/* Animated gradient mesh */}
            <div className="absolute inset-0 bg-gradient-mesh opacity-20" />

            {/* Glow overlay */}
            <div className="absolute inset-0 bg-gradient-to-br from-blue-500/20 via-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

            {/* Shimmer effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-700">
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/20 to-transparent animate-shimmer" />
            </div>

            <div className="relative z-10">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-blue-400/50 flex items-center justify-center shadow-glow-sm shadow-blue-500/50 group-hover:shadow-glow-md group-hover:shadow-blue-400/70 transition-shadow duration-300">
                  <Code2 className="w-5 h-5 text-blue-300 group-hover:text-blue-200 transition-colors" />
                </div>
                <div>
                  <h2 className="text-lg font-semibold text-white">Saúde do Sistema</h2>
                  <p className="text-xs text-foreground-muted">Status atual das APIs</p>
                </div>
              </div>

              <AnimatePresence mode="wait">
                {isLoading ? (
                  <motion.div
                    key="loading"
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="flex items-center justify-center h-48"
                  >
                    <Loader2 className="w-8 h-8 text-cyan-500 animate-spin" />
                  </motion.div>
                ) : (
                  <motion.div
                    key="radial"
                    initial={{ opacity: 0, scale: 0.95 }}
                    animate={{ opacity: 1, scale: 1 }}
                    exit={{ opacity: 0, scale: 0.95 }}
                    transition={{ duration: 0.3 }}
                    className="h-48 flex items-center"
                  >
                    <ResponsiveContainer width="100%" height="100%">
                      <RadialBarChart
                        cx="50%"
                        cy="50%"
                        innerRadius="60%"
                        outerRadius="100%"
                        data={[
                          {
                            name: 'Disponibilidade',
                            value: Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100),
                            fill: systemHealth.overall === 'healthy' ? '#10b981' :
                                  systemHealth.overall === 'degraded' ? '#f59e0b' : '#ef4444',
                          },
                        ]}
                        startAngle={90}
                        endAngle={-270}
                      >
                        <PolarAngleAxis type="number" domain={[0, 100]} tick={false} />
                        <RadialBar
                          background={{ fill: '#1e293b' }}
                          dataKey="value"
                          cornerRadius={10}
                        />
                        <text
                          x="50%"
                          y="50%"
                          textAnchor="middle"
                          dominantBaseline="middle"
                          className="fill-white text-4xl font-bold"
                        >
                          {Math.round((systemHealth.onlineAPIs / systemHealth.totalAPIs) * 100)}%
                        </text>
                      </RadialBarChart>
                    </ResponsiveContainer>
                  </motion.div>
                )}
              </AnimatePresence>

              <div className="grid grid-cols-2 gap-3 mt-4">
                <InfoRow label="Online" value={`${systemHealth.onlineAPIs}/${systemHealth.totalAPIs}`} />
                <InfoRow label="Status" value={systemHealth.overall === 'healthy' ? '✅ OK' : systemHealth.overall === 'degraded' ? '⚠️ Degradado' : '❌ Crítico'} />
              </div>
            </div>
          </div>
        </motion.div>

        {/* CTA Banner */}
        {systemHealth.overall === 'healthy' && !isLoading && (
          <motion.div
            variants={itemVariants}
            className="col-span-12"
          >
            <div className="relative overflow-hidden rounded-2xl bg-gradient-to-r from-cyan-500/10 via-blue-500/10 to-purple-500/10 backdrop-blur-xl border border-cyan-500/20 p-6">
              <div className="absolute inset-0 bg-[linear-gradient(to_right,#0891b2_1px,transparent_1px),linear-gradient(to_bottom,#0891b2_1px,transparent_1px)] bg-[size:14px_24px] opacity-5" />

              <div className="relative z-10 flex flex-col sm:flex-row items-center justify-between gap-4">
                <div className="flex items-center gap-4">
                  <motion.div
                    animate={{ rotate: 360 }}
                    transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
                    className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/30"
                  >
                    <CheckCircle2 className="w-7 h-7 text-white" />
                  </motion.div>
                  <div>
                    <h3 className="text-lg font-semibold text-white mb-1">
                      Sistema 100% Operacional
                    </h3>
                    <p className="text-sm text-foreground-muted">
                      Todas as APIs conectadas. Pronto para produção de vídeos.
                    </p>
                  </div>
                </div>
                <motion.button
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={() => router.push('/workflow')}
                  className="px-6 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 transition-shadow flex items-center gap-2 active:scale-95"
                >
                  <Rocket className="w-5 h-5" />
                  Iniciar Produção
                  <ArrowRight className="w-5 h-5" />
                </motion.button>
              </div>
            </div>
          </motion.div>
        )}
      </motion.div>
    </div>
  );
}

// Helper Components
function StatCard({ label, value, icon, color }: { label: string; value: string | number; icon: React.ReactNode; color: string }) {
  const colorClasses = {
    cyan: 'from-cyan-500/20 to-blue-500/20 border-cyan-500/30 text-cyan-400',
    rose: 'from-rose-500/20 to-red-500/20 border-rose-500/30 text-rose-400',
    emerald: 'from-emerald-500/20 to-green-500/20 border-emerald-500/30 text-emerald-400',
    violet: 'from-violet-500/20 to-purple-500/20 border-violet-500/30 text-violet-400',
  };

  return (
    <motion.div
      whileHover={{ scale: 1.05, y: -2 }}
      className="relative overflow-hidden rounded-xl bg-layer-2/50 border border-border-subtle p-4 group cursor-default"
    >
      <div className={`absolute inset-0 bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} opacity-0 group-hover:opacity-100 transition-opacity`} />

      <div className="relative z-10">
        <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} border ${colorClasses[color as keyof typeof colorClasses].split(' ')[2]} flex items-center justify-center mb-3`}>
          <div className={colorClasses[color as keyof typeof colorClasses].split(' ')[3]}>
            {icon}
          </div>
        </div>
        <div className="text-2xl font-bold text-white mb-1">{value}</div>
        <div className="text-xs text-foreground-muted">{label}</div>
      </div>
    </motion.div>
  );
}

function ActionButton({ icon, label, description, onClick, gradient }: {
  icon: React.ReactNode;
  label: string;
  description: string;
  onClick: () => void;
  gradient: string;
}) {
  return (
    <motion.button
      whileHover={{ x: 4 }}
      whileTap={{ scale: 0.98 }}
      onClick={onClick}
      className="w-full flex items-center gap-3 p-3 rounded-xl bg-layer-2/50 border border-border-subtle hover:border-cyan-500/30 transition-all duration-200 group text-left active:scale-95"
    >
      <div className={`w-10 h-10 rounded-lg bg-gradient-to-br ${gradient} flex items-center justify-center flex-shrink-0 shadow-lg`}>
        <div className="text-white">{icon}</div>
      </div>
      <div className="flex-1 min-w-0">
        <div className="text-sm font-medium text-white group-hover:text-cyan-400 transition-colors">{label}</div>
        <div className="text-xs text-foreground-muted truncate">{description}</div>
      </div>
      <ArrowRight className="w-4 h-4 text-foreground-muted group-hover:text-cyan-400 group-hover:translate-x-1 transition-all flex-shrink-0" />
    </motion.button>
  );
}

function APICard({ title, icon, apis, onConfigure, color }: {
  title: string;
  icon: React.ReactNode;
  apis: APIStatus[];
  onConfigure: () => void;
  color: string;
}) {
  const colorClasses = {
    violet: 'from-violet-500/20 to-purple-500/20 border-violet-500/30 violet-500/5',
    cyan: 'from-cyan-500/20 to-blue-500/20 border-cyan-500/30 cyan-500/5',
    rose: 'from-rose-500/20 to-red-500/20 border-rose-500/30 rose-500/5',
    amber: 'from-amber-500/20 to-orange-500/20 border-amber-500/30 amber-500/5',
  };

  return (
    <motion.div
      variants={{
        hidden: { opacity: 0, y: 20 },
        visible: {
          opacity: 1,
          y: 0,
          transition: {
            type: "spring",
            stiffness: 100,
          },
        },
      }}
      className="col-span-12 sm:col-span-6 lg:col-span-3"
    >
      <div className={`relative overflow-hidden rounded-2xl bg-gradient-to-br from-layer-1/80 to-layer-2/50 backdrop-blur-xl border border-border-subtle p-5 h-full group hover:border-${color}-500/30 transition-all duration-300`}>
        <div className={`absolute inset-0 bg-gradient-to-br from-${color}-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300`} />

        <div className="relative z-10">
          <div className="flex items-center gap-2 mb-4">
            <div className={`w-9 h-9 rounded-lg bg-gradient-to-br ${colorClasses[color as keyof typeof colorClasses].split(' ').slice(0, 2).join(' ')} border ${colorClasses[color as keyof typeof colorClasses].split(' ')[2]} flex items-center justify-center`}>
              {icon}
            </div>
            <h3 className="font-medium text-white text-sm">{title}</h3>
          </div>

          <div className="space-y-2">
            {apis.map(api => (
              <APIRow key={api.key} api={api} onConfigure={onConfigure} />
            ))}
          </div>
        </div>
      </div>
    </motion.div>
  );
}

function APIRow({ api, onConfigure }: { api: APIStatus; onConfigure: () => void }) {
  return (
    <div className="flex items-center justify-between p-2 rounded-lg hover:bg-layer-2/50 transition-colors group/row">
      <div className="flex items-center gap-2 min-w-0">
        <span className="text-sm">{api.icon}</span>
        <span className="text-xs text-foreground truncate">{api.name}</span>
      </div>
      {api.status === 'checking' ? (
        <Loader2 className="w-3.5 h-3.5 text-cyan-400 animate-spin flex-shrink-0" />
      ) : api.status === 'online' ? (
        <div className="flex items-center gap-1 flex-shrink-0">
          <div className="w-1.5 h-1.5 rounded-full bg-success" />
          <span className="text-xs text-success">On</span>
        </div>
      ) : (
        <button
          onClick={onConfigure}
          className="text-xs text-error hover:text-error/80 transition-colors flex-shrink-0"
        >
          Off
        </button>
      )}
    </div>
  );
}

function InfoRow({ label, value }: { label: string; value: string }) {
  return (
    <div className="flex items-center justify-between p-3 rounded-lg bg-layer-2/30 border border-border-subtle">
      <span className="text-sm text-foreground-muted">{label}</span>
      <span className="text-sm font-medium text-white">{value}</span>
    </div>
  );
}

```

---
#### `app/settings/page.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { User, FileText, Globe, Terminal, Settings, Palette, Activity, HardDrive } from 'lucide-react';
import { ProfileTab } from '@/components/settings/ProfileTab';
import { DocsManagerTab } from '@/components/settings/DocsManagerTab';
import { IntegrationsTab } from '@/components/settings/IntegrationsTab';
import { LogsTab } from '@/components/settings/LogsTab';
import { AppearanceTab } from '@/components/settings/AppearanceTab';
import { SystemMonitorTab } from '@/components/settings/SystemMonitorTab';
import { FilesTab } from '@/components/settings/FilesTab';
import { getProfile, getDocs, getTokens } from '@/app/actions/settings';
import type { UserProfile, DocsData, IntegrationTokens, SettingsTab as TabType } from '@/types';

export default function SettingsPage() {
  const [activeTab, setActiveTab] = useState<TabType>('profile');
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [docs, setDocs] = useState<DocsData>({ pages: [], updatedAt: new Date().toISOString() });
  const [tokens, setTokens] = useState<IntegrationTokens | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadInitialData();
  }, []);

  const loadInitialData = async () => {
    setLoading(true);
    try {
      const [profileData, docsData, tokensData] = await Promise.all([
        getProfile(),
        getDocs(),
        getTokens(),
      ]);

      setProfile(profileData);
      setDocs(docsData);
      setTokens(tokensData);
    } catch (error) {
      console.error('Failed to load settings data:', error);
      alert('Erro ao carregar configurações');
    } finally {
      setLoading(false);
    }
  };

  const handleDocsUpdate = async () => {
    try {
      const docsData = await getDocs();
      setDocs(docsData);
    } catch (error) {
      console.error('Failed to reload docs:', error);
    }
  };

  const handleTokensUpdate = async () => {
    try {
      const tokensData = await getTokens();
      setTokens(tokensData);
    } catch (error) {
      console.error('Failed to reload tokens:', error);
    }
  };

  const tabs = [
    {
      id: 'profile' as TabType,
      label: 'Perfil',
      icon: User,
      color: 'indigo',
    },
    {
      id: 'appearance' as TabType,
      label: 'Aparência',
      icon: Palette,
      color: 'purple',
    },
    {
      id: 'monitor' as TabType,
      label: 'Monitor',
      icon: Activity,
      color: 'cyan',
    },
    {
      id: 'files' as TabType,
      label: 'Arquivos',
      icon: HardDrive,
      color: 'orange',
    },
    {
      id: 'docs' as TabType,
      label: 'Documentação',
      icon: FileText,
      color: 'amber',
    },
    {
      id: 'integrations' as TabType,
      label: 'Integrações',
      icon: Globe,
      color: 'blue',
    },
    {
      id: 'logs' as TabType,
      label: 'Logs',
      icon: Terminal,
      color: 'emerald',
    },
  ];

  const getTabColorClasses = (color: string) => {
    const colors = {
      indigo: {
        active: 'text-indigo-400 bg-indigo-500/10 border-2 border-indigo-500/30 shadow-glow-md shadow-indigo-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-indigo-500/20',
        indicator: 'bg-indigo-500 shadow-glow-sm shadow-indigo-500/50',
      },
      purple: {
        active: 'text-purple-400 bg-purple-500/10 border-2 border-purple-500/30 shadow-glow-md shadow-purple-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-purple-500/20',
        indicator: 'bg-purple-500 shadow-glow-sm shadow-purple-500/50',
      },
      cyan: {
        active: 'text-cyan-400 bg-cyan-500/10 border-2 border-cyan-500/30 shadow-glow-md shadow-cyan-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-cyan-500/20',
        indicator: 'bg-cyan-500 shadow-glow-sm shadow-cyan-500/50',
      },
      orange: {
        active: 'text-orange-400 bg-orange-500/10 border-2 border-orange-500/30 shadow-glow-md shadow-orange-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-orange-500/20',
        indicator: 'bg-orange-500 shadow-glow-sm shadow-orange-500/50',
      },
      amber: {
        active: 'text-amber-400 bg-amber-500/10 border-2 border-amber-500/30 shadow-glow-md shadow-amber-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-amber-500/20',
        indicator: 'bg-amber-500 shadow-glow-sm shadow-amber-500/50',
      },
      blue: {
        active: 'text-blue-400 bg-blue-500/10 border-2 border-blue-500/30 shadow-glow-md shadow-blue-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-blue-500/20',
        indicator: 'bg-blue-500 shadow-glow-sm shadow-blue-500/50',
      },
      emerald: {
        active: 'text-emerald-400 bg-emerald-500/10 border-2 border-emerald-500/30 shadow-glow-md shadow-emerald-500/20',
        inactive: 'text-muted hover:text-white hover:bg-layer-2/80 border-2 border-transparent hover:border-emerald-500/20',
        indicator: 'bg-emerald-500 shadow-glow-sm shadow-emerald-500/50',
      },
    };

    return colors[color as keyof typeof colors] || colors.indigo;
  };

  if (loading) {
    return (
      <div className="min-h-full flex items-center justify-center">
        <div className="text-center">
          <div className="relative inline-block">
            <Settings className="w-12 h-12 text-cyan-500 mx-auto mb-4 animate-spin" />
            <div className="absolute inset-0 w-12 h-12 bg-cyan-500/20 blur-xl animate-pulse" />
          </div>
          <p className="text-muted">Carregando configurações...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-full">
      {/* Header */}
      <div className="border-b border-subtle bg-gradient-to-br from-layer-1/80 via-indigo-950/20 to-layer-1/80 backdrop-blur-sm sticky top-0 z-10 shadow-lg shadow-indigo-500/5">
        <div className="max-w-7xl mx-auto px-6 py-6">
          <div className="flex items-center gap-3">
            <div className="relative p-2.5 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-glow-md shadow-indigo-500/50 group hover:shadow-glow-lg hover:shadow-indigo-400/70 transition-all duration-300">
              <Settings className="w-6 h-6 text-white relative z-10" />
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-blue-500/20 to-purple-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
            </div>
            <div>
              <h1 className="text-2xl font-bold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent">Configurações</h1>
              <p className="text-sm text-muted">Gerencie perfil, documentação e integrações</p>
            </div>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-6 py-8">
        <div className="grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6">
          {/* Sidebar Tabs */}
          <div className="space-y-2">
            {tabs.map((tab) => {
              const Icon = tab.icon;
              const isActive = activeTab === tab.id;
              const colorClasses = getTabColorClasses(tab.color);

              return (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`w-full px-4 py-3.5 rounded-xl flex items-center gap-3 transition-all text-left relative group ${
                    isActive
                      ? colorClasses.active
                      : colorClasses.inactive
                  }`}
                >
                  <div className={`p-2 rounded-lg transition-all ${
                    isActive
                      ? 'bg-white/10 shadow-glow-sm'
                      : 'bg-layer-2 group-hover:bg-layer-3'
                  }`}>
                    <Icon className="w-4 h-4" />
                  </div>
                  <span className="font-medium">{tab.label}</span>
                  {isActive && (
                    <div className={`absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 ${colorClasses.indicator} rounded-r`} />
                  )}
                </button>
              );
            })}
          </div>

          {/* Tab Content */}
          <div className="min-h-[600px]">
            <div className="relative overflow-hidden bg-gradient-to-br from-layer-1/80 via-indigo-950/10 to-layer-2/50 backdrop-blur-xl border-2 border-subtle rounded-2xl p-8 shadow-xl hover:border-active/30 transition-all duration-300 group">
              {/* Animated gradient mesh background */}
              <div className="absolute inset-0 bg-gradient-mesh opacity-10" />

              {/* Glow overlay on hover */}
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

              {/* Shimmer effect */}
              <div className="absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-700">
                <div className="absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/10 to-transparent animate-shimmer" />
              </div>

              {/* Content */}
              <div className="relative z-10">
                {activeTab === 'profile' && profile && (
                  <div className="animate-fade-in">
                    <ProfileTab initialProfile={profile} />
                  </div>
                )}

                {activeTab === 'appearance' && (
                  <div className="animate-fade-in">
                    <AppearanceTab />
                  </div>
                )}

                {activeTab === 'monitor' && (
                  <div className="animate-fade-in">
                    <SystemMonitorTab />
                  </div>
                )}

                {activeTab === 'files' && (
                  <div className="animate-fade-in">
                    <FilesTab />
                  </div>
                )}

                {activeTab === 'docs' && (
                  <div className="animate-fade-in">
                    <DocsManagerTab initialDocs={docs.pages} onUpdate={handleDocsUpdate} />
                  </div>
                )}

                {activeTab === 'integrations' && tokens && (
                  <div className="animate-fade-in">
                    <IntegrationsTab initialTokens={tokens} onUpdate={handleTokensUpdate} />
                  </div>
                )}

                {activeTab === 'logs' && (
                  <div className="animate-fade-in">
                    <LogsTab />
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Add custom animation styles */}
      <style jsx>{`
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fade-in {
          animation: fade-in 0.3s ease-out;
        }
      `}</style>
    </div>
  );
}

```

---
#### `app/step/1-input/page.tsx`

```
"use client";

import { useState, useEffect, useRef, useCallback } from 'react';
import { Upload, Youtube, Wifi, FileText, Sparkles, CheckCircle2, RefreshCw, ArrowRight, Users, Video, Eye, X, AlertCircle, Link2, MessageSquare, Table, Tag } from "lucide-react";
import { useAPIKeysStore } from '@/lib/api-keys-store';
import { useUIStore, useWorkflowStore } from '@/lib/store';
import { useRouter } from 'next/navigation';
import { WorkflowMode } from '@/types';
import ModeSelector from '@/components/workflow/ModeSelector';

interface ServerStatus {
  openai?: boolean;
  gemini?: boolean;
  anthropic?: boolean;
  youtube?: boolean;
  pexels?: boolean;
  pixabay?: boolean;
  elevenlabs?: boolean;
  tavily?: boolean;
  json2video?: boolean;
}

interface ChannelInfo {
  name: string;
  subscribers: string;
  videos: string;
  views: string;
  thumbnail?: string;
  channelId?: string;
  channelUrl?: string;
}

export default function InputPage() {
  const router = useRouter();
  const [serverStatus, setServerStatus] = useState<ServerStatus>({});
  const [loading, setLoading] = useState(true);
  const [mounted, setMounted] = useState(false);
  const [uploadedFile, setUploadedFile] = useState<File | null>(null);
  const [isDragging, setIsDragging] = useState(false);
  const [theme, setTheme] = useState("");
  const [channelInfo, setChannelInfo] = useState<ChannelInfo | null>(null);
  const [loadingChannel, setLoadingChannel] = useState(false);
  const [hasFetchedChannel, setHasFetchedChannel] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);

  // Novos campos do Pack #1
  const [selectedMode, setSelectedMode] = useState<WorkflowMode>("FAST");
  const [tagsFoco, setTagsFoco] = useState<string>("");
  const [linkConcorrente, setLinkConcorrente] = useState<string>("");
  const [transcricao, setTranscricao] = useState<string>("");
  const [youtubeSpreadsheet, setYoutubeSpreadsheet] = useState<File | null>(null);
  const [isDraggingSpreadsheet, setIsDraggingSpreadsheet] = useState(false);
  const spreadsheetInputRef = useRef<HTMLInputElement>(null);

  // Pega as chaves que você salvou no navegador
  const { keys: localKeys } = useAPIKeysStore();
  const { openApiKeyModal } = useUIStore();
  const { setContext, setStep } = useWorkflowStore();

  useEffect(() => {
    setMounted(true);
    checkServerStatus();
  }, []);

  const checkServerStatus = async () => {
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerStatus(data);
    } catch (error) {
      console.error("Erro ao verificar status:", error);
    } finally {
      setLoading(false);
    }
  };

  // LÓGICA DE CONEXÃO HÍBRIDA (O SEGREDO ESTÁ AQUI)
  // Verifica se a chave existe no Servidor Vercel OU no seu Navegador
  const isYoutubeConnected = serverStatus.youtube || (mounted && !!localKeys.youtube_api_key && localKeys.youtube_api_key.length > 5);

  const isAIConnected =
    serverStatus.openai || (mounted && !!localKeys.openai_api_key) ||
    serverStatus.gemini || (mounted && !!localKeys.google_api_key) ||
    serverStatus.anthropic || (mounted && !!localKeys.anthropic_api_key);

  // Carregar informações do canal
  const fetchChannelInfo = useCallback(async () => {
    if (hasFetchedChannel) return; // Evita chamadas duplicadas

    setLoadingChannel(true);
    setHasFetchedChannel(true);
    try {
      // Buscar dados reais da API do YouTube
      const headers: HeadersInit = {};
      if (localKeys.youtube_api_key) {
        headers['x-youtube-api-key'] = localKeys.youtube_api_key;
      }
      if (localKeys.youtube_channel_id) {
        headers['x-youtube-channel-id'] = localKeys.youtube_channel_id;
      }

      const response = await fetch('/api/youtube/channel', { headers });

      if (!response.ok) {
        throw new Error(`Erro ao buscar dados do canal: ${response.status}`);
      }

      const data = await response.json();

      // Formatar números para exibição amigável
      const formatNumber = (num: number): string => {
        if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;
        if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;
        return num.toString();
      };

      // Buscar thumbnail do canal
      const channelResponse = await fetch(
        `https://www.googleapis.com/youtube/v3/channels?part=snippet&id=${data.channelId}&key=${localKeys.youtube_api_key}`
      );

      let thumbnailUrl = undefined;
      if (channelResponse.ok) {
        const channelData = await channelResponse.json();
        if (channelData.items && channelData.items.length > 0) {
          thumbnailUrl = channelData.items[0].snippet.thumbnails.default.url;
        }
      }

      setChannelInfo({
        name: data.title,
        subscribers: formatNumber(data.subscriberCount),
        videos: formatNumber(data.videoCount),
        views: formatNumber(data.viewCount),
        thumbnail: thumbnailUrl,
        channelId: data.channelId,
        channelUrl: `https://www.youtube.com/channel/${data.channelId}`
      });
    } catch (error) {
      console.error("Erro ao buscar info do canal:", error);
      setHasFetchedChannel(false); // Permite tentar novamente em caso de erro
    } finally {
      setLoadingChannel(false);
    }
  }, [localKeys.youtube_api_key, localKeys.youtube_channel_id, hasFetchedChannel]);

  // Carregar informações do canal quando conectado
  useEffect(() => {
    if (isYoutubeConnected && !channelInfo && !loadingChannel && !hasFetchedChannel) {
      fetchChannelInfo();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [isYoutubeConnected]);

  // Upload de arquivo
  const handleFileSelect = useCallback((file: File) => {
    if (file && (file.type === 'text/csv' || file.name.endsWith('.csv'))) {
      setUploadedFile(file);
    } else {
      alert('Por favor, selecione um arquivo CSV válido.');
    }
  }, []);

  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
  }, []);

  const handleDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
    const file = e.dataTransfer.files[0];
    if (file) handleFileSelect(file);
  }, [handleFileSelect]);

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) handleFileSelect(file);
  };

  const handleClickUpload = () => {
    fileInputRef.current?.click();
  };

  const removeFile = () => {
    setUploadedFile(null);
    if (fileInputRef.current) {
      fileInputRef.current.value = '';
    }
  };

  // Funções para planilha do YouTube Studio
  const handleSpreadsheetSelect = useCallback((file: File) => {
    const validExtensions = ['.xlsx', '.xls', '.csv'];
    const isValid = validExtensions.some(ext => file.name.toLowerCase().endsWith(ext));

    if (file && isValid) {
      setYoutubeSpreadsheet(file);
    } else {
      alert('Por favor, selecione um arquivo válido (.xlsx, .xls ou .csv).');
    }
  }, []);

  const handleSpreadsheetDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(true);
  }, []);

  const handleSpreadsheetDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(false);
  }, []);

  const handleSpreadsheetDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDraggingSpreadsheet(false);
    const file = e.dataTransfer.files[0];
    if (file) handleSpreadsheetSelect(file);
  }, [handleSpreadsheetSelect]);

  const handleSpreadsheetInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) handleSpreadsheetSelect(file);
  };

  const handleClickSpreadsheetUpload = () => {
    spreadsheetInputRef.current?.click();
  };

  const removeSpreadsheet = () => {
    setYoutubeSpreadsheet(null);
    if (spreadsheetInputRef.current) {
      spreadsheetInputRef.current.value = '';
    }
  };

  // Avançar para próxima etapa
  // Validação: pelo menos um campo deve estar preenchido além do modo
  const hasAnyInput =
    theme.trim().length > 0 ||
    linkConcorrente.trim().length > 0 ||
    transcricao.trim().length > 0 ||
    youtubeSpreadsheet !== null;

  const canAdvance = hasAnyInput && isAIConnected;

  const handleAdvance = () => {
    if (canAdvance) {
      const now = new Date().toISOString();

      // Processar tags de foco (separar por vírgula)
      const tagsArray = tagsFoco
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);

      setContext({
        id: crypto.randomUUID(),
        createdAt: now,
        updatedAt: now,
        theme: theme.trim() || null,
        autoMode: false,
        mode: selectedMode,
        tagsFoco: tagsArray,
        linkConcorrente: linkConcorrente.trim() || null,
        dadosConcorrente: null, // Será preenchido na próxima etapa se houver link
        transcricao: transcricao.trim() || null,
        planilhaYouTubeStudio: null, // Será processado na próxima etapa se houver arquivo
        metrics: [],
        channelData: channelInfo ? {
          channelId: "user-channel",
          title: channelInfo.name,
          description: "",
          subscriberCount: parseInt(channelInfo.subscribers.replace(/[^0-9]/g, "")) || 0,
          videoCount: parseInt(channelInfo.videos.replace(/[^0-9]/g, "")) || 0,
          viewCount: parseInt(channelInfo.views.replace(/[^0-9]/g, "")) || 0,
          recentVideos: [],
        } : null,
      });
      setStep(2);
      router.push('/step/2-research');
    }
  };

  return (
    <div className="w-full space-y-6 md:space-y-8 animate-in fade-in duration-500">

      {/* Cabeçalho */}
      <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-subtle pb-6">
        <div>
          <h1 className="text-2xl sm:text-3xl font-bold text-white tracking-tight">Menu de Entrada</h1>
          <p className="text-muted mt-1 text-sm sm:text-base">Configure o contexto inicial para a produção do seu vídeo.</p>
        </div>

        <button
          onClick={() => openApiKeyModal()}
          className={`px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg font-semibold shadow-lg flex items-center gap-2 transition-all active:scale-95 whitespace-nowrap cursor-pointer hover:ring-2 text-sm sm:text-base ${
            isYoutubeConnected && isAIConnected
              ? "bg-green-600 hover:bg-green-500 text-white shadow-green-500/20 hover:ring-green-500/50"
              : "bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/20 hover:ring-indigo-500/50"
          }`}
        >
          {loading ? <RefreshCw className="w-4 h-4 animate-spin" /> : <Wifi className="w-4 h-4" />}
          {isYoutubeConnected && isAIConnected ? "Conexões Ativas" : "Conectar APIs"}
        </button>
      </div>

      {/* Seletor de Modo de Workflow */}
      <ModeSelector
        selectedMode={selectedMode}
        onSelect={setSelectedMode}
      />

      {/* Planilha do YouTube Studio */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-green-500/10 rounded-lg">
            <Table className="w-4 h-4 sm:w-5 sm:h-5 text-green-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Planilha do YouTube Studio</h3>
            <p className="text-xs text-muted">Analise dados de performance dos seus vídeos (opcional)</p>
          </div>
        </div>

        <input
          ref={spreadsheetInputRef}
          type="file"
          accept=".xlsx,.xls,.csv"
          onChange={handleSpreadsheetInputChange}
          className="hidden"
        />

        {youtubeSpreadsheet ? (
          <div className="border-2 border-green-500/30 bg-green-500/5 rounded-xl p-4 sm:p-6">
            <div className="flex items-center justify-between gap-3">
              <div className="flex items-center gap-3 min-w-0">
                <div className="p-2 sm:p-3 bg-green-500/10 rounded-full flex-shrink-0">
                  <CheckCircle2 className="w-5 h-5 sm:w-6 sm:h-6 text-green-500" />
                </div>
                <div className="min-w-0">
                  <p className="font-medium text-green-400 text-sm sm:text-base truncate">{youtubeSpreadsheet.name}</p>
                  <p className="text-muted text-xs">{(youtubeSpreadsheet.size / 1024).toFixed(1)} KB</p>
                </div>
              </div>
              <button
                onClick={removeSpreadsheet}
                className="p-2 hover:bg-red-500/10 rounded-lg transition-colors flex-shrink-0"
              >
                <X className="w-4 h-4 text-red-400" />
              </button>
            </div>
          </div>
        ) : (
          <div
            onClick={handleClickSpreadsheetUpload}
            onDragOver={handleSpreadsheetDragOver}
            onDragLeave={handleSpreadsheetDragLeave}
            onDrop={handleSpreadsheetDrop}
            className={`border-2 border-dashed rounded-xl h-32 sm:h-40 flex flex-col items-center justify-center text-muted transition-all cursor-pointer ${
              isDraggingSpreadsheet
                ? 'border-green-500 bg-green-500/10'
                : 'border-subtle hover:bg-layer-2/50 hover:border-zinc-600'
            }`}
          >
            <div className={`p-2 sm:p-3 rounded-full mb-2 sm:mb-3 shadow-inner transition-colors ${isDraggingSpreadsheet ? 'bg-green-500/20' : 'bg-layer-2'}`}>
              <Table className={`w-5 h-5 sm:w-6 sm:h-6 ${isDraggingSpreadsheet ? 'text-green-400' : 'text-muted'}`} />
            </div>
            <p className="font-medium text-foreground-secondary text-sm sm:text-base">
              {isDraggingSpreadsheet ? 'Solte a planilha aqui' : 'Clique ou arraste a planilha'}
            </p>
            <p className="text-xs text-muted mt-1">XLSX, XLS ou CSV exportado do YouTube Studio</p>
          </div>
        )}
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">

        {/* Card Upload - AGORA FUNCIONAL */}
        <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6 hover:border-default transition-all group">
          <div className="flex items-center gap-3 mb-4 sm:mb-6">
            <div className="p-2 sm:p-2.5 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors">
              <Upload className="w-4 h-4 sm:w-5 sm:h-5 text-blue-500" />
            </div>
            <div>
              <h3 className="font-semibold text-white text-base sm:text-lg">Upload de Métricas</h3>
              <p className="text-xs text-muted">Dados históricos do canal (CSV)</p>
            </div>
          </div>

          <input
            ref={fileInputRef}
            type="file"
            accept=".csv"
            onChange={handleInputChange}
            className="hidden"
          />

          {uploadedFile ? (
            <div className="border-2 border-green-500/30 bg-green-500/5 rounded-xl p-4 sm:p-6">
              <div className="flex items-center justify-between gap-3">
                <div className="flex items-center gap-3 min-w-0">
                  <div className="p-2 sm:p-3 bg-green-500/10 rounded-full flex-shrink-0">
                    <CheckCircle2 className="w-5 h-5 sm:w-6 sm:h-6 text-green-500" />
                  </div>
                  <div className="min-w-0">
                    <p className="font-medium text-green-400 text-sm sm:text-base truncate">{uploadedFile.name}</p>
                    <p className="text-muted text-xs">{(uploadedFile.size / 1024).toFixed(1)} KB</p>
                  </div>
                </div>
                <button
                  onClick={removeFile}
                  className="p-2 hover:bg-red-500/10 rounded-lg transition-colors flex-shrink-0"
                >
                  <X className="w-4 h-4 text-red-400" />
                </button>
              </div>
            </div>
          ) : (
            <div
              onClick={handleClickUpload}
              onDragOver={handleDragOver}
              onDragLeave={handleDragLeave}
              onDrop={handleDrop}
              className={`border-2 border-dashed rounded-xl h-32 sm:h-40 flex flex-col items-center justify-center text-muted transition-all cursor-pointer ${
                isDragging
                  ? 'border-blue-500 bg-blue-500/10'
                  : 'border-subtle hover:bg-layer-2/50 hover:border-zinc-600'
              }`}
            >
              <div className={`p-2 sm:p-3 rounded-full mb-2 sm:mb-3 shadow-inner transition-colors ${isDragging ? 'bg-blue-500/20' : 'bg-layer-2'}`}>
                <FileText className={`w-5 h-5 sm:w-6 sm:h-6 ${isDragging ? 'text-blue-400' : 'text-muted'}`} />
              </div>
              <p className="font-medium text-foreground-secondary text-sm sm:text-base">
                {isDragging ? 'Solte o arquivo aqui' : 'Clique ou arraste o arquivo'}
              </p>
              <p className="text-xs text-muted mt-1">Apenas arquivos CSV</p>
            </div>
          )}
        </div>

        {/* Card YouTube Sync - COM INFO DO CANAL */}
        <div className={`border rounded-xl p-4 sm:p-6 transition-all group ${isYoutubeConnected ? 'bg-green-900/10 border-green-900/30' : 'bg-layer-1 border-subtle hover:border-default'}`}>
          <div className="flex items-center gap-3 mb-4 sm:mb-6">
            <div className={`p-2 sm:p-2.5 rounded-lg transition-colors ${isYoutubeConnected ? 'bg-green-500/20' : 'bg-red-500/10'}`}>
              <Youtube className={`w-4 h-4 sm:w-5 sm:h-5 ${isYoutubeConnected ? 'text-green-500' : 'text-red-500'}`} />
            </div>
            <div>
              <h3 className="font-semibold text-white text-base sm:text-lg">Sincronização</h3>
              <p className="text-xs text-muted">Conexão em tempo real</p>
            </div>
            {isYoutubeConnected && (
               <span className="ml-auto bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1 animate-in fade-in zoom-in">
                 <CheckCircle2 className="w-3 h-3" /> ATIVO
               </span>
            )}
          </div>

          <div className="bg-gradient-to-br from-zinc-900 to-zinc-950 border border-subtle rounded-xl min-h-[128px] sm:min-h-[160px] flex flex-col items-center justify-center p-4 sm:p-6 text-center relative overflow-hidden">
            {isYoutubeConnected ? (
              loadingChannel ? (
                <div className="z-10 flex flex-col items-center gap-3">
                  <RefreshCw className="w-6 h-6 sm:w-8 sm:h-8 text-green-500 animate-spin" />
                  <p className="text-muted text-sm">Carregando dados do canal...</p>
                </div>
              ) : channelInfo ? (
                <div className="z-10 w-full animate-in slide-in-from-bottom-2">
                  <div className="flex items-center gap-3 mb-3 sm:mb-4">
                    {channelInfo.thumbnail ? (
                      <img
                        src={channelInfo.thumbnail}
                        alt={channelInfo.name}
                        className="w-10 h-10 sm:w-12 sm:h-12 rounded-full flex-shrink-0 object-cover"
                      />
                    ) : (
                      <div className="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center text-white font-bold text-base sm:text-lg flex-shrink-0">
                        {channelInfo.name.charAt(0)}
                      </div>
                    )}
                    <div className="text-left min-w-0">
                      <p className="font-semibold text-white text-sm sm:text-base truncate">{channelInfo.name}</p>
                      <p className="text-green-400 text-xs">Canal Conectado</p>
                    </div>
                  </div>
                  <div className="grid grid-cols-3 gap-2 sm:gap-3">
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Users className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.subscribers}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Inscritos</p>
                    </div>
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Video className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.videos}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Vídeos</p>
                    </div>
                    <div className="bg-layer-2/50 rounded-lg p-2 sm:p-3">
                      <Eye className="w-3 h-3 sm:w-4 sm:h-4 text-muted mx-auto mb-1" />
                      <p className="text-white font-bold text-xs sm:text-sm">{channelInfo.views}</p>
                      <p className="text-muted text-[10px] sm:text-xs">Views</p>
                    </div>
                  </div>
                  {channelInfo.channelUrl && (
                    <div className="mt-3 pt-3 border-t border-subtle">
                      <p className="text-muted text-[10px] sm:text-xs mb-1">Canal no YouTube:</p>
                      <a
                        href={channelInfo.channelUrl}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="text-blue-400 hover:text-blue-300 text-xs sm:text-sm break-all transition-colors"
                      >
                        {channelInfo.channelUrl}
                      </a>
                      <p className="text-zinc-600 text-[10px] mt-1">ID: {channelInfo.channelId}</p>
                    </div>
                  )}
                </div>
              ) : (
                <div className="z-10 flex flex-col items-center gap-3 animate-in slide-in-from-bottom-2">
                   <div className="p-2 sm:p-3 bg-green-500/10 rounded-full mb-1 border border-green-500/20">
                      <CheckCircle2 className="w-6 h-6 sm:w-8 sm:h-8 text-green-500" />
                   </div>
                   <p className="text-green-400 font-medium text-sm sm:text-base">Canal Sincronizado</p>
                   <p className="text-muted text-xs">Pronto para gerar conteúdo</p>
                </div>
              )
            ) : (
              <div className="z-10 flex flex-col items-center gap-3">
                <div className="flex items-center gap-2 text-foreground-secondary">
                  <div className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                  <span className="text-xs sm:text-sm font-medium">API Necessária</span>
                </div>
                <button
                  onClick={() => openApiKeyModal()}
                  className="text-xs bg-layer-2 hover:bg-zinc-700 text-white px-3 sm:px-4 py-2 rounded-md border border-zinc-700 transition-colors cursor-pointer"
                >
                  Configurar Acesso
                </button>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Definição de Tema */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-amber-500/10 rounded-lg">
            <Sparkles className="w-4 h-4 sm:w-5 sm:h-5 text-amber-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Definição de Tema</h3>
            <p className="text-xs text-muted">O que vamos criar hoje? (opcional se houver outras fontes)</p>
          </div>
        </div>

        <input
          type="text"
          value={theme}
          onChange={(e) => setTheme(e.target.value)}
          placeholder="Ex: Oração da Manhã, Notícias sobre IA, Review de Tech..."
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Tags de Foco */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-purple-500/10 rounded-lg">
            <Tag className="w-4 h-4 sm:w-5 sm:h-5 text-purple-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Tags de Foco</h3>
            <p className="text-xs text-muted">Palavras-chave para direcionar o conteúdo (opcional)</p>
          </div>
        </div>

        <input
          type="text"
          value={tagsFoco}
          onChange={(e) => setTagsFoco(e.target.value)}
          placeholder="Ex: motivação, empreendedorismo, sucesso (separe por vírgula)"
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Link de Vídeo Concorrente */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-cyan-500/10 rounded-lg">
            <Link2 className="w-4 h-4 sm:w-5 sm:h-5 text-cyan-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Vídeo de Referência</h3>
            <p className="text-xs text-muted">Link de um vídeo para análise e inspiração (opcional)</p>
          </div>
        </div>

        <input
          type="url"
          value={linkConcorrente}
          onChange={(e) => setLinkConcorrente(e.target.value)}
          placeholder="https://www.youtube.com/watch?v=..."
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all text-sm sm:text-base"
        />
      </div>

      {/* Transcrição de Vídeo */}
      <div className="bg-layer-1 border border-subtle rounded-xl p-4 sm:p-6">
        <div className="flex items-center gap-3 mb-4 sm:mb-6">
          <div className="p-2 sm:p-2.5 bg-pink-500/10 rounded-lg">
            <MessageSquare className="w-4 h-4 sm:w-5 sm:h-5 text-pink-500" />
          </div>
          <div>
            <h3 className="font-semibold text-white text-base sm:text-lg">Transcrição de Vídeo</h3>
            <p className="text-xs text-muted">Cole a transcrição de um vídeo para análise (opcional)</p>
          </div>
        </div>

        <textarea
          value={transcricao}
          onChange={(e) => setTranscricao(e.target.value)}
          placeholder="Cole aqui a transcrição completa de um vídeo..."
          rows={6}
          className="w-full bg-black/50 border border-zinc-700 rounded-xl py-3 sm:py-4 px-3 sm:px-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all text-sm sm:text-base resize-y"
        />
      </div>

      {/* Botão de Avançar */}
      <div className="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4 pt-4 border-t border-subtle">
        {!canAdvance && (
          <div className="flex items-center gap-2 text-amber-400 bg-amber-500/10 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm order-2 sm:order-1">
            <AlertCircle className="w-4 h-4 flex-shrink-0" />
            <span>
              {!hasAnyInput
                ? 'Preencha pelo menos um campo de input (tema, link, transcrição ou planilha)'
                : !isAIConnected
                ? 'Conecte pelo menos uma API de IA'
                : ''}
            </span>
          </div>
        )}

        <button
          onClick={handleAdvance}
          disabled={!canAdvance}
          className={`px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold shadow-lg flex items-center justify-center gap-2 transition-all text-sm sm:text-base order-1 sm:order-2 ${
            canAdvance
              ? 'bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white shadow-indigo-500/20 hover:shadow-indigo-500/40 cursor-pointer active:scale-95'
              : 'bg-layer-2 text-muted cursor-not-allowed'
          }`}
        >
          Avançar para Pesquisa
          <ArrowRight className="w-4 h-4 sm:w-5 sm:h-5" />
        </button>
      </div>
    </div>
  );
}

```

---
#### `app/step/2-research/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { useAPIKeysStore, getAPIKeyHeaders } from "@/lib/api-keys-store";
import { AIProvider, APIKeyStatus, ResearchData } from "@/types";
import {
  Brain,
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Search,
  TrendingUp,
  Users,
  Lightbulb,
  Globe,
} from "lucide-react";

export default function Step2Research() {
  const router = useRouter();
  const { context, research, setResearch, setStep } = useWorkflowStore();
  const { getActiveDiretrizes } = useGuidelinesStore();
  const { keys } = useAPIKeysStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [isLoadingKeys, setIsLoadingKeys] = useState(true);
  const [isGenerating, setIsGenerating] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select first available provider
      if (status.openai) {
        setSelectedProvider("openai");
        setSelectedModel("gpt-4o");
      } else if (status.google) {
        setSelectedProvider("google");
        setSelectedModel("gemini-1.5-pro");
      } else if (status.anthropic) {
        setSelectedProvider("anthropic");
        setSelectedModel("claude-3-5-sonnet-latest");
      }
    });
  }, []);

  // Redirect if no context
  useEffect(() => {
    if (!context) {
      router.push("/step/1-input");
    }
  }, [context, router]);

  const handleGenerate = async () => {
    if (!selectedProvider || !selectedModel || !context) {
      setError("Selecione um provedor e modelo de IA.");
      return;
    }

    setIsGenerating(true);
    setError(null);

    try {
      const activeDiretrizes = getActiveDiretrizes();
      const apiKeyHeaders = getAPIKeyHeaders(keys);

      const response = await fetch("/api/research", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          ...apiKeyHeaders,
        },
        body: JSON.stringify({
          contextId: context.id,
          theme: context.theme,
          channelData: context.channelData,
          metrics: context.metrics,
          provider: selectedProvider,
          model: selectedModel,
          diretrizes: activeDiretrizes,
        }),
      });

      if (!response.ok) {
        const data = await response.json();
        throw new Error(data.error || "Falha na pesquisa");
      }

      const researchData: ResearchData = await response.json();
      setResearch(researchData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na pesquisa");
    } finally {
      setIsGenerating(false);
    }
  };

  const handleProceed = () => {
    if (research) {
      setStep(4);
      router.push("/step/4-proposal");
    }
  };

  if (!context) {
    return null;
  }

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Inteligência - Deep Research Agent
        </h1>
        <p className="text-muted">
          Análise profunda de dados e pesquisa de tendências para o tema:{" "}
          <span className="text-white font-medium">{context.theme}</span>
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
          </div>
        )}

        {/* AI Selection & Generate */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Brain className="w-5 h-5 text-purple-500" />
              Configuração do Agente
            </CardTitle>
            <CardDescription>
              Selecione o modelo de IA para executar a pesquisa profunda.
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            {isLoadingKeys ? (
              <div className="flex items-center justify-center py-8">
                <Loader2 className="w-6 h-6 animate-spin text-muted" />
              </div>
            ) : (
              <AIModelSelector
                selectedProvider={selectedProvider}
                selectedModel={selectedModel}
                onProviderChange={setSelectedProvider}
                onModelChange={setSelectedModel}
                apiKeyStatus={apiKeyStatus!}
                label="Selecione o modelo para pesquisa"
              />
            )}

            {apiKeyStatus?.tavily && (
              <div className="p-3 bg-green-500/10 border border-green-500/20 rounded-lg flex items-center gap-2">
                <Check className="w-4 h-4 text-green-400" />
                <span className="text-green-300 text-sm">
                  Tavily API detectada - pesquisa real habilitada
                </span>
              </div>
            )}

            {!apiKeyStatus?.tavily && (
              <div className="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg flex items-center gap-2">
                <AlertCircle className="w-4 h-4 text-yellow-400" />
                <span className="text-yellow-300 text-sm">
                  Tavily não configurado - pesquisa será simulada via LLM
                </span>
              </div>
            )}
          </CardContent>
          <CardFooter>
            <Button
              onClick={handleGenerate}
              isLoading={isGenerating}
              disabled={!selectedProvider || !selectedModel}
              leftIcon={<Search className="w-4 h-4" />}
            >
              {research ? "Regenerar Pesquisa" : "Executar Pesquisa"}
            </Button>
          </CardFooter>
        </Card>

        {/* Research Results */}
        {research && (
          <div className="space-y-6">
            {/* Internal Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <TrendingUp className="w-5 h-5 text-blue-500" />
                  Análise Interna (Canal)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <TrendingUp className="w-4 h-4" />
                      Tópicos de Alta Performance
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.internalAnalysis.topPerformingTopics.map((topic, i) => (
                        <Badge key={i} variant="success">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Users className="w-4 h-4" />
                      Insights da Audiência
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.audienceInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Lightbulb className="w-4 h-4" />
                      Lacunas de Conteúdo
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.contentGaps.map((gap, i) => (
                        <li key={i}>• {gap}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2 flex items-center gap-2">
                      <Check className="w-4 h-4" />
                      Recomendações
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.internalAnalysis.recommendations.map((rec, i) => (
                        <li key={i}>• {rec}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* External Analysis */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Globe className="w-5 h-5 text-green-500" />
                  Análise Externa (Mercado)
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Tópicos em Alta
                    </h4>
                    <div className="flex flex-wrap gap-2">
                      {research.externalAnalysis.trendingTopics.map((topic, i) => (
                        <Badge key={i} variant="info">
                          {topic}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Insights de Competidores
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.externalAnalysis.competitorInsights.map((insight, i) => (
                        <li key={i}>• {insight}</li>
                      ))}
                    </ul>
                  </div>

                  <div className="p-4 bg-layer-2 rounded-lg">
                    <h4 className="text-sm font-medium text-muted mb-2">
                      Oportunidades de Mercado
                    </h4>
                    <ul className="space-y-1 text-sm text-foreground-secondary">
                      {research.externalAnalysis.marketOpportunities.map((opp, i) => (
                        <li key={i}>• {opp}</li>
                      ))}
                    </ul>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Consolidated Insights */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Brain className="w-5 h-5 text-purple-500" />
                  Síntese Estratégica
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-foreground-secondary leading-relaxed">
                  {research.consolidatedInsights}
                </p>
              </CardContent>
            </Card>

            {/* Research Queries */}
            <Card>
              <CardHeader>
                <CardTitle>Queries Executadas</CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  {research.queries.map((query, i) => (
                    <div
                      key={i}
                      className="p-3 bg-layer-3 rounded-lg border border-subtle"
                    >
                      <div className="flex items-center justify-between mb-2">
                        <span className="font-medium text-white">
                          {query.query}
                        </span>
                        <Badge variant={query.source === "tavily" ? "success" : "warning"}>
                          {query.source === "tavily" ? "Tavily" : "Simulado"}
                        </Badge>
                      </div>
                      <p className="text-sm text-muted">
                        {query.results.length} resultados encontrados
                      </p>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </div>
        )}

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/1-input")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={!research}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Proposta
        </Button>
      </div>
    </div>
  );
}

```

---
#### `app/step/4-proposal/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Textarea from "@/components/ui/Textarea";
import Select from "@/components/ui/Select";
import Toggle from "@/components/ui/Toggle";
import AssetCard from "@/components/AssetCard";
import { useWorkflowStore, useGuidelinesStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import {
  AIProvider,
  APIKeyStatus,
  ProposalData,
  Script,
  Soundtrack,
  Description,
  Tags,
  TitlesAndThumbs,
  UploadSetup,
  ImageProvider,
  TTSProvider,
} from "@/types";
import { v4 as uuidv4 } from "uuid";
import { formatDuration } from "@/lib/utils";
import {
  ArrowRight,
  ArrowLeft,
  Loader2,
  AlertCircle,
  Check,
  Sparkles,
  Image,
  Settings,
  Volume2,
} from "lucide-react";

export default function Step4Proposal() {
  const router = useRouter();
  const { context, research, proposal, setProposal, updateProposal, setStep } = useWorkflowStore();
  const { getDiretrizesForScope } = useGuidelinesStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Individual generation states
  const [generatingScript, setGeneratingScript] = useState(false);
  const [generatingSoundtrack, setGeneratingSoundtrack] = useState(false);
  const [generatingDescription, setGeneratingDescription] = useState(false);
  const [generatingTags, setGeneratingTags] = useState(false);
  const [generatingTitles, setGeneratingTitles] = useState(false);
  const [generatingImage, setGeneratingImage] = useState<string | null>(null);
  const [generatingAudio, setGeneratingAudio] = useState(false);

  // Edit states
  const [editingScript, setEditingScript] = useState(false);
  const [editingDescription, setEditingDescription] = useState(false);
  const [editingTags, setEditingTags] = useState(false);
  const [editContent, setEditContent] = useState("");

  // Default upload setup
  const defaultUploadSetup: UploadSetup = {
    category: "22",
    language: "pt",
    license: "youtube",
    madeForKids: false,
    ageRestricted: false,
    paidPromotion: false,
    allowComments: true,
    allowEmbedding: true,
  };

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no research
  useEffect(() => {
    if (!context || !research) {
      router.push("/step/1-input");
    }
  }, [context, research, router]);

  // Initialize proposal if not exists
  useEffect(() => {
    if (context && research && !proposal) {
      const initialProposal: ProposalData = {
        id: uuidv4(),
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
        contextId: context.id,
        researchId: research.id,
        rationale: "",
        script: {
          id: uuidv4(),
          status: "pending",
          sections: [],
          totalDuration: 0,
          generatedAt: "",
          approvedAt: null,
          audioUrl: null,
          ttsProvider: null,
          ttsVoice: null,
        },
        soundtrack: {
          id: uuidv4(),
          status: "pending",
          suggestions: [],
          selected: null,
          generatedAt: "",
          approvedAt: null,
        },
        description: {
          id: uuidv4(),
          status: "pending",
          content: "",
          generatedAt: "",
          approvedAt: null,
        },
        tags: {
          id: uuidv4(),
          status: "pending",
          items: [],
          generatedAt: "",
          approvedAt: null,
        },
        uploadSetup: defaultUploadSetup,
        titlesAndThumbs: {
          id: uuidv4(),
          status: "pending",
          variations: [],
          selectedVariation: null,
          generatedAt: "",
          approvedAt: null,
        },
        allApproved: false,
      };
      setProposal(initialProposal);
    }
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [context, research, proposal, setProposal]);

  const generateScript = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingScript(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("script");
      const response = await fetch("/api/proposal/script", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const script: Script = await response.json();
      updateProposal({ script, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar roteiro");
    } finally {
      setGeneratingScript(false);
    }
  };

  const generateSoundtrack = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingSoundtrack(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/soundtrack", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          mood: "professional, engaging",
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const soundtrack: Soundtrack = await response.json();
      updateProposal({ soundtrack, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar trilha");
    } finally {
      setGeneratingSoundtrack(false);
    }
  };

  const generateDescription = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingDescription(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("description");
      const response = await fetch("/api/proposal/description", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const description: Description = await response.json();
      updateProposal({ description, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar descrição");
    } finally {
      setGeneratingDescription(false);
    }
  };

  const generateTags = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTags(true);
    setError(null);

    try {
      const response = await fetch("/api/proposal/tags", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          description: proposal.description.content,
          research,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const tags: Tags = await response.json();
      updateProposal({ tags, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar tags");
    } finally {
      setGeneratingTags(false);
    }
  };

  const generateTitles = async (provider: AIProvider, model: string) => {
    if (!context || !proposal) return;
    setGeneratingTitles(true);
    setError(null);

    try {
      const diretrizes = getDiretrizesForScope("thumbnail");
      const response = await fetch("/api/proposal/titles", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          theme: context.theme,
          script: proposal.script,
          research,
          diretrizes,
          provider,
          model,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const titlesAndThumbs: TitlesAndThumbs = await response.json();
      updateProposal({ titlesAndThumbs, updatedAt: new Date().toISOString() });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar títulos");
    } finally {
      setGeneratingTitles(false);
    }
  };

  const generateThumbnailImage = async (variationId: string, provider: ImageProvider) => {
    if (!proposal) return;
    setGeneratingImage(variationId);
    setError(null);

    try {
      const variation = proposal.titlesAndThumbs.variations.find((v) => v.id === variationId);
      if (!variation) throw new Error("Variação não encontrada");

      const response = await fetch("/api/images/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          prompt: variation.thumbnailPrompt,
          provider,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { imageUrl } = await response.json();

      const updatedVariations = proposal.titlesAndThumbs.variations.map((v) =>
        v.id === variationId ? { ...v, thumbnailUrl: imageUrl, imageProvider: provider } : v
      );

      updateProposal({
        titlesAndThumbs: {
          ...proposal.titlesAndThumbs,
          variations: updatedVariations,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar imagem");
    } finally {
      setGeneratingImage(null);
    }
  };

  const generateAudio = async (ttsProvider: TTSProvider, voice: string) => {
    if (!proposal?.script) return;
    setGeneratingAudio(true);
    setError(null);

    try {
      const fullText = proposal.script.sections.map((s) => s.content).join("\n\n");
      const response = await fetch("/api/tts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          text: fullText,
          provider: ttsProvider,
          voice,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { audioUrl } = await response.json();

      updateProposal({
        script: {
          ...proposal.script,
          audioUrl,
          ttsProvider,
          ttsVoice: voice,
        },
        updatedAt: new Date().toISOString(),
      });
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar áudio");
    } finally {
      setGeneratingAudio(false);
    }
  };

  const approveAsset = (asset: "script" | "soundtrack" | "description" | "tags" | "titlesAndThumbs") => {
    if (!proposal) return;

    const now = new Date().toISOString();
    const updates: Partial<ProposalData> = { updatedAt: now };

    switch (asset) {
      case "script":
        updates.script = { ...proposal.script, status: "approved", approvedAt: now };
        break;
      case "soundtrack":
        updates.soundtrack = { ...proposal.soundtrack, status: "approved", approvedAt: now };
        break;
      case "description":
        updates.description = { ...proposal.description, status: "approved", approvedAt: now };
        break;
      case "tags":
        updates.tags = { ...proposal.tags, status: "approved", approvedAt: now };
        break;
      case "titlesAndThumbs":
        updates.titlesAndThumbs = { ...proposal.titlesAndThumbs, status: "approved", approvedAt: now };
        break;
    }

    updateProposal(updates);

    // Check if all approved
    const updatedProposal = { ...proposal, ...updates };
    const allApproved =
      updatedProposal.script.status === "approved" &&
      updatedProposal.soundtrack.status === "approved" &&
      updatedProposal.description.status === "approved" &&
      updatedProposal.tags.status === "approved" &&
      updatedProposal.titlesAndThumbs.status === "approved";

    if (allApproved) {
      updateProposal({ allApproved: true });
    }
  };

  const handleProceed = () => {
    if (proposal?.allApproved) {
      setStep(5);
      router.push("/step/5-studio");
    }
  };

  if (!context || !research || !proposal) {
    return null;
  }

  const canProceed = proposal.allApproved;

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Proposta de Vídeo - Mesa de Decisão
        </h1>
        <p className="text-muted">
          Todos os assets são gerados aqui. Nada avança sem sua aprovação.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Rationale */}
        {proposal.rationale && (
          <Card className="bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/20">
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Sparkles className="w-5 h-5 text-yellow-500" />
                Por que esta proposta vai performar bem
              </CardTitle>
            </CardHeader>
            <CardContent>
              <p className="text-foreground-secondary leading-relaxed">{proposal.rationale}</p>
            </CardContent>
          </Card>
        )}

        {/* Script */}
        <AssetCard
          title="Roteiro"
          status={proposal.script.status}
          isGenerating={generatingScript}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.script.sections.map((s) => s.content).join("\n\n---\n\n"));
            setEditingScript(true);
          }}
          onRegenerate={generateScript}
          onApprove={() => approveAsset("script")}
          isEditing={editingScript}
          onCancelEdit={() => setEditingScript(false)}
          onSaveEdit={() => {
            // Parse edited content back to sections (simplified)
            setEditingScript(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={20}
              className="font-mono text-sm"
            />
          }
        >
          {proposal.script.sections.length > 0 ? (
            <div className="space-y-4">
              <div className="flex items-center gap-4 text-sm text-muted">
                <span>Duração: {formatDuration(proposal.script.totalDuration)}</span>
                <span>Seções: {proposal.script.sections.length}</span>
              </div>
              <div className="space-y-3 max-h-96 overflow-auto">
                {proposal.script.sections.map((section) => (
                  <div key={section.id} className="p-3 bg-layer-2 rounded-lg">
                    <div className="flex items-center gap-2 mb-2">
                      <Badge variant="info">{section.type}</Badge>
                      <span className="text-xs text-muted">
                        {formatDuration(section.duration)}
                      </span>
                    </div>
                    <p className="text-foreground-secondary text-sm whitespace-pre-wrap">
                      {section.content}
                    </p>
                  </div>
                ))}
              </div>

              {/* TTS Section */}
              <div className="pt-4 border-t border-gray-800">
                <h4 className="text-sm font-medium text-muted mb-3 flex items-center gap-2">
                  <Volume2 className="w-4 h-4" />
                  Gerar Áudio (TTS)
                </h4>
                {proposal.script.audioUrl ? (
                  <div className="flex items-center gap-3">
                    <audio controls src={proposal.script.audioUrl} className="flex-1" />
                    <Badge variant="success">Gerado</Badge>
                  </div>
                ) : (
                  <div className="flex items-center gap-3">
                    <Select
                      options={[
                        { value: "openai:alloy", label: "OpenAI - Alloy" },
                        { value: "openai:nova", label: "OpenAI - Nova" },
                        { value: "google:pt-BR-Wavenet-A", label: "Google - PT-BR Female" },
                      ]}
                      placeholder="Selecione voz..."
                      className="w-48"
                      onChange={(value) => {
                        const [provider, voice] = value.split(":") as [TTSProvider, string];
                        generateAudio(provider, voice);
                      }}
                    />
                    {generatingAudio && <Loader2 className="w-4 h-4 animate-spin" />}
                  </div>
                )}
              </div>
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar o roteiro
            </p>
          )}
        </AssetCard>

        {/* Soundtrack */}
        <AssetCard
          title="Trilha Sonora"
          status={proposal.soundtrack.status}
          isGenerating={generatingSoundtrack}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateSoundtrack}
          onApprove={() => approveAsset("soundtrack")}
        >
          {proposal.soundtrack.suggestions.length > 0 ? (
            <div className="space-y-3">
              {proposal.soundtrack.suggestions.map((track) => (
                <div
                  key={track.id}
                  className={`p-3 rounded-lg border transition-all cursor-pointer ${
                    proposal.soundtrack.selected === track.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-layer-2 border-subtle hover:border-gray-600"
                  }`}
                  onClick={() =>
                    updateProposal({
                      soundtrack: { ...proposal.soundtrack, selected: track.id },
                    })
                  }
                >
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="font-medium text-white">{track.title}</p>
                      <p className="text-sm text-muted">
                        {track.artist} • {track.genre}
                      </p>
                    </div>
                    <Badge variant="default">{track.license}</Badge>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para sugerir trilhas
            </p>
          )}
        </AssetCard>

        {/* Description */}
        <AssetCard
          title="Descrição"
          status={proposal.description.status}
          isGenerating={generatingDescription}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.description.content);
            setEditingDescription(true);
          }}
          onRegenerate={generateDescription}
          onApprove={() => approveAsset("description")}
          isEditing={editingDescription}
          onCancelEdit={() => setEditingDescription(false)}
          onSaveEdit={() => {
            updateProposal({
              description: { ...proposal.description, content: editContent },
            });
            setEditingDescription(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={10}
            />
          }
        >
          {proposal.description.content ? (
            <div className="prose prose-invert max-w-none">
              <pre className="whitespace-pre-wrap text-sm text-foreground-secondary font-sans">
                {proposal.description.content}
              </pre>
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar a descrição
            </p>
          )}
        </AssetCard>

        {/* Tags */}
        <AssetCard
          title="Tags"
          status={proposal.tags.status}
          isGenerating={generatingTags}
          apiKeyStatus={apiKeyStatus!}
          onEdit={() => {
            setEditContent(proposal.tags.items.join(", "));
            setEditingTags(true);
          }}
          onRegenerate={generateTags}
          onApprove={() => approveAsset("tags")}
          isEditing={editingTags}
          onCancelEdit={() => setEditingTags(false)}
          onSaveEdit={() => {
            updateProposal({
              tags: {
                ...proposal.tags,
                items: editContent.split(",").map((t) => t.trim()).filter(Boolean),
              },
            });
            setEditingTags(false);
          }}
          editContent={
            <Textarea
              value={editContent}
              onChange={(e) => setEditContent(e.target.value)}
              rows={4}
              helperText="Separe as tags por vírgula"
            />
          }
        >
          {proposal.tags.items.length > 0 ? (
            <div className="flex flex-wrap gap-2">
              {proposal.tags.items.map((tag, i) => (
                <Badge key={i} variant="default">
                  {tag}
                </Badge>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar as tags
            </p>
          )}
        </AssetCard>

        {/* Upload Setup */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Settings className="w-5 h-5 text-muted" />
              Setup de Upload
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <Select
                label="Categoria"
                value={proposal.uploadSetup.category}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, category: value },
                  })
                }
                options={[
                  { value: "22", label: "People & Blogs" },
                  { value: "27", label: "Education" },
                  { value: "28", label: "Science & Technology" },
                  { value: "24", label: "Entertainment" },
                  { value: "26", label: "Howto & Style" },
                ]}
              />
              <Select
                label="Idioma"
                value={proposal.uploadSetup.language}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, language: value },
                  })
                }
                options={[
                  { value: "pt", label: "Português" },
                  { value: "en", label: "English" },
                  { value: "es", label: "Español" },
                ]}
              />
              <Select
                label="Licença"
                value={proposal.uploadSetup.license}
                onChange={(value) =>
                  updateProposal({
                    uploadSetup: {
                      ...proposal.uploadSetup,
                      license: value as "youtube" | "creative_commons",
                    },
                  })
                }
                options={[
                  { value: "youtube", label: "YouTube Standard" },
                  { value: "creative_commons", label: "Creative Commons" },
                ]}
              />
            </div>
            <div className="mt-4 space-y-3">
              <Toggle
                checked={proposal.uploadSetup.madeForKids}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, madeForKids: checked },
                  })
                }
                label="Feito para crianças"
              />
              <Toggle
                checked={proposal.uploadSetup.allowComments}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowComments: checked },
                  })
                }
                label="Permitir comentários"
              />
              <Toggle
                checked={proposal.uploadSetup.allowEmbedding}
                onChange={(checked) =>
                  updateProposal({
                    uploadSetup: { ...proposal.uploadSetup, allowEmbedding: checked },
                  })
                }
                label="Permitir incorporação"
              />
            </div>
          </CardContent>
        </Card>

        {/* Titles & Thumbnails */}
        <AssetCard
          title="Títulos e Thumbnails"
          status={proposal.titlesAndThumbs.status}
          isGenerating={generatingTitles}
          apiKeyStatus={apiKeyStatus!}
          onRegenerate={generateTitles}
          onApprove={() => approveAsset("titlesAndThumbs")}
        >
          {proposal.titlesAndThumbs.variations.length > 0 ? (
            <div className="space-y-4">
              {proposal.titlesAndThumbs.variations.map((variation) => (
                <div
                  key={variation.id}
                  className={`p-4 rounded-lg border transition-all ${
                    proposal.titlesAndThumbs.selectedVariation === variation.id
                      ? "bg-primary-500/10 border-primary-500"
                      : "bg-layer-2 border-subtle"
                  }`}
                >
                  <div className="flex items-start gap-4">
                    {/* Thumbnail */}
                    <div className="w-48 h-27 bg-layer-2 rounded-lg overflow-hidden flex-shrink-0">
                      {variation.thumbnailUrl ? (
                        <img
                          src={variation.thumbnailUrl}
                          alt={variation.title}
                          className="w-full h-full object-cover"
                        />
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-8 h-8 text-muted" />
                        </div>
                      )}
                    </div>

                    <div className="flex-1">
                      <h4 className="font-medium text-white mb-2">{variation.title}</h4>
                      <p className="text-sm text-muted mb-3">{variation.thumbnailPrompt}</p>

                      <div className="flex flex-wrap gap-2">
                        <Button
                          size="sm"
                          variant={
                            proposal.titlesAndThumbs.selectedVariation === variation.id
                              ? "success"
                              : "outline"
                          }
                          onClick={() =>
                            updateProposal({
                              titlesAndThumbs: {
                                ...proposal.titlesAndThumbs,
                                selectedVariation: variation.id,
                              },
                            })
                          }
                        >
                          {proposal.titlesAndThumbs.selectedVariation === variation.id
                            ? "Selecionado"
                            : "Selecionar"}
                        </Button>

                        {/* Image Generation Buttons */}
                        {apiKeyStatus?.openai && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "dalle")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            DALL·E
                          </Button>
                        )}
                        {apiKeyStatus?.stability && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "stability")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Stability
                          </Button>
                        )}
                        {apiKeyStatus?.replicate && (
                          <Button
                            size="sm"
                            variant="outline"
                            onClick={() => generateThumbnailImage(variation.id, "replicate")}
                            isLoading={generatingImage === variation.id}
                            disabled={generatingImage !== null}
                          >
                            Replicate
                          </Button>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-muted text-center py-8">
              Clique em &quot;Regerar&quot; para gerar títulos e prompts de thumbnail
            </p>
          )}
        </AssetCard>

        {/* Approval Status */}
        <Card className={canProceed ? "border-green-500/50" : "border-yellow-500/50"}>
          <CardContent className="py-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-4">
                {canProceed ? (
                  <>
                    <div className="w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center">
                      <Check className="w-5 h-5 text-green-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Todos os assets aprovados!</p>
                      <p className="text-sm text-muted">
                        Você pode prosseguir para o Studio de Criação.
                      </p>
                    </div>
                  </>
                ) : (
                  <>
                    <div className="w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center">
                      <AlertCircle className="w-5 h-5 text-yellow-400" />
                    </div>
                    <div>
                      <p className="font-medium text-white">Aprovações pendentes</p>
                      <p className="text-sm text-muted">
                        Gere e aprove todos os assets para continuar.
                      </p>
                    </div>
                  </>
                )}
              </div>

              <div className="flex gap-2">
                {[
                  { name: "Roteiro", status: proposal.script.status },
                  { name: "Trilha", status: proposal.soundtrack.status },
                  { name: "Descrição", status: proposal.description.status },
                  { name: "Tags", status: proposal.tags.status },
                  { name: "Títulos", status: proposal.titlesAndThumbs.status },
                ].map((item) => (
                  <Badge
                    key={item.name}
                    variant={item.status === "approved" ? "success" : "warning"}
                    size="sm"
                  >
                    {item.name}
                  </Badge>
                ))}
              </div>
            </div>
          </CardContent>
        </Card>

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/2-research")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={!canProceed}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Studio
        </Button>
      </div>
    </div>
  );
}

```

---
#### `app/step/5-studio/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import Input from "@/components/ui/Input";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus, StoryboardData, MediaItem, MediaSource } from "@/types";
import { formatDuration } from "@/lib/utils";
import {
  Film,
  ArrowRight,
  ArrowLeft,
  AlertCircle,
  Play,
  Image,
  Search,
  GripVertical,
  Trash2,
  Plus,
  Video,
} from "lucide-react";

export default function Step5Studio() {
  const router = useRouter();
  const { context, proposal, storyboard, render, setStoryboard, setRender, updateRender, setStep } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isGeneratingStoryboard, setIsGeneratingStoryboard] = useState(false);
  const [isSearchingMedia, setIsSearchingMedia] = useState<string | null>(null);
  const [isRendering, setIsRendering] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Media search state
  const [mediaSearchResults, setMediaSearchResults] = useState<Record<string, MediaItem[]>>({});
  const [selectedSources, setSelectedSources] = useState<MediaSource[]>(["pexels", "pixabay", "unsplash"]);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);

      // Auto-select available sources
      const sources: MediaSource[] = [];
      if (status.pexels) sources.push("pexels");
      if (status.pixabay) sources.push("pixabay");
      if (status.unsplash) sources.push("unsplash");
      setSelectedSources(sources);
    });
  }, []);

  // Redirect if no proposal
  useEffect(() => {
    if (!context || !proposal || !proposal.allApproved) {
      router.push("/step/4-proposal");
    }
  }, [context, proposal, router]);

  const generateStoryboard = async () => {
    if (!proposal) return;
    setIsGeneratingStoryboard(true);
    setError(null);

    try {
      const response = await fetch("/api/storyboard", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          script: proposal.script,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const storyboardData: StoryboardData = await response.json();
      setStoryboard(storyboardData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar storyboard");
    } finally {
      setIsGeneratingStoryboard(false);
    }
  };

  const searchMediaForScene = async (sceneId: string, query: string) => {
    setIsSearchingMedia(sceneId);
    setError(null);

    try {
      const response = await fetch("/api/media/search", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          query,
          sources: selectedSources,
          mediaType: "all",
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const { results } = await response.json();
      setMediaSearchResults((prev) => ({ ...prev, [sceneId]: results }));
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro na busca de mídia");
    } finally {
      setIsSearchingMedia(null);
    }
  };

  const selectMediaForScene = (sceneId: string, media: MediaItem) => {
    if (!storyboard) return;

    const updatedScenes = storyboard.scenes.map((scene) =>
      scene.id === sceneId ? { ...scene, media } : scene
    );

    setStoryboard({
      ...storyboard,
      scenes: updatedScenes,
    });

    // Clear search results for this scene
    setMediaSearchResults((prev) => {
      const updated = { ...prev };
      delete updated[sceneId];
      return updated;
    });
  };

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const updateSceneOrder = (fromIndex: number, toIndex: number) => {
    if (!storyboard) return;

    const scenes = [...storyboard.scenes];
    const [movedScene] = scenes.splice(fromIndex, 1);
    scenes.splice(toIndex, 0, movedScene);

    // Update order property
    const reorderedScenes = scenes.map((scene, i) => ({ ...scene, order: i }));

    setStoryboard({
      ...storyboard,
      scenes: reorderedScenes,
    });
  };

  const startRender = async () => {
    if (!storyboard || !proposal) return;
    setIsRendering(true);
    setError(null);

    try {
      const response = await fetch("/api/render", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          storyboardId: storyboard.id,
          scenes: storyboard.scenes,
          soundtrack: proposal.soundtrack.selected
            ? proposal.soundtrack.suggestions.find((s) => s.id === proposal.soundtrack.selected)
            : null,
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const renderData = await response.json();
      setRender(renderData);

      // Poll for render status
      pollRenderStatus(renderData.id);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao iniciar renderização");
      setIsRendering(false);
    }
  };

  const pollRenderStatus = async (jobId: string) => {
    try {
      const response = await fetch(`/api/render?jobId=${jobId}`);
      if (!response.ok) throw new Error("Erro ao verificar status");

      const status = await response.json();
      updateRender(status);

      if (status.status === "rendering") {
        setTimeout(() => pollRenderStatus(jobId), 5000);
      } else {
        setIsRendering(false);
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao verificar renderização");
      setIsRendering(false);
    }
  };

  const handleProceed = () => {
    if (render?.status === "completed") {
      setStep(6);
      router.push("/step/6-upload");
    }
  };

  if (!context || !proposal) {
    return null;
  }

  const allScenesHaveMedia = storyboard?.scenes.every((scene) => scene.media !== null) ?? false;
  const canRender = storyboard && allScenesHaveMedia && apiKeyStatus?.json2video;

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Studio de Criação
        </h1>
        <p className="text-muted">
          Popule cada cena com mídia, revise e renderize seu vídeo.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Storyboard Generation */}
        {!storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Film className="w-5 h-5 text-purple-500" />
                Gerar Storyboard
              </CardTitle>
              <CardDescription>
                O storyboard divide o roteiro aprovado em cenas individuais.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <Button
                onClick={generateStoryboard}
                isLoading={isGeneratingStoryboard}
                leftIcon={<Film className="w-4 h-4" />}
              >
                Gerar Storyboard
              </Button>
            </CardContent>
          </Card>
        )}

        {/* Storyboard Scenes */}
        {storyboard && (
          <div className="space-y-6">
            <div className="flex items-center justify-between">
              <div>
                <h2 className="text-xl font-semibold text-white">
                  Storyboard ({storyboard.scenes.length} cenas)
                </h2>
                <p className="text-sm text-muted">
                  Duração total: {formatDuration(storyboard.totalDuration)}
                </p>
              </div>
              <div className="flex gap-2">
                <Badge variant={allScenesHaveMedia ? "success" : "warning"}>
                  {storyboard.scenes.filter((s) => s.media).length}/{storyboard.scenes.length} com mídia
                </Badge>
              </div>
            </div>

            {/* Media Sources Filter */}
            <Card padding="sm">
              <div className="flex items-center gap-4">
                <span className="text-sm text-muted">Fontes de mídia:</span>
                {(["pexels", "pixabay", "unsplash"] as MediaSource[]).map((source) => {
                  const isAvailable = apiKeyStatus?.[source as keyof APIKeyStatus];
                  const isSelected = selectedSources.includes(source);

                  return (
                    <button
                      key={source}
                      onClick={() => {
                        if (isAvailable) {
                          setSelectedSources((prev) =>
                            prev.includes(source)
                              ? prev.filter((s) => s !== source)
                              : [...prev, source]
                          );
                        }
                      }}
                      disabled={!isAvailable}
                      className={`px-3 py-1 rounded-full text-sm transition-all ${
                        !isAvailable
                          ? "bg-layer-2 text-disabled cursor-not-allowed"
                          : isSelected
                          ? "bg-primary-600 text-white"
                          : "bg-layer-2 text-muted hover:bg-layer-3"
                      }`}
                    >
                      {source.charAt(0).toUpperCase() + source.slice(1)}
                    </button>
                  );
                })}
              </div>
            </Card>

            {/* Scenes List */}
            <div className="space-y-4">
              {storyboard.scenes.map((scene, index) => (
                <Card key={scene.id} padding="sm">
                  <div className="flex gap-4">
                    {/* Drag Handle */}
                    <div className="flex items-center">
                      <GripVertical className="w-5 h-5 text-disabled cursor-move" />
                    </div>

                    {/* Scene Number */}
                    <div className="w-12 h-12 bg-layer-2 rounded-lg flex items-center justify-center flex-shrink-0">
                      <span className="text-lg font-bold text-muted">{index + 1}</span>
                    </div>

                    {/* Media Preview */}
                    <div className="w-32 h-20 bg-layer-2 rounded-lg overflow-hidden flex-shrink-0">
                      {scene.media ? (
                        scene.media.type === "video" ? (
                          <video
                            src={scene.media.previewUrl}
                            className="w-full h-full object-cover"
                            muted
                          />
                        ) : (
                          <img
                            src={scene.media.previewUrl}
                            alt=""
                            className="w-full h-full object-cover"
                          />
                        )
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          <Image className="w-6 h-6 text-disabled" />
                        </div>
                      )}
                    </div>

                    {/* Scene Content */}
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-1">
                        <Badge variant="info" size="sm">
                          {formatDuration(scene.duration)}
                        </Badge>
                        {scene.media && (
                          <Badge variant="success" size="sm">
                            {scene.media.source}
                          </Badge>
                        )}
                      </div>
                      <p className="text-sm text-secondary line-clamp-2">{scene.text}</p>

                      {/* Media Source Info */}
                      {scene.media && (
                        <p className="text-xs text-muted mt-1">{scene.media.attribution}</p>
                      )}
                    </div>

                    {/* Scene Actions */}
                    <div className="flex flex-col gap-2">
                      <SearchMediaButton
                        sceneText={scene.text}
                        isSearching={isSearchingMedia === scene.id}
                        onSearch={(query) => searchMediaForScene(scene.id, query)}
                      />
                      {scene.media && (
                        <Button
                          size="sm"
                          variant="ghost"
                          onClick={() => {
                            const updatedScenes = storyboard.scenes.map((s) =>
                              s.id === scene.id ? { ...s, media: null } : s
                            );
                            setStoryboard({ ...storyboard, scenes: updatedScenes });
                          }}
                        >
                          <Trash2 className="w-4 h-4" />
                        </Button>
                      )}
                    </div>
                  </div>

                  {/* Media Search Results */}
                  {mediaSearchResults[scene.id] && (
                    <div className="mt-4 pt-4 border-t border-subtle">
                      <div className="flex items-center justify-between mb-3">
                        <span className="text-sm text-muted">
                          {mediaSearchResults[scene.id].length} resultados encontrados
                        </span>
                        <button
                          onClick={() =>
                            setMediaSearchResults((prev) => {
                              const updated = { ...prev };
                              delete updated[scene.id];
                              return updated;
                            })
                          }
                          className="text-sm text-muted hover:text-muted"
                        >
                          Fechar
                        </button>
                      </div>
                      <div className="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2">
                        {mediaSearchResults[scene.id].slice(0, 16).map((media) => (
                          <button
                            key={media.id}
                            onClick={() => selectMediaForScene(scene.id, media)}
                            className="aspect-video bg-layer-2 rounded overflow-hidden hover:ring-2 hover:ring-primary-500 transition-all"
                          >
                            <img
                              src={media.previewUrl}
                              alt=""
                              className="w-full h-full object-cover"
                            />
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                </Card>
              ))}
            </div>
          </div>
        )}

        {/* Render Section */}
        {storyboard && (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Video className="w-5 h-5 text-green-500" />
                Renderização
              </CardTitle>
              <CardDescription>
                Combine todas as cenas em um vídeo final.
              </CardDescription>
            </CardHeader>
            <CardContent>
              {!apiKeyStatus?.json2video ? (
                <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                  <p className="text-yellow-300 text-sm">
                    JSON2Video API não configurada. Adicione JSON2VIDEO_API_KEY para habilitar a
                    renderização.
                  </p>
                </div>
              ) : render ? (
                <div className="space-y-4">
                  <div className="flex items-center gap-4">
                    <Badge
                      variant={
                        render.status === "completed"
                          ? "success"
                          : render.status === "error"
                          ? "error"
                          : "info"
                      }
                    >
                      {render.status === "rendering"
                        ? `Renderizando... ${render.progress}%`
                        : render.status === "completed"
                        ? "Concluído"
                        : render.status === "error"
                        ? "Erro"
                        : "Pendente"}
                    </Badge>
                    {render.status === "rendering" && (
                      <div className="flex-1 h-2 bg-layer-2 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-primary-500 transition-all"
                          style={{ width: `${render.progress}%` }}
                        />
                      </div>
                    )}
                  </div>

                  {render.videoUrl && (
                    <div className="aspect-video bg-black rounded-lg overflow-hidden">
                      <video src={render.videoUrl} controls className="w-full h-full" />
                    </div>
                  )}

                  {render.error && (
                    <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                      <p className="text-red-300 text-sm">{render.error}</p>
                    </div>
                  )}
                </div>
              ) : (
                <Button
                  onClick={startRender}
                  isLoading={isRendering}
                  disabled={!canRender}
                  leftIcon={<Play className="w-4 h-4" />}
                >
                  Renderizar Vídeo
                </Button>
              )}

              {!allScenesHaveMedia && (
                <p className="text-sm text-yellow-400 mt-3">
                  Todas as cenas precisam ter mídia antes de renderizar.
                </p>
              )}
            </CardContent>
          </Card>
        )}

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/4-proposal")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleProceed}
          disabled={render?.status !== "completed"}
          rightIcon={<ArrowRight className="w-4 h-4" />}
          size="lg"
        >
          Continuar para Upload
        </Button>
      </div>
    </div>
  );
}

// Search Media Button Component
function SearchMediaButton({
  sceneText,
  isSearching,
  onSearch,
}: {
  sceneText: string;
  isSearching: boolean;
  onSearch: (query: string) => void;
}) {
  const [showInput, setShowInput] = useState(false);
  const [query, setQuery] = useState("");

  const handleSearch = () => {
    if (query.trim()) {
      onSearch(query);
      setShowInput(false);
      setQuery("");
    }
  };

  // Auto-generate search query from scene text
  const autoSearch = () => {
    const keywords = sceneText.split(" ").slice(0, 5).join(" ");
    onSearch(keywords);
  };

  if (showInput) {
    return (
      <div className="flex gap-1">
        <Input
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="Buscar..."
          className="w-32 text-sm py-1"
          onKeyDown={(e) => e.key === "Enter" && handleSearch()}
        />
        <Button size="sm" onClick={handleSearch}>
          <Search className="w-4 h-4" />
        </Button>
      </div>
    );
  }

  return (
    <div className="flex gap-1">
      <Button
        size="sm"
        variant="outline"
        onClick={autoSearch}
        isLoading={isSearching}
      >
        <Search className="w-4 h-4" />
      </Button>
      <Button
        size="sm"
        variant="ghost"
        onClick={() => setShowInput(true)}
        title="Busca personalizada"
      >
        <Plus className="w-4 h-4" />
      </Button>
    </div>
  );
}

```

---
#### `app/step/6-upload/page.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import Card, { CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import { useWorkflowStore } from "@/lib/store";
import { checkAPIKeys } from "@/lib/api-keys";
import { APIKeyStatus } from "@/types";
import { downloadJSON } from "@/lib/utils";
import {
  Upload,
  ArrowLeft,
  AlertCircle,
  Play,
  Youtube,
  FileVideo,
  FileText,
  Tag,
  Image,
  Download,
  ExternalLink,
  RefreshCw,
} from "lucide-react";

export default function Step6Upload() {
  const router = useRouter();
  const { context, proposal, storyboard, render, upload, setUpload, resetWorkflow } =
    useWorkflowStore();

  const [apiKeyStatus, setApiKeyStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingKeys] = useState(true);
  const [isUploading, setIsUploading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load API keys
  useEffect(() => {
    checkAPIKeys().then((status) => {
      setApiKeyStatus(status);
      setIsLoadingKeys(false);
    });
  }, []);

  // Redirect if no render
  useEffect(() => {
    if (!context || !proposal || !render?.videoUrl) {
      router.push("/step/5-studio");
    }
  }, [context, proposal, render, router]);

  const handleUpload = async () => {
    if (!proposal || !render) return;
    setIsUploading(true);
    setError(null);

    try {
      // Note: Real YouTube upload requires OAuth2 authentication
      // This is a simulation showing what the upload would do
      const selectedTitle = proposal.titlesAndThumbs.variations.find(
        (v) => v.id === proposal.titlesAndThumbs.selectedVariation
      );

      const response = await fetch("/api/youtube/upload", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          proposalId: proposal.id,
          renderId: render.id,
          videoUrl: render.videoUrl,
          title: selectedTitle?.title || context?.theme || "Video",
          description: proposal.description.content,
          tags: proposal.tags.items,
          thumbnailUrl: selectedTitle?.thumbnailUrl,
          uploadSetup: proposal.uploadSetup,
          accessToken: "", // Would come from OAuth2 flow
        }),
      });

      if (!response.ok) throw new Error((await response.json()).error);
      const uploadData = await response.json();
      setUpload(uploadData);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao fazer upload");
    } finally {
      setIsUploading(false);
    }
  };

  const exportAllData = () => {
    const exportData = {
      context,
      proposal,
      storyboard,
      render,
      upload,
      exportedAt: new Date().toISOString(),
    };
    downloadJSON(exportData, `orion-export-${Date.now()}.json`);
  };

  const handleStartNew = () => {
    if (confirm("Tem certeza que deseja iniciar um novo projeto? Todos os dados serão perdidos.")) {
      resetWorkflow();
      router.push("/step/1-input");
    }
  };

  if (!context || !proposal || !render) {
    return null;
  }

  const selectedTitle = proposal.titlesAndThumbs.variations.find(
    (v) => v.id === proposal.titlesAndThumbs.selectedVariation
  );

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-white mb-2">
          Finalização e Upload
        </h1>
        <p className="text-muted">
          Revise seu vídeo e envie para o YouTube.
        </p>
      </div>

        {/* Error Alert */}
        {error && (
          <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3">
            <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0" />
            <p className="text-red-300">{error}</p>
            <button onClick={() => setError(null)} className="ml-auto text-red-400 hover:text-red-300">
              ×
            </button>
          </div>
        )}

        {/* Video Preview */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Play className="w-5 h-5 text-green-500" />
              Preview do Vídeo
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="aspect-video bg-black rounded-lg overflow-hidden">
              <video src={render.videoUrl || undefined} controls className="w-full h-full" />
            </div>
          </CardContent>
        </Card>

        {/* Metadata Summary */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Title & Thumbnail */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Image className="w-5 h-5 text-purple-500" />
                Título e Thumbnail
              </CardTitle>
            </CardHeader>
            <CardContent>
              {selectedTitle ? (
                <div className="space-y-4">
                  <div>
                    <p className="text-sm text-muted mb-1">Título</p>
                    <p className="text-lg font-medium text-white">{selectedTitle.title}</p>
                  </div>
                  {selectedTitle.thumbnailUrl && (
                    <div>
                      <p className="text-sm text-muted mb-2">Thumbnail</p>
                      <img
                        src={selectedTitle.thumbnailUrl}
                        alt={selectedTitle.title}
                        className="rounded-lg max-w-xs"
                      />
                    </div>
                  )}
                </div>
              ) : (
                <p className="text-muted">Nenhum título selecionado</p>
              )}
            </CardContent>
          </Card>

          {/* Description */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileText className="w-5 h-5 text-blue-500" />
                Descrição
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="max-h-48 overflow-auto">
                <pre className="text-sm text-secondary whitespace-pre-wrap font-sans">
                  {proposal.description.content}
                </pre>
              </div>
            </CardContent>
          </Card>

          {/* Tags */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Tag className="w-5 h-5 text-yellow-500" />
                Tags ({proposal.tags.items.length})
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="flex flex-wrap gap-2 max-h-32 overflow-auto">
                {proposal.tags.items.map((tag, i) => (
                  <Badge key={i} variant="default">
                    {tag}
                  </Badge>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Upload Settings */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <FileVideo className="w-5 h-5 text-green-500" />
                Configurações de Upload
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-2 gap-3 text-sm">
                <div>
                  <p className="text-muted">Categoria</p>
                  <p className="text-white">{getCategoryName(proposal.uploadSetup.category)}</p>
                </div>
                <div>
                  <p className="text-muted">Idioma</p>
                  <p className="text-white">{getLanguageName(proposal.uploadSetup.language)}</p>
                </div>
                <div>
                  <p className="text-muted">Licença</p>
                  <p className="text-white">
                    {proposal.uploadSetup.license === "youtube"
                      ? "YouTube Standard"
                      : "Creative Commons"}
                  </p>
                </div>
                <div>
                  <p className="text-muted">Para Crianças</p>
                  <p className="text-white">{proposal.uploadSetup.madeForKids ? "Sim" : "Não"}</p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Upload Section */}
        <Card className={upload?.status === "published" ? "border-green-500/50" : ""}>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Youtube className="w-5 h-5 text-red-500" />
              Upload para YouTube
            </CardTitle>
            <CardDescription>
              Envie seu vídeo diretamente para o YouTube.
            </CardDescription>
          </CardHeader>
          <CardContent>
            {!apiKeyStatus?.youtube ? (
              <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                <p className="text-yellow-300 text-sm">
                  YouTube API não configurada. Adicione as chaves YOUTUBE_API_KEY e
                  YOUTUBE_CLIENT_ID/SECRET para habilitar o upload.
                </p>
              </div>
            ) : upload ? (
              <div className="space-y-4">
                <div className="flex items-center gap-4">
                  <Badge
                    variant={
                      upload.status === "published"
                        ? "success"
                        : upload.status === "error"
                        ? "error"
                        : "info"
                    }
                  >
                    {upload.status === "uploading"
                      ? "Enviando..."
                      : upload.status === "processing"
                      ? "Processando..."
                      : upload.status === "published"
                      ? "Publicado!"
                      : upload.status === "error"
                      ? "Erro"
                      : "Pendente"}
                  </Badge>
                </div>

                {upload.youtubeUrl && (
                  <div className="p-4 bg-green-500/10 border border-green-500/20 rounded-lg">
                    <p className="text-green-300 mb-2">Vídeo publicado com sucesso!</p>
                    <a
                      href={upload.youtubeUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="inline-flex items-center gap-2 text-green-400 hover:text-green-300"
                    >
                      <ExternalLink className="w-4 h-4" />
                      Ver no YouTube
                    </a>
                  </div>
                )}

                {upload.error && (
                  <div className="p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                    <p className="text-red-300 text-sm">{upload.error}</p>
                  </div>
                )}
              </div>
            ) : (
              <div className="space-y-4">
                <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
                  <p className="text-blue-300 text-sm">
                    <strong>Nota:</strong> O upload para o YouTube requer autenticação OAuth2.
                    Em produção, você será redirecionado para autorizar o acesso ao seu canal.
                  </p>
                </div>
                <Button
                  onClick={handleUpload}
                  isLoading={isUploading}
                  leftIcon={<Upload className="w-4 h-4" />}
                  size="lg"
                >
                  Confirmar e Enviar para o YouTube
                </Button>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Export & Actions */}
        <Card>
          <CardHeader>
            <CardTitle>Exportar Dados</CardTitle>
            <CardDescription>
              Baixe todos os dados do projeto em formato JSON.
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="flex flex-wrap gap-3">
              <Button variant="outline" onClick={exportAllData} leftIcon={<Download className="w-4 h-4" />}>
                Exportar Projeto Completo
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  downloadJSON(proposal, `proposal-${proposal.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
              >
                Exportar Proposta
              </Button>
              <Button
                variant="outline"
                onClick={() =>
                  storyboard && downloadJSON(storyboard, `storyboard-${storyboard.id}.json`)
                }
                leftIcon={<Download className="w-4 h-4" />}
                disabled={!storyboard}
              >
                Exportar Storyboard
              </Button>
            </div>
          </CardContent>
        </Card>

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={() => router.push("/step/5-studio")}
          leftIcon={<ArrowLeft className="w-4 h-4" />}
        >
          Voltar
        </Button>

        <Button
          onClick={handleStartNew}
          variant="secondary"
          leftIcon={<RefreshCw className="w-4 h-4" />}
        >
          Iniciar Novo Projeto
        </Button>
      </div>
    </div>
  );
}

function getCategoryName(categoryId: string): string {
  const categories: Record<string, string> = {
    "1": "Film & Animation",
    "2": "Autos & Vehicles",
    "10": "Music",
    "15": "Pets & Animals",
    "17": "Sports",
    "19": "Travel & Events",
    "20": "Gaming",
    "22": "People & Blogs",
    "23": "Comedy",
    "24": "Entertainment",
    "25": "News & Politics",
    "26": "Howto & Style",
    "27": "Education",
    "28": "Science & Technology",
  };
  return categories[categoryId] || categoryId;
}

function getLanguageName(languageCode: string): string {
  const languages: Record<string, string> = {
    pt: "Português",
    en: "English",
    es: "Español",
  };
  return languages[languageCode] || languageCode;
}

```

---
#### `app/step/layout.tsx`

```
'use client';

import WorkflowTracker from "@/components/workflow/WorkflowTracker";
import { Suspense } from "react";

export default function StepLayout({ children }: { children: React.ReactNode }) {
  return (
    // FRAGMENT <> USADO PARA EVITAR ELEMENTO DIV EXTRA
    // O <Layout> FOI REMOVIDO PARA CORRIGIR A DUPLICAÇÃO
    <>
      <Suspense fallback={
        <div className="flex items-center justify-center h-full">
          <p>Carregando...</p>
        </div>
      }>
        <WorkflowTracker />
        <div className="pt-8">
          {children}
        </div>
      </Suspense>
    </>
  );
}

```

---
#### `app/workflow/page.tsx`

```
"use client";

import { useState, useEffect, Suspense } from 'react';
import { ArrowRight, AlertCircle, CheckCircle2, Circle, Lock } from 'lucide-react';
import { useWorkflowStore } from '@/lib/store';
import { useRouter, useSearchParams } from 'next/navigation';

// Simplified workflow steps for current step info
const workflowStepsInfo = [
  { step: 1, title: "Entrada", description: "Defina o tema e configure o projeto", path: "/step/1-input" },
  { step: 2, title: "Inteligência", description: "Pesquisa e análise de conteúdo", path: "/step/2-research" },
  { step: 4, title: "Proposta", description: "Geração de roteiro e conteúdo", path: "/step/4-proposal" },
  { step: 5, title: "Studio", description: "Seleção de mídia e storyboard", path: "/step/5-studio" },
  { step: 6, title: "Upload", description: "Publicação no YouTube", path: "/step/6-upload" },
];

function WorkflowContent() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const {
    currentStep,
    resetWorkflow,
    context,
    research,
    proposal,
  } = useWorkflowStore();
  const [showResetDialog, setShowResetDialog] = useState(false);

  useEffect(() => {
    const continueParam = searchParams.get('continue');
    const hasData = context !== null || research !== null || proposal !== null;

    if (!continueParam && hasData) {
      setShowResetDialog(true);
    }

    if (continueParam === 'false') {
      resetWorkflow();
      setShowResetDialog(false);
    }
  }, [searchParams, resetWorkflow, context, research, proposal]);

  const currentStepData = workflowStepsInfo.find(s => s.step === currentStep);

  return (
    <div className="w-full">
      {/* Reset Dialog */}
      {showResetDialog && (
        <>
          <div className="fixed inset-0 bg-black/70 backdrop-blur-sm z-50" onClick={() => setShowResetDialog(false)} />
          <div className="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md p-6 bg-layer-2 border border-warning/30 rounded-2xl shadow-2xl">
            <div className="flex items-start gap-4 mb-6">
              <div className="w-12 h-12 rounded-xl bg-warning/10 border border-warning/20 flex items-center justify-center flex-shrink-0">
                <AlertCircle className="w-6 h-6 text-warning" />
              </div>
              <div>
                <h3 className="text-lg font-semibold text-white mb-2">Workflow em Andamento</h3>
                <p className="text-sm text-muted">
                  Detectamos um workflow anterior. Deseja continuar de onde parou ou iniciar um novo?
                </p>
              </div>
            </div>
            <div className="flex gap-3">
              <button
                onClick={() => {
                  setShowResetDialog(false);
                  if(currentStepData) router.push(currentStepData.path);
                }}
                className="flex-1 px-4 py-2.5 rounded-lg bg-layer-1 border border-default hover:bg-surface-elevated text-text-primary transition-all"
              >
                Continuar
              </button>
              <button
                onClick={() => {
                  resetWorkflow();
                  setShowResetDialog(false);
                  router.push('/workflow?continue=false');
                }}
                className="flex-1 px-4 py-2.5 rounded-lg bg-warning/10 border border-warning/30 hover:bg-warning/20 text-warning transition-all"
              >
                Iniciar Novo
              </button>
            </div>
          </div>
        </>
      )}

      {/* Header */}
      <div className="mb-12">
        <h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
          WorkFlow de Produção
        </h1>
        <p className="text-muted">Siga as etapas para criar seu vídeo automaticamente.</p>
      </div>

      {/* Current Step Info */}
      <div className="bg-gradient-to-br from-indigo-900/20 to-purple-900/20 border border-indigo-500/30 rounded-xl p-6 mb-8">
        <div className="flex items-start gap-4">
          <div className="flex-1">
            <h3 className="text-lg font-bold text-white mb-2">
              Etapa Atual: {currentStepData?.title}
            </h3>
            <p className="text-sm text-muted mb-4">
              {currentStepData?.description}
            </p>
            <button
              onClick={() => {
                if (currentStepData) {
                  router.push(currentStepData.path);
                }
              }}
              className="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium rounded-lg transition-colors inline-flex items-center gap-2"
            >
              Ir para a Etapa Atual
              <ArrowRight className="w-4 h-4" />
            </button>
          </div>
        </div>
      </div>

      {/* Instructions */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center mb-3">
            <CheckCircle2 className="w-6 h-6 text-green-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Completadas</h4>
          <p className="text-sm text-muted">Marcadas em verde na barra de progresso acima.</p>
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-indigo-500/10 rounded-lg flex items-center justify-center mb-3">
            <Circle className="w-6 h-6 text-indigo-400" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapa Atual</h4>
          <p className="text-sm text-muted">Destacada e pulsando na barra de progresso.</p>
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="w-10 h-10 bg-layer-3/50 rounded-lg flex items-center justify-center mb-3">
            <Lock className="w-6 h-6 text-muted" />
          </div>
          <h4 className="font-medium text-white mb-2">Etapas Bloqueadas</h4>
          <p className="text-sm text-muted">Complete as etapas anteriores para desbloquear.</p>
        </div>
      </div>
    </div>
  );
}

export default function WorkflowPage() {
  return (
    <Suspense fallback={
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <div className="w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4" />
          <p className="text-foreground-muted">Carregando workflow...</p>
        </div>
      </div>
    }>
      <WorkflowContent />
    </Suspense>
  );
}

```

---
#### `components/AIModelSelector.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Select from "@/components/ui/Select";
import { AIProvider, AIModelOption, APIKeyStatus } from "@/types";
import { getModelsForProvider, getProviderName } from "@/lib/ai";
import { AlertCircle } from "lucide-react";

interface AIModelSelectorProps {
  selectedProvider: AIProvider | null;
  selectedModel: string | null;
  onProviderChange: (provider: AIProvider) => void;
  onModelChange: (model: string) => void;
  apiKeyStatus?: APIKeyStatus;
  label?: string;
  compact?: boolean;
}

export default function AIModelSelector({
  selectedProvider,
  selectedModel,
  onProviderChange,
  onModelChange,
  apiKeyStatus,
  label = "AI Model",
  compact = false,
}: AIModelSelectorProps) {
  const [models, setModels] = useState<AIModelOption[]>([]);

  const providers: { value: AIProvider; label: string; available: boolean }[] = [
    {
      value: "openai",
      label: getProviderName("openai"),
      available: apiKeyStatus?.openai ?? true,
    },
    {
      value: "google",
      label: getProviderName("google"),
      available: apiKeyStatus?.google ?? true,
    },
    {
      value: "anthropic",
      label: getProviderName("anthropic"),
      available: apiKeyStatus?.anthropic ?? true,
    },
  ];

  useEffect(() => {
    if (selectedProvider) {
      const providerModels = getModelsForProvider(selectedProvider);
      setModels(providerModels);

      // Auto-select first model if none selected
      if (!selectedModel && providerModels.length > 0) {
        onModelChange(providerModels[0].id);
      }
    }
  }, [selectedProvider, selectedModel, onModelChange]);

  const availableProviders = providers.filter((p) => p.available);
  const hasAnyProvider = availableProviders.length > 0;

  if (!hasAnyProvider) {
    return (
      <div className="flex items-center gap-2 text-yellow-500 text-sm">
        <AlertCircle className="w-4 h-4" />
        <span>No AI provider configured. Please add API keys.</span>
      </div>
    );
  }

  if (compact) {
    return (
      <div className="flex items-center gap-2">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.label,
            disabled: !p.available,
          }))}
          placeholder="Provider"
          className="w-36"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Model"
            className="w-40"
          />
        )}
      </div>
    );
  }

  return (
    <div className="space-y-3">
      {label && (
        <label className="block text-sm font-medium text-gray-300">
          {label}
        </label>
      )}
      <div className="flex flex-wrap gap-3">
        <Select
          value={selectedProvider || ""}
          onChange={(value) => onProviderChange(value as AIProvider)}
          options={availableProviders.map((p) => ({
            value: p.value,
            label: p.available ? p.label : `${p.label} (not configured)`,
            disabled: !p.available,
          }))}
          placeholder="Select provider..."
          className="w-48"
        />
        {selectedProvider && (
          <Select
            value={selectedModel || ""}
            onChange={onModelChange}
            options={models.map((m) => ({
              value: m.id,
              label: m.name,
            }))}
            placeholder="Select model..."
            className="w-48"
          />
        )}
      </div>
      {selectedProvider && !providers.find((p) => p.value === selectedProvider)?.available && (
        <p className="text-sm text-yellow-500 flex items-center gap-1">
          <AlertCircle className="w-4 h-4" />
          This provider is not configured. Add the API key in settings.
        </p>
      )}
    </div>
  );
}

```

---
#### `components/ApiKeysModal.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Modal from "@/components/ui/Modal";
import Button from "@/components/ui/Button";
import Input from "@/components/ui/Input";
import Badge from "@/components/ui/Badge";
import { useUIStore } from "@/lib/store";
import { useAPIKeysStore, StoredAPIKeys } from "@/lib/api-keys-store";
import { APIKeyStatus } from "@/types";
import { checkAPIKeys } from "@/lib/api-keys";
import ModelsExplorer from "@/components/ModelsExplorer";
import {
  Check,
  X,
  Loader2,
  ExternalLink,
  Eye,
  EyeOff,
  Save,
  TestTube,
  Trash2,
  Key,
  Cpu,
  ChevronRight,
} from "lucide-react";

interface KeyConfig {
  key: keyof StoredAPIKeys;
  name: string;
  envVar: string;
  docsUrl: string;
  placeholder: string;
  required: boolean;
  dependsOn?: keyof StoredAPIKeys;
}

const API_KEYS_CONFIG: KeyConfig[] = [
  {
    key: "youtube_api_key",
    name: "YouTube Data API Key",
    envVar: "YOUTUBE_API_KEY",
    docsUrl: "https://console.cloud.google.com/apis/credentials",
    placeholder: "AIza...",
    required: true,
  },
  {
    key: "youtube_channel_id",
    name: "YouTube Channel ID",
    envVar: "YOUTUBE_CHANNEL_ID",
    docsUrl: "https://www.youtube.com/account_advanced",
    placeholder: "UC...",
    required: true,
    dependsOn: "youtube_api_key",
  },
  {
    key: "openai_api_key",
    name: "OpenAI",
    envVar: "OPENAI_API_KEY",
    docsUrl: "https://platform.openai.com/api-keys",
    placeholder: "sk-...",
    required: false,
  },
  {
    key: "google_api_key",
    name: "Google Gemini",
    envVar: "GOOGLE_GENERATIVE_AI_API_KEY",
    docsUrl: "https://aistudio.google.com/apikey",
    placeholder: "AIza...",
    required: false,
  },
  {
    key: "anthropic_api_key",
    name: "Anthropic Claude",
    envVar: "ANTHROPIC_API_KEY",
    docsUrl: "https://console.anthropic.com/settings/keys",
    placeholder: "sk-ant-...",
    required: false,
  },
  {
    key: "pexels_api_key",
    name: "Pexels",
    envVar: "PEXELS_API_KEY",
    docsUrl: "https://www.pexels.com/api/",
    placeholder: "...",
    required: false,
  },
  {
    key: "pixabay_api_key",
    name: "Pixabay",
    envVar: "PIXABAY_API_KEY",
    docsUrl: "https://pixabay.com/api/docs/",
    placeholder: "...",
    required: false,
  },
  {
    key: "unsplash_api_key",
    name: "Unsplash",
    envVar: "UNSPLASH_ACCESS_KEY",
    docsUrl: "https://unsplash.com/developers",
    placeholder: "...",
    required: false,
  },
  {
    key: "json2video_api_key",
    name: "JSON2Video",
    envVar: "JSON2VIDEO_API_KEY",
    docsUrl: "https://json2video.com/",
    placeholder: "...",
    required: false,
  },
  {
    key: "elevenlabs_api_key",
    name: "ElevenLabs",
    envVar: "ELEVENLABS_API_KEY",
    docsUrl: "https://elevenlabs.io/",
    placeholder: "...",
    required: false,
  },
  {
    key: "tavily_api_key",
    name: "Tavily (Pesquisa)",
    envVar: "TAVILY_API_KEY",
    docsUrl: "https://tavily.com/",
    placeholder: "tvly-...",
    required: false,
  },
  {
    key: "replicate_api_key",
    name: "Replicate",
    envVar: "REPLICATE_API_TOKEN",
    docsUrl: "https://replicate.com/account/api-tokens",
    placeholder: "r8_...",
    required: false,
  },
  {
    key: "stability_api_key",
    name: "Stability AI",
    envVar: "STABILITY_API_KEY",
    docsUrl: "https://platform.stability.ai/",
    placeholder: "sk-...",
    required: false,
  },
];

export default function ApiKeysModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const { keys, testedKeys, setKey, markKeyTested, clearKey, clearAllKeys } =
    useAPIKeysStore();

  const [serverStatus, setServerStatus] = useState<APIKeyStatus | null>(null);
  const [, setIsLoadingServer] = useState(true);
  const [testingKey, setTestingKey] = useState<string | null>(null);
  const [testingAll, setTestingAll] = useState(false);
  const [showPassword, setShowPassword] = useState<Record<string, boolean>>({});
  const [testResults, setTestResults] = useState<Record<string, { success: boolean; message: string }>>({});

  // Carregar status das chaves do servidor
  useEffect(() => {
    if (isApiKeyModalOpen) {
      setIsLoadingServer(true);
      checkAPIKeys().then((status) => {
        setServerStatus(status);
        setIsLoadingServer(false);
      });
    }
  }, [isApiKeyModalOpen]);

  const testSingleKey = async (config: KeyConfig) => {
    const value = keys[config.key];
    if (!value) {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Chave não preenchida" },
      }));
      return;
    }

    setTestingKey(config.key);
    try {
      const response = await fetch("/api/config/test-key", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          keyType: config.key,
          keyValue: value,
          channelId: config.key === "youtube_api_key" ? keys.youtube_channel_id : undefined,
        }),
      });

      const result = await response.json();
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: result.success, message: result.message },
      }));
      markKeyTested(config.key, result.success);
    } catch {
      setTestResults((prev) => ({
        ...prev,
        [config.key]: { success: false, message: "Erro ao testar" },
      }));
      markKeyTested(config.key, false);
    } finally {
      setTestingKey(null);
    }
  };

  const testAllKeys = async () => {
    setTestingAll(true);
    const keysToTest = API_KEYS_CONFIG.filter((config) => keys[config.key]);

    for (const config of keysToTest) {
      await testSingleKey(config);
    }
    setTestingAll(false);
  };

  const toggleShowPassword = (key: string) => {
    setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));
  };

  const getKeyStatus = (config: KeyConfig) => {
    const hasLocalKey = !!keys[config.key];
    const localKeyTested = testedKeys[config.key];
    const serverKey = config.key.replace("_api_key", "").replace("_", "") as keyof APIKeyStatus;
    const hasServerKey = serverStatus?.[serverKey] ?? false;

    if (hasLocalKey && localKeyTested) {
      return "valid";
    } else if (hasLocalKey) {
      return "pending";
    } else if (hasServerKey) {
      return "server";
    }
    return "missing";
  };

  const configuredCount = API_KEYS_CONFIG.filter((config) => {
    const status = getKeyStatus(config);
    return status === "valid" || status === "server";
  }).length;

  const [activeTab, setActiveTab] = useState<'keys' | 'models'>('keys');
  const [selectedProvider, setSelectedProvider] = useState<string | null>(null);

  // Provedores de IA para explorar modelos
  const AI_PROVIDERS = [
    { key: 'openai', name: 'OpenAI', icon: '🤖', apiKeyField: 'openai_api_key' },
    { key: 'anthropic', name: 'Anthropic', icon: '🔮', apiKeyField: 'anthropic_api_key' },
    { key: 'gemini', name: 'Google Gemini', icon: '🧠', apiKeyField: 'google_api_key' },
    { key: 'elevenlabs', name: 'ElevenLabs', icon: '🎤', apiKeyField: 'elevenlabs_api_key' },
    { key: 'pexels', name: 'Pexels', icon: '📷', apiKeyField: 'pexels_api_key' },
    { key: 'pixabay', name: 'Pixabay', icon: '🖼️', apiKeyField: 'pixabay_api_key' },
    { key: 'youtube', name: 'YouTube', icon: '📺', apiKeyField: 'youtube_api_key' },
    { key: 'tavily', name: 'Tavily', icon: '🔍', apiKeyField: 'tavily_api_key' },
    { key: 'json2video', name: 'JSON2Video', icon: '🎬', apiKeyField: 'json2video_api_key' },
  ];

  const isProviderConnected = (apiKeyField: string) => {
    const hasLocalKey = !!keys[apiKeyField as keyof StoredAPIKeys];
    const serverKey = apiKeyField.replace("_api_key", "").replace("_", "") as keyof APIKeyStatus;
    const hasServerKey = serverStatus?.[serverKey] ?? false;
    return hasLocalKey || hasServerKey;
  };

  return (
    <Modal
      isOpen={isApiKeyModalOpen}
      onClose={closeApiKeyModal}
      title="Configurar API Keys"
      size="xl"
    >
      <div className="space-y-6">
        {/* Tabs */}
        <div className="flex border-b border-subtle">
          <button
            onClick={() => { setActiveTab('keys'); setSelectedProvider(null); }}
            className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${
              activeTab === 'keys'
                ? 'text-indigo-400 border-b-2 border-indigo-400'
                : 'text-muted hover:text-gray-200'
            }`}
          >
            <Key className="w-4 h-4" />
            API Keys
          </button>
          <button
            onClick={() => setActiveTab('models')}
            className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${
              activeTab === 'models'
                ? 'text-indigo-400 border-b-2 border-indigo-400'
                : 'text-muted hover:text-gray-200'
            }`}
          >
            <Cpu className="w-4 h-4" />
            Modelos Disponíveis
          </button>
        </div>

        {/* Tab: Modelos */}
        {activeTab === 'models' && (
          <div className="space-y-4">
            {!selectedProvider ? (
              <>
                <p className="text-sm text-muted">
                  Selecione um provedor para explorar os modelos disponíveis:
                </p>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                  {AI_PROVIDERS.map(provider => {
                    const connected = isProviderConnected(provider.apiKeyField);
                    return (
                      <button
                        key={provider.key}
                        onClick={() => setSelectedProvider(provider.key)}
                        className={`p-4 rounded-lg border transition-all flex items-center gap-3 hover:bg-layer-2/50 ${
                          connected
                            ? 'border-green-500/30 bg-green-900/10'
                            : 'border-subtle bg-layer-2/30'
                        }`}
                      >
                        <span className="text-2xl">{provider.icon}</span>
                        <div className="text-left flex-1">
                          <p className="font-medium text-white text-sm">{provider.name}</p>
                          <p className={`text-xs ${connected ? 'text-green-400' : 'text-muted'}`}>
                            {connected ? 'Conectado' : 'Não configurado'}
                          </p>
                        </div>
                        <ChevronRight className="w-4 h-4 text-muted" />
                      </button>
                    );
                  })}
                </div>
              </>
            ) : (
              <>
                <button
                  onClick={() => setSelectedProvider(null)}
                  className="text-sm text-indigo-400 hover:text-indigo-300 flex items-center gap-1"
                >
                  ← Voltar para lista
                </button>
                <ModelsExplorer
                  provider={selectedProvider}
                  apiKey={keys[AI_PROVIDERS.find(p => p.key === selectedProvider)?.apiKeyField as keyof StoredAPIKeys]}
                  isConnected={isProviderConnected(AI_PROVIDERS.find(p => p.key === selectedProvider)?.apiKeyField || '')}
                />
              </>
            )}
          </div>
        )}

        {/* Tab: API Keys */}
        {activeTab === 'keys' && (
          <>
        {/* Resumo */}
        <div className="flex items-center justify-between p-4 bg-layer-2/50 rounded-lg">
          <div>
            <p className="text-sm text-muted">APIs Configuradas</p>
            <p className="text-2xl font-bold text-white">
              {configuredCount} / {API_KEYS_CONFIG.length}
            </p>
          </div>
          <div className="flex gap-2">
            <Button
              variant="outline"
              size="sm"
              onClick={testAllKeys}
              isLoading={testingAll}
              leftIcon={<TestTube className="w-4 h-4" />}
            >
              Testar Todas
            </Button>
            <Button
              variant="ghost"
              size="sm"
              onClick={clearAllKeys}
              leftIcon={<Trash2 className="w-4 h-4" />}
            >
              Limpar
            </Button>
          </div>
        </div>

        {/* Instruções */}
        <div className="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg">
          <p className="text-sm text-blue-300">
            <strong>Como funciona:</strong> Insira suas API keys abaixo. Elas serão salvas
            na sua sessão do navegador (sessionStorage) e usadas enquanto você estiver
            usando o sistema. As chaves do servidor (.env) têm prioridade.
          </p>
        </div>

        {/* Lista de APIs */}
        <div className="space-y-3 max-h-[50vh] overflow-auto pr-2">
          {API_KEYS_CONFIG.map((config) => {
            const status = getKeyStatus(config);
            const isTestingThis = testingKey === config.key;
            const testResult = testResults[config.key];

            return (
              <div
                key={config.key}
                className="p-4 bg-layer-2/30 rounded-lg border border-subtle"
              >
                <div className="flex items-center justify-between mb-2">
                  <div className="flex items-center gap-2">
                    <span className="font-medium text-white">{config.name}</span>
                    {config.required && (
                      <Badge variant="warning" size="sm">
                        Requerido
                      </Badge>
                    )}
                    {status === "valid" && (
                      <Badge variant="success" size="sm">
                        <Check className="w-3 h-3 mr-1" />
                        Validado
                      </Badge>
                    )}
                    {status === "server" && (
                      <Badge variant="info" size="sm">
                        Servidor
                      </Badge>
                    )}
                    {status === "pending" && (
                      <Badge variant="warning" size="sm">
                        Não testada
                      </Badge>
                    )}
                  </div>
                  <a
                    href={config.docsUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-sm text-primary-400 hover:text-primary-300 flex items-center gap-1"
                  >
                    Obter
                    <ExternalLink className="w-3 h-3" />
                  </a>
                </div>

                <div className="flex gap-2">
                  <div className="flex-1 relative">
                    <Input
                      type={showPassword[config.key] ? "text" : "password"}
                      value={keys[config.key]}
                      onChange={(e) => setKey(config.key, e.target.value)}
                      placeholder={config.placeholder}
                      className="pr-10 font-mono text-sm"
                    />
                    <button
                      type="button"
                      onClick={() => toggleShowPassword(config.key)}
                      className="absolute right-3 top-1/2 -translate-y-1/2 text-muted hover:text-gray-300"
                    >
                      {showPassword[config.key] ? (
                        <EyeOff className="w-4 h-4" />
                      ) : (
                        <Eye className="w-4 h-4" />
                      )}
                    </button>
                  </div>
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => testSingleKey(config)}
                    isLoading={isTestingThis}
                    disabled={!keys[config.key] || testingAll}
                    className="w-24"
                  >
                    {isTestingThis ? (
                      <Loader2 className="w-4 h-4 animate-spin" />
                    ) : (
                      <>
                        <TestTube className="w-4 h-4 mr-1" />
                        Testar
                      </>
                    )}
                  </Button>
                  {keys[config.key] && (
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => clearKey(config.key)}
                      className="px-2"
                    >
                      <X className="w-4 h-4" />
                    </Button>
                  )}
                </div>

                {/* Resultado do teste */}
                {testResult && (
                  <div
                    className={`mt-2 text-sm flex items-center gap-1 ${
                      testResult.success ? "text-green-400" : "text-red-400"
                    }`}
                  >
                    {testResult.success ? (
                      <Check className="w-4 h-4" />
                    ) : (
                      <X className="w-4 h-4" />
                    )}
                    {testResult.message}
                  </div>
                )}

                {/* Info do env var */}
                <p className="text-xs text-muted mt-2 font-mono">
                  ENV: {config.envVar}
                </p>
              </div>
            );
          })}
        </div>

        {/* Requisitos Mínimos */}
        <div className="p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
          <p className="text-sm text-yellow-300">
            <strong>Requisitos mínimos para funcionar:</strong>
          </p>
          <ul className="text-sm text-yellow-300/80 mt-2 list-disc list-inside space-y-1">
            <li>YouTube Data API Key + Channel ID (para sincronização)</li>
            <li>Pelo menos 1 provedor de AI (OpenAI, Google, ou Anthropic)</li>
            <li>Pelo menos 1 provedor de mídia (Pexels, Pixabay, ou Unsplash)</li>
          </ul>
        </div>
          </>
        )}

        {/* Botões de ação */}
        <div className="flex justify-end gap-2 pt-4 border-t border-subtle">
          <Button variant="ghost" onClick={closeApiKeyModal}>
            Fechar
          </Button>
          <Button
            variant="primary"
            onClick={closeApiKeyModal}
            leftIcon={<Save className="w-4 h-4" />}
          >
            Salvar e Fechar
          </Button>
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/AssetCard.tsx`

```
"use client";

import { useState } from "react";
import Card from "@/components/ui/Card";
import Button from "@/components/ui/Button";
import Badge from "@/components/ui/Badge";
import AIModelSelector from "@/components/AIModelSelector";
import { AssetStatus, AIProvider, APIKeyStatus } from "@/types";
import { Check, RefreshCw, Pencil, Loader2, AlertCircle } from "lucide-react";

interface AssetCardProps {
  title: string;
  status: AssetStatus;
  children: React.ReactNode;
  isEditing?: boolean;
  onEdit?: () => void;
  onRegenerate?: (provider: AIProvider, model: string) => void;
  onApprove?: () => void;
  onCancelEdit?: () => void;
  onSaveEdit?: () => void;
  editContent?: React.ReactNode;
  apiKeyStatus?: APIKeyStatus;
  error?: string;
  isGenerating?: boolean;
}

export default function AssetCard({
  title,
  status,
  children,
  isEditing = false,
  onEdit,
  onRegenerate,
  onApprove,
  onCancelEdit,
  onSaveEdit,
  editContent,
  apiKeyStatus,
  error,
  isGenerating = false,
}: AssetCardProps) {
  const [showRegenerate, setShowRegenerate] = useState(false);
  const [selectedProvider, setSelectedProvider] = useState<AIProvider | null>(null);
  const [selectedModel, setSelectedModel] = useState<string | null>(null);

  const getStatusBadge = () => {
    switch (status) {
      case "pending":
        return <Badge variant="default">Pendente</Badge>;
      case "generating":
        return <Badge variant="info">Gerando...</Badge>;
      case "ready":
        return <Badge variant="warning">Aguardando Aprovação</Badge>;
      case "approved":
        return <Badge variant="success">Aprovado</Badge>;
      case "error":
        return <Badge variant="error">Erro</Badge>;
      default:
        return null;
    }
  };

  const handleRegenerate = () => {
    if (selectedProvider && selectedModel && onRegenerate) {
      onRegenerate(selectedProvider, selectedModel);
      setShowRegenerate(false);
    }
  };

  return (
    <Card className="relative">
      {/* Header */}
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-3">
          <h3 className="text-lg font-semibold text-white">{title}</h3>
          {getStatusBadge()}
        </div>
      </div>

      {/* Error message */}
      {error && (
        <div className="mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span className="text-sm">{error}</span>
        </div>
      )}

      {/* Content */}
      <div className="mb-4">
        {isGenerating ? (
          <div className="flex items-center justify-center py-8">
            <Loader2 className="w-8 h-8 animate-spin text-primary-500" />
          </div>
        ) : isEditing ? (
          editContent
        ) : (
          children
        )}
      </div>

      {/* Regenerate AI Selector */}
      {showRegenerate && (
        <div className="mb-4 p-4 bg-layer-2/50 rounded-lg space-y-3">
          <AIModelSelector
            selectedProvider={selectedProvider}
            selectedModel={selectedModel}
            onProviderChange={setSelectedProvider}
            onModelChange={setSelectedModel}
            apiKeyStatus={apiKeyStatus}
            label="Selecione o modelo para regenerar"
          />
          <div className="flex gap-2">
            <Button
              size="sm"
              variant="primary"
              onClick={handleRegenerate}
              disabled={!selectedProvider || !selectedModel}
            >
              Regenerar
            </Button>
            <Button
              size="sm"
              variant="ghost"
              onClick={() => setShowRegenerate(false)}
            >
              Cancelar
            </Button>
          </div>
        </div>
      )}

      {/* Actions */}
      <div className="flex flex-wrap gap-2">
        {isEditing ? (
          <>
            <Button size="sm" variant="success" onClick={onSaveEdit}>
              Salvar
            </Button>
            <Button size="sm" variant="ghost" onClick={onCancelEdit}>
              Cancelar
            </Button>
          </>
        ) : (
          <>
            {status !== "approved" && status !== "generating" && onEdit && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<Pencil className="w-4 h-4" />}
                onClick={onEdit}
              >
                Editar
              </Button>
            )}
            {status !== "approved" && status !== "generating" && onRegenerate && (
              <Button
                size="sm"
                variant="outline"
                leftIcon={<RefreshCw className="w-4 h-4" />}
                onClick={() => setShowRegenerate(true)}
              >
                Regerar
              </Button>
            )}
            {status === "ready" && onApprove && (
              <Button
                size="sm"
                variant="success"
                leftIcon={<Check className="w-4 h-4" />}
                onClick={onApprove}
              >
                Aprovar
              </Button>
            )}
            {status === "approved" && (
              <span className="flex items-center gap-1 text-green-400 text-sm">
                <Check className="w-4 h-4" />
                Aprovado
              </span>
            )}
          </>
        )}
      </div>
    </Card>
  );
}

```

---
#### `components/ConnectApisModal.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { X, Check, AlertCircle, RefreshCw, Key, Save, Server, Monitor, Trash2 } from 'lucide-react';
import { useAPIKeysStore, StoredAPIKeys } from '@/lib/api-keys-store';
import { useUIStore } from '@/lib/store';

// Mapeamento EXATO com lib/api-keys-store.ts
const KEY_MAP: Record<string, keyof StoredAPIKeys> = {
  openai: "openai_api_key",
  gemini: "google_api_key",
  anthropic: "anthropic_api_key",
  youtube: "youtube_api_key",
  pexels: "pexels_api_key",
  pixabay: "pixabay_api_key",
  elevenlabs: "elevenlabs_api_key",
  tavily: "tavily_api_key",
  json2video: "json2video_api_key"
};

const API_NAMES: Record<string, string> = {
  openai: "OpenAI (GPT-4)",
  gemini: "Google Gemini",
  anthropic: "Anthropic Claude",
  youtube: "YouTube Data API",
  pexels: "Pexels Media",
  pixabay: "Pixabay Media",
  elevenlabs: "ElevenLabs Voice",
  tavily: "Tavily Search",
  json2video: "JSON2Video"
};

export default function ConnectApisModal() {
  const { isApiKeyModalOpen, closeApiKeyModal } = useUIStore();
  const isOpen = isApiKeyModalOpen;
  const onClose = closeApiKeyModal;
  const [loading, setLoading] = useState(true);
  const [serverKeys, setServerKeys] = useState<Record<string, boolean>>({});
  const [showEdit, setShowEdit] = useState<string | null>(null);
  const [manualInput, setManualInput] = useState("");
  const [mounted, setMounted] = useState(false);
  
  const { keys: localKeys, setKey, clearKey } = useAPIKeysStore();

  useEffect(() => {
    setMounted(true);
  }, []);

  useEffect(() => {
    if (isOpen) {
      checkServerKeys();
    }
  }, [isOpen]);

  const checkServerKeys = async () => {
    setLoading(true);
    try {
      const res = await fetch('/api/status');
      const data = await res.json();
      setServerKeys(data);
    } catch (e) {
      console.error(e);
    } finally {
      setLoading(false);
    }
  };

  const handleSaveKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      setKey(storeKeyName, manualInput);
      setShowEdit(null);
      setManualInput("");
    }
  };

  const handleClearKey = (visualKey: string) => {
    const storeKeyName = KEY_MAP[visualKey];
    if (storeKeyName) {
      clearKey(storeKeyName);
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-[99999] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-200">
      <div className="w-full max-w-3xl bg-[#09090b] border border-subtle rounded-xl text-white shadow-2xl flex flex-col max-h-[85vh]">
        
        <div className="flex items-center justify-between p-6 border-b border-subtle bg-layer-1/50 rounded-t-xl">
          <div>
            <h2 className="text-xl font-bold flex items-center gap-2">
              <Key className="w-5 h-5 text-indigo-500" />
              Central de Conexões
            </h2>
            <p className="text-muted text-sm">Gerencie chaves do Servidor (.env) ou Locais (Navegador).</p>
          </div>
          <button onClick={onClose} className="p-2 hover:bg-layer-2 rounded-full transition-colors cursor-pointer">
            <X className="w-6 h-6 text-muted hover:text-white" />
          </button>
        </div>

        <div className="p-6 overflow-y-auto custom-scrollbar space-y-4">
          {loading ? (
             <div className="flex flex-col items-center justify-center py-12 text-zinc-500 gap-3">
               <RefreshCw className="animate-spin w-8 h-8 text-indigo-500" />
               <p>Verificando status...</p>
             </div>
          ) : (
            Object.keys(API_NAMES).map((key) => {
              const storeKeyName = KEY_MAP[key];
              const isServerConnected = serverKeys[key];
              const hasLocalKey = mounted && !!localKeys[storeKeyName];
              const isLocalConnected = hasLocalKey;
              const isConnected = isServerConnected || isLocalConnected;
              const isEditing = showEdit === key;

              return (
                <div key={key} className={`border rounded-lg transition-all ${isConnected ? 'border-green-900/30 bg-green-900/5' : 'border-subtle bg-layer-1/30'}`}>
                  <div className="flex items-center justify-between p-4">
                    <div className="flex items-center gap-3">
                      <div className={`p-2 rounded-lg ${isConnected ? 'bg-green-500/10' : 'bg-layer-2'}`}>
                        {isConnected ? <Check className="w-5 h-5 text-green-500" /> : <AlertCircle className="w-5 h-5 text-zinc-500" />}
                      </div>
                      <div>
                        <h3 className="font-semibold text-zinc-200">{API_NAMES[key]}</h3>
                        <div className="flex items-center gap-2 mt-1">
                          {isServerConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-layer-2 px-2 py-0.5 rounded text-zinc-300 border border-subtle">
                              <Server className="w-3 h-3" /> Servidor
                            </span>
                          )}
                          {isLocalConnected && (
                            <span className="flex items-center gap-1 text-[10px] bg-indigo-900/30 px-2 py-0.5 rounded text-indigo-300 border border-indigo-500/20">
                              <Monitor className="w-3 h-3" /> Local
                            </span>
                          )}
                          {!isConnected && <span className="text-[10px] text-red-400 font-medium">Chave ausente</span>}
                        </div>
                      </div>
                    </div>

                    <div className="flex items-center gap-2">
                      {isLocalConnected && !isServerConnected && (
                         <button onClick={() => handleClearKey(key)} className="p-2 text-zinc-500 hover:text-red-400 transition-colors" title="Remover">
                           <Trash2 className="w-4 h-4" />
                         </button>
                      )}
                      {!isServerConnected && (
                        <button
                          onClick={() => {
                            setShowEdit(isEditing ? null : key);
                            setManualInput(localKeys[storeKeyName] || "");
                          }}
                          className={`px-3 py-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer border ${isEditing ? 'bg-zinc-700 border-zinc-600 text-white' : 'bg-layer-1 border-subtle text-zinc-300 hover:bg-layer-2'}`}
                        >
                          {isEditing ? 'Cancelar' : (isLocalConnected ? 'Editar' : 'Adicionar')}
                        </button>
                      )}
                    </div>
                  </div>

                  {isEditing && (
                    <div className="p-4 border-t border-subtle bg-black/20 animate-in slide-in-from-top-2 duration-200">
                      <label className="text-xs text-muted mb-1.5 block">Cole sua chave API aqui:</label>
                      <div className="flex gap-2">
                        <input 
                          type="password"
                          placeholder="sk-..."
                          className="flex-1 bg-zinc-950 border border-subtle rounded-md py-2 px-3 text-sm text-white focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"
                          value={manualInput}
                          onChange={(e) => setManualInput(e.target.value)}
                        />
                        <button 
                          onClick={() => handleSaveKey(key)}
                          disabled={!manualInput}
                          className="bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 cursor-pointer shadow-lg shadow-indigo-500/20"
                        >
                          <Save className="w-4 h-4" /> Salvar
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              );
            })
          )}
        </div>
        
        <div className="p-6 border-t border-subtle bg-layer-1/50 rounded-b-xl flex justify-between items-center">
          <button onClick={checkServerKeys} className="text-muted hover:text-white text-sm flex items-center gap-2 transition-colors cursor-pointer">
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} /> Verificar
          </button>
          <button onClick={onClose} className="px-6 py-2.5 bg-white hover:bg-zinc-200 text-black font-bold rounded-lg transition-colors cursor-pointer shadow-lg shadow-white/5">
            Concluir
          </button>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/FileDropzone.tsx`

```
"use client";

import { useCallback } from "react";
import { useDropzone } from "react-dropzone";
import { cn } from "@/lib/utils";
import { Upload, File, X } from "lucide-react";

interface FileDropzoneProps {
  onFileAccepted: (file: File) => void;
  accept?: Record<string, string[]>;
  maxSize?: number;
  currentFile?: File | null;
  onRemove?: () => void;
  label?: string;
  description?: string;
}

export default function FileDropzone({
  onFileAccepted,
  accept = { "text/csv": [".csv"] },
  maxSize = 10 * 1024 * 1024, // 10MB
  currentFile,
  onRemove,
  label = "Upload de Arquivo",
  description = "Arraste e solte ou clique para selecionar",
}: FileDropzoneProps) {
  const onDrop = useCallback(
    (acceptedFiles: File[]) => {
      if (acceptedFiles.length > 0) {
        onFileAccepted(acceptedFiles[0]);
      }
    },
    [onFileAccepted]
  );

  const { getRootProps, getInputProps, isDragActive, fileRejections } =
    useDropzone({
      onDrop,
      accept,
      maxSize,
      multiple: false,
    });

  const formatFileSize = (bytes: number) => {
    if (bytes < 1024) return bytes + " B";
    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + " KB";
    return (bytes / (1024 * 1024)).toFixed(1) + " MB";
  };

  if (currentFile) {
    return (
      <div className="border border-subtle rounded-lg p-4 bg-layer-2/50">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="p-2 bg-primary-500/10 rounded-lg">
              <File className="w-5 h-5 text-primary-500" />
            </div>
            <div>
              <p className="text-sm font-medium text-white">{currentFile.name}</p>
              <p className="text-xs text-muted">
                {formatFileSize(currentFile.size)}
              </p>
            </div>
          </div>
          {onRemove && (
            <button
              onClick={onRemove}
              className="p-1 hover:bg-gray-700 rounded-lg transition-colors"
            >
              <X className="w-4 h-4 text-muted" />
            </button>
          )}
        </div>
      </div>
    );
  }

  return (
    <div>
      <div
        {...getRootProps()}
        className={cn(
          "border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200",
          isDragActive
            ? "border-primary-500 bg-primary-500/10"
            : "border-subtle hover:border-gray-600 bg-layer-2/30"
        )}
      >
        <input {...getInputProps()} />
        <Upload
          className={cn(
            "w-10 h-10 mx-auto mb-3",
            isDragActive ? "text-primary-500" : "text-muted"
          )}
        />
        <p className="text-sm font-medium text-white mb-1">{label}</p>
        <p className="text-xs text-muted">{description}</p>
        <p className="text-xs text-muted mt-2">
          Tamanho máximo: {formatFileSize(maxSize)}
        </p>
      </div>

      {fileRejections.length > 0 && (
        <div className="mt-2 text-sm text-red-400">
          {fileRejections[0].errors.map((error) => (
            <p key={error.code}>{error.message}</p>
          ))}
        </div>
      )}
    </div>
  );
}

```

---
#### `components/GuidelinesModal.tsx`

```
"use client";

import { useState } from "react";
import Modal from "@/components/ui/Modal";
import Toggle from "@/components/ui/Toggle";
import { useGuidelinesStore, useUIStore } from "@/lib/store";
import { Diretriz, DiretrizScope } from "@/types";
import {
  Plus,
  Pencil,
  Trash2,
  Check,
  FileText,
  Image,
  Volume2,
  AlignLeft,
  Film,
  Zap,
  Settings2,
  Sparkles,
  BookOpen
} from "lucide-react";
import { cn } from "@/lib/utils";

const SCOPE_OPTIONS: { value: DiretrizScope; label: string; icon: React.ElementType; color: string; bgColor: string }[] = [
  { value: "script", label: "Roteiro", icon: FileText, color: "text-blue-400", bgColor: "bg-blue-500/10 border-blue-500/30 hover:bg-blue-500/20" },
  { value: "thumbnail", label: "Thumbnail", icon: Image, color: "text-purple-400", bgColor: "bg-purple-500/10 border-purple-500/30 hover:bg-purple-500/20" },
  { value: "audio", label: "Áudio", icon: Volume2, color: "text-green-400", bgColor: "bg-green-500/10 border-green-500/30 hover:bg-green-500/20" },
  { value: "description", label: "Descrição", icon: AlignLeft, color: "text-amber-400", bgColor: "bg-amber-500/10 border-amber-500/30 hover:bg-amber-500/20" },
  { value: "video", label: "Vídeo", icon: Film, color: "text-red-400", bgColor: "bg-red-500/10 border-red-500/30 hover:bg-red-500/20" },
];

export default function GuidelinesModal() {
  const { isGuidelinesModalOpen, closeGuidelinesModal } = useUIStore();
  const {
    guidelines,
    addDiretriz,
    updateDiretriz,
    deleteDiretriz,
    toggleDiretriz,
  } = useGuidelinesStore();

  const [isCreating, setIsCreating] = useState(false);
  const [editingId, setEditingId] = useState<string | null>(null);
  const [formData, setFormData] = useState<{
    title: string;
    description: string;
    systemPrompt: string;
    appliesTo: DiretrizScope[];
  }>({
    title: "",
    description: "",
    systemPrompt: "",
    appliesTo: [],
  });

  const resetForm = () => {
    setFormData({
      title: "",
      description: "",
      systemPrompt: "",
      appliesTo: [],
    });
    setIsCreating(false);
    setEditingId(null);
  };

  const handleCreate = () => {
    if (!formData.title || !formData.systemPrompt || formData.appliesTo.length === 0) {
      return;
    }

    addDiretriz({
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
      active: true,
    });

    resetForm();
  };

  const handleEdit = (diretriz: Diretriz) => {
    setEditingId(diretriz.id);
    setFormData({
      title: diretriz.title,
      description: diretriz.description,
      systemPrompt: diretriz.systemPrompt,
      appliesTo: diretriz.appliesTo,
    });
  };

  const handleSaveEdit = () => {
    if (!editingId || !formData.title || !formData.systemPrompt) return;

    updateDiretriz(editingId, {
      title: formData.title,
      description: formData.description,
      systemPrompt: formData.systemPrompt,
      appliesTo: formData.appliesTo,
    });

    resetForm();
  };

  const handleDelete = (id: string) => {
    if (confirm("Tem certeza que deseja excluir esta diretriz?")) {
      deleteDiretriz(id);
    }
  };

  const toggleScope = (scope: DiretrizScope) => {
    setFormData((prev) => ({
      ...prev,
      appliesTo: prev.appliesTo.includes(scope)
        ? prev.appliesTo.filter((s) => s !== scope)
        : [...prev.appliesTo, scope],
    }));
  };

  return (
    <Modal
      isOpen={isGuidelinesModalOpen}
      onClose={closeGuidelinesModal}
      title=""
      size="xl"
    >
      <div className="space-y-6">
        {/* Header Customizado */}
        <div className="flex items-center gap-4 pb-4 border-b border-subtle">
          <div className="p-3 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 rounded-xl border border-indigo-500/30">
            <Settings2 className="w-6 h-6 text-indigo-400" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white flex items-center gap-2">
              Engine de Diretrizes
              <Sparkles className="w-5 h-5 text-amber-400" />
            </h2>
            <p className="text-muted text-sm">Configure comportamentos globais do sistema de IA</p>
          </div>
        </div>

        {/* Description */}
        <div className="p-4 bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10 border border-indigo-500/20 rounded-xl">
          <div className="flex items-start gap-3">
            <BookOpen className="w-5 h-5 text-indigo-400 mt-0.5 flex-shrink-0" />
            <p className="text-sm text-secondary">
              As diretrizes são <strong className="text-indigo-400">globais e transversais</strong>. Elas são
              aplicadas automaticamente em todas as gerações de conteúdo conforme
              o escopo selecionado. As diretrizes <strong className="text-green-400">ADICIONAM</strong> contexto à análise,
              nunca substituem.
            </p>
          </div>
        </div>

        {/* Create New Button */}
        {!isCreating && !editingId && (
          <button
            onClick={() => setIsCreating(true)}
            className="w-full p-4 border-2 border-dashed border-subtle hover:border-indigo-500/50 rounded-xl transition-all group hover:bg-indigo-500/5"
          >
            <div className="flex items-center justify-center gap-2 text-muted group-hover:text-indigo-400">
              <Plus className="w-5 h-5" />
              <span className="font-medium">Criar Nova Diretriz</span>
            </div>
          </button>
        )}

        {/* Create/Edit Form */}
        {(isCreating || editingId) && (
          <div className="bg-gradient-to-br from-zinc-900 to-zinc-950 border border-indigo-500/30 rounded-xl p-5 space-y-5">
            <div className="flex items-center gap-3 pb-3 border-b border-subtle">
              <div className={`p-2 rounded-lg ${editingId ? 'bg-amber-500/10' : 'bg-green-500/10'}`}>
                {editingId ? <Pencil className="w-4 h-4 text-amber-400" /> : <Zap className="w-4 h-4 text-green-400" />}
              </div>
              <h3 className="text-lg font-semibold text-white">
                {editingId ? "Editar Diretriz" : "Nova Diretriz"}
              </h3>
            </div>

            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-secondary mb-2">Título</label>
                <input
                  value={formData.title}
                  onChange={(e) => setFormData((prev) => ({ ...prev, title: e.target.value }))}
                  placeholder="Ex: Tom de voz formal"
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-2">Descrição (opcional)</label>
                <input
                  value={formData.description}
                  onChange={(e) => setFormData((prev) => ({ ...prev, description: e.target.value }))}
                  placeholder="Breve descrição da diretriz"
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-2">System Prompt</label>
                <textarea
                  value={formData.systemPrompt}
                  onChange={(e) => setFormData((prev) => ({ ...prev, systemPrompt: e.target.value }))}
                  placeholder="Instruções que serão adicionadas ao prompt do AI..."
                  rows={4}
                  className="w-full bg-layer-1 border border-subtle rounded-lg px-4 py-3 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all resize-none"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-secondary mb-3">
                  Aplicar em:
                </label>
                <div className="flex flex-wrap gap-2">
                  {SCOPE_OPTIONS.map((option) => {
                    const Icon = option.icon;
                    const isSelected = formData.appliesTo.includes(option.value);
                    return (
                      <button
                        key={option.value}
                        onClick={() => toggleScope(option.value)}
                        className={cn(
                          "px-4 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 border",
                          isSelected
                            ? `${option.bgColor} ${option.color} border-current`
                            : "bg-layer-2 text-muted border-subtle hover:bg-zinc-700"
                        )}
                      >
                        <Icon className="w-4 h-4" />
                        {option.label}
                      </button>
                    );
                  })}
                </div>
              </div>

              <div className="flex gap-3 pt-3 border-t border-subtle">
                <button
                  onClick={editingId ? handleSaveEdit : handleCreate}
                  disabled={!formData.title || !formData.systemPrompt || formData.appliesTo.length === 0}
                  className={cn(
                    "flex-1 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",
                    formData.title && formData.systemPrompt && formData.appliesTo.length > 0
                      ? "bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-500 hover:to-purple-500"
                      : "bg-layer-2 text-muted cursor-not-allowed"
                  )}
                >
                  <Check className="w-4 h-4" />
                  {editingId ? "Salvar Alterações" : "Criar Diretriz"}
                </button>
                <button
                  onClick={resetForm}
                  className="px-6 py-3 rounded-lg font-medium bg-layer-2 text-secondary hover:bg-zinc-700 transition-colors"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        )}

        {/* Existing Guidelines */}
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <h3 className="text-sm font-semibold text-muted uppercase tracking-wider flex items-center gap-2">
              <BookOpen className="w-4 h-4" />
              Diretrizes Existentes
            </h3>
            <span className="px-2 py-1 bg-layer-2 rounded-full text-xs text-muted">
              {guidelines.diretrizes.length} {guidelines.diretrizes.length === 1 ? 'diretriz' : 'diretrizes'}
            </span>
          </div>

          {guidelines.diretrizes.length === 0 ? (
            <div className="text-center py-12 bg-layer-1/50 rounded-xl border border-subtle">
              <div className="w-16 h-16 bg-layer-2 rounded-full flex items-center justify-center mx-auto mb-4">
                <FileText className="w-8 h-8 text-disabled" />
              </div>
              <p className="text-muted mb-2">Nenhuma diretriz criada ainda</p>
              <p className="text-disabled text-sm">Crie sua primeira diretriz para personalizar o comportamento da IA</p>
            </div>
          ) : (
            <div className="space-y-3">
              {guidelines.diretrizes.map((diretriz) => (
                <div
                  key={diretriz.id}
                  className={cn(
                    "bg-layer-1 border rounded-xl p-4 transition-all group hover:shadow-lg",
                    diretriz.active ? "border-green-500/30 hover:border-green-500/50" : "border-subtle hover:border-subtle"
                  )}
                >
                  <div className="flex items-start justify-between gap-4">
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-2 flex-wrap">
                        <h4 className="font-semibold text-white">{diretriz.title}</h4>
                        <span className={cn(
                          "px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1",
                          diretriz.active
                            ? "bg-green-500/20 text-green-400"
                            : "bg-zinc-700 text-muted"
                        )}>
                          {diretriz.active ? (
                            <>
                              <span className="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></span>
                              Ativa
                            </>
                          ) : (
                            "Inativa"
                          )}
                        </span>
                      </div>
                      {diretriz.description && (
                        <p className="text-sm text-muted mb-3">
                          {diretriz.description}
                        </p>
                      )}
                      <div className="flex flex-wrap gap-2">
                        {diretriz.appliesTo.map((scope) => {
                          const scopeData = SCOPE_OPTIONS.find((o) => o.value === scope);
                          const Icon = scopeData?.icon || FileText;
                          return (
                            <span
                              key={scope}
                              className={cn(
                                "px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1.5 border",
                                scopeData?.bgColor || "bg-layer-2",
                                scopeData?.color || "text-muted"
                              )}
                            >
                              <Icon className="w-3 h-3" />
                              {scopeData?.label}
                            </span>
                          );
                        })}
                      </div>
                    </div>

                    <div className="flex items-center gap-2 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0">
                      <Toggle
                        checked={diretriz.active}
                        onChange={() => toggleDiretriz(diretriz.id)}
                      />
                      <button
                        onClick={() => handleEdit(diretriz)}
                        className="p-2 hover:bg-amber-500/10 rounded-lg transition-colors"
                        title="Editar"
                      >
                        <Pencil className="w-4 h-4 text-amber-400" />
                      </button>
                      <button
                        onClick={() => handleDelete(diretriz.id)}
                        className="p-2 hover:bg-red-500/10 rounded-lg transition-colors"
                        title="Excluir"
                      >
                        <Trash2 className="w-4 h-4 text-red-400" />
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
    </Modal>
  );
}

```

---
#### `components/Layout.tsx`

```
"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { cn } from "@/lib/utils";
import { useUIStore, useBrandingStore } from "@/lib/store";
import {
  Menu,
  X,
  Home,
  Workflow,
  BookOpen,
  Key,
  ChevronRight,
  FileText,
  Settings,
  ChevronLeft,
  LogOut,
  Palette,
} from "lucide-react";
import GuidelinesModal from "./GuidelinesModal";
import ConnectApisModal from "./ConnectApisModal";
import { getProfile } from "@/app/actions/settings";
import type { UserProfile } from "@/types";

interface LayoutProps {
  children: React.ReactNode;
}

export default function Layout({ children }: LayoutProps) {
  const pathname = usePathname();
  const { isSidebarOpen, toggleSidebar, openGuidelinesModal, openApiKeyModal } = useUIStore();
  const { systemName, logoUrl } = useBrandingStore();
  const [isMobile, setIsMobile] = useState(false);
  const [isCollapsed, setIsCollapsed] = useState(false);
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [showUserMenu, setShowUserMenu] = useState(false);

  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 1024);
    };
    checkMobile();
    window.addEventListener("resize", checkMobile);
    return () => window.removeEventListener("resize", checkMobile);
  }, []);

  useEffect(() => {
    const loadProfile = async () => {
      try {
        const userProfile = await getProfile();
        setProfile(userProfile);
      } catch (error) {
        console.error('Failed to load profile:', error);
      }
    };
    loadProfile();
  }, []);

  const menuItems = [
    {
      label: "Home",
      icon: <Home className="w-5 h-5" />,
      path: "/",
      type: "link" as const,
    },
    {
      label: "WorkFlow",
      icon: <Workflow className="w-5 h-5" />,
      path: "/workflow",
      type: "link" as const,
    },
    {
      label: "Documentação",
      icon: <FileText className="w-5 h-5" />,
      path: "/documentation",
      type: "link" as const,
    },
    {
      label: "Design System",
      icon: <Palette className="w-5 h-5" />,
      path: "/documentation/design-system",
      type: "link" as const,
    },
    {
      label: "Diretrizes",
      icon: <BookOpen className="w-5 h-5" />,
      type: "button" as const,
      onClick: openGuidelinesModal,
    },
    {
      label: "API Keys",
      icon: <Key className="w-5 h-5" />,
      type: "button" as const,
      onClick: openApiKeyModal,
    },
  ];

  const settingsItem = {
    label: "Settings",
    icon: <Settings className="w-5 h-5" />,
    path: "/settings",
    type: "link" as const,
  };

  return (
    <div className="min-h-screen bg-layer-0 flex">
      {/* Mobile Menu Button */}
      <button
        onClick={toggleSidebar}
        className="lg:hidden fixed top-4 left-4 z-50 p-2 bg-layer-1 rounded-lg border border-default"
      >
        {isSidebarOpen ? (
          <X className="w-5 h-5 text-white" />
        ) : (
          <Menu className="w-5 h-5 text-white" />
        )}
      </button>

      {/* Sidebar */}
      <aside
        className={cn(
          "fixed lg:sticky top-0 left-0 z-40 h-screen bg-layer-1 border-r border-default transition-all duration-300",
          isSidebarOpen ? "translate-x-0" : "-translate-x-full lg:translate-x-0",
          isCollapsed && !isMobile ? "w-20" : "w-64"
        )}
      >
        <div className="flex flex-col h-full">
          {/* Logo */}
          <div className="p-6 border-b border-default">
            <Link href="/" className="flex items-center gap-3 group">
              <div className="w-10 h-10 flex items-center justify-center flex-shrink-0 relative">
                {logoUrl ? (
                  <img
                    src={logoUrl}
                    alt="ORION"
                    className="w-full h-full object-contain drop-shadow-glow"
                    onError={(e) => {
                      e.currentTarget.style.display = 'none';
                    }}
                  />
                ) : (
                  /* Fallback: Logo SVG ORION */
                  <div className="relative w-full h-full bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-glow-md shadow-cyan-500/50 group-hover:shadow-glow-lg group-hover:shadow-cyan-400/70 transition-all duration-300">
                    <div className="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-xl" />
                    <span className="relative text-white font-black text-lg tracking-tighter drop-shadow-lg">
                      OR
                    </span>
                  </div>
                )}
              </div>
              {(!isCollapsed || isMobile) && (
                <div className="flex flex-col">
                  <span className="text-xl font-bold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent whitespace-nowrap group-hover:from-cyan-300 group-hover:via-blue-300 group-hover:to-cyan-300 transition-all duration-300">
                    {systemName}
                  </span>
                  <span className="text-xs text-cyan-400 font-medium">
                    AI-Powered Production
                  </span>
                </div>
              )}
            </Link>
          </div>

          {/* Navigation */}
          <nav className="flex-1 p-4 space-y-1 overflow-auto">
            {menuItems.map((item, index) => {
              if (item.type === "link") {
                const isActive = pathname === item.path ||
                    (item.path === "/workflow" && pathname.startsWith("/step/")) ||
                    (item.path === "/documentation" && pathname.startsWith("/documentation"));

                return (
                  <Link
                    key={index}
                    href={item.path}
                    onClick={() => {
                      if (isMobile) toggleSidebar();
                    }}
                    className={cn(
                      "flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",
                      isActive
                        ? "bg-cyan-500/15 text-cyan-400 border border-cyan-500/30"
                        : "text-text-secondary hover:bg-surface-elevated hover:text-text-primary",
                      isCollapsed && !isMobile && "justify-center"
                    )}
                    title={isCollapsed && !isMobile ? item.label : undefined}
                  >
                    <span
                      className={cn(
                        "flex items-center justify-center w-8 h-8 rounded-lg flex-shrink-0",
                        isActive
                          ? "bg-cyan-500/25"
                          : "bg-surface-default"
                      )}
                    >
                      {item.icon}
                    </span>
                    {(!isCollapsed || isMobile) && (
                      <span className="font-medium">{item.label}</span>
                    )}
                  </Link>
                );
              } else {
                return (
                  <button
                    key={index}
                    onClick={() => {
                      item.onClick?.();
                      if (isMobile) toggleSidebar();
                    }}
                    className={cn(
                      "w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-text-secondary hover:bg-surface-elevated hover:text-text-primary transition-all duration-200",
                      isCollapsed && !isMobile && "justify-center"
                    )}
                    title={isCollapsed && !isMobile ? item.label : undefined}
                  >
                    <span className="flex items-center justify-center w-8 h-8 rounded-lg bg-surface-default flex-shrink-0">
                      {item.icon}
                    </span>
                    {(!isCollapsed || isMobile) && (
                      <>
                        <span className="font-medium">{item.label}</span>
                        <ChevronRight className="w-4 h-4 ml-auto" />
                      </>
                    )}
                  </button>
                );
              }
            })}
          </nav>

          {/* Footer */}
          <div className="p-4 border-t border-default space-y-3">
            {/* Settings Link */}
            <Link
              href={settingsItem.path}
              onClick={() => {
                if (isMobile) toggleSidebar();
              }}
              className={cn(
                "flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",
                pathname === settingsItem.path
                  ? "bg-emerald-500/15 text-emerald-400 border border-emerald-500/30"
                  : "text-text-secondary hover:bg-surface-elevated hover:text-text-primary",
                isCollapsed && !isMobile && "justify-center"
              )}
              title={isCollapsed && !isMobile ? settingsItem.label : undefined}
            >
              <span
                className={cn(
                  "flex items-center justify-center w-8 h-8 rounded-lg flex-shrink-0",
                  pathname === settingsItem.path
                    ? "bg-emerald-500/25"
                    : "bg-surface-default"
                )}
              >
                {settingsItem.icon}
              </span>
              {(!isCollapsed || isMobile) && (
                <span className="font-medium">{settingsItem.label}</span>
              )}
            </Link>

            {/* Collapse Button (desktop only) */}
            {!isMobile && (
              <button
                onClick={() => setIsCollapsed(!isCollapsed)}
                className="w-full flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg text-text-muted hover:bg-surface-elevated hover:text-text-primary transition-all duration-200 group border border-transparent hover:border-border-subtle"
                title={isCollapsed ? "Expandir sidebar" : "Recolher sidebar"}
              >
                <div className="flex items-center justify-center w-8 h-8 rounded-lg bg-surface-default group-hover:bg-cyan-500/10 transition-colors">
                  <ChevronLeft className={cn(
                    "w-4 h-4 transition-all duration-300 group-hover:text-cyan-400",
                    isCollapsed && "rotate-180"
                  )} />
                </div>
                {!isCollapsed && (
                  <span className="text-sm font-medium flex-1 text-left">Recolher</span>
                )}
              </button>
            )}

            {/* Version */}
            {(!isCollapsed || isMobile) && (
              <p className="text-xs text-text-muted text-center">
                {systemName} v1.0.0
              </p>
            )}
          </div>
        </div>
      </aside>

      {/* Overlay for mobile */}
      {isSidebarOpen && isMobile && (
        <div
          className="fixed inset-0 bg-black/50 z-30 lg:hidden"
          onClick={toggleSidebar}
        />
      )}

      {/* Main Content */}
      <main className="flex-1 min-h-screen flex flex-col">
        {/* Header with User Avatar */}
        <header className="sticky top-0 z-30 bg-layer-1/95 backdrop-blur-sm border-b border-default">
          <div className="flex items-center justify-end px-6 py-3 gap-4">
            {/* System Status Indicator */}
            <div className="hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-success/10 border border-success/20">
              <div className="relative w-2 h-2">
                <div className="absolute inset-0 bg-success rounded-full animate-ping opacity-75" />
                <div className="relative w-2 h-2 bg-success rounded-full" />
              </div>
              <span className="text-xs font-medium text-success">Sistema Operacional</span>
            </div>

            {profile && (
              <div className="relative">
                <button
                  onClick={() => setShowUserMenu(!showUserMenu)}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-surface-elevated transition-all"
                >
                  <div className="text-right hidden sm:block">
                    <p className="text-sm font-medium text-text-primary">{profile.name}</p>
                    <p className="text-xs text-text-secondary">{profile.role}</p>
                  </div>
                  <div className="relative">
                    <img
                      src={profile.avatarUrl}
                      alt={profile.name}
                      className="w-9 h-9 rounded-full border-2 border-subtle"
                    />
                    <div className="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-success rounded-full border-2 border-layer-1" />
                  </div>
                </button>

                {/* Dropdown Menu */}
                {showUserMenu && (
                  <>
                    <div
                      className="fixed inset-0 z-40"
                      onClick={() => setShowUserMenu(false)}
                    />
                    <div className="absolute right-0 mt-2 w-48 bg-layer-2 border border-default rounded-lg shadow-xl z-50 overflow-hidden">
                      <Link
                        href="/settings"
                        onClick={() => setShowUserMenu(false)}
                        className="flex items-center gap-2 px-4 py-3 hover:bg-surface-elevated transition-colors text-text-secondary hover:text-text-primary"
                      >
                        <Settings className="w-4 h-4" />
                        <span className="text-sm">Configurações</span>
                      </Link>
                      <div className="border-t border-default" />
                      <button
                        onClick={() => {
                          setShowUserMenu(false);
                          window.location.reload();
                        }}
                        className="w-full flex items-center gap-2 px-4 py-3 hover:bg-surface-elevated transition-colors text-red-400 hover:text-red-300"
                      >
                        <LogOut className="w-4 h-4" />
                        <span className="text-sm">Sair</span>
                      </button>
                    </div>
                  </>
                )}
              </div>
            )}
          </div>
        </header>

        {/* Page Content */}
        <div className="flex-1 overflow-y-auto p-6">
          <div className="max-w-7xl mx-auto">
            {children}
          </div>
        </div>
      </main>

      {/* Modals */}
      <GuidelinesModal />
      <ConnectApisModal />
    </div>
  );
}

```

---
#### `components/ModelsExplorer.tsx`

```
"use client";

import { useState, useEffect, useMemo } from "react";
import {
  Search,
  ChevronDown,
  ChevronUp,
  Sparkles,
  Check,
  Loader2,
  AlertCircle,
  Cpu,
} from "lucide-react";

interface Model {
  id: string;
  name: string;
  description: string;
  isNew?: boolean;
}

interface ModelCategory {
  name: string;
  description: string;
  models: Model[];
}

interface ProviderModels {
  name: string;
  icon: string;
  categories: ModelCategory[];
}

interface ModelsExplorerProps {
  provider: string;
  apiKey?: string;
  isConnected: boolean;
}

export default function ModelsExplorer({ provider, apiKey, isConnected }: ModelsExplorerProps) {
  const [models, setModels] = useState<ProviderModels | null>(null);
  const [availableModels, setAvailableModels] = useState<string[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchQuery, setSearchQuery] = useState("");
  const [expandedCategories, setExpandedCategories] = useState<Record<string, boolean>>({});
  const [loadingAvailable, setLoadingAvailable] = useState(false);

  // Carregar modelos estáticos
  useEffect(() => {
    const fetchModels = async () => {
      setLoading(true);
      try {
        const res = await fetch(`/api/models?provider=${provider}`);
        if (res.ok) {
          const data = await res.json();
          setModels(data);
          // Expandir primeira categoria por padrão
          if (data.categories?.length > 0) {
            setExpandedCategories({ [data.categories[0].name]: true });
          }
        }
      } catch (error) {
        console.error('Error fetching models:', error);
      } finally {
        setLoading(false);
      }
    };

    fetchModels();
  }, [provider]);

  // Carregar modelos disponíveis se conectado
  useEffect(() => {
    const fetchAvailableModels = async () => {
      if (!isConnected || !apiKey) return;

      setLoadingAvailable(true);
      try {
        const res = await fetch('/api/models', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ provider, key: apiKey })
        });
        if (res.ok) {
          const data = await res.json();
          setAvailableModels(data.availableModels || []);
        }
      } catch (error) {
        console.error('Error fetching available models:', error);
      } finally {
        setLoadingAvailable(false);
      }
    };

    fetchAvailableModels();
  }, [provider, apiKey, isConnected]);

  // Filtrar modelos por pesquisa
  const filteredCategories = useMemo(() => {
    if (!models?.categories) return [];
    if (!searchQuery.trim()) return models.categories;

    const query = searchQuery.toLowerCase();
    return models.categories
      .map(category => ({
        ...category,
        models: category.models.filter(
          model =>
            model.id.toLowerCase().includes(query) ||
            model.name.toLowerCase().includes(query) ||
            model.description.toLowerCase().includes(query)
        )
      }))
      .filter(category => category.models.length > 0);
  }, [models, searchQuery]);

  const toggleCategory = (categoryName: string) => {
    setExpandedCategories(prev => ({
      ...prev,
      [categoryName]: !prev[categoryName]
    }));
  };

  const isModelAvailable = (modelId: string) => {
    if (availableModels.length === 0) return null; // Não verificado
    return availableModels.some(m => m.includes(modelId) || modelId.includes(m));
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center p-8">
        <Loader2 className="w-6 h-6 text-indigo-400 animate-spin" />
      </div>
    );
  }

  if (!models) {
    return (
      <div className="p-4 text-center text-muted">
        <AlertCircle className="w-8 h-8 mx-auto mb-2 text-disabled" />
        <p>Modelos não disponíveis para este provedor</p>
      </div>
    );
  }

  return (
    <div className="space-y-4">
      {/* Header com pesquisa */}
      <div className="flex items-center gap-3">
        <span className="text-2xl">{models.icon}</span>
        <div className="flex-1">
          <h3 className="font-semibold text-white">{models.name}</h3>
          <p className="text-xs text-muted">
            {loadingAvailable ? (
              <span className="flex items-center gap-1">
                <Loader2 className="w-3 h-3 animate-spin" />
                Verificando disponibilidade...
              </span>
            ) : isConnected ? (
              <span className="text-green-400">API conectada - modelos verificados</span>
            ) : (
              <span className="text-yellow-400">Configure a API para ver disponibilidade</span>
            )}
          </p>
        </div>
      </div>

      {/* Campo de pesquisa */}
      <div className="relative">
        <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted" />
        <input
          type="text"
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder="Pesquisar modelos..."
          className="w-full pl-10 pr-4 py-2 bg-layer-2/50 border border-subtle rounded-lg text-sm text-white placeholder-zinc-500 focus:outline-none focus:border-indigo-500 transition-colors"
        />
      </div>

      {/* Lista de categorias e modelos */}
      <div className="space-y-2 max-h-[400px] overflow-y-auto pr-2">
        {filteredCategories.map((category) => (
          <div
            key={category.name}
            className="border border-subtle rounded-lg overflow-hidden"
          >
            {/* Cabeçalho da categoria */}
            <button
              onClick={() => toggleCategory(category.name)}
              className="w-full px-4 py-3 bg-layer-2/50 hover:bg-layer-2 flex items-center justify-between transition-colors"
            >
              <div className="text-left">
                <h4 className="font-medium text-white text-sm">{category.name}</h4>
                <p className="text-xs text-muted">{category.description}</p>
              </div>
              <div className="flex items-center gap-2">
                <span className="text-xs text-muted bg-zinc-700 px-2 py-0.5 rounded">
                  {category.models.length} modelos
                </span>
                {expandedCategories[category.name] ? (
                  <ChevronUp className="w-4 h-4 text-muted" />
                ) : (
                  <ChevronDown className="w-4 h-4 text-muted" />
                )}
              </div>
            </button>

            {/* Lista de modelos */}
            {expandedCategories[category.name] && (
              <div className="divide-y divide-zinc-800">
                {category.models.map((model) => {
                  const availability = isModelAvailable(model.id);
                  return (
                    <div
                      key={model.id}
                      className="px-4 py-3 bg-layer-1/50 hover:bg-layer-2/30 transition-colors"
                    >
                      <div className="flex items-start justify-between gap-2">
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 flex-wrap">
                            <span className="font-mono text-sm text-indigo-300">
                              {model.id}
                            </span>
                            {model.isNew && (
                              <span className="px-1.5 py-0.5 bg-green-500/20 text-green-400 text-[10px] font-medium rounded flex items-center gap-1">
                                <Sparkles className="w-2.5 h-2.5" />
                                NOVO
                              </span>
                            )}
                          </div>
                          <p className="text-sm text-white mt-0.5">{model.name}</p>
                          <p className="text-xs text-muted mt-0.5">{model.description}</p>
                        </div>

                        {/* Status de disponibilidade */}
                        <div className="flex-shrink-0">
                          {availability === true && (
                            <div className="flex items-center gap-1 text-green-400 bg-green-500/10 px-2 py-1 rounded">
                              <Check className="w-3 h-3" />
                              <span className="text-[10px] font-medium">Disponível</span>
                            </div>
                          )}
                          {availability === false && (
                            <div className="flex items-center gap-1 text-muted bg-zinc-700/30 px-2 py-1 rounded">
                              <Cpu className="w-3 h-3" />
                              <span className="text-[10px]">Indisponível</span>
                            </div>
                          )}
                          {availability === null && isConnected && (
                            <div className="flex items-center gap-1 text-yellow-400 bg-yellow-500/10 px-2 py-1 rounded">
                              <AlertCircle className="w-3 h-3" />
                              <span className="text-[10px]">Verificar</span>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}
          </div>
        ))}

        {filteredCategories.length === 0 && (
          <div className="p-8 text-center text-muted">
            <Search className="w-8 h-8 mx-auto mb-2 opacity-50" />
            <p>Nenhum modelo encontrado para &quot;{searchQuery}&quot;</p>
          </div>
        )}
      </div>
    </div>
  );
}

```

---
#### `components/VercelToolbar.tsx`

```
'use client';

import { VercelToolbar as Toolbar } from '@vercel/toolbar/next';

/**
 * Componente que integra o Vercel Toolbar em todos os ambientes.
 *
 * O Vercel Toolbar permite:
 * - Adicionar comentários visuais nas páginas usando @menções
 * - Mencionar @Claude para direcionar comentários para a IA
 * - Colaboração em tempo real com a equipe
 * - Funciona em desenvolvimento, preview E produção
 *
 * Configuração:
 * - Habilitado em todos os ambientes (dev, preview, production)
 * - Requer VERCEL_TOKEN e VERCEL_PROJECT_ID configurados
 * - Menções são extraídas via CLI: npm run vercel:comments
 */
export function VercelToolbar() {
  // Habilitar em TODOS os ambientes (dev, preview, production)
  // Para garantir que menções @Claude funcionem em produção
  const shouldInject = true;

  if (!shouldInject) {
    return null;
  }

  return <Toolbar />;
}

```

---
#### `components/design-system/ColorSwatch.tsx`

```
'use client';

import { useState } from 'react';
import { Check, Copy } from 'lucide-react';

interface ColorSwatchProps {
  name: string;
  value: string;
  cssVariable?: string;
  showHex?: boolean;
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

export function ColorSwatch({
  name,
  value,
  cssVariable,
  showHex = true,
  size = 'md',
  className = '',
}: ColorSwatchProps) {
  const [copied, setCopied] = useState(false);

  const sizes = {
    sm: 'w-12 h-12',
    md: 'w-16 h-16',
    lg: 'w-24 h-24',
  };

  const copyToClipboard = async () => {
    const textToCopy = cssVariable || value;
    await navigator.clipboard.writeText(textToCopy);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className={`group ${className}`}>
      <button
        onClick={copyToClipboard}
        className={`
          ${sizes[size]}
          rounded-xl border border-border-subtle
          transition-all duration-200
          hover:scale-105 hover:border-border-active
          hover:shadow-glow-md
          relative overflow-hidden
          focus:outline-none focus:ring-2 focus:ring-cyan-500/50
        `}
        style={{ backgroundColor: value }}
        title={`Copiar: ${cssVariable || value}`}
      >
        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 backdrop-blur-sm">
          {copied ? (
            <Check className="w-5 h-5 text-success" />
          ) : (
            <Copy className="w-4 h-4 text-white" />
          )}
        </div>
      </button>

      <div className="mt-2 space-y-0.5">
        <p className="text-sm font-medium text-foreground truncate">{name}</p>
        {showHex && (
          <p className="text-xs text-foreground-muted font-mono">
            {value.startsWith('var(') ? cssVariable : value}
          </p>
        )}
      </div>
    </div>
  );
}

interface ColorPaletteProps {
  name: string;
  colors: { shade: string; value: string; cssVar?: string }[];
  className?: string;
}

export function ColorPalette({ name, colors, className = '' }: ColorPaletteProps) {
  return (
    <div className={`space-y-3 ${className}`}>
      <h4 className="text-sm font-semibold text-foreground uppercase tracking-wider">
        {name}
      </h4>
      <div className="flex flex-wrap gap-3">
        {colors.map((color) => (
          <ColorSwatch
            key={color.shade}
            name={color.shade}
            value={color.value}
            cssVariable={color.cssVar}
            size="md"
          />
        ))}
      </div>
    </div>
  );
}

interface ColorGridProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function ColorGrid({ title, description, children, className = '' }: ColorGridProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4">
        {children}
      </div>
    </div>
  );
}

```

---
#### `components/design-system/ComponentPreview.tsx`

```
'use client';

import { useState } from 'react';
import { Code, Eye } from 'lucide-react';

interface ComponentPreviewProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  code?: string;
  className?: string;
}

export function ComponentPreview({
  title,
  description,
  children,
  code,
  className = '',
}: ComponentPreviewProps) {
  const [showCode, setShowCode] = useState(false);

  return (
    <div className={`card-glass overflow-hidden ${className}`}>
      {/* Header */}
      <div className="flex items-center justify-between px-6 py-4 border-b border-border-subtle">
        <div>
          <h4 className="text-lg font-semibold text-foreground">{title}</h4>
          {description && (
            <p className="text-sm text-foreground-muted mt-0.5">{description}</p>
          )}
        </div>
        {code && (
          <button
            onClick={() => setShowCode(!showCode)}
            className={`
              btn-ghost btn-sm gap-2
              ${showCode ? 'text-cyan-400' : ''}
            `}
          >
            {showCode ? (
              <>
                <Eye className="w-4 h-4" />
                Preview
              </>
            ) : (
              <>
                <Code className="w-4 h-4" />
                Código
              </>
            )}
          </button>
        )}
      </div>

      {/* Content */}
      {showCode && code ? (
        <div className="p-6 bg-layer-1">
          <pre className="text-sm font-mono text-foreground-secondary overflow-x-auto">
            <code>{code}</code>
          </pre>
        </div>
      ) : (
        <div className="p-6 bg-layer-0/50">
          {children}
        </div>
      )}
    </div>
  );
}

interface ComponentSectionProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function ComponentSection({ title, description, children, className = '' }: ComponentSectionProps) {
  return (
    <section className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-2xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-2 text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="space-y-6">
        {children}
      </div>
    </section>
  );
}

interface PreviewGridProps {
  children: React.ReactNode;
  cols?: 1 | 2 | 3 | 4;
  className?: string;
}

export function PreviewGrid({ children, cols = 2, className = '' }: PreviewGridProps) {
  const gridCols = {
    1: 'grid-cols-1',
    2: 'grid-cols-1 md:grid-cols-2',
    3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
    4: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-4',
  };

  return (
    <div className={`grid ${gridCols[cols]} gap-6 ${className}`}>
      {children}
    </div>
  );
}

interface SpacingPreviewProps {
  name: string;
  value: string;
  className?: string;
}

export function SpacingPreview({ name, value, className = '' }: SpacingPreviewProps) {
  return (
    <div className={`flex items-center gap-4 ${className}`}>
      <div
        className="bg-cyan-500/30 border border-cyan-500/50 rounded"
        style={{ width: value, height: value, minWidth: '4px', minHeight: '4px' }}
      />
      <div className="flex-1">
        <p className="text-sm font-medium text-foreground">{name}</p>
        <p className="text-xs text-foreground-muted font-mono">{value}</p>
      </div>
    </div>
  );
}

interface ShadowPreviewProps {
  name: string;
  shadow: string;
  className?: string;
}

export function ShadowPreview({ name, shadow, className = '' }: ShadowPreviewProps) {
  return (
    <div className={`flex flex-col items-center ${className}`}>
      <div
        className="w-24 h-24 bg-layer-2 rounded-xl mb-3"
        style={{ boxShadow: shadow }}
      />
      <p className="text-sm font-medium text-foreground text-center">{name}</p>
    </div>
  );
}

interface RadiusPreviewProps {
  name: string;
  radius: string;
  className?: string;
}

export function RadiusPreview({ name, radius, className = '' }: RadiusPreviewProps) {
  return (
    <div className={`flex flex-col items-center ${className}`}>
      <div
        className="w-20 h-20 bg-gradient-cyan-blue mb-3"
        style={{ borderRadius: radius }}
      />
      <p className="text-sm font-medium text-foreground">{name}</p>
      <p className="text-xs text-foreground-muted font-mono">{radius}</p>
    </div>
  );
}

```

---
#### `components/design-system/GradientCard.tsx`

```
'use client';

import { useState } from 'react';
import { Check, Copy } from 'lucide-react';

interface GradientCardProps {
  name: string;
  cssVariable: string;
  gradient: string;
  description?: string;
  className?: string;
}

export function GradientCard({
  name,
  cssVariable,
  gradient,
  description,
  className = '',
}: GradientCardProps) {
  const [copied, setCopied] = useState(false);

  const copyToClipboard = async () => {
    await navigator.clipboard.writeText(cssVariable);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className={`group ${className}`}>
      <button
        onClick={copyToClipboard}
        className="
          w-full h-32 rounded-xl border border-border-subtle
          transition-all duration-300
          hover:scale-[1.02] hover:border-border-active
          hover:shadow-card-hover
          relative overflow-hidden
          focus:outline-none focus:ring-2 focus:ring-cyan-500/50
        "
        style={{ background: gradient }}
        title={`Copiar: ${cssVariable}`}
      >
        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 backdrop-blur-sm">
          {copied ? (
            <div className="flex items-center gap-2 text-success">
              <Check className="w-5 h-5" />
              <span className="text-sm font-medium">Copiado!</span>
            </div>
          ) : (
            <div className="flex items-center gap-2 text-white">
              <Copy className="w-4 h-4" />
              <span className="text-sm">Copiar CSS</span>
            </div>
          )}
        </div>
      </button>

      <div className="mt-3 space-y-1">
        <p className="text-sm font-medium text-foreground">{name}</p>
        <p className="text-xs text-foreground-muted font-mono truncate">{cssVariable}</p>
        {description && (
          <p className="text-xs text-foreground-muted">{description}</p>
        )}
      </div>
    </div>
  );
}

interface GradientGridProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function GradientGrid({ title, description, children, className = '' }: GradientGridProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {children}
      </div>
    </div>
  );
}

```

---
#### `components/design-system/TypographySample.tsx`

```
'use client';

interface TypographySampleProps {
  name: string;
  description?: string;
  className?: string;
  fontClass?: string;
  sampleText?: string;
  specs?: {
    size?: string;
    weight?: string;
    lineHeight?: string;
    letterSpacing?: string;
  };
}

export function TypographySample({
  name,
  description,
  className = '',
  fontClass = '',
  sampleText = 'O rápido rato roeu a roupa do rei de Roma.',
  specs,
}: TypographySampleProps) {
  return (
    <div className={`card-glass p-6 rounded-xl ${className}`}>
      <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4">
        <div>
          <h4 className="text-lg font-semibold text-foreground">{name}</h4>
          {description && (
            <p className="text-sm text-foreground-muted mt-1">{description}</p>
          )}
        </div>
        {specs && (
          <div className="flex flex-wrap gap-2">
            {specs.size && (
              <span className="badge-default text-2xs">
                {specs.size}
              </span>
            )}
            {specs.weight && (
              <span className="badge-default text-2xs">
                {specs.weight}
              </span>
            )}
            {specs.lineHeight && (
              <span className="badge-default text-2xs">
                LH: {specs.lineHeight}
              </span>
            )}
            {specs.letterSpacing && (
              <span className="badge-default text-2xs">
                LS: {specs.letterSpacing}
              </span>
            )}
          </div>
        )}
      </div>
      <p className={`text-foreground ${fontClass}`}>{sampleText}</p>
    </div>
  );
}

interface TypographyScaleProps {
  title: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}

export function TypographyScale({ title, description, children, className = '' }: TypographyScaleProps) {
  return (
    <div className={`space-y-6 ${className}`}>
      <div>
        <h3 className="text-xl font-semibold text-foreground">{title}</h3>
        {description && (
          <p className="mt-1 text-sm text-foreground-muted">{description}</p>
        )}
      </div>
      <div className="space-y-4">
        {children}
      </div>
    </div>
  );
}

export function FontPreview() {
  return (
    <div className="grid md:grid-cols-2 gap-6">
      {/* Sans */}
      <div className="card-glass p-6 rounded-xl">
        <div className="flex items-center justify-between mb-4">
          <h4 className="text-lg font-semibold text-foreground">Inter</h4>
          <span className="badge-info">Sans-serif</span>
        </div>
        <p className="text-foreground mb-4">
          Fonte principal para UI, textos e títulos. Moderna, legível e com
          ótimo suporte a múltiplos pesos.
        </p>
        <div className="space-y-2 border-t border-border-subtle pt-4">
          <p className="font-normal text-foreground-muted">Regular 400</p>
          <p className="font-medium text-foreground-muted">Medium 500</p>
          <p className="font-semibold text-foreground-muted">Semibold 600</p>
          <p className="font-bold text-foreground-muted">Bold 700</p>
        </div>
      </div>

      {/* Mono */}
      <div className="card-glass p-6 rounded-xl">
        <div className="flex items-center justify-between mb-4">
          <h4 className="text-lg font-semibold text-foreground">JetBrains Mono</h4>
          <span className="badge-default">Monospace</span>
        </div>
        <p className="text-foreground mb-4">
          Fonte monospace para código, dados numéricos e elementos técnicos.
          Excelente legibilidade em tamanhos pequenos.
        </p>
        <div className="space-y-2 border-t border-border-subtle pt-4 font-mono">
          <p className="text-foreground-muted">const hello = &apos;world&apos;;</p>
          <p className="text-foreground-muted">1234567890</p>
          <p className="text-foreground-muted">@#$%^&*()_+=</p>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/design-system/index.ts`

```
/**
 * ORION Design System - Component Exports
 */

export { ColorSwatch, ColorPalette, ColorGrid } from './ColorSwatch';
export { GradientCard, GradientGrid } from './GradientCard';
export { TypographySample, TypographyScale, FontPreview } from './TypographySample';
export {
  ComponentPreview,
  ComponentSection,
  PreviewGrid,
  SpacingPreview,
  ShadowPreview,
  RadiusPreview,
} from './ComponentPreview';

```

---
#### `components/documentation/AnimatedSection.tsx`

```
"use client";

import { ReactNode, useRef, useEffect, useState } from "react";

interface AnimatedSectionProps {
  children: ReactNode;
  className?: string;
  delay?: number;
  animation?: "fade-up" | "fade-left" | "fade-right" | "scale" | "none";
}

export function AnimatedSection({
  children,
  className = "",
  delay = 0,
  animation = "fade-up",
}: AnimatedSectionProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setTimeout(() => setIsVisible(true), delay);
          observer.unobserve(element);
        }
      },
      { threshold: 0.1, rootMargin: "50px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, [delay]);

  const getAnimationStyles = () => {
    if (animation === "none") return {};

    const baseStyles = {
      transition: "all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",
    };

    if (!isVisible) {
      switch (animation) {
        case "fade-up":
          return { ...baseStyles, opacity: 0, transform: "translateY(30px)" };
        case "fade-left":
          return { ...baseStyles, opacity: 0, transform: "translateX(-30px)" };
        case "fade-right":
          return { ...baseStyles, opacity: 0, transform: "translateX(30px)" };
        case "scale":
          return { ...baseStyles, opacity: 0, transform: "scale(0.95)" };
        default:
          return { ...baseStyles, opacity: 0 };
      }
    }

    return { ...baseStyles, opacity: 1, transform: "translateY(0) translateX(0) scale(1)" };
  };

  return (
    <div ref={ref} className={className} style={getAnimationStyles()}>
      {children}
    </div>
  );
}

interface AnimatedCardProps {
  children: ReactNode;
  className?: string;
  delay?: number;
  hoverEffect?: boolean;
}

export function AnimatedCard({
  children,
  className = "",
  delay = 0,
  hoverEffect = true,
}: AnimatedCardProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setTimeout(() => setIsVisible(true), delay);
          observer.unobserve(element);
        }
      },
      { threshold: 0.1, rootMargin: "30px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, [delay]);

  return (
    <div
      ref={ref}
      className={`transition-all duration-500 ${hoverEffect ? "glow-hover" : ""} ${className}`}
      style={{
        opacity: isVisible ? 1 : 0,
        transform: isVisible ? "translateY(0) scale(1)" : "translateY(20px) scale(0.98)",
      }}
    >
      {children}
    </div>
  );
}

interface AnimatedGridProps {
  children: ReactNode;
  className?: string;
  staggerDelay?: number;
}

export function AnimatedGrid({ children, className = "", staggerDelay = 100 }: AnimatedGridProps) {
  const ref = useRef<HTMLDivElement>(null);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.unobserve(element);
        }
      },
      { threshold: 0.05, rootMargin: "50px" }
    );

    observer.observe(element);

    return () => observer.unobserve(element);
  }, []);

  return (
    <div ref={ref} className={className}>
      {Array.isArray(children)
        ? children.map((child, index) => (
            <div
              key={index}
              style={{
                opacity: isVisible ? 1 : 0,
                transform: isVisible ? "translateY(0)" : "translateY(20px)",
                transition: `all 0.5s cubic-bezier(0.4, 0, 0.2, 1) ${index * staggerDelay}ms`,
              }}
            >
              {child}
            </div>
          ))
        : children}
    </div>
  );
}

export default AnimatedSection;

```

---
#### `components/documentation/CopyButton.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { Copy, Check, FileCode } from "lucide-react";

// Check if we're in a shared view context
function useCanCopy() {
  const [canCopy, setCanCopy] = useState(true);

  useEffect(() => {
    // Check URL for share token
    const params = new URLSearchParams(window.location.search);
    const token = params.get("s");

    if (token) {
      // Check if this token belongs to the owner
      try {
        const tokens = localStorage.getItem("ey_owner_tokens");
        const ownerTokens = tokens ? JSON.parse(tokens) : [];
        if (!ownerTokens.includes(token)) {
          setCanCopy(false);
        }
      } catch {
        setCanCopy(false);
      }
    }
  }, []);

  return canCopy;
}

interface CopyButtonProps {
  content: string;
  className?: string;
}

export function CopyButton({ content, className = "" }: CopyButtonProps) {
  const [copied, setCopied] = useState(false);
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  const handleCopy = async () => {
    try {
      await navigator.clipboard.writeText(content);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Failed to copy:", err);
    }
  };

  return (
    <button
      onClick={handleCopy}
      className={`p-1.5 rounded-lg transition-all ${
        copied
          ? "bg-green-500/20 text-green-400"
          : "bg-layer-2/50 text-muted hover:bg-zinc-700 hover:text-white"
      } ${className}`}
      title={copied ? "Copiado!" : "Copiar"}
    >
      {copied ? <Check className="w-3.5 h-3.5" /> : <Copy className="w-3.5 h-3.5" />}
    </button>
  );
}

interface MarkdownButtonProps {
  content: string;
  filename?: string;
  className?: string;
}

export function MarkdownButton({ content, filename = "content.md", className = "" }: MarkdownButtonProps) {
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  const handleDownload = () => {
    const blob = new Blob([content], { type: "text/markdown" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };

  return (
    <button
      onClick={handleDownload}
      className={`p-1.5 rounded-lg transition-all bg-layer-2/50 text-muted hover:bg-indigo-500/20 hover:text-indigo-400 ${className}`}
      title="Exportar como Markdown"
    >
      <FileCode className="w-3.5 h-3.5" />
    </button>
  );
}

interface CopyMdButtonsProps {
  content: string;
  markdownContent?: string;
  filename?: string;
  className?: string;
}

export function CopyMdButtons({ content, markdownContent, filename, className = "" }: CopyMdButtonsProps) {
  const canCopy = useCanCopy();

  if (!canCopy) return null;

  return (
    <div className={`flex items-center gap-1 ${className}`}>
      <CopyButton content={content} />
      <MarkdownButton content={markdownContent || content} filename={filename} />
    </div>
  );
}

export default CopyMdButtons;

```

---
#### `components/documentation/CurrentStateTab.tsx`

```
"use client";

import {
  Compass,
  CheckCircle2,
  Clock,
  AlertTriangle,
  XCircle,
  ArrowRight,
  Target,
  Zap,
  Shield,
  TrendingUp,
  Calendar,
  Gauge,
} from "lucide-react";

export default function CurrentStateTab() {
  const completedFeatures = [
    { name: "Dashboard com Boot Sequence", priority: "Alta", impact: "Alto" },
    { name: "Workflow de 6 etapas", priority: "Crítica", impact: "Crítico" },
    { name: "Input de tema e configuração", priority: "Crítica", impact: "Alto" },
    { name: "Pesquisa com IA", priority: "Alta", impact: "Alto" },
    { name: "Geração de roteiro", priority: "Crítica", impact: "Crítico" },
    { name: "Geração de títulos/thumbnails", priority: "Alta", impact: "Alto" },
    { name: "Geração de descrição e tags", priority: "Alta", impact: "Alto" },
    { name: "Seleção de trilha sonora", priority: "Média", impact: "Médio" },
    { name: "Sistema de diretrizes", priority: "Média", impact: "Alto" },
    { name: "Configuração de API Keys", priority: "Crítica", impact: "Crítico" },
    { name: "Persistência de estado", priority: "Alta", impact: "Alto" },
    { name: "Prisma Schema + Database", priority: "Crítica", impact: "Crítico" },
    { name: "Inngest Video Pipeline", priority: "Crítica", impact: "Crítico" },
    { name: "AI Agents (Research + Script)", priority: "Alta", impact: "Alto" },
    { name: "Sistema de Aprovação Humana", priority: "Alta", impact: "Alto" },
    { name: "Notificações por Email (Resend)", priority: "Média", impact: "Alto" },
  ];

  const partialFeatures = [
    { name: "Upload YouTube", progress: 85, blocker: "OAuth final config", priority: "Alta" },
    { name: "Render de vídeo (JSON2VIDEO)", progress: 75, blocker: "Integração API", priority: "Alta" },
    { name: "TTS (ElevenLabs)", progress: 60, blocker: "API quota", priority: "Média" },
    { name: "Storyboard editor", progress: 50, blocker: "UX refinement", priority: "Média" },
    { name: "Migração localStorage → Prisma", progress: 40, blocker: "Refatoração frontend", priority: "Alta" },
  ];

  const notStartedFeatures = [
    { name: "Multi-idioma interface", complexity: "Média", priority: "Baixa", impact: "Médio" },
    { name: "Histórico de vídeos", complexity: "Baixa", priority: "Média", impact: "Alto" },
    { name: "Templates de vídeo", complexity: "Média", priority: "Média", impact: "Alto" },
    { name: "Batch processing", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Analytics dashboard", complexity: "Alta", priority: "Baixa", impact: "Médio" },
    { name: "Colaboração multi-usuário", complexity: "Alta", priority: "Baixa", impact: "Baixo" },
  ];

  const technicalDebt = {
    high: [
      { name: "Error boundaries", description: "Implementar em todas as páginas", impact: "Estabilidade", effort: "Baixo" },
      { name: "Loading states", description: "Padronizar em todas as operações", impact: "UX", effort: "Médio" },
      { name: "Testes E2E", description: "Adicionar testes com Playwright", impact: "Qualidade", effort: "Alto" },
    ],
    medium: [
      { name: "Code splitting", description: "Otimizar bundle com lazy loading", impact: "Performance", effort: "Médio" },
      { name: "API rate limiting", description: "Implementar no frontend", impact: "Custo", effort: "Médio" },
      { name: "Retry logic", description: "Melhorar para falhas de API", impact: "Resiliência", effort: "Médio" },
    ],
    low: [
      { name: "CSS cleanup", description: "Remover estilos não utilizados", impact: "Manutenção", effort: "Baixo" },
      { name: "Type coverage", description: "Aumentar coverage de tipos", impact: "DX", effort: "Médio" },
      { name: "Documentation", description: "Documentar funções complexas", impact: "Manutenção", effort: "Médio" },
    ],
  };

  const risks = {
    technical: [
      { risk: "API rate limits", probability: "Média", impact: "Alto", mitigation: "Cache, retry, fallbacks" },
      { risk: "Custo de APIs", probability: "Alta", impact: "Médio", mitigation: "Monitoramento, alertas" },
      { risk: "Mudanças em APIs externas", probability: "Média", impact: "Alto", mitigation: "Versionamento, abstrações" },
      { risk: "Performance em mobile", probability: "Baixa", impact: "Médio", mitigation: "Testing, otimização" },
    ],
    business: [
      { risk: "Políticas YouTube", probability: "Média", impact: "Crítico", mitigation: "Compliance, guidelines" },
      { risk: "Competição", probability: "Alta", impact: "Médio", mitigation: "Inovação, UX" },
      { risk: "Dependência de IAs", probability: "Média", impact: "Alto", mitigation: "Multi-provider" },
    ],
  };

  const getPriorityColor = (priority: string) => {
    switch (priority.toLowerCase()) {
      case "crítica":
        return "bg-red-500/20 text-red-400";
      case "alta":
        return "bg-orange-500/20 text-orange-400";
      case "média":
        return "bg-yellow-500/20 text-yellow-400";
      case "baixa":
        return "bg-green-500/20 text-green-400";
      default:
        return "bg-zinc-500/20 text-muted";
    }
  };

  const getImpactColor = (impact: string) => {
    switch (impact.toLowerCase()) {
      case "crítico":
        return "bg-red-500/20 text-red-400";
      case "alto":
        return "bg-purple-500/20 text-purple-400";
      case "médio":
        return "bg-blue-500/20 text-blue-400";
      case "baixo":
        return "bg-zinc-500/20 text-muted";
      default:
        return "bg-zinc-500/20 text-muted";
    }
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-900/50 via-pink-900/50 to-rose-900/50 border border-rose-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-rose-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-rose-500/20 rounded-xl">
              <Compass className="w-8 h-8 text-rose-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Status Geral do Projeto
              </h2>
              <p className="text-rose-300">Estado atual e roadmap</p>
            </div>
          </div>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
            {[
              { label: "Versão", value: "2.0.0", icon: Target },
              { label: "Status", value: "Em Produção", icon: CheckCircle2 },
              { label: "Última Atualização", value: "Janeiro 2026", icon: Calendar },
              { label: "Uptime", value: "99.9%", icon: Gauge },
            ].map((stat, i) => (
              <div
                key={i}
                className="bg-layer-1/50 rounded-lg p-4 border border-subtle"
              >
                <stat.icon className="w-5 h-5 text-rose-400 mb-2" />
                <p className="text-xs text-muted">{stat.label}</p>
                <p className="text-lg font-bold text-white">{stat.value}</p>
              </div>
            ))}
          </div>

          <div className="mt-4">
            <p className="text-sm text-muted">
              URL de Produção:{" "}
              <a
                href="https://emergecy-youtube.vercel.app"
                target="_blank"
                rel="noopener noreferrer"
                className="text-rose-400 hover:text-rose-300 underline"
              >
                https://emergecy-youtube.vercel.app
              </a>
            </p>
          </div>
        </div>
      </section>

      {/* Completed Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <CheckCircle2 className="w-6 h-6 text-green-400" />
          Funcionalidades Concluídas
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <div className="bg-green-500/10 border-b border-subtle px-4 py-3 flex items-center justify-between">
            <span className="font-medium text-green-400">Core Features</span>
            <span className="text-sm text-muted">
              {completedFeatures.length} funcionalidades
            </span>
          </div>
          <div className="p-4 max-h-96 overflow-y-auto">
            <table className="w-full text-sm">
              <thead>
                <tr className="text-muted text-xs uppercase">
                  <th className="text-left pb-3">Funcionalidade</th>
                  <th className="text-left pb-3">Prioridade</th>
                  <th className="text-left pb-3">Impacto</th>
                  <th className="text-left pb-3">Status</th>
                </tr>
              </thead>
              <tbody>
                {completedFeatures.map((feature, i) => (
                  <tr key={i} className="border-t border-subtle">
                    <td className="py-3 text-white">{feature.name}</td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                        {feature.priority}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                        {feature.impact}
                      </span>
                    </td>
                    <td className="py-3">
                      <span className="flex items-center gap-1 text-green-400">
                        <CheckCircle2 className="w-4 h-4" />
                        Concluído
                      </span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </section>

      {/* Partial Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Clock className="w-6 h-6 text-yellow-400" />
          Funcionalidades Parciais
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {partialFeatures.map((feature, i) => (
            <div
              key={i}
              className="bg-layer-1 border border-subtle rounded-xl p-5"
            >
              <div className="flex items-center justify-between mb-3">
                <h4 className="font-semibold text-white">{feature.name}</h4>
                <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                  {feature.priority}
                </span>
              </div>

              <div className="mb-3">
                <div className="flex items-center justify-between text-sm mb-1">
                  <span className="text-muted">Progresso</span>
                  <span className="text-white font-medium">{feature.progress}%</span>
                </div>
                <div className="w-full h-2 bg-layer-2 rounded-full overflow-hidden">
                  <div
                    className="h-full bg-gradient-to-r from-yellow-500 to-amber-500 rounded-full"
                    style={{ width: `${feature.progress}%` }}
                  />
                </div>
              </div>

              <div className="flex items-center gap-2 text-sm">
                <AlertTriangle className="w-4 h-4 text-yellow-400" />
                <span className="text-muted">Bloqueio:</span>
                <span className="text-yellow-400">{feature.blocker}</span>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Not Started Features */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <XCircle className="w-6 h-6 text-muted" />
          Funcionalidades Não Iniciadas
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <table className="w-full text-sm">
            <thead className="bg-layer-2/50">
              <tr className="text-muted text-xs uppercase">
                <th className="text-left p-4">Funcionalidade</th>
                <th className="text-left p-4">Complexidade</th>
                <th className="text-left p-4">Prioridade</th>
                <th className="text-left p-4">Impacto</th>
              </tr>
            </thead>
            <tbody>
              {notStartedFeatures.map((feature, i) => (
                <tr key={i} className="border-t border-subtle hover:bg-layer-2/30">
                  <td className="p-4 text-secondary">{feature.name}</td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${
                      feature.complexity === "Alta" ? "bg-red-500/20 text-red-400" :
                      feature.complexity === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                      "bg-green-500/20 text-green-400"
                    }`}>
                      {feature.complexity}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getPriorityColor(feature.priority)}`}>
                      {feature.priority}
                    </span>
                  </td>
                  <td className="p-4">
                    <span className={`px-2 py-1 rounded text-xs ${getImpactColor(feature.impact)}`}>
                      {feature.impact}
                    </span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </section>

      {/* Technical Debt */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <AlertTriangle className="w-6 h-6 text-amber-400" />
          Dívidas Técnicas
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* High Priority */}
          <div className="bg-red-500/5 border border-red-500/20 rounded-xl overflow-hidden">
            <div className="bg-red-500/10 px-4 py-3 border-b border-red-500/20">
              <h4 className="font-semibold text-red-400">Alta Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.high.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Medium Priority */}
          <div className="bg-yellow-500/5 border border-yellow-500/20 rounded-xl overflow-hidden">
            <div className="bg-yellow-500/10 px-4 py-3 border-b border-yellow-500/20">
              <h4 className="font-semibold text-yellow-400">Média Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.medium.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Low Priority */}
          <div className="bg-green-500/5 border border-green-500/20 rounded-xl overflow-hidden">
            <div className="bg-green-500/10 px-4 py-3 border-b border-green-500/20">
              <h4 className="font-semibold text-green-400">Baixa Prioridade</h4>
            </div>
            <div className="p-4 space-y-3">
              {technicalDebt.low.map((item, i) => (
                <div key={i} className="p-3 bg-layer-1/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.name}</p>
                  <p className="text-xs text-muted mt-1">{item.description}</p>
                  <div className="flex gap-2 mt-2">
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      {item.impact}
                    </span>
                    <span className="px-2 py-0.5 bg-layer-2 rounded text-xs text-muted">
                      Esforço: {item.effort}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Risks */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Riscos Conhecidos
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Technical Risks */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-violet-500/10 px-4 py-3 border-b border-subtle">
              <h4 className="font-semibold text-violet-400">Riscos Técnicos</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.technical.map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-muted">
                    <span className="text-muted">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Business Risks */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-rose-500/10 px-4 py-3 border-b border-subtle">
              <h4 className="font-semibold text-rose-400">Riscos de Negócio</h4>
            </div>
            <div className="p-4 space-y-3">
              {risks.business.map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-medium text-white text-sm">{item.risk}</p>
                    <div className="flex gap-2">
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        item.probability === "Alta" ? "bg-red-500/20 text-red-400" :
                        item.probability === "Média" ? "bg-yellow-500/20 text-yellow-400" :
                        "bg-green-500/20 text-green-400"
                      }`}>
                        P: {item.probability}
                      </span>
                      <span className={`px-2 py-0.5 rounded text-xs ${getImpactColor(item.impact)}`}>
                        I: {item.impact}
                      </span>
                    </div>
                  </div>
                  <p className="text-xs text-muted">
                    <span className="text-muted">Mitigação:</span> {item.mitigation}
                  </p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Future Evolution */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <TrendingUp className="w-6 h-6 text-cyan-400" />
          Sugestões de Evolução Futura
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Short Term */}
          <div className="bg-gradient-to-b from-cyan-900/30 to-zinc-900 border border-cyan-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-cyan-500/20 rounded-lg flex items-center justify-center">
                <Zap className="w-4 h-4 text-cyan-400" />
              </div>
              <div>
                <h4 className="font-semibold text-cyan-400">Curto Prazo</h4>
                <p className="text-xs text-muted">1-3 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                { name: "Completar Upload YouTube", priority: "Crítica" },
                { name: "Implementar Render Local", priority: "Alta" },
                { name: "Adicionar Testes", priority: "Alta" },
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-cyan-400 mt-0.5" />
                  <div>
                    <p className="text-sm text-white">{item.name}</p>
                    <span className={`text-xs ${getPriorityColor(item.priority)}`}>
                      {item.priority}
                    </span>
                  </div>
                </li>
              ))}
            </ul>
          </div>

          {/* Medium Term */}
          <div className="bg-gradient-to-b from-purple-900/30 to-zinc-900 border border-purple-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center">
                <Target className="w-4 h-4 text-purple-400" />
              </div>
              <div>
                <h4 className="font-semibold text-purple-400">Médio Prazo</h4>
                <p className="text-xs text-muted">3-6 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "Templates de Vídeo",
                "Histórico e Analytics",
                "Melhorias de UX",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-purple-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>

          {/* Long Term */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-5">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center">
                <TrendingUp className="w-4 h-4 text-amber-400" />
              </div>
              <div>
                <h4 className="font-semibold text-amber-400">Longo Prazo</h4>
                <p className="text-xs text-muted">6-12 meses</p>
              </div>
            </div>
            <ul className="space-y-3">
              {[
                "API Pública",
                "Marketplace de Assets",
                "Versão Enterprise",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2">
                  <ArrowRight className="w-4 h-4 text-amber-400 mt-0.5" />
                  <p className="text-sm text-white">{item}</p>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Conclusion */}
      <section className="bg-gradient-to-r from-indigo-900/30 via-purple-900/30 to-pink-900/30 border border-purple-500/20 rounded-xl p-6">
        <h3 className="text-xl font-bold text-white mb-4">Conclusão</h3>
        <p className="text-secondary mb-4">
          O ORION está em estágio de{" "}
          <span className="text-green-400 font-semibold">produção funcional</span> com
          as principais features de geração de conteúdo operacionais. Os próximos
          passos críticos são:
        </p>
        <ol className="space-y-2 text-secondary">
          {[
            "Completar a integração de upload YouTube",
            "Implementar render de vídeo completo",
            "Adicionar cobertura de testes",
            "Resolver dívidas técnicas de alta prioridade",
          ].map((item, i) => (
            <li key={i} className="flex items-center gap-3">
              <span className="w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-400 text-sm font-bold">
                {i + 1}
              </span>
              {item}
            </li>
          ))}
        </ol>
        <p className="text-muted mt-4 text-sm">
          O sistema está preparado para escalar e evoluir conforme as necessidades
          dos usuários.
        </p>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-rose-900/20 border border-rose-500/20 rounded-xl">
        <p className="text-sm text-rose-300 italic text-center">
          Este documento reflete o estado atual do ORION e serve como
          roadmap para decisões de desenvolvimento futuro.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/DecisionsTab.tsx`

```
"use client";

import AnimatedSection from "./AnimatedSection";
import {
  Brain,
  GitBranch,
  CheckCircle2,
  AlertTriangle,
  Lightbulb,
  Server,
  Database,
  Mail,
  Workflow,
  Zap,
} from "lucide-react";

export default function DecisionsTab() {
  return (
    <div className="space-y-8">
      {/* Header */}
      <AnimatedSection delay={0}>
        <div className="bg-gradient-to-r from-violet-600/20 to-purple-600/20 border border-violet-500/30 rounded-2xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <GitBranch className="w-8 h-8 text-violet-400" />
            <h2 className="text-2xl font-bold text-white">
              Decisoes Arquiteturais - Claude Code
            </h2>
          </div>
          <p className="text-secondary">
            Registro historico de todas as decisoes arquiteturais, debates e consensos
            alcancados durante o desenvolvimento do ORION. Este documento serve como
            auditoria tecnica e memoria do projeto.
          </p>
        </div>
      </AnimatedSection>

      {/* Sessao 1: O Grande Debate - Janeiro 2026 */}
      <AnimatedSection delay={0.1}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Brain className="w-6 h-6 text-amber-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessao 1: O Grande Debate Arquitetural (Janeiro 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Necessidade de migrar de localStorage para persistencia real em banco de dados,
              implementar workflows duraveis para processos longos (renderizacao de video,
              deep research), e criar sistema de aprovacao humana (human-in-the-loop).
            </p>
          </div>

          {/* Participantes */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Participantes do Debate</h4>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">🤖</span>
                  <span className="font-medium text-white">Claude (Anthropic)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Conservadora e battle-tested. Priorizou estabilidade com Inngest.
                </p>
              </div>
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">🌟</span>
                  <span className="font-medium text-white">Gemini (Google)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Bleeding edge. Descobriu ToolLoopAgent no AI SDK 6.
                </p>
              </div>
              <div className="bg-layer-2/50 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">💬</span>
                  <span className="font-medium text-white">ChatGPT (OpenAI)</span>
                </div>
                <p className="text-muted text-sm">
                  Posicao: Validador critico. Confirmou existencia do SDK 6 e cautela com beta.
                </p>
              </div>
            </div>
          </div>

          {/* Pontos Criticos Identificados */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-red-400 mb-3 flex items-center gap-2">
              <AlertTriangle className="w-5 h-5" />
              Pontos Criticos Identificados
            </h4>
            <div className="space-y-3">
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">1. Vercel Functions Timeout</p>
                <p className="text-muted text-sm">
                  Limite de 300s (5 min) no Vercel Pro. Processos como renderizacao podem levar
                  minutos/horas. Solucao: workflows duraveis externos.
                </p>
              </div>
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">2. Vercel Workflow DevKit em Beta</p>
                <p className="text-muted text-sm">
                  Embora exista, ainda esta em Public Beta. Risco de bugs criticos em producao.
                </p>
              </div>
              <div className="bg-red-950/30 border border-red-800/50 rounded-lg p-4">
                <p className="text-red-300 font-medium mb-1">3. AI SDK Versao Atual</p>
                <p className="text-muted text-sm">
                  Projeto usa AI SDK 4.3.19. Para usar ToolLoopAgent, precisa migrar para v6.
                </p>
              </div>
            </div>
          </div>

          {/* Consenso Alcancado */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-green-400 mb-3 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              Consenso Unanime: OPCAO B - Arquitetura Hibrida
            </h4>
            <div className="bg-green-950/30 border border-green-800/50 rounded-lg p-4">
              <p className="text-secondary mb-4">
                Apos debate intenso, as tres IAs chegaram a um consenso:
              </p>
              <ul className="space-y-2 text-sm">
                <li className="flex items-start gap-2">
                  <Zap className="w-4 h-4 text-yellow-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Cerebro (AI SDK 6 + ToolLoopAgent):</strong> Inteligencia
                    de ultima geracao para agentes autonomos.
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Server className="w-4 h-4 text-blue-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Corpo Blindado (Inngest):</strong> Durabilidade,
                    retries automaticos, sleep nativo, battle-tested (100M+ execucoes/dia).
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Database className="w-4 h-4 text-green-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Persistencia (Vercel Postgres + Prisma):</strong> Estado
                    persistente cross-device, relacional, migracao controlada.
                  </span>
                </li>
                <li className="flex items-start gap-2">
                  <Mail className="w-4 h-4 text-purple-400 mt-1 flex-shrink-0" />
                  <span className="text-secondary">
                    <strong className="text-white">Notificacao (Resend):</strong> 10K emails/mes gratis
                    para aprovacao humana.
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Stack Final Decidida */}
      <AnimatedSection delay={0.2}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Workflow className="w-6 h-6 text-cyan-400" />
            <h3 className="text-xl font-semibold text-white">
              Stack Tecnica Final Aprovada
            </h3>
          </div>

          <div className="overflow-x-auto">
            <table className="w-full text-sm">
              <thead>
                <tr className="border-b border-subtle">
                  <th className="text-left py-3 px-4 text-muted font-medium">Camada</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Tecnologia</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Justificativa</th>
                  <th className="text-left py-3 px-4 text-muted font-medium">Custo</th>
                </tr>
              </thead>
              <tbody>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Intelligence</td>
                  <td className="py-3 px-4 text-cyan-400">AI SDK 6 + ToolLoopAgent</td>
                  <td className="py-3 px-4 text-muted">Agentes autonomos com loop de ferramentas</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Orchestration</td>
                  <td className="py-3 px-4 text-cyan-400">Inngest</td>
                  <td className="py-3 px-4 text-muted">Workflows duraveis, 100K runs/mes free</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Persistence</td>
                  <td className="py-3 px-4 text-cyan-400">Vercel Postgres + Prisma</td>
                  <td className="py-3 px-4 text-muted">256MB incluido no Pro, ORM type-safe</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Storage</td>
                  <td className="py-3 px-4 text-cyan-400">Vercel Blob</td>
                  <td className="py-3 px-4 text-muted">1GB incluido no Pro para videos/audios</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr className="border-b border-subtle">
                  <td className="py-3 px-4 text-white font-medium">Notifications</td>
                  <td className="py-3 px-4 text-cyan-400">Resend</td>
                  <td className="py-3 px-4 text-muted">10K emails/mes para aprovacao</td>
                  <td className="py-3 px-4 text-green-400">$0</td>
                </tr>
                <tr>
                  <td className="py-3 px-4 text-white font-bold">TOTAL</td>
                  <td className="py-3 px-4"></td>
                  <td className="py-3 px-4"></td>
                  <td className="py-3 px-4 text-green-400 font-bold">$20/mes (Vercel Pro)</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </AnimatedSection>

      {/* Arquitetura Visual */}
      <AnimatedSection delay={0.3}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Lightbulb className="w-6 h-6 text-yellow-400" />
            <h3 className="text-xl font-semibold text-white">
              Arquitetura do Pipeline de Video
            </h3>
          </div>

          <div className="bg-zinc-950 rounded-lg p-4 overflow-x-auto">
            <pre className="text-xs sm:text-sm text-secondary whitespace-pre font-mono">
{`┌─────────────────────────────────────────────────────────────────┐
│  AI SDK 6 (ToolLoopAgent)          Inngest                      │
│  ┌─────────────────────┐           ┌─────────────────────┐      │
│  │ Research Agent      │──────────>│ step.run()          │      │
│  │ (Gemini 2.0)        │           │ step.sleep()        │      │
│  └─────────────────────┘           │ step.waitForEvent() │      │
│  ┌─────────────────────┐           │ Retry automatico    │      │
│  │ Script Agent        │──────────>│                     │      │
│  │ (Claude 3.5)        │           └─────────────────────┘      │
│  └─────────────────────┘                    │                   │
│                                             ▼                   │
│                        ┌────────────────────────────────────┐   │
│                        │ Vercel Postgres + Blob             │   │
│                        └────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘

FLUXO DO WORKFLOW:
─────────────────────────────────────────────────────────────────────
1. Deep Research (Gemini)    →  Pesquisa trends e referencias
2. Script Generation (Claude) →  Gera roteiro otimizado
3. AGUARDAR APROVACAO        →  Email + step.waitForEvent('7d')
4. Storyboard Generation     →  Cria cenas com prompts visuais
5. Render (JSON2VIDEO)       →  step.sleep() enquanto renderiza
6. Upload YouTube            →  Com retry automatico`}
            </pre>
          </div>
        </div>
      </AnimatedSection>

      {/* Modelo de Dados */}
      <AnimatedSection delay={0.4}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Database className="w-6 h-6 text-emerald-400" />
            <h3 className="text-xl font-semibold text-white">
              Modelo de Dados (Prisma Schema)
            </h3>
          </div>

          <div className="bg-zinc-950 rounded-lg p-4 overflow-x-auto">
            <pre className="text-xs sm:text-sm text-green-400 whitespace-pre font-mono">
{`model Project {
  id          String         @id @default(cuid())
  name        String
  status      ProjectStatus  @default(DRAFT)
  createdAt   DateTime       @default(now())

  // Relacionamentos
  context     Context?
  research    Research?
  script      Script?
  storyboard  Storyboard?
  render      Render?
  upload      Upload?
  workflow    WorkflowState?
}

enum ProjectStatus {
  DRAFT | RESEARCHING | SCRIPTING | AWAITING_APPROVAL
  APPROVED | RENDERING | UPLOADING | COMPLETED | FAILED
}

model WorkflowState {
  inngestRunId     String?   // ID da execucao no Inngest
  currentStep      String
  awaitingApproval Boolean   @default(false)
  approvalToken    String?   @unique
}`}
            </pre>
          </div>
        </div>
      </AnimatedSection>

      {/* Status de Implementacao */}
      <AnimatedSection delay={0.5}>
        <div className="bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-xl p-6">
          <h3 className="text-xl font-semibold text-white mb-4 flex items-center gap-2">
            <CheckCircle2 className="w-6 h-6 text-green-400" />
            Fases Implementadas
          </h3>
          <div className="space-y-3">
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 1</span>
              <span className="text-green-300 line-through">Setup Prisma + Vercel Postgres + Schema</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 2</span>
              <span className="text-green-300 line-through">Configuracao Inngest + Client + Webhook</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 3</span>
              <span className="text-green-300 line-through">Agentes AI SDK 6 (Research + Script)</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 4</span>
              <span className="text-green-300 line-through">Sistema de Aprovacao + Notificacoes</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 5</span>
              <span className="text-amber-300">Refatoracao Frontend + Migracao localStorage</span>
              <span className="text-amber-400 text-xs">(Em progresso)</span>
            </div>
            <div className="flex items-center gap-3">
              <span className="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">FASE 6</span>
              <span className="text-green-300 line-through">Design System ORION - Tokens, CSS e Documentacao</span>
              <CheckCircle2 className="w-4 h-4 text-green-400" />
            </div>
          </div>

          {/* Fase 6 - Design System Details */}
          <div className="mt-6 p-4 bg-cyan-950/30 border border-cyan-800/50 rounded-lg">
            <h4 className="text-sm font-semibold text-cyan-400 mb-3 flex items-center gap-2">
              🎨 Fase 6: Design System ORION (23/01/2026)
            </h4>
            <p className="text-muted text-sm mb-3">
              Sistema de design completo com paleta ORION (azul profundo + vermelho acento),
              glassmorphism, motion funcional e documentacao visual interativa.
            </p>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs font-mono">
              <div className="text-cyan-400">lib/design-tokens.ts</div>
              <div className="text-cyan-400">app/globals.css (atualizado)</div>
              <div className="text-cyan-400">tailwind.config.ts (atualizado)</div>
              <div className="text-cyan-400">components/design-system/ColorSwatch.tsx</div>
              <div className="text-cyan-400">components/design-system/GradientCard.tsx</div>
              <div className="text-cyan-400">components/design-system/TypographySample.tsx</div>
              <div className="text-cyan-400">components/design-system/ComponentPreview.tsx</div>
              <div className="text-cyan-400">app/documentation/design-system/page.tsx</div>
            </div>
          </div>

          <div className="mt-4 p-4 bg-layer-1/50 rounded-lg">
            <h4 className="text-sm font-semibold text-white mb-2">Arquivos Anteriores (Fases 1-4):</h4>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs font-mono">
              <div className="text-muted">prisma/schema.prisma</div>
              <div className="text-muted">lib/db/prisma.ts</div>
              <div className="text-muted">lib/inngest/client.ts</div>
              <div className="text-muted">lib/inngest/functions/video-pipeline.ts</div>
              <div className="text-muted">lib/agents/research-agent.ts</div>
              <div className="text-muted">lib/agents/script-agent.ts</div>
              <div className="text-muted">lib/services/research.service.ts</div>
              <div className="text-muted">lib/services/script.service.ts</div>
              <div className="text-muted">lib/services/notification.service.ts</div>
              <div className="text-muted">app/api/inngest/route.ts</div>
              <div className="text-muted">app/api/approve/route.ts</div>
              <div className="text-muted">app/approve/[token]/page.tsx</div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Sessao 2: Rebranding para ORION - 23/01/2026 */}
      <AnimatedSection delay={0.5}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Zap className="w-6 h-6 text-blue-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessão 2: Rebranding para ORION (23 de Janeiro de 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Decisão de renomear o projeto de &quot;Emergency YouTube&quot; para <strong className="text-white">ORION</strong>,
              visando uma identidade de marca mais profissional, escalável e alinhada com a visão de um sistema
              de automação inteligente de classe enterprise.
            </p>
          </div>

          {/* Data e Motivação */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Motivação</h4>
            <div className="space-y-3">
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">1. Identidade Profissional</p>
<p className="text-muted text-sm">
                  Nome &quot;ORION&quot; transmite inovação, tecnologia e navegação (guia/orientação),
                  alinhado com a proposta de guiar criadores de conteúdo.
                </p>
              </div>
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">2. Escalabilidade de Marca</p>
                <p className="text-muted text-sm">
                  Permite expansão além do YouTube (TikTok, Instagram, podcasts) sem limitação no nome.
                </p>
              </div>
              <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
                <p className="text-blue-300 font-medium mb-1">3. White Label Implementado</p>
                <p className="text-muted text-sm">
                  Com o Design System ORION já implementado, o rebranding consolida a identidade visual unificada.
                </p>
              </div>
            </div>
          </div>

          {/* Decisao Final */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-green-400 mb-3 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              Decisão Implementada
            </h4>
            <div className="bg-green-950/30 border border-green-800/50 rounded-lg p-4">
              <div className="space-y-2 text-sm">
                <p className="text-secondary">
                  <strong className="text-white">Nome Oficial:</strong> ORION
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Nome Anterior:</strong> Emergency YouTube (mantido em documentação histórica)
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Data:</strong> 23 de Janeiro de 2026
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Logos:</strong> logo-orion-branca-transp-grande.png e pequena.png
                </p>
                <p className="text-secondary">
                  <strong className="text-white">Blob Storage:</strong> orion-storage (criado na Vercel)
                </p>
              </div>
            </div>
          </div>

          {/* Implementacao Tecnica */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Implementação Técnica</h4>
            <div className="space-y-2 text-sm">
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Substituição global: &quot;Emergency YouTube&quot; → &quot;ORION&quot; (17 arquivos)</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">package.json: &quot;emergecy-youtube&quot; → &quot;orion&quot;</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Logos adicionadas em /public/assets/</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Blob Storage &quot;orion-storage&quot; criado na Vercel</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">BLOB_READ_WRITE_TOKEN configurado nas variáveis de ambiente</span>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                <span className="text-secondary">Documentação completa atualizada em components/documentation/</span>
              </div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Sessao 3: Visual Upgrade State of the Art - 24/01/2026 */}
      <AnimatedSection delay={0.6}>
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-2 mb-4">
            <Zap className="w-6 h-6 text-cyan-400" />
            <h3 className="text-xl font-semibold text-white">
              Sessão 3: Visual Upgrade State of the Art (24 de Janeiro de 2026)
            </h3>
          </div>

          {/* Contexto */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">Contexto</h4>
            <p className="text-secondary text-sm leading-relaxed">
              Upgrade visual completo para atingir nível &quot;State of the Art&quot; (Vercel/Linear/Raycast).
              Implementação de visualizações de dados interativas, design tokens forçados, Bento Grid refinado,
              e consistência visual em todas as páginas internas do sistema.
            </p>
          </div>

          {/* PART 1: Analytics Infrastructure */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-cyan-400 mb-3">PART 1: Analytics &amp; Charts Infrastructure</h4>
            <div className="space-y-3">
              <div className="bg-cyan-950/30 border border-cyan-800/50 rounded-lg p-4">
                <p className="text-cyan-300 font-medium mb-2">Instalações</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">recharts (^2.x) - Biblioteca de gráficos React</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">@vercel/analytics - Monitoramento de usuários</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">@vercel/speed-insights - Performance metrics</span>
                  </div>
                </div>
                <p className="text-muted text-xs mt-2">Commit: aac0b1a</p>
              </div>
            </div>
          </div>

          {/* PART 2: Design Tokens Integration */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-blue-400 mb-3">PART 2: Design Tokens Forçados no Tailwind</h4>
            <div className="bg-blue-950/30 border border-blue-800/50 rounded-lg p-4">
              <p className="text-blue-300 font-medium mb-2">Mudança Crítica: Single Source of Truth</p>
              <p className="text-secondary text-sm mb-3">
                Tailwind config agora importa diretamente de <code className="text-cyan-400">lib/design-tokens.ts</code> ao invés de usar CSS variables.
                Garante consistência absoluta e TypeScript safety.
              </p>
              <div className="space-y-1 text-sm">
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Cores: backgrounds.*, surfaces.*, borders.*, text.*, brand.*, accent.*, semantic.*</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Gradientes: todos os gradients.* mapeados para backgroundImage</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Sombras: designShadows.* com glow variants</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Motion: duration e easing functions do motion.*</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">Slate 100-900: Paleta completa com opacidade correta</span>
                </div>
              </div>
              <p className="text-muted text-xs mt-2">Commit: f79f131</p>
            </div>
          </div>

          {/* PART 3: Bento Grid + Recharts */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-emerald-400 mb-3">PART 3: Bento Grid + Recharts + Animations WOW Factor</h4>
            <div className="space-y-3">
              <div className="bg-emerald-950/30 border border-emerald-800/50 rounded-lg p-4">
                <p className="text-emerald-300 font-medium mb-2">Visualizações Interativas (Recharts)</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">AreaChart com gradiente - Disponibilidade API (últimos 60min)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">RadialBarChart - Saúde do Sistema (percentual circular)</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Tooltips customizados com tema ORION</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Gradientes dinâmicos nos gráficos (emerald, cyan)</span>
                  </div>
                </div>
              </div>
              <div className="bg-emerald-950/30 border border-emerald-800/50 rounded-lg p-4">
                <p className="text-emerald-300 font-medium mb-2">Micro-interações</p>
                <div className="space-y-1 text-sm">
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">active:scale-95 em TODOS os botões</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">Framer Motion whileHover/whileTap</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                    <span className="text-secondary">AnimatePresence para transições suaves</span>
                  </div>
                </div>
                <p className="text-muted text-xs mt-2">Commit: bfe7c8d</p>
              </div>
            </div>
          </div>

          {/* PART 4: Design Consistency */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-violet-400 mb-3">PART 4: Consistência de Design nas Páginas Internas</h4>
            <div className="bg-violet-950/30 border border-violet-800/50 rounded-lg p-4">
              <p className="text-violet-300 font-medium mb-2">Workflow Page Modernização</p>
              <div className="space-y-1 text-sm mb-3">
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">20+ substituições: zinc-*/gray-* → design tokens (text-muted, bg-layer-*, etc.)</span>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5" />
                  <span className="text-secondary">100% consistente com ORION design system</span>
                </div>
              </div>
              <p className="text-muted text-sm">
                <strong className="text-white">Próximo:</strong> 13 arquivos restantes identificados para atualização
                (step/1-input, step/2-research, step/4-proposal, settings, approve/*, documentation/*)
              </p>
              <p className="text-muted text-xs mt-2">Commit: 5578edd</p>
            </div>
          </div>

          {/* Status Atual */}
          <div className="mb-6">
            <h4 className="text-lg font-medium text-amber-400 mb-3 flex items-center gap-2">
              <AlertTriangle className="w-5 h-5" />
              Status Atual e Próximos Passos
            </h4>
            <div className="bg-amber-950/30 border border-amber-800/50 rounded-lg p-4">
              <p className="text-amber-300 font-medium mb-2">Em Progresso</p>
              <div className="space-y-1 text-sm">
                <div className="text-secondary">✅ Dashboard: State-of-the-art com Recharts</div>
                <div className="text-secondary">✅ Design Tokens: Fully integrated</div>
                <div className="text-secondary">✅ Workflow Page: Modernizado</div>
                <div className="text-amber-300">⏳ Páginas Internas: 13 arquivos pendentes (step/*, settings, approve/*, documentation/*)</div>
                <div className="text-amber-300">⏳ Glow Effects: Aplicar referências visuais (AlphaGPT style)</div>
                <div className="text-amber-300">⏳ Logo ORION: Integrar marca oficial</div>
                <div className="text-amber-300">⏳ YouTube Connection: Corrigir loading infinito</div>
              </div>
            </div>
          </div>
        </div>
      </AnimatedSection>

      {/* Footer */}
      <AnimatedSection delay={0.7}>
        <div className="bg-layer-2/30 rounded-xl p-4 text-center">
          <p className="text-muted text-sm">
            Documento atualizado em: 24/01/2026 | Última decisão: Visual Upgrade State of the Art (em progresso)
          </p>
          <p className="text-disabled text-xs mt-1">
            Participantes: Claude (Anthropic), Gemini (Google), ChatGPT (OpenAI) | Deploy: Vercel Pro
          </p>
        </div>
      </AnimatedSection>
    </div>
  );
}

```

---
#### `components/documentation/GenesisTab.tsx`

```
"use client";

import {
  Lightbulb,
  Target,
  Code2,
  CheckCircle2,
  XCircle,
  Puzzle,
  Layers,
  Eye,
  Shield,
  FileText,
  Zap,
  Brain,
  Users,
  Clock,
  DollarSign,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

export default function GenesisTab() {
  return (
    <div className="space-y-12">
      {/* Hero Section */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-900/50 via-indigo-900/50 to-purple-900/50 border border-purple-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-purple-500/20 rounded-xl">
              <Lightbulb className="w-8 h-8 text-purple-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Por Que Este Sistema Foi Criado
              </h2>
              <p className="text-purple-300">A origem e propósito fundamental</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O <strong className="text-white">ORION</strong> (anteriormente ORION) nasceu de uma necessidade
            real e urgente: <span className="text-purple-400 font-semibold">democratizar a produção
            de vídeos profissionais para YouTube</span>, eliminando as barreiras técnicas, financeiras
            e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.
          </p>
        </div>
      </section>

      {/* The Problem */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Target className="w-6 h-6 text-red-400" />
            O Problema Fundamental
          </h3>
          <CopyMdButtons
            content="Barreiras para criar vídeos: 1) Habilidades técnicas (edição, design, áudio), 2) Investimento (equipamentos, software), 3) Tempo extensivo (8-20h por vídeo), 4) Conhecimento SEO"
            markdownContent={`## O Problema Fundamental\n\nCriar vídeos de qualidade para YouTube tradicionalmente exige:\n\n1. **Habilidades Técnicas** - Edição de vídeo, design gráfico e produção de áudio\n2. **Investimento** - Equipamentos, software e possivelmente equipe\n3. **Tempo Extensivo** - Um vídeo de 10 min pode levar 8-20 horas de produção\n4. **Conhecimento SEO** - Otimização e descoberta do conteúdo\n\n> Esta barreira exclui milhões de potenciais criadores que têm conhecimento valioso mas não os recursos para transformá-lo em conteúdo visual.`}
            filename="problema.md"
          />
        </div>
        <p className="text-muted mb-6">
          Criar vídeos de qualidade para YouTube tradicionalmente exige:
        </p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {[
            {
              icon: Code2,
              title: "Habilidades Técnicas",
              description: "Edição de vídeo, design gráfico e produção de áudio",
              color: "text-red-400",
              bg: "bg-red-500/10",
              border: "border-red-500/20",
            },
            {
              icon: DollarSign,
              title: "Investimento",
              description: "Equipamentos, software e possivelmente equipe",
              color: "text-orange-400",
              bg: "bg-orange-500/10",
              border: "border-orange-500/20",
            },
            {
              icon: Clock,
              title: "Tempo Extensivo",
              description: "Um vídeo de 10 min pode levar 8-20 horas de produção",
              color: "text-yellow-400",
              bg: "bg-yellow-500/10",
              border: "border-yellow-500/20",
            },
            {
              icon: Brain,
              title: "Conhecimento SEO",
              description: "Otimização e descoberta do conteúdo",
              color: "text-amber-400",
              bg: "bg-amber-500/10",
              border: "border-amber-500/20",
            },
          ].map((item, index) => (
            <div
              key={index}
              className={`${item.bg} ${item.border} border rounded-xl p-5`}
            >
              <item.icon className={`w-8 h-8 ${item.color} mb-3`} />
              <h4 className="font-semibold text-white mb-2">{item.title}</h4>
              <p className="text-sm text-muted">{item.description}</p>
            </div>
          ))}
        </div>
        <div className="mt-6 p-4 bg-layer-2/50 rounded-xl border border-subtle">
          <p className="text-secondary italic">
            Essa barreira exclui milhões de potenciais criadores que têm conhecimento
            valioso mas não os recursos para transformá-lo em conteúdo visual.
          </p>
        </div>
      </section>

      {/* The Solution */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Zap className="w-6 h-6 text-green-400" />
            A Solução Proposta
          </h3>
          <CopyMdButtons
            content="ORION: 1) Recebe tema, 2) Pesquisa conteúdo, 3) Gera roteiro/trilha/thumbnail/descrição, 4) Cria storyboard, 5) Renderiza vídeo, 6) Publica no YouTube"
            markdownContent={`## A Solução Proposta\n\nO ORION é um sistema de automação inteligente que:\n\n1. Recebe apenas o tema/tópico do vídeo\n2. Pesquisa e estrutura o conteúdo automaticamente\n3. Gera roteiro, trilha sonora, thumbnail e descrição\n4. Cria o storyboard com seleção de mídias\n5. Renderiza o vídeo final\n6. Publica diretamente no YouTube`}
            filename="solucao.md"
          />
        </div>
        <div className="bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/20 rounded-xl p-6">
          <p className="text-secondary mb-6">
            O ORION é um <strong className="text-green-400">sistema de automação inteligente</strong> que:
          </p>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              { num: "1", text: "Recebe apenas o tema/tópico do vídeo" },
              { num: "2", text: "Pesquisa e estrutura o conteúdo automaticamente" },
              { num: "3", text: "Gera roteiro, trilha sonora, thumbnail e descrição" },
              { num: "4", text: "Cria o storyboard com seleção de mídias" },
              { num: "5", text: "Renderiza o vídeo final" },
              { num: "6", text: "Publica diretamente no YouTube" },
            ].map((step, index) => (
              <div
                key={index}
                className="flex items-start gap-3 p-3 bg-layer-1/50 rounded-lg"
              >
                <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
                  <span className="text-white font-bold text-sm">{step.num}</span>
                </div>
                <p className="text-secondary text-sm">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Design Guidelines */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <FileText className="w-6 h-6 text-blue-400" />
            Diretrizes de Design (Prompts Fundacionais)
          </h3>
          <CopyMdButtons
            content="Diretrizes: 1) Automação Máxima com Controle Humano, 2) Qualidade Profissional, 3) Interface Intuitiva, 4) Escalabilidade"
            markdownContent={`## Diretrizes de Design\n\n### 1. Automação Máxima, Controle Humano\n- O sistema automatiza tarefas repetitivas e técnicas\n- O humano mantém controle sobre decisões criativas e editoriais\n- Cada etapa pode ser revisada e modificada antes de avançar\n\n### 2. Qualidade de Produção Profissional\n- Outputs devem ser indistinguíveis de produções manuais\n- Padrões de YouTube Creator Academy são referência\n- SEO e engagement são prioridades arquiteturais\n\n### 3. Interface Intuitiva\n- Zero curva de aprendizado para operações básicas\n- Interface guiada por workflow linear\n- Feedback visual claro em cada etapa\n\n### 4. Escalabilidade\n- Suportar múltiplos vídeos em paralelo\n- Funcionar com diferentes nichos de conteúdo\n- Permitir personalização de diretrizes por projeto`}
            filename="diretrizes-design.md"
          />
        </div>
        <div className="space-y-4">
          {[
            {
              title: "Automação Máxima, Controle Humano",
              points: [
                "O sistema automatiza tarefas repetitivas e técnicas",
                "O humano mantém controle sobre decisões criativas e editoriais",
                "Cada etapa pode ser revisada e modificada antes de avançar",
              ],
              icon: Users,
              color: "indigo",
            },
            {
              title: "Qualidade de Produção Profissional",
              points: [
                "Outputs devem ser indistinguíveis de produções manuais",
                "Padrões de YouTube Creator Academy são referência",
                "SEO e engagement são prioridades arquiteturais",
              ],
              icon: Target,
              color: "purple",
            },
            {
              title: "Interface Intuitiva",
              points: [
                "Zero curva de aprendizado para operações básicas",
                "Interface guiada por workflow linear",
                "Feedback visual claro em cada etapa",
              ],
              icon: Eye,
              color: "cyan",
            },
            {
              title: "Escalabilidade",
              points: [
                "Suportar múltiplos vídeos em paralelo",
                "Funcionar com diferentes nichos de conteúdo",
                "Permitir personalização de diretrizes por projeto",
              ],
              icon: Layers,
              color: "green",
            },
          ].map((guideline, index) => (
            <div
              key={index}
              className={`bg-${guideline.color}-500/5 border border-${guideline.color}-500/20 rounded-xl p-5`}
              style={{
                backgroundColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.05)`,
                borderColor: `rgba(var(--${guideline.color}-rgb, 99, 102, 241), 0.2)`,
              }}
            >
              <div className="flex items-center gap-3 mb-3">
                <guideline.icon className={`w-6 h-6 text-${guideline.color}-400`} />
                <h4 className="font-semibold text-white">{guideline.title}</h4>
              </div>
              <ul className="space-y-2">
                {guideline.points.map((point, i) => (
                  <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                    {point}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Architectural Decisions */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Puzzle className="w-6 h-6 text-amber-400" />
            Decisões Arquiteturais Derivadas
          </h3>
          <CopyMdButtons
            content="Por que Next.js 15? App Router, Server Components, API Routes, Vercel nativo. Por que Zustand? Simplicidade, persistência localStorage, TypeScript first. Por que 6 Etapas? Espelha produção real, validação humana, rollback."
            markdownContent={`## Decisões Arquiteturais\n\n### Por que Next.js 15?\n- App Router para roteamento moderno\n- Server Components para performance\n- API Routes para backend integrado\n- Vercel como deploy nativo\n\n### Por que Zustand?\n- Simplicidade sobre complexidade\n- Persistência nativa com localStorage\n- TypeScript first\n- Minimal boilerplate\n\n### Por que 6 Etapas?\n- Espelha produção real de vídeo\n- Validação humana em cada transição\n- Rollback para etapas anteriores\n- Clareza sobre status atual`}
            filename="decisoes-arquiteturais.md"
          />
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-zinc-700 to-zinc-800 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">N</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Next.js 15?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>App Router para roteamento moderno</li>
              <li>Server Components para performance</li>
              <li>API Routes para backend integrado</li>
              <li>Vercel como deploy nativo</li>
            </ul>
          </div>
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-amber-600 to-yellow-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">Z</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que Zustand?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>Simplicidade sobre complexidade</li>
              <li>Persistência nativa com localStorage</li>
              <li>TypeScript first</li>
              <li>Minimal boilerplate</li>
            </ul>
          </div>
          <div className="bg-layer-1 border border-subtle rounded-xl p-5">
            <div className="w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-500 rounded-xl flex items-center justify-center mb-4">
              <span className="text-xl font-bold text-white">6</span>
            </div>
            <h4 className="font-bold text-white mb-2">Por que 6 Etapas?</h4>
            <ul className="text-sm text-muted space-y-1">
              <li>Espelha produção real de vídeo</li>
              <li>Validação humana em cada transição</li>
              <li>Rollback para etapas anteriores</li>
              <li>Clareza sobre status atual</li>
            </ul>
          </div>
        </div>
      </section>

      {/* What the system does/doesn't do */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Layers className="w-6 h-6 text-cyan-400" />
          Elementos Intencionais
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="bg-green-900/20 border border-green-500/20 rounded-xl p-5">
            <h4 className="font-bold text-green-400 mb-4 flex items-center gap-2">
              <CheckCircle2 className="w-5 h-5" />
              O que o sistema FAZ:
            </h4>
            <ul className="space-y-3">
              {[
                "Pesquisa profunda sobre qualquer tema",
                "Geração de roteiros otimizados para engagement",
                "Seleção automática de mídia relevante",
                "Composição de vídeo com narração",
                "Upload direto para YouTube",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                  <CheckCircle2 className="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
          <div className="bg-red-900/20 border border-red-500/20 rounded-xl p-5">
            <h4 className="font-bold text-red-400 mb-4 flex items-center gap-2">
              <XCircle className="w-5 h-5" />
              O que o sistema NÃO FAZ (exclusões conscientes):
            </h4>
            <ul className="space-y-3">
              {[
                "Não substitui a voz humana",
                "Não gera conteúdo controverso",
                "Não garante viralização",
                "Não armazena vídeos eternamente",
              ].map((item, i) => (
                <li key={i} className="flex items-start gap-2 text-secondary text-sm">
                  <XCircle className="w-4 h-4 text-red-400 mt-0.5 flex-shrink-0" />
                  {item}
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>

      {/* Design Principles */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Shield className="w-6 h-6 text-violet-400" />
          Princípios de Design
        </h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {[
            {
              num: "1",
              title: "Transparência sobre Magia",
              description:
                "O sistema mostra claramente o que está fazendo em cada etapa, evitando caixas pretas que frustram usuários.",
            },
            {
              num: "2",
              title: "Falhas Graceful",
              description:
                "Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando completamente.",
            },
            {
              num: "3",
              title: "Dados Locais",
              description:
                "Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.",
            },
            {
              num: "4",
              title: "Documentação Viva",
              description:
                "Este próprio módulo é parte do sistema, não um documento externo que envelhece.",
            },
          ].map((principle, index) => (
            <div
              key={index}
              className="bg-layer-1/50 border border-subtle rounded-xl p-5 flex gap-4"
            >
              <div className="w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
                <span className="text-violet-400 font-bold">{principle.num}</span>
              </div>
              <div>
                <h4 className="font-semibold text-white mb-1">{principle.title}</h4>
                <p className="text-sm text-muted">{principle.description}</p>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-purple-900/20 border border-purple-500/20 rounded-xl">
        <p className="text-sm text-purple-300 italic text-center">
          Este documento representa a intenção fundacional do sistema ORION,
          servindo como referência para decisões futuras e transferência de contexto entre IAs.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/IntegrationsTab.tsx`

```
"use client";

import {
  Plug,
  AlertCircle,
  ArrowRight,
  Shield,
  Server,
  Database,
  Key,
  RefreshCw,
  Lock,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

// API/Service logos as simple text badges (would be real logos in production)
const ServiceLogo = ({ name, color }: { name: string; color: string }) => (
  <div
    className={`w-12 h-12 rounded-xl bg-gradient-to-br ${color} flex items-center justify-center text-white font-bold text-lg shadow-lg`}
  >
    {name.charAt(0)}
  </div>
);

export default function IntegrationsTab() {
  const integrations = [
    {
      name: "Inngest",
      logo: "I",
      gradient: "from-emerald-500 to-green-600",
      function: "Orquestração de workflows duráveis e pipelines de vídeo",
      criticality: "Crítica",
      criticalityColor: "bg-red-500/20 text-red-400 font-bold",
      model: "Event-driven Workflow",
      use: "Video pipeline, aprovação humana, retries",
      auth: "API Keys (INNGEST_EVENT_KEY, INNGEST_SIGNING_KEY)",
      endpoints: ["/api/inngest", "step.run()", "step.waitForEvent()"],
    },
    {
      name: "Resend",
      logo: "R",
      gradient: "from-violet-500 to-indigo-600",
      function: "Envio de emails transacionais e notificações",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "REST API",
      use: "Aprovação de roteiros, alertas",
      auth: "API Key (RESEND_API_KEY)",
      endpoints: ["POST /emails"],
    },
    {
      name: "Anthropic Claude",
      logo: "C",
      gradient: "from-amber-500 to-orange-600",
      function: "Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Claude 3.5 Sonnet / Claude 3 Opus",
      use: "Roteiros, análise, estruturação",
      auth: "API Key (ANTHROPIC_API_KEY)",
      endpoints: ["POST /v1/messages"],
    },
    {
      name: "Google Gemini",
      logo: "G",
      gradient: "from-blue-500 to-indigo-600",
      function: "Deep Research e análise de tendências",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Gemini 2.0 Flash",
      use: "Research Agent, análise de canal",
      auth: "API Key (GOOGLE_GENERATIVE_AI_API_KEY)",
      endpoints: [],
    },
    {
      name: "OpenAI",
      logo: "O",
      gradient: "from-green-500 to-emerald-600",
      function: "Geração de imagens e modelos alternativos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "GPT-4o, DALL-E 3",
      use: "Thumbnails, imagens complementares",
      auth: "API Key (OPENAI_API_KEY)",
      endpoints: ["POST /v1/chat/completions", "POST /v1/images/generations"],
    },
    {
      name: "YouTube Data API",
      logo: "Y",
      gradient: "from-red-500 to-red-600",
      function: "Upload de vídeos e gerenciamento de canal",
      criticality: "Crítica",
      criticalityColor: "bg-red-500/20 text-red-400 font-bold",
      model: "v3",
      use: "Upload, metadados, thumbnails",
      auth: "OAuth 2.0",
      endpoints: ["youtube.upload", "youtube.readonly"],
    },
    {
      name: "Pexels",
      logo: "P",
      gradient: "from-teal-500 to-cyan-600",
      function: "Busca de imagens e vídeos stock gratuitos",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "REST API",
      use: "B-roll, imagens de cena",
      auth: "API Key (PEXELS_API_KEY)",
      endpoints: ["GET /v1/search", "GET /videos/search"],
    },
    {
      name: "Pixabay",
      logo: "X",
      gradient: "from-lime-500 to-green-600",
      function: "Busca alternativa de mídia stock",
      criticality: "Baixa",
      criticalityColor: "bg-green-500/20 text-green-400",
      model: "REST API",
      use: "Fallback para Pexels",
      auth: "API Key (PIXABAY_API_KEY)",
      endpoints: [],
    },
    {
      name: "ElevenLabs",
      logo: "E",
      gradient: "from-violet-500 to-purple-600",
      function: "Text-to-Speech de alta qualidade",
      criticality: "Alta",
      criticalityColor: "bg-red-500/20 text-red-400",
      model: "Multilingual v2",
      use: "Narração do vídeo",
      auth: "API Key (ELEVENLABS_API_KEY)",
      endpoints: ["POST /v1/text-to-speech"],
    },
    {
      name: "Replicate",
      logo: "R",
      gradient: "from-pink-500 to-rose-600",
      function: "Geração de imagens via modelos open-source",
      criticality: "Moderada",
      criticalityColor: "bg-yellow-500/20 text-yellow-400",
      model: "Flux, SDXL",
      use: "Thumbnails, arte conceitual",
      auth: "API Token (REPLICATE_API_TOKEN)",
      endpoints: ["POST /v1/predictions"],
    },
  ];

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-green-900/50 via-emerald-900/50 to-green-900/50 border border-green-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-green-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-green-500/20 rounded-xl">
              <Plug className="w-8 h-8 text-green-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral das Integrações
              </h2>
              <p className="text-green-300">Arquitetura de conexões externas</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O ORION integra-se com{" "}
            <span className="text-green-400 font-semibold">múltiplos serviços externos</span>{" "}
            para fornecer suas funcionalidades. Cada integração tem um propósito
            específico e nível de criticidade definido.
          </p>
        </div>
      </section>

      {/* Integration Cards */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Server className="w-6 h-6 text-emerald-400" />
            APIs e Serviços Integrados
          </h3>
          <CopyMdButtons
            content={integrations.map(api => `${api.name}: ${api.function}`).join('\n')}
            markdownContent={`## APIs e Serviços Integrados\n\n${integrations.map(api =>
              `### ${api.name}\n- **Função:** ${api.function}\n- **Criticidade:** ${api.criticality}\n- **Modelo:** ${api.model}\n- **Uso:** ${api.use}\n- **Auth:** ${api.auth}`
            ).join('\n\n')}`}
            filename="apis-integradas.md"
          />
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {integrations.map((api, index) => (
            <div
              key={index}
              className="bg-layer-1 border border-subtle rounded-xl p-6 hover:border-subtle transition-colors"
            >
              <div className="flex items-start gap-4 mb-4">
                <ServiceLogo name={api.name} color={api.gradient} />
                <div className="flex-1">
                  <div className="flex items-center gap-2 mb-1">
                    <h4 className="font-bold text-white">{api.name}</h4>
                    <span className={`px-2 py-0.5 rounded text-xs ${api.criticalityColor}`}>
                      {api.criticality}
                    </span>
                  </div>
                  <p className="text-sm text-muted">{api.function}</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <p className="text-xs text-muted uppercase mb-1">Modelo/Versão</p>
                  <p className="text-secondary">{api.model}</p>
                </div>
                <div>
                  <p className="text-xs text-muted uppercase mb-1">Uso Principal</p>
                  <p className="text-secondary">{api.use}</p>
                </div>
              </div>

              <div className="mt-4 pt-4 border-t border-subtle">
                <div className="flex items-center gap-2 text-xs text-muted">
                  <Key className="w-3 h-3" />
                  <span>{api.auth}</span>
                </div>
                {api.endpoints.length > 0 && (
                  <div className="flex flex-wrap gap-1 mt-2">
                    {api.endpoints.map((endpoint, i) => (
                      <code
                        key={i}
                        className="px-2 py-1 bg-layer-2 rounded text-xs text-muted font-mono"
                      >
                        {endpoint}
                      </code>
                    ))}
                  </div>
                )}
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Connection Diagram */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Plug className="w-6 h-6 text-cyan-400" />
            Diagrama de Conexões
          </h3>
          <CopyMdButtons
            content="Diagrama de Conexões: IA Providers (Anthropic, Google Gemini, OpenAI, Replicate), Media Services (Pexels, Pixabay, ElevenLabs, Replicate Video), Video Platform (YouTube Data API)"
            markdownContent={`## Diagrama de Conexões\n\n### IA PROVIDERS\n- Anthropic Claude\n- Google Gemini\n- OpenAI GPT-4\n- Replicate\n\n### MEDIA SERVICES\n- Pexels Images\n- Pixabay Videos\n- ElevenLabs TTS\n- Replicate Video\n\n### VIDEO PLATFORM\n- YouTube Data API v3`}
            filename="diagrama-conexoes.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-8">
          <div className="text-center mb-8">
            <div className="inline-block bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl px-8 py-4">
              <p className="text-white font-bold text-lg">EMERGENCY YOUTUBE</p>
              <p className="text-white/70 text-sm">Next.js App</p>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {/* Orchestration */}
            <div className="bg-emerald-500/5 border border-emerald-500/20 rounded-xl p-5">
              <h4 className="font-bold text-emerald-400 mb-4 text-center">ORCHESTRATION</h4>
              <div className="space-y-3">
                {[
                  { name: "Inngest", color: "from-emerald-500 to-green-600" },
                  { name: "Resend Email", color: "from-violet-500 to-indigo-600" },
                  { name: "Prisma ORM", color: "from-cyan-500 to-blue-600" },
                ].map((service, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${service.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {service.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{service.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* IA Providers */}
            <div className="bg-amber-500/5 border border-amber-500/20 rounded-xl p-5">
              <h4 className="font-bold text-amber-400 mb-4 text-center">IA PROVIDERS</h4>
              <div className="space-y-3">
                {[
                  { name: "Anthropic Claude", color: "from-amber-500 to-orange-600" },
                  { name: "Google Gemini", color: "from-blue-500 to-indigo-600" },
                  { name: "OpenAI GPT-4", color: "from-green-500 to-emerald-600" },
                  { name: "Replicate", color: "from-pink-500 to-rose-600" },
                ].map((provider, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${provider.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {provider.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{provider.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Media Services */}
            <div className="bg-cyan-500/5 border border-cyan-500/20 rounded-xl p-5">
              <h4 className="font-bold text-cyan-400 mb-4 text-center">MEDIA SERVICES</h4>
              <div className="space-y-3">
                {[
                  { name: "Pexels Images", color: "from-teal-500 to-cyan-600" },
                  { name: "Pixabay Videos", color: "from-lime-500 to-green-600" },
                  { name: "ElevenLabs TTS", color: "from-violet-500 to-purple-600" },
                  { name: "JSON2VIDEO", color: "from-pink-500 to-rose-600" },
                ].map((service, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${service.color} flex items-center justify-center text-white text-xs font-bold`}>
                      {service.name.charAt(0)}
                    </div>
                    <span className="text-sm text-secondary">{service.name}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Video Platform */}
            <div className="bg-red-500/5 border border-red-500/20 rounded-xl p-5">
              <h4 className="font-bold text-red-400 mb-4 text-center">VIDEO PLATFORM</h4>
              <div className="flex flex-col items-center justify-center h-[calc(100%-2rem)]">
                <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white text-2xl font-bold mb-3">
                  Y
                </div>
                <span className="text-secondary font-medium">YouTube Data API</span>
                <span className="text-xs text-muted mt-1">v3</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Data Flow */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <ArrowRight className="w-6 h-6 text-blue-400" />
            Fluxo Real de Dados
          </h3>
          <CopyMdButtons
            content="Fluxos: 1) Geração de Roteiro (Usuário → API → Anthropic → Roteiro → UI), 2) Geração de Thumbnail (Roteiro → API → Replicate/DALL-E → Imagem → Preview), 3) Upload YouTube (Vídeo → API → OAuth → YouTube → URL)"
            markdownContent={`## Fluxo Real de Dados\n\n### 1. Geração de Roteiro\nUsuário (Input tema) → API (/proposal/script) → Anthropic (Claude API) → Roteiro (Estruturado) → Frontend (UI)\n\n### 2. Geração de Thumbnail\nRoteiro (Contexto) → API (/images/generate) → Replicate/DALL-E → Imagem (Base64) → Frontend (Preview)\n\n### 3. Upload para YouTube\nVídeo (Renderizado) → API (/youtube/upload) → OAuth 2.0 (Auth) → YouTube (Data API) → Publicado (URL)`}
            filename="fluxo-dados.md"
          />
        </div>

        <div className="space-y-6">
          {/* Script Generation Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">1. Geração de Roteiro</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Usuário", sub: "Input (tema)" },
                { label: "API", sub: "/proposal/script" },
                { label: "Anthropic", sub: "Claude API" },
                { label: "Roteiro", sub: "Estruturado" },
                { label: "Frontend", sub: "UI" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* Thumbnail Generation Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">2. Geração de Thumbnail</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Roteiro", sub: "Contexto" },
                { label: "API", sub: "/images/generate" },
                { label: "Replicate", sub: "ou DALL-E" },
                { label: "Imagem", sub: "Base64" },
                { label: "Frontend", sub: "Preview" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>

          {/* YouTube Upload Flow */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4">3. Upload para YouTube</h4>
            <div className="flex items-center gap-4 overflow-x-auto pb-2">
              {[
                { label: "Vídeo", sub: "Renderizado" },
                { label: "API", sub: "/youtube/upload" },
                { label: "OAuth 2.0", sub: "Auth" },
                { label: "YouTube", sub: "Data API" },
                { label: "Publicado", sub: "URL" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className="bg-layer-2 border border-subtle rounded-lg p-3 min-w-[100px] text-center">
                    <p className="text-white font-medium text-sm">{step.label}</p>
                    <p className="text-muted text-xs">{step.sub}</p>
                  </div>
                  {i < 4 && <ArrowRight className="w-5 h-5 text-disabled flex-shrink-0" />}
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Security */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Shield className="w-6 h-6 text-violet-400" />
            Observações de Autenticação e Segurança
          </h3>
          <CopyMdButtons
            content="Segurança: API Keys Sistema (Variáveis ambiente Vercel), API Keys Usuário (localStorage criptografado), OAuth Tokens (Cookie httpOnly). Fallbacks: Anthropic→Gemini, Pexels→Pixabay, ElevenLabs→TTS alternativo"
            markdownContent={`## Autenticação e Segurança\n\n### Armazenamento de Credenciais\n- **API Keys (Sistema):** Variáveis de ambiente (Vercel) - Não expostas ao cliente\n- **API Keys (Usuário):** localStorage (browser) - Criptografadas localmente\n- **OAuth Tokens:** Cookie httpOnly - Sessão segura\n\n### Fallback e Redundância\n- Anthropic → Google Gemini\n- Pexels → Pixabay\n- ElevenLabs → TTS alternativo`}
            filename="seguranca.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Credential Storage */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <Database className="w-5 h-5 text-amber-400" />
              Armazenamento de Credenciais
            </h4>
            <div className="space-y-3">
              {[
                { type: "API Keys (Sistema)", local: "Variáveis de ambiente (Vercel)", security: "Não expostas ao cliente" },
                { type: "API Keys (Usuário)", local: "localStorage (browser)", security: "Criptografadas localmente" },
                { type: "OAuth Tokens", local: "Cookie httpOnly", security: "Sessão segura" },
              ].map((item, i) => (
                <div key={i} className="p-3 bg-layer-2/50 rounded-lg">
                  <p className="font-medium text-white text-sm">{item.type}</p>
                  <p className="text-xs text-muted">{item.local}</p>
                  <p className="text-xs text-green-400 mt-1 flex items-center gap-1">
                    <Lock className="w-3 h-3" />
                    {item.security}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Fallback & Redundancy */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <h4 className="font-semibold text-white mb-4 flex items-center gap-2">
              <RefreshCw className="w-5 h-5 text-cyan-400" />
              Fallback e Redundância
            </h4>
            <div className="space-y-4">
              {[
                {
                  primary: "Anthropic",
                  fallback: "Google Gemini",
                  icon: AlertCircle,
                },
                {
                  primary: "Pexels",
                  fallback: "Pixabay",
                  icon: AlertCircle,
                },
                {
                  primary: "ElevenLabs",
                  fallback: "TTS alternativo",
                  icon: AlertCircle,
                },
              ].map((item, i) => (
                <div key={i} className="flex items-center gap-3">
                  <div className="flex-1 p-2 bg-layer-2 rounded text-center">
                    <p className="text-sm text-white">{item.primary}</p>
                  </div>
                  <item.icon className="w-4 h-4 text-yellow-400" />
                  <div className="flex-1 p-2 bg-layer-2/50 rounded text-center border border-dashed border-subtle">
                    <p className="text-sm text-muted">{item.fallback}</p>
                  </div>
                </div>
              ))}
            </div>
            <p className="text-xs text-muted mt-4">
              Se o serviço primário falhar, o sistema tenta automaticamente o fallback.
            </p>
          </div>
        </div>
      </section>

      {/* OAuth Flow */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Key className="w-6 h-6 text-red-400" />
            Fluxo OAuth (YouTube)
          </h3>
          <CopyMdButtons
            content="Fluxo OAuth: 1) Usuário clica Conectar → 2) Redirect Google OAuth → 3) Autoriza escopos → 4) Callback com código → 5) Tokens armazenados"
            markdownContent={`## Fluxo OAuth (YouTube)\n\n1. Usuário clica em Conectar YouTube\n2. Redirect para Google OAuth\n3. Usuário autoriza escopos\n4. Callback com código\n5. Tokens armazenados`}
            filename="oauth-flow.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6">
          <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
            {[
              { num: "1", text: "Usuário clica em Conectar YouTube" },
              { num: "2", text: "Redirect para Google OAuth" },
              { num: "3", text: "Usuário autoriza escopos" },
              { num: "4", text: "Callback com código" },
              { num: "5", text: "Tokens armazenados" },
            ].map((step, i) => (
              <div key={i} className="text-center">
                <div className="w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-2">
                  <span className="text-red-400 font-bold">{step.num}</span>
                </div>
                <p className="text-xs text-muted">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-green-900/20 border border-green-500/20 rounded-xl">
        <p className="text-sm text-green-300 italic text-center">
          Este documento detalha todas as integrações do ORION, seus fluxos de dados
          e considerações de segurança.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/ShareButtons.tsx`

```
"use client";

import { useState } from "react";
import { Share2, Link2, Check, MessageCircle, Mail, X } from "lucide-react";
import { useShare } from "@/lib/share-context";

export default function ShareButtons() {
  const { canShare, generateShareLink } = useShare();
  const [showModal, setShowModal] = useState(false);
  const [shareUrl, setShareUrl] = useState("");
  const [copied, setCopied] = useState(false);

  if (!canShare) return null;

  const handleShare = () => {
    const url = generateShareLink();
    setShareUrl(url);
    setShowModal(true);
  };

  const copyToClipboard = async () => {
    try {
      await navigator.clipboard.writeText(shareUrl);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Failed to copy:", err);
    }
  };

  const shareViaWhatsApp = () => {
    const text = encodeURIComponent(
      `Confira a documentação do ORION: ${shareUrl}`
    );
    window.open(`https://wa.me/?text=${text}`, "_blank");
  };

  const shareViaEmail = () => {
    const subject = encodeURIComponent("Documentação ORION");
    const body = encodeURIComponent(
      `Olá!\n\nConfira a documentação do ORION:\n${shareUrl}\n\nAtenciosamente.`
    );
    window.open(`mailto:?subject=${subject}&body=${body}`, "_blank");
  };

  return (
    <>
      <button
        onClick={handleShare}
        className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 rounded-lg text-white text-sm font-medium transition-all shadow-lg shadow-green-500/20"
      >
        <Share2 className="w-4 h-4" />
        Compartilhar
      </button>

      {/* Modal de Compartilhamento */}
      {showModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200">
          <div className="bg-layer-1 border border-subtle rounded-2xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-bold text-white flex items-center gap-2">
                <Share2 className="w-5 h-5 text-green-400" />
                Compartilhar Documentação
              </h3>
              <button
                onClick={() => setShowModal(false)}
                className="p-1.5 hover:bg-layer-2 rounded-lg transition-colors"
              >
                <X className="w-5 h-5 text-muted" />
              </button>
            </div>

            <p className="text-muted text-sm mb-4">
              Quem receber este link poderá visualizar a documentação, mas{" "}
              <strong className="text-amber-400">não poderá copiar conteúdos nem compartilhar novamente</strong>.
            </p>

            {/* Link Display */}
            <div className="bg-layer-2/50 border border-subtle rounded-xl p-3 mb-4">
              <p className="text-xs text-muted mb-2">Link de Compartilhamento:</p>
              <div className="flex items-center gap-2">
                <input
                  type="text"
                  value={shareUrl}
                  readOnly
                  className="flex-1 bg-transparent text-secondary text-sm outline-none truncate"
                />
                <button
                  onClick={copyToClipboard}
                  className={`p-2 rounded-lg transition-all ${
                    copied
                      ? "bg-green-500/20 text-green-400"
                      : "bg-zinc-700 text-muted hover:bg-zinc-600 hover:text-white"
                  }`}
                  title={copied ? "Copiado!" : "Copiar link"}
                >
                  {copied ? <Check className="w-4 h-4" /> : <Link2 className="w-4 h-4" />}
                </button>
              </div>
            </div>

            {/* Share Options */}
            <div className="grid grid-cols-2 gap-3">
              <button
                onClick={shareViaWhatsApp}
                className="flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-500 rounded-xl text-white font-medium transition-all"
              >
                <MessageCircle className="w-5 h-5" />
                WhatsApp
              </button>
              <button
                onClick={shareViaEmail}
                className="flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-white font-medium transition-all"
              >
                <Mail className="w-5 h-5" />
                Email
              </button>
            </div>

            {/* Info Box */}
            <div className="mt-4 p-3 bg-amber-500/10 border border-amber-500/20 rounded-xl">
              <p className="text-xs text-amber-300">
                <strong>Proteções ativas:</strong> O link compartilhado terá proteção contra cópia de texto,
                seleção de conteúdo e não mostrará opções de compartilhamento para o visitante.
              </p>
            </div>
          </div>
        </div>
      )}
    </>
  );
}

```

---
#### `components/documentation/SystemVisionTab.tsx`

```
"use client";

import {
  Play,
  Search,
  FileText,
  Film,
  Clapperboard,
  Upload,
  Users,
  Bot,
  ArrowRight,
  CheckCircle2,
  Monitor,
  Server,
  Database,
  Briefcase,
  GraduationCap,
  Building,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

export default function SystemVisionTab() {
  const workflowSteps = [
    {
      num: 1,
      title: "Input",
      subtitle: "Entrada de Dados",
      icon: Play,
      color: "indigo",
      inputs: ["Tema principal", "Configurações de formato", "Público-alvo", "Diretrizes"],
      outputs: ["Objeto de contexto", "Parâmetros validados"],
    },
    {
      num: 2,
      title: "Research",
      subtitle: "Pesquisa",
      icon: Search,
      color: "blue",
      inputs: ["Contexto estruturado"],
      outputs: ["Dados de pesquisa", "Referências", "Sugestões"],
    },
    {
      num: 3,
      title: "Proposal",
      subtitle: "Proposta Criativa",
      icon: FileText,
      color: "purple",
      inputs: ["Pesquisa consolidada"],
      outputs: ["Roteiro", "Títulos", "Descrição", "Tags"],
    },
    {
      num: 4,
      title: "Studio",
      subtitle: "Produção Visual",
      icon: Film,
      color: "pink",
      inputs: ["Roteiro aprovado"],
      outputs: ["Storyboard", "Mídias selecionadas"],
    },
    {
      num: 5,
      title: "Render",
      subtitle: "Composição",
      icon: Clapperboard,
      color: "orange",
      inputs: ["Storyboard completo"],
      outputs: ["Vídeo renderizado", "Preview"],
    },
    {
      num: 6,
      title: "Upload",
      subtitle: "Publicação",
      icon: Upload,
      color: "green",
      inputs: ["Vídeo final"],
      outputs: ["URL do vídeo", "Estatísticas"],
    },
  ];

  const colorMap: Record<string, { bg: string; border: string; text: string; gradient: string }> = {
    indigo: { bg: "bg-indigo-500/10", border: "border-indigo-500/30", text: "text-indigo-400", gradient: "from-indigo-500 to-indigo-600" },
    blue: { bg: "bg-blue-500/10", border: "border-blue-500/30", text: "text-blue-400", gradient: "from-blue-500 to-blue-600" },
    purple: { bg: "bg-purple-500/10", border: "border-purple-500/30", text: "text-purple-400", gradient: "from-purple-500 to-purple-600" },
    pink: { bg: "bg-pink-500/10", border: "border-pink-500/30", text: "text-pink-400", gradient: "from-pink-500 to-pink-600" },
    orange: { bg: "bg-orange-500/10", border: "border-orange-500/30", text: "text-orange-400", gradient: "from-orange-500 to-orange-600" },
    green: { bg: "bg-green-500/10", border: "border-green-500/30", text: "text-green-400", gradient: "from-green-500 to-green-600" },
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-900/50 via-cyan-900/50 to-blue-900/50 border border-blue-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <h2 className="text-2xl font-bold text-white mb-4">O Que o Sistema Faz</h2>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O <strong className="text-white">ORION</strong> é uma plataforma de automação
            de produção de vídeos que transforma um simples tema em um{" "}
            <span className="text-cyan-400 font-semibold">
              vídeo completo publicado no YouTube
            </span>
            . O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.
          </p>
        </div>
      </section>

      {/* Target Audience */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Users className="w-6 h-6 text-cyan-400" />
            Para Quem Foi Projetado
          </h3>
          <CopyMdButtons
            content="Público-alvo: Criadores Solo (empreendedores, educadores), Pequenas Empresas (marketing, comunicação), Agências (produção em escala, prototipagem)"
            markdownContent={`## Para Quem Foi Projetado\n\n### Criadores de Conteúdo Solo\n- Empreendedores digitais\n- Educadores e professores\n- Profissionais liberais\n\n### Pequenas Empresas\n- Marketing digital interno\n- Comunicação institucional\n- Treinamento corporativo\n\n### Agências e Produtoras\n- Produção em escala\n- Prototipagem rápida\n- Testes de conceito`}
            filename="publico-alvo.md"
          />
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {[
            {
              icon: Briefcase,
              title: "Criadores de Conteúdo Solo",
              items: ["Empreendedores digitais", "Educadores e professores", "Profissionais liberais"],
              color: "cyan",
            },
            {
              icon: Building,
              title: "Pequenas Empresas",
              items: ["Marketing digital interno", "Comunicação institucional", "Treinamento corporativo"],
              color: "blue",
            },
            {
              icon: GraduationCap,
              title: "Agências e Produtoras",
              items: ["Produção em escala", "Prototipagem rápida", "Testes de conceito"],
              color: "indigo",
            },
          ].map((profile, index) => (
            <div
              key={index}
              className="bg-layer-1 border border-subtle rounded-xl p-6"
            >
              <profile.icon className={`w-10 h-10 text-${profile.color}-400 mb-4`} />
              <h4 className="font-bold text-white mb-3">{profile.title}</h4>
              <ul className="space-y-2">
                {profile.items.map((item, i) => (
                  <li key={i} className="flex items-center gap-2 text-muted text-sm">
                    <CheckCircle2 className="w-4 h-4 text-green-400" />
                    {item}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>

      {/* Workflow Steps */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Play className="w-6 h-6 text-green-400" />
            Fluxo Principal de Funcionamento
          </h3>
          <CopyMdButtons
            content="Workflow: 1) Input (Tema, Configurações) → 2) Research (Pesquisa) → 3) Proposal (Roteiro) → 4) Studio (Storyboard) → 5) Render (Vídeo) → 6) Upload (YouTube)"
            markdownContent={`## Fluxo Principal de Funcionamento\n\n### 1. Input - Entrada de Dados\n- **Entradas:** Tema principal, Configurações de formato, Público-alvo, Diretrizes\n- **Saídas:** Objeto de contexto, Parâmetros validados\n\n### 2. Research - Pesquisa\n- **Entradas:** Contexto estruturado\n- **Saídas:** Dados de pesquisa, Referências, Sugestões\n\n### 3. Proposal - Proposta Criativa\n- **Entradas:** Pesquisa consolidada\n- **Saídas:** Roteiro, Títulos, Descrição, Tags\n\n### 4. Studio - Produção Visual\n- **Entradas:** Roteiro aprovado\n- **Saídas:** Storyboard, Mídias selecionadas\n\n### 5. Render - Composição\n- **Entradas:** Storyboard completo\n- **Saídas:** Vídeo renderizado, Preview\n\n### 6. Upload - Publicação\n- **Entradas:** Vídeo final\n- **Saídas:** URL do vídeo, Estatísticas`}
            filename="workflow.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {workflowSteps.map((step) => {
            const colors = colorMap[step.color];
            return (
              <div
                key={step.num}
                className={`${colors.bg} ${colors.border} border rounded-xl p-5 relative overflow-hidden`}
              >
                <div className="absolute top-0 right-0 text-6xl font-bold text-white/5">
                  {step.num}
                </div>
                <div className="relative">
                  <div className="flex items-center gap-3 mb-4">
                    <div className={`w-12 h-12 bg-gradient-to-br ${colors.gradient} rounded-xl flex items-center justify-center`}>
                      <step.icon className="w-6 h-6 text-white" />
                    </div>
                    <div>
                      <h4 className="font-bold text-white">{step.title}</h4>
                      <p className={`text-sm ${colors.text}`}>{step.subtitle}</p>
                    </div>
                  </div>

                  <div className="space-y-3">
                    <div>
                      <p className="text-xs font-medium text-muted uppercase mb-2">Entradas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.inputs.map((input, i) => (
                          <span key={i} className="px-2 py-1 bg-layer-2 rounded text-xs text-secondary">
                            {input}
                          </span>
                        ))}
                      </div>
                    </div>
                    <div>
                      <p className="text-xs font-medium text-muted uppercase mb-2">Saídas</p>
                      <div className="flex flex-wrap gap-1">
                        {step.outputs.map((output, i) => (
                          <span key={i} className={`px-2 py-1 ${colors.bg} rounded text-xs ${colors.text}`}>
                            {output}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </section>

      {/* Human vs Automation */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Users className="w-6 h-6 text-purple-400" />
            Interação entre Automação e Decisão Humana
          </h3>
          <CopyMdButtons
            content="Filosofia: O sistema sugere, o humano decide. Cada etapa gera proposta, usuário pode aceitar/modificar/regenerar, histórico permite rollback."
            markdownContent={`## Interação entre Automação e Decisão Humana\n\n| Etapa | Decisão Humana | Automação |\n|-------|----------------|----------|\n| Input | Define tema e parâmetros | Valida e estrutura |\n| Research | Aprova abordagem | Pesquisa e sintetiza |\n| Proposal | Revisa e edita roteiro | Gera todas as versões |\n| Studio | Ajusta mídias | Seleciona e compõe |\n| Render | Aprova preview | Renderiza vídeo |\n| Upload | Confirma publicação | Executa upload |\n\n### Filosofia de Controle\n**"O sistema sugere, o humano decide"**\n\n- Cada etapa gera uma proposta completa\n- O usuário pode aceitar, modificar ou regenerar\n- Nenhuma ação destrutiva sem confirmação\n- Histórico de versões permite rollback`}
            filename="automacao-humano.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
          <div className="grid grid-cols-3 gap-0 border-b border-subtle bg-layer-2/50">
            <div className="p-4 font-semibold text-white">Etapa</div>
            <div className="p-4 font-semibold text-purple-400 flex items-center gap-2">
              <Users className="w-4 h-4" /> Decisão Humana
            </div>
            <div className="p-4 font-semibold text-cyan-400 flex items-center gap-2">
              <Bot className="w-4 h-4" /> Automação
            </div>
          </div>
          {[
            { step: "Input", human: "Define tema e parâmetros", auto: "Valida e estrutura" },
            { step: "Research", human: "Aprova abordagem", auto: "Pesquisa e sintetiza" },
            { step: "Proposal", human: "Revisa e edita roteiro", auto: "Gera todas as versões" },
            { step: "Studio", human: "Ajusta mídias", auto: "Seleciona e compõe" },
            { step: "Render", human: "Aprova preview", auto: "Renderiza vídeo" },
            { step: "Upload", human: "Confirma publicação", auto: "Executa upload" },
          ].map((row, index) => (
            <div
              key={index}
              className="grid grid-cols-3 gap-0 border-b border-subtle last:border-0 hover:bg-layer-2/30 transition-colors"
            >
              <div className="p-4 text-secondary font-medium">{row.step}</div>
              <div className="p-4 text-muted text-sm">{row.human}</div>
              <div className="p-4 text-muted text-sm">{row.auto}</div>
            </div>
          ))}
        </div>

        <div className="mt-6 p-5 bg-purple-900/20 border border-purple-500/20 rounded-xl">
          <h4 className="font-bold text-purple-400 mb-2">Filosofia de Controle</h4>
          <p className="text-xl font-semibold text-white mb-4">&quot;O sistema sugere, o humano decide&quot;</p>
          <ul className="grid grid-cols-1 md:grid-cols-2 gap-3">
            {[
              "Cada etapa gera uma proposta completa",
              "O usuário pode aceitar, modificar ou regenerar",
              "Nenhuma ação destrutiva sem confirmação",
              "Histórico de versões permite rollback",
            ].map((item, i) => (
              <li key={i} className="flex items-center gap-2 text-secondary text-sm">
                <CheckCircle2 className="w-4 h-4 text-green-400" />
                {item}
              </li>
            ))}
          </ul>
        </div>
      </section>

      {/* Architecture Components */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Server className="w-6 h-6 text-orange-400" />
            Componentes Principais e Responsabilidades
          </h3>
          <CopyMdButtons
            content="Componentes: Frontend (Next.js, React, Tailwind, Zustand), Backend (API Routes, integração IAs), Estado Global (Zustand Stores com localStorage)"
            markdownContent={`## Componentes Principais\n\n### Frontend (Next.js App Router)\n**Responsabilidades:**\n- Interface de usuário\n- Navegação por workflow\n- Estado local e persistência\n- Comunicação com APIs\n\n**Tecnologias:** React 19, Tailwind, Framer Motion, Zustand\n\n### Backend (API Routes)\n**Responsabilidades:**\n- Integração com IAs\n- Comunicação externa\n- Processamento de dados\n- Validação e segurança\n\n**Endpoints:** /api/proposal/*, /api/images/*, /api/youtube/*\n\n### Estado Global (Zustand Stores)\n**Stores:**\n- WorkflowStore - Dados e navegação\n- GuidelinesStore - Diretrizes\n- UIStore - Estado de interface\n\n**Persistência:** localStorage`}
            filename="componentes.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {/* Frontend */}
          <div className="bg-gradient-to-b from-blue-900/30 to-zinc-900 border border-blue-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Monitor className="w-8 h-8 text-blue-400" />
              <div>
                <h4 className="font-bold text-white">Frontend</h4>
                <p className="text-xs text-blue-400">Next.js App Router</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-muted">
              <li>Interface de usuário</li>
              <li>Navegação por workflow</li>
              <li>Estado local e persistência</li>
              <li>Comunicação com APIs</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Tecnologias</p>
            <div className="flex flex-wrap gap-1">
              {["React 19", "Tailwind", "Framer Motion", "Zustand"].map((tech, i) => (
                <span key={i} className="px-2 py-1 bg-blue-500/10 text-blue-400 rounded text-xs">
                  {tech}
                </span>
              ))}
            </div>
          </div>

          {/* Backend */}
          <div className="bg-gradient-to-b from-green-900/30 to-zinc-900 border border-green-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Server className="w-8 h-8 text-green-400" />
              <div>
                <h4 className="font-bold text-white">Backend</h4>
                <p className="text-xs text-green-400">API Routes</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Responsabilidades</p>
            <ul className="space-y-2 text-sm text-muted">
              <li>Integração com IAs</li>
              <li>Comunicação externa</li>
              <li>Processamento de dados</li>
              <li>Validação e segurança</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Endpoints</p>
            <div className="flex flex-wrap gap-1">
              {["/api/proposal/*", "/api/images/*", "/api/youtube/*"].map((endpoint, i) => (
                <span key={i} className="px-2 py-1 bg-green-500/10 text-green-400 rounded text-xs font-mono">
                  {endpoint}
                </span>
              ))}
            </div>
          </div>

          {/* State */}
          <div className="bg-gradient-to-b from-amber-900/30 to-zinc-900 border border-amber-500/20 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Database className="w-8 h-8 text-amber-400" />
              <div>
                <h4 className="font-bold text-white">Estado Global</h4>
                <p className="text-xs text-amber-400">Zustand Stores</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">Stores</p>
            <ul className="space-y-2 text-sm text-muted">
              <li><strong className="text-amber-400">WorkflowStore</strong> - Dados e navegação</li>
              <li><strong className="text-amber-400">GuidelinesStore</strong> - Diretrizes</li>
              <li><strong className="text-amber-400">UIStore</strong> - Estado de interface</li>
            </ul>
            <p className="text-xs font-medium text-muted uppercase mt-4 mb-2">Persistência</p>
            <span className="px-2 py-1 bg-amber-500/10 text-amber-400 rounded text-xs">
              localStorage
            </span>
          </div>
        </div>
      </section>

      {/* Flow Diagram */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <ArrowRight className="w-6 h-6 text-cyan-400" />
          Diagrama de Fluxo Operacional
        </h3>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px]">
            {/* Top Row */}
            <div className="flex items-center justify-center gap-4 mb-6">
              {[
                { name: "INPUT", sub: "Tema", color: "indigo" },
                { name: "RESEARCH", sub: "Pesquisa", color: "blue" },
                { name: "PROPOSAL", sub: "Roteiro", color: "purple" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-muted">{step.sub}</p>
                  </div>
                  {i < 2 && <ArrowRight className="w-6 h-6 text-disabled" />}
                </div>
              ))}
            </div>

            {/* Arrow Down */}
            <div className="flex justify-end mr-16 mb-6">
              <div className="w-0.5 h-12 bg-zinc-700" />
            </div>

            {/* Bottom Row */}
            <div className="flex items-center justify-center gap-4 flex-row-reverse">
              {[
                { name: "UPLOAD", sub: "YouTube", color: "green" },
                { name: "RENDER", sub: "Vídeo", color: "orange" },
                { name: "STUDIO", sub: "Storyboard", color: "pink" },
              ].map((step, i) => (
                <div key={i} className="flex items-center gap-4">
                  {i < 2 && <ArrowRight className="w-6 h-6 text-disabled rotate-180" />}
                  <div className={`bg-${step.color}-500/20 border border-${step.color}-500/30 rounded-lg p-4 text-center min-w-[120px]`}>
                    <p className={`font-bold text-${step.color}-400`}>{step.name}</p>
                    <p className="text-xs text-muted">{step.sub}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-blue-900/20 border border-blue-500/20 rounded-xl">
        <p className="text-sm text-blue-300 italic text-center">
          Este documento descreve a visão sistêmica do ORION, detalhando seu
          funcionamento e a interação entre componentes automatizados e decisões humanas.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/TechStackTab.tsx`

```
"use client";

import {
  Layers,
  Code,
  Cpu,
  Cloud,
  Package,
  CheckCircle2,
} from "lucide-react";
import { CopyMdButtons } from "./CopyButton";

// Tech logo component
const TechLogo = ({
  name,
  letter,
  gradient,
}: {
  name: string;
  letter: string;
  gradient: string;
}) => (
  <div className="flex flex-col items-center gap-2">
    <div
      className={`w-14 h-14 rounded-xl bg-gradient-to-br ${gradient} flex items-center justify-center text-white font-bold text-xl shadow-lg`}
    >
      {letter}
    </div>
    <span className="text-xs text-muted">{name}</span>
  </div>
);

export default function TechStackTab() {
  const dependencies = {
    production: [
      { name: "next", version: "15.1.11", function: "Framework" },
      { name: "react", version: "19.0.0", function: "UI Library" },
      { name: "ai", version: "latest", function: "AI SDK 6" },
      { name: "@ai-sdk/anthropic", version: "latest", function: "Claude AI" },
      { name: "@ai-sdk/google", version: "latest", function: "Gemini AI" },
      { name: "@ai-sdk/openai", version: "latest", function: "GPT AI" },
      { name: "inngest", version: "3.49.3", function: "Workflow Orchestration" },
      { name: "prisma", version: "6.x", function: "Database ORM" },
      { name: "@prisma/client", version: "6.x", function: "Prisma Client" },
      { name: "resend", version: "6.8.0", function: "Email Service" },
      { name: "zustand", version: "5.0.3", function: "State Management" },
      { name: "tailwindcss", version: "3.4.17", function: "Styling" },
      { name: "framer-motion", version: "11.15.0", function: "Animations" },
      { name: "lucide-react", version: "0.469.0", function: "Icons" },
      { name: "zod", version: "3.24.1", function: "Validation" },
    ],
    dev: [
      { name: "typescript", version: "5.7.3", function: "Type checking" },
      { name: "eslint", version: "9.x", function: "Linting" },
      { name: "@types/react", version: "19.x", function: "React types" },
      { name: "@types/node", version: "22.x", function: "Node types" },
    ],
  };

  return (
    <div className="space-y-12">
      {/* Hero */}
      <section className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-orange-900/50 via-amber-900/50 to-orange-900/50 border border-orange-500/20 p-8">
        <div className="absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl" />
        <div className="relative">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-3 bg-orange-500/20 rounded-xl">
              <Layers className="w-8 h-8 text-orange-400" />
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">
                Visão Geral da Stack
              </h2>
              <p className="text-orange-300">Tecnologias e arquitetura</p>
            </div>
          </div>
          <p className="text-lg text-secondary leading-relaxed max-w-3xl">
            O ORION utiliza uma{" "}
            <span className="text-orange-400 font-semibold">
              stack moderna e otimizada
            </span>{" "}
            para aplicações web de alta performance, com foco em Developer
            Experience (DX) e User Experience (UX).
          </p>
        </div>
      </section>

      {/* Languages */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Code className="w-6 h-6 text-blue-400" />
            Linguagens de Programação
          </h3>
          <CopyMdButtons
            content="TypeScript 5.7: 100% do código frontend e backend. Strict mode, Path aliases, Type inference, Utility types."
            markdownContent={`## Linguagens de Programação\n\n### TypeScript 5.7\n- 100% do código frontend e backend\n- Strict mode habilitado\n- Path aliases (@/components, @/lib)\n- Type inference avançado\n- Utility types (Partial, Pick, Omit)\n\n**Benefícios:**\n- Detecção de erros em desenvolvimento\n- Autocomplete inteligente\n- Refatoração segura\n- Documentação inline via tipos`}
            filename="linguagens.md"
          />
        </div>

        <div className="bg-gradient-to-r from-blue-900/30 to-indigo-900/30 border border-blue-500/20 rounded-xl p-6">
          <div className="flex items-start gap-6">
            <div className="w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg">
              TS
            </div>
            <div className="flex-1">
              <h4 className="text-xl font-bold text-white mb-2">TypeScript 5.7</h4>
              <p className="text-muted mb-4">
                100% do código frontend e backend
              </p>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p className="text-xs font-medium text-muted uppercase mb-2">
                    Características Utilizadas
                  </p>
                  <ul className="space-y-1 text-sm text-secondary">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Strict mode habilitado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Path aliases (@/components, @/lib)
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Type inference avançado
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-green-400" />
                      Utility types (Partial, Pick, Omit)
                    </li>
                  </ul>
                </div>
                <div>
                  <p className="text-xs font-medium text-muted uppercase mb-2">
                    Benefícios
                  </p>
                  <ul className="space-y-1 text-sm text-secondary">
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Detecção de erros em desenvolvimento
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Autocomplete inteligente
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Refatoração segura
                    </li>
                    <li className="flex items-center gap-2">
                      <CheckCircle2 className="w-4 h-4 text-blue-400" />
                      Documentação inline via tipos
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Frameworks */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Package className="w-6 h-6 text-purple-400" />
            Frameworks e Bibliotecas
          </h3>
          <CopyMdButtons
            content="Next.js 15.1.11, React 19, Tailwind CSS 3.4.17, Zustand 5.0, Framer Motion 11.15, Lucide React 0.469"
            markdownContent={`## Frameworks e Bibliotecas\n\n### Next.js 15.1.11\n- App Router para roteamento\n- Server Components para performance\n- API Routes para backend\n- Image Optimization\n\n### React 19\n- Hooks: useState, useEffect, useCallback, useMemo, useRef\n- Functional Components, Custom Hooks\n\n### Tailwind CSS 3.4.17\n- Framework CSS utility-first\n\n### Zustand 5.0\n- State Management\n- Stores: WorkflowStore, GuidelinesStore, UIStore\n\n### Framer Motion 11.15\n- Animações e transições\n\n### Lucide React 0.469\n- Biblioteca de ícones`}
            filename="frameworks.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {/* Next.js */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-lg border border-zinc-600">
                N
              </div>
              <div>
                <h4 className="font-bold text-white">Next.js 15.1.11</h4>
                <p className="text-xs text-muted">Framework Full-Stack</p>
              </div>
            </div>
            <div className="space-y-2 text-sm">
              {[
                { feature: "App Router", use: "Roteamento e layouts" },
                { feature: "Server Components", use: "Performance e SEO" },
                { feature: "API Routes", use: "Backend integrado" },
                { feature: "Image Optimization", use: "Otimização de mídia" },
              ].map((item, i) => (
                <div key={i} className="flex justify-between text-muted">
                  <span className="text-white">{item.feature}</span>
                  <span>{item.use}</span>
                </div>
              ))}
            </div>
          </div>

          {/* React */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg">
                R
              </div>
              <div>
                <h4 className="font-bold text-white">React 19</h4>
                <p className="text-xs text-muted">UI Library</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Hooks</p>
              <div className="flex flex-wrap gap-1">
                {["useState", "useEffect", "useCallback", "useMemo", "useRef"].map(
                  (hook, i) => (
                    <code
                      key={i}
                      className="px-2 py-1 bg-cyan-500/10 text-cyan-400 rounded text-xs"
                    >
                      {hook}
                    </code>
                  )
                )}
              </div>
              <p className="text-xs font-medium text-muted uppercase mt-3">
                Patterns
              </p>
              <p className="text-sm text-muted">
                Functional Components, Custom Hooks, Composição
              </p>
            </div>
          </div>

          {/* Tailwind */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center text-white font-bold text-lg">
                T
              </div>
              <div>
                <h4 className="font-bold text-white">Tailwind CSS 3.4.17</h4>
                <p className="text-xs text-muted">Framework CSS</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">
                Classes Mais Usadas
              </p>
              <div className="font-mono text-xs space-y-1">
                <div className="text-muted">
                  <span className="text-teal-400">bg-layer-1</span> → Background
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">text-white</span> → Texto
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">border-subtle</span> → Bordas
                </div>
                <div className="text-muted">
                  <span className="text-teal-400">rounded-xl</span> → Cantos
                </div>
              </div>
            </div>
          </div>

          {/* Zustand */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 flex items-center justify-center text-white font-bold text-lg">
                Z
              </div>
              <div>
                <h4 className="font-bold text-white">Zustand 5.0</h4>
                <p className="text-xs text-muted">State Management</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Stores</p>
              <ul className="text-sm space-y-1">
                <li className="text-amber-400">WorkflowStore</li>
                <li className="text-amber-400">GuidelinesStore</li>
                <li className="text-amber-400">UIStore</li>
              </ul>
              <p className="text-xs text-muted mt-2">
                Middleware: persist, devtools
              </p>
            </div>
          </div>

          {/* Framer Motion */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg">
                F
              </div>
              <div>
                <h4 className="font-bold text-white">Framer Motion 11.15</h4>
                <p className="text-xs text-muted">Animations</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">Uso</p>
              <ul className="text-sm text-muted space-y-1">
                <li>Transições de página</li>
                <li>Animações de entrada</li>
                <li>Hover effects</li>
                <li>Loading states</li>
              </ul>
            </div>
          </div>

          {/* Lucide */}
          <div className="bg-layer-1 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center text-white font-bold text-lg">
                L
              </div>
              <div>
                <h4 className="font-bold text-white">Lucide React 0.469</h4>
                <p className="text-xs text-muted">Iconography</p>
              </div>
            </div>
            <div className="space-y-2">
              <p className="text-xs font-medium text-muted uppercase">
                Padrão de Uso
              </p>
              <code className="block p-2 bg-layer-2 rounded text-xs text-secondary">
                {`<IconName className="w-5 h-5" />`}
              </code>
            </div>
          </div>
        </div>
      </section>

      {/* Infrastructure */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Cloud className="w-6 h-6 text-green-400" />
            Tecnologias de Infraestrutura
          </h3>
          <CopyMdButtons
            content="Vercel: Deploy automático, Edge Functions, CDN Global. GitHub: Versionamento, CI/CD automático."
            markdownContent={`## Infraestrutura\n\n### Vercel\n- Hospedagem e Deploy\n- Automatic deployments\n- Edge Functions\n- Environment Variables\n- Analytics\n- Preview deployments\n- CDN Global\n\n### GitHub\n- Versionamento\n- CI/CD automático\n- push main → Deploy production\n- push feature/* → Preview deploy\n- pull request → Checks automáticos`}
            filename="infraestrutura.md"
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {/* Vercel */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-600 to-zinc-900 flex items-center justify-center text-white font-bold text-xl border border-zinc-500">
                V
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">Vercel</h4>
                <p className="text-sm text-muted">Hospedagem e Deploy</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">
              Features Utilizadas
            </p>
            <div className="grid grid-cols-2 gap-2">
              {[
                "Automatic deployments",
                "Edge Functions",
                "Environment Variables",
                "Analytics",
                "Preview deployments",
                "CDN Global",
              ].map((feature, i) => (
                <div
                  key={i}
                  className="flex items-center gap-2 text-sm text-secondary"
                >
                  <CheckCircle2 className="w-4 h-4 text-green-400" />
                  {feature}
                </div>
              ))}
            </div>
          </div>

          {/* GitHub */}
          <div className="bg-gradient-to-r from-zinc-900 to-zinc-800 border border-subtle rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center text-white font-bold text-xl">
                G
              </div>
              <div>
                <h4 className="font-bold text-white text-lg">GitHub</h4>
                <p className="text-sm text-muted">Versionamento e CI</p>
              </div>
            </div>
            <p className="text-xs font-medium text-muted uppercase mb-2">
              Workflows
            </p>
            <ul className="space-y-2 text-sm text-secondary">
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  push main
                </code>
                <span className="text-muted">→</span>
                Deploy production
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  push feature/*
                </code>
                <span className="text-muted">→</span>
                Preview deploy
              </li>
              <li className="flex items-center gap-2">
                <code className="px-2 py-0.5 bg-layer-2 rounded text-xs">
                  pull request
                </code>
                <span className="text-muted">→</span>
                Checks automáticos
              </li>
            </ul>
          </div>
        </div>
      </section>

      {/* Architecture Diagram */}
      <section>
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-white flex items-center gap-2">
            <Cpu className="w-6 h-6 text-violet-400" />
            Diagrama por Camadas
          </h3>
          <CopyMdButtons
            content="Camadas: Frontend (React, Tailwind, Framer, Zustand, Lucide) → Framework (Next.js 15) → Backend (Vercel AI, Zod) → IA (Anthropic, Google, OpenAI) → Infraestrutura (Vercel)"
            markdownContent={`## Arquitetura por Camadas\n\n### FRONTEND\nReact 19, Tailwind, Framer Motion, Zustand, Lucide\n\n### FRAMEWORK\nNext.js 15 (App Router, Server Components, API Routes)\n\n### BACKEND\nVercel AI SDK, Zod, node-fetch\n\n### IA LAYER\nAnthropic Claude, Google AI, OpenAI\n\n### INFRAESTRUTURA\nVercel (Edge Functions, CDN Global, Env Vars)`}
            filename="arquitetura-camadas.md"
          />
        </div>

        <div className="bg-layer-1 border border-subtle rounded-xl p-6 overflow-x-auto">
          <div className="min-w-[600px] space-y-4">
            {/* Frontend Layer */}
            <div className="bg-blue-500/10 border border-blue-500/20 rounded-xl p-4">
              <h4 className="font-bold text-blue-400 mb-3 text-center">FRONTEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="React 19" letter="R" gradient="from-cyan-500 to-blue-600" />
                <TechLogo name="Tailwind" letter="T" gradient="from-teal-500 to-cyan-600" />
                <TechLogo name="Framer" letter="F" gradient="from-pink-500 to-purple-600" />
                <TechLogo name="Zustand" letter="Z" gradient="from-amber-500 to-yellow-600" />
                <TechLogo name="Lucide" letter="L" gradient="from-red-500 to-orange-600" />
              </div>
            </div>

            {/* Framework Layer */}
            <div className="bg-layer-2/50 border border-subtle rounded-xl p-4">
              <h4 className="font-bold text-muted mb-3 text-center">FRAMEWORK</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Next.js 15</p>
                  <div className="flex gap-4 mt-2 text-xs text-muted">
                    <span>App Router</span>
                    <span>Server Components</span>
                    <span>API Routes</span>
                  </div>
                </div>
              </div>
            </div>

            {/* Backend Layer */}
            <div className="bg-green-500/10 border border-green-500/20 rounded-xl p-4">
              <h4 className="font-bold text-green-400 mb-3 text-center">BACKEND</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Vercel AI" letter="V" gradient="from-green-500 to-emerald-600" />
                <TechLogo name="Zod" letter="Z" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="node-fetch" letter="N" gradient="from-lime-500 to-green-600" />
              </div>
            </div>

            {/* IA Layer */}
            <div className="bg-purple-500/10 border border-purple-500/20 rounded-xl p-4">
              <h4 className="font-bold text-purple-400 mb-3 text-center">IA LAYER</h4>
              <div className="flex justify-center gap-6">
                <TechLogo name="Anthropic" letter="A" gradient="from-amber-500 to-orange-600" />
                <TechLogo name="Google AI" letter="G" gradient="from-blue-500 to-indigo-600" />
                <TechLogo name="OpenAI" letter="O" gradient="from-green-500 to-emerald-600" />
              </div>
            </div>

            {/* Infrastructure Layer */}
            <div className="bg-amber-500/10 border border-amber-500/20 rounded-xl p-4">
              <h4 className="font-bold text-amber-400 mb-3 text-center">INFRAESTRUTURA</h4>
              <div className="flex justify-center">
                <div className="bg-gradient-to-r from-zinc-700 to-zinc-800 rounded-xl px-8 py-4 text-center border border-zinc-600">
                  <p className="font-bold text-white text-lg">Vercel</p>
                  <div className="flex gap-4 mt-2 text-xs text-muted">
                    <span>Edge Functions</span>
                    <span>CDN Global</span>
                    <span>Env Vars</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Dependencies Table */}
      <section>
        <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <Package className="w-6 h-6 text-cyan-400" />
          Dependências
        </h3>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Production */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-green-500/10 border-b border-subtle px-4 py-3">
              <h4 className="font-bold text-green-400">Production Dependencies</h4>
            </div>
            <div className="p-4 max-h-80 overflow-y-auto">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-muted text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-secondary">
                  {dependencies.production.map((dep, i) => (
                    <tr key={i} className="border-t border-subtle">
                      <td className="py-2 font-mono text-cyan-400">{dep.name}</td>
                      <td className="py-2 text-muted">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>

          {/* Dev */}
          <div className="bg-layer-1 border border-subtle rounded-xl overflow-hidden">
            <div className="bg-amber-500/10 border-b border-subtle px-4 py-3">
              <h4 className="font-bold text-amber-400">Dev Dependencies</h4>
            </div>
            <div className="p-4">
              <table className="w-full text-sm">
                <thead>
                  <tr className="text-muted text-xs uppercase">
                    <th className="text-left pb-2">Pacote</th>
                    <th className="text-left pb-2">Versão</th>
                    <th className="text-left pb-2">Função</th>
                  </tr>
                </thead>
                <tbody className="text-secondary">
                  {dependencies.dev.map((dep, i) => (
                    <tr key={i} className="border-t border-subtle">
                      <td className="py-2 font-mono text-amber-400">{dep.name}</td>
                      <td className="py-2 text-muted">{dep.version}</td>
                      <td className="py-2">{dep.function}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      {/* Footer Note */}
      <div className="p-4 bg-orange-900/20 border border-orange-500/20 rounded-xl">
        <p className="text-sm text-orange-300 italic text-center">
          Este documento cataloga todas as tecnologias utilizadas no ORION,
          sua função e posição na arquitetura.
        </p>
      </div>
    </div>
  );
}

```

---
#### `components/documentation/content.ts`

```
// Documentation Content for Export
// This file contains the markdown content for each documentation tab

export const genesisContent = `# Gênese & Intenção do Sistema

## Por Que Este Sistema Foi Criado

O **ORION** nasceu de uma necessidade real e urgente: **democratizar a produção de vídeos profissionais para YouTube**, eliminando as barreiras técnicas, financeiras e de tempo que impedem criadores de conteúdo de manter uma presença consistente na plataforma.

### O Problema Fundamental

Criar vídeos de qualidade para YouTube tradicionalmente exige:
- **Habilidades técnicas** em edição de vídeo, design gráfico e produção de áudio
- **Investimento significativo** em equipamentos, software e possivelmente equipe
- **Tempo extensivo** - um vídeo de 10 minutos pode levar 8-20 horas de produção
- **Conhecimento de SEO** para otimização e descoberta do conteúdo

Essa barreira exclui milhões de potenciais criadores que têm conhecimento valioso mas não os recursos para transformá-lo em conteúdo visual.

### A Solução Proposta

O ORION é um **sistema de automação inteligente** que:
1. Recebe apenas o tema/tópico do vídeo
2. Pesquisa e estrutura o conteúdo automaticamente
3. Gera roteiro, trilha sonora, thumbnail e descrição
4. Cria o storyboard com seleção de mídias
5. Renderiza o vídeo final
6. Publica diretamente no YouTube

## Prompts Fundacionais

### Diretrizes de Design

O sistema foi projetado seguindo estas premissas:

1. **Automação Máxima, Controle Humano**
   - O sistema automatiza tarefas repetitivas e técnicas
   - O humano mantém controle sobre decisões criativas e editoriais
   - Cada etapa pode ser revisada e modificada antes de avançar

2. **Qualidade de Produção Profissional**
   - Outputs devem ser indistinguíveis de produções manuais
   - Padrões de YouTube Creator Academy são referência
   - SEO e engagement são prioridades arquiteturais

3. **Interface Intuitiva**
   - Zero curva de aprendizado para operações básicas
   - Interface guiada por workflow linear
   - Feedback visual claro em cada etapa

4. **Escalabilidade**
   - Suportar múltiplos vídeos em paralelo
   - Funcionar com diferentes nichos de conteúdo
   - Permitir personalização de diretrizes por projeto

## Decisões Arquiteturais Derivadas

### Por que Next.js 15?

- **App Router** para roteamento moderno e layouts aninhados
- **Server Components** para performance e SEO
- **API Routes** para backend integrado
- **Vercel** como deploy nativo e otimizado

### Por que Zustand para Estado?

- Simplicidade sobre complexidade (vs Redux)
- Persistência nativa com localStorage
- TypeScript first
- Minimal boilerplate

### Por que Workflow em 6 Etapas?

O workflow espelha o processo real de produção de vídeo:
1. **Input** → Briefing criativo
2. **Research** → Pesquisa e referências
3. **Proposal** → Roteiro e assets
4. **Studio** → Storyboard e composição
5. **Render** → Produção final
6. **Upload** → Publicação

Esta estrutura permite:
- Validação humana em cada transição
- Rollback para etapas anteriores
- Persistência de progresso
- Clareza sobre status atual

## Elementos Intencionais

### O que o sistema FAZ:
- Pesquisa profunda sobre qualquer tema
- Geração de roteiros otimizados para engagement
- Seleção automática de mídia relevante
- Composição de vídeo com narração
- Upload direto para YouTube

### O que o sistema NÃO FAZ (exclusões conscientes):
- **Não substitui a voz humana** - se o criador quiser narrar, deve gravar separadamente
- **Não gera conteúdo controverso** - políticas de content safety são aplicadas
- **Não garante viralização** - o sistema otimiza, mas resultados dependem do conteúdo
- **Não armazena vídeos eternamente** - após upload, o vídeo vive no YouTube

## Princípios de Design

### 1. Transparência sobre Magia
O sistema mostra claramente o que está fazendo em cada etapa, evitando "caixas pretas" que frustram usuários.

### 2. Falhas Graceful
Quando uma integração falha, o sistema oferece alternativas ou permite retry, nunca travando o workflow completamente.

### 3. Dados Locais
Dados sensíveis (API keys, configurações) ficam no navegador do usuário, não em servidores externos.

### 4. Documentação Viva
Este próprio módulo é parte do sistema, não um documento externo que envelhece.

---

*Este documento representa a intenção fundacional do sistema ORION, servindo como referência para decisões futuras e transferência de contexto entre IAs.*
`;

export const systemVisionContent = `# Visão Sistêmica & Funcionamento

## O Que o Sistema Faz

O **ORION** é uma plataforma de automação de produção de vídeos que transforma um simples tema em um vídeo completo publicado no YouTube. O sistema orquestra múltiplas IAs e serviços para executar cada etapa do processo de produção.

## Para Quem Foi Projetado

### Perfis de Usuário Primários

1. **Criadores de Conteúdo Solo**
   - Empreendedores digitais
   - Educadores e professores
   - Profissionais liberais

2. **Pequenas Empresas**
   - Marketing digital interno
   - Comunicação institucional
   - Treinamento corporativo

3. **Agências e Produtoras**
   - Produção em escala
   - Prototipagem rápida
   - Testes de conceito

### Requisitos do Usuário
- Conta Google com canal YouTube ativo
- Acesso às APIs necessárias (fornecidas ou próprias)
- Navegador moderno (Chrome, Firefox, Safari, Edge)

## Fluxo Principal de Funcionamento

### Etapa 1: Input (Entrada de Dados)

**Objetivo:** Capturar a intenção e parâmetros do vídeo

**Entradas:**
- Tema principal do vídeo
- Configurações de formato (duração, estilo)
- Público-alvo e tom de voz
- Diretrizes específicas (opcional)

**Saídas:**
- Objeto de contexto estruturado
- Parâmetros validados para próximas etapas

### Etapa 2: Research (Pesquisa)

**Objetivo:** Coletar informações e referências sobre o tema

**Processo:**
1. Análise semântica do tema
2. Busca em fontes confiáveis
3. Extração de pontos-chave
4. Identificação de ângulos únicos
5. Estruturação de outline inicial

**Saídas:**
- Dados de pesquisa estruturados
- Referências e fontes
- Sugestões de abordagem

### Etapa 3: Proposal (Proposta Criativa)

**Objetivo:** Gerar todos os assets criativos do vídeo

**Componentes Gerados:**
- **Roteiro completo** com marcações de tempo
- **Trilha sonora** sugerida com justificativa
- **Títulos e thumbnails** otimizados para CTR
- **Descrição** com timestamps e links
- **Tags e hashtags** para SEO

**Saídas:**
- Pacote completo de proposta criativa
- Preview de cada componente
- Opções de variação

### Etapa 4: Studio (Produção Visual)

**Objetivo:** Criar o storyboard e selecionar mídias

**Processo:**
1. Divisão do roteiro em cenas
2. Busca de imagens/vídeos por cena
3. Definição de transições
4. Preview do storyboard
5. Ajustes manuais (se necessário)

**Saídas:**
- Storyboard completo com mídias
- Timeline visual do vídeo
- Assets prontos para render

### Etapa 5: Render (Composição)

**Objetivo:** Gerar o vídeo final

**Processo:**
1. Síntese de voz (TTS) do roteiro
2. Composição de vídeo com mídias
3. Sincronização de áudio
4. Aplicação de efeitos e transições
5. Exportação em formato YouTube

**Saídas:**
- Arquivo de vídeo renderizado
- Preview para aprovação
- Metadados de produção

### Etapa 6: Upload (Publicação)

**Objetivo:** Publicar o vídeo no YouTube

**Processo:**
1. Autenticação com YouTube
2. Upload do vídeo
3. Aplicação de metadados
4. Configuração de privacidade
5. Geração de thumbnail
6. Agendamento (opcional)

**Saídas:**
- Vídeo publicado no YouTube
- URL do vídeo
- Estatísticas iniciais

## Interação entre Automação e Decisão Humana

### Pontos de Validação Humana

| Etapa | Decisão Humana | Automação |
|-------|----------------|-----------|
| Input | Define tema e parâmetros | Valida e estrutura |
| Research | Aprova abordagem | Pesquisa e sintetiza |
| Proposal | Revisa e edita roteiro | Gera todas as versões |
| Studio | Ajusta mídias | Seleciona e compõe |
| Render | Aprova preview | Renderiza vídeo |
| Upload | Confirma publicação | Executa upload |

### Filosofia de Controle

**"O sistema sugere, o humano decide"**

- Cada etapa gera uma proposta completa
- O usuário pode aceitar, modificar ou regenerar
- Nenhuma ação destrutiva é executada sem confirmação
- Histórico de versões permite rollback

## Componentes Principais e Responsabilidades

### Frontend (Next.js App Router)

**Responsabilidades:**
- Interface de usuário
- Navegação por workflow
- Estado local e persistência
- Comunicação com APIs

**Tecnologias:**
- React 19 com Server Components
- Tailwind CSS para estilos
- Framer Motion para animações
- Zustand para estado

### Backend (API Routes)

**Responsabilidades:**
- Integração com IAs (Anthropic, OpenAI, Google)
- Comunicação com serviços externos
- Processamento de dados
- Validação e segurança

**Endpoints Principais:**
- /api/proposal/* - Geração de conteúdo
- /api/images/* - Geração de imagens
- /api/media/* - Busca de mídia
- /api/youtube/* - Integração YouTube
- /api/render - Composição de vídeo
- /api/tts - Text-to-Speech

### Estado Global (Zustand Stores)

**WorkflowStore:**
- Dados de cada etapa
- Navegação entre etapas
- Persistência localStorage

**GuidelinesStore:**
- Diretrizes personalizadas
- Configurações de projeto

**UIStore:**
- Estado de modais
- Preferências de interface

---

## Diagrama de Fluxo Operacional

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                     EMERGENCY YOUTUBE                           │
│                    Fluxo de Produção                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  INPUT   │───▶│ RESEARCH │───▶│ PROPOSAL │                  │
│  │  Tema    │    │ Pesquisa │    │ Roteiro  │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │ Contexto │    │  Dados   │    │  Assets  │                  │
│  │   JSON   │    │Pesquisa  │    │Criativos │                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                       │                         │
│                                       ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  UPLOAD  │◀───│  RENDER  │◀───│  STUDIO  │                  │
│  │ YouTube  │    │  Vídeo   │    │Storyboard│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│       │               │               │                         │
│       ▼               ▼               ▼                         │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│  │  Vídeo   │    │ Arquivo  │    │  Mídias  │                  │
│  │Publicado │    │  .mp4    │    │Selecionad│                  │
│  └──────────┘    └──────────┘    └──────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

---

*Este documento descreve a visão sistêmica do ORION, detalhando seu funcionamento e a interação entre componentes automatizados e decisões humanas.*
`;

export const integrationsContent = `# Arquitetura de Integrações & APIs

## Visão Geral das Integrações

O ORION integra-se com múltiplos serviços externos para fornecer suas funcionalidades. Cada integração tem um propósito específico e nível de criticidade definido.

## APIs e Serviços Integrados

### 1. Anthropic Claude API

**Função:** Geração de conteúdo de alta qualidade (roteiros, descrições, pesquisa)

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Modelo | Claude 3.5 Sonnet / Claude 3 Opus |
| Uso Principal | Roteiros, análise, estruturação |
| Autenticação | API Key (ANTHROPIC_API_KEY) |

**Fluxo de Dados:**
- Input: Tema, contexto, diretrizes
- Output: Texto estruturado (roteiro, descrição, tags)

**Endpoints Utilizados:**
- POST /v1/messages

---

### 2. Google Gemini API

**Função:** Geração de conteúdo alternativa e pesquisa

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | Gemini 1.5 Pro |
| Uso Principal | Backup de geração, análise |
| Autenticação | API Key (GOOGLE_GENERATIVE_AI_API_KEY) |

**Fluxo de Dados:**
- Input: Prompts estruturados
- Output: Texto gerado

---

### 3. OpenAI API

**Função:** Geração de imagens e modelos alternativos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelo | GPT-4o, DALL-E 3 |
| Uso Principal | Thumbnails, imagens complementares |
| Autenticação | API Key (OPENAI_API_KEY) |

**Endpoints Utilizados:**
- POST /v1/chat/completions
- POST /v1/images/generations

---

### 4. YouTube Data API v3

**Função:** Upload de vídeos e gerenciamento de canal

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Crítica |
| Versão | v3 |
| Uso Principal | Upload, metadados, thumbnails |
| Autenticação | OAuth 2.0 |

**Escopos Necessários:**
- youtube.upload
- youtube.readonly
- youtube.force-ssl

**Fluxo de Dados:**
- Input: Arquivo de vídeo, metadados
- Output: ID do vídeo publicado, URL

---

### 5. Pexels API

**Função:** Busca de imagens e vídeos stock gratuitos

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Uso Principal | B-roll, imagens de cena |
| Autenticação | API Key (PEXELS_API_KEY) |

**Endpoints Utilizados:**
- GET /v1/search (imagens)
- GET /videos/search (vídeos)

---

### 6. Pixabay API

**Função:** Busca alternativa de mídia stock

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Baixa (backup) |
| Uso Principal | Fallback para Pexels |
| Autenticação | API Key (PIXABAY_API_KEY) |

---

### 7. ElevenLabs API

**Função:** Text-to-Speech de alta qualidade

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Alta |
| Uso Principal | Narração do vídeo |
| Autenticação | API Key (ELEVENLABS_API_KEY) |

**Vozes Disponíveis:**
- Português (múltiplas vozes)
- Inglês (múltiplas vozes)

---

### 8. Replicate API

**Função:** Geração de imagens via modelos open-source

| Propriedade | Valor |
|-------------|-------|
| Criticidade | Moderada |
| Modelos | Flux, SDXL |
| Uso Principal | Thumbnails, arte conceitual |
| Autenticação | API Token (REPLICATE_API_TOKEN) |

---

## Diagrama de Conexões

\`\`\`
                    ┌─────────────────────────────────────┐
                    │         EMERGENCY YOUTUBE           │
                    │          (Next.js App)              │
                    └─────────────────────────────────────┘
                                     │
           ┌─────────────────────────┼─────────────────────────┐
           │                         │                         │
           ▼                         ▼                         ▼
┌─────────────────────┐   ┌─────────────────────┐   ┌─────────────────────┐
│   IA PROVIDERS      │   │   MEDIA SERVICES    │   │   VIDEO PLATFORM    │
├─────────────────────┤   ├─────────────────────┤   ├─────────────────────┤
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Anthropic   │  │   │  │    Pexels    │  │   │  │   YouTube    │  │
│  │   Claude     │  │   │  │   Images     │  │   │  │   Data API   │  │
│  └──────────────┘  │   │  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │   └─────────────────────┘
│  │   Google     │  │   │  │   Pixabay    │  │
│  │   Gemini     │  │   │  │   Videos     │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │   OpenAI     │  │   │  │  ElevenLabs  │  │
│  │   GPT-4o     │  │   │  │     TTS      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
│  ┌──────────────┐  │   │  ┌──────────────┐  │
│  │  Replicate   │  │   │  │  Replicate   │  │
│  │   Images     │  │   │  │   Video      │  │
│  └──────────────┘  │   │  └──────────────┘  │
│                     │   │                     │
└─────────────────────┘   └─────────────────────┘
\`\`\`

## Fluxo Real de Dados

### 1. Geração de Roteiro

\`\`\`
Usuário ──▶ Input (tema) ──▶ API /proposal/script
                                    │
                                    ▼
                              Anthropic API
                                    │
                                    ▼
                           Roteiro Estruturado
                                    │
                                    ▼
                              Frontend (UI)
\`\`\`

### 2. Geração de Thumbnail

\`\`\`
Roteiro ──▶ API /images/generate ──▶ Replicate/DALL-E
                                          │
                                          ▼
                                    Imagem Base64
                                          │
                                          ▼
                                    Frontend (Preview)
\`\`\`

### 3. Upload para YouTube

\`\`\`
Vídeo Renderizado ──▶ API /youtube/upload
                            │
                            ▼
                      OAuth 2.0 Auth
                            │
                            ▼
                     YouTube Data API
                            │
                            ▼
                   Vídeo Publicado (URL)
\`\`\`

## Observações de Autenticação

### Armazenamento de Credenciais

| Tipo | Local | Segurança |
|------|-------|-----------|
| API Keys | Variáveis de ambiente (Vercel) | Não expostas ao cliente |
| API Keys do Usuário | localStorage (browser) | Criptografadas localmente |
| OAuth Tokens | Cookie httpOnly | Sessão segura |

### Fluxo OAuth (YouTube)

1. Usuário clica em "Conectar YouTube"
2. Redirect para Google OAuth
3. Usuário autoriza escopos
4. Callback com código de autorização
5. Troca por access_token + refresh_token
6. Tokens armazenados em cookie seguro

### Fallback e Redundância

**Se Anthropic falhar:**
- Tentativa com Google Gemini
- Mensagem de erro amigável se ambos falharem

**Se Pexels falhar:**
- Tentativa com Pixabay
- Permite upload manual de mídia

**Se ElevenLabs falhar:**
- Opção de TTS alternativo
- Permite upload de áudio manual

---

*Este documento detalha todas as integrações do ORION, seus fluxos de dados e considerações de segurança.*
`;

export const techStackContent = `# Stack Tecnológica & Linguagens

## Visão Geral da Stack

O ORION utiliza uma stack moderna e otimizada para aplicações web de alta performance, com foco em Developer Experience (DX) e User Experience (UX).

## Linguagens de Programação

### TypeScript 5.7

**Uso:** 100% do código frontend e backend

**Características Utilizadas:**
- Strict mode habilitado
- Path aliases (@/components, @/lib)
- Type inference avançado
- Utility types (Partial, Pick, Omit)

**Benefícios:**
- Detecção de erros em tempo de desenvolvimento
- Autocomplete inteligente
- Refatoração segura
- Documentação inline via tipos

---

## Frameworks e Bibliotecas

### Next.js 15.1.11

**Categoria:** Framework Full-Stack

| Feature | Uso no Projeto |
|---------|----------------|
| App Router | Roteamento e layouts |
| Server Components | Performance e SEO |
| API Routes | Backend integrado |
| Image Optimization | Otimização de mídia |
| Font Optimization | Fontes otimizadas |

**Configurações Especiais:**
- Output: Standalone (otimizado para containers)
- TypeScript: Strict mode
- ESLint: Integrado

---

### React 19

**Categoria:** UI Library

**Hooks Utilizados:**
- useState, useEffect (padrão)
- useCallback, useMemo (otimização)
- useRef (referências DOM)

**Patterns:**
- Functional Components exclusivamente
- Custom Hooks para lógica reutilizável
- Composição sobre herança

---

### Tailwind CSS 3.4.17

**Categoria:** Framework CSS

**Customizações:**
- Cores: primary (red), accent (yellow)
- Animações customizadas
- Typography plugin
- Forms plugin

**Utilities Mais Usados:**
\`\`\`
bg-zinc-900     → Background escuro
text-white      → Texto principal
border-zinc-800 → Bordas sutis
rounded-xl      → Cantos arredondados
flex/grid       → Layouts
\`\`\`

---

### Zustand 5.0

**Categoria:** State Management

**Stores Implementadas:**
1. WorkflowStore - Estado do workflow
2. GuidelinesStore - Diretrizes
3. UIStore - Estado da interface

**Middleware:**
- persist (localStorage)
- devtools (desenvolvimento)

---

### Framer Motion 11.15

**Categoria:** Animações

**Uso:**
- Transições de página
- Animações de entrada
- Hover effects
- Loading states

---

### Lucide React 0.469

**Categoria:** Iconografia

**Padrão de Uso:**
\`\`\`tsx
import { IconName } from "lucide-react";
<IconName className="w-5 h-5" />
\`\`\`

---

## Tecnologias de Infraestrutura

### Vercel

**Função:** Hospedagem e Deploy

**Features Utilizadas:**
- Automatic deployments (Git push)
- Edge Functions
- Environment Variables
- Analytics
- Preview deployments

**Configuração:**
- Framework preset: Next.js
- Build command: next build
- Output directory: .next

---

### GitHub

**Função:** Versionamento e CI

**Workflows:**
- Push to main → Deploy production
- Push to feature/* → Preview deploy
- Pull requests → Checks automáticos

---

## Diagrama por Camadas

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│                         FRONTEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   React 19  │  │  Tailwind   │  │   Framer    │             │
│  │     UI      │  │    CSS      │  │   Motion    │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Zustand   │  │   Lucide    │  │    clsx     │             │
│  │    State    │  │   Icons     │  │   + merge   │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         FRAMEWORK                               │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Next.js 15                            │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │   App    │  │  Server  │  │   API    │              │   │
│  │  │  Router  │  │Components│  │  Routes  │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│                          BACKEND                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Vercel AI  │  │    Zod     │  │  node-fetch │             │
│  │     SDK     │  │ Validation │  │   HTTP      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                         IA LAYER                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │  Anthropic  │  │   Google   │  │   OpenAI    │             │
│  │    SDK      │  │    AI      │  │    SDK      │             │
│  └─────────────┘  └─────────────┘  └─────────────┘             │
├─────────────────────────────────────────────────────────────────┤
│                       INFRAESTRUTURA                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      Vercel                              │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐              │   │
│  │  │  Edge    │  │   CDN    │  │  Env     │              │   │
│  │  │Functions │  │  Global  │  │  Vars    │              │   │
│  │  └──────────┘  └──────────┘  └──────────┘              │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

## Dependências Principais

### Production Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| next | 15.1.11 | Framework |
| react | 19.0.0 | UI Library |
| zustand | 5.0.3 | State Management |
| tailwindcss | 3.4.17 | Styling |
| framer-motion | 11.15.0 | Animations |
| lucide-react | 0.469.0 | Icons |
| @ai-sdk/anthropic | latest | Claude AI |
| @ai-sdk/google | latest | Gemini AI |
| @ai-sdk/openai | latest | GPT AI |
| zod | 3.24.1 | Validation |
| clsx | 2.1.1 | Class merging |
| tailwind-merge | 2.6.0 | Tailwind utilities |

### Dev Dependencies

| Pacote | Versão | Função |
|--------|--------|--------|
| typescript | 5.7.3 | Type checking |
| eslint | 9.x | Linting |
| @types/react | 19.x | React types |
| @types/node | 22.x | Node types |

---

*Este documento cataloga todas as tecnologias utilizadas no ORION, sua função e posição na arquitetura.*
`;

export const currentStateContent = `# Estado Atual & Próximos Passos

## Status Geral do Projeto

**Versão:** 1.0.0
**Status:** Em Produção (Visual Upgrade em Progresso)
**URL:** https://emergecy-youtube.vercel.app
**Última Atualização:** 24 de Janeiro de 2026
**Nome Oficial:** ORION (anteriormente Emergency YouTube)

---

## 🎨 Visual Upgrade State of the Art (Em Progresso - 24/01/2026)

### Objetivo
Elevar o padrão visual do ORION para nível "State of the Art" (Vercel/Linear/Raycast) com glow effects, gradientes vibrantes, visualizações de dados interativas e micro-interações em toda a interface.

### Progresso Atual

#### ✅ COMPLETO
| Componente | Status | Descrição |
|------------|--------|-----------|
| Dashboard | ✅ 100% | Bento Grid + Recharts (AreaChart, RadialBarChart) com gradientes |
| Design Tokens | ✅ 100% | Tailwind importa lib/design-tokens.ts (single source of truth) |
| Analytics | ✅ 100% | Vercel Analytics + Speed Insights integrados |
| Workflow Page | ✅ 100% | Design tokens aplicados, consistência visual |
| Micro-interações | ✅ 100% | active:scale-95, whileHover, AnimatePresence |

#### ⏳ EM PROGRESSO
| Componente | Status | Bloqueio |
|------------|--------|----------|
| Páginas Internas | 🔶 20% | 13 arquivos com design antigo (step/*, settings, approve/*, documentation/*) |
| Glow Effects | 🔶 0% | Precisa implementar referências visuais (AlphaGPT style) |
| Logo Integration | 🔶 0% | Logo ORION oficial não integrada no sistema |
| YouTube OAuth | 🔶 50% | Loading infinito na conexão |

#### 📋 PRÓXIMOS PASSOS CRÍTICOS
1. **Modernizar Páginas Internas** (step/1-input, step/2-research, step/4-proposal, settings)
   - Substituir zinc-*/gray-* por design tokens
   - Aplicar glow effects e gradientes vibrantes
   - Adicionar micro-interações consistentes

2. **Implementar Visual Identity**
   - Integrar logo ORION oficial em header/sidebar
   - Aplicar glow effects tipo AlphaGPT/Gyanaguru
   - Adicionar connection flow animations

3. **Corrigir Funcionalidades**
   - Resolver YouTube OAuth loading infinito
   - Garantir que settings funcionem de fato
   - Testar todas as integrações

---

## Funcionalidades Concluídas

### Core Features

| Funcionalidade | Status | Prioridade | Impacto |
|----------------|--------|------------|---------|
| Dashboard com Boot Sequence | Concluído | Alta | Alto |
| Workflow de 6 etapas | Concluído | Crítica | Crítico |
| Input de tema e configuração | Concluído | Crítica | Alto |
| Pesquisa com IA | Concluído | Alta | Alto |
| Geração de roteiro | Concluído | Crítica | Crítico |
| Geração de títulos/thumbnails | Concluído | Alta | Alto |
| Geração de descrição e tags | Concluído | Alta | Alto |
| Seleção de trilha sonora | Concluído | Média | Médio |
| Sistema de diretrizes | Concluído | Média | Alto |
| Configuração de API Keys | Concluído | Crítica | Crítico |
| Persistência de estado | Concluído | Alta | Alto |

### Integrações Operacionais

| Integração | Status | Testado |
|------------|--------|---------|
| Anthropic Claude | Operacional | Sim |
| Google Gemini | Operacional | Sim |
| OpenAI GPT-4 | Operacional | Sim |
| Pexels | Operacional | Sim |
| Pixabay | Operacional | Sim |

---

## Funcionalidades Parciais

| Funcionalidade | Progresso | Bloqueio | Prioridade |
|----------------|-----------|----------|------------|
| Upload YouTube | 80% | OAuth config | Alta |
| Render de vídeo | 70% | Integração FFmpeg | Alta |
| TTS (ElevenLabs) | 60% | API quota | Média |
| Storyboard editor | 50% | UX refinement | Média |

---

## Funcionalidades Não Iniciadas

| Funcionalidade | Complexidade | Prioridade | Impacto |
|----------------|--------------|------------|---------|
| Multi-idioma interface | Média | Baixa | Médio |
| Histórico de vídeos | Baixa | Média | Alto |
| Templates de vídeo | Média | Média | Alto |
| Batch processing | Alta | Baixa | Médio |
| Analytics dashboard | Alta | Baixa | Médio |
| Colaboração multi-usuário | Alta | Baixa | Baixo |

---

## Dívidas Técnicas

### Alta Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Error boundaries | Implementar error boundaries em todas as páginas | Estabilidade | Baixo |
| Loading states | Padronizar loading states em todas as operações | UX | Médio |
| Testes E2E | Adicionar testes end-to-end com Playwright | Qualidade | Alto |

### Média Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| Code splitting | Otimizar bundle size com lazy loading | Performance | Médio |
| API rate limiting | Implementar rate limiting no frontend | Custo | Médio |
| Retry logic | Melhorar retry logic para falhas de API | Resiliência | Médio |

### Baixa Prioridade

| Dívida | Descrição | Impacto | Esforço |
|--------|-----------|---------|---------|
| CSS cleanup | Remover estilos não utilizados | Manutenção | Baixo |
| Type coverage | Aumentar coverage de tipos | DX | Médio |
| Documentation | Documentar funções complexas | Manutenção | Médio |

---

## Riscos Conhecidos

### Riscos Técnicos

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| API rate limits | Média | Alto | Cache, retry, fallbacks |
| Custo de APIs | Alta | Médio | Monitoramento, alertas |
| Mudanças em APIs externas | Média | Alto | Versionamento, abstrações |
| Performance em mobile | Baixa | Médio | Testing, otimização |

### Riscos de Negócio

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| Políticas YouTube | Média | Crítico | Compliance, guidelines |
| Competição | Alta | Médio | Inovação, UX |
| Dependência de IAs | Média | Alto | Multi-provider |

---

## Sugestões de Evolução Futura

### Curto Prazo (1-3 meses)

1. **Completar Upload YouTube**
   - Prioridade: Crítica
   - Impacto: Crítico
   - Complexidade: Média

2. **Implementar Render Local**
   - Prioridade: Alta
   - Impacto: Alto
   - Complexidade: Alta

3. **Adicionar Testes**
   - Prioridade: Alta
   - Impacto: Médio
   - Complexidade: Média

### Médio Prazo (3-6 meses)

1. **Templates de Vídeo**
   - Criar biblioteca de templates por nicho
   - Permitir customização de templates
   - Sistema de compartilhamento

2. **Histórico e Analytics**
   - Dashboard de vídeos produzidos
   - Métricas de performance
   - Insights de melhoria

3. **Melhorias de UX**
   - Onboarding interativo
   - Tooltips contextuais
   - Keyboard shortcuts

### Longo Prazo (6-12 meses)

1. **API Pública**
   - Expor funcionalidades via API
   - SDK para integrações
   - Documentação completa

2. **Marketplace de Assets**
   - Trilhas sonoras
   - Templates
   - Vozes TTS

3. **Versão Enterprise**
   - Multi-tenant
   - SSO/SAML
   - SLA garantido

---

## Métricas de Qualidade

### Performance

| Métrica | Atual | Meta |
|---------|-------|------|
| LCP (Largest Contentful Paint) | 1.2s | < 2.5s |
| FID (First Input Delay) | 50ms | < 100ms |
| CLS (Cumulative Layout Shift) | 0.05 | < 0.1 |
| Bundle Size | 450KB | < 500KB |

### Code Quality

| Métrica | Atual | Meta |
|---------|-------|------|
| TypeScript Coverage | 100% | 100% |
| ESLint Errors | 0 | 0 |
| Test Coverage | 0% | > 70% |

---

## Conclusão

O ORION está em estágio de **produção funcional** com as principais features de geração de conteúdo operacionais. Os próximos passos críticos são:

1. Completar a integração de upload YouTube
2. Implementar render de vídeo completo
3. Adicionar cobertura de testes
4. Resolver dívidas técnicas de alta prioridade

O sistema está preparado para escalar e evoluir conforme as necessidades dos usuários.

---

*Este documento reflete o estado atual do ORION e serve como roadmap para decisões de desenvolvimento futuro.*
`;

export const decisionsContent = `# Decisoes Arquiteturais - Claude Code

## Registro de Decisoes de Desenvolvimento

Este documento registra todas as decisoes arquiteturais importantes tomadas durante o desenvolvimento do ORION, incluindo debates, consensos e justificativas tecnicas.

---

## Sessao 1: O Grande Debate Arquitetural (Janeiro 2026)

### Contexto

Necessidade de migrar de localStorage para persistencia real em banco de dados, implementar workflows duraveis para processos longos (renderizacao de video, deep research), e criar sistema de aprovacao humana (human-in-the-loop).

### Participantes do Debate

1. **Claude (Anthropic)** - Posicao: Conservadora e battle-tested. Priorizou estabilidade.
2. **Gemini (Google)** - Posicao: Bleeding edge. Descobriu ToolLoopAgent no AI SDK 6.
3. **ChatGPT (OpenAI)** - Posicao: Validador critico. Confirmou existencia do SDK 6.

### Pontos Criticos Identificados

#### 1. Vercel Functions Timeout
- Limite de 300s (5 min) no Vercel Pro
- Processos como renderizacao podem levar minutos/horas
- Solucao: workflows duraveis externos

#### 2. Vercel Workflow DevKit em Beta
- Embora exista, ainda esta em Public Beta
- Risco de bugs criticos em producao

#### 3. AI SDK Versao Atual
- Projeto usa AI SDK 4.3.19
- Para usar ToolLoopAgent, precisa migrar para v6

### Consenso Unanime: OPCAO B - Arquitetura Hibrida

Apos debate intenso, as tres IAs chegaram a um consenso:

| Camada | Tecnologia | Justificativa |
|--------|------------|---------------|
| Intelligence | AI SDK 6 + ToolLoopAgent | Agentes autonomos com loop de ferramentas |
| Orchestration | Inngest | Durabilidade, retries, sleep nativo |
| Persistence | Vercel Postgres + Prisma | Estado persistente cross-device |
| Storage | Vercel Blob | 1GB incluido no Pro |
| Notifications | Resend | 10K emails/mes gratis |

**Custo Total: $20/mes (Vercel Pro)**

---

## Arquitetura do Pipeline de Video

\`\`\`
┌─────────────────────────────────────────────────────────────────┐
│  AI SDK 6 (ToolLoopAgent)          Inngest                      │
│  ┌─────────────────────┐           ┌─────────────────────┐      │
│  │ Research Agent      │──────────>│ step.run()          │      │
│  │ (Gemini 2.0)        │           │ step.sleep()        │      │
│  └─────────────────────┘           │ step.waitForEvent() │      │
│  ┌─────────────────────┐           │ Retry automatico    │      │
│  │ Script Agent        │──────────>│                     │      │
│  │ (Claude 3.5)        │           └─────────────────────┘      │
│  └─────────────────────┘                    │                   │
│                                             ▼                   │
│                        ┌────────────────────────────────────┐   │
│                        │ Vercel Postgres + Blob             │   │
│                        └────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
\`\`\`

### Fluxo do Workflow

1. **Deep Research (Gemini)** → Pesquisa trends e referencias
2. **Script Generation (Claude)** → Gera roteiro otimizado
3. **AGUARDAR APROVACAO** → Email + step.waitForEvent('7d')
4. **Storyboard Generation** → Cria cenas com prompts visuais
5. **Render (JSON2VIDEO)** → step.sleep() enquanto renderiza
6. **Upload YouTube** → Com retry automatico

---

## Modelo de Dados (Prisma Schema)

\`\`\`prisma
model Project {
  id          String         @id @default(cuid())
  name        String
  status      ProjectStatus  @default(DRAFT)
  createdAt   DateTime       @default(now())

  // Relacionamentos
  context     Context?
  research    Research?
  script      Script?
  storyboard  Storyboard?
  render      Render?
  upload      Upload?
  workflow    WorkflowState?
}

enum ProjectStatus {
  DRAFT
  RESEARCHING
  SCRIPTING
  AWAITING_APPROVAL
  APPROVED
  RENDERING
  UPLOADING
  COMPLETED
  FAILED
}

model WorkflowState {
  inngestRunId     String?
  currentStep      String
  awaitingApproval Boolean   @default(false)
  approvalToken    String?   @unique
}
\`\`\`

---

## Fases de Implementacao (CONCLUÍDO 23/01/2026)

### FASE 1: Setup & Dependencias ✅
- Ajustado package.json para AI SDK 6
- Instalado inngest, prisma, @prisma/client, resend

### FASE 2: Banco de Dados (Prisma) ✅
- Criado prisma/schema.prisma completo
- Models: Project, Research, Script, Storyboard, Render, Upload, WorkflowState

### FASE 3: Configuracao Inngest ✅
- Criado client (lib/inngest/client.ts)
- Criado API route (app/api/inngest/route.ts)
- Implementado video-pipeline.ts com step.waitForEvent()

### FASE 4: Agentes AI SDK 6 ✅
- Implementados em lib/agents/
- research-agent.ts (Gemini 2.0 Flash)
- script-agent.ts (Claude 3.5 Sonnet)

### FASE 5: Sistema de Aprovacao ✅
- Notificacoes por email (Resend)
- Pagina de aprovacao /approve/[token]
- Paginas de success e feedback-sent

### FASE 6: Frontend (EM PROGRESSO)
- Migracao de localStorage para Prisma
- Integracao com Inngest pipeline

---

## Arquivos Criados

\`\`\`
prisma/schema.prisma
lib/db/prisma.ts
lib/inngest/client.ts
lib/inngest/functions/video-pipeline.ts
lib/agents/research-agent.ts
lib/agents/script-agent.ts
lib/services/research.service.ts
lib/services/script.service.ts
lib/services/storyboard.service.ts
lib/services/render.service.ts
lib/services/upload.service.ts
lib/services/notification.service.ts
app/api/inngest/route.ts
app/api/approve/route.ts
app/approve/[token]/page.tsx
app/approve/success/page.tsx
app/approve/feedback-sent/page.tsx
\`\`\`

---

## Referencias e Fontes

- [AI SDK 6](https://ai-sdk.dev)
- [Inngest Vercel Integration](https://inngest.com/docs/guides/vercel)
- [Prisma Documentation](https://www.prisma.io/docs)
- [Resend API](https://resend.com/docs)

---

*Documento gerado em: 23/01/2026*
*Implementacao concluida: 23/01/2026*
*Participantes: Claude (Anthropic), Gemini (Google), ChatGPT (OpenAI)*
*Deploy: Vercel Pro - https://emergecy-youtube.vercel.app*
`;

```

---
#### `components/documentation/index.ts`

```
// Documentation Module Components
export { default as GenesisTab } from "./GenesisTab";
export { default as SystemVisionTab } from "./SystemVisionTab";
export { default as IntegrationsTab } from "./IntegrationsTab";
export { default as TechStackTab } from "./TechStackTab";
export { default as CurrentStateTab } from "./CurrentStateTab";
export { default as DecisionsTab } from "./DecisionsTab";

// Content exports for Markdown generation
export {
  genesisContent,
  systemVisionContent,
  integrationsContent,
  techStackContent,
  currentStateContent,
  decisionsContent,
} from "./content";

```

---
#### `components/proposal/ThumbnailEditor.tsx`

```
"use client";

import { useState } from "react";
import { motion } from "framer-motion";
import {
  Upload,
  Copy,
  RefreshCw,
  Sparkles,
  CheckCircle2,
  AlertCircle,
  Image as ImageIcon,
  Loader2,
} from "lucide-react";
import { TitleThumbnailVariation } from "@/types";
import { cn } from "@/lib/utils";
import Button from "@/components/ui/Button";
import Card from "@/components/ui/Card";

interface ThumbnailEditorProps {
  variations: [
    TitleThumbnailVariation,
    TitleThumbnailVariation,
    TitleThumbnailVariation
  ];
  onVariationUpdate: (index: number, updates: Partial<TitleThumbnailVariation>) => void;
  onGenerateThumbnail: (index: number, prompt: string) => Promise<void>;
  className?: string;
}

export default function ThumbnailEditor({
  variations,
  onVariationUpdate,
  onGenerateThumbnail,
  className,
}: ThumbnailEditorProps) {
  const labels = ["A", "B", "C"];
  const allReady = variations.every((v) => v.isReady);

  return (
    <div className={cn("space-y-6", className)}>
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h3 className="text-xl font-bold text-white">
            Teste A/B/C de Thumbnails
          </h3>
          <p className="text-sm text-gray-400 mt-1">
            Todas as 3 versões serão enviadas para teste no YouTube
          </p>
        </div>

        {/* Status Badge */}
        <div
          className={cn(
            "px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2",
            allReady
              ? "bg-green-500/20 text-green-400"
              : "bg-amber-500/20 text-amber-400"
          )}
        >
          {allReady ? (
            <>
              <CheckCircle2 className="w-4 h-4" />
              Todas prontas
            </>
          ) : (
            <>
              <AlertCircle className="w-4 h-4" />
              {variations.filter((v) => v.isReady).length}/3 prontas
            </>
          )}
        </div>
      </div>

      {/* Grid de Variações */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {variations.map((variation, index) => (
          <ThumbnailVariationCard
            key={variation.id}
            variation={variation}
            label={labels[index]}
            index={index}
            onUpdate={(updates) => onVariationUpdate(index, updates)}
            onGenerate={(prompt) => onGenerateThumbnail(index, prompt)}
          />
        ))}
      </div>

      {/* Aviso */}
      {!allReady && (
        <div className="bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3">
          <AlertCircle className="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" />
          <div className="flex-1">
            <p className="text-amber-400 font-semibold text-sm">
              Complete todas as 3 thumbnails para continuar
            </p>
            <p className="text-amber-400/70 text-xs mt-1">
              O YouTube permite testar até 3 thumbnails simultaneamente para
              descobrir qual performa melhor.
            </p>
          </div>
        </div>
      )}
    </div>
  );
}

interface ThumbnailVariationCardProps {
  variation: TitleThumbnailVariation;
  label: string;
  index: number;
  onUpdate: (updates: Partial<TitleThumbnailVariation>) => void;
  onGenerate: (prompt: string) => Promise<void>;
}

function ThumbnailVariationCard({
  variation,
  label,
  index,
  onUpdate,
  onGenerate,
}: ThumbnailVariationCardProps) {
  const [isGenerating, setIsGenerating] = useState(false);
  const [isUploading, setIsUploading] = useState(false);

  const handleGenerate = async () => {
    setIsGenerating(true);
    try {
      await onGenerate(variation.thumbnailPrompt);
    } finally {
      setIsGenerating(false);
    }
  };

  const handleUpload = async (file: File) => {
    setIsUploading(true);
    try {
      // Implementar upload de arquivo
      // Por agora, simular com setTimeout
      await new Promise((resolve) => setTimeout(resolve, 1000));

      const url = URL.createObjectURL(file);
      onUpdate({
        thumbnailUrl: url,
        isReady: true,
      });
    } finally {
      setIsUploading(false);
    }
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file && file.type.startsWith("image/")) {
      handleUpload(file);
    }
  };

  const copyPrompt = () => {
    navigator.clipboard.writeText(variation.thumbnailPrompt);
  };

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: index * 0.1 }}
    >
      <Card className="p-0 overflow-hidden">
        {/* Header */}
        <div className="bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-gray-800 p-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-cyan-500/50">
                {label}
              </div>
              <div>
                <h4 className="font-semibold text-white">Variação {label}</h4>
                <p className="text-xs text-gray-400">
                  {variation.isReady ? "Pronta" : "Pendente"}
                </p>
              </div>
            </div>

            {variation.isReady && (
              <CheckCircle2 className="w-5 h-5 text-green-500" />
            )}
          </div>
        </div>

        <div className="p-4 space-y-4">
          {/* Título */}
          <div>
            <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
              Título
            </label>
            <input
              type="text"
              value={variation.title}
              onChange={(e) => onUpdate({ title: e.target.value })}
              className="mt-1 w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"
              placeholder="Título chamativo para o vídeo"
            />
          </div>

          {/* Prompt */}
          <div>
            <div className="flex items-center justify-between mb-1">
              <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
                Prompt da Thumbnail
              </label>
              <button
                onClick={copyPrompt}
                className="text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-1"
              >
                <Copy className="w-3 h-3" />
                Copiar
              </button>
            </div>
            <textarea
              value={variation.thumbnailPrompt}
              onChange={(e) => onUpdate({ thumbnailPrompt: e.target.value })}
              rows={3}
              className="w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"
              placeholder="Descreva a thumbnail que deseja gerar com IA..."
            />
          </div>

          {/* Preview da Thumbnail */}
          <div>
            <label className="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2 block">
              Preview
            </label>
            {variation.thumbnailUrl ? (
              <div className="relative aspect-video rounded-lg overflow-hidden bg-gray-900 border border-gray-700">
                <img
                  src={variation.thumbnailUrl}
                  alt={`Thumbnail ${label}`}
                  className="w-full h-full object-cover"
                />
                <button
                  onClick={() => onUpdate({ thumbnailUrl: null, isReady: false })}
                  className="absolute top-2 right-2 p-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors"
                >
                  <RefreshCw className="w-4 h-4 text-white" />
                </button>
              </div>
            ) : (
              <div className="aspect-video rounded-lg bg-gray-900 border-2 border-dashed border-gray-700 flex items-center justify-center">
                <div className="text-center">
                  <ImageIcon className="w-12 h-12 text-gray-600 mx-auto mb-2" />
                  <p className="text-sm text-gray-500">Nenhuma thumbnail</p>
                </div>
              </div>
            )}
          </div>

          {/* Ações */}
          <div className="space-y-2">
            <Button
              onClick={handleGenerate}
              disabled={isGenerating || !variation.thumbnailPrompt}
              className="w-full"
              variant="primary"
            >
              {isGenerating ? (
                <>
                  <Loader2 className="w-4 h-4 animate-spin" />
                  Gerando...
                </>
              ) : (
                <>
                  <Sparkles className="w-4 h-4" />
                  Gerar com IA
                </>
              )}
            </Button>

            <div className="relative">
              <input
                type="file"
                accept="image/*"
                onChange={handleFileChange}
                className="hidden"
                id={`upload-${variation.id}`}
                disabled={isUploading}
              />
              <label
                htmlFor={`upload-${variation.id}`}
                className={cn(
                  "w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all cursor-pointer",
                  isUploading
                    ? "bg-gray-800 text-gray-500 cursor-not-allowed"
                    : "bg-gray-800 hover:bg-gray-700 text-white border border-gray-700"
                )}
              >
                {isUploading ? (
                  <>
                    <Loader2 className="w-4 h-4 animate-spin" />
                    Enviando...
                  </>
                ) : (
                  <>
                    <Upload className="w-4 h-4" />
                    Upload Manual
                  </>
                )}
              </label>
            </div>
          </div>
        </div>
      </Card>
    </motion.div>
  );
}

```

---
#### `components/settings/AppearanceTab.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { Palette, Save, RefreshCw, RotateCcw, Upload, Image as ImageIcon } from 'lucide-react';
import { getBranding, updateBranding, resetBranding } from '@/app/actions/settings';
import { useBrandingStore } from '@/lib/store';
import type { BrandingConfig } from '@/types';

export function AppearanceTab() {
  const [config, setConfig] = useState<BrandingConfig>({
    systemName: 'ORION',
    logoUrl: null,
    updatedAt: new Date().toISOString(),
  });
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [loading, setLoading] = useState(true);

  const { setBranding, resetBranding: resetBrandingStore } = useBrandingStore();

  useEffect(() => {
    loadBranding();
  }, []);

  const loadBranding = async () => {
    setLoading(true);
    try {
      const data = await getBranding();
      setConfig(data);
    } catch (error) {
      console.error('Failed to load branding:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSave = async () => {
    setSaving(true);
    setSuccess(false);

    try {
      const updated = await updateBranding({
        systemName: config.systemName,
        logoUrl: config.logoUrl,
      });

      setConfig(updated);

      // Sync with Zustand store (client-side)
      setBranding(updated.systemName, updated.logoUrl);

      setSuccess(true);
      setTimeout(() => setSuccess(false), 3000);
    } catch (error) {
      console.error('Failed to update branding:', error);
      alert('Erro ao atualizar aparência');
    } finally {
      setSaving(false);
    }
  };

  const handleReset = async () => {
    if (!confirm('Tem certeza que deseja resetar para o padrão ORION?')) {
      return;
    }

    setSaving(true);
    try {
      const defaultConfig = await resetBranding();
      setConfig(defaultConfig);

      // Sync with Zustand store
      resetBrandingStore();

      alert('Branding resetado com sucesso!');
    } catch (error) {
      console.error('Failed to reset branding:', error);
      alert('Erro ao resetar branding');
    } finally {
      setSaving(false);
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-purple-500/10 rounded-lg">
            <Palette className="w-5 h-5 text-purple-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Aparência do Sistema</h2>
            <p className="text-sm text-muted">Personalize o nome e logotipo (White Label)</p>
          </div>
        </div>
        <button
          onClick={handleReset}
          disabled={saving}
          className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-secondary rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <RotateCcw className="w-4 h-4" />
          Resetar Padrão
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Logo Preview */}
        <div className="lg:col-span-1">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-4">Preview do Logo</h3>

            <div className="aspect-square bg-black/50 border-2 border-dashed border-subtle rounded-xl flex items-center justify-center overflow-hidden">
              {config.logoUrl ? (
                <img
                  src={config.logoUrl}
                  alt="Logo"
                  className="w-full h-full object-contain p-4"
                  onError={(e) => {
                    e.currentTarget.src = '';
                    e.currentTarget.style.display = 'none';
                  }}
                />
              ) : (
                <div className="text-center">
                  <ImageIcon className="w-12 h-12 text-disabled mx-auto mb-2" />
                  <p className="text-xs text-muted">Sem logo</p>
                </div>
              )}
            </div>

            <div className="mt-4 p-3 bg-layer-1 border border-subtle rounded-lg">
              <p className="text-xs font-semibold text-muted mb-1">Nome do Sistema:</p>
              <p className="text-lg font-bold text-white">{config.systemName}</p>
            </div>
          </div>
        </div>

        {/* Configuration Form */}
        <div className="lg:col-span-2 space-y-4">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
            {/* System Name */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Nome do Sistema
              </label>
              <input
                type="text"
                value={config.systemName}
                onChange={(e) => setConfig({ ...config, systemName: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all"
                placeholder="Ex: ORION, MyApp, Studio..."
              />
              <p className="text-xs text-muted mt-1">
                Este nome aparecerá na barra lateral e no título da página
              </p>
            </div>

            {/* Logo URL */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                URL do Logotipo
              </label>
              <input
                type="url"
                value={config.logoUrl || ''}
                onChange={(e) => setConfig({ ...config, logoUrl: e.target.value || null })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all"
                placeholder="https://exemplo.com/logo.png"
              />
              <p className="text-xs text-muted mt-1">
                Formatos recomendados: PNG, SVG (fundo transparente)
              </p>
            </div>

            {/* Info Box */}
            <div className="bg-purple-500/10 border border-purple-500/30 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <Upload className="w-5 h-5 text-purple-400 flex-shrink-0 mt-0.5" />
                <div>
                  <h4 className="text-sm font-semibold text-purple-300 mb-1">
                    Como fazer upload do logo
                  </h4>
                  <ul className="text-xs text-purple-200/80 space-y-1">
                    <li>• Use um serviço como Imgur, Cloudinary ou GitHub</li>
                    <li>• Para GitHub: suba a imagem e copie o link &quot;raw&quot;</li>
                    <li>• Tamanho recomendado: 512x512px ou maior</li>
                    <li>• Deixe em branco para usar o logo padrão</li>
                  </ul>
                </div>
              </div>
            </div>

            {/* Save Button */}
            <div className="flex items-center justify-between pt-4 border-t border-subtle">
              <div className="text-xs text-muted">
                Última atualização:{' '}
                {new Date(config.updatedAt).toLocaleString('pt-BR')}
              </div>
              <button
                onClick={handleSave}
                disabled={saving}
                className="px-6 py-2.5 bg-purple-600 hover:bg-purple-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {saving ? (
                  <>
                    <RefreshCw className="w-4 h-4 animate-spin" />
                    Salvando...
                  </>
                ) : success ? (
                  <>
                    <Save className="w-4 h-4" />
                    Salvo!
                  </>
                ) : (
                  <>
                    <Save className="w-4 h-4" />
                    Salvar Alterações
                  </>
                )}
              </button>
            </div>
          </div>

          {/* Additional Info */}
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <ImageIcon className="w-4 h-4 text-muted" />
              Sistema White Label
            </h3>
            <p className="text-sm text-muted leading-relaxed">
              Com o sistema White Label, você pode personalizar completamente a identidade visual do ORION.
              Altere o nome do sistema e o logotipo para refletir sua marca. As mudanças são aplicadas
              automaticamente em toda a interface, incluindo a barra lateral, título da página e metadados.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/DocsManagerTab.tsx`

```
"use client";

import { useState } from 'react';
import { FileText, Plus, Edit2, Trash2, Eye, EyeOff, Save, X } from 'lucide-react';
import { createDocPage, updateDocPage, deleteDocPage } from '@/app/actions/settings';
import type { DocPage, DocCategory } from '@/types';

interface DocsManagerTabProps {
  initialDocs: DocPage[];
  onUpdate: () => void;
}

const CATEGORIES: { value: DocCategory; label: string }[] = [
  { value: 'getting-started', label: 'Primeiros Passos' },
  { value: 'features', label: 'Recursos' },
  { value: 'api', label: 'API' },
  { value: 'guides', label: 'Guias' },
  { value: 'changelog', label: 'Changelog' },
];

export function DocsManagerTab({ initialDocs, onUpdate }: DocsManagerTabProps) {
  const [docs, setDocs] = useState(initialDocs);
  const [isCreating, setIsCreating] = useState(false);
  const [editingId, setEditingId] = useState<string | null>(null);
  const [formData, setFormData] = useState<Partial<DocPage>>({
    title: '',
    category: 'getting-started',
    content: '',
    visible: true,
    order: 1,
  });

  const handleCreate = async () => {
    try {
      const newDoc = await createDocPage({
        title: formData.title || 'Sem título',
        category: formData.category as DocCategory,
        content: formData.content || '',
        visible: formData.visible ?? true,
        order: formData.order ?? docs.length + 1,
      });

      setDocs([...docs, newDoc]);
      setIsCreating(false);
      setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
      onUpdate();
    } catch (error) {
      console.error('Failed to create doc:', error);
      alert('Erro ao criar documento');
    }
  };

  const handleUpdate = async (id: string) => {
    try {
      const updated = await updateDocPage(id, formData);
      if (updated) {
        setDocs(docs.map(doc => doc.id === id ? updated : doc));
        setEditingId(null);
        setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to update doc:', error);
      alert('Erro ao atualizar documento');
    }
  };

  const handleDelete = async (id: string) => {
    if (!confirm('Tem certeza que deseja excluir este documento?')) return;

    try {
      const success = await deleteDocPage(id);
      if (success) {
        setDocs(docs.filter(doc => doc.id !== id));
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to delete doc:', error);
      alert('Erro ao excluir documento');
    }
  };

  const handleToggleVisibility = async (doc: DocPage) => {
    try {
      const updated = await updateDocPage(doc.id, { visible: !doc.visible });
      if (updated) {
        setDocs(docs.map(d => d.id === doc.id ? updated : d));
        onUpdate();
      }
    } catch (error) {
      console.error('Failed to toggle visibility:', error);
    }
  };

  const startEdit = (doc: DocPage) => {
    setEditingId(doc.id);
    setFormData({
      title: doc.title,
      category: doc.category,
      content: doc.content,
      visible: doc.visible,
      order: doc.order,
    });
  };

  const cancelEdit = () => {
    setEditingId(null);
    setIsCreating(false);
    setFormData({ title: '', category: 'getting-started', content: '', visible: true, order: 1 });
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-amber-500/10 rounded-lg">
            <FileText className="w-5 h-5 text-amber-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Gerenciador de Documentação</h2>
            <p className="text-sm text-muted">Crie e edite páginas de documentação</p>
          </div>
        </div>
        <button
          onClick={() => setIsCreating(true)}
          className="px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95"
        >
          <Plus className="w-4 h-4" />
          Nova Página
        </button>
      </div>

      {/* Create/Edit Form */}
      {(isCreating || editingId) && (
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-white">
              {isCreating ? 'Criar Nova Página' : 'Editar Página'}
            </h3>
            <button
              onClick={cancelEdit}
              className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
            >
              <X className="w-5 h-5 text-muted" />
            </button>
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">Título</label>
              <input
                type="text"
                value={formData.title}
                onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white"
                placeholder="Título da página"
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">Categoria</label>
              <select
                value={formData.category}
                onChange={(e) => setFormData({ ...formData, category: e.target.value as DocCategory })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white"
              >
                {CATEGORIES.map(cat => (
                  <option key={cat.value} value={cat.value}>{cat.label}</option>
                ))}
              </select>
            </div>
          </div>

          <div>
            <label className="block text-sm font-medium text-secondary mb-2">Conteúdo (Markdown)</label>
            <textarea
              value={formData.content}
              onChange={(e) => setFormData({ ...formData, content: e.target.value })}
              rows={10}
              className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white font-mono text-sm resize-none"
              placeholder="# Título\n\nConteúdo em markdown..."
            />
          </div>

          <div className="flex items-center justify-between">
            <label className="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                checked={formData.visible}
                onChange={(e) => setFormData({ ...formData, visible: e.target.checked })}
                className="w-4 h-4 rounded border-subtle text-amber-600 focus:ring-amber-500"
              />
              <span className="text-sm text-secondary">Visível no menu de documentação</span>
            </label>

            <button
              onClick={() => editingId ? handleUpdate(editingId) : handleCreate()}
              className="px-6 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95"
            >
              <Save className="w-4 h-4" />
              {isCreating ? 'Criar' : 'Salvar'}
            </button>
          </div>
        </div>
      )}

      {/* Docs List */}
      <div className="grid grid-cols-1 gap-3">
        {docs.map((doc) => (
          <div
            key={doc.id}
            className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:border-subtle transition-all"
          >
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3 flex-1 min-w-0">
                <div className={`p-2 rounded-lg ${doc.visible ? 'bg-green-500/10' : 'bg-layer-2'}`}>
                  {doc.visible ? (
                    <Eye className="w-4 h-4 text-green-500" />
                  ) : (
                    <EyeOff className="w-4 h-4 text-muted" />
                  )}
                </div>
                <div className="flex-1 min-w-0">
                  <h4 className="font-semibold text-white truncate">{doc.title}</h4>
                  <div className="flex items-center gap-2 text-xs text-muted">
                    <span>{CATEGORIES.find(c => c.value === doc.category)?.label}</span>
                    <span>•</span>
                    <span>Ordem: {doc.order}</span>
                  </div>
                </div>
              </div>
              <div className="flex items-center gap-2">
                <button
                  onClick={() => handleToggleVisibility(doc)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                  title={doc.visible ? 'Ocultar' : 'Mostrar'}
                >
                  {doc.visible ? (
                    <Eye className="w-4 h-4 text-muted" />
                  ) : (
                    <EyeOff className="w-4 h-4 text-muted" />
                  )}
                </button>
                <button
                  onClick={() => startEdit(doc)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                >
                  <Edit2 className="w-4 h-4 text-blue-400" />
                </button>
                <button
                  onClick={() => handleDelete(doc.id)}
                  className="p-2 hover:bg-layer-2 rounded-lg transition-colors"
                >
                  <Trash2 className="w-4 h-4 text-red-400" />
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

```

---
#### `components/settings/FilesTab.tsx`

```
"use client";

import React, { useState, useEffect, useRef } from 'react';
import {
  FolderOpen,
  File,
  RefreshCw,
  ChevronRight,
  FileText,
  FolderClosed,
  Upload,
  Image as ImageIcon,
  Video,
  Music,
  Archive,
  ExternalLink,
  AlertCircle,
  Cloud,
} from 'lucide-react';
import type { DirectoryListing, FileEntry } from '@/types';

export function FilesTab() {
  const [listing, setListing] = useState<DirectoryListing | null>(null);
  const [loading, setLoading] = useState(true);
  const [currentPath, setCurrentPath] = useState('');
  const [uploading, setUploading] = useState(false);
  const [uploadError, setUploadError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    loadDirectory(currentPath);
  }, [currentPath]);

  const loadDirectory = async (path: string) => {
    setLoading(true);
    try {
      const response = await fetch(`/api/files/list?path=${encodeURIComponent(path)}`);
      if (response.ok) {
        const data = await response.json();
        setListing(data);
      } else {
        console.error('Failed to load directory');
      }
    } catch (error) {
      console.error('Error loading directory:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;

    setUploading(true);
    setUploadError(null);

    try {
      const formData = new FormData();
      formData.append('file', file);
      if (currentPath) {
        formData.append('folder', currentPath);
      }

      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error || 'Upload failed');
      }

      // Refresh the listing after upload
      await loadDirectory(currentPath);
    } catch (error) {
      console.error('Upload error:', error);
      setUploadError(error instanceof Error ? error.message : 'Erro ao fazer upload');
    } finally {
      setUploading(false);
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    }
  };

  const handleDownload = (file: FileEntry) => {
    if (file.type === 'directory' || !file.url) return;

    // Open URL directly for Vercel Blob files
    window.open(file.url, '_blank');
  };

  const handleNavigate = (file: FileEntry) => {
    if (file.type === 'directory') {
      setCurrentPath(file.path);
    }
  };

  const handleGoUp = () => {
    const parts = currentPath.split('/').filter(Boolean);
    parts.pop();
    setCurrentPath(parts.join('/'));
  };

  const formatBytes = (bytes?: number): string => {
    if (!bytes) return '—';
    const kb = bytes / 1024;
    if (kb < 1024) return `${kb.toFixed(2)} KB`;
    const mb = kb / 1024;
    if (mb < 1024) return `${mb.toFixed(2)} MB`;
    const gb = mb / 1024;
    return `${gb.toFixed(2)} GB`;
  };

  const formatDate = (dateString?: string): string => {
    if (!dateString) return '—';
    return new Date(dateString).toLocaleString('pt-BR');
  };

  const getFileIcon = (entry: FileEntry) => {
    if (entry.type === 'directory') {
      return <FolderClosed className="w-5 h-5 text-yellow-500" />;
    }

    const ext = entry.name.split('.').pop()?.toLowerCase();
    const iconMap: Record<string, React.ReactElement> = {
      // Documents
      json: <FileText className="w-5 h-5 text-blue-400" />,
      txt: <FileText className="w-5 h-5 text-muted" />,
      csv: <FileText className="w-5 h-5 text-green-400" />,
      xml: <FileText className="w-5 h-5 text-orange-400" />,
      md: <FileText className="w-5 h-5 text-purple-400" />,
      pdf: <FileText className="w-5 h-5 text-red-400" />,
      // Images
      jpg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      jpeg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      png: <ImageIcon className="w-5 h-5 text-pink-400" />,
      gif: <ImageIcon className="w-5 h-5 text-pink-400" />,
      webp: <ImageIcon className="w-5 h-5 text-pink-400" />,
      svg: <ImageIcon className="w-5 h-5 text-pink-400" />,
      // Video
      mp4: <Video className="w-5 h-5 text-cyan-400" />,
      webm: <Video className="w-5 h-5 text-cyan-400" />,
      mov: <Video className="w-5 h-5 text-cyan-400" />,
      // Audio
      mp3: <Music className="w-5 h-5 text-emerald-400" />,
      wav: <Music className="w-5 h-5 text-emerald-400" />,
      ogg: <Music className="w-5 h-5 text-emerald-400" />,
      // Archives
      zip: <Archive className="w-5 h-5 text-amber-400" />,
      tar: <Archive className="w-5 h-5 text-amber-400" />,
      gz: <Archive className="w-5 h-5 text-amber-400" />,
    };

    return iconMap[ext || ''] || <File className="w-5 h-5 text-muted" />;
  };

  if (loading && !listing) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-orange-500/10 rounded-lg">
            <Cloud className="w-5 h-5 text-orange-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Gerenciador de Arquivos</h2>
            <p className="text-sm text-muted">
              Vercel Blob Storage - Arquivos do projeto
            </p>
          </div>
        </div>

        <div className="flex items-center gap-3">
          {/* Upload Button */}
          <button
            onClick={() => fileInputRef.current?.click()}
            disabled={uploading}
            className="px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            {uploading ? (
              <RefreshCw className="w-4 h-4 animate-spin" />
            ) : (
              <Upload className="w-4 h-4" />
            )}
            Upload
          </button>

          <input
            ref={fileInputRef}
            type="file"
            onChange={handleFileUpload}
            className="hidden"
          />

          {/* Refresh Button */}
          <button
            onClick={() => loadDirectory(currentPath)}
            disabled={loading}
            className="px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
        </div>
      </div>

      {/* Upload Error */}
      {uploadError && (
        <div className="p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400 text-sm">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span>{uploadError}</span>
        </div>
      )}

      {/* Status Message */}
      {listing?.message && (
        <div className="p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg flex items-center gap-2 text-amber-400 text-sm">
          <AlertCircle className="w-4 h-4 flex-shrink-0" />
          <span>{listing.message}</span>
        </div>
      )}

      {/* Stats */}
      {listing && (
        <div className="grid grid-cols-3 gap-4">
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Total de Arquivos</p>
            <p className="text-2xl font-bold text-white">{listing.totalFiles || 0}</p>
          </div>
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Tamanho Total</p>
            <p className="text-2xl font-bold text-white">{formatBytes(listing.totalSize)}</p>
          </div>
          <div className="bg-layer-1/50 border border-subtle rounded-lg p-4">
            <p className="text-sm text-muted">Nesta Pasta</p>
            <p className="text-2xl font-bold text-white">{listing.entries.length}</p>
          </div>
        </div>
      )}

      {/* Breadcrumb */}
      <div className="flex items-center gap-2 text-sm">
        <FolderOpen className="w-4 h-4 text-muted" />
        <button
          onClick={() => setCurrentPath('')}
          className="text-orange-400 hover:text-orange-300 transition-colors"
        >
          root
        </button>
        {currentPath.split('/').filter(Boolean).map((part, index, arr) => (
          <div key={index} className="flex items-center gap-2">
            <ChevronRight className="w-4 h-4 text-disabled" />
            <button
              onClick={() => {
                const newPath = arr.slice(0, index + 1).join('/');
                setCurrentPath(newPath);
              }}
              className="text-orange-400 hover:text-orange-300 transition-colors"
            >
              {part}
            </button>
          </div>
        ))}
      </div>

      {/* File List */}
      <div className="bg-layer-1/50 border border-subtle rounded-xl overflow-hidden">
        {/* Header */}
        <div className="grid grid-cols-12 gap-4 px-6 py-3 bg-zinc-950/50 border-b border-subtle text-xs font-medium text-muted">
          <div className="col-span-6">Nome</div>
          <div className="col-span-2">Tamanho</div>
          <div className="col-span-3">Modificado</div>
          <div className="col-span-1 text-right">Ação</div>
        </div>

        {/* Entries */}
        <div className="divide-y divide-zinc-800">
          {/* Go Up Button */}
          {currentPath && (
            <button
              onClick={handleGoUp}
              className="w-full grid grid-cols-12 gap-4 px-6 py-3 hover:bg-layer-2/50 transition-colors text-left"
            >
              <div className="col-span-6 flex items-center gap-3">
                <FolderClosed className="w-5 h-5 text-muted" />
                <span className="text-muted">..</span>
              </div>
              <div className="col-span-5 text-sm text-muted">Voltar</div>
            </button>
          )}

          {listing?.entries.map((entry, index) => (
            <div
              key={index}
              className="grid grid-cols-12 gap-4 px-6 py-3 hover:bg-layer-2/50 transition-colors group"
            >
              {/* Name */}
              <button
                onClick={() => entry.type === 'directory' ? handleNavigate(entry) : null}
                className="col-span-6 flex items-center gap-3 text-left"
              >
                {getFileIcon(entry)}
                <span className="text-white font-medium truncate group-hover:text-orange-400 transition-colors">
                  {entry.name}
                </span>
              </button>

              {/* Size */}
              <div className="col-span-2 flex items-center text-sm text-muted">
                {formatBytes(entry.size)}
              </div>

              {/* Modified Date */}
              <div className="col-span-3 flex items-center text-sm text-muted">
                {formatDate(entry.modifiedAt)}
              </div>

              {/* Action */}
              <div className="col-span-1 flex items-center justify-end">
                {entry.type === 'file' && entry.url && (
                  <button
                    onClick={() => handleDownload(entry)}
                    className="p-2 hover:bg-orange-600/20 rounded-lg transition-colors"
                    title="Abrir/Baixar arquivo"
                  >
                    <ExternalLink className="w-4 h-4 text-orange-400" />
                  </button>
                )}
              </div>
            </div>
          ))}

          {listing?.entries.length === 0 && (
            <div className="px-6 py-12 text-center">
              <Cloud className="w-12 h-12 text-disabled mx-auto mb-3" />
              <p className="text-muted">Nenhum arquivo encontrado</p>
              <p className="text-disabled text-sm mt-1">
                Faça upload de arquivos para começar
              </p>
            </div>
          )}
        </div>
      </div>

      {/* Info */}
      <div className="bg-orange-500/10 border border-orange-500/30 rounded-lg p-4">
        <div className="flex items-start gap-3">
          <Cloud className="w-5 h-5 text-orange-400 flex-shrink-0 mt-0.5" />
          <div>
            <h4 className="text-sm font-semibold text-orange-300 mb-1">
              Vercel Blob Storage
            </h4>
            <p className="text-xs text-orange-200/80">
              Os arquivos são armazenados no Vercel Blob, um serviço de armazenamento
              de objetos integrado ao Vercel. Faça upload de imagens, vídeos, documentos
              e outros arquivos para usar em seus projetos.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/IntegrationsTab.tsx`

```
"use client";

import { useState } from 'react';
import { Github, Globe, Save, Trash2, CheckCircle2, XCircle, RefreshCw } from 'lucide-react';
import { saveGitHubTokens, saveVercelTokens, removeGitHubTokensAction, removeVercelTokensAction } from '@/app/actions/settings';
import { testGitHubConnection } from '@/app/actions/github';
import { testVercelConnection } from '@/app/actions/vercel';
import type { IntegrationTokens } from '@/types';

interface IntegrationsTabProps {
  initialTokens: IntegrationTokens;
  onUpdate: () => void;
}

export function IntegrationsTab({ initialTokens, onUpdate }: IntegrationsTabProps) {
  const [tokens, setTokens] = useState(initialTokens);
  const [githubForm, setGithubForm] = useState({
    token: tokens.github?.token || '',
    owner: tokens.github?.owner || '',
    repo: tokens.github?.repo || '',
  });
  const [vercelForm, setVercelForm] = useState({
    token: tokens.vercel?.token || '',
    projectId: tokens.vercel?.projectId || '',
  });
  const [testing, setTesting] = useState<'github' | 'vercel' | null>(null);
  const [testResults, setTestResults] = useState<{
    github?: { success: boolean; error?: string };
    vercel?: { success: boolean; error?: string };
  }>({});

  const handleSaveGitHub = async () => {
    try {
      const updated = await saveGitHubTokens(
        githubForm.token,
        githubForm.owner,
        githubForm.repo
      );
      setTokens(updated);
      onUpdate();
      alert('Integração GitHub salva com sucesso!');
    } catch (error) {
      console.error('Failed to save GitHub tokens:', error);
      alert('Erro ao salvar integração GitHub');
    }
  };

  const handleSaveVercel = async () => {
    try {
      const updated = await saveVercelTokens(
        vercelForm.token,
        vercelForm.projectId
      );
      setTokens(updated);
      onUpdate();
      alert('Integração Vercel salva com sucesso!');
    } catch (error) {
      console.error('Failed to save Vercel tokens:', error);
      alert('Erro ao salvar integração Vercel');
    }
  };

  const handleRemoveGitHub = async () => {
    if (!confirm('Tem certeza que deseja remover a integração GitHub?')) return;

    try {
      const updated = await removeGitHubTokensAction();
      setTokens(updated);
      setGithubForm({ token: '', owner: '', repo: '' });
      setTestResults({ ...testResults, github: undefined });
      onUpdate();
    } catch (error) {
      console.error('Failed to remove GitHub tokens:', error);
      alert('Erro ao remover integração GitHub');
    }
  };

  const handleRemoveVercel = async () => {
    if (!confirm('Tem certeza que deseja remover a integração Vercel?')) return;

    try {
      const updated = await removeVercelTokensAction();
      setTokens(updated);
      setVercelForm({ token: '', projectId: '' });
      setTestResults({ ...testResults, vercel: undefined });
      onUpdate();
    } catch (error) {
      console.error('Failed to remove Vercel tokens:', error);
      alert('Erro ao remover integração Vercel');
    }
  };

  const handleTestGitHub = async () => {
    setTesting('github');
    try {
      const result = await testGitHubConnection();
      setTestResults({ ...testResults, github: result });
    } catch {
      setTestResults({
        ...testResults,
        github: { success: false, error: 'Erro ao testar conexão' },
      });
    } finally {
      setTesting(null);
    }
  };

  const handleTestVercel = async () => {
    setTesting('vercel');
    try {
      const result = await testVercelConnection();
      setTestResults({ ...testResults, vercel: result });
    } catch {
      setTestResults({
        ...testResults,
        vercel: { success: false, error: 'Erro ao testar conexão' },
      });
    } finally {
      setTesting(null);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center gap-3 pb-4 border-b border-subtle">
        <div className="p-2 bg-blue-500/10 rounded-lg">
          <Globe className="w-5 h-5 text-blue-500" />
        </div>
        <div>
          <h2 className="text-xl font-bold text-white">Integrações & Tokens</h2>
          <p className="text-sm text-muted">Configure APIs para logs e automação</p>
        </div>
      </div>

      <div className="space-y-6">
        {/* GitHub Integration */}
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-2 bg-layer-2 rounded-lg">
              <Github className="w-5 h-5 text-white" />
            </div>
            <div className="flex-1">
              <h3 className="font-semibold text-white">GitHub</h3>
              <p className="text-xs text-muted">Para logs de commits e changelog automático</p>
            </div>
            {tokens.github && (
              <span className="px-2 py-1 bg-green-500/10 text-green-400 text-xs rounded-full flex items-center gap-1">
                <CheckCircle2 className="w-3 h-3" />
                Configurado
              </span>
            )}
          </div>

          <div className="space-y-3">
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Token</label>
              <input
                type="password"
                value={githubForm.token}
                onChange={(e) => setGithubForm({ ...githubForm, token: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="ghp_..."
              />
            </div>
            <div className="grid grid-cols-2 gap-3">
              <div>
                <label className="block text-sm font-medium text-secondary mb-1">Owner</label>
                <input
                  type="text"
                  value={githubForm.owner}
                  onChange={(e) => setGithubForm({ ...githubForm, owner: e.target.value })}
                  className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                  placeholder="username"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-secondary mb-1">Repositório</label>
                <input
                  type="text"
                  value={githubForm.repo}
                  onChange={(e) => setGithubForm({ ...githubForm, repo: e.target.value })}
                  className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                  placeholder="repository-name"
                />
              </div>
            </div>

            {testResults.github && (
              <div className={`p-3 rounded-lg flex items-center gap-2 text-sm ${testResults.github.success ? 'bg-green-500/10 text-green-400' : 'bg-red-500/10 text-red-400'}`}>
                {testResults.github.success ? (
                  <><CheckCircle2 className="w-4 h-4" /> Conexão bem-sucedida!</>
                ) : (
                  <><XCircle className="w-4 h-4" /> {testResults.github.error}</>
                )}
              </div>
            )}

            <div className="flex gap-2">
              <button
                onClick={handleTestGitHub}
                disabled={testing === 'github' || !tokens.github}
                className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
              >
                {testing === 'github' ? (
                  <><RefreshCw className="w-4 h-4 animate-spin" /> Testando...</>
                ) : (
                  <>Testar Conexão</>
                )}
              </button>
              <button
                onClick={handleSaveGitHub}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm flex items-center gap-2 transition-all"
              >
                <Save className="w-4 h-4" />
                Salvar
              </button>
              {tokens.github && (
                <button
                  onClick={handleRemoveGitHub}
                  className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
                >
                  <Trash2 className="w-4 h-4" />
                  Remover
                </button>
              )}
            </div>
          </div>
        </div>

        {/* Vercel Integration */}
        <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
          <div className="flex items-center gap-3 mb-4">
            <div className="p-2 bg-layer-2 rounded-lg">
              <svg className="w-5 h-5 text-white" viewBox="0 0 76 76" fill="currentColor">
                <path d="M38 0L76 66H0L38 0z" />
              </svg>
            </div>
            <div className="flex-1">
              <h3 className="font-semibold text-white">Vercel</h3>
              <p className="text-xs text-muted">Para logs de deployments</p>
            </div>
            {tokens.vercel && (
              <span className="px-2 py-1 bg-green-500/10 text-green-400 text-xs rounded-full flex items-center gap-1">
                <CheckCircle2 className="w-3 h-3" />
                Configurado
              </span>
            )}
          </div>

          <div className="space-y-3">
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Token</label>
              <input
                type="password"
                value={vercelForm.token}
                onChange={(e) => setVercelForm({ ...vercelForm, token: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="v1_..."
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-secondary mb-1">Project ID</label>
              <input
                type="text"
                value={vercelForm.projectId}
                onChange={(e) => setVercelForm({ ...vercelForm, projectId: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2 px-3 text-white text-sm"
                placeholder="prj_..."
              />
            </div>

            {testResults.vercel && (
              <div className={`p-3 rounded-lg flex items-center gap-2 text-sm ${testResults.vercel.success ? 'bg-green-500/10 text-green-400' : 'bg-red-500/10 text-red-400'}`}>
                {testResults.vercel.success ? (
                  <><CheckCircle2 className="w-4 h-4" /> Conexão bem-sucedida!</>
                ) : (
                  <><XCircle className="w-4 h-4" /> {testResults.vercel.error}</>
                )}
              </div>
            )}

            <div className="flex gap-2">
              <button
                onClick={handleTestVercel}
                disabled={testing === 'vercel' || !tokens.vercel}
                className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
              >
                {testing === 'vercel' ? (
                  <><RefreshCw className="w-4 h-4 animate-spin" /> Testando...</>
                ) : (
                  <>Testar Conexão</>
                )}
              </button>
              <button
                onClick={handleSaveVercel}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm flex items-center gap-2 transition-all"
              >
                <Save className="w-4 h-4" />
                Salvar
              </button>
              {tokens.vercel && (
                <button
                  onClick={handleRemoveVercel}
                  className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
                >
                  <Trash2 className="w-4 h-4" />
                  Remover
                </button>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/LogsTab.tsx`

```
"use client";

import { useState, useEffect, useCallback } from 'react';
import { Terminal, GitCommit, Globe, Search, Trash2, RefreshCw, AlertCircle, CheckCircle2, Info, AlertTriangle } from 'lucide-react';
import { getLogs, clearLogs, searchSystemLogs } from '@/app/actions/settings';
import { fetchGitHubCommits } from '@/app/actions/github';
import { fetchVercelDeployments } from '@/app/actions/vercel';
import type { SystemLog, GitHubCommit, VercelDeployment, LogLevel } from '@/types';

type LogsTabView = 'system' | 'git' | 'vercel';

export function LogsTab() {
  const [activeView, setActiveView] = useState<LogsTabView>('system');
  const [systemLogs, setSystemLogs] = useState<SystemLog[]>([]);
  const [gitCommits, setGitCommits] = useState<GitHubCommit[]>([]);
  const [vercelDeployments, setVercelDeployments] = useState<VercelDeployment[]>([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const loadData = useCallback(async () => {
    setLoading(true);
    setError(null);

    try {
      if (activeView === 'system') {
        const logs = await getLogs(100);
        setSystemLogs(logs);
      } else if (activeView === 'git') {
        const { commits, error } = await fetchGitHubCommits(50);
        if (error) {
          setError(error);
        } else {
          setGitCommits(commits);
        }
      } else if (activeView === 'vercel') {
        const { deployments, error } = await fetchVercelDeployments(50);
        if (error) {
          setError(error);
        } else {
          setVercelDeployments(deployments);
        }
      }
    } catch (err) {
      console.error('Failed to load logs:', err);
      setError(err instanceof Error ? err.message : 'Erro ao carregar dados');
    } finally {
      setLoading(false);
    }
  }, [activeView]);

  useEffect(() => {
    loadData();
  }, [loadData]);

  const handleSearch = async () => {
    if (!searchQuery.trim() || activeView !== 'system') return;

    setLoading(true);
    try {
      const results = await searchSystemLogs(searchQuery);
      setSystemLogs(results);
    } catch (err) {
      console.error('Search failed:', err);
    } finally {
      setLoading(false);
    }
  };

  const handleClearLogs = async () => {
    if (!confirm('Tem certeza que deseja limpar todos os logs do sistema?')) return;

    try {
      await clearLogs();
      setSystemLogs([]);
      alert('Logs limpos com sucesso!');
    } catch (err) {
      console.error('Failed to clear logs:', err);
      alert('Erro ao limpar logs');
    }
  };

  const handleClearSearch = () => {
    setSearchQuery('');
    loadData();
  };

  const getLogLevelStyles = (level: LogLevel) => {
    switch (level) {
      case 'error':
        return {
          bg: 'bg-red-500/10',
          text: 'text-red-400',
          border: 'border-red-500/20',
          icon: AlertCircle,
        };
      case 'warning':
        return {
          bg: 'bg-amber-500/10',
          text: 'text-amber-400',
          border: 'border-amber-500/20',
          icon: AlertTriangle,
        };
      case 'success':
        return {
          bg: 'bg-green-500/10',
          text: 'text-green-400',
          border: 'border-green-500/20',
          icon: CheckCircle2,
        };
      default:
        return {
          bg: 'bg-blue-500/10',
          text: 'text-blue-400',
          border: 'border-blue-500/20',
          icon: Info,
        };
    }
  };

  const getDeploymentStateStyles = (state: string) => {
    switch (state) {
      case 'READY':
        return {
          bg: 'bg-green-500/10',
          text: 'text-green-400',
          label: 'Pronto',
        };
      case 'ERROR':
        return {
          bg: 'bg-red-500/10',
          text: 'text-red-400',
          label: 'Erro',
        };
      case 'BUILDING':
        return {
          bg: 'bg-blue-500/10',
          text: 'text-blue-400',
          label: 'Construindo',
        };
      case 'QUEUED':
        return {
          bg: 'bg-amber-500/10',
          text: 'text-amber-400',
          label: 'Na Fila',
        };
      default:
        return {
          bg: 'bg-zinc-500/10',
          text: 'text-muted',
          label: state,
        };
    }
  };

  const formatTimestamp = (timestamp: string | number) => {
    const date = typeof timestamp === 'number' ? new Date(timestamp) : new Date(timestamp);
    return new Intl.DateTimeFormat('pt-BR', {
      day: '2-digit',
      month: 'short',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
    }).format(date);
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-emerald-500/10 rounded-lg">
            <Terminal className="w-5 h-5 text-emerald-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Logs & Atividades</h2>
            <p className="text-sm text-muted">Monitore o sistema, commits e deployments</p>
          </div>
        </div>
        <div className="flex items-center gap-2">
          <button
            onClick={loadData}
            disabled={loading}
            className="px-4 py-2 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg text-sm flex items-center gap-2 transition-all disabled:opacity-50"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
          {activeView === 'system' && systemLogs.length > 0 && (
            <button
              onClick={handleClearLogs}
              className="px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-all"
            >
              <Trash2 className="w-4 h-4" />
              Limpar Logs
            </button>
          )}
        </div>
      </div>

      {/* Tabs */}
      <div className="flex gap-2 border-b border-subtle">
        <button
          onClick={() => setActiveView('system')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'system'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <Terminal className="w-4 h-4" />
            Logs do Sistema
          </div>
          {activeView === 'system' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
        <button
          onClick={() => setActiveView('git')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'git'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <GitCommit className="w-4 h-4" />
            Commits GitHub
          </div>
          {activeView === 'git' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
        <button
          onClick={() => setActiveView('vercel')}
          className={`px-4 py-2.5 text-sm font-medium transition-all relative ${
            activeView === 'vercel'
              ? 'text-emerald-400'
              : 'text-muted hover:text-white'
          }`}
        >
          <div className="flex items-center gap-2">
            <Globe className="w-4 h-4" />
            Deployments Vercel
          </div>
          {activeView === 'vercel' && (
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500" />
          )}
        </button>
      </div>

      {/* Search Bar (System Logs only) */}
      {activeView === 'system' && (
        <div className="flex gap-2">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted" />
            <input
              type="text"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              onKeyDown={(e) => e.key === 'Enter' && handleSearch()}
              placeholder="Pesquisar nos logs..."
              className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 pl-10 pr-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-emerald-500"
            />
          </div>
          <button
            onClick={handleSearch}
            disabled={!searchQuery.trim() || loading}
            className="px-4 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Buscar
          </button>
          {searchQuery && (
            <button
              onClick={handleClearSearch}
              className="px-4 py-2.5 bg-layer-2 hover:bg-zinc-700 text-white rounded-lg transition-all"
            >
              Limpar
            </button>
          )}
        </div>
      )}

      {/* Error Message */}
      {error && (
        <div className="bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-start gap-3">
          <AlertCircle className="w-5 h-5 text-red-400 flex-shrink-0 mt-0.5" />
          <div>
            <h4 className="text-sm font-semibold text-red-400 mb-1">Erro ao carregar dados</h4>
            <p className="text-sm text-red-300">{error}</p>
          </div>
        </div>
      )}

      {/* Loading State */}
      {loading && (
        <div className="flex items-center justify-center py-12">
          <div className="flex items-center gap-3 text-muted">
            <RefreshCw className="w-5 h-5 animate-spin" />
            <span>Carregando...</span>
          </div>
        </div>
      )}

      {/* Content */}
      {!loading && (
        <>
          {/* System Logs View */}
          {activeView === 'system' && (
            <div className="space-y-2">
              {systemLogs.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <Terminal className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum log encontrado</p>
                </div>
              ) : (
                systemLogs.map((log) => {
                  const styles = getLogLevelStyles(log.level);
                  const Icon = styles.icon;

                  return (
                    <div
                      key={log.id}
                      className={`bg-layer-1/50 border ${styles.border} rounded-lg p-4 hover:bg-layer-1 transition-all`}
                    >
                      <div className="flex items-start gap-3">
                        <div className={`p-2 ${styles.bg} rounded-lg flex-shrink-0`}>
                          <Icon className={`w-4 h-4 ${styles.text}`} />
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 mb-1">
                            <span className={`px-2 py-0.5 ${styles.bg} ${styles.text} text-xs font-medium rounded uppercase`}>
                              {log.level}
                            </span>
                            <span className="px-2 py-0.5 bg-layer-2 text-muted text-xs rounded">
                              {log.source}
                            </span>
                            <span className="text-xs text-muted">
                              {formatTimestamp(log.timestamp)}
                            </span>
                          </div>
                          <p className="text-sm text-white">{log.message}</p>
                          {log.details && Object.keys(log.details).length > 0 && (
                            <div className="mt-2 p-2 bg-black/30 rounded border border-subtle">
                              <pre className="text-xs text-muted font-mono overflow-x-auto">
                                {JSON.stringify(log.details, null, 2)}
                              </pre>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })
              )}
            </div>
          )}

          {/* Git Commits View */}
          {activeView === 'git' && (
            <div className="space-y-2">
              {gitCommits.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <GitCommit className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum commit encontrado</p>
                  <p className="text-xs text-muted mt-1">Configure a integração GitHub nas configurações</p>
                </div>
              ) : (
                gitCommits.map((commit) => (
                  <div
                    key={commit.sha}
                    className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:bg-layer-1 transition-all"
                  >
                    <div className="flex items-start gap-3">
                      <div className="p-2 bg-layer-2 rounded-lg flex-shrink-0">
                        <GitCommit className="w-4 h-4 text-muted" />
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 mb-1">
                          <code className="px-2 py-0.5 bg-layer-2 text-secondary text-xs font-mono rounded">
                            {commit.sha}
                          </code>
                          <span className="text-xs text-muted">
                            {formatTimestamp(commit.date)}
                          </span>
                        </div>
                        <p className="text-sm text-white mb-1">{commit.message}</p>
                        <div className="flex items-center gap-2 text-xs text-muted">
                          <span>{commit.author}</span>
                          {commit.url && (
                            <>
                              <span>•</span>
                              <a
                                href={commit.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="text-emerald-400 hover:text-emerald-300 hover:underline"
                              >
                                Ver no GitHub
                              </a>
                            </>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                ))
              )}
            </div>
          )}

          {/* Vercel Deployments View */}
          {activeView === 'vercel' && (
            <div className="space-y-2">
              {vercelDeployments.length === 0 ? (
                <div className="bg-layer-1/50 border border-subtle rounded-xl p-8 text-center">
                  <Globe className="w-12 h-12 text-disabled mx-auto mb-3" />
                  <p className="text-muted">Nenhum deployment encontrado</p>
                  <p className="text-xs text-muted mt-1">Configure a integração Vercel nas configurações</p>
                </div>
              ) : (
                vercelDeployments.map((deployment) => {
                  const styles = getDeploymentStateStyles(deployment.state);

                  return (
                    <div
                      key={deployment.uid}
                      className="bg-layer-1/50 border border-subtle rounded-lg p-4 hover:bg-layer-1 transition-all"
                    >
                      <div className="flex items-start gap-3">
                        <div className={`p-2 ${styles.bg} rounded-lg flex-shrink-0`}>
                          <Globe className={`w-4 h-4 ${styles.text}`} />
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-2 mb-1">
                            <span className={`px-2 py-0.5 ${styles.bg} ${styles.text} text-xs font-medium rounded`}>
                              {styles.label}
                            </span>
                            <span className="text-xs text-muted">
                              {formatTimestamp(deployment.createdAt)}
                            </span>
                          </div>
                          <p className="text-sm text-white mb-1">{deployment.name}</p>
                          {deployment.url && (
                            <a
                              href={`https://${deployment.url}`}
                              target="_blank"
                              rel="noopener noreferrer"
                              className="text-xs text-emerald-400 hover:text-emerald-300 hover:underline"
                            >
                              {deployment.url}
                            </a>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })
              )}
            </div>
          )}
        </>
      )}
    </div>
  );
}

```

---
#### `components/settings/ProfileTab.tsx`

```
"use client";

import { useState, useRef } from 'react';
import { User, Save, RefreshCw, Upload, Camera, X } from 'lucide-react';
import { updateProfile } from '@/app/actions/settings';
import type { UserProfile } from '@/types';

interface ProfileTabProps {
  initialProfile: UserProfile;
}

export function ProfileTab({ initialProfile }: ProfileTabProps) {
  const [profile, setProfile] = useState(initialProfile);
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [uploadError, setUploadError] = useState<string | null>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);

  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      setUploadError('Tipo de arquivo inválido. Use JPEG, PNG, GIF ou WebP.');
      return;
    }

    // Validate file size (max 5MB)
    const maxSize = 5 * 1024 * 1024;
    if (file.size > maxSize) {
      setUploadError('Arquivo muito grande. Máximo 5MB.');
      return;
    }

    setUploading(true);
    setUploadError(null);

    try {
      const formData = new FormData();
      formData.append('file', file);
      formData.append('type', 'avatar');

      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error || 'Upload failed');
      }

      const result = await response.json();
      setProfile({ ...profile, avatarUrl: result.url });
    } catch (error) {
      console.error('Upload error:', error);
      setUploadError(error instanceof Error ? error.message : 'Erro ao fazer upload');
    } finally {
      setUploading(false);
      // Reset file input
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    }
  };

  const handleSave = async () => {
    setSaving(true);
    setSuccess(false);

    try {
      const updated = await updateProfile({
        name: profile.name,
        role: profile.role,
        avatarUrl: profile.avatarUrl,
        bio: profile.bio,
      });

      setProfile(updated);
      setSuccess(true);

      setTimeout(() => setSuccess(false), 3000);
    } catch (error) {
      console.error('Failed to update profile:', error);
      alert('Erro ao atualizar perfil');
    } finally {
      setSaving(false);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center gap-3 pb-4 border-b border-subtle">
        <div className="p-2 bg-indigo-500/10 rounded-lg">
          <User className="w-5 h-5 text-indigo-500" />
        </div>
        <div>
          <h2 className="text-xl font-bold text-white">Perfil do Usuário</h2>
          <p className="text-sm text-muted">Gerencie suas informações pessoais</p>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Avatar Preview with Upload */}
        <div className="lg:col-span-1">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 text-center">
            <div className="relative w-32 h-32 mx-auto mb-4">
              <div className="w-full h-full rounded-full overflow-hidden border-4 border-subtle">
                <img
                  src={profile.avatarUrl}
                  alt={profile.name}
                  className="w-full h-full object-cover"
                />
              </div>

              {/* Upload Overlay */}
              <button
                onClick={() => fileInputRef.current?.click()}
                disabled={uploading}
                className="absolute inset-0 flex items-center justify-center bg-black/60 rounded-full opacity-0 hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-not-allowed"
              >
                {uploading ? (
                  <RefreshCw className="w-8 h-8 text-white animate-spin" />
                ) : (
                  <Camera className="w-8 h-8 text-white" />
                )}
              </button>

              {/* Hidden file input */}
              <input
                ref={fileInputRef}
                type="file"
                accept="image/jpeg,image/png,image/gif,image/webp"
                onChange={handleFileSelect}
                className="hidden"
              />
            </div>

            <h3 className="text-lg font-semibold text-white">{profile.name}</h3>
            <p className="text-sm text-muted">{profile.role}</p>
            <p className="text-xs text-muted mt-2">ID: {profile.id}</p>

            {/* Upload Button */}
            <button
              onClick={() => fileInputRef.current?.click()}
              disabled={uploading}
              className="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm rounded-lg flex items-center gap-2 mx-auto transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {uploading ? (
                <>
                  <RefreshCw className="w-4 h-4 animate-spin" />
                  Enviando...
                </>
              ) : (
                <>
                  <Upload className="w-4 h-4" />
                  Alterar Foto
                </>
              )}
            </button>

            {/* Upload Error */}
            {uploadError && (
              <div className="mt-3 p-2 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400 text-xs">
                <X className="w-4 h-4 flex-shrink-0" />
                <span>{uploadError}</span>
              </div>
            )}

            <p className="text-xs text-muted mt-3">
              Clique na foto ou no botão para alterar.
              <br />
              Formatos: JPEG, PNG, GIF, WebP (máx. 5MB)
            </p>
          </div>
        </div>

        {/* Profile Form */}
        <div className="lg:col-span-2 space-y-4">
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6 space-y-4">
            {/* Name */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Nome
              </label>
              <input
                type="text"
                value={profile.name}
                onChange={(e) => setProfile({ ...profile, name: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="Seu nome"
              />
            </div>

            {/* Role */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Cargo
              </label>
              <input
                type="text"
                value={profile.role}
                onChange={(e) => setProfile({ ...profile, role: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="Seu cargo"
              />
            </div>

            {/* Avatar URL - Manual input as fallback */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                URL do Avatar (alternativo)
              </label>
              <input
                type="url"
                value={profile.avatarUrl}
                onChange={(e) => setProfile({ ...profile, avatarUrl: e.target.value })}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                placeholder="https://..."
              />
              <p className="text-xs text-muted mt-1">
                Ou use{' '}
                <a
                  href="https://api.dicebear.com/7.x/avataaars/svg?seed=YourName"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-indigo-400 hover:text-indigo-300"
                >
                  DiceBear
                </a>{' '}
                para gerar avatares
              </p>
            </div>

            {/* Bio */}
            <div>
              <label className="block text-sm font-medium text-secondary mb-2">
                Bio
              </label>
              <textarea
                value={profile.bio}
                onChange={(e) => setProfile({ ...profile, bio: e.target.value })}
                rows={3}
                className="w-full bg-black/50 border border-subtle rounded-lg py-2.5 px-4 text-white placeholder:text-disabled focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all resize-none"
                placeholder="Escreva uma breve descrição sobre você..."
              />
            </div>

            {/* Save Button */}
            <div className="flex items-center justify-between pt-4 border-t border-subtle">
              <div className="text-xs text-muted">
                Última atualização:{' '}
                {new Date(profile.updatedAt).toLocaleString('pt-BR')}
              </div>
              <button
                onClick={handleSave}
                disabled={saving}
                className="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-semibold flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {saving ? (
                  <>
                    <RefreshCw className="w-4 h-4 animate-spin" />
                    Salvando...
                  </>
                ) : success ? (
                  <>
                    <Save className="w-4 h-4" />
                    Salvo!
                  </>
                ) : (
                  <>
                    <Save className="w-4 h-4" />
                    Salvar Alterações
                  </>
                )}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---
#### `components/settings/SystemMonitorTab.tsx`

```
"use client";

import { useState, useEffect } from 'react';
import { Activity, RefreshCw, Cpu, Clock, Server, CheckCircle, XCircle, AlertCircle, Zap } from 'lucide-react';
import type { SystemMonitorData } from '@/types';

export function SystemMonitorTab() {
  const [data, setData] = useState<SystemMonitorData | null>(null);
  const [loading, setLoading] = useState(true);
  const [lastUpdate, setLastUpdate] = useState<Date | null>(null);
  const [autoRefresh, setAutoRefresh] = useState(true);

  useEffect(() => {
    loadHealthData();

    // Auto-refresh every 30 seconds
    if (autoRefresh) {
      const interval = setInterval(() => {
        loadHealthData();
      }, 30000);

      return () => clearInterval(interval);
    }
  }, [autoRefresh]);

  const loadHealthData = async () => {
    setLoading(true);
    try {
      const response = await fetch('/api/system/health');
      if (response.ok) {
        const healthData = await response.json();
        setData(healthData);
        setLastUpdate(new Date());
      } else {
        console.error('Failed to fetch health data');
      }
    } catch (error) {
      console.error('Error fetching health data:', error);
    } finally {
      setLoading(false);
    }
  };

  const formatBytes = (bytes: number): string => {
    const mb = bytes / 1024 / 1024;
    return `${mb.toFixed(2)} MB`;
  };

  const formatUptime = (seconds: number): string => {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    return `${hours}h ${minutes}m ${secs}s`;
  };

  const getStatusIcon = (status: string) => {
    switch (status) {
      case 'online':
        return <CheckCircle className="w-5 h-5 text-green-500" />;
      case 'offline':
        return <XCircle className="w-5 h-5 text-red-500" />;
      default:
        return <AlertCircle className="w-5 h-5 text-yellow-500" />;
    }
  };

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'online':
        return 'bg-green-500/10 border-green-500/30 text-green-400';
      case 'offline':
        return 'bg-red-500/10 border-red-500/30 text-red-400';
      default:
        return 'bg-yellow-500/10 border-yellow-500/30 text-yellow-400';
    }
  };

  if (loading && !data) {
    return (
      <div className="flex items-center justify-center py-12">
        <RefreshCw className="w-8 h-8 text-disabled animate-spin" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between pb-4 border-b border-subtle">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-cyan-500/10 rounded-lg">
            <Activity className="w-5 h-5 text-cyan-500" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-white">Monitor do Sistema</h2>
            <p className="text-sm text-muted">
              Acompanhe a saúde da aplicação e status das APIs
            </p>
          </div>
        </div>

        <div className="flex items-center gap-3">
          <label className="flex items-center gap-2 text-sm text-muted">
            <input
              type="checkbox"
              checked={autoRefresh}
              onChange={(e) => setAutoRefresh(e.target.checked)}
              className="w-4 h-4 rounded border-subtle bg-layer-1 text-cyan-500 focus:ring-2 focus:ring-cyan-500"
            />
            Auto-refresh (30s)
          </label>

          <button
            onClick={loadHealthData}
            disabled={loading}
            className="px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Atualizar
          </button>
        </div>
      </div>

      {lastUpdate && (
        <div className="text-xs text-muted">
          Última atualização: {lastUpdate.toLocaleString('pt-BR')}
        </div>
      )}

      {data && (
        <>
          {/* System Metrics */}
          <div>
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <Server className="w-4 h-4 text-muted" />
              Métricas do Sistema
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
              {/* Memory Usage */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Cpu className="w-4 h-4 text-blue-400" />
                  <span className="text-xs font-medium text-muted">Memória RSS</span>
                </div>
                <p className="text-2xl font-bold text-white">
                  {formatBytes(data.system.memory.rss)}
                </p>
                <p className="text-xs text-muted mt-1">
                  Heap: {formatBytes(data.system.memory.heapUsed)} /{' '}
                  {formatBytes(data.system.memory.heapTotal)}
                </p>
              </div>

              {/* Uptime */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Clock className="w-4 h-4 text-green-400" />
                  <span className="text-xs font-medium text-muted">Uptime</span>
                </div>
                <p className="text-2xl font-bold text-white">
                  {formatUptime(data.system.uptime)}
                </p>
                <p className="text-xs text-muted mt-1">Tempo ativo do processo</p>
              </div>

              {/* Node Version */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Zap className="w-4 h-4 text-yellow-400" />
                  <span className="text-xs font-medium text-muted">Node.js</span>
                </div>
                <p className="text-2xl font-bold text-white">{data.system.nodeVersion}</p>
                <p className="text-xs text-muted mt-1">Versão do runtime</p>
              </div>

              {/* Platform */}
              <div className="bg-layer-1/50 border border-subtle rounded-xl p-4">
                <div className="flex items-center gap-2 mb-2">
                  <Server className="w-4 h-4 text-purple-400" />
                  <span className="text-xs font-medium text-muted">Plataforma</span>
                </div>
                <p className="text-2xl font-bold text-white capitalize">
                  {data.system.platform}
                </p>
                <p className="text-xs text-muted mt-1">Sistema operacional</p>
              </div>
            </div>
          </div>

          {/* API Status */}
          <div>
            <h3 className="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
              <Activity className="w-4 h-4 text-muted" />
              Status das APIs
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
              {data.apis.map((api, index) => (
                <div
                  key={index}
                  className={`border rounded-xl p-4 ${getStatusColor(api.status)}`}
                >
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-3">
                      {getStatusIcon(api.status)}
                      <div>
                        <p className="font-semibold">{api.name}</p>
                        {api.responseTime && (
                          <p className="text-xs opacity-80 mt-0.5">
                            {api.responseTime}ms
                          </p>
                        )}
                      </div>
                    </div>

                    <span className="text-xs font-bold uppercase px-2 py-1 rounded bg-black/20">
                      {api.status}
                    </span>
                  </div>

                  {api.error && (
                    <p className="text-xs mt-2 opacity-70">{api.error}</p>
                  )}
                </div>
              ))}
            </div>
          </div>

          {/* System Info */}
          <div className="bg-layer-1/50 border border-subtle rounded-xl p-6">
            <h3 className="text-sm font-semibold text-secondary mb-3">
              Informações Técnicas
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
              <div>
                <span className="text-muted">Memória Externa:</span>
                <span className="text-white ml-2 font-mono">
                  {formatBytes(data.system.memory.external)}
                </span>
              </div>
              <div>
                <span className="text-muted">Timestamp:</span>
                <span className="text-white ml-2 font-mono">
                  {new Date(data.system.timestamp).toLocaleString('pt-BR')}
                </span>
              </div>
            </div>
          </div>
        </>
      )}
    </div>
  );
}

```

---
#### `components/studio/AIMediaGenerator.tsx`

```
"use client";

import { useState } from "react";
import { Sparkles, DollarSign, Image, Video, Loader2, AlertCircle } from "lucide-react";
import { motion } from "framer-motion";
import { cn } from "@/lib/utils";
import Button from "@/components/ui/Button";
import Modal from "@/components/ui/Modal";

interface AIMediaGeneratorProps {
  sceneText: string;
  onGenerate: (prompt: string, type: "image" | "video") => Promise<string>;
  className?: string;
}

export default function AIMediaGenerator({
  sceneText,
  onGenerate,
  className,
}: AIMediaGeneratorProps) {
  const [isOpen, setIsOpen] = useState(false);
  const [prompt, setPrompt] = useState("");
  const [mediaType, setMediaType] = useState<"image" | "video">("image");
  const [isGenerating, setIsGenerating] = useState(false);
  const [generatedUrl, setGeneratedUrl] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  const costs = {
    image: { flux: 0.04, dalle: 0.02, stability: 0.03 },
    video: { runway: 0.50, pika: 0.40 },
  };

  const estimatedCost = mediaType === "image" ? costs.image.flux : costs.video.runway;

  const handleGenerate = async () => {
    if (!prompt.trim()) {
      setError("Por favor, descreva a mídia que deseja gerar");
      return;
    }

    setIsGenerating(true);
    setError(null);
    setGeneratedUrl(null);

    try {
      const url = await onGenerate(prompt, mediaType);
      setGeneratedUrl(url);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Erro ao gerar mídia");
    } finally {
      setIsGenerating(false);
    }
  };

  const handleUseMedia = () => {
    // Implementar uso da mídia gerada
    setIsOpen(false);
    setPrompt("");
    setGeneratedUrl(null);
  };

  const handleClose = () => {
    if (!isGenerating) {
      setIsOpen(false);
      setPrompt("");
      setGeneratedUrl(null);
      setError(null);
    }
  };

  return (
    <>
      <button
        onClick={() => setIsOpen(true)}
        className={cn(
          "w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg",
          "bg-gradient-to-r from-purple-600 to-pink-600",
          "hover:from-purple-500 hover:to-pink-500",
          "text-white font-medium transition-all",
          "shadow-lg shadow-purple-500/20",
          className
        )}
      >
        <Sparkles className="w-4 h-4" />
        Gerar com IA
      </button>

      <Modal isOpen={isOpen} onClose={handleClose} title="Gerar Mídia com IA">
        <div className="space-y-6">
          {/* Tipo de Mídia */}
          <div>
            <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-3 block">
              Tipo de Mídia
            </label>
            <div className="grid grid-cols-2 gap-3">
              <button
                onClick={() => setMediaType("image")}
                className={cn(
                  "p-4 rounded-lg border-2 transition-all",
                  mediaType === "image"
                    ? "border-cyan-500 bg-cyan-500/10"
                    : "border-gray-700 hover:border-gray-600"
                )}
              >
                <Image className={cn("w-6 h-6 mx-auto mb-2", mediaType === "image" ? "text-cyan-400" : "text-gray-500")} />
                <p className={cn("text-sm font-medium", mediaType === "image" ? "text-cyan-400" : "text-gray-400")}>
                  Imagem
                </p>
                <p className="text-xs text-gray-600 mt-1">
                  ~${costs.image.flux.toFixed(2)}
                </p>
              </button>

              <button
                onClick={() => setMediaType("video")}
                className={cn(
                  "p-4 rounded-lg border-2 transition-all",
                  mediaType === "video"
                    ? "border-cyan-500 bg-cyan-500/10"
                    : "border-gray-700 hover:border-gray-600"
                )}
              >
                <Video className={cn("w-6 h-6 mx-auto mb-2", mediaType === "video" ? "text-cyan-400" : "text-gray-500")} />
                <p className={cn("text-sm font-medium", mediaType === "video" ? "text-cyan-400" : "text-gray-400")}>
                  Vídeo
                </p>
                <p className="text-xs text-gray-600 mt-1">
                  ~${costs.video.runway.toFixed(2)}
                </p>
              </button>
            </div>
          </div>

          {/* Contexto da Cena */}
          <div className="bg-gray-900 border border-gray-800 rounded-lg p-4">
            <p className="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2">
              Texto da Cena
            </p>
            <p className="text-sm text-gray-300">{sceneText}</p>
          </div>

          {/* Prompt */}
          <div>
            <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-2 block">
              Descreva a {mediaType === "image" ? "imagem" : "vídeo"}
            </label>
            <textarea
              value={prompt}
              onChange={(e) => setPrompt(e.target.value)}
              rows={4}
              placeholder={
                mediaType === "image"
                  ? "Ex: Paisagem montanhosa ao nascer do sol, cores vibrantes, estilo fotorrealista..."
                  : "Ex: Câmera se movendo suavemente sobre uma floresta verde, vista aérea, iluminação natural..."
              }
              className="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none"
              disabled={isGenerating}
            />
            <div className="flex items-center justify-between mt-2">
              <p className="text-xs text-gray-600">
                {prompt.length} caracteres
              </p>
              <div className="flex items-center gap-1 text-xs text-amber-400">
                <DollarSign className="w-3 h-3" />
                <span>Custo estimado: ${estimatedCost.toFixed(2)}</span>
              </div>
            </div>
          </div>

          {/* Preview */}
          <AnimatePresence>
            {generatedUrl && (
              <motion.div
                initial={{ opacity: 0, scale: 0.95 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, scale: 0.95 }}
                className="space-y-3"
              >
                <label className="text-sm font-semibold text-gray-400 uppercase tracking-wide block">
                  Preview
                </label>
                <div className="relative aspect-video rounded-lg overflow-hidden bg-gray-900 border border-gray-700">
                  {mediaType === "image" ? (
                    <img
                      src={generatedUrl}
                      alt="Generated"
                      className="w-full h-full object-cover"
                    />
                  ) : (
                    <video
                      src={generatedUrl}
                      controls
                      className="w-full h-full object-cover"
                    />
                  )}
                </div>
              </motion.div>
            )}
          </AnimatePresence>

          {/* Erro */}
          {error && (
            <div className="bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-center gap-2">
              <AlertCircle className="w-4 h-4 text-red-500 flex-shrink-0" />
              <p className="text-sm text-red-400">{error}</p>
            </div>
          )}

          {/* Ações */}
          <div className="flex gap-3">
            {generatedUrl ? (
              <>
                <Button
                  onClick={handleGenerate}
                  variant="secondary"
                  className="flex-1"
                  disabled={isGenerating}
                >
                  Gerar Novamente
                </Button>
                <Button onClick={handleUseMedia} variant="primary" className="flex-1">
                  Usar Esta Mídia
                </Button>
              </>
            ) : (
              <>
                <Button
                  onClick={handleClose}
                  variant="secondary"
                  className="flex-1"
                  disabled={isGenerating}
                >
                  Cancelar
                </Button>
                <Button
                  onClick={handleGenerate}
                  variant="primary"
                  className="flex-1"
                  disabled={isGenerating || !prompt.trim()}
                >
                  {isGenerating ? (
                    <>
                      <Loader2 className="w-4 h-4 animate-spin" />
                      Gerando...
                    </>
                  ) : (
                    <>
                      <Sparkles className="w-4 h-4" />
                      Gerar
                    </>
                  )}
                </Button>
              </>
            )}
          </div>

          {/* Aviso de Custo */}
          <div className="bg-amber-500/10 border border-amber-500/30 rounded-lg p-3">
            <p className="text-xs text-amber-400">
              ⚠️ A geração de mídia com IA consome créditos. O valor será debitado
              após a geração bem-sucedida.
            </p>
          </div>
        </div>
      </Modal>
    </>
  );
}

```

---
#### `components/studio/MediaSearchModal.tsx`

```
"use client";

import { useState, useEffect } from "react";
import { Search, Filter, Grid3x3, PlayCircle, Download, Loader2, X } from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";
import { cn } from "@/lib/utils";
import Modal from "@/components/ui/Modal";
import { MediaItem } from "@/types";

interface MediaSearchModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSelect: (media: MediaItem) => void;
  initialQuery?: string;
  type?: "image" | "video" | "all";
}

export default function MediaSearchModal({
  isOpen,
  onClose,
  onSelect,
  initialQuery = "",
  type = "all",
}: MediaSearchModalProps) {
  const [query, setQuery] = useState(initialQuery);
  const [mediaType, setMediaType] = useState<"image" | "video" | "all">(type);
  const [source, setSource] = useState<"pexels" | "pixabay" | "all">("all");
  const [sortBy, setSortBy] = useState<"relevance" | "popular">("relevance");
  const [results, setResults] = useState<MediaItem[]>([]);
  const [isSearching, setIsSearching] = useState(false);
  const [selectedMedia, setSelectedMedia] = useState<MediaItem | null>(null);

  useEffect(() => {
    if (isOpen && initialQuery) {
      handleSearch();
    }
  }, [isOpen]);

  const handleSearch = async () => {
    if (!query.trim()) return;

    setIsSearching(true);
    try {
      // Implementar busca real nas APIs
      // Por agora, simular com dados mock
      await new Promise((resolve) => setTimeout(resolve, 1000));

      const mockResults: MediaItem[] = Array.from({ length: 12 }, (_, i) => ({
        id: `media-${i}`,
        source: i % 2 === 0 ? "pexels" : "pixabay",
        sourceId: `${i}`,
        url: `https://via.placeholder.com/1920x1080/1a1a2e/16213e?text=Media+${i + 1}`,
        previewUrl: `https://via.placeholder.com/400x300/1a1a2e/16213e?text=Media+${i + 1}`,
        type: mediaType === "all" ? (i % 2 === 0 ? "image" : "video") : mediaType,
        duration: mediaType === "video" || (mediaType === "all" && i % 2 !== 0) ? 15 : null,
        attribution: `Photographer ${i + 1}`,
      }));

      setResults(mockResults);
    } catch (error) {
      console.error("Erro ao buscar mídia:", error);
    } finally {
      setIsSearching(false);
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter") {
      handleSearch();
    }
  };

  const handleSelectMedia = (media: MediaItem) => {
    setSelectedMedia(media);
  };

  const handleConfirmSelection = () => {
    if (selectedMedia) {
      onSelect(selectedMedia);
      onClose();
    }
  };

  return (
    <Modal
      isOpen={isOpen}
      onClose={onClose}
      title="Buscar Mídia"
      size="large"
    >
      <div className="space-y-6">
        {/* Busca */}
        <div className="flex gap-3">
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" />
            <input
              type="text"
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Buscar imagens ou vídeos..."
              className="w-full bg-gray-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"
            />
          </div>
          <button
            onClick={handleSearch}
            disabled={isSearching || !query.trim()}
            className={cn(
              "px-6 py-3 rounded-lg font-medium transition-all",
              isSearching || !query.trim()
                ? "bg-gray-800 text-gray-500 cursor-not-allowed"
                : "bg-cyan-600 hover:bg-cyan-500 text-white"
            )}
          >
            {isSearching ? <Loader2 className="w-5 h-5 animate-spin" /> : "Buscar"}
          </button>
        </div>

        {/* Filtros */}
        <div className="flex flex-wrap items-center gap-3">
          <div className="flex items-center gap-2">
            <Filter className="w-4 h-4 text-gray-500" />
            <span className="text-sm text-gray-500">Filtros:</span>
          </div>

          {/* Tipo */}
          <select
            value={mediaType}
            onChange={(e) => setMediaType(e.target.value as "image" | "video" | "all")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="all">Todos</option>
            <option value="image">Imagens</option>
            <option value="video">Vídeos</option>
          </select>

          {/* Fonte */}
          <select
            value={source}
            onChange={(e) => setSource(e.target.value as "pexels" | "pixabay" | "all")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="all">Todas as fontes</option>
            <option value="pexels">Pexels</option>
            <option value="pixabay">Pixabay</option>
          </select>

          {/* Ordenação */}
          <select
            value={sortBy}
            onChange={(e) => setSortBy(e.target.value as "relevance" | "popular")}
            className="bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"
          >
            <option value="relevance">Relevância</option>
            <option value="popular">Popularidade</option>
          </select>
        </div>

        {/* Resultados */}
        <div className="min-h-[400px]">
          {isSearching ? (
            <div className="flex items-center justify-center h-[400px]">
              <div className="text-center">
                <Loader2 className="w-12 h-12 text-cyan-500 animate-spin mx-auto mb-4" />
                <p className="text-gray-400">Buscando mídia...</p>
              </div>
            </div>
          ) : results.length > 0 ? (
            <>
              <div className="flex items-center justify-between mb-4">
                <p className="text-sm text-gray-400">
                  {results.length} resultados encontrados
                </p>
                {selectedMedia && (
                  <div className="flex items-center gap-2 text-sm text-cyan-400">
                    <span>1 selecionado</span>
                    <button
                      onClick={() => setSelectedMedia(null)}
                      className="p-1 hover:bg-cyan-500/20 rounded transition-colors"
                    >
                      <X className="w-4 h-4" />
                    </button>
                  </div>
                )}
              </div>

              <div className="grid grid-cols-3 gap-4 max-h-[500px] overflow-y-auto pr-2">
                {results.map((media) => (
                  <MediaCard
                    key={media.id}
                    media={media}
                    isSelected={selectedMedia?.id === media.id}
                    onClick={() => handleSelectMedia(media)}
                  />
                ))}
              </div>
            </>
          ) : (
            <div className="flex items-center justify-center h-[400px]">
              <div className="text-center">
                <Grid3x3 className="w-16 h-16 text-gray-700 mx-auto mb-4" />
                <p className="text-gray-500">Nenhum resultado encontrado</p>
                <p className="text-sm text-gray-600 mt-2">
                  Tente buscar com outros termos
                </p>
              </div>
            </div>
          )}
        </div>

        {/* Ações */}
        {selectedMedia && (
          <div className="flex gap-3 pt-4 border-t border-gray-800">
            <button
              onClick={onClose}
              className="flex-1 px-4 py-3 rounded-lg font-medium bg-gray-800 hover:bg-gray-700 text-white transition-all"
            >
              Cancelar
            </button>
            <button
              onClick={handleConfirmSelection}
              className="flex-1 px-4 py-3 rounded-lg font-medium bg-cyan-600 hover:bg-cyan-500 text-white transition-all"
            >
              Usar Mídia Selecionada
            </button>
          </div>
        )}
      </div>
    </Modal>
  );
}

interface MediaCardProps {
  media: MediaItem;
  isSelected: boolean;
  onClick: () => void;
}

function MediaCard({ media, isSelected, onClick }: MediaCardProps) {
  return (
    <motion.button
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
      onClick={onClick}
      className={cn(
        "relative aspect-video rounded-lg overflow-hidden bg-gray-900 border-2 transition-all",
        isSelected
          ? "border-cyan-500 ring-2 ring-cyan-500/50"
          : "border-gray-800 hover:border-gray-700"
      )}
    >
      <img
        src={media.previewUrl}
        alt="Media preview"
        className="w-full h-full object-cover"
      />

      {/* Overlay com info */}
      <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 hover:opacity-100 transition-opacity">
        <div className="absolute bottom-2 left-2 right-2">
          <div className="flex items-center justify-between text-white text-xs">
            <span className="truncate">{media.attribution}</span>
            {media.type === "video" && media.duration && (
              <div className="flex items-center gap-1 bg-black/50 rounded px-1.5 py-0.5">
                <PlayCircle className="w-3 h-3" />
                <span>{media.duration}s</span>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Indicador de tipo */}
      <div className="absolute top-2 right-2">
        <div className="bg-black/70 backdrop-blur-sm rounded-full p-1.5">
          {media.type === "video" ? (
            <PlayCircle className="w-4 h-4 text-white" />
          ) : (
            <Download className="w-4 h-4 text-white" />
          )}
        </div>
      </div>

      {/* Check de seleção */}
      <AnimatePresence>
        {isSelected && (
          <motion.div
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            exit={{ scale: 0 }}
            className="absolute top-2 left-2 bg-cyan-500 rounded-full p-1"
          >
            <svg
              className="w-4 h-4 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={3}
                d="M5 13l4 4L19 7"
              />
            </svg>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.button>
  );
}

```

---
#### `components/studio/MediaUploader.tsx`

```
"use client";

import { useState, useCallback } from "react";
import { Upload, X, FileVideo, FileImage, AlertCircle } from "lucide-react";
import { cn } from "@/lib/utils";
import { motion } from "framer-motion";

interface MediaUploaderProps {
  sceneId: string;
  onUploadComplete: (url: string, type: "image" | "video") => void;
  className?: string;
}

export default function MediaUploader({
  sceneId,
  onUploadComplete,
  className,
}: MediaUploaderProps) {
  const [isDragging, setIsDragging] = useState(false);
  const [isUploading, setIsUploading] = useState(false);
  const [uploadProgress, setUploadProgress] = useState(0);
  const [error, setError] = useState<string | null>(null);

  const handleFile = useCallback(
    async (file: File) => {
      setError(null);

      // Validar tipo de arquivo
      const isVideo = file.type.startsWith("video/");
      const isImage = file.type.startsWith("image/");

      if (!isVideo && !isImage) {
        setError("Formato de arquivo não suportado");
        return;
      }

      // Validar tamanho (máximo 100MB)
      const maxSize = 100 * 1024 * 1024;
      if (file.size > maxSize) {
        setError("Arquivo muito grande. Máximo: 100MB");
        return;
      }

      setIsUploading(true);
      setUploadProgress(0);

      try {
        // Simular upload com progresso
        // Em produção, fazer upload real para Vercel Blob ou S3
        const interval = setInterval(() => {
          setUploadProgress((prev) => {
            if (prev >= 90) {
              clearInterval(interval);
              return prev;
            }
            return prev + 10;
          });
        }, 200);

        await new Promise((resolve) => setTimeout(resolve, 2000));

        clearInterval(interval);
        setUploadProgress(100);

        // Criar URL temporário
        const url = URL.createObjectURL(file);
        const type = isVideo ? "video" : "image";

        onUploadComplete(url, type);

        setTimeout(() => {
          setIsUploading(false);
          setUploadProgress(0);
        }, 500);
      } catch {
        setError("Erro ao fazer upload do arquivo");
        setIsUploading(false);
        setUploadProgress(0);
      }
    },
    [onUploadComplete]
  );

  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
  }, []);

  const handleDrop = useCallback(
    (e: React.DragEvent) => {
      e.preventDefault();
      setIsDragging(false);

      const file = e.dataTransfer.files[0];
      if (file) {
        handleFile(file);
      }
    },
    [handleFile]
  );

  const handleFileSelect = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const file = e.target.files?.[0];
      if (file) {
        handleFile(file);
      }
    },
    [handleFile]
  );

  return (
    <div className={cn("space-y-4", className)}>
      <input
        type="file"
        accept="video/*,image/*"
        onChange={handleFileSelect}
        className="hidden"
        id={`media-upload-${sceneId}`}
        disabled={isUploading}
      />

      <label
        htmlFor={`media-upload-${sceneId}`}
        onDragOver={handleDragOver}
        onDragLeave={handleDragLeave}
        onDrop={handleDrop}
        className={cn(
          "block border-2 border-dashed rounded-xl p-8 transition-all cursor-pointer",
          isDragging
            ? "border-cyan-500 bg-cyan-500/10"
            : isUploading
            ? "border-gray-700 bg-gray-900 cursor-not-allowed"
            : "border-gray-700 hover:border-gray-600 hover:bg-gray-900/50"
        )}
      >
        <div className="flex flex-col items-center justify-center text-center">
          {isUploading ? (
            <motion.div
              initial={{ scale: 0.8, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              className="space-y-4 w-full"
            >
              <div className="w-16 h-16 rounded-full bg-cyan-500/20 flex items-center justify-center mx-auto">
                <Upload className="w-8 h-8 text-cyan-500 animate-pulse" />
              </div>
              <div className="space-y-2">
                <p className="text-white font-medium">Enviando arquivo...</p>
                <div className="w-full max-w-xs mx-auto h-2 bg-gray-800 rounded-full overflow-hidden">
                  <motion.div
                    initial={{ width: 0 }}
                    animate={{ width: `${uploadProgress}%` }}
                    transition={{ duration: 0.3 }}
                    className="h-full bg-gradient-to-r from-cyan-500 to-blue-600"
                  />
                </div>
                <p className="text-sm text-gray-400">{uploadProgress}%</p>
              </div>
            </motion.div>
          ) : (
            <>
              <div className="w-16 h-16 rounded-full bg-gray-800 flex items-center justify-center mb-4">
                <Upload className="w-8 h-8 text-gray-500" />
              </div>
              <p className="text-white font-medium mb-2">
                {isDragging ? "Solte o arquivo aqui" : "Clique ou arraste um arquivo"}
              </p>
              <p className="text-sm text-gray-500 mb-4">
                Vídeo ou imagem própria
              </p>
              <div className="flex items-center gap-4 text-xs text-gray-600">
                <div className="flex items-center gap-1">
                  <FileVideo className="w-4 h-4" />
                  <span>MP4, MOV, WEBM</span>
                </div>
                <div className="flex items-center gap-1">
                  <FileImage className="w-4 h-4" />
                  <span>JPG, PNG, WEBP</span>
                </div>
              </div>
            </>
          )}
        </div>
      </label>

      {error && (
        <motion.div
          initial={{ opacity: 0, y: -10 }}
          animate={{ opacity: 1, y: 0 }}
          className="bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-center gap-2"
        >
          <AlertCircle className="w-4 h-4 text-red-500 flex-shrink-0" />
          <p className="text-sm text-red-400">{error}</p>
          <button
            onClick={() => setError(null)}
            className="ml-auto p-1 hover:bg-red-500/20 rounded transition-colors"
          >
            <X className="w-4 h-4 text-red-400" />
          </button>
        </motion.div>
      )}
    </div>
  );
}

```

---
#### `components/system/SystemStatus.tsx`

```
"use client";

import { useEffect, useState } from "react";

type Health = {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, "ONLINE" | "OFFLINE">;
};

export default function SystemStatus() {
  const [data, setData] = useState<Health | null>(null);

  useEffect(() => {
    fetch("/api/health")
      .then(res => res.json())
      .then(setData)
      .catch(() => setData(null));
  }, []);

  if (!data) {
    return <p>Checking system status...</p>;
  }

  return (
    <div style={{ border: "1px solid #333", padding: 16 }}>
      <strong>System Status: {data.status}</strong>
      <ul>
        {Object.entries(data.apis).map(([name, status]) => (
          <li key={name}>
            {name}: {status}
          </li>
        ))}
      </ul>
    </div>
  );
}

```

---
#### `components/ui/ActivityLog.tsx`

```
"use client";

import { useEffect, useRef } from "react";
import { motion } from "framer-motion";
import { CheckCircle2, XCircle, AlertCircle, Info, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";

export type ActivityStatus = "pending" | "running" | "success" | "error" | "warning" | "info";

export interface Activity {
  id: string;
  message: string;
  status: ActivityStatus;
  timestamp: Date;
  details?: string;
}

interface ActivityLogProps {
  activities: Activity[];
  className?: string;
  maxHeight?: string;
  autoScroll?: boolean;
  showTimestamp?: boolean;
}

export default function ActivityLog({
  activities,
  className,
  maxHeight = "400px",
  autoScroll = true,
  showTimestamp = true,
}: ActivityLogProps) {
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (autoScroll && scrollRef.current) {
      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
    }
  }, [activities, autoScroll]);

  return (
    <div
      ref={scrollRef}
      className={cn(
        "bg-gray-950 border border-gray-800 rounded-lg p-4 font-mono text-sm overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",
        className
      )}
      style={{ maxHeight }}
    >
      <AnimatePresence initial={false}>
        {activities.map((activity, index) => (
          <ActivityItem
            key={activity.id}
            activity={activity}
            showTimestamp={showTimestamp}
            isLast={index === activities.length - 1}
          />
        ))}
      </AnimatePresence>
    </div>
  );
}

interface ActivityItemProps {
  activity: Activity;
  showTimestamp: boolean;
  isLast: boolean;
}

function ActivityItem({ activity, showTimestamp, isLast }: ActivityItemProps) {
  const getIcon = () => {
    switch (activity.status) {
      case "success":
        return <CheckCircle2 className="w-4 h-4 text-green-500 flex-shrink-0" />;
      case "error":
        return <XCircle className="w-4 h-4 text-red-500 flex-shrink-0" />;
      case "warning":
        return <AlertCircle className="w-4 h-4 text-amber-500 flex-shrink-0" />;
      case "running":
        return <Loader2 className="w-4 h-4 text-cyan-500 animate-spin flex-shrink-0" />;
      case "info":
        return <Info className="w-4 h-4 text-blue-500 flex-shrink-0" />;
      default:
        return <div className="w-2 h-2 rounded-full bg-gray-600 flex-shrink-0" />;
    }
  };

  const getTextColor = () => {
    switch (activity.status) {
      case "success":
        return "text-green-400";
      case "error":
        return "text-red-400";
      case "warning":
        return "text-amber-400";
      case "running":
        return "text-cyan-400";
      case "info":
        return "text-blue-400";
      default:
        return "text-gray-400";
    }
  };

  const formatTime = (date: Date) => {
    return date.toLocaleTimeString("pt-BR", {
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
    });
  };

  return (
    <motion.div
      initial={{ opacity: 0, x: -10 }}
      animate={{ opacity: 1, x: 0 }}
      exit={{ opacity: 0, x: 10 }}
      transition={{ duration: 0.2 }}
      className={cn("flex items-start gap-3 py-2", !isLast && "border-b border-gray-800/50")}
    >
      {getIcon()}

      <div className="flex-1 min-w-0">
        <div className="flex items-center gap-2 flex-wrap">
          {showTimestamp && (
            <span className="text-xs text-gray-600">[{formatTime(activity.timestamp)}]</span>
          )}
          <span className={cn("font-medium", getTextColor())}>{activity.message}</span>
        </div>

        {activity.details && (
          <div className="mt-1 text-xs text-gray-500 pl-4 border-l-2 border-gray-800">
            {activity.details}
          </div>
        )}
      </div>
    </motion.div>
  );
}

// Hook para gerenciar activities
export function useActivityLog() {
  const [activities, setActivities] = useState<Activity[]>([]);

  const addActivity = (message: string, status: ActivityStatus = "info", details?: string) => {
    const activity: Activity = {
      id: `${Date.now()}-${Math.random()}`,
      message,
      status,
      timestamp: new Date(),
      details,
    };
    setActivities((prev) => [...prev, activity]);
    return activity.id;
  };

  const updateActivity = (id: string, updates: Partial<Activity>) => {
    setActivities((prev) =>
      prev.map((activity) =>
        activity.id === id ? { ...activity, ...updates } : activity
      )
    );
  };

  const clearActivities = () => {
    setActivities([]);
  };

  return {
    activities,
    addActivity,
    updateActivity,
    clearActivities,
  };
}

function useState<T>(initialState: T): [T, React.Dispatch<React.SetStateAction<T>>] {
  const ref = useRef<T>(initialState);
  const [, forceUpdate] = useReducer((x) => x + 1, 0);

  const setState = (value: T | ((prev: T) => T)) => {
    const newValue = typeof value === "function" ? (value as (prev: T) => T)(ref.current) : value;
    ref.current = newValue;
    forceUpdate();
  };

  return [ref.current, setState];
}

function useReducer(reducer: (x: number) => number, initialState: number): [number, () => void] {
  const ref = useRef<number>(initialState);
  const forceUpdateRef = useRef<(() => void) | null>(null);

  if (!forceUpdateRef.current) {
    forceUpdateRef.current = () => {
      ref.current = reducer(ref.current);
    };
  }

  return [ref.current, forceUpdateRef.current];
}

```

---
#### `components/ui/Badge.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface BadgeProps {
  children: React.ReactNode;
  variant?: "default" | "success" | "warning" | "error" | "info";
  size?: "sm" | "md";
  className?: string;
}

export default function Badge({
  children,
  variant = "default",
  size = "sm",
  className,
}: BadgeProps) {
  const variants = {
    default: "bg-gray-700 text-gray-300",
    success: "bg-green-500/10 text-green-400",
    warning: "bg-yellow-500/10 text-yellow-400",
    error: "bg-red-500/10 text-red-400",
    info: "bg-blue-500/10 text-blue-400",
  };

  const sizes = {
    sm: "px-2 py-0.5 text-xs",
    md: "px-3 py-1 text-sm",
  };

  return (
    <span
      className={cn(
        "inline-flex items-center rounded-full font-medium",
        variants[variant],
        sizes[size],
        className
      )}
    >
      {children}
    </span>
  );
}

```

---
#### `components/ui/Button.tsx`

```
"use client";

import { forwardRef, ButtonHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { Loader2 } from "lucide-react";

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: "primary" | "secondary" | "outline" | "success" | "warning" | "danger" | "ghost";
  size?: "sm" | "md" | "lg";
  isLoading?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      className,
      variant = "primary",
      size = "md",
      isLoading = false,
      leftIcon,
      rightIcon,
      children,
      disabled,
      ...props
    },
    ref
  ) => {
    const variants = {
      primary: "bg-primary-600 hover:bg-primary-700 text-white",
      secondary: "bg-gray-700 hover:bg-gray-600 text-white",
      outline: "border border-gray-600 hover:border-gray-500 hover:bg-gray-800 text-gray-300",
      success: "bg-green-600 hover:bg-green-700 text-white",
      warning: "bg-yellow-600 hover:bg-yellow-700 text-white",
      danger: "bg-red-600 hover:bg-red-700 text-white",
      ghost: "hover:bg-gray-800 text-gray-300",
    };

    const sizes = {
      sm: "text-sm px-3 py-1.5",
      md: "px-4 py-2",
      lg: "text-lg px-6 py-3",
    };

    return (
      <button
        ref={ref}
        className={cn(
          "inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200",
          "disabled:opacity-50 disabled:cursor-not-allowed",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          variants[variant],
          sizes[size],
          className
        )}
        disabled={disabled || isLoading}
        {...props}
      >
        {isLoading ? (
          <Loader2 className="w-4 h-4 animate-spin" />
        ) : (
          leftIcon
        )}
        {children}
        {!isLoading && rightIcon}
      </button>
    );
  }
);

Button.displayName = "Button";

export default Button;

```

---
#### `components/ui/Card.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface CardProps {
  children: React.ReactNode;
  className?: string;
  hover?: boolean;
  padding?: "none" | "sm" | "md" | "lg";
}

export default function Card({
  children,
  className,
  hover = false,
  padding = "md",
}: CardProps) {
  const paddings = {
    none: "",
    sm: "p-4",
    md: "p-6",
    lg: "p-8",
  };

  return (
    <div
      className={cn(
        "rounded-xl border border-gray-800 bg-gray-900/50 backdrop-blur-sm",
        paddings[padding],
        hover && "transition-all duration-200 hover:shadow-lg hover:shadow-primary-500/10 hover:-translate-y-0.5",
        className
      )}
    >
      {children}
    </div>
  );
}

interface CardHeaderProps {
  children: React.ReactNode;
  className?: string;
}

export function CardHeader({ children, className }: CardHeaderProps) {
  return (
    <div className={cn("mb-4", className)}>
      {children}
    </div>
  );
}

interface CardTitleProps {
  children: React.ReactNode;
  className?: string;
}

export function CardTitle({ children, className }: CardTitleProps) {
  return (
    <h3 className={cn("text-lg font-semibold text-white", className)}>
      {children}
    </h3>
  );
}

interface CardDescriptionProps {
  children: React.ReactNode;
  className?: string;
}

export function CardDescription({ children, className }: CardDescriptionProps) {
  return (
    <p className={cn("text-sm text-gray-400 mt-1", className)}>
      {children}
    </p>
  );
}

interface CardContentProps {
  children: React.ReactNode;
  className?: string;
}

export function CardContent({ children, className }: CardContentProps) {
  return <div className={cn("", className)}>{children}</div>;
}

interface CardFooterProps {
  children: React.ReactNode;
  className?: string;
}

export function CardFooter({ children, className }: CardFooterProps) {
  return (
    <div className={cn("mt-4 pt-4 border-t border-gray-800", className)}>
      {children}
    </div>
  );
}

```

---
#### `components/ui/Input.tsx`

```
"use client";

import { forwardRef, InputHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Input = forwardRef<HTMLInputElement, InputProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={inputId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <input
          ref={ref}
          id={inputId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Input.displayName = "Input";

export default Input;

```

---
#### `components/ui/Modal.tsx`

```
"use client";

import { useEffect, useCallback } from "react";
import { X } from "lucide-react";
import { cn } from "@/lib/utils";

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  size?: "sm" | "md" | "lg" | "xl" | "full";
  showCloseButton?: boolean;
}

export default function Modal({
  isOpen,
  onClose,
  title,
  children,
  size = "md",
  showCloseButton = true,
}: ModalProps) {
  const handleEscape = useCallback(
    (e: KeyboardEvent) => {
      if (e.key === "Escape") {
        onClose();
      }
    },
    [onClose]
  );

  useEffect(() => {
    if (isOpen) {
      document.addEventListener("keydown", handleEscape);
      document.body.style.overflow = "hidden";
    }

    return () => {
      document.removeEventListener("keydown", handleEscape);
      document.body.style.overflow = "unset";
    };
  }, [isOpen, handleEscape]);

  if (!isOpen) return null;

  const sizes = {
    sm: "max-w-md",
    md: "max-w-lg",
    lg: "max-w-2xl",
    xl: "max-w-4xl",
    full: "max-w-[90vw]",
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center">
      {/* Backdrop */}
      <div
        className="absolute inset-0 bg-black/70 backdrop-blur-sm"
        onClick={onClose}
      />

      {/* Modal */}
      <div
        className={cn(
          "relative w-full mx-4 bg-gradient-to-br from-layer-1/95 via-indigo-950/20 to-layer-2/95 backdrop-blur-xl rounded-2xl shadow-2xl border-2 border-subtle",
          "max-h-[90vh] overflow-hidden flex flex-col",
          "animate-fade-in shadow-glow-lg shadow-indigo-500/20",
          sizes[size]
        )}
      >
        {/* Animated gradient mesh background */}
        <div className="absolute inset-0 bg-gradient-mesh opacity-10 pointer-events-none" />

        {/* Glow overlay */}
        <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-blue-500/5 to-purple-500/5 pointer-events-none rounded-2xl" />

        {/* Header */}
        {(title || showCloseButton) && (
          <div className="relative z-10 flex items-center justify-between px-6 py-4 border-b border-subtle bg-gradient-to-r from-layer-2/50 to-transparent backdrop-blur-sm">
            {title && (
              <h2 className="text-lg font-semibold bg-gradient-to-r from-white via-cyan-100 to-white bg-clip-text text-transparent">{title}</h2>
            )}
            {showCloseButton && (
              <button
                onClick={onClose}
                className="p-1 rounded-lg hover:bg-layer-2 text-muted hover:text-white transition-all hover:shadow-glow-sm"
              >
                <X className="w-5 h-5" />
              </button>
            )}
          </div>
        )}

        {/* Content */}
        <div className="relative z-10 flex-1 overflow-auto p-6">{children}</div>
      </div>
    </div>
  );
}

```

---
#### `components/ui/ProgressBar.tsx`

```
"use client";

import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

interface ProgressBarProps {
  progress: number; // 0-100
  label?: string;
  showPercentage?: boolean;
  className?: string;
  variant?: "default" | "success" | "warning" | "error";
  animate?: boolean;
}

export default function ProgressBar({
  progress,
  label,
  showPercentage = true,
  className,
  variant = "default",
  animate = true,
}: ProgressBarProps) {
  const normalizedProgress = Math.min(Math.max(progress, 0), 100);

  const variantStyles = {
    default: "from-cyan-500 to-blue-600",
    success: "from-green-500 to-emerald-600",
    warning: "from-amber-500 to-orange-600",
    error: "from-red-500 to-rose-600",
  };

  const glowColors = {
    default: "shadow-cyan-500/50",
    success: "shadow-green-500/50",
    warning: "shadow-amber-500/50",
    error: "shadow-red-500/50",
  };

  return (
    <div className={cn("space-y-2", className)}>
      {(label || showPercentage) && (
        <div className="flex items-center justify-between text-sm">
          {label && <span className="text-gray-300">{label}</span>}
          {showPercentage && (
            <span className="text-gray-400 font-mono">
              {normalizedProgress.toFixed(0)}%
            </span>
          )}
        </div>
      )}

      <div className="relative w-full h-2 bg-gray-800 rounded-full overflow-hidden">
        {/* Barra de fundo com shimmer */}
        <div className="absolute inset-0 bg-gradient-to-r from-transparent via-gray-700/50 to-transparent animate-shimmer" />

        {/* Barra de progresso */}
        <motion.div
          initial={animate ? { width: 0 } : { width: `${normalizedProgress}%` }}
          animate={{ width: `${normalizedProgress}%` }}
          transition={{
            duration: animate ? 0.5 : 0,
            ease: "easeOut",
          }}
          className={cn(
            "h-full rounded-full bg-gradient-to-r shadow-lg",
            variantStyles[variant],
            glowColors[variant]
          )}
        >
          {/* Efeito de brilho animado */}
          <div className="w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer" />
        </motion.div>
      </div>
    </div>
  );
}

interface MultiProgressBarProps {
  segments: Array<{
    value: number;
    label: string;
    color: string;
  }>;
  className?: string;
}

export function MultiProgressBar({ segments, className }: MultiProgressBarProps) {
  const total = segments.reduce((sum, seg) => sum + seg.value, 0);

  return (
    <div className={cn("space-y-3", className)}>
      <div className="flex items-center h-3 w-full bg-gray-800 rounded-full overflow-hidden">
        {segments.map((segment, index) => {
          const percentage = (segment.value / total) * 100;

          return (
            <motion.div
              key={index}
              initial={{ width: 0 }}
              animate={{ width: `${percentage}%` }}
              transition={{ duration: 0.5, delay: index * 0.1 }}
              className="h-full"
              style={{ backgroundColor: segment.color }}
            />
          );
        })}
      </div>

      <div className="grid grid-cols-2 gap-2">
        {segments.map((segment, index) => {
          const percentage = ((segment.value / total) * 100).toFixed(1);

          return (
            <div key={index} className="flex items-center gap-2">
              <div
                className="w-3 h-3 rounded-full"
                style={{ backgroundColor: segment.color }}
              />
              <span className="text-xs text-gray-400">
                {segment.label} ({percentage}%)
              </span>
            </div>
          );
        })}
      </div>
    </div>
  );
}

```

---
#### `components/ui/Select.tsx`

```
"use client";

import { forwardRef, SelectHTMLAttributes } from "react";
import { cn } from "@/lib/utils";
import { ChevronDown } from "lucide-react";

interface SelectOption {
  value: string;
  label: string;
  disabled?: boolean;
}

interface SelectProps extends Omit<SelectHTMLAttributes<HTMLSelectElement>, "onChange"> {
  label?: string;
  error?: string;
  options: SelectOption[];
  placeholder?: string;
  onChange?: (value: string) => void;
}

const Select = forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, label, error, options, placeholder, id, onChange, ...props }, ref) => {
    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={selectId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <div className="relative">
          <select
            ref={ref}
            id={selectId}
            className={cn(
              "w-full rounded-lg border bg-gray-800 px-4 py-2 pr-10 text-white appearance-none cursor-pointer",
              "transition-colors duration-200",
              "focus:outline-none focus:ring-1",
              error
                ? "border-red-500 focus:border-red-500 focus:ring-red-500"
                : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
              className
            )}
            onChange={(e) => onChange?.(e.target.value)}
            {...props}
          >
            {placeholder && (
              <option value="" disabled>
                {placeholder}
              </option>
            )}
            {options.map((option) => (
              <option
                key={option.value}
                value={option.value}
                disabled={option.disabled}
              >
                {option.label}
              </option>
            ))}
          </select>
          <ChevronDown className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none" />
        </div>
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
      </div>
    );
  }
);

Select.displayName = "Select";

export default Select;

```

---
#### `components/ui/StepIndicator.tsx`

```
"use client";

import { motion } from "framer-motion";
import { CheckCircle2, Circle, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";

export interface Step {
  id: string;
  title: string;
  description?: string;
  status: "pending" | "active" | "completed" | "error";
}

interface StepIndicatorProps {
  steps: Step[];
  currentStep: number;
  className?: string;
  orientation?: "horizontal" | "vertical";
  showDescription?: boolean;
}

export default function StepIndicator({
  steps,
  currentStep,
  className,
  orientation = "horizontal",
  showDescription = true,
}: StepIndicatorProps) {
  return orientation === "horizontal" ? (
    <HorizontalStepIndicator
      steps={steps}
      currentStep={currentStep}
      className={className}
      showDescription={showDescription}
    />
  ) : (
    <VerticalStepIndicator
      steps={steps}
      currentStep={currentStep}
      className={className}
      showDescription={showDescription}
    />
  );
}

function HorizontalStepIndicator({
  steps,
  currentStep,
  className,
  showDescription,
}: Omit<StepIndicatorProps, "orientation">) {
  return (
    <div className={cn("w-full", className)}>
      <div className="flex items-center justify-between">
        {steps.map((step, index) => {
          const isCompleted = index < currentStep;
          const isActive = index === currentStep;
          const isPending = index > currentStep;

          return (
            <div key={step.id} className="flex items-center flex-1">
              {/* Step Circle */}
              <div className="flex flex-col items-center">
                <div className="relative">
                  {isCompleted ? (
                    <motion.div
                      initial={{ scale: 0 }}
                      animate={{ scale: 1 }}
                      className="w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-green-500/50"
                    >
                      <CheckCircle2 className="w-6 h-6 text-white" />
                    </motion.div>
                  ) : isActive ? (
                    <motion.div
                      animate={{
                        scale: [1, 1.1, 1],
                        boxShadow: [
                          "0 0 0 0 rgba(6, 182, 212, 0.7)",
                          "0 0 0 10px rgba(6, 182, 212, 0)",
                          "0 0 0 0 rgba(6, 182, 212, 0)",
                        ],
                      }}
                      transition={{
                        duration: 2,
                        repeat: Infinity,
                        repeatType: "loop",
                      }}
                      className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/50"
                    >
                      <Loader2 className="w-6 h-6 text-white animate-spin" />
                    </motion.div>
                  ) : (
                    <div className="w-10 h-10 rounded-full bg-gray-800 border-2 border-gray-700 flex items-center justify-center">
                      <Circle className="w-6 h-6 text-gray-600" />
                    </div>
                  )}
                </div>

                {/* Step Info */}
                <div className="mt-3 text-center max-w-[120px]">
                  <p
                    className={cn(
                      "text-sm font-semibold",
                      isCompleted && "text-green-400",
                      isActive && "text-cyan-400",
                      isPending && "text-gray-500"
                    )}
                  >
                    {step.title}
                  </p>
                  {showDescription && step.description && (
                    <p className="text-xs text-gray-600 mt-1">{step.description}</p>
                  )}
                </div>
              </div>

              {/* Connector Line */}
              {index < steps.length - 1 && (
                <div className="flex-1 h-0.5 mx-4 relative">
                  <div className="absolute inset-0 bg-gray-800" />
                  <motion.div
                    initial={{ width: "0%" }}
                    animate={{ width: index < currentStep ? "100%" : "0%" }}
                    transition={{ duration: 0.5 }}
                    className="absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-600"
                  />
                </div>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}

function VerticalStepIndicator({
  steps,
  currentStep,
  className,
  showDescription,
}: Omit<StepIndicatorProps, "orientation">) {
  return (
    <div className={cn("space-y-6", className)}>
      {steps.map((step, index) => {
        const isCompleted = index < currentStep;
        const isActive = index === currentStep;
        const isPending = index > currentStep;

        return (
          <div key={step.id} className="flex items-start gap-4">
            {/* Step Circle and Line */}
            <div className="flex flex-col items-center">
              <div className="relative">
                {isCompleted ? (
                  <motion.div
                    initial={{ scale: 0 }}
                    animate={{ scale: 1 }}
                    className="w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-green-500/50"
                  >
                    <CheckCircle2 className="w-6 h-6 text-white" />
                  </motion.div>
                ) : isActive ? (
                  <motion.div
                    animate={{
                      scale: [1, 1.1, 1],
                      boxShadow: [
                        "0 0 0 0 rgba(6, 182, 212, 0.7)",
                        "0 0 0 10px rgba(6, 182, 212, 0)",
                        "0 0 0 0 rgba(6, 182, 212, 0)",
                      ],
                    }}
                    transition={{
                      duration: 2,
                      repeat: Infinity,
                      repeatType: "loop",
                    }}
                    className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/50"
                  >
                    <Loader2 className="w-6 h-6 text-white animate-spin" />
                  </motion.div>
                ) : (
                  <div className="w-10 h-10 rounded-full bg-gray-800 border-2 border-gray-700 flex items-center justify-center">
                    <Circle className="w-6 h-6 text-gray-600" />
                  </div>
                )}
              </div>

              {/* Connector Line */}
              {index < steps.length - 1 && (
                <div className="w-0.5 h-16 my-2 relative">
                  <div className="absolute inset-0 bg-gray-800" />
                  <motion.div
                    initial={{ height: "0%" }}
                    animate={{ height: index < currentStep ? "100%" : "0%" }}
                    transition={{ duration: 0.5 }}
                    className="absolute inset-0 bg-gradient-to-b from-green-500 to-emerald-600"
                  />
                </div>
              )}
            </div>

            {/* Step Info */}
            <div className="flex-1 pt-2">
              <p
                className={cn(
                  "text-base font-semibold",
                  isCompleted && "text-green-400",
                  isActive && "text-cyan-400",
                  isPending && "text-gray-500"
                )}
              >
                {step.title}
              </p>
              {showDescription && step.description && (
                <p className="text-sm text-gray-600 mt-1">{step.description}</p>
              )}
            </div>
          </div>
        );
      })}
    </div>
  );
}

// Compact version for minimal space
interface CompactStepIndicatorProps {
  totalSteps: number;
  currentStep: number;
  className?: string;
}

export function CompactStepIndicator({
  totalSteps,
  currentStep,
  className,
}: CompactStepIndicatorProps) {
  const progress = ((currentStep + 1) / totalSteps) * 100;

  return (
    <div className={cn("space-y-2", className)}>
      <div className="flex items-center justify-between text-sm">
        <span className="text-gray-400">
          Etapa {currentStep + 1} de {totalSteps}
        </span>
        <span className="text-cyan-400 font-semibold">{progress.toFixed(0)}%</span>
      </div>
      <div className="relative w-full h-2 bg-gray-800 rounded-full overflow-hidden">
        <motion.div
          initial={{ width: 0 }}
          animate={{ width: `${progress}%` }}
          transition={{ duration: 0.5 }}
          className="h-full rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 shadow-lg shadow-cyan-500/50"
        />
      </div>
    </div>
  );
}

```

---
#### `components/ui/StreamingText.tsx`

```
"use client";

import { useState, useEffect, useRef } from "react";
import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

interface StreamingTextProps {
  text: string;
  speed?: number; // caracteres por segundo
  className?: string;
  onComplete?: () => void;
  showCursor?: boolean;
  skipAnimation?: boolean;
}

export default function StreamingText({
  text,
  speed = 50,
  className,
  onComplete,
  showCursor = true,
  skipAnimation = false,
}: StreamingTextProps) {
  const [displayedText, setDisplayedText] = useState("");
  const [isComplete, setIsComplete] = useState(false);
  const indexRef = useRef(0);

  useEffect(() => {
    if (skipAnimation) {
      setDisplayedText(text);
      setIsComplete(true);
      onComplete?.();
      return;
    }

    indexRef.current = 0;
    setDisplayedText("");
    setIsComplete(false);

    const interval = setInterval(() => {
      if (indexRef.current < text.length) {
        setDisplayedText(text.slice(0, indexRef.current + 1));
        indexRef.current++;
      } else {
        clearInterval(interval);
        setIsComplete(true);
        onComplete?.();
      }
    }, 1000 / speed);

    return () => clearInterval(interval);
  }, [text, speed, onComplete, skipAnimation]);

  return (
    <div className={cn("relative", className)}>
      <span className="whitespace-pre-wrap">{displayedText}</span>
      {showCursor && !isComplete && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          className="inline-block w-0.5 h-4 bg-cyan-400 ml-1"
        />
      )}
    </div>
  );
}

interface StreamingMarkdownProps {
  markdown: string;
  speed?: number;
  className?: string;
  onComplete?: () => void;
}

export function StreamingMarkdown({
  markdown,
  speed = 50,
  className,
  onComplete,
}: StreamingMarkdownProps) {
  const [displayedText, setDisplayedText] = useState("");
  const [isComplete, setIsComplete] = useState(false);
  const indexRef = useRef(0);

  useEffect(() => {
    indexRef.current = 0;
    setDisplayedText("");
    setIsComplete(false);

    const interval = setInterval(() => {
      if (indexRef.current < markdown.length) {
        setDisplayedText(markdown.slice(0, indexRef.current + 1));
        indexRef.current++;
      } else {
        clearInterval(interval);
        setIsComplete(true);
        onComplete?.();
      }
    }, 1000 / speed);

    return () => clearInterval(interval);
  }, [markdown, speed, onComplete]);

  // Renderizar markdown básico
  const renderMarkdown = (text: string) => {
    const lines = text.split("\n");
    return lines.map((line, index) => {
      // Headers
      if (line.startsWith("### ")) {
        return (
          <h3 key={index} className="text-lg font-semibold text-white mt-4 mb-2">
            {line.replace("### ", "")}
          </h3>
        );
      }
      if (line.startsWith("## ")) {
        return (
          <h2 key={index} className="text-xl font-bold text-white mt-4 mb-2">
            {line.replace("## ", "")}
          </h2>
        );
      }
      if (line.startsWith("# ")) {
        return (
          <h1 key={index} className="text-2xl font-bold text-white mt-4 mb-3">
            {line.replace("# ", "")}
          </h1>
        );
      }

      // Lista
      if (line.startsWith("- ") || line.startsWith("* ")) {
        return (
          <li key={index} className="text-gray-300 ml-4">
            • {line.replace(/^[-*] /, "")}
          </li>
        );
      }

      // Parágrafo vazio
      if (line.trim() === "") {
        return <div key={index} className="h-2" />;
      }

      // Parágrafo normal
      return (
        <p key={index} className="text-gray-300 mb-2">
          {line}
        </p>
      );
    });
  };

  return (
    <div className={cn("space-y-1", className)}>
      {renderMarkdown(displayedText)}
      {!isComplete && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          className="inline-block w-0.5 h-4 bg-cyan-400 ml-1"
        />
      )}
    </div>
  );
}

interface TypewriterProps {
  words: string[];
  loop?: boolean;
  delayBetweenWords?: number;
  className?: string;
}

export function Typewriter({
  words,
  loop = true,
  delayBetweenWords = 2000,
  className,
}: TypewriterProps) {
  const [currentWordIndex, setCurrentWordIndex] = useState(0);
  const [displayedText, setDisplayedText] = useState("");
  const [isDeleting, setIsDeleting] = useState(false);

  useEffect(() => {
    const currentWord = words[currentWordIndex];

    const timeout = setTimeout(
      () => {
        if (!isDeleting) {
          if (displayedText.length < currentWord.length) {
            setDisplayedText(currentWord.slice(0, displayedText.length + 1));
          } else {
            setTimeout(() => setIsDeleting(true), delayBetweenWords);
          }
        } else {
          if (displayedText.length > 0) {
            setDisplayedText(displayedText.slice(0, -1));
          } else {
            setIsDeleting(false);
            if (loop || currentWordIndex < words.length - 1) {
              setCurrentWordIndex((prev) => (prev + 1) % words.length);
            }
          }
        }
      },
      isDeleting ? 50 : 100
    );

    return () => clearTimeout(timeout);
  }, [displayedText, isDeleting, currentWordIndex, words, loop, delayBetweenWords]);

  return (
    <span className={cn("inline-flex items-center", className)}>
      <span>{displayedText}</span>
      <motion.span
        animate={{ opacity: [1, 0] }}
        transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
        className="inline-block w-0.5 h-5 bg-cyan-400 ml-1"
      />
    </span>
  );
}

```

---
#### `components/ui/Textarea.tsx`

```
"use client";

import { forwardRef, TextareaHTMLAttributes } from "react";
import { cn } from "@/lib/utils";

interface TextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

const Textarea = forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, label, error, helperText, id, ...props }, ref) => {
    const textareaId = id || `textarea-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label
            htmlFor={textareaId}
            className="block text-sm font-medium text-gray-300 mb-1.5"
          >
            {label}
          </label>
        )}
        <textarea
          ref={ref}
          id={textareaId}
          className={cn(
            "w-full rounded-lg border bg-gray-800 px-4 py-2 text-white placeholder-gray-500",
            "transition-colors duration-200 resize-none",
            "focus:outline-none focus:ring-1",
            error
              ? "border-red-500 focus:border-red-500 focus:ring-red-500"
              : "border-gray-700 focus:border-primary-500 focus:ring-primary-500",
            className
          )}
          {...props}
        />
        {error && <p className="mt-1 text-sm text-red-400">{error}</p>}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Textarea.displayName = "Textarea";

export default Textarea;

```

---
#### `components/ui/Toggle.tsx`

```
"use client";

import { cn } from "@/lib/utils";

interface ToggleProps {
  checked: boolean;
  onChange: (checked: boolean) => void;
  label?: string;
  description?: string;
  disabled?: boolean;
}

export default function Toggle({
  checked,
  onChange,
  label,
  description,
  disabled = false,
}: ToggleProps) {
  return (
    <div className="flex items-start gap-3">
      <button
        type="button"
        role="switch"
        aria-checked={checked}
        disabled={disabled}
        onClick={() => !disabled && onChange(!checked)}
        className={cn(
          "relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",
          "focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900",
          checked ? "bg-primary-600" : "bg-gray-700",
          disabled && "opacity-50 cursor-not-allowed"
        )}
      >
        <span
          className={cn(
            "pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",
            checked ? "translate-x-5" : "translate-x-0"
          )}
        />
      </button>
      {(label || description) && (
        <div className="flex flex-col">
          {label && (
            <span className={cn("text-sm font-medium text-white", disabled && "opacity-50")}>
              {label}
            </span>
          )}
          {description && (
            <span className={cn("text-sm text-gray-400", disabled && "opacity-50")}>
              {description}
            </span>
          )}
        </div>
      )}
    </div>
  );
}

```

---
#### `components/workflow/ModeSelector.tsx`

```
"use client";

import { motion } from "framer-motion";
import { Zap, Settings, Crown, CheckCircle2, Lock } from "lucide-react";
import { WorkflowMode } from "@/types";
import { WORKFLOW_MODES, WorkflowModeConfig } from "@/lib/workflow-modes";
import { cn } from "@/lib/utils";
import Badge from "@/components/ui/Badge";

interface ModeSelectorProps {
  selectedMode: WorkflowMode;
  onSelect: (mode: WorkflowMode) => void;
  className?: string;
}

const iconMap = {
  Zap: Zap,
  Settings: Settings,
  Crown: Crown,
};

export default function ModeSelector({
  selectedMode,
  onSelect,
  className,
}: ModeSelectorProps) {
  const modes = Object.values(WORKFLOW_MODES);

  return (
    <div className={cn("space-y-4", className)}>
      <div>
        <h3 className="text-lg font-semibold text-white mb-2">
          Escolha o Modo de Operação
        </h3>
        <p className="text-sm text-gray-400">
          Selecione como você deseja criar seu vídeo
        </p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {modes.map((mode) => (
          <ModeCard
            key={mode.id}
            mode={mode}
            isSelected={selectedMode === mode.id}
            onSelect={() => onSelect(mode.id)}
          />
        ))}
      </div>
    </div>
  );
}

interface ModeCardProps {
  mode: WorkflowModeConfig;
  isSelected: boolean;
  onSelect: () => void;
}

function ModeCard({ mode, isSelected, onSelect }: ModeCardProps) {
  const Icon = iconMap[mode.icone as keyof typeof iconMap] || Zap;

  return (
    <motion.button
      onClick={mode.ativo ? onSelect : undefined}
      disabled={!mode.ativo}
      whileHover={mode.ativo ? { scale: 1.02 } : undefined}
      whileTap={mode.ativo ? { scale: 0.98 } : undefined}
      className={cn(
        "relative p-6 rounded-xl border text-left transition-all duration-200",
        "bg-gradient-to-br backdrop-blur-sm",
        mode.ativo
          ? isSelected
            ? "border-cyan-500 bg-cyan-500/10 shadow-lg shadow-cyan-500/20"
            : "border-gray-800 bg-gray-900/50 hover:border-gray-700"
          : "border-gray-800 bg-gray-900/30 cursor-not-allowed opacity-60"
      )}
    >
      {/* Badge de destaque */}
      {mode.badge && (
        <div className="absolute top-4 right-4">
          <Badge variant={mode.ativo ? "primary" : "secondary"}>
            {mode.badge}
          </Badge>
        </div>
      )}

      {/* Ícone do modo */}
      <div
        className={cn(
          "mb-4 p-3 rounded-lg inline-flex",
          mode.ativo
            ? `bg-gradient-to-br ${mode.cor}`
            : "bg-gray-800"
        )}
      >
        {mode.ativo ? (
          <Icon className="w-6 h-6 text-white" />
        ) : (
          <Lock className="w-6 h-6 text-gray-500" />
        )}
      </div>

      {/* Nome e descrição */}
      <div className="mb-4">
        <h4 className="text-lg font-semibold text-white mb-1 flex items-center gap-2">
          {mode.nome}
          {isSelected && mode.ativo && (
            <CheckCircle2 className="w-5 h-5 text-cyan-400" />
          )}
        </h4>
        <p className="text-sm text-gray-400">{mode.descricao}</p>
      </div>

      {/* Tempo estimado */}
      {mode.ativo && (
        <div className="mb-4 text-xs text-gray-500">
          ⏱️ Tempo estimado: {mode.tempoEstimado}
        </div>
      )}

      {/* Lista de recursos */}
      {mode.ativo && (
        <div className="space-y-2">
          <p className="text-xs font-semibold text-gray-400 uppercase tracking-wide">
            Recursos incluídos:
          </p>
          <ul className="space-y-1">
            {mode.recursos.slice(0, 3).map((recurso, index) => (
              <li key={index} className="text-xs text-gray-500 flex items-start gap-2">
                <span className="text-cyan-500 mt-0.5">•</span>
                <span>{recurso}</span>
              </li>
            ))}
            {mode.recursos.length > 3 && (
              <li className="text-xs text-gray-500 italic">
                + {mode.recursos.length - 3} mais recursos
              </li>
            )}
          </ul>
        </div>
      )}

      {!mode.ativo && (
        <div className="mt-4">
          <p className="text-sm text-gray-500 italic">
            Este modo estará disponível em breve
          </p>
        </div>
      )}

      {/* Indicador de seleção */}
      {isSelected && mode.ativo && (
        <div className="absolute inset-0 rounded-xl border-2 border-cyan-500 pointer-events-none" />
      )}
    </motion.button>
  );
}

```

---
#### `components/workflow/WorkflowTracker.tsx`

```
"use client";

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useWorkflowStore } from '@/lib/store';
import { CheckCircle2, Circle, Lock, FileInput, Brain, FileVideo, Film, Wrench, Upload } from 'lucide-react';

const workflowSteps = [
  { step: 1 as const, title: "Entrada", description: "Defina o tema e configure o projeto", icon: FileInput, path: "/step/1-input", color: "from-blue-500 to-cyan-500" },
  { step: 2 as const, title: "Inteligência", description: "Pesquisa e análise de conteúdo", icon: Brain, path: "/step/2-research", color: "from-purple-500 to-pink-500" },
  { step: 4 as const, title: "Proposta", description: "Geração de roteiro e conteúdo", icon: FileVideo, path: "/step/4-proposal", color: "from-green-500 to-emerald-500" },
  { step: 5 as const, title: "Studio", description: "Seleção de mídia e storyboard", icon: Film, path: "/step/5-studio", color: "from-orange-500 to-red-500" },
  { step: 5 as const, title: "Render", description: "Renderização do vídeo", icon: Wrench, path: "/step/5-studio", color: "from-yellow-500 to-orange-500" },
  { step: 6 as const, title: "Upload", description: "Publicação no YouTube", icon: Upload, path: "/step/6-upload", color: "from-indigo-500 to-purple-500" },
];

export default function WorkflowTracker() {
  const router = useRouter();
  const { currentStep, canNavigateToStep, context, research, proposal, storyboard, upload } = useWorkflowStore();
  const [hoveredStep, setHoveredStep] = useState<number | null>(null);

  const isStepCompleted = (step: 1 | 2 | 4 | 5 | 6): boolean => {
    switch (step) {
      case 1: return context !== null;
      case 2: return research !== null;
      case 4: return proposal !== null && proposal.allApproved === true;
      case 5: return storyboard !== null;
      case 6: return upload !== null;
      default: return false;
    }
  };

  const getStepStatus = (step: 1 | 2 | 4 | 5 | 6) => {
    if (isStepCompleted(step) && step < currentStep) return "completed";
    if (step === currentStep) return "current";
    if (canNavigateToStep(step)) return "available";
    return "locked";
  };

  const handleStepClick = (step: 1 | 2 | 4 | 5 | 6, path: string) => {
    const status = getStepStatus(step);
    if (status !== "locked") {
      router.push(path);
    }
  };

  const currentStepIndex = workflowSteps.findIndex(s => s.step === currentStep);
  const progressPercentage = (currentStepIndex / (workflowSteps.length - 1)) * 100;

  return (
    <div className="w-full max-w-7xl mx-auto px-6 pt-8 pb-4 bg-layer-1/95 backdrop-blur-sm border-b border-default sticky top-[65px] z-20">
      <div className="relative">
        {/* Progress Bar */}
        <div className="absolute top-8 left-0 right-0 h-1 bg-layer-3 rounded-full">
          <div
            className="h-full bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full transition-all duration-500"
            style={{ width: `${progressPercentage}%` }}
          />
        </div>

        {/* Steps */}
        <div className="grid grid-cols-6 gap-x-4">
          {workflowSteps.map((stepData, index) => {
            const status = getStepStatus(stepData.step);
            const isCompleted = status === "completed";
            const isCurrent = status === "current";
            const isLocked = status === "locked";
            const Icon = stepData.icon;

            return (
              <div key={index} className="relative flex flex-col items-center">
                <button
                  onClick={() => handleStepClick(stepData.step, stepData.path)}
                  onMouseEnter={() => setHoveredStep(index)}
                  onMouseLeave={() => setHoveredStep(null)}
                  disabled={isLocked}
                  className="relative w-full flex flex-col items-center cursor-pointer disabled:cursor-not-allowed transition-transform duration-200 hover:scale-110"
                >
                  <div
                    className={`relative z-10 w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 border-2 ${
                      isCompleted ? 'bg-green-500 border-green-400'
                      : isCurrent ? 'bg-gradient-to-br from-cyan-500 to-blue-500 border-white shadow-lg shadow-blue-500/50'
                      : isLocked ? 'bg-layer-2 border-subtle'
                      : 'bg-layer-1 border-default hover:border-active'
                    }`}
                  >
                    {isCompleted ? <CheckCircle2 className="w-8 h-8 text-white" />
                    : isCurrent ? <Icon className="w-8 h-8 text-white" />
                    : isLocked ? <Lock className="w-7 h-7 text-disabled" />
                    : <Icon className="w-7 h-7 text-muted" />}
                  </div>
                </button>
                <h3 className={`mt-3 text-xs font-semibold text-center transition-colors ${
                    isCurrent ? 'text-white' : 'text-muted'
                }`}>
                  {stepData.title}
                </h3>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
}

```

---
#### `lib/agents/adaptive-analysis-agent.ts`

```
/**
 * ============================================
 * ORION - Agente de Análise Adaptativa
 * ============================================
 *
 * Agente de IA que se adapta aos inputs disponíveis para
 * gerar análises e insights relevantes.
 */

import { ContextData, YouTubeStudioData, CompetitorData } from '@/types';
import { extractInsightsFromSpreadsheet } from '@/lib/services/spreadsheet.service';

export interface AdaptiveAnalysisResult {
  summary: string;
  insights: string[];
  suggestions: string[];
  topics: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  } | null;
}

/**
 * Analisa o contexto de forma adaptativa baseado nos inputs disponíveis
 */
export async function analyzeContext(context: ContextData): Promise<AdaptiveAnalysisResult> {
  const insights: string[] = [];
  const suggestions: string[] = [];
  const topics: string[] = [];
  const hooks: string[] = [];
  let structure = null;

  // Análise da planilha do YouTube Studio
  if (context.planilhaYouTubeStudio) {
    const spreadsheetInsights = analyzeSpreadsheetData(context.planilhaYouTubeStudio);
    insights.push(...spreadsheetInsights.insights);
    suggestions.push(...spreadsheetInsights.suggestions);
  }

  // Análise do tema fornecido
  if (context.theme) {
    const themeAnalysis = analyzeTheme(context.theme, context.tagsFoco);
    insights.push(...themeAnalysis.insights);
    topics.push(...themeAnalysis.topics);
    suggestions.push(...themeAnalysis.suggestions);
  }

  // Análise do concorrente
  if (context.dadosConcorrente) {
    const competitorAnalysis = analyzeCompetitor(context.dadosConcorrente);
    insights.push(...competitorAnalysis.insights);
    hooks.push(...competitorAnalysis.hooks);
    structure = competitorAnalysis.structure;
  }

  // Análise de transcrição
  if (context.transcricao) {
    const transcriptAnalysis = analyzeTranscript(context.transcricao);
    insights.push(...transcriptAnalysis.insights);
    hooks.push(...transcriptAnalysis.hooks);
    if (!structure) {
      structure = transcriptAnalysis.structure;
    }
  }

  // Cruzamento de dados
  const crossAnalysis = performCrossAnalysis(context);
  suggestions.push(...crossAnalysis);

  // Gerar resumo
  const summary = generateSummary(context, insights);

  return {
    summary,
    insights: [...new Set(insights)], // Remover duplicatas
    suggestions: [...new Set(suggestions)],
    topics: [...new Set(topics)],
    hooks: [...new Set(hooks)],
    structure
  };
}

/**
 * Analisa dados da planilha do YouTube Studio
 */
function analyzeSpreadsheetData(data: YouTubeStudioData): {
  insights: string[];
  suggestions: string[];
} {
  const insights = extractInsightsFromSpreadsheet(data);
  const suggestions: string[] = [];

  // Sugestões baseadas em performance
  if (data.avgCTR && data.avgCTR < 5) {
    suggestions.push('Teste thumbnails mais chamativas com cores vibrantes e rostos expressivos');
    suggestions.push('Use títulos que despertem curiosidade sem revelar tudo');
  }

  if (data.avgWatchTime && data.avgWatchTime < 180) {
    suggestions.push('Comece com um gancho forte nos primeiros 5 segundos');
    suggestions.push('Mantenha o ritmo dinâmico com cortes rápidos');
  }

  // Identificar padrões de sucesso
  if (data.topPerformingVideos && data.topPerformingVideos.length > 0) {
    const topTitles = data.topPerformingVideos.slice(0, 3).map(v => v.title);
    suggestions.push(`Padrões de sucesso identificados nos seus melhores vídeos: ${topTitles.join(', ')}`);
  }

  return { insights, suggestions };
}

/**
 * Analisa tema e tags de foco
 */
function analyzeTheme(theme: string, tagsFoco: string[]): {
  insights: string[];
  topics: string[];
  suggestions: string[];
} {
  const insights: string[] = [];
  const topics: string[] = [];
  const suggestions: string[] = [];

  // Expandir tema em subtópicos
  insights.push(`Tema principal: ${theme}`);

  // Processar tema para identificar subtópicos
  const themeWords = theme.toLowerCase().split(/\s+/);
  if (themeWords.length > 2) {
    topics.push(theme);
    // Sugerir variações
    suggestions.push(`Considere abordar diferentes ângulos: "Como", "Por que", "O que"`);
  }

  // Análise de tags de foco
  if (tagsFoco.length > 0) {
    insights.push(`Tags de foco: ${tagsFoco.join(', ')}`);
    topics.push(...tagsFoco);
    suggestions.push('Use as tags de foco como palavras-chave no título e descrição');
  }

  return { insights, topics, suggestions };
}

/**
 * Analisa vídeo concorrente
 */
function analyzeCompetitor(competitor: CompetitorData): {
  insights: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  };
} {
  const insights: string[] = [];
  const hooks: string[] = [];

  insights.push(`Vídeo de referência: "${competitor.videoTitle || 'Título não disponível'}"`);

  if (competitor.viewCount) {
    insights.push(`Performance: ${competitor.viewCount.toLocaleString()} visualizações`);
  }

  // Analisar tags do concorrente
  if (competitor.videoTags && competitor.videoTags.length > 0) {
    insights.push(`Tags usadas: ${competitor.videoTags.slice(0, 5).join(', ')}`);
  }

  // Extrair possíveis ganchos do título
  if (competitor.videoTitle) {
    const title = competitor.videoTitle;
    if (title.includes('?')) {
      hooks.push('Usar formato de pergunta no gancho');
    }
    if (/\d+/.test(title)) {
      hooks.push('Incluir números específicos para gerar curiosidade');
    }
    if (title.includes('!')) {
      hooks.push('Usar tom exclamativo para criar urgência');
    }
  }

  // Estrutura básica inferida
  const structure = {
    intro: competitor.videoTitle || 'Título chamativo',
    mainPoints: competitor.videoTags.slice(0, 3) || ['Ponto principal 1', 'Ponto principal 2', 'Ponto principal 3'],
    cta: 'Call-to-action forte'
  };

  return { insights, hooks, structure };
}

/**
 * Analisa transcrição de vídeo
 */
function analyzeTranscript(transcript: string): {
  insights: string[];
  hooks: string[];
  structure: {
    intro: string;
    mainPoints: string[];
    cta: string;
  };
} {
  const insights: string[] = [];
  const hooks: string[] = [];

  // Analisar comprimento
  const wordCount = transcript.split(/\s+/).length;
  insights.push(`Transcrição com aproximadamente ${wordCount} palavras`);

  // Identificar possíveis ganchos (primeiras frases)
  const sentences = transcript.split(/[.!?]+/).filter(s => s.trim().length > 0);
  if (sentences.length > 0) {
    const firstSentence = sentences[0].trim();
    hooks.push(`Possível gancho: "${firstSentence}"`);
  }

  // Identificar CTAs
  const lowerTranscript = transcript.toLowerCase();
  if (lowerTranscript.includes('inscreva') || lowerTranscript.includes('subscribe')) {
    insights.push('CTA de inscrição identificado no vídeo');
  }
  if (lowerTranscript.includes('like') || lowerTranscript.includes('curtir')) {
    insights.push('CTA de curtida identificado no vídeo');
  }
  if (lowerTranscript.includes('comentário') || lowerTranscript.includes('comment')) {
    insights.push('CTA de comentário identificado no vídeo');
  }

  // Estrutura básica
  const structure = {
    intro: sentences[0] || 'Introdução forte',
    mainPoints: sentences.slice(1, 4).filter(s => s.length > 20) || ['Ponto 1', 'Ponto 2', 'Ponto 3'],
    cta: 'Inscreva-se para mais conteúdo'
  };

  return { insights, hooks, structure };
}

/**
 * Realiza análise cruzada de múltiplas fontes
 */
function performCrossAnalysis(context: ContextData): string[] {
  const suggestions: string[] = [];

  // Cruzar dados de planilha com tema
  if (context.planilhaYouTubeStudio && context.theme) {
    suggestions.push(
      'Cruzando dados: Use insights de performance dos seus vídeos anteriores para guiar o novo conteúdo sobre este tema'
    );
  }

  // Cruzar concorrente com suas métricas
  if (context.dadosConcorrente && context.planilhaYouTubeStudio) {
    suggestions.push(
      'Análise competitiva: Compare as estratégias do concorrente com o que funciona no seu canal'
    );
  }

  // Cruzar transcrição com tema
  if (context.transcricao && context.theme) {
    suggestions.push(
      'Adapte a estrutura da transcrição fornecida para se adequar ao tema escolhido'
    );
  }

  return suggestions;
}

/**
 * Gera resumo da análise
 */
function generateSummary(context: ContextData, insights: string[]): string {
  const sources: string[] = [];

  if (context.planilhaYouTubeStudio) sources.push('análise de performance histórica');
  if (context.theme) sources.push('tema definido');
  if (context.dadosConcorrente) sources.push('análise de concorrente');
  if (context.transcricao) sources.push('transcrição de referência');

  const summary = `Análise completa realizada com base em: ${sources.join(', ')}.
    ${insights.length} insights identificados.
    ${context.tagsFoco.length > 0 ? `Foco em: ${context.tagsFoco.join(', ')}.` : ''}
    Modo de operação: ${context.mode}.`;

  return summary;
}

```

---
#### `lib/agents/index.ts`

```
export { runResearchAgent, type ResearchAgentResult } from './research-agent';
export { runScriptAgent, type ScriptAgentResult, type ResearchContext } from './script-agent';

```

---
#### `lib/agents/research-agent.ts`

```
import { google } from '@ai-sdk/google';
import { generateText } from 'ai';

/**
 * Research Agent using Gemini 2.0
 *
 * This agent performs deep research on YouTube trends,
 * channel analytics, and content opportunities.
 */

export interface ResearchAgentResult {
  summary: string;
  topPerformingTopics: string[];
  audienceInsights: string[];
  contentGaps: string[];
  trends: string[];
  competitors: string[];
}

export async function runResearchAgent(
  topic: string,
  channelContext?: string
): Promise<ResearchAgentResult> {
  const { text } = await generateText({
    model: google('gemini-2.0-flash-exp'),
    system: `You are an expert YouTube content research agent for the Brazilian market.
Your job is to analyze trends, audience behavior, and content opportunities.
Always provide actionable insights based on data patterns.
Respond in valid JSON format.`,
    prompt: `Research topic: "${topic}"
${channelContext ? `Channel context: ${channelContext}` : ''}

Analyze and return JSON with:
{
  "summary": "Brief research summary",
  "topPerformingTopics": ["topic1", "topic2", ...],
  "audienceInsights": ["insight1", "insight2", ...],
  "contentGaps": ["gap1", "gap2", ...],
  "trends": ["trend1", "trend2", ...],
  "competitors": ["competitor insight 1", ...]
}`,
  });

  const jsonMatch = text.match(/\{[\s\S]*\}/);
  if (jsonMatch) {
    return JSON.parse(jsonMatch[0]);
  }

  return {
    summary: text,
    topPerformingTopics: [],
    audienceInsights: [],
    contentGaps: [],
    trends: [],
    competitors: [],
  };
}

```

---
#### `lib/agents/script-agent.ts`

```
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

/**
 * Script Agent using Claude
 *
 * This agent creates engaging YouTube scripts with:
 * - Strong hooks
 * - Value-packed content
 * - Clear CTAs
 * - SEO-optimized titles
 */

export interface ScriptAgentResult {
  title: string;
  hook: string;
  sections: {
    title: string;
    content: string;
  }[];
  cta: string;
  fullScript: string;
  metadata: {
    wordCount: number;
    estimatedDuration: string;
    tone: string;
  };
}

export interface ResearchContext {
  summary?: string;
  topPerformingTopics?: string[];
  audienceInsights?: string[];
  trends?: string[];
}

export async function runScriptAgent(
  topic: string,
  research: ResearchContext
): Promise<ScriptAgentResult> {
  const { text } = await generateText({
    model: anthropic('claude-sonnet-4-20250514'),
    system: `You are an expert YouTube scriptwriter for the Brazilian market.
Create engaging, retention-optimized scripts that hook viewers in the first 30 seconds.
Always respond in valid JSON format.`,
    prompt: `Create a YouTube script for: "${topic}"

Research insights:
- Top topics: ${research.topPerformingTopics?.join(', ') || 'N/A'}
- Audience insights: ${research.audienceInsights?.join(', ') || 'N/A'}
- Trends: ${research.trends?.join(', ') || 'N/A'}
- Summary: ${research.summary || 'N/A'}

Create a complete script with:
1. Attention-grabbing hook (first 30 seconds)
2. 3-5 main content sections
3. Strong call-to-action

Return JSON:
{
  "title": "SEO-optimized title",
  "hook": "Opening hook text",
  "sections": [
    {"title": "Section 1", "content": "Section content..."},
    {"title": "Section 2", "content": "Section content..."}
  ],
  "cta": "Call to action text",
  "fullScript": "Complete script text",
  "metadata": {
    "wordCount": 1500,
    "estimatedDuration": "10-12 minutes",
    "tone": "engaging and educational"
  }
}`,
  });

  const jsonMatch = text.match(/\{[\s\S]*\}/);
  if (jsonMatch) {
    return JSON.parse(jsonMatch[0]);
  }

  return {
    title: topic,
    hook: '',
    sections: [],
    cta: '',
    fullScript: text,
    metadata: {
      wordCount: text.split(' ').length,
      estimatedDuration: 'unknown',
      tone: 'neutral',
    },
  };
}

```

---
#### `lib/ai.ts`

```
import { AIProvider, AIModelOption, Diretriz } from "@/types";

export const AI_MODELS: Record<AIProvider, AIModelOption[]> = {
  openai: [
    { id: "gpt-4o", name: "GPT-4o", provider: "openai" },
    { id: "gpt-4o-mini", name: "GPT-4o Mini", provider: "openai" },
    { id: "gpt-4-turbo", name: "GPT-4 Turbo", provider: "openai" },
  ],
  google: [
    { id: "gemini-1.5-pro", name: "Gemini 1.5 Pro", provider: "google" },
    { id: "gemini-1.5-flash", name: "Gemini 1.5 Flash", provider: "google" },
    { id: "gemini-2.0-flash-exp", name: "Gemini 2.0 Flash", provider: "google" },
  ],
  anthropic: [
    { id: "claude-3-5-sonnet-latest", name: "Claude 3.5 Sonnet", provider: "anthropic" },
    { id: "claude-3-5-haiku-latest", name: "Claude 3.5 Haiku", provider: "anthropic" },
  ],
};

export function getModelsForProvider(provider: AIProvider): AIModelOption[] {
  return AI_MODELS[provider] || [];
}

export function getProviderName(provider: AIProvider): string {
  const names: Record<AIProvider, string> = {
    openai: "OpenAI",
    google: "Google Gemini",
    anthropic: "Anthropic Claude",
  };
  return names[provider];
}

export function buildSystemPromptWithDiretrizes(
  basePrompt: string,
  diretrizes: Diretriz[],
  scope: Diretriz["appliesTo"][number]
): string {
  const applicableDiretrizes = diretrizes.filter(
    (d) => d.active && d.appliesTo.includes(scope)
  );

  if (applicableDiretrizes.length === 0) {
    return basePrompt;
  }

  const diretrizesText = applicableDiretrizes
    .map((d) => `### ${d.title}\n${d.systemPrompt}`)
    .join("\n\n");

  return `${basePrompt}

## Diretrizes Adicionais (MUST FOLLOW):
${diretrizesText}`;
}

export interface GenerationRequest {
  provider: AIProvider;
  model: string;
  systemPrompt: string;
  userPrompt: string;
  temperature?: number;
}

export async function generateWithAI(request: GenerationRequest): Promise<string> {
  const response = await fetch("/api/ai/generate", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI generation failed");
  }

  const data = await response.json();
  return data.text;
}

export async function streamWithAI(
  request: GenerationRequest,
  onChunk: (chunk: string) => void
): Promise<void> {
  const response = await fetch("/api/ai/stream", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(request),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error || "AI streaming failed");
  }

  const reader = response.body?.getReader();
  if (!reader) throw new Error("No response body");

  const decoder = new TextDecoder();
  while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    const chunk = decoder.decode(value);
    onChunk(chunk);
  }
}

```

---
#### `lib/api-keys-store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";

export interface StoredAPIKeys {
  youtube_api_key: string;
  youtube_channel_id: string;
  openai_api_key: string;
  google_api_key: string;
  anthropic_api_key: string;
  pexels_api_key: string;
  pixabay_api_key: string;
  unsplash_api_key: string;
  json2video_api_key: string;
  elevenlabs_api_key: string;
  tavily_api_key: string;
  replicate_api_key: string;
  stability_api_key: string;
}

export interface APIKeyTestResult {
  key: keyof StoredAPIKeys;
  success: boolean;
  message: string;
}

interface APIKeysStore {
  keys: StoredAPIKeys;
  testedKeys: Record<keyof StoredAPIKeys, boolean>;

  setKey: (key: keyof StoredAPIKeys, value: string) => void;
  setKeys: (keys: Partial<StoredAPIKeys>) => void;
  markKeyTested: (key: keyof StoredAPIKeys, success: boolean) => void;
  clearKey: (key: keyof StoredAPIKeys) => void;
  clearAllKeys: () => void;
  getKey: (key: keyof StoredAPIKeys) => string;
  hasKey: (key: keyof StoredAPIKeys) => boolean;
}

const defaultKeys: StoredAPIKeys = {
  youtube_api_key: "",
  youtube_channel_id: "",
  openai_api_key: "",
  google_api_key: "",
  anthropic_api_key: "",
  pexels_api_key: "",
  pixabay_api_key: "",
  unsplash_api_key: "",
  json2video_api_key: "",
  elevenlabs_api_key: "",
  tavily_api_key: "",
  replicate_api_key: "",
  stability_api_key: "",
};

const defaultTestedKeys: Record<keyof StoredAPIKeys, boolean> = {
  youtube_api_key: false,
  youtube_channel_id: false,
  openai_api_key: false,
  google_api_key: false,
  anthropic_api_key: false,
  pexels_api_key: false,
  pixabay_api_key: false,
  unsplash_api_key: false,
  json2video_api_key: false,
  elevenlabs_api_key: false,
  tavily_api_key: false,
  replicate_api_key: false,
  stability_api_key: false,
};

export const useAPIKeysStore = create<APIKeysStore>()(
  persist(
    (set, get) => ({
      keys: defaultKeys,
      testedKeys: defaultTestedKeys,

      setKey: (key, value) =>
        set((state) => ({
          keys: { ...state.keys, [key]: value },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      setKeys: (keys) =>
        set((state) => ({
          keys: { ...state.keys, ...keys },
        })),

      markKeyTested: (key, success) =>
        set((state) => ({
          testedKeys: { ...state.testedKeys, [key]: success },
        })),

      clearKey: (key) =>
        set((state) => ({
          keys: { ...state.keys, [key]: "" },
          testedKeys: { ...state.testedKeys, [key]: false },
        })),

      clearAllKeys: () =>
        set({
          keys: defaultKeys,
          testedKeys: defaultTestedKeys,
        }),

      getKey: (key) => get().keys[key],

      hasKey: (key) => !!get().keys[key],
    }),
    {
      name: "orion-api-keys",
      storage: createJSONStorage(() => sessionStorage), // Usar sessionStorage para segurança
    }
  )
);

// Helper para obter headers com as chaves da sessão
export function getAPIKeyHeaders(keys: StoredAPIKeys): Record<string, string> {
  const headers: Record<string, string> = {};

  if (keys.youtube_api_key) headers["x-youtube-api-key"] = keys.youtube_api_key;
  if (keys.youtube_channel_id) headers["x-youtube-channel-id"] = keys.youtube_channel_id;
  if (keys.openai_api_key) headers["x-openai-api-key"] = keys.openai_api_key;
  if (keys.google_api_key) headers["x-google-api-key"] = keys.google_api_key;
  if (keys.anthropic_api_key) headers["x-anthropic-api-key"] = keys.anthropic_api_key;
  if (keys.pexels_api_key) headers["x-pexels-api-key"] = keys.pexels_api_key;
  if (keys.pixabay_api_key) headers["x-pixabay-api-key"] = keys.pixabay_api_key;
  if (keys.unsplash_api_key) headers["x-unsplash-api-key"] = keys.unsplash_api_key;
  if (keys.json2video_api_key) headers["x-json2video-api-key"] = keys.json2video_api_key;
  if (keys.elevenlabs_api_key) headers["x-elevenlabs-api-key"] = keys.elevenlabs_api_key;
  if (keys.tavily_api_key) headers["x-tavily-api-key"] = keys.tavily_api_key;
  if (keys.replicate_api_key) headers["x-replicate-api-key"] = keys.replicate_api_key;
  if (keys.stability_api_key) headers["x-stability-api-key"] = keys.stability_api_key;

  return headers;
}

```

---
#### `lib/api-keys.ts`

```
import { APIKeyStatus } from "@/types";
import { StoredAPIKeys } from "./api-keys-store";

// Check API keys from server (env vars)
export async function checkServerAPIKeys(): Promise<APIKeyStatus> {
  try {
    const response = await fetch("/api/config/keys");
    if (!response.ok) {
      throw new Error("Failed to fetch API key status");
    }
    return await response.json();
  } catch (error) {
    console.error("Error checking API keys:", error);
    return getEmptyStatus();
  }
}

// Get empty status
function getEmptyStatus(): APIKeyStatus {
  return {
    youtube: false,
    openai: false,
    google: false,
    anthropic: false,
    pexels: false,
    pixabay: false,
    unsplash: false,
    json2video: false,
    elevenlabs: false,
    tavily: false,
    replicate: false,
    stability: false,
  };
}

// Check API keys from client storage
export function checkClientAPIKeys(keys: StoredAPIKeys): APIKeyStatus {
  return {
    youtube: !!(keys.youtube_api_key && keys.youtube_channel_id),
    openai: !!keys.openai_api_key,
    google: !!keys.google_api_key,
    anthropic: !!keys.anthropic_api_key,
    pexels: !!keys.pexels_api_key,
    pixabay: !!keys.pixabay_api_key,
    unsplash: !!keys.unsplash_api_key,
    json2video: !!keys.json2video_api_key,
    elevenlabs: !!keys.elevenlabs_api_key,
    tavily: !!keys.tavily_api_key,
    replicate: !!keys.replicate_api_key,
    stability: !!keys.stability_api_key,
  };
}

// Merge server and client status (client takes precedence if key exists)
export function mergeAPIKeyStatus(server: APIKeyStatus, client: APIKeyStatus): APIKeyStatus {
  return {
    youtube: server.youtube || client.youtube,
    openai: server.openai || client.openai,
    google: server.google || client.google,
    anthropic: server.anthropic || client.anthropic,
    pexels: server.pexels || client.pexels,
    pixabay: server.pixabay || client.pixabay,
    unsplash: server.unsplash || client.unsplash,
    json2video: server.json2video || client.json2video,
    elevenlabs: server.elevenlabs || client.elevenlabs,
    tavily: server.tavily || client.tavily,
    replicate: server.replicate || client.replicate,
    stability: server.stability || client.stability,
  };
}

// Combined check - gets status from both server and client
export async function checkAPIKeys(): Promise<APIKeyStatus> {
  // Get server status
  const serverStatus = await checkServerAPIKeys();

  // Get client keys from store (need to access outside React)
  let clientStatus = getEmptyStatus();

  if (typeof window !== "undefined") {
    try {
      const stored = sessionStorage.getItem("orion-api-keys");
      if (stored) {
        const parsed = JSON.parse(stored);
        if (parsed.state?.keys) {
          clientStatus = checkClientAPIKeys(parsed.state.keys);
        }
      }
    } catch (e) {
      console.error("Error reading client keys:", e);
    }
  }

  // Merge both
  return mergeAPIKeyStatus(serverStatus, clientStatus);
}

export function getRequiredKeysForStep(step: number): (keyof APIKeyStatus)[] {
  switch (step) {
    case 1:
      return ["youtube"];
    case 2:
      return ["openai", "google", "anthropic"]; // At least one AI provider
    case 4:
      return ["openai", "google", "anthropic"]; // AI for generation
    case 5:
      return ["pexels", "pixabay", "unsplash", "json2video"];
    case 6:
      return ["youtube"];
    default:
      return [];
  }
}

export function hasRequiredKeys(
  status: APIKeyStatus,
  step: number
): { hasAll: boolean; missing: string[] } {
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const _required = getRequiredKeysForStep(step);
  const missing: string[] = [];

  // For AI providers, we need at least one
  if (step === 2 || step === 4) {
    const aiProviders = ["openai", "google", "anthropic"] as const;
    const hasAnyAI = aiProviders.some((provider) => status[provider]);
    if (!hasAnyAI) {
      missing.push("At least one AI provider (OpenAI, Google, or Anthropic)");
    }
  }

  // For media, we need at least one
  if (step === 5) {
    const mediaProviders = ["pexels", "pixabay", "unsplash"] as const;
    const hasAnyMedia = mediaProviders.some((provider) => status[provider]);
    if (!hasAnyMedia) {
      missing.push("At least one media provider (Pexels, Pixabay, or Unsplash)");
    }
    if (!status.json2video) {
      missing.push("JSON2Video");
    }
  }

  // YouTube is always required for steps 1 and 6
  if ((step === 1 || step === 6) && !status.youtube) {
    missing.push("YouTube API");
  }

  return {
    hasAll: missing.length === 0,
    missing,
  };
}

```

---
#### `lib/branding.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { BrandingConfig } from '@/types';

const BRANDING_FILE = path.join(process.cwd(), 'data', 'branding.json');

/**
 * Get branding configuration
 */
export async function getBrandingConfig(): Promise<BrandingConfig> {
  try {
    const fileContent = await fs.readFile(BRANDING_FILE, 'utf-8');
    return JSON.parse(fileContent) as BrandingConfig;
  } catch (error) {
    console.error('Failed to read branding config:', error);
    // Return default branding if file doesn't exist
    return {
      systemName: 'ORION',
      logoUrl: null,
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update branding configuration
 */
export async function updateBrandingConfig(
  updates: Partial<Omit<BrandingConfig, 'updatedAt'>>
): Promise<BrandingConfig> {
  try {
    const currentConfig = await getBrandingConfig();

    const updatedConfig: BrandingConfig = {
      ...currentConfig,
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(BRANDING_FILE, JSON.stringify(updatedConfig, null, 2), 'utf-8');

    return updatedConfig;
  } catch (error) {
    console.error('Failed to update branding config:', error);
    throw error;
  }
}

/**
 * Reset branding to default (ORION)
 */
export async function resetBrandingConfig(): Promise<BrandingConfig> {
  const defaultConfig: BrandingConfig = {
    systemName: 'ORION',
    logoUrl: null,
    updatedAt: new Date().toISOString(),
  };

  try {
    await fs.writeFile(BRANDING_FILE, JSON.stringify(defaultConfig, null, 2), 'utf-8');
    return defaultConfig;
  } catch (error) {
    console.error('Failed to reset branding config:', error);
    throw error;
  }
}

```

---
#### `lib/db/index.ts`

```
export { prisma, default as db } from './prisma';

```

---
#### `lib/db/prisma.ts`

```
import { PrismaClient } from '@prisma/client';

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
  });

if (process.env.NODE_ENV !== 'production') {
  globalForPrisma.prisma = prisma;
}

export default prisma;

```

---
#### `lib/design-tokens.ts`

```
/**
 * ============================================
 * ORION Design System - Design Tokens
 * ============================================
 *
 * Single Source of Truth para cores, tipografia,
 * espaçamentos e motion do sistema ORION.
 *
 * Paleta baseada no logo oficial:
 * - Azul profundo como base
 * - Vermelho ORION como acento crítico
 * - Cyan/Indigo para estados ativos
 */

// ============================================
// CORES - PALETA ORION
// ============================================

/**
 * Cores de fundo em camadas (layers)
 * Do mais profundo ao mais elevado
 */
export const backgrounds = {
  layer0: '#050A12',  // Base mais profunda - fundo principal
  layer1: '#0A1628',  // Cards, sidebar - azul muito escuro
  layer2: '#0F2341',  // Elementos elevados
  layer3: '#1A3A5C',  // Hover states, menus
  layer4: '#245177',  // Elementos em destaque
} as const;

/**
 * Cores de superfície (para cards e painéis)
 */
export const surfaces = {
  default: 'rgba(10, 22, 40, 0.8)',    // Card padrão com transparência
  elevated: 'rgba(15, 35, 65, 0.9)',   // Card elevado
  glass: 'rgba(26, 58, 92, 0.4)',      // Glassmorphism
  glassSubtle: 'rgba(10, 22, 40, 0.6)', // Glass mais sutil
  overlay: 'rgba(5, 10, 18, 0.8)',     // Overlay para modais
} as const;

/**
 * Cores de borda
 */
export const borders = {
  subtle: 'rgba(30, 58, 95, 0.3)',      // Borda sutil
  default: 'rgba(30, 58, 95, 0.5)',     // Borda padrão
  strong: 'rgba(59, 130, 246, 0.4)',    // Borda com destaque
  active: 'rgba(6, 182, 212, 0.5)',     // Borda ativa (cyan)
  glow: 'rgba(59, 130, 246, 0.6)',      // Borda com glow
} as const;

/**
 * Cores de texto
 */
export const text = {
  primary: '#F0F4F8',     // Texto principal - quase branco
  secondary: '#94A3B8',   // Texto secundário - slate-400
  muted: '#64748B',       // Texto muted - slate-500
  disabled: '#475569',    // Texto desabilitado - slate-600
  inverse: '#0A1628',     // Texto em fundos claros
} as const;

/**
 * Cores da marca ORION
 */
export const brand = {
  // Azul ORION - cor principal
  blue: {
    50: '#E8F4FC',
    100: '#C5E4F8',
    200: '#8EC8F2',
    300: '#57ACEB',
    400: '#3B82F6',   // Azul principal
    500: '#2563EB',
    600: '#1D4ED8',
    700: '#1E3A5F',   // Azul profundo (do logo)
    800: '#0F2341',
    900: '#0A1628',   // Azul mais escuro
    950: '#050A12',
  },
  // Vermelho ORION - acento crítico (do logo YouTube)
  red: {
    50: '#FEF2F2',
    100: '#FEE2E2',
    200: '#FECACA',
    300: '#FCA5A5',
    400: '#F87171',
    500: '#EF4444',   // Vermelho principal
    600: '#DC2626',
    700: '#B91C1C',
    800: '#991B1B',
    900: '#7F1D1D',
    950: '#450A0A',
  },
} as const;

/**
 * Cores de acento
 */
export const accent = {
  // Cyan - estados ativos, links, foco
  cyan: {
    50: '#ECFEFF',
    100: '#CFFAFE',
    200: '#A5F3FC',
    300: '#67E8F9',
    400: '#22D3EE',
    500: '#06B6D4',   // Cyan principal
    600: '#0891B2',
    700: '#0E7490',
    800: '#155E75',
    900: '#164E63',
    950: '#083344',
  },
  // Indigo - estados secundários
  indigo: {
    50: '#EEF2FF',
    100: '#E0E7FF',
    200: '#C7D2FE',
    300: '#A5B4FC',
    400: '#818CF8',
    500: '#6366F1',   // Indigo principal
    600: '#4F46E5',
    700: '#4338CA',
    800: '#3730A3',
    900: '#312E81',
    950: '#1E1B4B',
  },
  // Violet - elementos decorativos
  violet: {
    50: '#F5F3FF',
    100: '#EDE9FE',
    200: '#DDD6FE',
    300: '#C4B5FD',
    400: '#A78BFA',
    500: '#8B5CF6',   // Violet principal
    600: '#7C3AED',
    700: '#6D28D9',
    800: '#5B21B6',
    900: '#4C1D95',
    950: '#2E1065',
  },
} as const;

/**
 * Cores semânticas (feedback)
 */
export const semantic = {
  success: {
    bg: 'rgba(16, 185, 129, 0.1)',      // Fundo verde
    border: 'rgba(16, 185, 129, 0.3)',  // Borda verde
    text: '#34D399',                     // Texto verde claro
    solid: '#10B981',                    // Solid verde
  },
  warning: {
    bg: 'rgba(245, 158, 11, 0.1)',
    border: 'rgba(245, 158, 11, 0.3)',
    text: '#FBBF24',
    solid: '#F59E0B',
  },
  error: {
    bg: 'rgba(239, 68, 68, 0.1)',
    border: 'rgba(239, 68, 68, 0.3)',
    text: '#F87171',
    solid: '#EF4444',
  },
  info: {
    bg: 'rgba(59, 130, 246, 0.1)',
    border: 'rgba(59, 130, 246, 0.3)',
    text: '#60A5FA',
    solid: '#3B82F6',
  },
} as const;

/**
 * Cores de glow e highlight
 */
export const effects = {
  glowBlue: 'rgba(59, 130, 246, 0.4)',
  glowCyan: 'rgba(6, 182, 212, 0.4)',
  glowViolet: 'rgba(139, 92, 246, 0.4)',
  glowRed: 'rgba(239, 68, 68, 0.3)',
  highlight: 'rgba(6, 182, 212, 0.1)',
} as const;

// ============================================
// GRADIENTES
// ============================================

export const gradients = {
  // Gradientes principais ORION
  orionPrimary: 'linear-gradient(135deg, #0A1628 0%, #1E3A5F 50%, #3B82F6 100%)',
  orionDark: 'linear-gradient(180deg, #050A12 0%, #0A1628 100%)',
  orionDeep: 'linear-gradient(135deg, #050A12 0%, #0F2341 100%)',

  // Gradientes de acento
  cyanBlue: 'linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%)',
  blueIndigo: 'linear-gradient(135deg, #3B82F6 0%, #6366F1 100%)',
  violetBlue: 'linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%)',

  // Gradientes de destaque
  cyanGlow: 'linear-gradient(180deg, rgba(6, 182, 212, 0.2) 0%, transparent 100%)',
  blueGlow: 'linear-gradient(180deg, rgba(59, 130, 246, 0.2) 0%, transparent 100%)',

  // Gradiente de borda animada
  borderGradient: 'linear-gradient(90deg, #3B82F6, #06B6D4, #8B5CF6, #3B82F6)',

  // Gradientes sutis para cards
  cardSubtle: 'linear-gradient(180deg, rgba(15, 35, 65, 0.5) 0%, rgba(10, 22, 40, 0.8) 100%)',
  cardHover: 'linear-gradient(180deg, rgba(26, 58, 92, 0.4) 0%, rgba(15, 35, 65, 0.6) 100%)',

  // Mesh gradients para fundos
  meshBackground: 'radial-gradient(at 40% 20%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 80% 80%, rgba(6, 182, 212, 0.1) 0px, transparent 50%)',
} as const;

// ============================================
// TIPOGRAFIA
// ============================================

export const typography = {
  fonts: {
    sans: '"Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
    mono: '"JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, monospace',
  },

  // Tamanhos de fonte (em rem)
  sizes: {
    xs: '0.75rem',      // 12px
    sm: '0.875rem',     // 14px
    base: '1rem',       // 16px
    lg: '1.125rem',     // 18px
    xl: '1.25rem',      // 20px
    '2xl': '1.5rem',    // 24px
    '3xl': '1.875rem',  // 30px
    '4xl': '2.25rem',   // 36px
    '5xl': '3rem',      // 48px
    '6xl': '3.75rem',   // 60px
  },

  // Line heights
  lineHeights: {
    none: '1',
    tight: '1.25',
    snug: '1.375',
    normal: '1.5',
    relaxed: '1.625',
    loose: '2',
  },

  // Font weights
  weights: {
    normal: '400',
    medium: '500',
    semibold: '600',
    bold: '700',
  },

  // Letter spacing
  tracking: {
    tighter: '-0.05em',
    tight: '-0.025em',
    normal: '0',
    wide: '0.025em',
    wider: '0.05em',
  },
} as const;

// Presets de tipografia para uso rápido
export const textStyles = {
  // Display - títulos grandes
  displayLg: {
    fontSize: typography.sizes['5xl'],
    fontWeight: typography.weights.bold,
    lineHeight: typography.lineHeights.tight,
    letterSpacing: typography.tracking.tight,
  },
  displayMd: {
    fontSize: typography.sizes['4xl'],
    fontWeight: typography.weights.bold,
    lineHeight: typography.lineHeights.tight,
    letterSpacing: typography.tracking.tight,
  },

  // Headings
  h1: {
    fontSize: typography.sizes['3xl'],
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.tight,
  },
  h2: {
    fontSize: typography.sizes['2xl'],
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.tight,
  },
  h3: {
    fontSize: typography.sizes.xl,
    fontWeight: typography.weights.semibold,
    lineHeight: typography.lineHeights.snug,
  },
  h4: {
    fontSize: typography.sizes.lg,
    fontWeight: typography.weights.medium,
    lineHeight: typography.lineHeights.snug,
  },

  // Body text
  bodyLg: {
    fontSize: typography.sizes.lg,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.relaxed,
  },
  bodyMd: {
    fontSize: typography.sizes.base,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },
  bodySm: {
    fontSize: typography.sizes.sm,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },

  // Labels e captions
  label: {
    fontSize: typography.sizes.sm,
    fontWeight: typography.weights.medium,
    letterSpacing: typography.tracking.wide,
  },
  caption: {
    fontSize: typography.sizes.xs,
    fontWeight: typography.weights.normal,
    lineHeight: typography.lineHeights.normal,
  },

  // Code
  code: {
    fontFamily: typography.fonts.mono,
    fontSize: typography.sizes.sm,
  },
} as const;

// ============================================
// ESPAÇAMENTO
// ============================================

// Base: 4px
export const spacing = {
  px: '1px',
  0: '0',
  0.5: '0.125rem',  // 2px
  1: '0.25rem',     // 4px
  1.5: '0.375rem',  // 6px
  2: '0.5rem',      // 8px
  2.5: '0.625rem',  // 10px
  3: '0.75rem',     // 12px
  3.5: '0.875rem',  // 14px
  4: '1rem',        // 16px
  5: '1.25rem',     // 20px
  6: '1.5rem',      // 24px
  7: '1.75rem',     // 28px
  8: '2rem',        // 32px
  9: '2.25rem',     // 36px
  10: '2.5rem',     // 40px
  11: '2.75rem',    // 44px
  12: '3rem',       // 48px
  14: '3.5rem',     // 56px
  16: '4rem',       // 64px
  20: '5rem',       // 80px
  24: '6rem',       // 96px
  28: '7rem',       // 112px
  32: '8rem',       // 128px
} as const;

// Espaçamentos semânticos
export const componentSpacing = {
  // Padding interno de componentes
  cardPadding: spacing[6],         // 24px
  cardPaddingSm: spacing[4],       // 16px
  cardPaddingLg: spacing[8],       // 32px

  buttonPadding: spacing[4],       // 16px horizontal
  buttonPaddingY: spacing[2.5],    // 10px vertical

  inputPadding: spacing[4],        // 16px
  inputPaddingY: spacing[3],       // 12px

  // Gaps
  gridGap: spacing[6],             // 24px
  gridGapSm: spacing[4],           // 16px
  stackGap: spacing[4],            // 16px
  inlineGap: spacing[2],           // 8px

  // Section spacing
  sectionGap: spacing[16],         // 64px
  sectionGapSm: spacing[10],       // 40px

  // Page margins
  pageMargin: spacing[8],          // 32px
  pageMarginMobile: spacing[4],    // 16px
} as const;

// ============================================
// BORDER RADIUS
// ============================================

export const radius = {
  none: '0',
  sm: '0.25rem',    // 4px
  md: '0.375rem',   // 6px
  lg: '0.5rem',     // 8px
  xl: '0.75rem',    // 12px
  '2xl': '1rem',    // 16px
  '3xl': '1.5rem',  // 24px
  full: '9999px',
} as const;

// ============================================
// SOMBRAS
// ============================================

export const shadows = {
  none: 'none',
  sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
  md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)',
  lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1)',
  xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)',
  '2xl': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
  inner: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.05)',

  // Shadows com cor
  glowBlue: '0 0 20px 0 rgba(59, 130, 246, 0.3)',
  glowCyan: '0 0 20px 0 rgba(6, 182, 212, 0.3)',
  glowViolet: '0 0 20px 0 rgba(139, 92, 246, 0.3)',

  // Card shadows
  card: '0 4px 20px 0 rgba(0, 0, 0, 0.3)',
  cardHover: '0 8px 30px 0 rgba(0, 0, 0, 0.4), 0 0 20px 0 rgba(59, 130, 246, 0.1)',
  cardElevated: '0 12px 40px 0 rgba(0, 0, 0, 0.5)',
} as const;

// ============================================
// MOTION / ANIMAÇÃO
// ============================================

export const motion = {
  // Durations
  duration: {
    instant: '0ms',
    fast: '150ms',
    normal: '200ms',
    slow: '300ms',
    slower: '500ms',
  },

  // Easings
  easing: {
    linear: 'linear',
    easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
    easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
    easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    spring: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
  },

  // Transitions pré-definidos
  transitions: {
    fast: '150ms cubic-bezier(0.4, 0, 0.2, 1)',
    normal: '200ms cubic-bezier(0.4, 0, 0.2, 1)',
    slow: '300ms cubic-bezier(0.4, 0, 0.2, 1)',
    spring: '300ms cubic-bezier(0.175, 0.885, 0.32, 1.275)',
  },
} as const;

// Presets de animação para Framer Motion
export const motionPresets = {
  fadeIn: {
    initial: { opacity: 0 },
    animate: { opacity: 1 },
    exit: { opacity: 0 },
    transition: { duration: 0.2 },
  },
  fadeInUp: {
    initial: { opacity: 0, y: 10 },
    animate: { opacity: 1, y: 0 },
    exit: { opacity: 0, y: 10 },
    transition: { duration: 0.3 },
  },
  fadeInDown: {
    initial: { opacity: 0, y: -10 },
    animate: { opacity: 1, y: 0 },
    exit: { opacity: 0, y: -10 },
    transition: { duration: 0.3 },
  },
  scaleIn: {
    initial: { opacity: 0, scale: 0.95 },
    animate: { opacity: 1, scale: 1 },
    exit: { opacity: 0, scale: 0.95 },
    transition: { duration: 0.2 },
  },
  slideInLeft: {
    initial: { opacity: 0, x: -20 },
    animate: { opacity: 1, x: 0 },
    exit: { opacity: 0, x: -20 },
    transition: { duration: 0.3 },
  },
  slideInRight: {
    initial: { opacity: 0, x: 20 },
    animate: { opacity: 1, x: 0 },
    exit: { opacity: 0, x: 20 },
    transition: { duration: 0.3 },
  },
  staggerChildren: {
    animate: {
      transition: {
        staggerChildren: 0.1,
      },
    },
  },
} as const;

// ============================================
// Z-INDEX
// ============================================

export const zIndex = {
  hide: -1,
  base: 0,
  raised: 10,
  dropdown: 100,
  sticky: 200,
  overlay: 300,
  modal: 400,
  popover: 500,
  toast: 600,
  tooltip: 700,
  max: 9999,
} as const;

// ============================================
// BREAKPOINTS
// ============================================

export const breakpoints = {
  sm: '640px',
  md: '768px',
  lg: '1024px',
  xl: '1280px',
  '2xl': '1536px',
} as const;

// ============================================
// COMPONENTES - CONFIGURAÇÕES PADRÃO
// ============================================

export const components = {
  button: {
    height: {
      sm: '32px',
      md: '40px',
      lg: '48px',
    },
    radius: radius.lg,
  },
  input: {
    height: {
      sm: '32px',
      md: '40px',
      lg: '48px',
    },
    radius: radius.lg,
  },
  card: {
    radius: radius.xl,
    padding: componentSpacing.cardPadding,
  },
  badge: {
    radius: radius.full,
    height: '24px',
  },
  modal: {
    radius: radius['2xl'],
    maxWidth: '500px',
  },
} as const;

// ============================================
// EXPORTS CONSOLIDADOS
// ============================================

export const tokens = {
  colors: {
    backgrounds,
    surfaces,
    borders,
    text,
    brand,
    accent,
    semantic,
    effects,
  },
  gradients,
  typography,
  textStyles,
  spacing,
  componentSpacing,
  radius,
  shadows,
  motion,
  motionPresets,
  zIndex,
  breakpoints,
  components,
} as const;

export default tokens;

```

---
#### `lib/docs-manager.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { DocPage, DocsData, DocCategory } from '@/types';

const DOCS_FILE = path.join(process.cwd(), 'data', 'docs-content.json');

/**
 * Get all documentation pages
 */
export async function getAllDocs(): Promise<DocsData> {
  try {
    const fileContent = await fs.readFile(DOCS_FILE, 'utf-8');
    return JSON.parse(fileContent) as DocsData;
  } catch (error) {
    console.error('Failed to read docs:', error);
    return {
      pages: [],
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Get a specific doc page by ID
 */
export async function getDocById(id: string): Promise<DocPage | null> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages.find(page => page.id === id) || null;
  } catch (error) {
    console.error('Failed to get doc by ID:', error);
    return null;
  }
}

/**
 * Get docs by category
 */
export async function getDocsByCategory(category: DocCategory): Promise<DocPage[]> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages
      .filter(page => page.category === category)
      .sort((a, b) => a.order - b.order);
  } catch (error) {
    console.error('Failed to get docs by category:', error);
    return [];
  }
}

/**
 * Get visible docs only
 */
export async function getVisibleDocs(): Promise<DocPage[]> {
  try {
    const docsData = await getAllDocs();
    return docsData.pages.filter(page => page.visible);
  } catch (error) {
    console.error('Failed to get visible docs:', error);
    return [];
  }
}

/**
 * Create a new doc page
 */
export async function createDoc(
  doc: Omit<DocPage, 'id' | 'createdAt' | 'updatedAt'>
): Promise<DocPage> {
  try {
    const docsData = await getAllDocs();

    const newDoc: DocPage = {
      ...doc,
      id: `doc-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    };

    docsData.pages.push(newDoc);
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return newDoc;
  } catch (error) {
    console.error('Failed to create doc:', error);
    throw error;
  }
}

/**
 * Update an existing doc page
 */
export async function updateDoc(
  id: string,
  updates: Partial<Omit<DocPage, 'id' | 'createdAt'>>
): Promise<DocPage | null> {
  try {
    const docsData = await getAllDocs();
    const docIndex = docsData.pages.findIndex(page => page.id === id);

    if (docIndex === -1) {
      return null;
    }

    const updatedDoc: DocPage = {
      ...docsData.pages[docIndex],
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    docsData.pages[docIndex] = updatedDoc;
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return updatedDoc;
  } catch (error) {
    console.error('Failed to update doc:', error);
    throw error;
  }
}

/**
 * Delete a doc page
 */
export async function deleteDoc(id: string): Promise<boolean> {
  try {
    const docsData = await getAllDocs();
    const filteredPages = docsData.pages.filter(page => page.id !== id);

    if (filteredPages.length === docsData.pages.length) {
      return false; // Doc not found
    }

    docsData.pages = filteredPages;
    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');

    return true;
  } catch (error) {
    console.error('Failed to delete doc:', error);
    throw error;
  }
}

/**
 * Reorder docs
 */
export async function reorderDocs(docIds: string[]): Promise<void> {
  try {
    const docsData = await getAllDocs();

    // Update order for each doc
    docIds.forEach((id, index) => {
      const doc = docsData.pages.find(page => page.id === id);
      if (doc) {
        doc.order = index + 1;
        doc.updatedAt = new Date().toISOString();
      }
    });

    docsData.updatedAt = new Date().toISOString();

    await fs.writeFile(DOCS_FILE, JSON.stringify(docsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to reorder docs:', error);
    throw error;
  }
}

```

---
#### `lib/documentation-export.ts`

```
// Documentation Export Utilities
// Handles PDF and Markdown exports for the Living Documentation module

export interface DocumentationTab {
  id: string;
  title: string;
  icon: string;
  content: string;
}

// Convert HTML content to clean Markdown
export function htmlToMarkdown(html: string, title: string): string {
  // Remove HTML tags and convert to markdown structure
  let markdown = `# ${title}\n\n`;
  markdown += `*Exportado em: ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}*\n\n---\n\n`;

  // Basic HTML to Markdown conversion
  const content = html
    // Headers
    .replace(/<h1[^>]*>(.*?)<\/h1>/gi, '# $1\n\n')
    .replace(/<h2[^>]*>(.*?)<\/h2>/gi, '## $1\n\n')
    .replace(/<h3[^>]*>(.*?)<\/h3>/gi, '### $1\n\n')
    .replace(/<h4[^>]*>(.*?)<\/h4>/gi, '#### $1\n\n')
    // Paragraphs and breaks
    .replace(/<p[^>]*>(.*?)<\/p>/gi, '$1\n\n')
    .replace(/<br\s*\/?>/gi, '\n')
    // Lists
    .replace(/<ul[^>]*>/gi, '\n')
    .replace(/<\/ul>/gi, '\n')
    .replace(/<ol[^>]*>/gi, '\n')
    .replace(/<\/ol>/gi, '\n')
    .replace(/<li[^>]*>(.*?)<\/li>/gi, '- $1\n')
    // Bold and italic
    .replace(/<strong[^>]*>(.*?)<\/strong>/gi, '**$1**')
    .replace(/<b[^>]*>(.*?)<\/b>/gi, '**$1**')
    .replace(/<em[^>]*>(.*?)<\/em>/gi, '*$1*')
    .replace(/<i[^>]*>(.*?)<\/i>/gi, '*$1*')
    // Code
    .replace(/<code[^>]*>(.*?)<\/code>/gi, '`$1`')
    .replace(/<pre[^>]*>(.*?)<\/pre>/gi, '```\n$1\n```\n')
    // Links
    .replace(/<a[^>]*href="([^"]*)"[^>]*>(.*?)<\/a>/gi, '[$2]($1)')
    // Tables
    .replace(/<table[^>]*>/gi, '\n')
    .replace(/<\/table>/gi, '\n')
    .replace(/<thead[^>]*>/gi, '')
    .replace(/<\/thead>/gi, '')
    .replace(/<tbody[^>]*>/gi, '')
    .replace(/<\/tbody>/gi, '')
    .replace(/<tr[^>]*>/gi, '|')
    .replace(/<\/tr>/gi, '|\n')
    .replace(/<th[^>]*>(.*?)<\/th>/gi, ' $1 |')
    .replace(/<td[^>]*>(.*?)<\/td>/gi, ' $1 |')
    // Divs and spans
    .replace(/<div[^>]*>/gi, '\n')
    .replace(/<\/div>/gi, '\n')
    .replace(/<span[^>]*>(.*?)<\/span>/gi, '$1')
    // Remove remaining HTML tags
    .replace(/<[^>]+>/g, '')
    // Clean up whitespace
    .replace(/\n{3,}/g, '\n\n')
    .replace(/&nbsp;/g, ' ')
    .replace(/&amp;/g, '&')
    .replace(/&lt;/g, '<')
    .replace(/&gt;/g, '>')
    .replace(/&quot;/g, '"')
    .trim();

  return markdown + content;
}

// Download file helper
export function downloadFile(content: string, filename: string, mimeType: string): void {
  const blob = new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// Export single tab as Markdown
export function exportTabAsMarkdown(tab: DocumentationTab): void {
  const markdown = tab.content;
  const filename = `documentacao-${tab.id}-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(markdown, filename, 'text/markdown;charset=utf-8');
}

// Export all tabs as consolidated Markdown
export function exportAllTabsAsMarkdown(tabs: DocumentationTab[]): void {
  let consolidatedMarkdown = `# Documentação Viva do Sistema - ORION

*Sistema de Automação de Produção de Vídeos para YouTube*

**Exportado em:** ${new Date().toLocaleDateString('pt-BR', {
    day: '2-digit',
    month: 'long',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })}

---

## Índice

${tabs.map((tab, index) => `${index + 1}. [${tab.title}](#${tab.id})`).join('\n')}

---

`;

  tabs.forEach((tab, index) => {
    consolidatedMarkdown += `\n\n${'='.repeat(80)}\n`;
    consolidatedMarkdown += `# ${index + 1}. ${tab.title}\n`;
    consolidatedMarkdown += `${'='.repeat(80)}\n\n`;
    consolidatedMarkdown += tab.content;
    consolidatedMarkdown += '\n\n';
  });

  consolidatedMarkdown += `\n---\n\n*Documento gerado automaticamente pelo módulo de Documentação Viva do ORION*`;

  const filename = `documentacao-completa-orion-${new Date().toISOString().split('T')[0]}.md`;
  downloadFile(consolidatedMarkdown, filename, 'text/markdown;charset=utf-8');
}

// Generate PDF using browser print
export function exportTabAsPDF(tabId: string, tabTitle: string): void {
  const printWindow = window.open('', '_blank');
  if (!printWindow) {
    alert('Por favor, permita pop-ups para exportar PDF');
    return;
  }

  const content = document.getElementById(`tab-content-${tabId}`);
  if (!content) return;

  printWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${tabTitle} - Documentação ORION</title>
      <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          line-height: 1.6;
          color: #1a1a1a;
          padding: 40px;
          max-width: 800px;
          margin: 0 auto;
        }

        h1 {
          font-size: 28px;
          font-weight: 700;
          margin-bottom: 24px;
          color: #111;
          border-bottom: 3px solid #6366f1;
          padding-bottom: 12px;
        }

        h2 {
          font-size: 22px;
          font-weight: 600;
          margin: 32px 0 16px 0;
          color: #222;
        }

        h3 {
          font-size: 18px;
          font-weight: 600;
          margin: 24px 0 12px 0;
          color: #333;
        }

        h4 {
          font-size: 16px;
          font-weight: 600;
          margin: 20px 0 10px 0;
          color: #444;
        }

        p {
          margin-bottom: 12px;
          color: #333;
        }

        ul, ol {
          margin: 12px 0 12px 24px;
        }

        li {
          margin-bottom: 6px;
        }

        table {
          width: 100%;
          border-collapse: collapse;
          margin: 16px 0;
        }

        th, td {
          border: 1px solid #ddd;
          padding: 10px;
          text-align: left;
        }

        th {
          background: #f5f5f5;
          font-weight: 600;
        }

        code {
          background: #f5f5f5;
          padding: 2px 6px;
          border-radius: 4px;
          font-family: 'Monaco', 'Consolas', monospace;
          font-size: 14px;
        }

        pre {
          background: #1a1a1a;
          color: #f0f0f0;
          padding: 16px;
          border-radius: 8px;
          overflow-x: auto;
          margin: 16px 0;
        }

        .badge {
          display: inline-block;
          padding: 4px 10px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 500;
        }

        .badge-green { background: #dcfce7; color: #166534; }
        .badge-yellow { background: #fef9c3; color: #854d0e; }
        .badge-red { background: #fee2e2; color: #991b1b; }
        .badge-blue { background: #dbeafe; color: #1e40af; }

        .diagram {
          background: #fafafa;
          border: 1px solid #e5e5e5;
          border-radius: 8px;
          padding: 20px;
          margin: 16px 0;
        }

        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 1px solid #e5e5e5;
          font-size: 12px;
          color: #666;
          text-align: center;
        }

        @media print {
          body { padding: 20px; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <h1>${tabTitle}</h1>
      <p style="color: #666; font-size: 14px; margin-bottom: 24px;">
        ORION - Documentação Viva do Sistema<br>
        Exportado em: ${new Date().toLocaleDateString('pt-BR', {
          day: '2-digit',
          month: 'long',
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        })}
      </p>
      ${content.innerHTML}
      <div class="footer">
        Documento gerado pelo módulo de Documentação Viva - ORION
      </div>
    </body>
    </html>
  `);

  printWindow.document.close();
  printWindow.focus();

  setTimeout(() => {
    printWindow.print();
  }, 500);
}

```

---
#### `lib/get-api-key.ts`

```
import { NextRequest } from "next/server";

// Mapeamento de headers para variáveis de ambiente
const KEY_MAPPING: Record<string, string> = {
  "x-youtube-api-key": "YOUTUBE_API_KEY",
  "x-youtube-channel-id": "YOUTUBE_CHANNEL_ID",
  "x-openai-api-key": "OPENAI_API_KEY",
  "x-google-api-key": "GOOGLE_GENERATIVE_AI_API_KEY",
  "x-anthropic-api-key": "ANTHROPIC_API_KEY",
  "x-pexels-api-key": "PEXELS_API_KEY",
  "x-pixabay-api-key": "PIXABAY_API_KEY",
  "x-unsplash-api-key": "UNSPLASH_ACCESS_KEY",
  "x-json2video-api-key": "JSON2VIDEO_API_KEY",
  "x-elevenlabs-api-key": "ELEVENLABS_API_KEY",
  "x-tavily-api-key": "TAVILY_API_KEY",
  "x-replicate-api-key": "REPLICATE_API_TOKEN",
  "x-stability-api-key": "STABILITY_API_KEY",
};

/**
 * Obtém uma API key, priorizando:
 * 1. Header da requisição (chave da sessão do usuário)
 * 2. Variável de ambiente do servidor
 */
export function getAPIKey(
  request: NextRequest,
  headerName: string
): string | undefined {
  // Primeiro, tentar obter do header
  const headerValue = request.headers.get(headerName);
  if (headerValue) {
    return headerValue;
  }

  // Segundo, tentar obter da variável de ambiente
  const envVar = KEY_MAPPING[headerName];
  if (envVar) {
    return process.env[envVar];
  }

  return undefined;
}

/**
 * Obtém múltiplas API keys de uma vez
 */
export function getAPIKeys(
  request: NextRequest,
  keys: string[]
): Record<string, string | undefined> {
  const result: Record<string, string | undefined> = {};
  for (const key of keys) {
    result[key] = getAPIKey(request, key);
  }
  return result;
}

// Helpers específicos para cada serviço
export function getYouTubeKeys(request: NextRequest) {
  return {
    apiKey: getAPIKey(request, "x-youtube-api-key"),
    channelId: getAPIKey(request, "x-youtube-channel-id"),
  };
}

export function getOpenAIKey(request: NextRequest) {
  return getAPIKey(request, "x-openai-api-key");
}

export function getGoogleKey(request: NextRequest) {
  return getAPIKey(request, "x-google-api-key");
}

export function getAnthropicKey(request: NextRequest) {
  return getAPIKey(request, "x-anthropic-api-key");
}

export function getPexelsKey(request: NextRequest) {
  return getAPIKey(request, "x-pexels-api-key");
}

export function getPixabayKey(request: NextRequest) {
  return getAPIKey(request, "x-pixabay-api-key");
}

export function getUnsplashKey(request: NextRequest) {
  return getAPIKey(request, "x-unsplash-api-key");
}

export function getJSON2VideoKey(request: NextRequest) {
  return getAPIKey(request, "x-json2video-api-key");
}

export function getElevenLabsKey(request: NextRequest) {
  return getAPIKey(request, "x-elevenlabs-api-key");
}

export function getTavilyKey(request: NextRequest) {
  return getAPIKey(request, "x-tavily-api-key");
}

export function getReplicateKey(request: NextRequest) {
  return getAPIKey(request, "x-replicate-api-key");
}

export function getStabilityKey(request: NextRequest) {
  return getAPIKey(request, "x-stability-api-key");
}

```

---
#### `lib/inngest/client.ts`

```
import { Inngest } from 'inngest';

// Create the Inngest client
export const inngest = new Inngest({
  id: 'orion-video-pipeline',
  name: 'ORION Video Production',
});

// Event types for type safety
export type OrionEvents = {
  'project/start': {
    data: {
      projectId: string;
      topic: string;
      autoMode: boolean;
    };
  };
  'project/approved': {
    data: {
      projectId: string;
      feedback?: string;
    };
  };
  'project/rejected': {
    data: {
      projectId: string;
      feedback: string;
    };
  };
};

```

---
#### `lib/inngest/functions/video-pipeline.ts`

```
import { inngest } from '../client';
import { prisma } from '@/lib/db';
import { researchService } from '@/lib/services/research.service';
import { scriptService } from '@/lib/services/script.service';
import { storyboardService } from '@/lib/services/storyboard.service';
import { renderService } from '@/lib/services/render.service';
import { uploadService } from '@/lib/services/upload.service';
import { notificationService } from '@/lib/services/notification.service';
import crypto from 'crypto';

/**
 * Main Video Production Pipeline
 *
 * This workflow orchestrates the entire video production process:
 * 1. Deep Research (Gemini) - Analyzes trends and channel data
 * 2. Script Generation (Claude) - Creates optimized script
 * 3. Human Approval - Waits for user approval via email
 * 4. Storyboard Generation - Creates visual scene descriptions
 * 5. Video Rendering (JSON2VIDEO) - Renders the final video
 * 6. YouTube Upload - Publishes with automatic retries
 */
export const videoPipeline = inngest.createFunction(
  {
    id: 'video-production-pipeline',
    name: 'Video Production Pipeline',
    retries: 3,
  },
  { event: 'project/start' },
  async ({ event, step }) => {
    const { projectId, topic, autoMode } = event.data;

    // Initialize workflow state
    await step.run('init-workflow', async () => {
      await prisma.workflowState.upsert({
        where: { projectId },
        create: {
          projectId,
          currentStep: 'research',
          approvalToken: crypto.randomBytes(32).toString('hex'),
        },
        update: {
          currentStep: 'research',
          error: null,
        },
      });

      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'RESEARCHING' },
      });
    });

    // Step 1: Deep Research with Gemini
    const researchResult = await step.run('deep-research', async () => {
      await prisma.workflowState.update({
        where: { projectId },
        data: { researchStartedAt: new Date() },
      });

      const result = await researchService.execute(projectId, topic);

      await prisma.workflowState.update({
        where: { projectId },
        data: { researchCompletedAt: new Date() },
      });

      return result;
    });

    // Step 2: Script Generation with Claude
    await step.run('update-status-scripting', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'SCRIPTING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'script',
          scriptStartedAt: new Date(),
        },
      });
    });

    const scriptResult = await step.run('generate-script', async () => {
      const result = await scriptService.generate(projectId, topic, researchResult);

      await prisma.workflowState.update({
        where: { projectId },
        data: { scriptCompletedAt: new Date() },
      });

      return result;
    });

    // Step 3: Human Approval (skip if autoMode)
    if (!autoMode) {
      await step.run('send-approval-request', async () => {
        const workflowState = await prisma.workflowState.findUnique({
          where: { projectId },
        });

        if (workflowState?.approvalToken) {
          const project = await prisma.project.findUnique({
            where: { id: projectId },
          });

          await notificationService.sendApprovalEmail(
            projectId,
            workflowState.approvalToken,
            project?.name || topic
          );

          await prisma.project.update({
            where: { id: projectId },
            data: { status: 'AWAITING_APPROVAL' },
          });

          await prisma.workflowState.update({
            where: { projectId },
            data: {
              currentStep: 'approval',
              approvalSentAt: new Date(),
            },
          });
        }
      });

      // Wait for approval event (max 7 days)
      const approval = await step.waitForEvent('wait-for-approval', {
        event: 'project/approved',
        timeout: '7d',
        match: 'data.projectId',
      });

      if (!approval) {
        throw new Error('Approval timeout - project expired after 7 days');
      }
    }

    // Step 4: Generate Storyboard
    await step.run('update-status-storyboard', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'STORYBOARDING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'storyboard',
          approvedAt: new Date(),
          storyboardStartedAt: new Date(),
        },
      });
    });

    const storyboardResult = await step.run('generate-storyboard', async () => {
      const result = await storyboardService.generate(projectId, scriptResult);

      await prisma.workflowState.update({
        where: { projectId },
        data: { storyboardCompletedAt: new Date() },
      });

      return result;
    });

    // Step 5: Render Video
    await step.run('update-status-rendering', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'RENDERING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'render',
          renderStartedAt: new Date(),
        },
      });
    });

    const renderResult = await step.run('submit-render-job', async () => {
      return await renderService.submit(projectId, storyboardResult);
    });

    // Poll for render completion
    await step.run('wait-for-render', async () => {
      let completed = false;
      let attempts = 0;
      const maxAttempts = 60; // 30 minutes max (30s intervals)

      while (!completed && attempts < maxAttempts) {
        await new Promise((resolve) => setTimeout(resolve, 30000));
        const status = await renderService.checkStatus(projectId, renderResult.externalJobId);

        if (status.completed) {
          completed = true;
          await prisma.workflowState.update({
            where: { projectId },
            data: { renderCompletedAt: new Date() },
          });
        } else if (status.failed) {
          throw new Error(`Render failed: ${status.error}`);
        }

        attempts++;
      }

      if (!completed) {
        throw new Error('Render timeout after 30 minutes');
      }
    });

    // Step 6: Upload to YouTube
    await step.run('update-status-uploading', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'UPLOADING' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'upload',
          uploadStartedAt: new Date(),
        },
      });
    });

    const render = await prisma.render.findUnique({ where: { projectId } });

    const uploadResult = await step.run('upload-to-youtube', async () => {
      return await uploadService.upload(projectId, {
        videoUrl: render?.videoUrl || undefined,
        thumbnailUrl: render?.thumbnailUrl || undefined,
        duration: render?.duration || undefined,
      });
    });

    // Final: Mark as completed
    await step.run('complete-workflow', async () => {
      await prisma.project.update({
        where: { id: projectId },
        data: { status: 'COMPLETED' },
      });
      await prisma.workflowState.update({
        where: { projectId },
        data: {
          currentStep: 'completed',
          uploadCompletedAt: new Date(),
        },
      });

      // Send completion notification
      await notificationService.sendCompletionEmail(
        projectId,
        uploadResult.youtubeUrl
      );
    });

    return {
      success: true,
      projectId,
      youtubeUrl: uploadResult.youtubeUrl,
    };
  }
);

// Export all functions
export const functions = [videoPipeline];

```

---
#### `lib/integration-tokens.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { IntegrationTokens } from '@/types';

const TOKENS_FILE = path.join(process.cwd(), 'data', 'integration-tokens.json');

/**
 * Get integration tokens
 */
export async function getIntegrationTokens(): Promise<IntegrationTokens> {
  try {
    const fileContent = await fs.readFile(TOKENS_FILE, 'utf-8');
    return JSON.parse(fileContent) as IntegrationTokens;
  } catch (error) {
    console.error('Failed to read integration tokens:', error);
    return {
      github: null,
      vercel: null,
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update GitHub tokens
 */
export async function updateGitHubTokens(
  token: string,
  owner: string,
  repo: string
): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      github: { token, owner, repo },
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to update GitHub tokens:', error);
    throw error;
  }
}

/**
 * Update Vercel tokens
 */
export async function updateVercelTokens(
  token: string,
  projectId: string
): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      vercel: { token, projectId },
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to update Vercel tokens:', error);
    throw error;
  }
}

/**
 * Remove GitHub tokens
 */
export async function removeGitHubTokens(): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      github: null,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to remove GitHub tokens:', error);
    throw error;
  }
}

/**
 * Remove Vercel tokens
 */
export async function removeVercelTokens(): Promise<IntegrationTokens> {
  try {
    const tokens = await getIntegrationTokens();

    const updatedTokens: IntegrationTokens = {
      ...tokens,
      vercel: null,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(TOKENS_FILE, JSON.stringify(updatedTokens, null, 2), 'utf-8');

    return updatedTokens;
  } catch (error) {
    console.error('Failed to remove Vercel tokens:', error);
    throw error;
  }
}

```

---
#### `lib/logger.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { SystemLog, LogLevel, LogSource, LogsData } from '@/types';

const LOGS_FILE = path.join(process.cwd(), 'data', 'system-logs.json');

/**
 * Utility function to log system events
 * This function writes to the system-logs.json file
 */
export async function logSystemEvent(
  level: LogLevel,
  source: LogSource,
  message: string,
  details?: Record<string, unknown>
): Promise<void> {
  try {
    // Read existing logs
    const fileContent = await fs.readFile(LOGS_FILE, 'utf-8');
    const logsData: LogsData = JSON.parse(fileContent);

    // Create new log entry
    const newLog: SystemLog = {
      id: `log-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      timestamp: new Date().toISOString(),
      level,
      source,
      message,
      details,
    };

    // Add to logs array (prepend to show newest first)
    logsData.logs.unshift(newLog);

    // Keep only last 1000 logs to prevent file from growing too large
    if (logsData.logs.length > 1000) {
      logsData.logs = logsData.logs.slice(0, 1000);
    }

    // Write back to file
    await fs.writeFile(LOGS_FILE, JSON.stringify(logsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to write system log:', error);
    // Don't throw - logging should never break the application
  }
}

/**
 * Read all system logs
 */
export async function getSystemLogs(limit?: number): Promise<SystemLog[]> {
  try {
    const fileContent = await fs.readFile(LOGS_FILE, 'utf-8');
    const logsData: LogsData = JSON.parse(fileContent);

    if (limit) {
      return logsData.logs.slice(0, limit);
    }

    return logsData.logs;
  } catch (error) {
    console.error('Failed to read system logs:', error);
    return [];
  }
}

/**
 * Clear all system logs
 */
export async function clearSystemLogs(): Promise<void> {
  try {
    const logsData: LogsData = { logs: [] };
    await fs.writeFile(LOGS_FILE, JSON.stringify(logsData, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to clear system logs:', error);
    throw error;
  }
}

/**
 * Search logs by text
 */
export async function searchLogs(query: string): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    const lowerQuery = query.toLowerCase();

    return logs.filter(log =>
      log.message.toLowerCase().includes(lowerQuery) ||
      log.source.toLowerCase().includes(lowerQuery) ||
      (log.details && JSON.stringify(log.details).toLowerCase().includes(lowerQuery))
    );
  } catch (error) {
    console.error('Failed to search logs:', error);
    return [];
  }
}

/**
 * Get logs by level
 */
export async function getLogsByLevel(level: LogLevel): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    return logs.filter(log => log.level === level);
  } catch (error) {
    console.error('Failed to get logs by level:', error);
    return [];
  }
}

/**
 * Get logs by source
 */
export async function getLogsBySource(source: LogSource): Promise<SystemLog[]> {
  try {
    const logs = await getSystemLogs();
    return logs.filter(log => log.source === source);
  } catch (error) {
    console.error('Failed to get logs by source:', error);
    return [];
  }
}

```

---
#### `lib/services/notification.service.ts`

```
import { Resend } from 'resend';
import { prisma } from '@/lib/db';

// Lazy initialization to avoid build-time errors
let resendInstance: Resend | null = null;

function getResend(): Resend {
  if (!resendInstance) {
    resendInstance = new Resend(process.env.RESEND_API_KEY);
  }
  return resendInstance;
}

export const notificationService = {
  /**
   * Send approval request email
   */
  async sendApprovalEmail(
    projectId: string,
    approvalToken: string,
    projectName: string
  ): Promise<void> {
    const baseUrl = process.env.NEXT_PUBLIC_URL || 'http://localhost:3000';
    const approvalUrl = `${baseUrl}/approve/${approvalToken}`;

    const notificationEmail = process.env.NOTIFICATION_EMAIL;

    if (!notificationEmail) {
      console.warn('[Notification] NOTIFICATION_EMAIL not set, skipping email');
      return;
    }

    // Get script details
    const script = await prisma.script.findUnique({
      where: { projectId },
    });

    try {
      await getResend().emails.send({
        from: 'ORION <noreply@orion.video>',
        to: notificationEmail,
        subject: `[Aprovação Necessária] Roteiro: ${projectName}`,
        html: `
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <title>Aprovação de Roteiro</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0a0a0a; color: #fafafa; padding: 40px;">
            <div style="max-width: 600px; margin: 0 auto; background: #18181b; border-radius: 16px; padding: 32px; border: 1px solid #27272a;">
              <h1 style="color: #fafafa; margin-bottom: 8px;">🎬 Novo Roteiro Pronto</h1>
              <h2 style="color: #a1a1aa; font-weight: normal; margin-top: 0;">${projectName}</h2>

              ${script?.title ? `
              <div style="background: #27272a; border-radius: 8px; padding: 16px; margin: 24px 0;">
                <h3 style="color: #fafafa; margin-top: 0;">Título do Vídeo:</h3>
                <p style="color: #e4e4e7; font-size: 18px;">${script.title}</p>
              </div>
              ` : ''}

              <p style="color: #a1a1aa; line-height: 1.6;">
                O roteiro foi gerado e está aguardando sua aprovação.
                Clique no botão abaixo para revisar e aprovar.
              </p>

              <a href="${approvalUrl}"
                 style="display: inline-block; background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
                        color: white; text-decoration: none; padding: 16px 32px; border-radius: 8px;
                        font-weight: 600; margin: 24px 0;">
                Revisar Roteiro →
              </a>

              <p style="color: #71717a; font-size: 12px; margin-top: 32px;">
                Este link expira em 7 dias.<br>
                Se você não solicitou este email, ignore-o.
              </p>
            </div>
          </body>
          </html>
        `,
      });

      console.log(`[Notification] Approval email sent for project ${projectId}`);
    } catch (error) {
      console.error('[Notification] Failed to send approval email:', error);
      throw error;
    }
  },

  /**
   * Send completion notification
   */
  async sendCompletionEmail(projectId: string, youtubeUrl: string): Promise<void> {
    const notificationEmail = process.env.NOTIFICATION_EMAIL;

    if (!notificationEmail) {
      console.warn('[Notification] NOTIFICATION_EMAIL not set, skipping email');
      return;
    }

    const project = await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    try {
      await getResend().emails.send({
        from: 'ORION <noreply@orion.video>',
        to: notificationEmail,
        subject: `✅ Vídeo Publicado: ${project?.name || 'Projeto'}`,
        html: `
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <title>Vídeo Publicado</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0a0a0a; color: #fafafa; padding: 40px;">
            <div style="max-width: 600px; margin: 0 auto; background: #18181b; border-radius: 16px; padding: 32px; border: 1px solid #27272a;">
              <h1 style="color: #22c55e; margin-bottom: 8px;">✅ Vídeo Publicado!</h1>
              <h2 style="color: #fafafa; font-weight: normal; margin-top: 0;">${project?.script?.title || project?.name}</h2>

              <p style="color: #a1a1aa; line-height: 1.6;">
                Seu vídeo foi renderizado e publicado no YouTube com sucesso!
              </p>

              <a href="${youtubeUrl}"
                 style="display: inline-block; background: #ef4444;
                        color: white; text-decoration: none; padding: 16px 32px; border-radius: 8px;
                        font-weight: 600; margin: 24px 0;">
                ▶️ Ver no YouTube
              </a>

              <p style="color: #71717a; font-size: 12px; margin-top: 32px;">
                ORION - Produção Automatizada de Vídeos
              </p>
            </div>
          </body>
          </html>
        `,
      });

      console.log(`[Notification] Completion email sent for project ${projectId}`);
    } catch (error) {
      console.error('[Notification] Failed to send completion email:', error);
      // Don't throw - completion email is not critical
    }
  },
};

```

---
#### `lib/services/render.service.ts`

```
import { prisma } from '@/lib/db';

interface Scene {
  id: number;
  duration: number;
  narration: string;
  visualDescription: string;
  mediaType: 'video' | 'image' | 'animation';
  transition: string;
}

interface StoryboardData {
  scenes: Scene[];
}

interface RenderJobResult {
  externalJobId: string;
  status: string;
}

interface RenderStatusResult {
  completed: boolean;
  failed: boolean;
  videoUrl?: string;
  error?: string;
}

export const renderService = {
  /**
   * Submit render job to JSON2VIDEO
   */
  async submit(projectId: string, storyboard: StoryboardData): Promise<RenderJobResult> {
    // Get project data
    await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    // TODO: Integrate with JSON2VIDEO API using storyboard.scenes
    // For now, we create a mock job
    const sceneCount = storyboard.scenes?.length || 0;
    const externalJobId = `job_${Date.now()}_${projectId.slice(0, 8)}_scenes_${sceneCount}`;

    // Create render record
    await prisma.render.upsert({
      where: { projectId },
      create: {
        projectId,
        externalJobId,
        status: 'processing',
      },
      update: {
        externalJobId,
        status: 'processing',
      },
    });

    return {
      externalJobId,
      status: 'processing',
    };
  },

  /**
   * Check render job status
   */
  async checkStatus(projectId: string, externalJobId: string): Promise<RenderStatusResult> {
    const render = await prisma.render.findUnique({
      where: { projectId },
    });

    if (!render) {
      return { completed: false, failed: true, error: 'Render not found' };
    }

    // Verify job ID matches
    if (render.externalJobId !== externalJobId) {
      return { completed: false, failed: true, error: 'Job ID mismatch' };
    }

    // TODO: Check JSON2VIDEO API for actual status
    // For now, mock as completed after creation
    const mockVideoUrl = `https://storage.example.com/videos/${projectId}.mp4`;

    await prisma.render.update({
      where: { projectId },
      data: {
        status: 'completed',
        videoUrl: mockVideoUrl,
        thumbnailUrl: `https://storage.example.com/thumbnails/${projectId}.jpg`,
        duration: 600, // 10 minutes
      },
    });

    return {
      completed: true,
      failed: false,
      videoUrl: mockVideoUrl,
    };
  },
};

```

---
#### `lib/services/research.service.ts`

```
import { prisma } from '@/lib/db';
import { google } from '@ai-sdk/google';
import { generateText } from 'ai';

interface ResearchResult {
  internalAnalysis: {
    topPerformingTopics: string[];
    audienceInsights: string[];
    contentGaps: string[];
  };
  externalAnalysis: {
    trends: string[];
    competitors: string[];
  };
}

export const researchService = {
  /**
   * Execute deep research using Gemini 2.0
   */
  async execute(projectId: string, topic: string): Promise<ResearchResult> {
    // Update research status
    await prisma.research.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      // Use Gemini 2.0 for deep research
      const { text } = await generateText({
        model: google('gemini-2.0-flash-exp'),
        system: `You are a YouTube content research specialist for the Brazilian market.
Your task is to analyze trends, audience behavior, and content opportunities.
Always respond in valid JSON format.`,
        prompt: `Conduct deep research on the topic: "${topic}"

Analyze:
1. Internal factors: What topics perform well in this niche? What does the audience want?
2. External factors: Current trends, competitor analysis, content gaps

Return a JSON object with this structure:
{
  "internalAnalysis": {
    "topPerformingTopics": ["topic1", "topic2", ...],
    "audienceInsights": ["insight1", "insight2", ...],
    "contentGaps": ["gap1", "gap2", ...]
  },
  "externalAnalysis": {
    "trends": ["trend1", "trend2", ...],
    "competitors": ["competitor insight 1", ...]
  },
  "summary": "Brief summary of findings"
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result = jsonMatch ? JSON.parse(jsonMatch[0]) : {
        internalAnalysis: { topPerformingTopics: [], audienceInsights: [], contentGaps: [] },
        externalAnalysis: { trends: [], competitors: [] },
      };

      // Save research results
      await prisma.research.update({
        where: { projectId },
        data: {
          internalAnalysis: result.internalAnalysis,
          externalAnalysis: result.externalAnalysis,
          summary: result.summary || text,
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.research.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/script.service.ts`

```
import { prisma } from '@/lib/db';
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

interface ScriptResult {
  title: string;
  content: string;
  sections: {
    hook: string;
    body: string[];
    cta: string;
  };
}

interface ResearchData {
  internalAnalysis?: {
    topPerformingTopics: string[];
    audienceInsights: string[];
    contentGaps: string[];
  };
  externalAnalysis?: {
    trends: string[];
    competitors: string[];
  };
}

export const scriptService = {
  /**
   * Generate script using Claude
   */
  async generate(projectId: string, topic: string, research: ResearchData): Promise<ScriptResult> {
    // Update script status
    await prisma.script.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      const { text } = await generateText({
        model: anthropic('claude-sonnet-4-20250514'),
        system: `You are an expert YouTube scriptwriter for the Brazilian market.
Create engaging, value-packed scripts optimized for retention.
Always respond in valid JSON format.`,
        prompt: `Create a YouTube script for: "${topic}"

Research insights:
- Top topics: ${research.internalAnalysis?.topPerformingTopics?.join(', ') || 'N/A'}
- Audience insights: ${research.internalAnalysis?.audienceInsights?.join(', ') || 'N/A'}
- Trends: ${research.externalAnalysis?.trends?.join(', ') || 'N/A'}

Requirements:
1. Hook (first 30 seconds): Grab attention immediately
2. Body: 3-5 main points with value and entertainment
3. CTA: Clear call-to-action

Return JSON:
{
  "title": "Video title (SEO optimized)",
  "content": "Full script text",
  "sections": {
    "hook": "Opening hook text",
    "body": ["Point 1 text", "Point 2 text", ...],
    "cta": "Call to action text"
  },
  "metadata": {
    "wordCount": 1500,
    "estimatedDuration": "10-12 minutes",
    "tone": "engaging and educational"
  }
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result = jsonMatch ? JSON.parse(jsonMatch[0]) : {
        title: topic,
        content: text,
        sections: { hook: '', body: [], cta: '' },
      };

      // Save script
      await prisma.script.update({
        where: { projectId },
        data: {
          title: result.title,
          content: result.content,
          sections: result.sections,
          metadata: result.metadata,
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.script.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/spreadsheet.service.ts`

```
/**
 * ============================================
 * ORION - Serviço de Processamento de Planilhas
 * ============================================
 *
 * Processa planilhas exportadas do YouTube Studio para
 * extrair métricas e insights de performance.
 */

import * as XLSX from 'xlsx';
import { ChannelMetrics, YouTubeStudioData } from '@/types';

interface SpreadsheetRow {
  [key: string]: string | number | undefined;
}

/**
 * Processa um arquivo de planilha (CSV ou XLSX) do YouTube Studio
 */
export async function parseYouTubeStudioSpreadsheet(
  fileBuffer: ArrayBuffer
): Promise<YouTubeStudioData> {
  try {
    // Ler o arquivo com SheetJS
    const workbook = XLSX.read(fileBuffer, { type: 'array' });

    // Pegar a primeira planilha
    const firstSheetName = workbook.SheetNames[0];
    const worksheet = workbook.Sheets[firstSheetName];

    // Converter para JSON
    const rawData = XLSX.utils.sheet_to_json<SpreadsheetRow>(worksheet);

    // Processar os dados
    const metrics = parseMetricsFromSpreadsheet(rawData);

    // Calcular estatísticas agregadas
    const avgCTR = calculateAverageCTR(metrics);
    const avgWatchTime = calculateAverageWatchTime(metrics);
    const topPerformingVideos = getTopPerformingVideos(metrics, 10);

    return {
      id: `yt-studio-${Date.now()}`,
      rawData: rawData as unknown as Record<string, unknown>,
      totalVideos: metrics.length,
      analyzedAt: new Date().toISOString(),
      topPerformingVideos,
      avgCTR,
      avgWatchTime
    };
  } catch (error) {
    console.error('Erro ao processar planilha do YouTube Studio:', error);
    throw new Error(`Falha ao processar planilha: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);
  }
}

/**
 * Converte dados brutos da planilha em objetos ChannelMetrics
 */
function parseMetricsFromSpreadsheet(data: SpreadsheetRow[]): ChannelMetrics[] {
  return data.map((row, index) => {
    // Tentar mapear colunas comuns do YouTube Studio
    // As colunas podem variar dependendo do idioma/formato da exportação
    const videoId = String(row['Video ID'] || row['ID do vídeo'] || `video-${index}`);
    const title = String(row['Video title'] || row['Título do vídeo'] || row['Title'] || row['Título'] || 'Sem título');
    const views = Number(row['Views'] || row['Visualizações'] || row['Visualizacoes'] || 0);
    const likes = Number(row['Likes'] || row['Curtidas'] || 0);
    const comments = Number(row['Comments'] || row['Comentários'] || row['Comentarios'] || 0);
    const watchTime = Number(row['Watch time (hours)'] || row['Tempo de exibição'] || row['Watch time'] || 0);
    const avgViewDuration = Number(row['Average view duration'] || row['Duração média da visualização'] || row['Avg view duration'] || 0);
    const ctr = Number(row['CTR'] || row['Impressions click-through rate'] || row['Taxa de cliques das impressões'] || 0);
    const impressions = Number(row['Impressions'] || row['Impressões'] || row['Impressoes'] || 0);
    const publishedAt = String(row['Published'] || row['Publicado em'] || row['Date'] || new Date().toISOString());

    return {
      videoId,
      title,
      views,
      likes,
      comments,
      watchTime: watchTime * 3600, // Converter horas para segundos
      averageViewDuration: avgViewDuration,
      ctr,
      impressions,
      publishedAt
    };
  }).filter(metric => metric.views > 0); // Filtrar vídeos sem visualizações
}

/**
 * Calcula CTR médio
 */
function calculateAverageCTR(metrics: ChannelMetrics[]): number {
  if (metrics.length === 0) return 0;

  const totalCTR = metrics.reduce((sum, m) => sum + m.ctr, 0);
  return Number((totalCTR / metrics.length).toFixed(2));
}

/**
 * Calcula tempo de exibição médio
 */
function calculateAverageWatchTime(metrics: ChannelMetrics[]): number {
  if (metrics.length === 0) return 0;

  const totalWatchTime = metrics.reduce((sum, m) => sum + m.watchTime, 0);
  return Number((totalWatchTime / metrics.length).toFixed(0));
}

/**
 * Retorna os vídeos com melhor performance
 */
function getTopPerformingVideos(metrics: ChannelMetrics[], limit: number): ChannelMetrics[] {
  // Ordenar por uma combinação de visualizações e CTR
  return [...metrics]
    .sort((a, b) => {
      const scoreA = a.views * (1 + a.ctr / 100);
      const scoreB = b.views * (1 + b.ctr / 100);
      return scoreB - scoreA;
    })
    .slice(0, limit);
}

/**
 * Valida se um arquivo parece ser uma planilha do YouTube Studio
 */
export function validateYouTubeStudioSpreadsheet(fileBuffer: ArrayBuffer): {
  valid: boolean;
  error?: string;
} {
  try {
    const workbook = XLSX.read(fileBuffer, { type: 'array' });

    if (workbook.SheetNames.length === 0) {
      return { valid: false, error: 'Planilha vazia' };
    }

    const worksheet = workbook.Sheets[workbook.SheetNames[0]];
    const data = XLSX.utils.sheet_to_json<SpreadsheetRow>(worksheet);

    if (data.length === 0) {
      return { valid: false, error: 'Nenhum dado encontrado na planilha' };
    }

    // Verificar se tem pelo menos algumas colunas esperadas
    const firstRow = data[0];
    const hasExpectedColumns =
      Object.keys(firstRow).some(key =>
        key.toLowerCase().includes('video') ||
        key.toLowerCase().includes('vídeo') ||
        key.toLowerCase().includes('title') ||
        key.toLowerCase().includes('título')
      );

    if (!hasExpectedColumns) {
      return {
        valid: false,
        error: 'Formato de planilha não reconhecido. Certifique-se de exportar do YouTube Studio.'
      };
    }

    return { valid: true };
  } catch (error) {
    return {
      valid: false,
      error: `Erro ao validar planilha: ${error instanceof Error ? error.message : 'Erro desconhecido'}`
    };
  }
}

/**
 * Extrai insights principais dos dados da planilha
 */
export function extractInsightsFromSpreadsheet(data: YouTubeStudioData): string[] {
  const insights: string[] = [];

  if (!data.topPerformingVideos || data.topPerformingVideos.length === 0) {
    return ['Não foram encontrados dados suficientes para gerar insights'];
  }

  // Insight sobre CTR
  if (data.avgCTR && data.avgCTR > 0) {
    if (data.avgCTR > 10) {
      insights.push(`CTR médio excelente de ${data.avgCTR}% - suas thumbnails e títulos são muito eficazes`);
    } else if (data.avgCTR > 5) {
      insights.push(`CTR médio bom de ${data.avgCTR}% - há espaço para melhorar thumbnails e títulos`);
    } else {
      insights.push(`CTR médio de ${data.avgCTR}% - foque em melhorar suas thumbnails e títulos para aumentar cliques`);
    }
  }

  // Insight sobre tempo de exibição
  if (data.avgWatchTime && data.avgWatchTime > 0) {
    const avgMinutes = Math.floor(data.avgWatchTime / 60);
    insights.push(`Tempo médio de exibição de ${avgMinutes} minutos - ${avgMinutes > 3 ? 'ótima retenção' : 'trabalhe em ganchos mais fortes'}`);
  }

  // Insight sobre vídeos de sucesso
  if (data.topPerformingVideos && data.topPerformingVideos.length > 0) {
    const topVideo = data.topPerformingVideos[0];
    insights.push(`Seu vídeo de maior sucesso "${topVideo.title}" tem ${topVideo.views.toLocaleString()} visualizações`);
  }

  return insights;
}

```

---
#### `lib/services/storyboard.service.ts`

```
import { prisma } from '@/lib/db';
import { anthropic } from '@ai-sdk/anthropic';
import { generateText } from 'ai';

interface Scene {
  id: number;
  duration: number;
  narration: string;
  visualDescription: string;
  mediaType: 'video' | 'image' | 'animation';
  transition: string;
}

interface StoryboardResult {
  scenes: Scene[];
}

interface ScriptData {
  title: string;
  content: string;
  sections?: {
    hook: string;
    body: string[];
    cta: string;
  };
}

export const storyboardService = {
  /**
   * Generate storyboard from script
   */
  async generate(projectId: string, script: ScriptData): Promise<StoryboardResult> {
    // Update storyboard status
    await prisma.storyboard.upsert({
      where: { projectId },
      create: { projectId, status: 'in_progress' },
      update: { status: 'in_progress' },
    });

    try {
      const { text } = await generateText({
        model: anthropic('claude-sonnet-4-20250514'),
        system: `You are a video storyboard specialist.
Create detailed scene-by-scene breakdowns for video production.
Always respond in valid JSON format.`,
        prompt: `Create a storyboard for this script:

Title: ${script.title}
Content: ${script.content}

For each scene, specify:
1. Duration (seconds)
2. Narration text
3. Visual description (what should be on screen)
4. Media type (video, image, animation)
5. Transition to next scene

Return JSON:
{
  "scenes": [
    {
      "id": 1,
      "duration": 5,
      "narration": "Text to speak",
      "visualDescription": "What appears on screen",
      "mediaType": "video",
      "transition": "fade"
    }
  ]
}`,
      });

      // Parse the response
      const jsonMatch = text.match(/\{[\s\S]*\}/);
      const result: StoryboardResult = jsonMatch ? JSON.parse(jsonMatch[0]) : { scenes: [] };

      // Save storyboard
      await prisma.storyboard.update({
        where: { projectId },
        data: {
          scenes: JSON.parse(JSON.stringify(result.scenes)),
          status: 'completed',
        },
      });

      return result;
    } catch (error) {
      await prisma.storyboard.update({
        where: { projectId },
        data: { status: 'failed' },
      });
      throw error;
    }
  },
};

```

---
#### `lib/services/upload.service.ts`

```
import { prisma } from '@/lib/db';

interface VideoData {
  videoUrl?: string;
  thumbnailUrl?: string;
  duration?: number;
}

interface UploadResult {
  youtubeVideoId: string;
  youtubeUrl: string;
}

export const uploadService = {
  /**
   * Upload video to YouTube
   */
  async upload(projectId: string, video: VideoData): Promise<UploadResult> {
    // Get project with script for title/description
    const project = await prisma.project.findUnique({
      where: { id: projectId },
      include: { script: true },
    });

    if (!project?.script) {
      throw new Error('Script not found');
    }

    // Get or create upload record
    let upload = await prisma.upload.findUnique({
      where: { projectId },
    });

    if (!upload) {
      upload = await prisma.upload.create({
        data: {
          projectId,
          title: project.script.title || project.name,
          status: 'pending',
        },
      });
    }

    // TODO: Integrate with YouTube Data API
    // For now, mock the upload
    const mockVideoId = `YT_${Date.now()}_${projectId.slice(0, 8)}`;
    const mockYoutubeUrl = `https://youtube.com/watch?v=${mockVideoId}`;

    // Log video data for future integration
    console.log('[Upload Service] Video data:', {
      projectId,
      videoUrl: video.videoUrl,
      thumbnailUrl: video.thumbnailUrl,
      duration: video.duration,
    });

    await prisma.upload.update({
      where: { projectId },
      data: {
        youtubeVideoId: mockVideoId,
        youtubeUrl: mockYoutubeUrl,
        title: project.script.title || project.name,
        description: project.script.content?.slice(0, 500) || '',
        publishedAt: new Date(),
        status: 'completed',
      },
    });

    return {
      youtubeVideoId: mockVideoId,
      youtubeUrl: mockYoutubeUrl,
    };
  },
};

```

---
#### `lib/share-context.tsx`

```
"use client";

import { createContext, useContext, useState, useEffect, ReactNode } from "react";

interface ShareContextType {
  isSharedView: boolean;
  shareToken: string | null;
  generateShareLink: () => string;
  canCopy: boolean;
  canShare: boolean;
}

const ShareContext = createContext<ShareContextType | undefined>(undefined);

// Generate a unique share token
function generateToken(): string {
  return btoa(Date.now().toString(36) + Math.random().toString(36).substring(2));
}

// Store owner tokens in localStorage
function getOwnerTokens(): string[] {
  if (typeof window === "undefined") return [];
  try {
    const tokens = localStorage.getItem("ey_owner_tokens");
    return tokens ? JSON.parse(tokens) : [];
  } catch {
    return [];
  }
}

function addOwnerToken(token: string) {
  if (typeof window === "undefined") return;
  const tokens = getOwnerTokens();
  if (!tokens.includes(token)) {
    tokens.push(token);
    localStorage.setItem("ey_owner_tokens", JSON.stringify(tokens));
  }
}

export function ShareProvider({ children }: { children: ReactNode }) {
  const [isSharedView, setIsSharedView] = useState(false);
  const [shareToken, setShareToken] = useState<string | null>(null);

  useEffect(() => {
    // Check if this is a shared view by looking at the URL
    const params = new URLSearchParams(window.location.search);
    const token = params.get("s");

    if (token) {
      // Check if this token belongs to the owner
      const ownerTokens = getOwnerTokens();
      if (!ownerTokens.includes(token)) {
        // This is a viewer (not the owner)
        setIsSharedView(true);
        setShareToken(token);

        // Apply copy protection for shared views
        document.body.classList.add("shared-view");

        // Disable right-click
        const handleContextMenu = (e: MouseEvent) => {
          e.preventDefault();
          return false;
        };

        // Disable copy/cut
        const handleCopy = (e: ClipboardEvent) => {
          e.preventDefault();
          return false;
        };

        // Disable text selection via keyboard
        const handleKeydown = (e: KeyboardEvent) => {
          if (
            (e.ctrlKey || e.metaKey) &&
            (e.key === "c" || e.key === "a" || e.key === "u" || e.key === "s")
          ) {
            e.preventDefault();
            return false;
          }
        };

        document.addEventListener("contextmenu", handleContextMenu);
        document.addEventListener("copy", handleCopy);
        document.addEventListener("cut", handleCopy);
        document.addEventListener("keydown", handleKeydown);

        return () => {
          document.removeEventListener("contextmenu", handleContextMenu);
          document.removeEventListener("copy", handleCopy);
          document.removeEventListener("cut", handleCopy);
          document.removeEventListener("keydown", handleKeydown);
          document.body.classList.remove("shared-view");
        };
      }
    }
  }, []);

  const generateShareLink = (): string => {
    const token = generateToken();
    addOwnerToken(token); // Mark this token as owned by the creator

    const baseUrl = window.location.origin + window.location.pathname;
    return `${baseUrl}?s=${token}`;
  };

  return (
    <ShareContext.Provider
      value={{
        isSharedView,
        shareToken,
        generateShareLink,
        canCopy: !isSharedView,
        canShare: !isSharedView,
      }}
    >
      {children}
    </ShareContext.Provider>
  );
}

export function useShare() {
  const context = useContext(ShareContext);
  if (context === undefined) {
    throw new Error("useShare must be used within a ShareProvider");
  }
  return context;
}

```

---
#### `lib/store.ts`

```
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";
import {
  WorkflowStep,
  ContextData,
  ResearchData,
  ProposalData,
  StoryboardData,
  RenderData,
  UploadData,
  GuidelinesData,
  Diretriz,
} from "@/types";
import { v4 as uuidv4 } from "uuid";

// ============================================
// Workflow Store
// ============================================
interface WorkflowStore {
  currentStep: WorkflowStep;
  context: ContextData | null;
  research: ResearchData | null;
  proposal: ProposalData | null;
  storyboard: StoryboardData | null;
  render: RenderData | null;
  upload: UploadData | null;

  // Navigation
  setStep: (step: WorkflowStep) => void;
  canNavigateToStep: (step: WorkflowStep) => boolean;

  // Context (Step 1)
  setContext: (context: ContextData) => void;
  clearContext: () => void;

  // Research (Step 2)
  setResearch: (research: ResearchData) => void;
  clearResearch: () => void;

  // Proposal (Step 4)
  setProposal: (proposal: ProposalData) => void;
  updateProposal: (updates: Partial<ProposalData>) => void;
  clearProposal: () => void;

  // Storyboard (Step 5)
  setStoryboard: (storyboard: StoryboardData) => void;
  updateStoryboard: (updates: Partial<StoryboardData>) => void;
  clearStoryboard: () => void;

  // Render (Step 5)
  setRender: (render: RenderData) => void;
  updateRender: (updates: Partial<RenderData>) => void;
  clearRender: () => void;

  // Upload (Step 6)
  setUpload: (upload: UploadData) => void;
  updateUpload: (updates: Partial<UploadData>) => void;
  clearUpload: () => void;

  // Reset all
  resetWorkflow: () => void;
}

export const useWorkflowStore = create<WorkflowStore>()(
  persist(
    (set, get) => ({
      currentStep: 1,
      context: null,
      research: null,
      proposal: null,
      storyboard: null,
      render: null,
      upload: null,

      setStep: (step) => {
        if (get().canNavigateToStep(step)) {
          set({ currentStep: step });
        }
      },

      canNavigateToStep: (step) => {
        const { context, research, proposal, storyboard } = get();

        switch (step) {
          case 1:
            return true;
          case 2:
            return context !== null;
          case 4:
            return research !== null;
          case 5:
            return proposal !== null && proposal.allApproved;
          case 6:
            return storyboard !== null;
          default:
            return false;
        }
      },

      setContext: (context) => set({ context }),
      clearContext: () => set({ context: null }),

      setResearch: (research) => set({ research }),
      clearResearch: () => set({ research: null }),

      setProposal: (proposal) => set({ proposal }),
      updateProposal: (updates) =>
        set((state) => ({
          proposal: state.proposal ? { ...state.proposal, ...updates } : null,
        })),
      clearProposal: () => set({ proposal: null }),

      setStoryboard: (storyboard) => set({ storyboard }),
      updateStoryboard: (updates) =>
        set((state) => ({
          storyboard: state.storyboard
            ? { ...state.storyboard, ...updates }
            : null,
        })),
      clearStoryboard: () => set({ storyboard: null }),

      setRender: (render) => set({ render }),
      updateRender: (updates) =>
        set((state) => ({
          render: state.render ? { ...state.render, ...updates } : null,
        })),
      clearRender: () => set({ render: null }),

      setUpload: (upload) => set({ upload }),
      updateUpload: (updates) =>
        set((state) => ({
          upload: state.upload ? { ...state.upload, ...updates } : null,
        })),
      clearUpload: () => set({ upload: null }),

      resetWorkflow: () =>
        set({
          currentStep: 1,
          context: null,
          research: null,
          proposal: null,
          storyboard: null,
          render: null,
          upload: null,
        }),
    }),
    {
      name: "orion-workflow",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// Guidelines Store (Global - Not a step)
// ============================================
interface GuidelinesStore {
  guidelines: GuidelinesData;

  // CRUD Operations
  addDiretriz: (diretriz: Omit<Diretriz, "id" | "createdAt" | "updatedAt">) => void;
  updateDiretriz: (id: string, updates: Partial<Diretriz>) => void;
  deleteDiretriz: (id: string) => void;
  toggleDiretriz: (id: string) => void;

  // Getters
  getActiveDiretrizes: () => Diretriz[];
  getDiretrizesForScope: (scope: Diretriz["appliesTo"][number]) => Diretriz[];
}

const defaultGuidelines: GuidelinesData = {
  diretrizes: [],
  updatedAt: new Date().toISOString(),
};

export const useGuidelinesStore = create<GuidelinesStore>()(
  persist(
    (set, get) => ({
      guidelines: defaultGuidelines,

      addDiretriz: (diretriz) => {
        const now = new Date().toISOString();
        const newDiretriz: Diretriz = {
          ...diretriz,
          id: uuidv4(),
          createdAt: now,
          updatedAt: now,
        };
        set((state) => ({
          guidelines: {
            diretrizes: [...state.guidelines.diretrizes, newDiretriz],
            updatedAt: now,
          },
        }));
      },

      updateDiretriz: (id, updates) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, ...updates, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      deleteDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.filter((d) => d.id !== id),
            updatedAt: now,
          },
        }));
      },

      toggleDiretriz: (id) => {
        const now = new Date().toISOString();
        set((state) => ({
          guidelines: {
            diretrizes: state.guidelines.diretrizes.map((d) =>
              d.id === id ? { ...d, active: !d.active, updatedAt: now } : d
            ),
            updatedAt: now,
          },
        }));
      },

      getActiveDiretrizes: () => {
        return get().guidelines.diretrizes.filter((d) => d.active);
      },

      getDiretrizesForScope: (scope) => {
        return get()
          .guidelines.diretrizes.filter((d) => d.active && d.appliesTo.includes(scope));
      },
    }),
    {
      name: "orion-guidelines",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

// ============================================
// UI Store (Non-persistent)
// ============================================
interface UIStore {
  isSidebarOpen: boolean;
  isGuidelinesModalOpen: boolean;
  isApiKeyModalOpen: boolean;
  isConnectApisModalOpen: boolean;
  activeModal: string | null;

  toggleSidebar: () => void;
  setSidebarOpen: (open: boolean) => void;
  openGuidelinesModal: () => void;
  closeGuidelinesModal: () => void;
  openApiKeyModal: () => void;
  closeApiKeyModal: () => void;
  setConnectApisModalOpen: (open: boolean) => void;
  setActiveModal: (modal: string | null) => void;
}

export const useUIStore = create<UIStore>()((set) => ({
  isSidebarOpen: true,
  isGuidelinesModalOpen: false,
  isApiKeyModalOpen: false,
  isConnectApisModalOpen: false,
  activeModal: null,

  toggleSidebar: () => set((state) => ({ isSidebarOpen: !state.isSidebarOpen })),
  setSidebarOpen: (open) => set({ isSidebarOpen: open }),
  openGuidelinesModal: () => set({ isGuidelinesModalOpen: true }),
  closeGuidelinesModal: () => set({ isGuidelinesModalOpen: false }),
  openApiKeyModal: () => set({ isApiKeyModalOpen: true }),
  closeApiKeyModal: () => set({ isApiKeyModalOpen: false }),
  setConnectApisModalOpen: (open) => set({ isConnectApisModalOpen: open }),
  setActiveModal: (modal) => set({ activeModal: modal }),
}));

// ============================================
// Branding Store (White Label System)
// ============================================
interface BrandingStore {
  systemName: string;
  logoUrl: string | null;
  setSystemName: (name: string) => void;
  setLogoUrl: (url: string | null) => void;
  setBranding: (systemName: string, logoUrl: string | null) => void;
  resetBranding: () => void;
}

const defaultBranding = {
  systemName: "ORION",
  logoUrl: null,
};

export const useBrandingStore = create<BrandingStore>()(
  persist(
    (set) => ({
      systemName: defaultBranding.systemName,
      logoUrl: defaultBranding.logoUrl,

      setSystemName: (name) => set({ systemName: name }),
      setLogoUrl: (url) => set({ logoUrl: url }),
      setBranding: (systemName, logoUrl) => set({ systemName, logoUrl }),
      resetBranding: () => set(defaultBranding),
    }),
    {
      name: "orion-branding",
      storage: createJSONStorage(() => localStorage),
    }
  )
);

```

---
#### `lib/system/api-registry.ts`

```
export type ApiStatus = "ONLINE" | "OFFLINE";

export interface ApiCheck {
  name: string;
  env: string;
  check: () => Promise<ApiStatus>;
}

export const apiRegistry: ApiCheck[] = [
  {
    name: "GEMINI",
    env: "GOOGLE_GENERATIVE_AI_API_KEY",
    check: async () => {
      return process.env.GOOGLE_GENERATIVE_AI_API_KEY ? "ONLINE" : "OFFLINE";
    }
  }
];

```

---
#### `lib/system/boot.ts`

```
import { apiRegistry, ApiStatus } from "./api-registry";

export interface BootReport {
  status: "ONLINE" | "DEGRADED";
  apis: Record<string, ApiStatus>;
}

export async function systemBoot(): Promise<BootReport> {
  const apis: Record<string, ApiStatus> = {};
  let degraded = false;

  for (const api of apiRegistry) {
    const status = await api.check();
    apis[api.name] = status;
    if (status !== "ONLINE") degraded = true;
  }

  return {
    status: degraded ? "DEGRADED" : "ONLINE",
    apis
  };
}

```

---
#### `lib/user-profile.ts`

```
import fs from 'fs/promises';
import path from 'path';
import type { UserProfile } from '@/types';

const PROFILE_FILE = path.join(process.cwd(), 'data', 'user-profile.json');

/**
 * Get user profile
 */
export async function getUserProfile(): Promise<UserProfile> {
  try {
    const fileContent = await fs.readFile(PROFILE_FILE, 'utf-8');
    return JSON.parse(fileContent) as UserProfile;
  } catch (error) {
    console.error('Failed to read user profile:', error);
    // Return default profile if file doesn't exist
    return {
      id: 'admin-001',
      name: 'Admin',
      role: 'System Administrator',
      avatarUrl: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Admin',
      bio: 'ORION System Administrator',
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    };
  }
}

/**
 * Update user profile
 */
export async function updateUserProfile(
  updates: Partial<Omit<UserProfile, 'id' | 'createdAt'>>
): Promise<UserProfile> {
  try {
    const currentProfile = await getUserProfile();

    const updatedProfile: UserProfile = {
      ...currentProfile,
      ...updates,
      updatedAt: new Date().toISOString(),
    };

    await fs.writeFile(PROFILE_FILE, JSON.stringify(updatedProfile, null, 2), 'utf-8');

    return updatedProfile;
  } catch (error) {
    console.error('Failed to update user profile:', error);
    throw error;
  }
}

```

---
#### `lib/utils.ts`

```
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatDuration(seconds: number): string {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = Math.floor(seconds % 60);

  if (hours > 0) {
    return `${hours}:${minutes.toString().padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
  }
  return `${minutes}:${secs.toString().padStart(2, "0")}`;
}

export function formatNumber(num: number): string {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + "M";
  }
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + "K";
  }
  return num.toString();
}

export function formatDate(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
  });
}

export function formatDateTime(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString("pt-BR", {
    day: "2-digit",
    month: "short",
    year: "numeric",
    hour: "2-digit",
    minute: "2-digit",
  });
}

export function truncateText(text: string, maxLength: number): string {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength - 3) + "...";
}

export function generateId(): string {
  return Math.random().toString(36).substring(2) + Date.now().toString(36);
}

export function debounce<T extends (...args: unknown[]) => unknown>(
  func: T,
  wait: number
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout | null = null;

  return (...args: Parameters<T>) => {
    if (timeout) clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
}

export function parseCSV(csvText: string): Record<string, string>[] {
  const lines = csvText.trim().split("\n");
  if (lines.length < 2) return [];

  const headers = lines[0].split(",").map((h) => h.trim().replace(/"/g, ""));
  const rows: Record<string, string>[] = [];

  for (let i = 1; i < lines.length; i++) {
    const values = parseCSVLine(lines[i]);
    if (values.length === headers.length) {
      const row: Record<string, string> = {};
      headers.forEach((header, index) => {
        row[header] = values[index];
      });
      rows.push(row);
    }
  }

  return rows;
}

function parseCSVLine(line: string): string[] {
  const values: string[] = [];
  let current = "";
  let inQuotes = false;

  for (let i = 0; i < line.length; i++) {
    const char = line[i];

    if (char === '"') {
      inQuotes = !inQuotes;
    } else if (char === "," && !inQuotes) {
      values.push(current.trim());
      current = "";
    } else {
      current += char;
    }
  }

  values.push(current.trim());
  return values;
}

export function downloadJSON(data: object, filename: string): void {
  const blob = new Blob([JSON.stringify(data, null, 2)], {
    type: "application/json",
  });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

export function estimateReadingTime(text: string, wordsPerMinute = 150): number {
  const wordCount = text.split(/\s+/).length;
  return Math.ceil((wordCount / wordsPerMinute) * 60);
}

```

---
#### `lib/workflow-logger.ts`

```
/**
 * Workflow Logger - Integration helper for adding logs to the workflow
 * 
 * This file provides convenient functions to log workflow events
 */

import { addLog } from '@/app/actions/settings';
import type { LogLevel } from '@/types';

export async function logWorkflowStep(step: string, action: string, details?: Record<string, unknown>) {
  try {
    await addLog('info', 'workflow', `${step}: ${action}`, details);
  } catch (error) {
    console.error('Failed to log workflow step:', error);
  }
}

export async function logWorkflowSuccess(step: string, message: string, details?: Record<string, unknown>) {
  try {
    await addLog('success', 'workflow', `${step}: ${message}`, details);
  } catch (error) {
    console.error('Failed to log workflow success:', error);
  }
}

export async function logWorkflowError(step: string, error: string | Error, details?: Record<string, unknown>) {
  try {
    const errorMessage = error instanceof Error ? error.message : error;
    await addLog('error', 'workflow', `${step}: ${errorMessage}`, details);
  } catch (err) {
    console.error('Failed to log workflow error:', err);
  }
}

export async function logAPICall(apiName: string, action: string, success: boolean, details?: Record<string, unknown>) {
  try {
    const level: LogLevel = success ? 'success' : 'error';
    await addLog(level, 'api', `${apiName}: ${action}`, details);
  } catch (error) {
    console.error('Failed to log API call:', error);
  }
}

export async function logUserAction(action: string, details?: Record<string, unknown>) {
  try {
    await addLog('info', 'user', action, details);
  } catch (error) {
    console.error('Failed to log user action:', error);
  }
}

```

---
#### `lib/workflow-modes.ts`

```
/**
 * ============================================
 * ORION - Sistema de Modos de Workflow
 * ============================================
 *
 * Configuração dos diferentes modos de operação do sistema ORION.
 * Cada modo define um conjunto de funcionalidades e fluxo de trabalho.
 */

import { WorkflowMode } from "@/types";

export interface WorkflowModeConfig {
  id: WorkflowMode;
  nome: string;
  descricao: string;
  descricaoDetalhada: string;
  ativo: boolean;
  recursos: string[];
  icone: string; // Lucide icon name
  cor: string; // Cor do gradiente
  tempoEstimado: string;
  badge?: string;
}

/**
 * Configuração completa de todos os modos disponíveis
 */
export const WORKFLOW_MODES: Record<WorkflowMode, WorkflowModeConfig> = {
  FAST: {
    id: "FAST",
    nome: "Modo Rápido",
    descricao: "Mídia stock + opção de geração IA sob demanda",
    descricaoDetalhada: "Crie vídeos rapidamente usando nossa biblioteca de mídia stock. Opcionalmente, gere mídia customizada com IA quando necessário.",
    ativo: true,
    recursos: [
      "Múltiplas fontes de input (planilha, tema, link, transcrição)",
      "Análise adaptativa com IA",
      "Teste A/B/C de thumbnails para YouTube",
      "Biblioteca de mídia stock (Pexels, Pixabay)",
      "Geração de mídia com IA sob demanda",
      "Upload de mídia própria",
      "Preview obrigatório antes do upload",
      "Feedback em tempo real"
    ],
    icone: "Zap",
    cor: "from-cyan-500 to-blue-600",
    tempoEstimado: "15-30 min",
    badge: "Recomendado"
  },
  STANDARD: {
    id: "STANDARD",
    nome: "Modo Padrão",
    descricao: "Em breve - Equilíbrio entre velocidade e personalização",
    descricaoDetalhada: "Modo balanceado com mais opções de customização e controle sobre o processo de criação.",
    ativo: false,
    recursos: [
      "Todas as funcionalidades do Modo Rápido",
      "Editor de roteiro avançado",
      "Timeline de edição",
      "Mais controles de personalização",
      "Aprovações em múltiplas etapas"
    ],
    icone: "Settings",
    cor: "from-blue-500 to-indigo-600",
    tempoEstimado: "45-60 min"
  },
  PREMIUM: {
    id: "PREMIUM",
    nome: "Modo Premium",
    descricao: "Em breve - Máxima personalização e controle",
    descricaoDetalhada: "Controle total sobre cada aspecto da produção do vídeo, com ferramentas profissionais de edição.",
    ativo: false,
    recursos: [
      "Todas as funcionalidades do Modo Padrão",
      "Editor de vídeo profissional integrado",
      "Biblioteca de transições e efeitos",
      "Animações customizadas",
      "Múltiplas revisões",
      "Exportação em múltiplos formatos",
      "Suporte prioritário"
    ],
    icone: "Crown",
    cor: "from-purple-500 to-pink-600",
    tempoEstimado: "90+ min",
    badge: "Em breve"
  }
};

/**
 * Retorna apenas os modos ativos
 */
export function getActiveModes(): WorkflowModeConfig[] {
  return Object.values(WORKFLOW_MODES).filter(mode => mode.ativo);
}

/**
 * Retorna configuração de um modo específico
 */
export function getModeConfig(mode: WorkflowMode): WorkflowModeConfig {
  return WORKFLOW_MODES[mode];
}

/**
 * Verifica se um modo está ativo
 */
export function isModeActive(mode: WorkflowMode): boolean {
  return WORKFLOW_MODES[mode].ativo;
}

/**
 * Retorna o modo padrão
 */
export function getDefaultMode(): WorkflowMode {
  return "FAST";
}

```

---
#### `next.config.js`

```
/** @type {import('next').NextConfig} */
const nextConfig = {
  eslint: {
    ignoreDuringBuilds: true,
  },
  typescript: {
    ignoreBuildErrors: true,
  },
};

module.exports = nextConfig;

```

---
#### `next.config.ts`

```
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Build will fail on TypeScript/ESLint errors (production-safe)
};

export default nextConfig;

```

---
#### `package.json`

```
{
  "name": "orion",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "jest",
    "vercel:comments": "tsx scripts/get-vercel-comments.ts",
    "vercel:comments:all": "tsx scripts/get-vercel-comments.ts --show-resolved"
  },
  "dependencies": {
    "@ai-sdk/anthropic": "^3.0.23",
    "@ai-sdk/google": "^3.0.13",
    "@ai-sdk/openai": "^3.0.18",
    "@ffmpeg/ffmpeg": "^0.12.15",
    "@ffmpeg/util": "^0.12.2",
    "@google/generative-ai": "^0.24.1",
    "@prisma/client": "^6.19.2",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-progress": "^1.1.8",
    "@radix-ui/react-separator": "^1.1.8",
    "@radix-ui/react-slot": "^1.2.4",
    "@types/xlsx": "^0.0.35",
    "@vercel/analytics": "^1.6.1",
    "@vercel/blob": "^2.0.0",
    "@vercel/speed-insights": "^1.3.1",
    "@vercel/toolbar": "^0.1.32",
    "ai": "^6.0.49",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "framer-motion": "^11.15.0",
    "inngest": "^3.49.3",
    "lucide-react": "^0.469.0",
    "next": "^15.5.9",
    "papaparse": "^5.4.1",
    "prisma": "^6.19.2",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-dropzone": "^14.3.5",
    "recharts": "^3.7.0",
    "resend": "^6.8.0",
    "tailwind-merge": "^2.6.0",
    "uuid": "^11.0.4",
    "xlsx": "^0.18.5",
    "zod": "^3.25.76",
    "zustand": "^5.0.2"
  },
  "devDependencies": {
    "@types/jest": "^30.0.0",
    "@types/node": "^22.10.5",
    "@types/papaparse": "^5.3.15",
    "@types/react": "^19.0.2",
    "@types/react-dom": "^19.0.2",
    "@types/uuid": "^10.0.0",
    "autoprefixer": "^10.4.20",
    "eslint": "^9.17.0",
    "eslint-config-next": "15.1.11",
    "jest": "^30.2.0",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.17",
    "ts-jest": "^29.4.6",
    "tsx": "^4.21.0",
    "typescript": "^5.7.2"
  }
}

```

---
#### `prisma/schema.prisma`

```
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id                   String                @id @default(cuid())
  name                 String
  topic                String
  status               ProjectStatus         @default(PENDING)
  autoMode             Boolean               @default(false)
  mode                 String                @default("FAST")
  tagsFoco             String[]
  linkConcorrente      String?
  transcricao          String?               @db.Text
  createdAt            DateTime              @default(now())
  updatedAt            DateTime              @updatedAt
  render               Render?
  research             Research?
  script               Script?
  storyboard           Storyboard?
  upload               Upload?
  workflowState        WorkflowState?
  youtubeStudioData    YouTubeStudioData?
  competitorAnalysis   CompetitorAnalysis?

  @@index([status])
  @@index([createdAt])
  @@index([mode])
}

model Research {
  id               String   @id @default(cuid())
  projectId        String   @unique
  internalAnalysis Json?
  externalAnalysis Json?
  summary          String?
  status           String   @default("pending")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  project          Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Script {
  id         String    @id @default(cuid())
  projectId  String    @unique
  title      String?
  content    String?
  sections   Json?
  metadata   Json?
  approved   Boolean   @default(false)
  approvedAt DateTime?
  feedback   String?
  status     String    @default("pending")
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  project    Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Storyboard {
  id        String   @id @default(cuid())
  projectId String   @unique
  scenes    Json?
  status    String   @default("pending")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Render {
  id               String    @id @default(cuid())
  projectId        String    @unique
  externalJobId    String?
  videoUrl         String?
  thumbnailUrl     String?
  duration         Int?
  status           String    @default("pending")
  error            String?
  videoPreviewUrl  String?
  previewApproved  Boolean   @default(false)
  previewApprovedAt DateTime?
  previewNotes     String?   @db.Text
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  project          Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Upload {
  id             String    @id @default(cuid())
  projectId      String    @unique
  youtubeVideoId String?
  youtubeUrl     String?
  title          String?
  description    String?
  tags           Json?
  publishedAt    DateTime?
  status         String    @default("pending")
  error          String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  project        Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model WorkflowState {
  id                    String    @id @default(cuid())
  projectId             String    @unique
  currentStep           String    @default("init")
  inngestRunId          String?
  approvalToken         String?   @unique
  researchStartedAt     DateTime?
  researchCompletedAt   DateTime?
  scriptStartedAt       DateTime?
  scriptCompletedAt     DateTime?
  approvalSentAt        DateTime?
  approvedAt            DateTime?
  storyboardStartedAt   DateTime?
  storyboardCompletedAt DateTime?
  renderStartedAt       DateTime?
  renderCompletedAt     DateTime?
  uploadStartedAt       DateTime?
  uploadCompletedAt     DateTime?
  error                 String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  project               Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([approvalToken])
}

model UserSettings {
  id                String   @id @default(cuid())
  email             String   @unique
  notificationEmail String?
  autoApprove       Boolean  @default(false)
  maxRetries        Int      @default(3)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model YouTubeStudioData {
  id          String   @id @default(cuid())
  projectId   String   @unique
  rawData     Json
  totalVideos Int
  analyzedAt  DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model CompetitorAnalysis {
  id               String   @id @default(cuid())
  projectId        String   @unique
  videoUrl         String
  videoTitle       String?
  videoDescription String?  @db.Text
  videoTags        String[]
  analyzedAt       DateTime @default(now())
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  project          Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

enum ProjectStatus {
  PENDING
  RESEARCHING
  SCRIPTING
  AWAITING_APPROVAL
  APPROVED
  STORYBOARDING
  RENDERING
  UPLOADING
  COMPLETED
  FAILED
}

```

---
#### `tailwind.config.ts`

```
import type { Config } from "tailwindcss";
import tokens from "./lib/design-tokens";

/**
 * ============================================
 * ORION Design System - Tailwind Configuration
 * ============================================
 *
 * Configuração estendida do Tailwind CSS
 * sincronizada com o Design System ORION.
 *
 * FONTE PRIMÁRIA: lib/design-tokens.ts
 * Este arquivo força o uso dos design tokens
 * TypeScript como single source of truth.
 */
const config: Config = {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      // ========================================
      // CORES - Paleta ORION (Design Tokens)
      // ========================================
      colors: {
        background: tokens.colors.backgrounds.layer0,
        foreground: tokens.colors.text.primary,
        layer: tokens.colors.backgrounds,
        surface: tokens.colors.surfaces,
        border: tokens.colors.borders,
        text: tokens.colors.text,
        
        // Paletas da marca
        orion: tokens.colors.brand.blue,
        'orion-red': tokens.colors.brand.red,
        
        // Paletas de acento
        cyan: tokens.colors.accent.cyan,
        indigo: tokens.colors.accent.indigo,
        violet: tokens.colors.accent.violet,

        // Cores semânticas
        success: {
          DEFAULT: tokens.colors.semantic.success.solid,
          bg: tokens.colors.semantic.success.bg,
          border: tokens.colors.semantic.success.border,
          text: tokens.colors.semantic.success.text,
        },
        warning: {
          DEFAULT: tokens.colors.semantic.warning.solid,
          bg: tokens.colors.semantic.warning.bg,
          border: tokens.colors.semantic.warning.border,
          text: tokens.colors.semantic.warning.text,
        },
        error: {
          DEFAULT: tokens.colors.semantic.error.solid,
          bg: tokens.colors.semantic.error.bg,
          border: tokens.colors.semantic.error.border,
          text: tokens.colors.semantic.error.text,
        },
        info: {
          DEFAULT: tokens.colors.semantic.info.solid,
          bg: tokens.colors.semantic.info.bg,
          border: tokens.colors.semantic.info.border,
          text: tokens.colors.semantic.info.text,
        },
        
        // Efeitos
        glow: tokens.colors.effects,
        highlight: tokens.colors.effects.highlight,
        
        // Paleta de utilidade (mantida para flexibilidade)
        slate: {
          50: "#F8FAFC",
          100: "#F1F5F9",
          200: "#E2E8F0",
          300: "#CBD5E1",
          400: "#94A3B8",
          500: "#64748B",
          600: "#475569",
          700: "#334155",
          800: "#1E293B",
          900: "#0F172A",
          950: "#020617",
        },
      },
      
      // ========================================
      // TIPOGRAFIA
      // ========================================
      fontFamily: tokens.typography.fonts,
      fontSize: tokens.typography.sizes,

      // ========================================
      // ESPAÇAMENTO
      // ========================================
      spacing: {
        ...tokens.spacing,
        // Mantendo customizações específicas se necessário
        "4.5": "1.125rem",
        "5.5": "1.375rem",
        "18": "4.5rem",
        "22": "5.5rem",
      },

      // ========================================
      // BORDER RADIUS
      // ========================================
      borderRadius: tokens.radius,

      // ========================================
      // SOMBRAS
      // ========================================
      boxShadow: {
        ...tokens.shadows, // sm, md, lg, xl, 2xl, inner, card, etc
        'glow-blue': tokens.shadows.glowBlue,
        'glow-cyan': tokens.shadows.glowCyan,
        'glow-violet': tokens.shadows.glowViolet,
      },

      // ========================================
      // GRADIENTES
      // ========================================
      backgroundImage: tokens.gradients,

      // ========================================
      // ANIMAÇÕES E KEYFRAMES
      // ========================================
      animation: {
        "fade-in": "fadeIn 0.2s ease-out",
        "fade-in-up": "fadeInUp 0.3s ease-out forwards",
        "fade-in-down": "fadeInDown 0.3s ease-out forwards",
        "slide-in-right": "slideInRight 0.3s ease-out forwards",
        "slide-in-left": "slideInLeft 0.3s ease-out forwards",
        "scale-in": "scaleIn 0.2s ease-out forwards",
        "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
        "spin-slow": "spin 3s linear infinite",
        "float": "float 3s ease-in-out infinite",
        "shimmer": "shimmer 2s ease-in-out infinite",
        "gradient-border": "gradientBorder 4s ease infinite",
      },
      keyframes: {
        fadeIn: { from: { opacity: "0" }, to: { opacity: "1" } },
        fadeInUp: { from: { opacity: "0", transform: "translateY(10px)" }, to: { opacity: "1", transform: "translateY(0)" } },
        fadeInDown: { from: { opacity: "0", transform: "translateY(-10px)" }, to: { opacity: "1", transform: "translateY(0)" } },
        slideInRight: { from: { opacity: "0", transform: "translateX(20px)" }, to: { opacity: "1", transform: "translateX(0)" } },
        slideInLeft: { from: { opacity: "0", transform: "translateX(-20px)" }, to: { opacity: "1", transform: "translateX(0)" } },
        scaleIn: { from: { opacity: "0", transform: "scale(0.95)" }, to: { opacity: "1", transform: "scale(1)" } },
        float: { "0%, 100%": { transform: "translateY(0)" }, "50%": { transform: "translateY(-5px)" } },
        shimmer: { "0%": { "background-position": "-200% 0" }, "100%": { "background-position": "200% 0" } },
        gradientBorder: { "0%, 100%": { "background-position": "0% 50%" }, "50%": { "background-position": "100% 50%" } },
      },

      // ========================================
      // TRANSIÇÕES
      // ========================================
      transitionDuration: tokens.motion.duration,
      transitionTimingFunction: tokens.motion.easing,

      // ========================================
      // Z-INDEX
      // ========================================
      zIndex: Object.fromEntries(Object.entries(tokens.zIndex).map(([k, v]) => [k, String(v)])),
      
      // ========================================
      // BLUR
      // ========================================
      backdropBlur: {
        xs: "2px"
      },
    },
  },
  plugins: [],
};

export default config;
```

---
#### `tsconfig.json`

```
{
  "compilerOptions": {
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "target": "ES2017"
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}

```

